(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"+H5O":function(e,t,i){"use strict";i.d(t,"a",function(){return d});var s=i("lJxs"),n=i("dRcD"),a=i("de78"),o=i("fXoL"),r=i("Y9qQ"),c=i("yUlE");const l=["paginatedTree"];let d=(()=>{class e{constructor(e,t){this._backendService=e,this.changeDetector=t}ngOnInit(){this.user_id=n.a.getInstance().id;let e=new u(10,1,3,15,this._backendService,this.course_id,this.user_id);this.treeParamsBrowse={has_search:!0,selection_mode:"single",mode:"browse",node_actions:[],source:e}}getFirstId(){let e=this.paginatedTree?this.paginatedTree.getSelectedNodesIds():"";return e.length?e[0].id:""}}return e.\u0275fac=function(t){return new(t||e)(o.ec(r.a),o.ec(o.i))},e.\u0275cmp=o.Yb({type:e,selectors:[["folder-list"]],viewQuery:function(e,t){if(1&e&&o.nd(l,1),2&e){let e;o.Rc(e=o.tc())&&(t.paginatedTree=e.first)}},inputs:{course_id:"course_id"},decls:3,vars:5,consts:[[1,"tree-wrap"],[3,"source","selection_mode","has_search","node_actions","mode"],["paginatedTree",""]],template:function(e,t){1&e&&(o.kc(0,"div",0),o.fc(1,"tree",1,2),o.jc()),2&e&&(o.Mb(1),o.Dc("source",t.treeParamsBrowse.source)("selection_mode",t.treeParamsBrowse.selection_mode)("has_search",t.treeParamsBrowse.has_search)("node_actions",t.treeParamsBrowse.node_actions)("mode",t.treeParamsBrowse.mode))},directives:[c.b],encapsulation:2}),e})();class u extends a.b{constructor(e=0,t,i,s,n,a,o){super(e,t,i,s,n),this.current_node=e,this.current_page=t,this.page_size=i,this.total=s,this.serviceProvider=n,this.course_id=a,this.user_id=o}fetchData(e){let t=e;return this.course_id&&(t.course_id=this.course_id),this.user_id&&(t.user_id=this.user_id),this.serviceProvider.request("/learn/v1/filerepo/getCourseFoldersTree","GET",t).pipe(Object(s.a)(e=>{for(let t=0;t<e.data.items.length;t++)e.data.items[t].selection_status=0;return e}))}}},"/kCD":function(e,t,i){"use strict";i.d(t,"b",function(){return E}),i.d(t,"a",function(){return A}),i.d(t,"c",function(){return M});var s=i("mrSG"),n=i("o6wD"),a=i("gvJE"),o=i("LvDl"),r=i.n(o),c=i("zP0r"),l=i("V3DN"),d=i("mJ9n"),u=i("zMZL"),h=i("Rm6y"),p=i("fXoL"),g=i("tyNb"),m=i("+sIT"),b=i("S2Qf"),f=i("L+kn"),_=i("ofXK"),v=i("IfWP"),y=i("Ti3B");let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p.Yb({type:e,selectors:[["ilt-instructor-legacy-iframe"]],inputs:{url:"url"},decls:2,vars:7,consts:[[1,"embedded-iframe-tab"],[3,"url","allowRouteUpdate","allowBreadcrumbsUpdate","allowActionButtonsUpdate","allowRebootLMS","allowStripeOverlayToggle","allowClearHeaderTitle"]],template:function(e,t){1&e&&(p.kc(0,"div",0),p.fc(1,"doc-layout-legacy-wrapper",1),p.jc()),2&e&&(p.Mb(1),p.Dc("url",t.url)("allowRouteUpdate",!1)("allowBreadcrumbsUpdate",!1)("allowActionButtonsUpdate",!1)("allowRebootLMS",!0)("allowStripeOverlayToggle",!1)("allowClearHeaderTitle",!1))},directives:[y.a],styles:["[_nghost-%COMP%]{display:block;height:100%}[_nghost-%COMP%]     .embedded-iframe-tab .legacy-spinner-wrap{height:calc(100% - 50px)}.embedded-iframe-tab[_ngcontent-%COMP%]   .blankslate[_ngcontent-%COMP%]{display:flex;align-items:center;box-sizing:border-box;height:100%}"]}),e})();var C=i("YXR0");function S(e,t){if(1&e&&p.fc(0,"ilt-instructor-legacy-iframe",6),2&e){const e=p.wc(2);p.Dc("url",e.tabTrainingMaterialUrl)}}function k(e,t){if(1&e&&(p.kc(0,"tab",3),p.ed(1,S,1,1,"ilt-instructor-legacy-iframe",5),p.jc()),2&e){const e=p.wc();p.Dc("title",e.trainingMaterialTabTitle)("name",e.tabsParamsName.trainingMaterial)("defaultTab",e.initialTab===e.tabsParamsName.trainingMaterial),p.Mb(1),p.Dc("ngIf",e.wasTabLoaded(e.tabsParamsName.trainingMaterial))}}function T(e,t){if(1&e&&p.fc(0,"ilt-instructor-session-list",7),2&e){const e=p.wc();p.Dc("courseId",e.course.id)}}function I(e,t){if(1&e&&p.fc(0,"ilt-instructor-legacy-iframe",6),2&e){const e=p.wc(2);p.Dc("url",e.tabStatisticUrl)}}function x(e,t){if(1&e&&(p.kc(0,"tab",3),p.ed(1,I,1,1,"ilt-instructor-legacy-iframe",5),p.jc()),2&e){const e=p.wc();p.Dc("title",e.statisticsTabTitle)("name",e.tabsParamsName.statistic)("defaultTab",e.initialTab===e.tabsParamsName.statistic),p.Mb(1),p.Dc("ngIf",e.wasTabLoaded(e.tabsParamsName.statistic))}}function D(e,t){if(1&e&&p.fc(0,"ilt-instructor-legacy-iframe",6),2&e){const e=p.wc(2);p.Dc("url",e.tabReportsUrl)}}function O(e,t){if(1&e&&(p.kc(0,"tab",3),p.ed(1,D,1,1,"ilt-instructor-legacy-iframe",5),p.jc()),2&e){const e=p.wc();p.Dc("title",e.reportsTabTitle)("name",e.tabsParamsName.reports)("defaultTab",e.initialTab===e.tabsParamsName.reports),p.Mb(1),p.Dc("ngIf",e.wasTabLoaded(e.tabsParamsName.reports))}}const E="tab";var A=function(e){return e.trainingMaterial="trainingMaterial",e.sessions="sessions",e.statistic="statistic",e.reports="reports",e}({});const P=A.trainingMaterial;let M=(()=>{class e extends n.g{constructor(e,t,i,s,n,o){super(s),this.route=e,this.router=t,this.docService=i,this.pageService=n,this.iltSessionService=o,this.SUPPORTED_TABS=this.isOnlyEventInstructor?[A.sessions]:[A.trainingMaterial,A.sessions,A.statistic,A.reports],this.trainingMaterialTabTitle=a.a.t("standard","Training materials"),this.sessionsTabTitle=a.a.t("standard","Sessions"),this.reportsTabTitle=a.a.t("standard","_REPORTS"),this.statisticsTabTitle=a.a.t("stats","Session statistics"),this.selectedTabName=A.trainingMaterial,this._loadedTabs=new Map,this._preventNavigation=!1,this._accessToken=u.a.getInstance().get("access_token").access_token}get tabsParamsName(){return A}get accessToken(){return this._accessToken}set accessToken(e){this._accessToken=e}get tabTrainingMaterialUrl(){return`/lms/index.php?r=ClassroomApp/session/manageLearningObjects&course_id=${this.course.id}&access_token=${this._accessToken}&context=course_management`}get tabReportsUrl(){let e;return e=this.user?`/lms/index.php?r=player/report/byUser&ref_src=admin&course_id=${this.course.id}&user_id=${this.user}`:`/lms/index.php?r=player/report&ref_src=admin&course_id=${this.course.id}`,`${e}&access_token=${this._accessToken}&context=course_management`}get tabStatisticUrl(){return`/admin/index.php?r=reportManagement/classroomCourseReport&course_id=${this.course.id}&access_token=${this._accessToken}&context=course_management`}get isOnlyEventInstructor(){return this.iltSessionService.permissions.isEventInstructor&&!this.iltSessionService.permissions.isSessionInstructor}ngOnInit(){this.course=this.route.snapshot.data.course,this.user=this.route.snapshot.params.id_user,this.setupTabs(),this.setupDocLayout(),window.addEventListener("message",e=>{"legacy.openCourseTab"==e.data.action&&"reports"===e.data.payload.tabId&&this.onTabSelected(A.reports)},!1)}ngAfterViewInit(){r.a.delay(()=>{this.calculateDimensions()},250)}ngOnDestroy(){super.ngOnDestroy(),window.removeEventListener("message",()=>{})}setupDocLayout(e=!1){this.setupBreadcrumbs(),this.docService.header.showTitleBar({title:this.course.name,subtitle:a.a.t("classroom","View your sessions"),fullWidth:!0,mode:"shadowed"}),e||this.docService.page.activateFullHeightMode()}setupTabs(){var e;const t=this.route.snapshot.queryParamMap.get(E),i=null!==(e=r.a.includes(this.SUPPORTED_TABS,t)?t:null)&&void 0!==e?e:P;this.selectedTabName=this.initialTab=i,this._loadedTabs.set(this.initialTab,!0),this.subscribeTo(this.route.queryParamMap.pipe(Object(c.a)(1)).subscribe(e=>{var t;const i=null!==(t=e.get(E))&&void 0!==t?t:P;this._preventNavigation=!0,this.selectTab(i)}))}wasTabLoaded(e){var t;return null!==(t=this._loadedTabs.get(e))&&void 0!==t&&t}selectTab(e){const t=r.a.indexOf(this.SUPPORTED_TABS,e);-1!==t&&this.tabsManager.onTabChoose(t)}onTabSelected(e){return Object(s.a)(this,void 0,void 0,function*(){yield this.adjustQueryString(e),this.selectedTabName!==e&&r.a.includes(this.SUPPORTED_TABS,e)&&(this.selectedTabName=e,this._loadedTabs.set(e,!0))})}setupBreadcrumbs(e=this.selectedTabName){this.docService.breadcrumbs.setHierarchicalBreadcrumbs([{label:h.a.myCoursesAndLearningPlans,href:"/learn/mycourses"},{label:this.course.name,href:`/learn/course/${this.course.id}`},{label:"Instructor Overview",href:`/learn/instructor/course/${this.course.id}`,queryParameters:{tab:e}}])}adjustQueryString(e){return Object(s.a)(this,void 0,void 0,function*(){this.accessToken=u.a.getInstance().get("access_token").access_token,this._preventNavigation?this._preventNavigation=!1:(yield this.router.navigate([],Object.assign({queryParams:{tab:e},relativeTo:this.route,replaceUrl:!0},l.b)),setTimeout(()=>{this.setupDocLayout(!0)}))})}}return e.\u0275fac=function(t){return new(t||e)(p.ec(g.a),p.ec(g.h),p.ec(m.a),p.ec(p.o),p.ec(b.c),p.ec(f.a))},e.\u0275cmp=p.Yb({type:e,selectors:[["ilt-instructor-overview-landing"]],viewQuery:function(e,t){if(1&e&&p.nd(d.a,3),2&e){let e;p.Rc(e=p.tc())&&(t.tabsManager=e.first)}},features:[p.Jb],decls:7,vars:7,consts:[[1,"course-edit"],[3,"tabChoose"],[3,"title","name","defaultTab",4,"ngIf"],[3,"title","name","defaultTab"],[3,"courseId",4,"ngIf"],[3,"url",4,"ngIf"],[3,"url"],[3,"courseId"]],template:function(e,t){1&e&&(p.kc(0,"div",0),p.kc(1,"tabs-manager",1),p.sc("tabChoose",function(e){return t.onTabSelected(e)}),p.ed(2,k,2,4,"tab",2),p.kc(3,"tab",3),p.ed(4,T,1,1,"ilt-instructor-session-list",4),p.jc(),p.ed(5,x,2,4,"tab",2),p.ed(6,O,2,4,"tab",2),p.jc(),p.jc()),2&e&&(p.Mb(2),p.Dc("ngIf",!t.isOnlyEventInstructor),p.Mb(1),p.Dc("title",t.sessionsTabTitle)("name",t.tabsParamsName.sessions)("defaultTab",t.initialTab===t.tabsParamsName.sessions),p.Mb(1),p.Dc("ngIf",t.wasTabLoaded(t.tabsParamsName.sessions)),p.Mb(1),p.Dc("ngIf",!t.isOnlyEventInstructor),p.Mb(1),p.Dc("ngIf",!t.isOnlyEventInstructor))},directives:[d.a,_.p,v.a,w,C.a],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}[_nghost-%COMP%]{display:block}.course-edit[_ngcontent-%COMP%]{height:calc(100vh - 172px)}.course-edit[_ngcontent-%COMP%]     .tabs-manager .tabs-labels{padding:0!important}.course-edit[_ngcontent-%COMP%]     .tabs-manager .tabs-content{height:calc(100% - 53px)}@supports (-moz-appearance:none){.course-edit[_ngcontent-%COMP%]     .tabs-manager .tabs-content{height:calc(100vh - 53px)}}.course-edit[_ngcontent-%COMP%]     .tabs-manager .tab.tab-visible{height:100%}"],changeDetection:0}),e})()},"076Y":function(e,t,i){"use strict";i.d(t,"a",function(){return C});var s=i("3Pt+"),n=i("A+3w"),a=i("/76g"),o=i("TrxT"),r=i("1G5W"),c=i("Kj3r"),l=i("/uUt"),d=i("pLZG"),u=i("fXoL"),h=i("XNiG"),p=i("eIep"),g=i("lJxs"),m=i("wO+i"),b=i("Y9qQ");let f=(()=>{class e{constructor(e){this.backendService=e,this.searchSources$=new h.a,this.searchSuggestions$=this.searchSources$.pipe(Object(c.a)(500),Object(p.a)(e=>this.search(e)))}search(e){return this.backendService.request("/manage/v1/tags","GET",{search_tag:e.query,page:1,page_size:10}).pipe(Object(g.a)(t=>(t.data.items=t.data.items.map(t=>({name:t.name,id:e.mappedToId?t.id:t.name})),t.data.items)))}add(e){return this.backendService.request("/manage/v1/tags","POST",{tag:e}).pipe(Object(m.a)("data"))}}return e.\u0275fac=function(t){return new(t||e)(u.oc(b.a))},e.\u0275prov=u.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var _=i("+sIT"),v=i("f2BR"),y=i("gvJE");const w=["tagsMultiSelect"];let C=(()=>{class e extends o.a{constructor(e,t){super(),this.assetTags=e,this.docLayoutService=t,this.preselected=[],this.mappedToId=!1,this.maxTagCharacterLength=32,this.multiSelectMode=n.a.AUTOCOMPLETE,this.multiSelectShowLoader=!1,this.multiSelectSource=[],this.multiSelectPreselected=[],this.dictionary={tagsLabel:a.a.t("app7020","Tags"),multiSelectPlaceholder:a.a.t("standard","Type...")},this.assetTags.searchSuggestions$.pipe(Object(r.a)(this.ngUnsubscribe)).subscribe(e=>{this.multiSelectShowLoader=!1,this.multiSelectSource=e})}ngOnInit(){this.preselected&&this.preselected.length&&(this.multiSelectPreselected=this.preselected.map(e=>e.id),this.multiSelectSource=this.preselected)}ngAfterViewInit(){this._manageTagLengthValidation()}searchAvailableTags(e){this.multiSelectSource=[],e.length<3||(this.multiSelectShowLoader=!0,this.assetTags.searchSources$.next({query:e,mappedToId:this.mappedToId}))}addNewTag(e){(null==e?void 0:e.length)&&(this.multiSelectShowLoader=!0,this.assetTags.add(e).subscribe(e=>{const t={id:this.mappedToId?e.id:e.tag,name:e.tag};this.multiSelectSource.push(t),this.tagsMultiSelect.select(t),this.multiSelectShowLoader=!1},()=>{this.docLayoutService.toast.showToast({type:"error",message:a.a.t("standard","_OPERATION_FAILURE")}),this.multiSelectShowLoader=!1}))}markControlAsDirty(){this.inputFormControl.markAsTouched(),this.inputFormControl.markAsDirty(),this.inputFormControl.updateValueAndValidity(),this._checkValidityOfInnerMultiselectInput()}_setMultiSelectAsInvalidMaxCharacters(){this.inputFormControl.setErrors({remote:a.a.t("standard","The required maximum length is {x} characters.",{x:this.maxTagCharacterLength})}),this.tagsMultiSelect.canEnterItems=!1}_checkValidityOfInnerMultiselectInput(){this.tagsMultiSelect.innerControl.value.length>this.maxTagCharacterLength&&this._setMultiSelectAsInvalidMaxCharacters()}_manageTagLengthValidation(){const e=this.tagsMultiSelect.innerControl;e.setValidators([s.x.maxLength(this.maxTagCharacterLength)]),e.valueChanges.pipe(Object(c.a)(300),Object(l.a)(),Object(d.a)(e=>e.length>0&&e.length>this.maxTagCharacterLength),Object(r.a)(this.ngUnsubscribe)).subscribe(()=>{this._setMultiSelectAsInvalidMaxCharacters()}),e.valueChanges.pipe(Object(c.a)(300),Object(l.a)(),Object(d.a)(e=>e.length>0&&e.length<=this.maxTagCharacterLength),Object(r.a)(this.ngUnsubscribe)).subscribe(()=>{e.value.length<=this.maxTagCharacterLength&&this.inputFormControl.setErrors(null),this.inputFormControl.value.length>this.tagsMultiSelect.max_selectable_items&&this.inputFormControl.setValue(this.inputFormControl.value),this.tagsMultiSelect.canEnterItems=!0})}}return e.\u0275fac=function(t){return new(t||e)(u.ec(f),u.ec(_.a))},e.\u0275cmp=u.Yb({type:e,selectors:[["app7020-asset-tags"]],viewQuery:function(e,t){if(1&e&&u.nd(w,1),2&e){let e;u.Rc(e=u.tc())&&(t.tagsMultiSelect=e.first)}},inputs:{inputFormControl:"inputFormControl",preselected:"preselected",mappedToId:"mappedToId"},features:[u.Jb],decls:4,vars:18,consts:[[3,"showCounter","showRequiredFieldIndicator","applySourceRegex","suggestionsMaxHeight","max_selectable_items","applyLoaderOffset","canEnterItems","showLoader","mode","label","placeholder","inputFormControl","value","source","onChange","onInputKeyEnter","onItemSelection","onItemDeletion"],["tagsMultiSelect",""]],template:function(e,t){1&e&&(u.kc(0,"multi-select",0,1),u.sc("onChange",function(e){return t.searchAvailableTags(e)})("onInputKeyEnter",function(e){return t.addNewTag(null==e?null:e.controlValue)})("onItemSelection",function(){return t.markControlAsDirty()})("onItemDeletion",function(){return t.markControlAsDirty()}),u.xc(2,"t"),u.xc(3,"t"),u.jc()),2&e&&u.Dc("showCounter",!0)("showRequiredFieldIndicator",!1)("applySourceRegex",!1)("suggestionsMaxHeight",130)("max_selectable_items",50)("applyLoaderOffset",!0)("canEnterItems",!0)("showLoader",t.multiSelectShowLoader)("mode",t.multiSelectMode)("label",u.yc(2,14,t.dictionary.tagsLabel))("placeholder",u.yc(3,16,t.dictionary.multiSelectPlaceholder))("inputFormControl",t.inputFormControl)("value",t.multiSelectPreselected)("source",t.multiSelectSource)},directives:[v.a],pipes:[y.b],styles:[""]}),e})()},"0FX9":function(e,t,i){var s=i("Z92M"),n=i("qmMu"),a=i("QUaw"),o=i("QAZZ");function r(e,t,i,a,o){var r=[].slice.call(arguments,1),c=r.length,l="function"==typeof r[c-1];if(!l&&!s())throw new Error("Callback required as last argument");if(!l){if(c<1)throw new Error("Too few arguments provided");return 1===c?(i=t,t=a=void 0):2!==c||t.getContext||(a=i,i=t,t=void 0),new Promise(function(s,o){try{var r=n.create(i,a);s(e(r,t,a))}catch(c){o(c)}})}if(c<2)throw new Error("Too few arguments provided");2===c?(o=i,i=t,t=a=void 0):3===c&&(t.getContext&&void 0===o?(o=a,a=void 0):(o=a,a=i,i=t,t=void 0));try{var d=n.create(i,a);o(null,e(d,t,a))}catch(u){o(u)}}t.create=n.create,t.toCanvas=r.bind(null,a.render),t.toDataURL=r.bind(null,a.renderToDataURL),t.toString=r.bind(null,function(e,t,i){return o.render(e,i)})},"0vgW":function(e){e.exports=JSON.parse('{"a":{"id":292,"code":null,"names":{"en":"Widget","fa":"Widget","fi":"Widget","it":"Widget"},"descriptions":{"en":"A sample page with widgets","fa":"A sample page with widgets","fi":"A sample page with widgets","it":"A sample page with widgets"},"icon":"zmdi zmdi-view-dashboard","built_in":0,"type":"widget","is_public":0,"published":1,"settings":[],"created_on":null,"updated_on":1519381051,"last_edit_by":{},"widgets":[{"id":"1111","widget":"row","type":"parent","name":{"en":"Row","fa":"Row","fi":"Row","it":"Row"},"settings":{"mode":"boxed"},"contains":[{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":4},"contains":[{"id":"0","type":"child","widget":"sample","settings":{"color":"red"}}]},{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":4},"contains":[{"id":"0","type":"child","widget":"sample","settings":{"color":"green"}}]},{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":4},"contains":[{"id":"0","type":"child","widget":"sample","settings":{"color":"blue"}}]}]},{"id":"1111","widget":"row","type":"parent","name":{"en":"Row","fa":"Row","fi":"Row","it":"Row"},"settings":{"mode":"boxed"},"contains":[{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":4},"contains":[{"id":"0","type":"child","widget":"sample","settings":{"color":"yellow"}}]},{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":8},"contains":[{"id":"0","type":"child","widget":"sample","settings":{"color":"orange"}}]}]},{"id":"1111","widget":"row","type":"parent","name":{"en":"Row","fa":"Row","fi":"Row","it":"Row"},"settings":{"mode":"boxed"},"contains":[{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":8},"contains":[{"id":"0","type":"child","widget":"sample","settings":{"color":"red"}}]},{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":4},"contains":[{"id":"0","type":"child","widget":"sample","settings":{"color":"green"}}]}]},{"id":"1111","widget":"row","type":"parent","name":{"en":"Row","fa":"Row","fi":"Row","it":"Row"},"settings":{"mode":"boxed"},"contains":[{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":12},"contains":[{"id":"0","type":"child","widget":"sample","settings":{"color":"yellow"}}]}]}]}}')},"1frc":function(e,t,i){"use strict";var s=i("Fs3U");i.d(t,"a",function(){return s.a});var n=i("q6/4");i.d(t,"b",function(){return n.a})},"1sBl":function(e,t,i){var s=i("e/Dd").getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];for(var t=Math.floor(e/7)+2,i=s(e),n=145===i?26:2*Math.ceil((i-13)/(2*t-2)),a=[i-7],o=1;o<t-1;o++)a[o]=a[o-1]-n;return a.push(6),a.reverse()},t.getPositions=function(e){for(var i=[],s=t.getRowColCoords(e),n=s.length,a=0;a<n;a++)for(var o=0;o<n;o++)0===a&&0===o||0===a&&o===n-1||a===n-1&&0===o||i.push([s[a],s[o]]);return i}},"1uah":function(e,t,i){"use strict";i.d(t,"a",function(){return c});var s=i("yCtX"),n=i("DH7j"),a=i("7o/Q"),o=i("Lhse"),r=i("zx2A");function c(...e){const t=e[e.length-1];return"function"==typeof t&&e.pop(),Object(s.a)(e,void 0).lift(new l(t))}class l{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new d(e,this.resultSelector))}}class d extends a.a{constructor(e,t,i=Object.create(null)){super(e),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(e){const t=this.iterators;Object(n.a)(e)?t.push(new h(e)):t.push("function"==typeof e[o.a]?new u(e[o.a]()):new p(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let i=0;i<t;i++){let t=e[i];t.stillUnsubscribed?this.destination.add(t.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,i=this.destination;for(let a=0;a<t;a++){let t=e[a];if("function"==typeof t.hasValue&&!t.hasValue())return}let s=!1;const n=[];for(let a=0;a<t;a++){let t=e[a],o=t.next();if(t.hasCompleted()&&(s=!0),o.done)return void i.complete();n.push(o.value)}this.resultSelector?this._tryresultSelector(n):i.next(n),s&&i.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class u{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return Boolean(e&&e.done)}}class h{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[o.a](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class p extends r.b{constructor(e,t,i){super(e),this.parent=t,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[o.a](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e){this.buffer.push(e),this.parent.checkIterators()}subscribe(){return Object(r.c)(this.observable,new r.a(this))}}},"2NKM":function(e,t,i){"use strict";i.d(t,"a",function(){return s});class s{}},"2Rox":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var s=function(e){return e[e.TO_BE_STARTED="to_be_started"]="TO_BE_STARTED",e[e.STARTED="started"]="STARTED",e[e.SUBMITTED="submitted"]="SUBMITTED",e}({})},"3/UW":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("fXoL");let n=(()=>{class e{loadOverviewInfo(t,i=!1){return{type:e.LOAD_OVERVIEW_INFO,payload:{courseId:t,sessionId:i}}}loadOvervewInfoSuccess(t){return{type:e.LOAD_OVERVIEW_INFO_SUCCESS,payload:t}}loadOverviewInfoRejected(t){return{type:e.LOAD_OVERVIEW_INFO_REJECTED,payload:t}}requestSessionChange(t){return{type:e.REQUEST_CHANGE,payload:t}}changeSession(t){return{type:e.CHANGE_SESSION,payload:t}}enrollUserToSession(t,i,s){return{type:e.ENROLL_USER_TO_SESSION,payload:{courseId:t,sessionId:i,isEnrolled:s}}}enrollUserToSessionSuccess(t,i){return{type:e.ENROLL_USER_TO_SESSION_SUCCESS,payload:{courseId:t,sessionId:i}}}changeEnrollmentSessionSuccess(t){return{type:e.CHANGE_SESSION_ENROLLMENT_SUCCESS,payload:t}}changeEnrollmentSession(t){return{type:e.CHANGE_SESSION_ENROLLMENT,payload:{new_session_id:t.new_session.id,old_session_id:t.old_session_id,course_id:t.course_id,new_session:t.new_session}}}changeEnrollmentSessionError(t){return{type:e.CHANGE_SESSION_ENROLLMENT_ERROR,payload:t}}}return e.LOAD_OVERVIEW_INFO="[Overview] Load Overview Info",e.LOAD_OVERVIEW_INFO_SUCCESS="[Overview] Load Overview Info Success",e.LOAD_OVERVIEW_INFO_REJECTED="[Overview] Load Overview Info Rejected",e.REQUEST_CHANGE="[Overview] Request change",e.CHANGE_SESSION="[Overview] Change Session",e.ENROLL_USER_TO_SESSION="[Overview] Enroll User to session",e.ENROLL_USER_TO_SESSION_SUCCESS="[Overview] Enroll User to session success",e.CHANGE_SESSION_ENROLLMENT_SUCCESS="[Overview] Change user enrollment session success",e.CHANGE_SESSION_ENROLLMENT="[Overview] Change user enrollment session",e.CHANGE_SESSION_ENROLLMENT_ERROR="[Overview] Change user enrollment session error",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.ac({token:e,factory:e.\u0275fac}),e})()},"3X7Y":function(e,t,i){var s=i("u/Db");function n(e){this.mode=s.NUMERIC,this.data=e.toString()}n.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){var t,i,s;for(t=0;t+3<=this.data.length;t+=3)i=this.data.substr(t,3),s=parseInt(i,10),e.put(s,10);var n=this.data.length-t;n>0&&(i=this.data.substr(t),s=parseInt(i,10),e.put(s,3*n+1))},e.exports=n},"3pRn":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("fXoL");let n=(()=>{class e{setInitialState(){return{type:e.SET_INITIAL_STATE}}loadLaunchParams(t){return{type:e.LOAD_LAUNCH_PARAMS,payload:t}}reloadLaunchParams(t){return{type:e.RELOAD_LAUNCH_PARAMS,payload:t}}reloadQuizMaxScore(t){return{type:e.RELOAD_QUIZ_MAX_SCORE,payload:t}}startPlaying(t){return{type:e.START_PLAYING,payload:t}}retakeTheTest(t){return{type:e.RETAKE_THE_TEST,payload:t}}continuePlaying(t){return{type:e.CONTINUE_PLAYING,payload:t}}leaveReviewMode(){return{type:e.LEAVE_REVIEW_MODE}}leavePlayMode(t){return{type:e.LEAVE_PLAY_MODE,payload:t}}goToPrevPage(t){return{type:e.GO_TO_PREV_PAGE,payload:t}}goToNextPage(t){return{type:e.GO_TO_NEXT_PAGE,payload:t}}goToPageSuccess(t){return{type:e.GO_TO_PAGE_SUCCESS,payload:t}}quizActionRejected(t){return{type:e.QUIZ_ACTION_REJECTED,payload:t}}submitQuizPartial(t){return{type:e.SUBMIT_QUIZ_PARTIAL,payload:t}}submitQuizPartialSuccess(t){return{type:e.SUBMIT_QUIZ_PARTIAL_SUCCESS,payload:t}}timeEnabledForceExit(t){return{type:e.TIME_ENABLED_FORCE_EXIT,payload:t}}timeElapsedSubmit(t){return{type:e.TIME_ELAPSED_SUBMIT,payload:t}}submitQuiz(t){return{type:e.SUBMIT_QUIZ,payload:t}}submitQuizSuccess(t){return{type:e.SUBMIT_QUIZ_SUCCESS,payload:t}}showReview(t){return{type:e.SHOW_REVIEW,payload:t}}showReviewSuccess(t){return{type:e.SHOW_REVIEW_SUCCESS,payload:t}}}return e.SET_INITIAL_STATE="[QuizPlayer] Set Initial State",e.LOAD_LAUNCH_PARAMS="[QuizPlayer] Load Launch params",e.RELOAD_LAUNCH_PARAMS="[QuizPlayer] Reload Launch params",e.RELOAD_QUIZ_MAX_SCORE="[QuizPlayer] Reload quiz max score",e.START_PLAYING="[QuizPlayer] Start playing",e.RETAKE_THE_TEST="[QuizPlayer] Retake the test",e.CONTINUE_PLAYING="[QuizPlayer] Continue playing",e.LEAVE_REVIEW_MODE="[QuizPlayer] Leave Quiz Review Mode",e.LEAVE_PLAY_MODE="[QuizPlayer] Leave Quiz Play Mode",e.GO_TO_PREV_PAGE="[QuizPlayer] Go to prev page",e.GO_TO_NEXT_PAGE="[QuizPlayer] Go to next page",e.GO_TO_PAGE_SUCCESS="[QuizPlayer] Go to page SUCCESS",e.QUIZ_ACTION_REJECTED="[QuizPlayer] Go to page REJECTED",e.SUBMIT_QUIZ_PARTIAL="[QuizPlayer] Submit Quiz Partial",e.SUBMIT_QUIZ_PARTIAL_SUCCESS="[QuizPlayer] Submit Quiz Partial SUCCESS",e.TIME_ENABLED_FORCE_EXIT="[QuizPlayer] Time Enabled force Exit",e.TIME_ELAPSED_SUBMIT="[QuizPlayer] Time Elapsed Submit Quiz",e.SUBMIT_QUIZ="[QuizPlayer] Submit Quiz",e.SUBMIT_QUIZ_SUCCESS="[QuizPlayer] Submit Quiz SUCCESS",e.SHOW_REVIEW="[QuizPlayer] Show review",e.SHOW_REVIEW_SUCCESS="[QuizPlayer] Show review SUCCESS",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.ac({token:e,factory:e.\u0275fac}),e})()},"3t6O":function(e,t,i){"use strict";i.d(t,"q",function(){return s.b}),i.d(t,"p",function(){return s.a}),i.d(t,"x",function(){return n.a}),i.d(t,"u",function(){return a.d}),i.d(t,"r",function(){return a.a}),i.d(t,"s",function(){return a.b}),i.d(t,"t",function(){return a.c}),i.d(t,"g",function(){return o.h}),i.d(t,"c",function(){return o.d}),i.d(t,"n",function(){return o.n}),i.d(t,"b",function(){return o.c}),i.d(t,"d",function(){return o.e}),i.d(t,"v",function(){return o.p}),i.d(t,"a",function(){return o.a}),i.d(t,"h",function(){return o.i}),i.d(t,"l",function(){return o.k}),i.d(t,"k",function(){return o.j}),i.d(t,"o",function(){return o.o}),i.d(t,"w",function(){return o.q}),i.d(t,"y",function(){return o.r}),i.d(t,"m",function(){return o.l}),i.d(t,"e",function(){return o.f}),i.d(t,"f",function(){return o.g}),i.d(t,"i",function(){return r}),i.d(t,"j",function(){return c.a});var s=i("sVTu"),n=i("2Rox"),a=i("wqqH"),o=i("Karm");let r=(()=>{class e{}return e.folders=[],e})();var c=i("Up5I")},"49sm":function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},"5EG7":function(e,t,i){"use strict";i.d(t,"a",function(){return r});var s=i("fXoL"),n=i("ofXK"),a=i("nUpK");function o(e,t){1&e&&s.fc(0,"ui-icon",2),2&e&&s.Dc("name","check")("size","sm")}let r=(()=>{class e{constructor(){this.selected=new s.q}onClick(){this.selected.emit(this.skill)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Yb({type:e,selectors:[["skill-chip"]],hostAttrs:[1,"bg-grey-light"],hostBindings:function(e,t){1&e&&s.sc("click",function(){return t.onClick()})},inputs:{skill:"skill"},outputs:{selected:"selected"},decls:3,vars:2,consts:[["class","skill-chip-icon",3,"name","size",4,"ngIf"],[1,"skill-chip-label"],[1,"skill-chip-icon",3,"name","size"]],template:function(e,t){1&e&&(s.ed(0,o,1,2,"ui-icon",0),s.kc(1,"span",1),s.gd(2),s.jc()),2&e&&(s.Dc("ngIf",t.skill.isSelected),s.Mb(2),s.hd(t.skill.name))},directives:[n.p,a.lc],styles:[".color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}skill-chip{position:relative;font-size:14px;line-height:20px;display:inline-flex;padding:5px 12px 6px;border-radius:2px;cursor:pointer}.router-outlet:not(.direction-rtl):not(.heracles-root) skill-chip{margin:0 8px 8px 0}.router-outlet.direction-rtl:not(.heracles-root) skill-chip{margin:0 0 8px 8px}"],encapsulation:2,changeDetection:0}),e})()},"5wvl":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var s=function(e){return e.PLATFORM="platform",e.ALL="all",e.AI="ai",e}({})},"6CNT":function(e,t,i){"use strict";i.d(t,"a",function(){return p});var s=i("fXoL"),n=i("A+3w"),a=i("/76g"),o=i("sknK"),r=i("TrxT"),c=i("1G5W"),l=i("m06o"),d=i("f2BR"),u=i("gvJE");const h=["skillsMultiSelect"];let p=(()=>{class e extends r.a{constructor(e,t,i){super(),this.assetSkillsService=e,this.changeDetectorRef=t,this._skillsService=i,this.preselected=[],this.mappedToId=!1,this.maxSelectableItems=50,this.itemSelected=new s.q,this.itemDeselected=new s.q,this.selectedItemsChanged=new s.q,this.multiSelectMode=n.a.AUTOCOMPLETE,this.multiSelectShowLoader=!1,this.multiSelectSource=[],this.multiSelectPreselected=[],this.dictionary={skillsLabel:a.a.t("standard","Skills"),multiSelectPlaceholder:a.a.t("standard","Type...")},this.assetSkillsService.searchSuggestions$.pipe(Object(c.a)(this.ngUnsubscribe)).subscribe(e=>{this.multiSelectShowLoader=!1,this.multiSelectSource=e,this.changeDetectorRef.detectChanges()})}ngOnInit(){this._setPreselected(),this._skillsService.isCustomSkillOn()&&this.assetSkillsService.init().subscribe()}ngOnChanges(e){var t;Boolean(null===(t=e.preselected)||void 0===t?void 0:t.currentValue)&&this._setPreselected()}searchAvailableSkills(e){this.multiSelectSource=[],e.length<3||(this.multiSelectShowLoader=!0,this.assetSkillsService.searchSources$.next({query:e,mappedToId:this.mappedToId}))}onItemSelected(e){this._manageSelected(),this.itemSelected.emit(e.id),this._markControlAsDirty()}onItemDeselected(e){this._manageSelected(),this.itemDeselected.emit(e.id),this._markControlAsDirty()}toggleElement(e){this.skillsMultiSelect.select(e,!0)}_manageSelected(){this.selectedItemsChanged.emit(this.skillsMultiSelect.selectedItems)}_markControlAsDirty(){this.inputFormControl.markAsTouched(),this.inputFormControl.markAsDirty(),this.inputFormControl.updateValueAndValidity()}_setPreselected(){var e;(null===(e=this.preselected)||void 0===e?void 0:e.length)>0&&(this.multiSelectPreselected=this.preselected.map(e=>e.id),this.multiSelectSource=[...this.preselected])}}return e.\u0275fac=function(t){return new(t||e)(s.ec(o.a),s.ec(s.i),s.ec(l.a))},e.\u0275cmp=s.Yb({type:e,selectors:[["app7020-asset-skills"]],viewQuery:function(e,t){if(1&e&&s.nd(h,1),2&e){let e;s.Rc(e=s.tc())&&(t.skillsMultiSelect=e.first)}},inputs:{inputFormControl:"inputFormControl",preselected:"preselected",mappedToId:"mappedToId",maxSelectableItems:"maxSelectableItems"},outputs:{itemSelected:"itemSelected",itemDeselected:"itemDeselected",selectedItemsChanged:"selectedItemsChanged"},features:[s.Lb([o.a]),s.Jb,s.Kb],decls:4,vars:18,consts:[[3,"showCounter","showRequiredFieldIndicator","applySourceRegex","suggestionsMaxHeight","max_selectable_items","applyLoaderOffset","canEnterItems","showLoader","mode","label","placeholder","inputFormControl","value","source","onChange","onItemSelection","onItemDeletion"],["skillsMultiSelect",""]],template:function(e,t){1&e&&(s.kc(0,"multi-select",0,1),s.sc("onChange",function(e){return t.searchAvailableSkills(e)})("onItemSelection",function(e){return t.onItemSelected(e)})("onItemDeletion",function(e){return t.onItemDeselected(e)}),s.xc(2,"t"),s.xc(3,"t"),s.jc()),2&e&&s.Dc("showCounter",!0)("showRequiredFieldIndicator",!1)("applySourceRegex",!1)("suggestionsMaxHeight",130)("max_selectable_items",t.maxSelectableItems)("applyLoaderOffset",!0)("canEnterItems",!1)("showLoader",t.multiSelectShowLoader)("mode",t.multiSelectMode)("label",s.yc(2,14,t.dictionary.skillsLabel))("placeholder",s.yc(3,16,t.dictionary.multiSelectPlaceholder))("inputFormControl",t.inputFormControl)("value",t.multiSelectPreselected)("source",t.multiSelectSource)},directives:[d.a],pipes:[u.b],styles:[""]}),e})()},"8SnQ":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var s=function(e){return e[e.COURSE="my-course"]="COURSE",e[e.ASSET="asset"]="ASSET",e}({})},A0KR:function(e,t,i){"use strict";i.r(t),i.d(t,"LearningPlanModule",function(){return $});var s=i("tyNb"),n=i("tfGn"),a=i("oTDt"),o=i("aEIV"),r=i("OtoR"),c=i("Rm6y"),l=i("dRcD"),d=i("gvJE"),u=i("+JQb"),h=i("3QLk"),p=i("fXoL"),g=i("Y9qQ"),m=i("35q8"),b=i("Gql0"),f=i("JA8w"),_=i("+sIT"),v=i("aK3f"),y=i("ofXK");const w=["enrollment"];function C(e,t){if(1&e&&(p.kc(0,"div"),p.kc(1,"div",1),p.fc(2,"course-content",2),p.jc(),p.jc()),2&e){const e=p.wc();p.Mb(2),p.Dc("tabsParams",e.tabsParams)("course",e.course)}}let S=(()=>{class e{constructor(e,t,i,s,n,a,o,r,c,l,d){this._backendService=e,this.pageService=t,this.cache=i,this.route=s,this.formatter=n,this.ref=a,this.translationService=o,this.docLayoutService=r,this.router=c,this._route=l,this.learningPlanService=d,this.courseTypes={elearning:"E-learning",classroom:"Classroom",webinar:"Webinar"}}ngOnInit(){const e=this._route.snapshot.paramMap.get("id");Object(h.b)(this.learningPlanService.request("details",{lpId:e},{course_status:"published"}),this.formatter).subscribe(e=>{this.course=e,this.course.type="learning_plan";const t=[];l.a.getInstance().isValid()&&t.push({label:c.a.courseCatalog,href:"/learn/catalog"}),t.push({label:e.name,href:this.router.url}),this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs(t),this.tabsParams={panels:Object(h.e)([{tab:{title:d.a.t("standard","About this Learning Plan"),content:`<div class="tabs-description default-list-style default-headings-styles">\n                                        ${this.course.description}\n                                      </div>`},field:this.course.description},{tab:{title:d.a.t("standard","Learning plan structure"),content:{params:{panels:this.getCourses(this.course.courses)},component:o.a}},field:this.course.courses}]),style:""}})}getCourses(e){return e.map(e=>({title:`${e.name}`,accordion_media:`${e.image}`,description:`${this.courseTypes[e.course_type]}${this.durationString(e.course_type,e.duration)}`,subtitle:"elearning"===e.course_type?"":`${e.all_sessions} ${this.correctSessionTranslation(1===e.all_sessions)}`,content:{component:r.a,params:{course_type:e.course_type,materials:[e]}}}))}ngOnDestroy(){this.cache.isInitialized()&&this.cache.clear()}correctSessionTranslation(e){const t=e?d.a.t("classroom","Session"):d.a.t("standard","Sessions");return new d.b(this.translationService,this.ref).transform(t)}durationString(e,t){if("elearning"!==e)return"";if(!t)return` | ${this.translationService.instant("Duration not set",{category:"standard"})}`;const i=this.formatter.getDurationHours(t,"seconds");return` | ${this.translationService.instant("Duration",{category:"standard"})} ${i}`}}return e.\u0275fac=function(t){return new(t||e)(p.ec(g.a),p.ec(m.a),p.ec(u.b),p.ec(s.a),p.ec(b.b),p.ec(p.i),p.ec(f.a),p.ec(_.a),p.ec(s.h),p.ec(s.a),p.ec(v.a))},e.\u0275cmp=p.Yb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&p.nd(w,1),2&e){let e;p.Rc(e=p.tc())&&(t.enrollment=e.first)}},features:[p.Lb([{provide:u.d,useClass:u.c}])],decls:2,vars:1,consts:[[4,"ngIf"],[1,"learning-plan","rectangular"],[3,"tabsParams","course"]],template:function(e,t){1&e&&(p.ed(0,C,3,2,"div",0),p.fc(1,"router-outlet")),2&e&&p.Dc("ngIf",t.course)},directives:[y.p,s.m,a.a],encapsulation:2}),e})();function k(e,t){1&e&&(p.kc(0,"p"),p.gd(1),p.xc(2,"t"),p.jc()),2&e&&(p.Mb(1),p.hd(p.yc(2,1,"For more information, contact your manager and/or system administrator.")))}const T=function(e,t){return{"bg-warning":e,"bg-positive-green":t}},I=function(e){return{hidden:e}},x=function(e,t){return{"text-warning":e,"text-positive-green":t}};let D=(()=>{class e{constructor(){this.icon="",this.enrollmentStatus=!1,this.adminApproval=!1,this.courseFull=!1}ngOnInit(){const e=this.course.name.replace(/[^\w\d]+/gi,"-").replace(/-$/,"");this.enrollLink=[`/learn/${"learning_plan"===this.course.type?"lp":"course"}/${this.course.id}/${encodeURIComponent(e)}`],null!=this.enrollData&&null!=this.enrollData&&this.setData(this.enrollData)}setData(e){Object.keys(e).length&&(e.enrolled.length&&!e.enrolled[0].waiting?(this.icon="check",this.statusText=d.a.t("standard","You've been successfully enrolled"),this.enrollmentStatus=!1,this.dialogContentLabel=d.a.t("standard","{course_name} has been added to your learning activity.",{course_name:`<span class="course-name">${this.course.name}</span>`})):e.enrolled.length&&e.enrolled[0].waiting&&"admin-approval"===e.enrolled[0].waiting_reason?(this.icon="alert-triangle",this.statusText=d.a.t("standard","You've been placed in the waiting list"),this.enrollmentStatus=!0,this.adminApproval=!0,this.dialogContentLabel=d.a.t("standard","The {course_name} course in which you\u2019ve been enrolled requires manager and/or Administrator approval.",{course_name:`<span class="course-name">${this.course.name}</span>`})):e.enrolled.length&&e.enrolled[0].waiting&&"session-waiting"===e.enrolled[0].waiting_reason?(this.icon="alert-triangle",this.statusText=d.a.t("standard","You've been placed in the session waiting list"),this.enrollmentStatus=!0,this.adminApproval=!0,this.dialogContentLabel=d.a.t("standard","You've been enrolled into {course_name} course, but the session you chose is full. You've been placed on the session waiting list.",{course_name:`<span class="course-name">${this.course.name}</span>`})):(this.icon="alert-triangle",this.statusText=d.a.t("standard","You've been placed in the waiting list"),this.enrollmentStatus=!0,this.courseFull=!0,this.dialogContentLabel=d.a.t("standard","The {course_name} course in which you\u2019ve been enrolled is full. You\u2019ve been placed on the waiting list.",{course_name:`<span class="course-name">${this.course.name}</span>`})))}getImage(e=!1){return e?this.imageUrl?`${this.imageUrl}`:this.imageUrlLp?`${this.imageUrlLp}`:"":this.imageUrl?`url(${this.imageUrl})`:this.imageUrlLp?`url(${this.imageUrlLp})`:""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p.Yb({type:e,selectors:[["enroll-success"]],inputs:{status:"status",imageUrl:"imageUrl",imageUrlLp:"imageUrlLp",course:"course",enrollData:"enrollData"},decls:14,vars:23,consts:[[1,"course-enrollment"],[1,"course-enrollment-head"],[1,"course-head-image","rectangular"],[1,"course-status-icon","text-white",3,"ngClass"],[1,"zmdi","zmdi-image-alt","text-white",3,"ngClass"],[1,"course-enrollment-body"],[1,"course-inner"],["id","dialog-title-aria-label","role","heading","aria-level","2",1,"status-text",3,"ngClass"],[1,"title",3,"innerHTML"],[4,"ngIf"]],template:function(e,t){1&e&&(p.kc(0,"div",0),p.kc(1,"div",1),p.kc(2,"div",2),p.kc(3,"div",3),p.fc(4,"i"),p.jc(),p.fc(5,"i",4),p.jc(),p.jc(),p.kc(6,"div",5),p.kc(7,"div",6),p.kc(8,"p",7),p.gd(9),p.xc(10,"t"),p.jc(),p.fc(11,"p",8),p.xc(12,"t"),p.ed(13,k,3,3,"p",9),p.jc(),p.jc(),p.jc()),2&e&&(p.Mb(2),p.dd("background-image",t.getImage()),p.Mb(1),p.Dc("ngClass",p.Jc(15,T,t.enrollmentStatus,!t.enrollmentStatus)),p.Mb(1),p.Rb("zmdi zmdi-",t.icon,""),p.Mb(1),p.Dc("ngClass",p.Ic(18,I,(null==t.imageUrl?null:t.imageUrl.length)||(null==t.imageUrlLp?null:t.imageUrlLp.length))),p.Mb(3),p.Dc("ngClass",p.Jc(20,x,t.enrollmentStatus,!t.enrollmentStatus)),p.Mb(1),p.id(" ",p.yc(10,11,t.statusText)," "),p.Mb(2),p.Dc("innerHTML",p.yc(12,13,t.dialogContentLabel),p.Wc),p.Mb(2),p.Dc("ngIf",1==t.enrollmentStatus))},directives:[y.n,y.p],pipes:[d.b],encapsulation:2}),e})();var O=i("uprl");const E=[{path:"view/:id/:title",component:S}];var A=i("5Wgn"),P=i("YbcG"),M=i("F97A"),L=i("NCOs"),j=i("z52M"),R=i("4Wcr"),F=i("JkNN"),N=i("ILJs"),U=i("+K5A"),z=i("7M0w"),q=i("MZXA"),V=i("9wRM"),B=i("wcN2"),G=i("M+yG");let H=[...E],$=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.cc({type:e}),e.\u0275inj=p.bc({imports:[[n.a,s.l.forChild(H)]]}),e})();p.Zc(a.a,[y.n,A.a,y.p,y.o,P.a,M.a,L.a,j.a,R.a,F.a,N.a,U.a,z.a,O.a,D,q.a,V.a],[d.b,B.a]),p.Zc(o.a,[G.a],[]),p.Zc(O.a,[y.p],[d.b])},A1Wd:function(e,t,i){"use strict";i.d(t,"b",function(){return l}),i.d(t,"c",function(){return d}),i.d(t,"a",function(){return g});var s=i("3t6O"),n=i("ReIE"),a=i("kyyD"),o=i("LvDl"),r=i.n(o);const c={name:"",slug_name:"",background_image:{url:"",aspect_ratio:""},course_status:null,state:null,chapters:[],scormChaptersHash:"",folders:null};function l(e){let t=[];for(let i in e){let s=e[i];0==s.is_folder?t.push(s):null!=s.children&&s.children.length&&l(s.children).map(e=>t.push(e))}return t}function d(e){const t=[];return l(e).map(e=>{"scormorg"===e.type&&t.push({id:e.id,status:e.status})}),btoa(JSON.stringify(t))}function u(e){let t=[];for(let i in e){let s=e[i];if(1==s.is_folder){let e={id:s.id,name:s.name,children:r.a.isEmpty(s.children)?[]:u(s.children)};t.push(e)}}return t}function h(e){let t=[];for(let i=0;i<e.length;i++){let s=e[i];s.all=p(s,!1),s.completed=p(s,!0),!0===s.is_folder?void 0!==s.children&&s.children.length>0&&h(s.children)&&t.push(s):t.push(s)}return t}function p(e,t=!1){let i=0;if(void 0!==e.children&&e.children.length>0){let s=e.children;for(let e=0;e<s.length;e++){let n=s[e];n.is_folder&&void 0!==n.children&&n.children.length>0?i+=p(n,t):t?-1!==["completed","passed"].indexOf(n.status)&&i++:i++}}return i}function g(e=c,t){switch(t.type){case a.a.LOAD_COURSE_INFO:return e.payload&&delete e.payload,r.a.assign({},e,{state:s.c.INITIALIZING});case a.a.LOAD_COURSE_INFO_SUCCESS:{const i=t.payload.courseData.data,n=t.payload.courseData.permissions,a=e.course_status&&e.course_status.status&&e.course_status.prev_status&&e.course_status.prev_status[i.id]&&(e.course_status.status!==e.course_status.prev_status[i.id]||e.course_status.status!==i.status),o=e.course_status&&e.course_status.prev_status?Object.assign({},e.course_status.prev_status):{};o[i.id]=a?i.status:e.course_status?e.course_status.status?e.course_status.status:e.course_status.prev_status&&e.course_status.prev_status[i.id]?e.course_status.prev_status[i.id]:i.status:i.status;const c=r.a.assign({},e.course_status,{status:i.status,prev_status:o,status_changed:a,certificate_url:i.certificate_url,is_rated:i.is_rated,completion_date:i.completion_date,competed_lessons:i.competed_lessons,level:i.level,permissions:n});let p=s.c.PLAYER;i.has_overview&&e.state&&e.state!=s.c.PLAYER&&(p=s.c.OVERVIEW);let g=r.a.assign({},e,{id:i.id,name:i.name,slug_name:i.slug_name,use_thumbnail:i.use_thumbnail,instructors:i.instructors,ration_options:i.ration_options,current_rating:i.current_rating,background_image:i.background_image,has_autoplay:i.has_autoplay,has_overview:i.has_overview||!1,show_toc:i.show_toc||!1,deadline:i.deadline,state:p,payload:t.payload.courseData,course_status:c,on_sale:i.on_sale,isReloading:t.payload.inReloading,reloadSource:t.payload.source,last_played_chapter:{},last_played_object:null,certification:i.certification},i);return r.a.isEmpty(i.tree)||(g.tree=h(i.tree),g.scormChaptersHash=d(i.tree)),r.a.isEmpty(i.chapter_sequence)?g.chapters=[]:(g.chapters=l(i.tree),g.folders=u(i.tree),i.last_played_object?g.last_played_chapter=r.a.head(g.chapters.filter(e=>String(e.id)===String(i.last_played_object))):i.last_completed_object&&(g.last_played_chapter=r.a.head(g.chapters.filter(e=>String(e.id)===String(i.last_completed_object))))),g}case n.b.LOAD_COURSE_CHAPTERS_SUCCESS:return Object.assign(Object.assign({},e),{chapters:l(t.payload.data.tree),folders:u(t.payload.data.tree),tree:h(t.payload.data.tree)});case a.a.LOAD_COURSE_INFO_REJECTED:return r.a.assign({},e,{id:t.payload,state:s.c.UNAUTHORIZED});case a.a.SWITCH_MODE:{e.payload&&delete e.payload;let i=null;return i=t.payload.state===s.c.PLAYER?s.c.OVERVIEW:t.payload.state==s.c.OVERVIEW?s.c.PLAYER:e.state===s.c.PLAYER&&e.has_overview?s.c.OVERVIEW:s.c.PLAYER,r.a.assign({},e,{state:i})}case a.a.RELOAD_CHAPTERS:return Object.assign(Object.assign({},e),{chapters:l(t.payload.chapters),folders:u(t.payload.chapters),tree:h(t.payload.chapters)});case a.a.DESTROY:{let t={};return e.course_status&&e.course_status.prev_status&&(t={course_status:{prev_status:e.course_status.prev_status,status:e.course_status.status}}),r.a.assign({},c,t)}case a.a.UPDATE_COURSE_RATING:{let i=e.course_status;return i.is_rated=!0,r.a.assign({},e,{current_rating:t.payload.data.my_rating,course_status:i})}default:return e.payload&&delete e.payload,e}}},AZa5:function(e,t,i){var s=i("Wogr"),n=i("u/Db");function a(e){this.mode=n.BYTE,this.data=new s(e)}a.getBitsLength=function(e){return 8*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){for(var t=0,i=this.data.length;t<i;t++)e.put(this.data[t],8)},e.exports=a},BCVQ:function(e,t){var i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",s="(?:(?![A-Z0-9 $%*+\\-./:]|"+(i=i.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=new RegExp(i,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(s,"g"),t.NUMERIC=new RegExp("[0-9]+","g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var n=new RegExp("^"+i+"$"),a=new RegExp("^[0-9]+$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return n.test(e)},t.testNumeric=function(e){return a.test(e)},t.testAlphanumeric=function(e){return o.test(e)}},CI6S:function(e,t,i){"use strict";i.d(t,"j",function(){return C}),i.d(t,"d",function(){return k}),i.d(t,"b",function(){return T}),i.d(t,"e",function(){return I}),i.d(t,"o",function(){return x}),i.d(t,"c",function(){return D}),i.d(t,"g",function(){return O}),i.d(t,"h",function(){return E}),i.d(t,"f",function(){return P}),i.d(t,"a",function(){return M}),i.d(t,"i",function(){return j}),i.d(t,"m",function(){return R}),i.d(t,"k",function(){return F}),i.d(t,"l",function(){return N}),i.d(t,"n",function(){return U}),i.d(t,"p",function(){return z});var s=i("l7P3"),n=i("3t6O"),a=i("A1Wd"),o=i("wunY"),r=i("Karm");const c={status:null,launch_params:{},content:{},isLoading:!1,isOtjErrorStateVisible:!1};function l(e=c,t){switch(t.type){case o.a.START_PLAYING:return Object.assign({},c,{status:r.h.REQUEST_FOR_PLAY});case o.a.SHOW_OTJ_ERROR_STATE:return Object.assign(Object.assign({},e),{isOtjErrorStateVisible:!0,status:r.c.PLAYING,isLoading:!1});case o.a.START_PLAYING_SUCCESS:{let i=e.status;return i!==r.h.COURSE_COMPLETED&&(i=r.h.PLAYING),Object.assign({},e,{status:i,launch_params:t.payload.launch_params})}case o.a.START_PLAYING_REJECTED:return Object.assign({},e,{status:r.h.PLAY_REJECTED,launch_params:t.payload});case o.a.SET_COURSE_PLAYER_CHAPTER_LOADING:return Object.assign(Object.assign({},e),{isLoading:t.payload});case o.a.START_PLAYING_REJECTED_MISSING_USERFIELDS:return Object.assign({},e,{status:r.h.PLAY_REJECT_USERFIELDS,launch_params:t.payload});default:return e}}var d=i("kyyD"),u=i("LvDl"),h=i.n(u);const p={status:null,course:null,course_status:null,current_chapter:null,last_played_chapter:null,chapter_viewer:c,preserve_lightbox:!1,navigating_back:!1};var g=i("mEp4");const m={id:0,name:"",status:null,state:null,complete_percent:0,courses:[],curricula_redirect_to_learning_plan:!1,certification:null};var b=i("RYym");const f={status:null,view:null,viewDate:null,startDate:null,endDate:null,events:null,filters:null,appliedFilters:null,monthHasEvents:null,export:null,errorMsg:null};var _=i("f0Wu"),v=i("3/UW");const y={status:null,current_session:null,locations:null,enrolled_sessions:null,available_sessions:null,managed_sessions:null,course_details_changed:{}};var w=i("Ozuj");const C={course_player:function(e=p,t){switch(t.type){case o.a.LOAD_COURSE_INFO:return h.a.assign({},e,{status:n.b.INITIALIZING});case o.a.LOAD_COURSE_INFO_REJECTED:return h.a.assign({},e,{status:n.b.UNAUTHORIZED});case o.a.LOAD_COURSE_INFO_SUCCESS:return class{static format(e,t){let i=t.courseData.data,s=[],a={},o={},r=n.b.EMPTY,c={status:n.g.READY};return h.a.isEmpty(i.chapter_sequence)||(r=n.b.READY,s=this.extractChapters(i.tree)),e.current_chapter&&(a=h.a.head(s.filter(t=>t.id==e.current_chapter.id)),c=e.chapter_viewer,a&&a.status==n.d.COMPLETED&&t.inReloading&&a.id==t.reloadSource&&(c.status=n.g.ACTIVITY_COMPLETED)),c.status==n.g.ACTIVITY_COMPLETED&&i.status==n.d.COMPLETED&&(c.status=n.g.COURSE_COMPLETED),t.inReloading&&c.status!==n.g.ACTIVITY_COMPLETED&&c.status!==n.g.COURSE_COMPLETED&&(r=n.b.PLAYING),i.last_played_object?o=h.a.head(s.filter(e=>String(e.id)===String(i.last_played_object))):i.last_completed_object&&(o=h.a.head(s.filter(e=>String(e.id)===String(i.last_completed_object)))),h.a.assign({},e,{status:r,current_chapter:a,chapter_viewer:c,last_played_chapter:o,preserve_lightbox:!1,navigating_back:!1})}static extractChapters(e){let t=[];for(let i in e){let s=e[i];0==s.is_folder?t.push(s):null!=s.children&&s.children.length&&this.extractChapters(s.children).map(e=>t.push(e))}return t}static extractFolders(e){let t=[];for(let i in e){let s=e[i];if(1==s.is_folder){let e={id:s.id,name:s.name,children:h.a.isEmpty(s.children)?[]:this.extractFolders(s.children)};t.push(e)}}return t}}.format(e,t.payload);case o.a.SET_SCORM_CHAPTERS_HASH:return Object.assign(Object.assign({},e),{scormChaptersHash:t.payload});case o.a.SET_COURSE_PLAYER_CHAPTER_LOADING:return Object.assign(Object.assign({},e),{isLoading:t.payload,chapter_viewer:l(e.chapter_viewer,t)});case o.a.START_PLAYING:{let i={status:n.b.REQUEST_FOR_PLAY,chapter_viewer:l(e.chapter_viewer,t)};return t.payload.chapters&&(i.current_chapter=h.a.head(t.payload.chapters.filter(e=>e.id==t.payload.id))),t.payload.hasOwnProperty("preserve_lightbox")&&(i.preserve_lightbox=t.payload.preserve_lightbox,i.navigating_back=t.payload.navigating_back),h.a.assign({},e,i)}case o.a.START_PLAYING_SUCCESS:{let i={status:n.b.READY,chapter_viewer:l(e.chapter_viewer,t)};return t.payload.chapters&&(i.current_chapter=h.a.head(t.payload.chapters.filter(e=>e.id==t.payload.id))),t.payload.hasOwnProperty("preserve_lightbox")&&(i.preserve_lightbox=t.payload.preserve_lightbox,i.navigating_back=t.payload.navigating_back,void 0!==i.current_chapter&&i.current_chapter.hasOwnProperty("locked")&&i.current_chapter.type!==n.a.SIGN.toString()&&delete i.current_chapter.locked),h.a.assign({},e,i)}case o.a.START_PLAYING_REJECTED:return h.a.assign({},e,{status:n.b.PLAY_REJECTED,chapter_viewer:l(e.chapter_viewer,t)});case o.a.SHOW_OTJ_ERROR_STATE:return Object.assign(Object.assign({},e),{chapter_viewer:l(e.chapter_viewer,t)});case o.a.START_PLAYING_REJECTED_MISSING_USERFIELDS:return h.a.assign({},e,{status:n.b.PLAY_REJECT_USERFIELDS,chapter_viewer:l(e.chapter_viewer,t)});case o.a.SET_CURRENT_CHAPTER:{let i={status:n.b.REQUEST_FOR_PLAY,current_chapter:h.a.head(t.payload.chapters.filter(e=>e.id==t.payload.id)),chapter_viewer:{status:n.g.READY}};const s=i.current_chapter;return s.type==String(n.a.SURVEY)&&s.status==String(n.d.COMPLETED)&&(i.chapter_viewer.status=n.g.ACTIVITY_COMPLETED),s.type===n.a.SIGN.toString()&&(i.chapter_viewer.status=n.g.PLAYING),h.a.assign({},e,i)}case d.a.DESTROY:return h.a.assign({},p,{});default:return e}},survey_player:i("UIvz").b,quiz_player:w.b,course:a.a,overview:function(e=y,t){switch(t.type){case v.a.LOAD_OVERVIEW_INFO:return h.a.assign({},y,{status:n.n.INITIALIZING,current_session:e.current_session});case v.a.LOAD_OVERVIEW_INFO_SUCCESS:{let i=e.current_session,s=[],a=[],o=[],r=[],c=[],l=n.n.READY;if(t.payload.hasOwnProperty("data")){const d=t.payload.data;if(Object.keys(d.sessions).length>0){const n=Object.keys(d.sessions);if(n.length>0&&!1===t.payload.sessionId){const e=_();let t=null,s=null;for(let i=0;i<n.length;i++)if(_(d.sessions[n[i]].start_date).isAfter(e)){for(let e=i;e<n.length;e++)_(d.sessions[n[e]].start_date).isBefore(_(d.sessions[n[i]].start_date))&&(null!==t?_(d.sessions[n[e]].start_date).isBefore(t)&&(t=_(d.sessions[n[e]].start_date),s=n[e]):(t=_(d.sessions[n[e]].start_date),s=n[e]));s||(t=_(d.sessions[n[i]].start_date),s=n[i])}s&&(i=d.sessions[s])}for(let t in d.sessions)d.sessions[t].hasOwnProperty("is_enrolled")&&d.sessions[t].is_enrolled&&s.push(d.sessions[t]),a.push(d.sessions[t]),e.current_session&&e.current_session.id==d.sessions[t].id&&(i=h.a.assign({},e.current_session,d.sessions[t])),1==d.sessions[t].can_manage&&o.push(d.sessions[t]);i||(i=h.a.isEmpty(s)?o[0]:d.sessions[n[0]])}const u=[];if(d.locations)for(let e=0;e<d.locations.length;e++){const t=d.locations[e];u[t.id_location]=t}const p=[];if(d.classrooms)for(let e=0;e<d.classrooms.length;e++){const t=d.classrooms[e];p[t.id_classroom]=t}if(r=p,c=u,d.skipped_sessions)for(let e=0;e<d.skipped_sessions.length;e++)i&&i.id&&Number(i.id)===Number(d.skipped_sessions[e])&&(l=n.n.REQUEST_REJECTED)}return a.length<=0&&!h.a.isEmpty(t.payload)&&(l=n.n.NO_SESSION),h.a.assign({},e,{status:l,current_session:i,enrolled_sessions:s,available_sessions:a,classrooms:r,locations:c,managed_sessions:o})}case v.a.LOAD_OVERVIEW_INFO_REJECTED:return h.a.assign({},e,{status:n.n.REQUEST_REJECTED});case v.a.REQUEST_CHANGE:return h.a.assign({},e,{status:n.n.REQUEST_SESSION});case v.a.CHANGE_SESSION:{let i=null;for(const s in e.available_sessions)e.available_sessions[s].id==t.payload&&(i=e.available_sessions[s]);return h.a.assign({},e,{status:n.n.READY,current_session:i})}case d.a.DESTROY:return h.a.assign({},y,{});case v.a.ENROLL_USER_TO_SESSION_SUCCESS:{let i=null;for(let s in e.available_sessions)if(e.available_sessions[s].id==t.payload.sessionId){i=e.available_sessions[s];break}return h.a.assign({},e,{course_details_changed:{course_id:t.payload.courseId},current_session:i})}default:return e}},learning_plan:function(e=m,t){switch(t.type){case g.a.LOAD_LEARNING_PLAN_INFO:{let i=parseInt(t.payload);return e.id!==i&&(e=m),h.a.assign({},e,{state:r.l.INITIALIZING})}case g.a.LOAD_LEARNING_PLAN_INFO_SUCCESS:return h.a.assign({},e,t.payload.data,{state:r.l.VIEWING});case g.a.LOAD_LEARNING_PLAN_INFO_REJECTED:return h.a.assign({},e,{state:r.l.UNAUTHORIZED});case g.a.CLEAN_STORE_DATA_LEARNING_PLAN:return h.a.assign({},{});default:return e}},my_calendar:function(e=f,t){switch(t.type){case b.a.INIT:return h.a.assign({},e,{status:"INITIALIZING",view:t.payload.view,viewDate:t.payload.viewDate,startDate:t.payload.startDate,endDate:t.payload.endDate,filters:t.payload.filters});case b.a.UPDATE:return h.a.assign({},e,{status:"UPDATING",view:t.payload.events,viewDate:t.payload.events,startDate:t.payload.startDate,endDate:t.payload.endDate,filters:t.payload.filters});case b.a.LOAD_EVENTS_SUCCESS:return h.a.assign({},e,{status:"EVENTS_LOADED",events:t.payload.events,export:t.payload.export,appliedFilters:t.payload.appliedFilters});case b.a.LOAD_EVENTS_REJECT:{const i=t.payload.errorMsg,s="SERVER_ERROR";return 1300===i.code&&(this.status="EMPTY_EVENTS"),h.a.assign({},e,{status:s,errorMsg:i})}case b.a.LOAD_EVENTS_IN_YEAR_SUCCESS:return h.a.assign({},e,{status:"EVENTS_IN_YEAR_LOADED",monthHasEvents:t.payload.monthHasEvents});default:return e}}},S=Object(s.l)("learn"),k=Object(s.n)(S,e=>e.course),T=Object(s.n)(S,e=>e.course.chapters),I=Object(s.n)(k,e=>e.course_status),x=Object(s.n)(S,e=>e.course.scormChaptersHash),D=Object(s.n)(S,e=>e.course_player),O=Object(s.n)(S,e=>e.course.chapters.filter(e=>!0===e.is_end_object&&e.type!==n.a.SIGN.toString())),E=(Object(s.n)(D,e=>e.chapter_viewer.status),Object(s.n)(D,e=>e.chapter_viewer.isOtjErrorStateVisible)),A=Object(s.n)(O,e=>e.filter(e=>e.status===n.l.COMPLETED.toString()).length),P=Object(s.n)(k,D,(e,t)=>Object.assign(Object.assign({},t),{current_chapter:Object(a.b)(e.tree).filter(e=>e.id===t.current_chapter.id)[0]})),M=Object(s.n)(S,O,A,(e,t,i)=>{if(e.course.type===String(n.e.ELEARNING)&&e.course.status!==String(n.d.COMPLETED)&&e.course.esignature_status===String(n.h.LOCKED)){if(t.length&&!i)return t.map(e=>`"${e.name}"`);if(!t.length)return e.course.chapters.filter(e=>e.type!==n.a.SIGN.toString()&&e.status!==n.l.COMPLETED.toString()).map(e=>`"${e.name}"`)}return[]}),L=Object(s.n)(S,M,(e,t)=>e.course.status===String(n.d.COMPLETED)||e.course.esignature_status===n.h.SIGNED||0===t.length),j=Object(s.n)(L,e=>!e),R=Object(s.n)(S,e=>e.overview),F=Object(s.n)(S,e=>e.learning_plan),N=Object(s.n)(S,e=>e.my_calendar),U=Object(s.n)(S,e=>e.quiz_player),z=Object(s.n)(S,e=>e.survey_player)},D7St:function(e,t,i){"use strict";i.d(t,"c",function(){return Wt}),i.d(t,"b",function(){return Qt}),i.d(t,"a",function(){return Jt});var s=i("mrSG"),n=i("V3DN"),a=i("gvJE"),o=i("o6wD"),r=i("mJ9n"),c=i("LvDl"),l=i.n(c),d=i("2Vo4"),u=i("zP0r"),h=i("NKMr"),p=i("Rm6y"),g=i("fXoL"),m=i("tyNb"),b=i("+sIT"),f=i("S2Qf"),_=i("N9vg"),v=i("ofXK"),y=i("IfWP"),w=i("yRWM"),C=i("jt8V"),S=i("BPI6"),k=i("raRA"),T=i("6fYS"),I=i("LRne"),x=i("lNbR"),D=i("sk0d"),O=i("alYl"),E=i("mZNx"),A=i("XEWJ"),P=i("OFqD"),M=i("vQfe"),L=i("Vqln"),j=i("g9In"),R=i("nUpK"),F=i("Lbmx");let N=(()=>{class e{constructor(){}transform(e){const t=Math.floor(e/60);let i=(e%60).toString();return i=1===i.length?0+i:i,t+"h "+i+"m"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=g.dc({name:"iltInstructorEventsListDurationConvert",type:e,pure:!0}),e})();var U=i("QXP6");const z=["dataTable"];function q(e,t){1&e&&(g.kc(0,"hyd-ellipsable-text"),g.gd(1),g.xc(2,"t"),g.jc()),2&e&&(g.Mb(1),g.hd(g.yc(2,1,"Name")))}function V(e,t){if(1&e){const e=g.lc();g.kc(0,"hyd-ellipsable-text"),g.kc(1,"a",24),g.sc("click",function(){g.Vc(e);const i=t.item;return g.wc().navigateToEventDetailPage(i.id)}),g.gd(2),g.jc(),g.jc()}if(2&e){const e=t.item;g.Mb(2),g.hd(e.name)}}function B(e,t){1&e&&(g.gd(0),g.xc(1,"t")),2&e&&g.id(" ",g.yc(1,1,"Date")," ")}function G(e,t){if(1&e&&(g.kc(0,"span"),g.gd(1),g.xc(2,"dcbDate"),g.jc()),2&e){const e=t.item;g.Mb(1),g.id(" ",g.zc(2,1,e.schedule.date,"UTC"),"")}}const H=function(){return{category:"player"}};function $(e,t){1&e&&(g.gd(0),g.xc(1,"t")),2&e&&g.id(" ",g.zc(1,1,"Time",g.Hc(4,H))," ")}function Y(e,t){if(1&e&&(g.kc(0,"hyd-ellipsable-text"),g.gd(1),g.jc()),2&e){const e=t.item;g.Mb(1),g.id(" ",e.schedule.time_begin.slice(0,-3)+" - "+e.schedule.time_end.slice(0,-3)+"("+e.schedule.offset+" "+e.schedule.timezone+")"," ")}}function W(e,t){1&e&&(g.gd(0),g.xc(1,"t")),2&e&&g.id(" ",g.yc(1,1,"Hours")," ")}function Q(e,t){1&e&&(g.gd(0),g.xc(1,"iltInstructorEventsListDurationConvert")),2&e&&g.id(" ",g.yc(1,1,t.item.schedule.duration)," ")}function K(e,t){1&e&&(g.gd(0),g.xc(1,"t")),2&e&&g.id(" ",g.yc(1,1,"Type")," ")}function J(e,t){1&e&&(g.kc(0,"span"),g.gd(1),g.xc(2,"t"),g.jc()),2&e&&(g.Mb(1),g.hd(g.yc(2,1,"Onsite")))}function X(e,t){1&e&&(g.kc(0,"span"),g.gd(1),g.xc(2,"t"),g.jc()),2&e&&(g.Mb(1),g.hd(g.yc(2,1,"Online")))}function Z(e,t){1&e&&(g.kc(0,"span"),g.gd(1),g.xc(2,"t"),g.jc()),2&e&&(g.Mb(1),g.hd(g.yc(2,1,"Flexible")))}function ee(e,t){if(1&e&&(g.kc(0,"hyd-ellipsable-text"),g.ed(1,J,3,3,"span",25),g.ed(2,X,3,3,"span",25),g.ed(3,Z,3,3,"span",25),g.jc()),2&e){const e=t.item;g.Mb(1),g.Dc("ngIf","onsite"==e.type),g.Mb(1),g.Dc("ngIf","online"==e.type),g.Mb(1),g.Dc("ngIf","flexible"==e.type)}}const te=function(){return{category:"classroom"}};function ie(e,t){1&e&&(g.gd(0),g.xc(1,"t")),2&e&&g.id(" ",g.zc(1,1,"Location",g.Hc(4,te))," ")}function se(e,t){if(1&e&&(g.kc(0,"hyd-ellipsable-text"),g.fc(1,"span",26),g.xc(2,"stripTags"),g.jc()),2&e){const e=t.item;g.Mb(1),g.Dc("innerHTML",g.yc(2,1,null==e||null==e.location?null:e.location.name),g.Wc)}}function ne(e,t){1&e&&(g.gd(0),g.xc(1,"t")),2&e&&g.id(" ",g.yc(1,1,"Classroom")," ")}function ae(e,t){if(1&e&&(g.kc(0,"hyd-ellipsable-text"),g.fc(1,"span",26),g.xc(2,"stripTags"),g.jc()),2&e){const e=t.item;g.Mb(1),g.Dc("innerHTML",g.yc(2,1,null==e||null==e.classroom?null:e.classroom.name),g.Wc)}}function oe(e,t){if(1&e&&(g.kc(0,"div",28),g.kc(1,"div"),g.kc(2,"hyd-ellipsable-text"),g.gd(3),g.xc(4,"t"),g.jc(),g.jc(),g.jc()),2&e){const e=g.wc().$implicit;g.Mb(3),g.id(" ",g.yc(4,1,e.label)," ")}}function re(e,t){if(1&e&&g.fc(0,"ui-icon",34),2&e){const e=g.wc().item,t=g.wc().$implicit,i=g.wc();g.Dc("name",t.icon_new)("size","sm")("color",t.isWarning(e)?i.alertColor:i.accentColor)}}function ce(e,t){if(1&e&&g.fc(0,"i"),2&e){const e=g.wc(2).$implicit;g.Rb("zmdi zmdi-",e.icon,"")}}function le(e,t){if(1&e){const e=g.lc();g.kc(0,"hyd-ellipsable-text"),g.kc(1,"div",29),g.sc("click",function(){g.Vc(e);const i=t.item,s=g.wc().$implicit;return s.click?s.click(i):""}),g.kc(2,"div",30),g.kc(3,"span"),g.gd(4),g.jc(),g.jc(),g.kc(5,"div",31),g.ed(6,re,1,3,"ui-icon",32),g.ed(7,ce,1,3,"i",33),g.jc(),g.jc(),g.jc()}if(2&e){const e=t.item,i=g.wc().$implicit;g.Mb(1),g.Wb("text-warning",i.isWarning(e))("text-main",!i.isWarning(e))("text-pointer",null!=i.click),g.Mb(3),g.hd(i.value(e)),g.Mb(2),g.Dc("ngIf",i.icon_new),g.Mb(1),g.Dc("ngIf",i.icon)}}function de(e,t){1&e&&(g.kc(0,"hyd-table-column",27),g.kc(1,"hyd-table-column-header"),g.ed(2,oe,5,3,"ng-template"),g.jc(),g.kc(3,"hyd-table-column-cell"),g.ed(4,le,8,9,"ng-template"),g.jc(),g.jc()),2&e&&g.Dc("columnName",t.$implicit.name)("sortable",!0)("alignment","center")}function ue(e,t){1&e&&(g.kc(0,"div",37),g.fc(1,"ui-spinner",38),g.jc()),2&e&&(g.Mb(1),g.Dc("size","md"))}function he(e,t){if(1&e&&g.fc(0,"blankslate",39),2&e){const e=g.wc(2);g.Dc("isVisible",!0)("type",e.BlankSlateType.EMPTY001)("title",e.noResultsTitle)("subtitle",e.noResultsSubtitle)}}function pe(e,t){if(1&e&&(g.kc(0,"div",35),g.ed(1,ue,2,1,"div",23),g.ed(2,he,1,4,"blankslate",36),g.jc()),2&e){const e=g.wc();g.Mb(1),g.Dc("ngIf",e.isLoading),g.Mb(1),g.Dc("ngIf",!e.isLoading&&e.noResults)}}function ge(e,t){1&e&&(g.kc(0,"div",37),g.fc(1,"ui-spinner",38),g.jc()),2&e&&(g.Mb(1),g.Dc("size","md"))}var me=function(e){return e.name="name",e.date="date",e.time="time",e.break="break",e.hours="hours",e.type="type",e.instructors="instructors",e.attendance="attendance",e.location="location",e.classroom="classroom",e.webinar_tool_name="webinar_tool_name",e}({});let be=(()=>{class e extends o.c{constructor(e,t,i,s){super(s,i),this.sessionManagementService=e,this.router=t,this.assignmentColumns=[{name:me.instructors,label:a.a.t("standard","Event Instructors"),icon:"assignment-account",isWarning:e=>0==e.instructors,value:e=>e.instructors},{name:me.attendance,label:a.a.t("standard","_ATTENDANCE"),icon_new:"user-check",isWarning:()=>!1,value:e=>e.attendance+"/"+e.enrolled,click:e=>this.navigateToEventAtendancePage(e.id)}],this.blankSlateConfig={type:w.a.EMPTY002,title:a.a.t("standard","Whoops, there's nothing here"),subtitle:a.a.t("report","Looks like there\u2019s nothing for you to do in this area right now.")},this.allColumns=[me.date,me.hours,me.name,me.break,me.time,me.type,me.location,me.classroom,me.webinar_tool_name,...this.assignmentColumns.map(e=>e.name)],this.lockedColumns=[me.name],this.preselectedColumns=[me.date,me.hours,me.name,me.time,me.type,...this.assignmentColumns.map(e=>e.name)],this.hiddenColumns=["actions"],this._rowActions=[],this._massiveActions=[],this.accentColor=T.l.ACCENT,this.alertColor=T.l.ALERT,this.countColumns=this.allColumns.length,this.venueLabel=a.a.t("standard","Venue"),this.videoConferenceToolLabel=a.a.t("standard","Video Conference Tool"),this.searchUsers$=new d.a("")}get isSelectAllEnable(){return this._massiveActions.length>0}ngOnInit(){super.ngOnInit(),this.subscribeTo(this.listenToSearchUser())}ngAfterViewInit(){super.ngAfterViewInit(),this.changeDetector.markForCheck(),this.changeDetector.markForCheck(),l.a.delay(()=>{this.dataTable.multiselects.first.onChange.subscribe(e=>this.searchForUsers(e))},1e3)}fetchDataImpl(e,t,i){return this.sessionManagementService.getEventsPaginetedList(this.sessionId,e.pageSize,e.page+1,t.dir,t.columnName,i)}getInitialSorting(){return{columnName:me.date,dir:S.a.ASC}}getMassiveActions(){return this._massiveActions}getRowActions(){return this._rowActions}navigateToEventAtendancePage(e){this.router.navigate(["learn","instructor","event",e])}navigateToEventDetailPage(e){this.router.navigate(["learn","instructor","event",e])}initializeColumns(){}initializeColumnSelectorPanel(){return{icon:"view-column",iconTooltip:{tooltipText:"Column selector",tooltipPosition:k.b.BOTTOM},content:{}}}onFiltersChanged(e){const t=this.processFilters(e);this._currentFilters.next(t),this.dataBrowserSource.appliedFiltersNumber.next(Object.keys(t).filter(e=>e!=h.j.SEARCH).length)}initializeFilters(){const e=[{title:a.a.t("standard","Search"),code:h.j.SEARCH,type:C.d.free_search_filter,params:{placeholder:a.a.t("standard","Search...")}},{title:a.a.t("standard","Instructor"),code:h.j.INSTRUCTORS,type:C.d.multiselect_filter,params:{placeholder:a.a.t("standard","Instructor"),maxSelectableItems:1,maxSuggestedItems:10,source:[]}},{title:a.a.t("standard","Type"),code:h.j.TYPE,type:C.d.radio_filter,disableAllOptionFilter:!1,params:{options:[{key:"both",label:a.a.t("standard","Both")},{key:"venue",label:a.a.t("standard","Venue")},{key:"tool",label:a.a.t("standard","Video Conference Tool")}],useRawValue:!0}},{title:a.a.t("standard","Properties"),code:h.j.PROPERTIES,type:C.d.checkbox_filter,params:{options:[{key:h.j.PROPERTIES_WITHOUT_ATTENDANCE,label:a.a.t("standard","Without Attendance")},{key:h.j.PROPERTIES_WITHOUT_EVENT_INSTRUCTORS,label:a.a.t("standard","Without Event Instructors")}]}}];return Object(I.a)(e)}searchForUsers(e){this.searchUsers$.next(e)}listenToSearchUser(){return this.sessionManagementService.getInstructorListSuggest(this.searchUsers$).subscribe(e=>{this.dataTable.multiselects.first.source=[...e],this.dataTable.multiselects.first.filteredList=[...e],this.dataTable.multiselects.first.showItemsList=!0,this.changeDetector.markForCheck(),this.changeDetector.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(g.ec(_.a),g.ec(m.h),g.ec(g.o),g.ec(g.i))},e.\u0275cmp=g.Yb({type:e,selectors:[["ilt-instructor-session-events-list"]],viewQuery:function(e,t){if(1&e&&g.nd(z,1),2&e){let e;g.Rc(e=g.tc())&&(t.dataTable=e.first)}},inputs:{sessionId:"sessionId"},features:[g.Jb],decls:59,vars:69,consts:[[1,"data-browser",3,"hidden","dataBrowserSource","onFiltersUpdate"],["dataTable",""],[1,"custom-panel"],[3,"tableRef","cacheId","lockedColumns","preselectedColumns","hiddenColumns","maxSelectable"],[1,"data-browser-table-content"],[1,"table-wrapper"],[1,"hyd-table-ilt-sessions-list",3,"data","selectable","rowsComparisonFunction","rowHeight","selection","sorting","selectRows","sort"],["sessionManagementEventsListTable",""],[3,"columnName","sortable","ellipsed"],["columnName","date",3,"sortable","ellipsed"],["columnName","time_begin",3,"sortable","ellipsed"],["columnName","hours",3,"sortable","ellipsed"],[3,"columnName","sortable"],["columnName","location",3,"sortable","ellipsed"],["columnName","classroom",3,"sortable","ellipsed"],["columnName","webinar_tool_name","fieldName","webinar_tool_name",3,"headerLabel","translateField","sortable"],[3,"columnName","sortable","alignment",4,"ngFor","ngForOf"],[3,"columnName","headerLabel","fieldName","translateField","sortable"],[3,"pageIndex","pageSize","length","pageChange"],[1,"massive-actions-bar-wrapper"],[3,"counter","actions","actionTitle","type","isSelectAllButtonVisible","isUnSelectAllButtonVisible","selectAll$","unselectAll$"],["class","table-cover bg-grey-superlight",4,"ngIf"],[1,"no-data",3,"isVisible","type","title","subtitle"],["class","spinner",4,"ngIf"],[1,"text-pointer",3,"click"],[4,"ngIf"],[3,"innerHTML"],[3,"columnName","sortable","alignment"],[1,"col-with-icon-header"],[1,"col-with-icon-cell",3,"click"],[1,"counter"],[1,"icon"],[3,"name","size","color",4,"ngIf"],[3,"class",4,"ngIf"],[3,"name","size","color"],[1,"table-cover","bg-grey-superlight"],[3,"isVisible","type","title","subtitle",4,"ngIf"],[1,"spinner"],[3,"size"],[3,"isVisible","type","title","subtitle"]],template:function(e,t){if(1&e&&(g.kc(0,"data-browser",0,1),g.sc("onFiltersUpdate",function(e){return t.onFiltersChanged(e)}),g.kc(2,"div",2),g.fc(3,"hyd-column-selector",3),g.jc(),g.kc(4,"div",4),g.xc(5,"async"),g.kc(6,"div",5),g.kc(7,"hyd-table",6,7),g.sc("selectRows",function(e){return t.onRowsSelected(e)})("sort",function(e){return t.onSortingChanged(e)}),g.xc(9,"async"),g.kc(10,"hyd-table-column",8),g.kc(11,"hyd-table-column-header"),g.ed(12,q,3,3,"ng-template"),g.jc(),g.kc(13,"hyd-table-column-cell"),g.ed(14,V,3,1,"ng-template"),g.jc(),g.jc(),g.kc(15,"hyd-table-column",9),g.kc(16,"hyd-table-column-header"),g.ed(17,B,2,3,"ng-template"),g.jc(),g.kc(18,"hyd-table-column-cell"),g.ed(19,G,3,4,"ng-template"),g.jc(),g.jc(),g.kc(20,"hyd-table-column",10),g.kc(21,"hyd-table-column-header"),g.ed(22,$,2,5,"ng-template"),g.jc(),g.kc(23,"hyd-table-column-cell"),g.ed(24,Y,2,1,"ng-template"),g.jc(),g.jc(),g.kc(25,"hyd-table-column",11),g.kc(26,"hyd-table-column-header"),g.ed(27,W,2,3,"ng-template"),g.jc(),g.kc(28,"hyd-table-column-cell"),g.ed(29,Q,2,3,"ng-template"),g.jc(),g.jc(),g.kc(30,"hyd-table-column",12),g.kc(31,"hyd-table-column-header"),g.ed(32,K,2,3,"ng-template"),g.jc(),g.kc(33,"hyd-table-column-cell"),g.ed(34,ee,4,3,"ng-template"),g.jc(),g.jc(),g.kc(35,"hyd-table-column",13),g.kc(36,"hyd-table-column-header"),g.ed(37,ie,2,5,"ng-template"),g.jc(),g.kc(38,"hyd-table-column-cell"),g.ed(39,se,3,3,"ng-template"),g.jc(),g.jc(),g.kc(40,"hyd-table-column",14),g.kc(41,"hyd-table-column-header"),g.ed(42,ne,2,3,"ng-template"),g.jc(),g.kc(43,"hyd-table-column-cell"),g.ed(44,ae,3,3,"ng-template"),g.jc(),g.jc(),g.fc(45,"hyd-column-ellipsable-text",15),g.xc(46,"t"),g.ed(47,de,5,3,"hyd-table-column",16),g.fc(48,"hyd-column-ellipsable-text",17),g.jc(),g.kc(49,"hyd-paginator",18),g.sc("pageChange",function(e){return t.onPagingChanged(e)}),g.jc(),g.jc(),g.kc(50,"div",19),g.kc(51,"massive-actions-bar",20),g.sc("selectAll$",function(){return t.onSelectEverything(!0)})("unselectAll$",function(){return t.onSelectEverything(!1)}),g.xc(52,"t"),g.jc(),g.jc(),g.jc(),g.ed(53,pe,3,2,"div",21),g.xc(54,"async"),g.jc(),g.fc(55,"blankslate",22),g.xc(56,"t"),g.xc(57,"t"),g.ed(58,ge,2,1,"div",23)),2&e){const e=g.Sc(8);g.Dc("hidden",!t.initialized||t.noData)("dataBrowserSource",t.dataBrowserSource),g.Mb(3),g.Dc("tableRef",e)("cacheId","session-management-events-list-column-selector_")("lockedColumns",t.lockedColumns)("preselectedColumns",t.preselectedColumns)("hiddenColumns",t.hiddenColumns)("maxSelectable",t.countColumns),g.Mb(1),g.Wb("massive-actions-bar-open",g.yc(5,55,t.showMassiveActionsBar$)),g.Mb(3),g.Dc("data",g.yc(9,57,t.tableData$))("selectable",t.isSelectAllEnable)("rowsComparisonFunction",t.comparerFn)("rowHeight",t.HYD_TABLE_STYLES.ROW_HEIGHT)("selection",t.currentSelection)("sorting",t.sortingCriteria),g.Mb(3),g.Dc("columnName","name")("sortable",!0)("ellipsed",!0),g.Mb(5),g.Dc("sortable",!0)("ellipsed",!0),g.Mb(5),g.Dc("sortable",!0)("ellipsed",!0),g.Mb(5),g.Dc("sortable",!0)("ellipsed",!0),g.Mb(5),g.Dc("columnName","type")("sortable",!1),g.Mb(5),g.Dc("sortable",!0)("ellipsed",!0),g.Mb(5),g.Dc("sortable",!0)("ellipsed",!0),g.Mb(5),g.Dc("headerLabel",g.yc(46,59,"Video Conference Tool"))("translateField",!1)("sortable",!1),g.Mb(2),g.Dc("ngForOf",t.assignmentColumns),g.Mb(1),g.Dc("columnName","break")("headerLabel","Break")("fieldName","break")("translateField",!1)("sortable",!1),g.Mb(1),g.Dc("pageIndex",null==t.paginationInfo?null:t.paginationInfo.page)("pageSize",null==t.paginationInfo?null:t.paginationInfo.pageSize)("length",t.totalCount),g.Mb(2),g.Dc("counter",t.selectedItemsCount)("actions",t.getMassiveActions())("actionTitle",g.yc(52,61,"Choose action"))("type","inline-btn")("isSelectAllButtonVisible",!0)("isUnSelectAllButtonVisible",!0),g.Mb(2),g.Dc("ngIf",g.yc(54,63,t.hideTable$)),g.Mb(2),g.Ec("title",g.yc(56,65,t.blankSlateConfig.title)),g.Ec("subtitle",g.yc(57,67,t.blankSlateConfig.subtitle)),g.Dc("isVisible",t.initialized&&t.noData)("type",t.blankSlateConfig.type),g.Mb(3),g.Dc("ngIf",!t.initialized)}},directives:[x.a,D.a,O.a,E.c,E.d,E.b,A.a,v.o,P.b,M.a,v.p,L.a,j.a,R.lc,R.Be],pipes:[v.b,a.b,F.c,N,U.a],styles:['.data-browser-table[_nghost-%COMP%]   .no-data[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .no-data[_ngcontent-%COMP%]{margin-top:100px}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;z-index:1}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate{margin-top:50px}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section{font-size:1.1em}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section+div, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section+div{font-size:.8em}.data-browser-table[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:flex-start;padding-top:50px;box-sizing:border-box}.data-browser-table[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]   ui-spinner[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]   ui-spinner[_ngcontent-%COMP%]{position:static}.data-browser-table[_nghost-%COMP%]     .hyd-table-col[style^="flex-basis: 30.042px"], .data-browser-table   [_nghost-%COMP%]     .hyd-table-col[style^="flex-basis: 30.042px"]{flex-grow:0!important;justify-content:flex-end!important}.color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content, .data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table{display:block;height:calc(100% - 46px)}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table .hyd-table-body, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table .hyd-table-body{height:calc(100% - 39px);overflow-x:hidden;overflow-y:auto}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper{overflow:hidden;height:0}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper massive-actions-bar, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper massive-actions-bar{height:52px}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .table-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .table-wrapper{height:calc(100% - 52px)}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .massive-actions-bar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .massive-actions-bar-wrapper{height:52px;overflow:visible}.data-browser-table[_nghost-%COMP%]     .data-browser, .data-browser-table   [_nghost-%COMP%]     .data-browser{overflow-y:auto;overflow-x:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{width:330px;padding:0;margin:0;display:block;height:100%;overflow-y:auto;overflow-x:hidden;background-color:#fff}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-right:1px solid var(--hyd-color-border-neutral)}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-right:0}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-left:0}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-left:1px solid var(--hyd-color-border-neutral)}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-wrapper{box-sizing:border-box;border:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tab, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tab, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs-body, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs-body{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab{display:flex;flex-direction:column}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter{flex-shrink:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter.last, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter.last{flex-grow:1}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .clear-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .clear-filters{flex-shrink:0;justify-content:flex-end;padding:10px}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-left:10px}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-right:auto}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-right:10px}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .filter-box, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .filter-box{padding-right:20px}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--9-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--9-col, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--12-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--12-col{height:100%;margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--9-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--9-col{position:relative;width:calc(100% - 330px - 15px);margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col{position:relative;width:calc(100% - 15px);margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col.header-row, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col.header-row{width:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser>.section-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser>.section-wrapper{height:calc(100% - 40px - 1px);overflow:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container{height:100%;overflow:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid{margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .full-width-header-container .mdl-grid, .data-browser-table   [_nghost-%COMP%]     .data-browser .full-width-header-container .mdl-grid{margin:0 auto}.data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{overflow:hidden;height:100%}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{margin:0 -15px 0 0}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{margin:0 0 0 -15px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters{height:40px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder{height:40px!important}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder span i, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder span i{padding-top:10px;padding-bottom:10px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer{height:40px;padding:0 6px}.data-browser-table.full-width-header[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table.full-width-header   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container{flex-grow:1;max-width:unset}.data-browser-table.full-width-header[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer, .data-browser-table.full-width-header   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer{display:none}[_nghost-%COMP%]{display:block}.massive-actions-bar-wrapper[_ngcontent-%COMP%]{height:52px;position:relative;top:-1px}.col-with-icon-header[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.col-with-icon-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.text-pointer[_ngcontent-%COMP%]{cursor:pointer}.col-with-icon-cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%}.col-with-icon-cell[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%], .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;width:50%}.col-with-icon-cell[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{justify-content:flex-end}.col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{justify-content:flex-start}.router-outlet:not(.direction-rtl):not(.heracles-root)[_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .router-outlet:not(.direction-rtl):not(.heracles-root)   [_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:6px}.router-outlet.direction-rtl:not(.heracles-root)[_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .router-outlet.direction-rtl:not(.heracles-root)   [_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:6px}.col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   i.zmdi[_ngcontent-%COMP%]{font-size:var(--hyd-size-icon-sm)}'],changeDetection:0}),e})();var fe=i("lJxs"),_e=i("aWaq"),ve=i("7vd5"),ye=i("oifr"),we=i("2YCl"),Ce=i("Akjt"),Se=i("XNiG"),ke=i("z6cu"),Te=i("3Pt+"),Ie=i("JX91"),xe=i("1G5W"),De=i("JIr8"),Oe=i("TrxT"),Ee=i("zbwl"),Ae=i("bDTG"),Pe=i("wd/R"),Me=i.n(Pe),Le=i("fN+k"),je=i("8Ff5"),Re=i("kZHE"),Fe=i("wOr6"),Ne=i("fnIB"),Ue=i("HpyV"),ze=i("rnoZ");const qe=["submitActionButton"],Ve=["actionButtons"],Be=["uiInputUpload"];function Ge(e,t){if(1&e&&(g.kc(0,"div",22),g.kc(1,"div",23),g.fc(2,"ui-notification-inline",24),g.xc(3,"t"),g.xc(4,"t"),g.jc(),g.jc()),2&e){const e=g.wc();g.Mb(2),g.Dc("title",g.yc(3,2,e.errorNotitificationTitle))("message",g.yc(4,4,"Please fill in the required fields correctly to proceed"))}}function He(e,t){if(1&e&&(g.kc(0,"ui-input-select-option",25),g.gd(1),g.xc(2,"t"),g.jc()),2&e){const e=t.$implicit;g.Dc("value",e.value),g.Mb(1),g.id(" ",g.yc(2,2,e.label)," ")}}function $e(e,t){if(1&e&&(g.kc(0,"ui-input-error"),g.gd(1),g.xc(2,"t"),g.jc()),2&e){const e=g.wc(2);g.Mb(1),g.id(" ",g.yc(2,1,e.formGroup.controls.evaluation.errors.scoreValidator)," ")}}function Ye(e,t){if(1&e&&(g.kc(0,"ui-input-error"),g.gd(1),g.xc(2,"t"),g.jc()),2&e){const e=g.wc(2);g.Mb(1),g.id(" ",g.yc(2,1,e.formGroup.controls.evaluation.errors.integerPositiveWithZeroValidator)," ")}}function We(e,t){if(1&e&&(g.kc(0,"div",11),g.kc(1,"ui-input-text",26),g.xc(2,"t"),g.ed(3,$e,3,3,"ui-input-error",27),g.ed(4,Ye,3,3,"ui-input-error",27),g.jc(),g.jc()),2&e){const e=g.wc();g.Mb(1),g.Dc("label",g.yc(2,5,"Score"))("formControl",e.formGroup.controls.evaluation)("autocomplete","off"),g.Mb(2),g.Dc("ngIf",null==e.formGroup.controls.evaluation.errors?null:e.formGroup.controls.evaluation.errors.scoreValidator),g.Mb(1),g.Dc("ngIf",null==e.formGroup.controls.evaluation.errors?null:e.formGroup.controls.evaluation.errors.integerPositiveWithZeroValidator)}}function Qe(e,t){if(1&e&&(g.kc(0,"div",11),g.fc(1,"datetime-picker",31),g.xc(2,"t"),g.jc()),2&e){const e=g.wc(2);g.Mb(1),g.Dc("enabled",!0)("label",g.yc(2,6,"Completion date"))("inputFormControl",e.formGroup.controls.completion_date)("value",e.formGroup.controls.completion_date.value)("initialEmptyValue",!0)("type","date")}}function Ke(e,t){if(1&e&&(g.kc(0,"a",32),g.xc(1,"async"),g.gd(2),g.xc(3,"t"),g.jc()),2&e){const e=g.wc(2);g.Dc("href",g.yc(1,2,e.attachmentFileFromS3),g.Yc),g.Mb(2),g.id(" ",g.yc(3,4,"Download the uploaded file")," ")}}function Je(e,t){if(1&e){const e=g.lc();g.kc(0,"div",28),g.ed(1,Qe,3,8,"div",14),g.kc(2,"div",11),g.kc(3,"single-upload",29),g.sc("uploaded",function(t){return g.Vc(e),g.wc().uploadedFile(t)})("uploading",function(){return g.Vc(e),g.wc().uploadingFile()})("reset",function(){return g.Vc(e),g.wc().deletedFile()}),g.xc(4,"t"),g.jc(),g.ed(5,Ke,4,6,"a",30),g.xc(6,"async"),g.jc(),g.jc()}if(2&e){const e=g.wc();g.Mb(1),g.Dc("ngIf",e.formGroup.controls.status.value==e.evaluationStatus.PASSED),g.Mb(2),g.Dc("label",g.yc(4,5,"_ATTACHMENT"))("inputFormControl",e.formGroup.controls.attachment)("collection",e.iltS3Collection),g.Mb(2),g.Dc("ngIf",null!=g.yc(6,7,e.attachmentFileFromS3))}}function Xe(e,t){if(1&e&&(g.kc(0,"div",10),g.kc(1,"div",23),g.kc(2,"ui-input-checkbox",33),g.kc(3,"ui-input-label"),g.gd(4),g.xc(5,"t"),g.jc(),g.jc(),g.jc(),g.jc()),2&e){const e=g.wc();g.Mb(2),g.Dc("formControl",e.formGroup.controls.mark_as_present),g.Mb(2),g.id(" ",g.yc(5,2,"Mark the user as present at all of the events in the session")," ")}}const Ze=function(){return{category:"classroom"}},et=function(){return{category:"gamification"}};function tt(e,t){if(1&e&&(g.kc(0,"div",8),g.kc(1,"h2",6),g.gd(2),g.xc(3,"t"),g.jc(),g.kc(4,"div",10),g.kc(5,"div",23),g.fc(6,"rich-textarea",34),g.xc(7,"t"),g.jc(),g.jc(),g.jc()),2&e){const e=g.wc();g.Mb(2),g.id(" ",g.zc(3,3,"Learning performance evaluation",g.Hc(9,Ze))," "),g.Mb(4),g.Dc("label",g.zc(7,6,"Message",g.Hc(10,et)))("inputFormControl",e.formGroup.controls.message)}}let it=(()=>{class e extends Oe.a{constructor(e,t){super(),this.sessionManagementService=e,this.docLayoutService=t,this.closePanel=new g.q,this.closePanelWithoutRefresh=new g.q,this.evaluationStatusPlaceHolder="NOT_SET",this.evaluationStatus=h.a,this.requiredMarker=a.a.t("standard","(Required)"),this.evaluationOptionList=[{label:a.a.t("standard","passed"),value:h.a.PASSED},{label:a.a.t("standard","Not passed"),value:h.a.NOT_PASSED},{label:a.a.t("standard","Not set"),value:this.evaluationStatusPlaceHolder}],this.destroy$=new Se.a,this.attachmentFileFromS3=new d.a(null),this.iltS3Collection=Ae.a,this._isFormValid=!0}get title(){return a.a.t("classroom","Evaluate")}get description(){return a.a.t("standard","Fill in the fields below to manage the evaluation of the selected users.")}get errorNotitificationTitle(){return this._errorNotitificationTitle}set errorNotitificationTitle(e){this._errorNotitificationTitle=a.a.t("standard",e<=1?"{count_error} Error - Evaluation not possible":"{count_error} Errors - Evaluation not possible",{count_error:e})}ngOnInit(){null!=this.data.attachment&&this.getFileFromS3(this.data.attachment);const e=null!=this.data.status_id?this.data.status_id:this.evaluationStatusPlaceHolder;this.formGroup=new Te.h({status:new Te.e(e,Te.x.required),evaluation:new Te.e(this.data.evaluation,[this.scoreValidator(),Object(Ee.a)()]),completion_date:new Te.e(this.data.completion_date?new _e.a(this.data.completion_date).formatTimezoned("YYYY-MM-DD",Object(ve.k)()):(new _e.a).formatTimezoned("YYYY-MM-DD",Object(ve.k)())),attachment:new Te.e(this.data.attachment?this.data.attachment.substring(this.data.attachment.lastIndexOf("/")+1):null),message:new Te.e(this.data.message),mark_as_present:new Te.e(!1)}),this.formGroup.controls.status.valueChanges.pipe(Object(Ie.a)(e),Object(xe.a)(this.destroy$)).subscribe(e=>{e==this.evaluationStatus.PASSED?this.formGroup.controls.completion_date.setValidators(Te.x.required):(this.formGroup.controls.completion_date.clearValidators(),this.formGroup.controls.completion_date.setErrors(null))})}get canExecute(){return this._isFormValid}executeImpl(){return this.evaluateSession().pipe(Object(De.a)(e=>(this.docLayoutService.toast.showToast({type:"error",message:e.message[0]}),Object(Ae.d)(this.actionButtons),Object(ke.a)(""))),Object(fe.a)(()=>(this.docLayoutService.toast.showToast({type:"success",message:a.a.t("course_management","The evaluation has been saved successfully")}),!0)))}executeWithValidation(){return Object(s.a)(this,void 0,void 0,function*(){if(this.formGroup.valid)this.executeImpl().subscribe(e=>e&&this.closePanel.emit(!0));else{this._isFormValid=!1,this.formGroup.markAllAsTouched();let e=0;for(const t in this.formGroup.controls)this.formGroup.controls[t].updateValueAndValidity({emitEvent:!1}),null!=this.formGroup.controls[t].errors?(this.formGroup.controls[t].markAsDirty(),e++):this.formGroup.controls[t].markAsPristine();Object(Ae.d)(this.actionButtons),this.errorNotitificationTitle=e}return!1})}evaluateSession(){const e=this.formGroup.getRawValue();return this.sessionManagementService.evaluateSession(this.data.sessionId,this.data.userId,e.status==this.evaluationStatusPlaceHolder?0:Number(e.status),e.status==this.evaluationStatusPlaceHolder||l.a.isNaN(Number.parseInt(e.evaluation))?null:e.evaluation,e.status==this.evaluationStatus.PASSED&&e.completion_date?new _e.a(Me.a.tz(new _e.a(e.completion_date).formatUTC("YYYY-MM-DD"),Object(ve.k)())).formatUTC("YYYY-MM-DD HH:mm:ss"):null,e.attachment,Number(e.mark_as_present),e.message)}onChooseFile(e){console.debug(e)}uploadingFile(){this.attachmentFileFromS3.next(null)}uploadedFile(e){this.formGroup.controls.attachment.setValue(e.new_filename),this.attachmentFileFromS3.next(e.url)}deletedFile(){this.formGroup.controls.attachment.setValue(null),this.attachmentFileFromS3.next(null)}getFileFromS3(e){return this.sessionManagementService.getFileFromS3(e).subscribe(e=>this.attachmentFileFromS3.next(e.url))}scoreValidator(){return e=>Number(e.value)>this.data.max_score?{scoreValidator:a.a.t("standard","Insert a number less than the Maximum Score {n}",{n:this.data.max_score})}:null}}return e.\u0275fac=function(t){return new(t||e)(g.ec(_.a),g.ec(b.a))},e.\u0275cmp=g.Yb({type:e,selectors:[["ilt-instructor-evaluate"]],viewQuery:function(e,t){if(1&e&&(g.nd(qe,1),g.nd(Ve,1),g.nd(Te.i,1),g.nd(Be,1)),2&e){let e;g.Rc(e=g.tc())&&(t.submitActionButton=e.first),g.Rc(e=g.tc())&&(t.actionButtons=e.first),g.Rc(e=g.tc())&&(t.formDirective=e.first),g.Rc(e=g.tc())&&(t.uiInputUpload=e.first)}},inputs:{data:"data"},outputs:{closePanel:"closePanel",closePanelWithoutRefresh:"closePanelWithoutRefresh"},features:[g.Jb],decls:40,vars:43,consts:[[1,"lt-session-right-panel-wrapper"],[3,"title","subtitle","trigger"],[1,"ilt-session-container","hyd-background-surface"],["autocomplete","off"],["class","hyd-row registration-standard-notification-inline-container",4,"ngIf"],[1,"hyd-row","block"],[1,"hyd-typography-heading-5","hyd-color-typography-primary"],[1,"user-info"],[1,"block"],[1,"hyd-typography-heading-5","hyd-color-typography-primary","margin-bottom-sm"],[1,"hyd-row"],[1,"hyd-col-12"],["ngDefaultControl","",3,"label","formControl","requiredMarker"],[3,"value",4,"ngFor","ngForOf"],["class","hyd-col-12",4,"ngIf"],["class","hyd-row margin-bottom-sm",4,"ngIf"],["class","hyd-row",4,"ngIf"],["class","block",4,"ngIf"],["actionButtons",""],[3,"disabled","slot","label","trigger"],[3,"disabled","slot","type","label","trigger"],["submitActionButton",""],[1,"hyd-row","registration-standard-notification-inline-container"],[1,"hyd-col-24"],[3,"title","message"],[3,"value"],["ngDefaultControl","",3,"label","formControl","autocomplete"],[4,"ngIf"],[1,"hyd-row","margin-bottom-sm"],[3,"label","inputFormControl","collection","uploaded","uploading","reset"],["download","","target","_blank",3,"href",4,"ngIf"],[3,"enabled","label","inputFormControl","value","initialEmptyValue","type"],["download","","target","_blank",3,"href"],[3,"formControl"],[3,"label","inputFormControl"]],template:function(e,t){1&e&&(g.kc(0,"div",0),g.kc(1,"doc-shared-right-panel-header",1),g.sc("trigger",function(){return t.closePanelWithoutRefresh.emit(!0)}),g.xc(2,"t"),g.xc(3,"t"),g.jc(),g.kc(4,"doc-shared-right-panel-body"),g.kc(5,"div",2),g.kc(6,"form",3),g.ed(7,Ge,5,6,"div",4),g.kc(8,"div",5),g.kc(9,"h2",6),g.gd(10),g.xc(11,"t"),g.kc(12,"span",7),g.gd(13),g.jc(),g.kc(14,"span"),g.gd(15),g.xc(16,"t"),g.jc(),g.kc(17,"span",7),g.gd(18),g.jc(),g.jc(),g.jc(),g.kc(19,"div",8),g.kc(20,"h2",9),g.gd(21),g.xc(22,"t"),g.jc(),g.kc(23,"div",10),g.kc(24,"div",11),g.kc(25,"ui-input-select",12),g.xc(26,"t"),g.xc(27,"t"),g.ed(28,He,3,4,"ui-input-select-option",13),g.jc(),g.jc(),g.ed(29,We,5,7,"div",14),g.jc(),g.ed(30,Je,7,9,"div",15),g.ed(31,Xe,6,4,"div",16),g.jc(),g.ed(32,tt,8,11,"div",17),g.jc(),g.jc(),g.jc(),g.kc(33,"doc-shared-right-panel-actions",null,18),g.kc(35,"doc-shared-right-panel-action",19),g.sc("trigger",function(){return t.closePanelWithoutRefresh.emit(!0)}),g.xc(36,"t"),g.jc(),g.kc(37,"doc-shared-right-panel-action",20,21),g.sc("trigger",function(){return t.executeWithValidation()}),g.xc(39,"t"),g.jc(),g.jc(),g.jc()),2&e&&(g.Mb(1),g.Dc("title",g.yc(2,23,t.title))("subtitle",g.yc(3,25,t.description)),g.Mb(6),g.Dc("ngIf",!t.canExecute),g.Mb(3),g.id(" ",g.yc(11,27,"You are about to evaluate")," "),g.Mb(3),g.id("",t.data.userInfo," "),g.Mb(2),g.hd(g.yc(16,29,"in the session")),g.Mb(3),g.id(" ",t.data.sessionName,""),g.Mb(3),g.id(" ",g.yc(22,31,"Status & Score")," "),g.Mb(4),g.Dc("label",g.yc(26,33,"Enrollment status"))("formControl",t.formGroup.controls.status)("requiredMarker",g.yc(27,35,t.requiredMarker)),g.Mb(3),g.Dc("ngForOf",t.evaluationOptionList),g.Mb(1),g.Dc("ngIf",t.formGroup.controls.status.value!=t.evaluationStatusPlaceHolder),g.Mb(1),g.Dc("ngIf",t.formGroup.controls.status.value!=t.evaluationStatusPlaceHolder),g.Mb(1),g.Dc("ngIf",t.formGroup.controls.status.value!=t.evaluationStatusPlaceHolder),g.Mb(1),g.Dc("ngIf",t.formGroup.controls.status.value!=t.evaluationStatusPlaceHolder),g.Mb(3),g.Dc("disabled",!1)("slot","end")("label",g.yc(36,37,"Cancel")),g.Mb(2),g.Dc("disabled",!1)("slot","end")("type","positive")("label",g.zc(39,39,"Evaluate",g.Hc(42,Ze))))},directives:[Le.a,je.a,Te.y,Te.p,Te.q,v.p,R.Lc,Te.b,Te.o,Te.f,v.o,Re.a,Fe.a,R.Jd,R.Nc,R.Qc,R.Ac,Ne.a,Ue.a,R.sc,R.Cc,ze.a],pipes:[a.b,v.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}[_nghost-%COMP%]  ui-input-select .ui-input-select-floating-label .ui-input-select-label.ui-typography-body{font-weight:var(--hyd-typography-weight-semibold)}[_nghost-%COMP%]  ui-input-select .ui-input-select-options{z-index:10000}.lt-session-right-panel-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:100vh}.registration-standard-notification-inline-container[_ngcontent-%COMP%]{padding-top:1.5rem;padding-top:var(--hyd-spacing-md)}.ilt-session-container[_ngcontent-%COMP%]{min-height:100%}.block[_ngcontent-%COMP%]{border-bottom:1px solid var(--hyd-color-border-neutral);padding:var(--hyd-spacing-md)}.block[_ngcontent-%COMP%]   .margin-bottom-sm[_ngcontent-%COMP%]{margin-bottom:var(--hyd-spacing-sm)}.block[_ngcontent-%COMP%]   .margin-bottom-md[_ngcontent-%COMP%]{margin-bottom:var(--hyd-spacing-md)}.block[_ngcontent-%COMP%]   .hyd-col-12[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   .hyd-col-24[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   .hyd-row[_ngcontent-%COMP%]{padding-left:0}.block[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{color:var(--hyd-color-typography-accent-tertiary)}.block[_ngcontent-%COMP%]   .col-nested[_ngcontent-%COMP%]{padding-left:30px}.block[_ngcontent-%COMP%]   .venue-video-label[_ngcontent-%COMP%]{margin-top:var(--hyd-spacing-sm);margin-bottom:var(--hyd-spacing-sm)}.block[_ngcontent-%COMP%]   .venue-video-error[_ngcontent-%COMP%]{color:var(--hyd-color-typography-error)}"]}),e})();const st=["submitActionButton"],nt=["actionButtons"],at=["uiInputUpload"];function ot(e,t){if(1&e&&(g.kc(0,"div",22),g.kc(1,"div",23),g.fc(2,"ui-notification-inline",24),g.xc(3,"t"),g.xc(4,"t"),g.jc(),g.jc()),2&e){const e=g.wc();g.Mb(2),g.Dc("title",g.yc(3,2,e.errorNotitificationTitle))("message",g.yc(4,4,"Please fill in the required fields correctly to proceed"))}}function rt(e,t){if(1&e&&(g.kc(0,"ui-input-select-option",25),g.gd(1),g.xc(2,"t"),g.jc()),2&e){const e=t.$implicit;g.Dc("value",e.value),g.Mb(1),g.id(" ",g.yc(2,2,e.label)," ")}}function ct(e,t){if(1&e&&(g.kc(0,"ui-input-error"),g.gd(1),g.xc(2,"t"),g.jc()),2&e){const e=g.wc(2);g.Mb(1),g.id(" ",g.yc(2,1,e.formGroup.controls.evaluation.errors.scoreValidator)," ")}}function lt(e,t){if(1&e&&(g.kc(0,"ui-input-error"),g.gd(1),g.xc(2,"t"),g.jc()),2&e){const e=g.wc(2);g.Mb(1),g.id(" ",g.yc(2,1,e.formGroup.controls.evaluation.errors.integerPositiveWithZeroValidator)," ")}}function dt(e,t){if(1&e&&(g.kc(0,"div",11),g.kc(1,"ui-input-text",26),g.xc(2,"t"),g.ed(3,ct,3,3,"ui-input-error",27),g.ed(4,lt,3,3,"ui-input-error",27),g.jc(),g.jc()),2&e){const e=g.wc();g.Mb(1),g.Dc("label",g.yc(2,5,"Score"))("formControl",e.formGroup.controls.evaluation)("autocomplete","off"),g.Mb(2),g.Dc("ngIf",null==e.formGroup.controls.evaluation.errors?null:e.formGroup.controls.evaluation.errors.scoreValidator),g.Mb(1),g.Dc("ngIf",null==e.formGroup.controls.evaluation.errors?null:e.formGroup.controls.evaluation.errors.integerPositiveWithZeroValidator)}}function ut(e,t){if(1&e&&(g.kc(0,"div",11),g.fc(1,"datetime-picker",31),g.xc(2,"t"),g.jc()),2&e){const e=g.wc(2);g.Mb(1),g.Dc("enabled",!0)("label",g.yc(2,6,"Completion date"))("inputFormControl",e.formGroup.controls.completion_date)("value",e.formGroup.controls.completion_date.value)("initialEmptyValue",!0)("type","date")}}function ht(e,t){if(1&e&&(g.kc(0,"a",32),g.xc(1,"async"),g.gd(2),g.xc(3,"t"),g.jc()),2&e){const e=g.wc(2);g.Dc("href",g.yc(1,2,e.attachmentFileFromS3),g.Yc),g.Mb(2),g.id(" ",g.yc(3,4,"Download the uploaded file")," ")}}function pt(e,t){if(1&e){const e=g.lc();g.kc(0,"div",28),g.ed(1,ut,3,8,"div",14),g.kc(2,"div",11),g.kc(3,"single-upload",29),g.sc("uploaded",function(t){return g.Vc(e),g.wc().uploadedFile(t)})("uploading",function(){return g.Vc(e),g.wc().uploadingFile()})("reset",function(){return g.Vc(e),g.wc().deletedFile()}),g.xc(4,"t"),g.jc(),g.ed(5,ht,4,6,"a",30),g.xc(6,"async"),g.jc(),g.jc()}if(2&e){const e=g.wc();g.Mb(1),g.Dc("ngIf",e.formGroup.controls.status.value==e.evaluationStatus.PASSED),g.Mb(2),g.Dc("label",g.yc(4,5,"_ATTACHMENT"))("inputFormControl",e.formGroup.controls.attachment)("collection",e.iltS3Collection),g.Mb(2),g.Dc("ngIf",null!=g.yc(6,7,e.attachmentFileFromS3))}}function gt(e,t){if(1&e&&(g.kc(0,"div",10),g.kc(1,"div",23),g.kc(2,"ui-input-checkbox",33),g.kc(3,"ui-input-label"),g.gd(4),g.xc(5,"t"),g.jc(),g.jc(),g.jc(),g.jc()),2&e){const e=g.wc();g.Mb(2),g.Dc("formControl",e.formGroup.controls.mark_as_present),g.Mb(2),g.id(" ",g.yc(5,2,"Mark the user as present at all of the events in the session")," ")}}const mt=function(){return{category:"classroom"}},bt=function(){return{category:"gamification"}};function ft(e,t){if(1&e&&(g.kc(0,"div",8),g.kc(1,"h2",6),g.gd(2),g.xc(3,"t"),g.jc(),g.kc(4,"div",10),g.kc(5,"div",23),g.fc(6,"rich-textarea",34),g.xc(7,"t"),g.jc(),g.jc(),g.jc()),2&e){const e=g.wc();g.Mb(2),g.id(" ",g.zc(3,3,"Learning performance evaluation",g.Hc(9,mt))," "),g.Mb(4),g.Dc("label",g.zc(7,6,"Message",g.Hc(10,bt)))("inputFormControl",e.formGroup.controls.message)}}let _t=(()=>{class e extends Oe.a{constructor(e,t){super(),this.sessionManagementService=e,this.docLayoutService=t,this.closePanel=new g.q,this.closePanelWithoutRefresh=new g.q,this.evaluationStatusPlaceHolder="NOT_SET",this.evaluationStatus=h.a,this.requiredMarker=a.a.t("standard","(Required)"),this.attachmentFileFromS3=new d.a(null),this.iltS3Collection=Ae.a,this.evaluationOptionList=[{label:a.a.t("standard","passed"),value:h.a.PASSED},{label:a.a.t("standard","Not passed"),value:h.a.NOT_PASSED},{label:a.a.t("standard","Not set"),value:this.evaluationStatusPlaceHolder}],this.destroy$=new Se.a,this._isFormValid=!0}get title(){return a.a.t("classroom","Evaluate")}get description(){return a.a.t("standard","Fill in the fields below to manage the evaluation of the selected users.")}get errorNotitificationTitle(){return this._errorNotitificationTitle}set errorNotitificationTitle(e){this._errorNotitificationTitle=a.a.t("standard",e<=1?"{count_error} Error - Evaluation not possible":"{count_error} Errors - Evaluation not possible",{count_error:e})}ngOnInit(){const e=this.evaluationStatusPlaceHolder;this.formGroup=new Te.h({status:new Te.e(e,Te.x.required),evaluation:new Te.e("",[Object(Ee.a)(),this.scoreValidator()]),completion_date:new Te.e((new _e.a).formatTimezoned("YYYY-MM-DD",Object(ve.k)())),attachment:new Te.e,message:new Te.e,mark_as_present:new Te.e(!1)}),this.formGroup.controls.status.valueChanges.pipe(Object(Ie.a)(e),Object(xe.a)(this.destroy$)).subscribe(e=>{e==this.evaluationStatus.PASSED?this.formGroup.controls.completion_date.setValidators(Te.x.required):(this.formGroup.controls.completion_date.clearValidators(),this.formGroup.controls.completion_date.setErrors(null))})}get canExecute(){return this._isFormValid}executeImpl(){return this.evaluateSession().pipe(Object(De.a)(e=>(this.docLayoutService.toast.showToast({type:"error",message:e.message[0]}),Object(Ae.d)(this.actionButtons),Object(ke.a)(""))),Object(fe.a)(e=>e.backgroundJob?(this.docLayoutService.toast.showToast({type:"neutral",message:a.a.t("standard","The background job has been created successfully. The changes will be reflected once it is completed.")}),!1):(this.docLayoutService.toast.showToast({type:"success",message:a.a.t("course_management","The evaluation has been saved successfully")}),!0)))}executeWithValidation(){return Object(s.a)(this,void 0,void 0,function*(){if(this.formGroup.valid)this.executeImpl().subscribe(e=>e?this.closePanel.emit(!0):this.closePanelWithoutRefresh.emit(!0));else{this._isFormValid=!1,this.formGroup.markAllAsTouched();let e=0;for(const t in this.formGroup.controls)this.formGroup.controls[t].updateValueAndValidity({emitEvent:!1}),null!=this.formGroup.controls[t].errors?(this.formGroup.controls[t].markAsDirty(),e++):this.formGroup.controls[t].markAsPristine();Object(Ae.d)(this.actionButtons),this.errorNotitificationTitle=e}return!1})}evaluateSession(){const e=this.formGroup.getRawValue();return this.sessionManagementService.massiveEvaluateSession(this.data.sessionId,this.data.userIds,e.status==this.evaluationStatusPlaceHolder?0:Number(e.status),e.status==this.evaluationStatusPlaceHolder||l.a.isNaN(Number.parseInt(e.evaluation))?null:e.evaluation,e.status==this.evaluationStatus.PASSED&&e.completion_date?new _e.a(Me.a.tz(new _e.a(e.completion_date).formatUTC("YYYY-MM-DD"),Object(ve.k)())).formatUTC("YYYY-MM-DD HH:mm:ss"):null,e.attachment,Number(e.mark_as_present),e.message,this.data.filters)}onChooseFile(e){console.debug(e)}uploadingFile(){this.attachmentFileFromS3.next(null)}uploadedFile(e){this.formGroup.controls.attachment.setValue(e.new_filename),this.attachmentFileFromS3.next(e.url)}deletedFile(){this.formGroup.controls.attachment.setValue(null),this.attachmentFileFromS3.next(null)}scoreValidator(){return e=>Number(e.value)>this.data.max_score?{scoreValidator:a.a.t("standard","Insert a number less than the Maximum Score {n}",{n:this.data.max_score})}:null}}return e.\u0275fac=function(t){return new(t||e)(g.ec(_.a),g.ec(b.a))},e.\u0275cmp=g.Yb({type:e,selectors:[["ilt-instructor-massive-evaluate"]],viewQuery:function(e,t){if(1&e&&(g.nd(st,1),g.nd(nt,1),g.nd(Te.i,1),g.nd(at,1)),2&e){let e;g.Rc(e=g.tc())&&(t.submitActionButton=e.first),g.Rc(e=g.tc())&&(t.actionButtons=e.first),g.Rc(e=g.tc())&&(t.formDirective=e.first),g.Rc(e=g.tc())&&(t.uiInputUpload=e.first)}},inputs:{data:"data"},outputs:{closePanel:"closePanel",closePanelWithoutRefresh:"closePanelWithoutRefresh"},features:[g.Jb],decls:40,vars:43,consts:[[1,"lt-session-right-panel-wrapper"],[3,"title","subtitle","trigger"],[1,"ilt-session-container","hyd-background-surface"],["autocomplete","off"],["class","hyd-row registration-standard-notification-inline-container",4,"ngIf"],[1,"hyd-row","block"],[1,"hyd-typography-heading-5","hyd-color-typography-primary"],[1,"user-info"],[1,"block"],[1,"hyd-typography-heading-5","hyd-color-typography-primary","margin-bottom-sm"],[1,"hyd-row"],[1,"hyd-col-12"],["ngDefaultControl","",3,"label","formControl","requiredMarker"],[3,"value",4,"ngFor","ngForOf"],["class","hyd-col-12",4,"ngIf"],["class","hyd-row margin-bottom-sm",4,"ngIf"],["class","hyd-row",4,"ngIf"],["class","block",4,"ngIf"],["actionButtons",""],[3,"disabled","slot","label","trigger"],[3,"disabled","slot","type","label","trigger"],["submitActionButton",""],[1,"hyd-row","registration-standard-notification-inline-container"],[1,"hyd-col-24"],[3,"title","message"],[3,"value"],["ngDefaultControl","",3,"label","formControl","autocomplete"],[4,"ngIf"],[1,"hyd-row","margin-bottom-sm"],[3,"label","inputFormControl","collection","uploaded","uploading","reset"],["download","","target","_blank",3,"href",4,"ngIf"],[3,"enabled","label","inputFormControl","value","initialEmptyValue","type"],["download","","target","_blank",3,"href"],[3,"formControl"],[3,"label","inputFormControl"]],template:function(e,t){1&e&&(g.kc(0,"div",0),g.kc(1,"doc-shared-right-panel-header",1),g.sc("trigger",function(){return t.closePanelWithoutRefresh.emit(!0)}),g.xc(2,"t"),g.xc(3,"t"),g.jc(),g.kc(4,"doc-shared-right-panel-body"),g.kc(5,"div",2),g.kc(6,"form",3),g.ed(7,ot,5,6,"div",4),g.kc(8,"div",5),g.kc(9,"h2",6),g.gd(10),g.xc(11,"t"),g.kc(12,"span",7),g.gd(13),g.jc(),g.kc(14,"span"),g.gd(15),g.xc(16,"t"),g.jc(),g.kc(17,"span",7),g.gd(18),g.jc(),g.jc(),g.jc(),g.kc(19,"div",8),g.kc(20,"h2",9),g.gd(21),g.xc(22,"t"),g.jc(),g.kc(23,"div",10),g.kc(24,"div",11),g.kc(25,"ui-input-select",12),g.xc(26,"t"),g.xc(27,"t"),g.ed(28,rt,3,4,"ui-input-select-option",13),g.jc(),g.jc(),g.ed(29,dt,5,7,"div",14),g.jc(),g.ed(30,pt,7,9,"div",15),g.ed(31,gt,6,4,"div",16),g.jc(),g.ed(32,ft,8,11,"div",17),g.jc(),g.jc(),g.jc(),g.kc(33,"doc-shared-right-panel-actions",null,18),g.kc(35,"doc-shared-right-panel-action",19),g.sc("trigger",function(){return t.closePanelWithoutRefresh.emit(!0)}),g.xc(36,"t"),g.jc(),g.kc(37,"doc-shared-right-panel-action",20,21),g.sc("trigger",function(){return t.executeWithValidation()}),g.xc(39,"t"),g.jc(),g.jc(),g.jc()),2&e&&(g.Mb(1),g.Dc("title",g.yc(2,23,t.title))("subtitle",g.yc(3,25,t.description)),g.Mb(6),g.Dc("ngIf",!t.canExecute),g.Mb(3),g.id(" ",g.yc(11,27,"You are about to evaluate")," "),g.Mb(3),g.id("",t.data.itemCounts," "),g.Mb(2),g.hd(g.yc(16,29,"users in the session")),g.Mb(3),g.id(" ",t.data.sessionName,""),g.Mb(3),g.id(" ",g.yc(22,31,"Status & Score")," "),g.Mb(4),g.Dc("label",g.yc(26,33,"Enrollment status"))("formControl",t.formGroup.controls.status)("requiredMarker",g.yc(27,35,t.requiredMarker)),g.Mb(3),g.Dc("ngForOf",t.evaluationOptionList),g.Mb(1),g.Dc("ngIf",t.formGroup.controls.status.value!=t.evaluationStatusPlaceHolder),g.Mb(1),g.Dc("ngIf",t.formGroup.controls.status.value!=t.evaluationStatusPlaceHolder),g.Mb(1),g.Dc("ngIf",t.formGroup.controls.status.value!=t.evaluationStatusPlaceHolder),g.Mb(1),g.Dc("ngIf",t.formGroup.controls.status.value!=t.evaluationStatusPlaceHolder),g.Mb(3),g.Dc("disabled",!1)("slot","end")("label",g.yc(36,37,"Cancel")),g.Mb(2),g.Dc("disabled",!1)("slot","end")("type","positive")("label",g.zc(39,39,"Evaluate",g.Hc(42,mt))))},directives:[Le.a,je.a,Te.y,Te.p,Te.q,v.p,R.Lc,Te.b,Te.o,Te.f,v.o,Re.a,Fe.a,R.Jd,R.Nc,R.Qc,R.Ac,Ne.a,Ue.a,R.sc,R.Cc,ze.a],pipes:[a.b,v.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}[_nghost-%COMP%]  ui-input-select .ui-input-select-floating-label .ui-input-select-label.ui-typography-body{font-weight:var(--hyd-typography-weight-semibold)}[_nghost-%COMP%]  ui-input-select .ui-input-select-options{z-index:10000}.lt-session-right-panel-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:100vh}.registration-standard-notification-inline-container[_ngcontent-%COMP%]{padding-top:1.5rem;padding-top:var(--hyd-spacing-md)}.ilt-session-container[_ngcontent-%COMP%]{min-height:100%}.block[_ngcontent-%COMP%]{border-bottom:1px solid var(--hyd-color-border-neutral);padding:var(--hyd-spacing-md)}.block[_ngcontent-%COMP%]   .margin-bottom-sm[_ngcontent-%COMP%]{margin-bottom:var(--hyd-spacing-sm)}.block[_ngcontent-%COMP%]   .margin-bottom-md[_ngcontent-%COMP%]{margin-bottom:var(--hyd-spacing-md)}.block[_ngcontent-%COMP%]   .hyd-col-12[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   .hyd-col-24[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   .hyd-row[_ngcontent-%COMP%]{padding-left:0}.block[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{color:var(--hyd-color-typography-accent-tertiary)}.block[_ngcontent-%COMP%]   .col-nested[_ngcontent-%COMP%]{padding-left:30px}.block[_ngcontent-%COMP%]   .venue-video-label[_ngcontent-%COMP%]{margin-top:var(--hyd-spacing-sm);margin-bottom:var(--hyd-spacing-sm)}.block[_ngcontent-%COMP%]   .venue-video-error[_ngcontent-%COMP%]{color:var(--hyd-color-typography-error)}"]}),e})();const vt=["evaluateRightPanel"],yt=["hydColumnSelector"];function wt(e,t){1&e&&(g.gd(0),g.xc(1,"t")),2&e&&g.id(" ",g.yc(1,1,"Username")," ")}function Ct(e,t){if(1&e&&(g.kc(0,"hyd-ellipsable-text"),g.gd(1),g.jc()),2&e){const e=t.item;g.Mb(1),g.id(" ",e.username," ")}}function St(e,t){if(1&e&&(g.kc(0,"div",20),g.kc(1,"div"),g.gd(2),g.xc(3,"t"),g.jc(),g.jc()),2&e){const e=g.wc().$implicit;g.Mb(2),g.id(" ",g.yc(3,1,e.label)," ")}}function kt(e,t){if(1&e&&(g.kc(0,"hyd-ellipsable-text"),g.kc(1,"div",21),g.kc(2,"div",22),g.fc(3,"span",23),g.jc(),g.kc(4,"div",24),g.fc(5,"i"),g.jc(),g.jc(),g.jc()),2&e){const e=g.wc().item,t=g.wc().$implicit;g.Mb(3),g.Dc("innerHtml",t.value(e),g.Wc),g.Mb(1),g.Wb("evaluation-icon-passed",t.isPassed(e))("evaluation-icon-not-passed",!t.isPassed(e)),g.Mb(1),g.Rb("zmdi zmdi-",t.icon(e),"")}}function Tt(e,t){if(1&e&&g.ed(0,kt,6,8,"hyd-ellipsable-text",9),2&e){const e=t.item,i=g.wc().$implicit;g.Dc("ngIf",i.isVisible(e))}}function It(e,t){1&e&&(g.kc(0,"hyd-table-column",7),g.kc(1,"hyd-table-column-header"),g.ed(2,St,4,3,"ng-template"),g.jc(),g.kc(3,"hyd-table-column-cell"),g.ed(4,Tt,1,1,"ng-template"),g.jc(),g.jc()),2&e&&g.Dc("columnName",t.$implicit.name)("sortable",!1)}function xt(e,t){if(1&e&&(g.ic(0),g.ed(1,It,5,2,"hyd-table-column",11),g.hc()),2&e){const e=g.wc();g.Mb(1),g.Dc("ngForOf",e.assignmentColumns)}}function Dt(e,t){1&e&&g.fc(0,"hyd-column-ellipsable-text",8),2&e&&g.Dc("columnName","evaluation_date")("headerLabel","Evaluation Date")("fieldName","evaluation_date")("translateField",!0)("sortable",!0)}function Ot(e,t){if(1&e&&g.gd(0),2&e){const e=g.wc().$implicit;g.id(" ",e.label," ")}}function Et(e,t){if(1&e&&(g.kc(0,"hyd-ellipsable-text"),g.gd(1),g.jc()),2&e){const e=t.item,i=g.wc().$implicit;g.Mb(1),g.id(" ",i.value(e.enrollment_fields)," ")}}function At(e,t){1&e&&(g.kc(0,"hyd-table-column",7),g.kc(1,"hyd-table-column-header"),g.ed(2,Ot,1,1,"ng-template"),g.jc(),g.kc(3,"hyd-table-column-cell"),g.ed(4,Et,2,1,"ng-template"),g.jc(),g.jc()),2&e&&g.Dc("columnName",t.$implicit.id)("sortable",!1)}function Pt(e,t){}function Mt(e,t){if(1&e&&g.fc(0,"btn-ellipsis",25),2&e){const e=t.item,i=t.index,s=g.wc();g.Dc("params",e)("orientation",(i<=7?"bottom":"top")+"-left")("actions",s.getRowActions(e))}}function Lt(e,t){1&e&&(g.kc(0,"div",28),g.fc(1,"ui-spinner",29),g.jc()),2&e&&(g.Mb(1),g.Dc("size","md"))}function jt(e,t){if(1&e&&g.fc(0,"blankslate",30),2&e){const e=g.wc(2);g.Dc("isVisible",!0)("type",e.BlankSlateType.EMPTY001)("title",e.noResultsTitle)("subtitle",e.noResultsSubtitle)}}function Rt(e,t){if(1&e&&(g.kc(0,"div",26),g.ed(1,Lt,2,1,"div",18),g.ed(2,jt,1,4,"blankslate",27),g.jc()),2&e){const e=g.wc();g.Mb(1),g.Dc("ngIf",e.isLoading),g.Mb(1),g.Dc("ngIf",!e.isLoading&&e.noResults)}}function Ft(e,t){1&e&&(g.kc(0,"div",28),g.fc(1,"ui-spinner",29),g.jc()),2&e&&(g.Mb(1),g.Dc("size","md"))}function Nt(e,t){if(1&e){const e=g.lc();g.kc(0,"ilt-instructor-evaluate",34),g.sc("closePanel",function(){return g.Vc(e),g.wc(3).closePanelWithReload()})("closePanelWithoutRefresh",function(){return g.Vc(e),g.wc(3).closePanel()}),g.jc()}if(2&e){const e=g.wc(3);g.Dc("data",e.iltInstructorEvaluateData)}}function Ut(e,t){if(1&e){const e=g.lc();g.kc(0,"ilt-instructor-massive-evaluate",34),g.sc("closePanel",function(){return g.Vc(e),g.wc(3).closePanelWithReload()})("closePanelWithoutRefresh",function(){return g.Vc(e),g.wc(3).closePanel()}),g.jc()}if(2&e){const e=g.wc(3);g.Dc("data",e.iltInstructorMassiveEvaluateData)}}function zt(e,t){if(1&e&&(g.ed(0,Nt,1,1,"ilt-instructor-evaluate",33),g.ed(1,Ut,1,1,"ilt-instructor-massive-evaluate",33)),2&e){const e=g.wc(2);g.Dc("ngIf",e.isViewSingleEvaluate),g.Mb(1),g.Dc("ngIf",e.isViewMassiveEvaluate)}}function qt(e,t){if(1&e){const e=g.lc();g.kc(0,"doc-shared-right-panel",31,32),g.sc("close",function(){return g.Vc(e),g.wc().closePanel()}),g.ed(2,zt,2,2,"ng-template"),g.jc()}if(2&e){const e=g.wc();g.Dc("size",e.docLayoutRightPanelSizeEnum.MD)}}var Vt=function(e){return e.username="username",e.email="email",e.enrollmentDate="enrollment_date",e.enrollmentStatus="enrollment_status",e.evaluation="evaluation",e.evaluationDate="evaluation_date",e.completionDate="completion_date",e.firstName="first_name",e.lastName="last_name",e}({});let Bt=(()=>{class e extends o.c{constructor(e,t,i,s){super(s,t),this.sessionManagementService=e,this.docService=i,this.isViewEvaluate=!1,this.isViewSingleEvaluate=!1,this.isViewMassiveEvaluate=!1,this.assignmentColumns=[{name:Vt.evaluation,label:a.a.t("classroom","Evaluation"),icon:e=>e.evaluation_status==h.a.PASSED?"thumb-up":"thumb-down",isPassed:e=>e.evaluation_status==h.a.PASSED,isVisible:e=>null!=e.evaluation_status,value:e=>null!=e.evaluation?e.evaluation:"&nbsp;"}],this.blankSlateConfig={type:w.a.EMPTY002,title:a.a.t("standard","Whoops, there's nothing here"),subtitle:a.a.t("report","Looks like there\u2019s nothing for you to do in this area right now.")},this.allColumns=[],this.lockedColumns=[Vt.username],this.preselectedColumns=[],this.enrollmentAdditionalFieldColumnList=[],this.docLayoutRightPanelSizeEnum=ye.a,this.hiddenColumns=["actions"],this._rowActions=[{id:"evaluate",title:a.a.t("classroom","Evaluate"),action:e=>{this._iltInstructorEvaluateData={sessionId:this.sessionId,sessionName:this.sessionName,min_score:this.minScore,max_score:this.maxScore,userInfo:l.a.isEmpty(e.first_name)||l.a.isEmpty(e.last_name)?e.username:e.first_name+" "+e.last_name,completion_date:e.date_complete_not_formatted,evaluation:e.evaluation,status_id:e.evaluation_status,userId:e.user_id,message:e.message,attachment:e.attachment},this.isViewEvaluate=!0,this.isViewSingleEvaluate=!0,l.a.defer(()=>this.docService.rightPanel.showPanel(this.evaluateRightPanel))},active:!1}],this.countColumns=0,this.updateRender=!0,this.isEnrollmentAdditionaldFieldLoad$=new d.a(!0),this._massiveActions=[{id:"massive-evaluate",title:a.a.t("classroom","Evaluate"),action:()=>{this._iltInstructorMassiveEvaluateData={sessionId:this.sessionId,sessionName:this.sessionName,itemCounts:this.selectedItemsCount,userIds:this.selectedItemsId,filters:this._currentFilters.getValue(),max_score:this.maxScore,min_score:this.minScore},this.isViewEvaluate=!0,this.isViewMassiveEvaluate=!0,l.a.defer(()=>this.docService.rightPanel.showPanel(this.evaluateRightPanel))},active:!1}]}get selectedItemsId(){return l.a.map(this.selectedItems,e=>e.id)}get isSelectAllEnable(){return this._massiveActions.length>0}get iltInstructorEvaluateData(){return this._iltInstructorEvaluateData}get iltInstructorMassiveEvaluateData(){return this._iltInstructorMassiveEvaluateData}ngOnInit(){super.ngOnInit()}fetchDataImpl(e,t,i){return this.sessionManagementService.getSessionEnrollmentsPaginatedList(this.sessionId,e.pageSize,e.page,t.dir,t.columnName,i).pipe(Object(fe.a)(e=>(e.items=e.items.map(e=>Object.assign(Object.assign(Object.assign({},e),{date_complete_not_formatted:e.completion_date,completion_date:e.completion_date?new _e.a(e.completion_date).formatTimezoned(Object(ve.l)(Object(ve.j)(),ve.a),Object(ve.k)()):"",evaluation_date:e.evaluation_date?new _e.a(e.evaluation_date).formatUTC(Object(ve.l)(Object(ve.j)(),ve.a)):"",enrollment_date:e.enrollment_date?new _e.a(e.enrollment_date).formatTimezoned(Object(ve.l)(Object(ve.j)(),ve.a),Object(ve.k)()):""}),e.enrollment_fields.map(e=>{const t=this.sessionManagementService.enrollmentAdditionalFields.find(t=>t.id==e.id);(null==t?void 0:t.type)==h.f.date&&(e.value=new _e.a(e.value).formatTimezoned(Object(ve.l)(Object(ve.j)(),ve.a),Object(ve.k)()))}))),e)))}getInitialSorting(){return{columnName:Vt.username,dir:S.a.ASC}}getMassiveActions(){const e=this._massiveActions;if(!this.canEvaluateEnable){const t=e.findIndex(e=>"massive-evaluate"==e.id);-1!==t&&e.splice(t,1)}return e}getRowActions(){const e=this._rowActions;if(!this.canEvaluateEnable){const t=e.findIndex(e=>"evaluate"==e.id);-1!==t&&e.splice(t,1)}return this._rowActions}onFiltersChanged(e){const t=this.processFilters(e);this._currentFilters.next(t),this.dataBrowserSource.appliedFiltersNumber.next(Object.keys(t).filter(e=>e!=h.g.SEARCH).length)}closePanelWithReload(){this.refresh(),this.closePanel()}closePanel(){this.docService.rightPanel.hidePanel(),this.isViewEvaluate=!1,this.isViewSingleEvaluate=!1,this.isViewMassiveEvaluate=!1}setRowActions(e){return[]}initializeColumns(){this._setAllColumns(),this._setPreselectedColumns(),this.enrollmentAdditionalFieldColumnList=this.sessionManagementService.enrollmentAdditionalFields.map(e=>({id:"additionalField"+e.id,label:e.title,value:t=>{const i=t.find(t=>t.id==e.id);return i?i.value:""}})),this.countColumns+=this.sessionManagementService.enrollmentAdditionalFields.length}initializeColumnSelectorPanel(){return{icon:"view-column",iconTooltip:{tooltipText:"Column selector",tooltipPosition:k.b.BOTTOM},content:{}}}initializeFilters(){const e=[{title:a.a.t("standard","Search"),code:h.g.SEARCH,type:C.d.free_search_filter,params:{placeholder:a.a.t("standard","Search...")}},{title:a.a.t("classroom","Evaluation Status"),code:h.g.EVALUATION_STATUS,type:C.d.radio_filter,disableAllOptionFilter:!1,params:{options:[{key:h.h.EVALUATION_STATUS_EVALUATED,label:a.a.t("classroom","Already evaluated")},{key:h.h.EVALUATION_STATUS_NOT_EVALUATED,label:a.a.t("classroom","Waiting for evaluation")}],useRawValue:!0}},{title:a.a.t("classroom","Completion"),code:h.g.COMPLETION,type:C.d.radio_filter,disableAllOptionFilter:!1,params:{options:[{key:h.h.COMPLETION_COMPLETED,label:a.a.t("standard","Completed")},{key:h.h.COMPLETION_NOT_COMPLETED,label:a.a.t("player","Incomplete")}],useRawValue:!0}},{title:a.a.t("standard","Enrollment status"),code:h.g.COURSE_STATUS,type:C.d.checkbox_filter,disableAllOptionFilter:!1,params:{options:[{key:h.h.COURSE_STATUS_WAITING,label:a.a.t("standard","_WAITING_USERS")},{key:h.h.COURSE_STATUS_ENROLLED,label:a.a.t("standard","Enrolled")},{key:h.h.COURSE_STATUS_IN_PROGRESS,label:a.a.t("standard","In progress")},{key:h.h.COURSE_STATUS_COMPLETED,label:a.a.t("standard","Completed")}],useRawValue:!0}}];return Object(I.a)(e)}_setAllColumns(){this.allColumns=[Vt.username,Vt.firstName,Vt.lastName,Vt.email,Vt.enrollmentDate,Vt.enrollmentStatus,Vt.completionDate,this.canEvaluateEnable?Vt.evaluation:"",this.canEvaluateEnable?Vt.evaluationDate:""].filter(e=>e.length>0),this.countColumns=this.allColumns.length}_setPreselectedColumns(){this.preselectedColumns=[Vt.username,Vt.firstName,Vt.lastName,Vt.email,Vt.enrollmentDate,Vt.completionDate,Vt.enrollmentStatus,this.canEvaluateEnable?Vt.evaluation:"",this.canEvaluateEnable?Vt.evaluationDate:""].filter(e=>e.length>0)}}return e.\u0275fac=function(t){return new(t||e)(g.ec(_.a),g.ec(g.o),g.ec(b.a),g.ec(g.i))},e.\u0275cmp=g.Yb({type:e,selectors:[["ilt-instructor-session-enrollment-list"]],viewQuery:function(e,t){if(1&e&&(g.nd(vt,1),g.nd(yt,1)),2&e){let e;g.Rc(e=g.tc())&&(t.evaluateRightPanel=e.first),g.Rc(e=g.tc())&&(t.hydColumnSelector=e.first)}},inputs:{sessionId:"sessionId",sessionName:"sessionName",courseId:"courseId",canEvaluateEnable:"canEvaluateEnable",maxScore:"maxScore",minScore:"minScore"},features:[g.Jb],decls:39,vars:82,consts:[[1,"data-browser",3,"hidden","dataBrowserSource","onFiltersUpdate"],[1,"custom-panel"],[3,"tableRef","cacheId","lockedColumns","preselectedColumns","hiddenColumns","maxSelectable"],[1,"data-browser-table-content"],[1,"table-wrapper"],[1,"hyd-table-enrollments-list",3,"data","selectable","rowsComparisonFunction","rowHeight","selection","sorting","selectRows","sort"],["sessionManagementEnrollmentListTable",""],[3,"columnName","sortable"],[3,"columnName","headerLabel","fieldName","translateField","sortable"],[4,"ngIf"],[3,"columnName","headerLabel","fieldName","translateField","sortable",4,"ngIf"],[3,"columnName","sortable",4,"ngFor","ngForOf"],[3,"columnWidth","columnName","ellipsed"],[3,"pageIndex","pageSize","length","pageChange"],[1,"massive-actions-bar-wrapper"],[3,"counter","actions","actionTitle","type","isSelectAllButtonVisible","isUnSelectAllButtonVisible","selectAll$","unselectAll$"],["class","table-cover bg-grey-superlight",4,"ngIf"],[1,"no-data",3,"isVisible","type","title","subtitle"],["class","spinner",4,"ngIf"],[3,"size","close",4,"ngIf"],[1,"col-with-icon-header"],[1,"col-with-icon-cell"],[1,"counter"],[3,"innerHtml"],[1,"icon"],[3,"params","orientation","actions"],[1,"table-cover","bg-grey-superlight"],[3,"isVisible","type","title","subtitle",4,"ngIf"],[1,"spinner"],[3,"size"],[3,"isVisible","type","title","subtitle"],[3,"size","close"],["evaluateRightPanel",""],[3,"data","closePanel","closePanelWithoutRefresh",4,"ngIf"],[3,"data","closePanel","closePanelWithoutRefresh"]],template:function(e,t){if(1&e&&(g.kc(0,"data-browser",0),g.sc("onFiltersUpdate",function(e){return t.onFiltersChanged(e)}),g.kc(1,"div",1),g.fc(2,"hyd-column-selector",2),g.jc(),g.kc(3,"div",3),g.xc(4,"async"),g.kc(5,"div",4),g.kc(6,"hyd-table",5,6),g.sc("selectRows",function(e){return t.onRowsSelected(e)})("sort",function(e){return t.onSortingChanged(e)}),g.xc(8,"async"),g.kc(9,"hyd-table-column",7),g.kc(10,"hyd-table-column-header"),g.ed(11,wt,2,3,"ng-template"),g.jc(),g.kc(12,"hyd-table-column-cell"),g.ed(13,Ct,2,1,"ng-template"),g.jc(),g.jc(),g.fc(14,"hyd-column-ellipsable-text",8),g.fc(15,"hyd-column-ellipsable-text",8),g.fc(16,"hyd-column-ellipsable-text",8),g.fc(17,"hyd-column-ellipsable-text",8),g.fc(18,"hyd-column-ellipsable-text",8),g.ed(19,xt,2,1,"ng-container",9),g.ed(20,Dt,1,5,"hyd-column-ellipsable-text",10),g.fc(21,"hyd-column-ellipsable-text",8),g.ed(22,At,5,2,"hyd-table-column",11),g.kc(23,"hyd-table-column",12),g.kc(24,"hyd-table-column-header"),g.ed(25,Pt,0,0,"ng-template"),g.jc(),g.kc(26,"hyd-table-column-cell"),g.ed(27,Mt,1,3,"ng-template"),g.jc(),g.jc(),g.jc(),g.kc(28,"hyd-paginator",13),g.sc("pageChange",function(e){return t.onPagingChanged(e)}),g.jc(),g.kc(29,"div",14),g.kc(30,"massive-actions-bar",15),g.sc("selectAll$",function(){return t.onSelectEverything(!0)})("unselectAll$",function(){return t.onSelectEverything(!1)}),g.xc(31,"t"),g.jc(),g.jc(),g.jc(),g.jc(),g.ed(32,Rt,3,2,"div",16),g.xc(33,"async"),g.jc(),g.fc(34,"blankslate",17),g.xc(35,"t"),g.xc(36,"t"),g.ed(37,Ft,2,1,"div",18),g.ed(38,qt,3,1,"doc-shared-right-panel",19)),2&e){const e=g.Sc(7);g.Dc("hidden",!t.initialized||t.noData)("dataBrowserSource",t.dataBrowserSource),g.Mb(2),g.Dc("tableRef",e)("cacheId","session-management-enrollments-list-column-selector_")("lockedColumns",t.lockedColumns)("preselectedColumns",t.preselectedColumns)("hiddenColumns",t.hiddenColumns)("maxSelectable",t.countColumns),g.Mb(1),g.Wb("massive-actions-bar-open",g.yc(4,70,t.showMassiveActionsBar$)),g.Mb(3),g.Dc("data",g.yc(8,72,t.tableData$))("selectable",t.isSelectAllEnable)("rowsComparisonFunction",t.comparerFn)("rowHeight",t.HYD_TABLE_STYLES.ROW_HEIGHT)("selection",t.currentSelection)("sorting",t.sortingCriteria),g.Mb(3),g.Dc("columnName","username")("sortable",!0),g.Mb(5),g.Dc("columnName","first_name")("headerLabel","First Name")("fieldName","first_name")("translateField",!0)("sortable",!0),g.Mb(1),g.Dc("columnName","last_name")("headerLabel","Last Name")("fieldName","last_name")("translateField",!0)("sortable",!0),g.Mb(1),g.Dc("columnName","email")("headerLabel","Email")("fieldName","email")("translateField",!1)("sortable",!0),g.Mb(1),g.Dc("columnName","enrollment_status")("headerLabel","Enrollment status")("fieldName","status")("translateField",!0)("sortable",!1),g.Mb(1),g.Dc("columnName","enrollment_date")("headerLabel","Enrollment date")("fieldName","enrollment_date")("translateField",!0)("sortable",!0),g.Mb(1),g.Dc("ngIf",t.canEvaluateEnable),g.Mb(1),g.Dc("ngIf",t.canEvaluateEnable),g.Mb(1),g.Dc("columnName","completion_date")("headerLabel","Completion date")("fieldName","completion_date")("translateField",!0)("sortable",!0),g.Mb(1),g.Dc("ngForOf",t.enrollmentAdditionalFieldColumnList),g.Mb(1),g.Dc("columnWidth","30.042px")("columnName","actions")("ellipsed",!1),g.Mb(5),g.Dc("pageIndex",null==t.paginationInfo?null:t.paginationInfo.page)("pageSize",null==t.paginationInfo?null:t.paginationInfo.pageSize)("length",t.totalCount),g.Mb(2),g.Dc("counter",t.selectedItemsCount)("actions",t.getMassiveActions())("actionTitle",g.yc(31,74,"Choose action"))("type","inline-btn")("isSelectAllButtonVisible",!0)("isUnSelectAllButtonVisible",!0),g.Mb(2),g.Dc("ngIf",g.yc(33,76,t.hideTable$)),g.Mb(2),g.Ec("title",g.yc(35,78,t.blankSlateConfig.title)),g.Ec("subtitle",g.yc(36,80,t.blankSlateConfig.subtitle)),g.Dc("isVisible",t.initialized&&t.noData)("type",t.blankSlateConfig.type),g.Mb(3),g.Dc("ngIf",!t.initialized),g.Mb(1),g.Dc("ngIf",t.isViewEvaluate)}},directives:[x.a,D.a,O.a,E.c,E.d,E.b,A.a,v.p,v.o,P.b,M.a,L.a,j.a,we.a,R.Be,Ce.a,it,_t],pipes:[v.b,a.b],styles:['.data-browser-table[_nghost-%COMP%]   .no-data[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .no-data[_ngcontent-%COMP%]{margin-top:100px}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;z-index:1}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate{margin-top:50px}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section{font-size:1.1em}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section+div, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section+div{font-size:.8em}.data-browser-table[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:flex-start;padding-top:50px;box-sizing:border-box}.data-browser-table[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]   ui-spinner[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]   ui-spinner[_ngcontent-%COMP%]{position:static}.data-browser-table[_nghost-%COMP%]     .hyd-table-col[style^="flex-basis: 30.042px"], .data-browser-table   [_nghost-%COMP%]     .hyd-table-col[style^="flex-basis: 30.042px"]{flex-grow:0!important;justify-content:flex-end!important}.color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content, .data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table{display:block;height:calc(100% - 46px)}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table .hyd-table-body, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table .hyd-table-body{height:calc(100% - 39px);overflow-x:hidden;overflow-y:auto}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper{overflow:hidden;height:0}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper massive-actions-bar, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper massive-actions-bar{height:52px}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .table-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .table-wrapper{height:calc(100% - 52px)}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .massive-actions-bar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .massive-actions-bar-wrapper{height:52px;overflow:visible}.data-browser-table[_nghost-%COMP%]     .data-browser, .data-browser-table   [_nghost-%COMP%]     .data-browser{overflow-y:auto;overflow-x:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{width:330px;padding:0;margin:0;display:block;height:100%;overflow-y:auto;overflow-x:hidden;background-color:#fff}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-right:1px solid var(--hyd-color-border-neutral)}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-right:0}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-left:0}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-left:1px solid var(--hyd-color-border-neutral)}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-wrapper{box-sizing:border-box;border:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tab, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tab, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs-body, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs-body{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab{display:flex;flex-direction:column}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter{flex-shrink:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter.last, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter.last{flex-grow:1}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .clear-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .clear-filters{flex-shrink:0;justify-content:flex-end;padding:10px}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-left:10px}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-right:auto}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-right:10px}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .filter-box, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .filter-box{padding-right:20px}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--9-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--9-col, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--12-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--12-col{height:100%;margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--9-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--9-col{position:relative;width:calc(100% - 330px - 15px);margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col{position:relative;width:calc(100% - 15px);margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col.header-row, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col.header-row{width:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser>.section-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser>.section-wrapper{height:calc(100% - 40px - 1px);overflow:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container{height:100%;overflow:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid{margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .full-width-header-container .mdl-grid, .data-browser-table   [_nghost-%COMP%]     .data-browser .full-width-header-container .mdl-grid{margin:0 auto}.data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{overflow:hidden;height:100%}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{margin:0 -15px 0 0}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{margin:0 0 0 -15px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters{height:40px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder{height:40px!important}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder span i, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder span i{padding-top:10px;padding-bottom:10px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer{height:40px;padding:0 6px}.data-browser-table.full-width-header[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table.full-width-header   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container{flex-grow:1;max-width:unset}.data-browser-table.full-width-header[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer, .data-browser-table.full-width-header   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer{display:none}[_nghost-%COMP%]{display:block}.massive-actions-bar-wrapper[_ngcontent-%COMP%]{height:52px;position:relative;top:-1px}.col-with-icon-header[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.col-with-icon-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.col-with-icon-cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%}.col-with-icon-cell[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%], .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;width:50%}.col-with-icon-cell[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{justify-content:flex-end}.col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{justify-content:flex-start}.router-outlet:not(.direction-rtl):not(.heracles-root)[_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .router-outlet:not(.direction-rtl):not(.heracles-root)   [_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:6px}.router-outlet.direction-rtl:not(.heracles-root)[_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .router-outlet.direction-rtl:not(.heracles-root)   [_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:6px}.col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   i.zmdi[_ngcontent-%COMP%]{font-size:var(--hyd-size-icon-sm)}.evaluation-icon-passed[_ngcontent-%COMP%]{color:#006e54}.evaluation-icon-not-passed[_ngcontent-%COMP%]{color:#cf000f}'],changeDetection:0}),e})();function Gt(e,t){if(1&e&&g.fc(0,"ilt-instructor-session-events-list",4),2&e){const e=g.wc(2);g.Dc("sessionId",e.sessionId)}}function Ht(e,t){if(1&e&&(g.kc(0,"tab",2),g.ed(1,Gt,1,1,"ilt-instructor-session-events-list",3),g.jc()),2&e){const e=g.wc();g.Dc("title",e.events_attendanceTabTitle)("name",e.tabsParamsName.events_attendance)("defaultTab",e.initialTab===e.tabsParamsName.events_attendance),g.Mb(1),g.Dc("ngIf",e.wasTabLoaded(e.tabsParamsName.events_attendance))}}function $t(e,t){if(1&e&&g.fc(0,"ilt-instructor-session-enrollment-list",6),2&e){const e=g.wc(2);g.Dc("sessionId",e.sessionId)("sessionName",e.sessionName)("courseId",e.courseId)("maxScore",e.maxScore)("minScore",e.minScore)("canEvaluateEnable",e.canEvaluateEnable)}}function Yt(e,t){if(1&e&&(g.kc(0,"tab",2),g.ed(1,$t,1,6,"ilt-instructor-session-enrollment-list",5),g.xc(2,"async"),g.jc()),2&e){const e=g.wc();g.Dc("title",e.enrollments_evaluationsTabTitle)("name",e.tabsParamsName.enrollments_evaluations)("defaultTab",e.initialTab===e.tabsParamsName.enrollments_evaluations),g.Mb(1),g.Dc("ngIf",g.yc(2,4,e.wasTabLoaded(e.tabsParamsName.enrollments_evaluations)&&e.isUpdateEvaluationType$))}}const Wt="tab";var Qt=function(e){return e.events_attendance="events_attendance",e.enrollments_evaluations="enrollments_evaluations",e}({});const Kt=Qt.events_attendance;let Jt=(()=>{class e extends o.g{constructor(e,t,i,s,n,o,r){super(s),this.route=e,this.router=t,this.docService=i,this.pageService=n,this.docLayoutService=o,this.sessionManagementService=r,this.SUPPORTED_TABS=[Qt.events_attendance,Qt.enrollments_evaluations],this.propertiesTabTitle=a.a.t("standard","Properties"),this.events_attendanceTabTitle=a.a.t("standard","events & attendance"),this.enrollments_evaluationsTabTitle=a.a.t("standard","enrollments & evaluations"),this.selectedTabName=Qt.events_attendance,this._loadedTabs=new Map,this.isUpdateEvaluationType$=new d.a(!0),this._preventNavigation=!1}get sessionId(){return this.session.session_id}get canEvaluateEnable(){return this._canEvaluateEnable}set canEvaluateEnable(e){this._canEvaluateEnable=e==h.i.EVALUATION}get sessionName(){return this.session.name}get courseId(){return this.session.course.id}get minScore(){return this._minScore}set minScore(e){this._minScore=e}get maxScore(){return this._maxScore}set maxScore(e){this._maxScore=e}get tabsParamsName(){return Qt}get canViewSessionsTab(){return this.sessionManagementService.permissions.isSessionInstructor}get canViewEventsTab(){return this.sessionManagementService.permissions.isEventInstructor||this.sessionManagementService.permissions.isSessionInstructor}ngOnInit(){this.canViewSessionsTab&&!this.canViewEventsTab&&(this.SUPPORTED_TABS=[Qt.enrollments_evaluations]),!this.canViewSessionsTab&&this.canViewEventsTab&&(this.SUPPORTED_TABS=[Qt.events_attendance]),this.session=this.route.snapshot.data.session,this.canEvaluateEnable=this.session.evaluation_type,this.maxScore=this.session.score_base,this.minScore=this.session.min_score_for_completion,this.setupTabs(),this.setupDocLayout(),this.subscribeTo()}ngOnDestroy(){super.ngOnDestroy(),this.docService.actionButtons.clearActionButtons()}ngAfterViewInit(){l.a.delay(()=>{this.calculateDimensions()},250),this.subscribeTo()}setupDocLayout(e=!1){this.setupBreadcrumbs(),this.docService.header.showTitleBar({title:this.session.name,subtitle:a.a.t("classroom","Manage session details and properties"),fullWidth:!0,mode:"shadowed"}),e||(this.docService.page.activateFullHeightMode(),this.docService.actionButtons.clearActionButtons())}setupBreadcrumbs(e=this.selectedTabName){this.docService.breadcrumbs.setHierarchicalBreadcrumbs([{label:p.a.myCoursesAndLearningPlans,href:"/learn/mycourses"},{label:this.session.course.name,href:`/learn/course/${this.session.course.id}`},{label:a.a.t("standard","Instructor Overview"),href:`/learn/instructor/course/${this.session.course.id}`},{label:a.a.t("standard","Events & Enrollments"),href:`/learn/instructor/session/${this.session.session_id}`,queryParameters:{tab:e}}])}setupTabs(){var e;const t=this.route.snapshot.queryParamMap.get(Wt),i=null!==(e=l.a.includes(this.SUPPORTED_TABS,t)?t:null)&&void 0!==e?e:Kt;this.selectedTabName=this.initialTab=i,this._loadedTabs.set(this.initialTab,!0),this.subscribeTo(this.route.queryParamMap.pipe(Object(u.a)(1)).subscribe(e=>{var t;const i=null!==(t=e.get(Wt))&&void 0!==t?t:Kt;this._preventNavigation=!0,this.selectTab(i),this.setupBreadcrumbs(i)}))}openCreateNewEventPanel(){}wasTabLoaded(e){var t;return null!==(t=this._loadedTabs.get(e))&&void 0!==t&&t}selectTab(e){const t=l.a.indexOf(this.SUPPORTED_TABS,e);-1!==t&&this.tabsManager.onTabChoose(t)}onTabSelected(e){return Object(s.a)(this,void 0,void 0,function*(){e==Qt.events_attendance?this.pageService.showFloatingSaveBar():this.pageService.hideFloatingSaveBar(),yield this.adjustQueryString(e),this.selectedTabName!==e&&l.a.includes(this.SUPPORTED_TABS,e)&&(this.selectedTabName=e,this._loadedTabs.set(e,!0))})}adjustQueryString(e){return Object(s.a)(this,void 0,void 0,function*(){this._preventNavigation?this._preventNavigation=!1:(yield this.router.navigate([],Object.assign({queryParams:{tab:e},relativeTo:this.route,replaceUrl:!0},n.b)),this.setupDocLayout(!0))})}updateEvaluationType(e){this.canEvaluateEnable=e.evaluationType,this.maxScore=e.maxScore,this.minScore=e.minScore,this.isUpdateEvaluationType$.next(!1),l.a.delay(()=>{this.isUpdateEvaluationType$.next(!0)},250)}}return e.\u0275fac=function(t){return new(t||e)(g.ec(m.a),g.ec(m.h),g.ec(b.a),g.ec(g.o),g.ec(f.c),g.ec(b.a),g.ec(_.a))},e.\u0275cmp=g.Yb({type:e,selectors:[["ilt-instructor-session-event-list"]],viewQuery:function(e,t){if(1&e&&g.nd(r.a,3),2&e){let e;g.Rc(e=g.tc())&&(t.tabsManager=e.first)}},features:[g.Jb],decls:3,vars:2,consts:[[3,"tabChoose"],[3,"title","name","defaultTab",4,"ngIf"],[3,"title","name","defaultTab"],[3,"sessionId",4,"ngIf"],[3,"sessionId"],[3,"sessionId","sessionName","courseId","maxScore","minScore","canEvaluateEnable",4,"ngIf"],[3,"sessionId","sessionName","courseId","maxScore","minScore","canEvaluateEnable"]],template:function(e,t){1&e&&(g.kc(0,"tabs-manager",0),g.sc("tabChoose",function(e){return t.onTabSelected(e)}),g.ed(1,Ht,2,4,"tab",1),g.ed(2,Yt,3,6,"tab",1),g.jc()),2&e&&(g.Mb(1),g.Dc("ngIf",t.canViewEventsTab),g.Mb(1),g.Dc("ngIf",t.canViewSessionsTab))},directives:[r.a,v.p,y.a,be,Bt],pipes:[v.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     .tabs-manager .tabs-labels{padding:0!important}"],changeDetection:0}),e})()},ELBg:function(e,t,i){"use strict";var s={single_source_shortest_paths:function(e,t,i){var n={},a={};a[t]=0;var o,r,c,l,d,u,h=s.PriorityQueue.make();for(h.push(t,0);!h.empty();)for(c in l=(o=h.pop()).cost,d=e[r=o.value]||{})d.hasOwnProperty(c)&&(u=l+d[c],(void 0===a[c]||a[c]>u)&&(a[c]=u,h.push(c,u),n[c]=r));if(void 0!==i&&void 0===a[i]){var p=["Could not find a path from ",t," to ",i,"."].join("");throw new Error(p)}return n},extract_shortest_path_from_predecessor_list:function(e,t){for(var i=[],s=t;s;)i.push(s),s=e[s];return i.reverse(),i},find_path:function(e,t,i){var n=s.single_source_shortest_paths(e,t,i);return s.extract_shortest_path_from_predecessor_list(n,i)},PriorityQueue:{make:function(e){var t,i=s.PriorityQueue,n={};for(t in e=e||{},i)i.hasOwnProperty(t)&&(n[t]=i[t]);return n.queue=[],n.sorter=e.sorter||i.default_sorter,n},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=s},EdLK:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var s=i("LRne"),n=i("rLbr"),a=i("JIr8"),o=i("lJxs"),r=i("fXoL"),c=i("Y9qQ");let l=(()=>{class e{constructor(e){this._backendService=e}addSkills(e){return this._backendService.request("/skill/v1/skills/catalog",n.a.POST,{skill_codes:e.map(e=>e.code)}).pipe(Object(a.a)(()=>Object(s.a)({response:{data:{success:!1}}})),Object(o.a)(e=>{var t;return Boolean(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.success)}))}hasSkills(){return this._backendService.request("/skill/v1/skills/catalog",n.a.GET,{page:1,page_size:1}).pipe(Object(a.a)(()=>Object(s.a)({data:void 0})),Object(o.a)(e=>{var t;return(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.total_count)>1}))}}return e.\u0275fac=function(t){return new(t||e)(r.oc(c.a))},e.\u0275prov=r.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},GuO3:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var s=function(e){return e[e.DATE="date"]="DATE",e[e.DROPDOWN="dropdown"]="DROPDOWN",e[e.TEXTFIELD="textfield"]="TEXTFIELD",e[e.TEXTAREA="textarea"]="TEXTAREA",e[e.ACCREDIFRAME="accrediframe"]="ACCREDIFRAME",e}({})},IOwI:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var s=i("gvJE"),n=i("fXoL"),a=i("3Pt+"),o=i("Y9qQ"),r=i("Jc1x"),c=i("+H5O");const l=["folderList"];let d=(()=>{class e{constructor(e,t){this._backendService=t,this.inputTitleControl={type:"text",id:"input-title-control",label:s.a.t("standard","Title")},this.inputUrlControl={type:"text",id:"input-url-control",label:"URL"}}ngOnInit(){}save(){if(this.linkUrlFormGroup.valid){let e={title:this.linkUrlFormGroup.controls.inputTitle.value,course_id:this.course_id,parent_id:this.folderList.getFirstId(),user_id:this.user_id,url:this.linkUrlFormGroup.controls.inputUrl.value};this._backendService.request("/learn/v1/filerepo/linkByURL","POST",e).subscribe(e=>{})}}}return e.\u0275fac=function(t){return new(t||e)(n.ec(a.d),n.ec(o.a))},e.\u0275cmp=n.Yb({type:e,selectors:[["link-url-tab"]],viewQuery:function(e,t){if(1&e&&n.nd(l,3),2&e){let e;n.Rc(e=n.tc())&&(t.folderList=e.first)}},inputs:{user_id:"user_id",course_id:"course_id",linkUrlFormGroup:"linkUrlFormGroup"},decls:6,vars:10,consts:[[1,"link-url-tab__wrapp"],["id","input-url-form",3,"formGroup"],[3,"id","type","label","inputFormControl"],[3,"course_id"],["folderList",""]],template:function(e,t){1&e&&(n.kc(0,"span",0),n.kc(1,"form",1),n.fc(2,"textfield",2),n.fc(3,"textfield",2),n.jc(),n.fc(4,"folder-list",3,4),n.jc()),2&e&&(n.Mb(1),n.Dc("formGroup",t.linkUrlFormGroup),n.Mb(1),n.Dc("id",t.inputTitleControl.id)("type",t.inputTitleControl.type)("label",t.inputTitleControl.label)("inputFormControl",t.linkUrlFormGroup.controls.inputTitle),n.Mb(1),n.Dc("id",t.inputUrlControl.id)("type",t.inputUrlControl.type)("label",t.inputUrlControl.label)("inputFormControl",t.linkUrlFormGroup.controls.inputUrl),n.Mb(1),n.Dc("course_id",t.course_id))},directives:[a.y,a.p,a.i,r.a,c.a],encapsulation:2}),e})()},J6Nv:function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},JzKC:function(e,t,i){var s=i("Wogr"),n=i("aZ40");t.mul=function(e,t){var i=new s(e.length+t.length-1);i.fill(0);for(var a=0;a<e.length;a++)for(var o=0;o<t.length;o++)i[a+o]^=n.mul(e[a],t[o]);return i},t.mod=function(e,t){for(var i=new s(e);i.length-t.length>=0;){for(var a=i[0],o=0;o<t.length;o++)i[o]^=n.mul(t[o],a);for(var r=0;r<i.length&&0===i[r];)r++;i=i.slice(r)}return i},t.generateECPolynomial=function(e){for(var i=new s([1]),a=0;a<e;a++)i=t.mul(i,[1,n.exp(a)]);return i}},Karm:function(e,t,i){"use strict";i.d(t,"h",function(){return s}),i.d(t,"d",function(){return n}),i.d(t,"n",function(){return a}),i.d(t,"c",function(){return o}),i.d(t,"e",function(){return r}),i.d(t,"p",function(){return c}),i.d(t,"a",function(){return l}),i.d(t,"i",function(){return d}),i.d(t,"k",function(){return u}),i.d(t,"j",function(){return h}),i.d(t,"o",function(){return p}),i.d(t,"q",function(){return g}),i.d(t,"r",function(){return m}),i.d(t,"m",function(){return b}),i.d(t,"l",function(){return f}),i.d(t,"f",function(){return _}),i.d(t,"g",function(){return v}),i.d(t,"b",function(){return y});var s=function(e){return e[e.READY="ready"]="READY",e[e.REQUEST_FOR_PLAY="request_for_play"]="REQUEST_FOR_PLAY",e[e.PLAY_REJECTED="play_rejected"]="PLAY_REJECTED",e[e.PLAYING="playing"]="PLAYING",e[e.ACTIVITY_COMPLETED="activity_completed"]="ACTIVITY_COMPLETED",e[e.COURSE_COMPLETED="course_completed"]="COURSE_COMPLETED",e[e.PLAY_REJECT_USERFIELDS="play_reject_userfields"]="PLAY_REJECT_USERFIELDS",e}({}),n=function(e){return e[e.INITIALIZING="initializing"]="INITIALIZING",e[e.READY="ready"]="READY",e[e.PLAYER="player"]="PLAYER",e[e.OVERVIEW="overview"]="OVERVIEW",e[e.UNAUTHORIZED="unauthorized"]="UNAUTHORIZED",e}({}),a=function(e){return e[e.INITIALIZING="initializing"]="INITIALIZING",e[e.REQUEST_SESSION="request_session"]="REQUEST_SESSION",e[e.REQUEST_REJECTED="request_rejected"]="REQUEST_REJECTED",e[e.READY="ready"]="READY",e[e.NO_SESSION="no_sessions"]="NO_SESSION",e[e.SESSION_ENROLLMENT="changeSessionEnrollmentSuccess"]="SESSION_ENROLLMENT",e}({}),o=function(e){return e[e.INITIALIZING="initializing"]="INITIALIZING",e[e.EMPTY="empty"]="EMPTY",e[e.UNAUTHORIZED="unauthorized"]="UNAUTHORIZED",e[e.READY="ready"]="READY",e[e.REQUEST_FOR_PLAY="request_for_play"]="REQUEST_FOR_PLAY",e[e.PLAY_REJECTED="play_rejected"]="PLAY_REJECTED",e[e.PLAYING="playing"]="PLAYING",e[e.PLAY_REJECT_USERFIELDS="play_reject_userfields"]="PLAY_REJECT_USERFIELDS",e}({}),r=function(e){return e.SUBSCRIBED="subscribed",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.WAITING="waiting",e.TO_CONFIRM="subscription_to_confirm",e}({}),c=function(e){return e[e.SUBSCRIBED="subscribed"]="SUBSCRIBED",e[e.IN_PROGRESS="in_progress"]="IN_PROGRESS",e[e.COMPLETED="completed"]="COMPLETED",e}({}),l=function(e){return e[e.SCORM="scormorg"]="SCORM",e[e.AICC="aicc"]="AICC",e[e.TINCAN="tincan"]="TINCAN",e[e.VIDEO="video"]="VIDEO",e[e.YOUTUBE="youtube"]="YOUTUBE",e[e.WISTIA="wistia"]="WISTIA",e[e.VIMEO="vimeo"]="VIMEO",e[e.FILE="file"]="FILE",e[e.ASSIGNMENT="deliverable"]="ASSIGNMENT",e[e.HTMLPAGE="htmlpage"]="HTMLPAGE",e[e.SURVEY="poll"]="SURVEY",e[e.QUIZ="test"]="QUIZ",e[e.SIGN="sign"]="SIGN",e[e.GOOGLEDRIVE="googledrive"]="GOOGLEDRIVE",e}({}),d=function(e){return e.LOCKED="locked",e.PENDING="pending",e.SIGNED="signed",e}({}),u=function(e){return e[e.IN_PROGRESS="in_progress"]="IN_PROGRESS",e[e.INCOMPLETE="incomplete"]="INCOMPLETE",e[e.COMPLETED="completed"]="COMPLETED",e[e.PASSED="passed"]="PASSED",e[e.ATTEMPTED="attempted"]="ATTEMPTED",e[e.NOT_STARTED="not_started"]="NOT_STARTED",e[e.FAILED="failed"]="FAILED",e}({}),h=function(e){return e[e.LOCKED="locked"]="LOCKED",e[e.MAX_ATTEMPTS="locked_maxattempts"]="MAX_ATTEMPTS",e[e.MAX_NUMBER_VIEWS="max_number_views"]="MAX_NUMBER_VIEWS",e}({}),p=function(e){return e[e.FULL="full"]="FULL",e[e.COMPACT="compact"]="COMPACT",e[e.FLAT="flat"]="FLAT",e}({}),g=function(e){return e[e.ATTENDED="attended"]="ATTENDED",e[e.NOT_ATTENDED="not_attended"]="NOT_ATTENDED",e[e.UPCOMING="upcoming"]="UPCOMING",e}({}),m=function(e){return e[e.ATTENDED="attended"]="ATTENDED",e[e.NOT_ATTENDED="not_attended"]="NOT_ATTENDED",e[e.UPCOMING="upcoming"]="UPCOMING",e}({}),b=function(e){return e[e.NOT_STARTED="not_started"]="NOT_STARTED",e[e.IN_PROGRESS="in_progress"]="IN_PROGRESS",e[e.COMPLETED="completed"]="COMPLETED",e[e.LOCKED="locked"]="LOCKED",e[e.NOT_ENROLLED="not_enrolled"]="NOT_ENROLLED",e}({}),f=function(e){return e[e.INITIALIZING="initializing"]="INITIALIZING",e[e.VIEWING="viewing"]="VIEWING",e[e.UNAUTHORIZED="unauthorized"]="UNAUTHORIZED",e}({}),_=function(e){return e[e.ELEARNING="elearning"]="ELEARNING",e[e.CLASSROOM="classroom"]="CLASSROOM",e[e.WEBINAR="webinar"]="WEBINAR",e[e.LEARNING_PLAN="learning_plan"]="LEARNING_PLAN",e}({}),v=function(e){return e[e.WAITING_LIST="-2"]="WAITING_LIST",e[e.CONFIRMED="-1"]="CONFIRMED",e[e.NOT_STARTED="0"]="NOT_STARTED",e[e.IN_PROGRESS="1"]="IN_PROGRESS",e[e.COMPLETED="2"]="COMPLETED",e[e.SUSPEND="3"]="SUSPEND",e[e.OVERBOOKING="4"]="OVERBOOKING",e}({}),y=function(e){return e.PLAY="play",e.PAUSE="pause",e}({})},KwVG:function(e,t,i){"use strict";i.d(t,"c",function(){return s}),i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a}),i.d(t,"d",function(){return o});var s=function(e){return e.UPDATE="update",e.DELETE="delete",e}({});const n={workForceSkills:"/manage/v1/workforce/skills",workForceOccupations:"/manage/v1/workforce/occupations"},a=10;var o=function(e){return e[e.READ_ONLY=0]="READ_ONLY",e[e.DELETE_ONLY=1]="DELETE_ONLY",e[e.COMPLETE=2]="COMPLETE",e}({})},"L+kn":function(e,t,i){"use strict";i.d(t,"a",function(){return C});var s=i("Y9qQ"),n=i("lJxs"),a=i("pLZG"),o=i("Kj3r"),r=i("eIep"),c=i("NKMr"),l=i("bDTG"),d=i("aWaq"),u=i("7vd5"),h=i("LvDl"),p=i.n(h),g=i("galx"),m=i("IsFk"),b=i("lfsz"),f=i("wd/R"),_=i.n(f),v=i("Lbmx"),y=i("fXoL"),w=i("MIZ/");let C=(()=>{class e{constructor(e,t){this.backendService=e,this.taskRunnerService=t,this.permissions={isSessionInstructor:!0,isEventInstructor:!0}}getCourse(e){return this.backendService.request(`/learn/v1/courses/${e}`,"GET",{},{},s.b,null,e=>this.backendService.redirectWhenCode9000(e)).pipe(Object(n.a)(e=>e.data))}getPaginetedList(e,t,i,s,a,o){if(o&&o.date){const{from:e,to:t}=o.date,i=_.a.tz(Object(u.k)()).utcOffset();e&&(o.date_begin=_()(new v.a(e).formatUTC("YYYY-MM-DD 00:00:00")).utcOffset(-i).format("YYYY-MM-DD HH:00:00")),t&&(o.date_end=_()(new v.a(t).formatUTC("YYYY-MM-DD 23:59:59")).utcOffset(-i).format("YYYY-MM-DD HH:59:59")),delete o.date}if(o&&o.properties){const e=o.properties.map(e=>({criteria:"equal_to",name:e,value:c.e[e]}));o.extra_filters=JSON.stringify({extra_filters:p.a.keyBy(e,"name")}),delete o.properties}return o&&o.instructor_id&&(o.instructor_id=o.instructor_id[0]),o&&o.location_ids&&!Array.isArray(o.location_ids)&&(o.location_ids=[o.location_ids]),this.backendService.request(`/course/v1/courses/${e}/sessions`,"GET",Object.assign({page_size:t,page:i+1,sort_dir:s,sort_attr:a},o)).pipe(Object(n.a)(e=>Object.assign(Object.assign({},e.data),{totalCount:e.data.total_count})))}getAdditionalField(){return this.backendService.request("/learn/v1/courses/field","GET",{page_size:200,page:1,sort_attr:"sequence",association:"ilt"}).pipe(Object(n.a)(e=>e.data.items.map(e=>({id:e.id,type:e.type,name:e.name.value}))))}deleteIltService(e){return this.backendService.request(`/course/v1/sessions/${e}`,"DELETE").pipe(Object(n.a)(e=>e.data))}massiveAssignInstructors(e,t,i,s){let a;const o={instructors:[...i],type:"session"};if(0===t.length)a={name:`Massive Assign Instructors - ${(new m.a).transform(new d.a)}`,endpoint:"/course/v1/instructors/add",method:"POST",chunk_size:20,type:g.l.POLLING,threshold:20,data_source:{total_url:`/course/v1/courses/${e}/sessions`,total_url_params:s||{},chunk_url:`/course/v1/courses/${e}/sessions`,chunk_url_params:s||{},force_first_page:!1,post_process_chunk_items:{},options:o},notify_email:b.c.getInstance().email,notify:!0};else{let e=t.map(e=>({id:e}));a={name:`Massive Assign Instructors - ${(new m.a).transform(new d.a)}`,endpoint:"/course/v1/instructors/add",method:"POST",chunk_size:20,type:g.l.API,threshold:20,data_source:{items:e,options:o},notify_email:b.c.getInstance().email,notify:!0}}return this.taskRunnerService.run(a).pipe(Object(n.a)(e=>Object(l.e)(e)))}massiveDeleteSession(e,t,i){let s;if(0===t.length)s={name:`Massive Delete Session - ${(new m.a).transform(new d.a)}`,endpoint:"/course/v1/sessions/batch",method:"DELETE",chunk_size:20,type:g.l.POLLING,threshold:100,data_source:{total_url:`/course/v1/courses/${e}/sessions`,total_url_params:i||{},chunk_url:`/course/v1/courses/${e}/sessions`,chunk_url_params:i||{},force_first_page:!0,post_process_chunk_items:{}},notify_email:b.c.getInstance().email,notify:!0};else{let e=t.map(e=>({id:e}));s={name:`Massive Delete Session - ${(new m.a).transform(new d.a)}`,endpoint:"/course/v1/sessions/batch",method:"DELETE",chunk_size:20,type:g.l.API,threshold:40,data_source:{items:e},notify_email:b.c.getInstance().email,notify:!0}}return this.taskRunnerService.run(s).pipe(Object(n.a)(e=>Object(l.e)(e)))}createIltSession(e,t,i,s,a,o,r,c){return this.backendService.request(`/course/v1/courses/${e}/sessions`,"POST",{name:t,max_enroll:i,instructors:s,min_enroll:0,score_base:o,evaluation_type:a,min_attended_dates_for_completion:r,min_score_for_completion:c}).pipe(Object(n.a)(e=>({session_id:e.data.id_session,success:!0})))}getInstructorListSuggest(e){return e.pipe(Object(a.a)(e=>e.length>2),Object(o.a)(500),Object(r.a)(e=>this.backendService.request("/manage/v1/user","GET",{page_size:5,search_text:e}).pipe(Object(n.a)(e=>(e.data=e.data.items.map(e=>({id:+e.user_id,name:e.fullname.trim()?e.fullname:e.username})),e.data)))))}duplicateIltSession(e,t,i,s,a,o){return this.backendService.request(`/course/v1/sessions/${e}/duplicate`,"POST",{name:t,num_duplicates:i,frequency:s,repetition:a,assign_instructors:o}).pipe(Object(n.a)(e=>({success:!0})))}}return e.\u0275fac=function(t){return new(t||e)(y.oc(s.a),y.oc(w.a))},e.\u0275prov=y.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},L0WZ:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("/76g");const n={blankSlates:{noResults:{title:s.a.t("standard","Whoops, No results found!"),description:s.a.t("standard","Please try again using different search/filters criteria")},noContent:{title:s.a.t("standard","Whoops, there's nothing here"),description:s.a.t("mobile","Looks like there is nothing for you to do in this area right now")}},dataBrowser:{viewOptionLabel:s.a.t("standard","SORT BY"),item:s.a.t("standard","item"),items:s.a.t("standard","items"),filters:{search:s.a.t("standard","Search..."),searchPlaceholder:s.a.t("standard","Search...")}},uiDataBrowser:{filtersLabel:s.a.t("standard","Filters"),clearFiltersLabel:s.a.t("standard","Clear filters"),closeFiltersLabel:s.a.t("standard","Close"),activeFiltersCountLabelSingular:s.a.t("standard","Active Filter"),activeFiltersCountLabelPlural:s.a.t("standard","Active Filters"),search:s.a.t("standard","Search..."),searchPlaceholder:s.a.t("standard","Search...")}}},Lzq4:function(e,t,i){var s=i("u/Db"),n=i("e/Dd");function a(e){this.mode=s.KANJI,this.data=e}a.getBitsLength=function(e){return 13*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){var t;for(t=0;t<this.data.length;t++){var i=n.toSJIS(this.data[t]);if(i>=33088&&i<=40956)i-=33088;else{if(!(i>=57408&&i<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");i-=49472}e.put(i=192*(i>>>8&255)+(255&i),13)}},e.exports=a},M9jS:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var s=i("lfsz"),n=i("gvJE"),a=i("S2Qf"),o=i("T8dX"),r=i("fXoL");let c=(()=>{class e{constructor(e,t){this.toggleService=e,this.translationService=t,this._isRtl=!1}getCalendarButtonForCourse(e,t){if(!this.toggleService.isOn(a.f.TOGGLE_EXTERNAL_CALENDAR_SYNC)||!e.enrolled.is_enrolled||!e.ics_url)return null;const i={mainTitle:n.a.t("standard","Add to calendar"),title:n.a.t("standard","Use this URL in your calendar software/app (e.g. Outlook) to keep your sessions for this course synchronized."),singleLink:e.ics_url,isViewBtnAddToCalendar:!0,lblBtnCalendar:n.a.t("standard","Add to calendar")},r=this.translationService.languageToUse(),c=s.b.getInstance().active_languages;return this._isRtl=!!c[r].is_rtl&&c[r].is_rtl,{properties:{icons:["zmdi zmdi-calendar"],baloon:{width:422,title:" ",style:"white",position:this._isRtl?"right":"bottom-left",component:{params:i,component:o.a},isSuggestionBalloon:!1,showOnClick:!1,uniquePrefix:t,isFab:!0},tooltipText:n.a.t("standard","_CALENDAR"),additionalCssClasses:[...this._isRtl?["baloon-titled-clipboard-copy"]:[]]}}}}return e.\u0275fac=function(t){return new(t||e)(r.oc(a.g),r.oc(a.h))},e.\u0275prov=r.ac({token:e,factory:e.\u0275fac}),e})()},N9vg:function(e,t,i){"use strict";i.d(t,"a",function(){return S});var s=i("BPI6"),n=i("LvDl"),a=i.n(n),o=i("LRne"),r=i("bDTG"),c=i("lJxs"),l=i("pLZG"),d=i("Kj3r"),u=i("eIep"),h=i("JIr8"),p=i("NKMr"),g=i("aWaq"),m=i("7vd5"),b=i("galx"),f=i("IsFk"),_=i("lfsz"),v=i("fXoL"),y=i("Y9qQ"),w=i("MIZ/"),C=i("GIHc");let S=(()=>{class e{constructor(e,t,i){this.backendService=e,this.taskRunnerService=t,this.uploadManager=i,this.dropdownOptionsAdditionalfields=new Map,this.enrollmentAdditionalFields=[],this.max_score=100,this.permissions={isSessionInstructor:!0,isEventInstructor:!0}}getSessionDetail(e){return this.backendService.request(`/course/v1/sessions/${e}`,"GET",{role:"instructor"}).pipe(Object(c.a)(e=>{const t=e.data;return null!=t.custom_deadline_days&&t.custom_deadline_days<0&&(t.custom_deadline_days*=-1),t.instructors=t.instructors.filter(e=>!e.event_only),this.max_score=t.max_score?t.max_score:0,t}))}getEventsPaginetedList(e,t,i,s,n,o){if(o&&o.properties){const e=o.properties.map(e=>({criteria:"equal_to",name:e,value:p.k[e]}));o.extra_filters=JSON.stringify({extra_filters:a.a.keyBy(e,"name")}),delete o.properties}return o&&o.instructor_id&&(o.instructor_id=o.instructor_id[0]),this.backendService.request(`/course/v1/sessions/${e}/events`,"GET",Object.assign({page_size:t,page:i,sort_dir:s,sort_attr:n,role:"instructor"},o)).pipe(Object(c.a)(e=>Object.assign(Object.assign({},e.data),{totalCount:e.data.total_count})))}getSessionEnrollmentsPaginatedList(e,t,i,s,n,a){return this.backendService.request(`/course/v1/sessions/${e}/enrollments`,"GET",Object.assign(Object.assign({page_size:t,page:i+1,sort_dir:s,sort_attr:n},a),{show_enrollment_fields:"show",role:"instructor"})).pipe(Object(c.a)(e=>(e.data.items=e.data.items.map(e=>Object.assign({id:e.user_id},e)),e)),Object(c.a)(e=>Object.assign(Object.assign({},e.data),{totalCount:e.data.total_count})))}createIltEvent(e,t,i,s,n,a,o,r,l,d,u,h,p,g,m){return this.backendService.request(`/course/v1/sessions/${e}/events`,"POST",{name:t,day:i,time_begin:s,time_end:n,timezone:a,id_classroom:o,id_location:r,collaboration_tool:l,webinar_tool:d,id_tool_account:u,password:h,custom_url:p,allow_join_completion:g,allow_recording_completion:m}).pipe(Object(c.a)(e=>({event_id:e.data.event_id,success:!0})))}duplicateIltEvent(e,t,i,s){return this.backendService.request(`/course/v1/events/${e}/duplicate`,"POST",{name:t,day:i,assign_instructors:s}).pipe(Object(c.a)(e=>({event_id:e.data.event_id,success:!0})))}deleteEvent(e){return this.backendService.request(`/course/v1/events/${e}`,"DELETE").pipe(Object(c.a)(e=>e.data))}massiveDeleteEvent(e,t,i){let s;if(0===t.length)s={name:`Massive Delete Event - ${(new f.a).transform(new g.a)}`,endpoint:"/course/v1/events/batch",method:"DELETE",chunk_size:20,type:b.l.POLLING,threshold:20,data_source:{total_url:`/course/v1/sessions/${e}/events`,total_url_params:i||{},chunk_url:`/course/v1/sessions/${e}/events`,chunk_url_params:i||{},force_first_page:!0,post_process_chunk_items:{}},notify_email:_.c.getInstance().email,notify:!0};else{let e=t.map(e=>({id:e}));s={name:`Massive Delete Event - ${(new f.a).transform(new g.a)}`,endpoint:"/course/v1/events/batch",method:"DELETE",chunk_size:20,type:b.l.API,threshold:20,data_source:{items:e},notify_email:_.c.getInstance().email,notify:!0}}return this.taskRunnerService.run(s).pipe(Object(c.a)(e=>Object(r.e)(e)))}getInstructorListSuggest(e){return e.pipe(Object(l.a)(e=>e.length>2),Object(d.a)(500),Object(u.a)(e=>this.backendService.request("/manage/v1/user","GET",{page_size:5,search_text:e}).pipe(Object(c.a)(e=>(e.data=e.data.items.map(e=>({id:+e.user_id,name:e.fullname.trim()?e.fullname:e.username})),e.data)))))}fetchDropdownOptionsAdditionalFields(){return this.backendService.request("/learn/v1/courses/field","GET",{association:"ilt",type:"dropdown"}).pipe(Object(c.a)(e=>e.data.items),Object(c.a)(e=>e.map(e=>{this.dropdownOptionsAdditionalfields.set(e.id,Object.keys(e.dropdown_options).map(t=>({id:t,label:e.dropdown_options[t].value})))})))}fetchEnrollementAdditionalFields(e){return this.backendService.request("/manage/v1/enrollment_fields","GET",{page_size:200,page:1,course_id:e,sort_attr:"sequence"}).pipe(Object(c.a)(e=>{e.data.items=e.data.items.filter(e=>e.type!=p.f.iFrame).map(e=>Object.assign({id:e.id,title:e.title},e)),this.enrollmentAdditionalFields=[...e.data.items]}))}getAdditionalFields(e){return this.dropdownOptionsAdditionalfields.get(e)||[]}getToolList(){return this.backendService.request("/course/v1/courses/tools","GET").pipe(Object(c.a)(e=>e.data.tools))}updateltSession(e,t,i,s,n,a,o,r,l,d,u,h,p,g){return this.backendService.request(`/course/v1/sessions/${e}`,"PUT",{name:t,description:i,code:s,max_enroll:n,min_enroll:a,score_base:o,enrollment_deadline:r,custom_deadline_days:l,evaluation_type:d,min_attended_dates_for_completion:u,min_score_for_completion:h,instructors:p,additional_fields:g}).pipe(Object(c.a)(()=>({success:!0})))}getLocationList(){return this.backendService.request("/learn/v1/location","GET",{sort_attr:"name",sort_dir:s.a.ASC,page_size:"9999"}).pipe(Object(c.a)(e=>e.data.items))}getClassroomList(){return this.backendService.request("/learn/v1/classroom","GET",{sort_attr:"name",sort_dir:s.a.ASC,page_size:"9999"}).pipe(Object(c.a)(e=>e.data.items))}updateIltEnrollmentStatus(e,t,i,s){return this.backendService.request(`/learn/v1/enrollment/${e}/${t}/ilt/session/${i}`,"PUT",{level:"learner",status:s,date:(new g.a).formatTimezoned("YYYY-MM-DD HH:mm:ss",Object(m.k)())}).pipe(Object(c.a)(e=>e.data[0]))}getFileFromS3(e){const t={name:e,type:this.uploadManager.getFileExtension(e)};return this.uploadManager.getSignedUrl(t,r.a,void 0,!0,"read").pipe(Object(c.a)(e=>e.data))}evaluateSession(e,t,i,s,n,a,o,r){return this.backendService.request(`/course/v1/sessions/${e}/evaluate`,"PUT",{status:i,user_id:t,score:s,completion_date:n,attachment:a,mark_as_present:o,message:r}).pipe(Object(c.a)(()=>({success:!0})))}massiveEvaluateSession(e,t,i,s,n,a,o,l,d){let u;if(0===t.length){const t={role:"instructor"};u={name:`Massive Evaluate Session - ${(new f.a).transform(new g.a)}`,endpoint:"/course/v1/sessions/evaluate/batch",method:"PUT",chunk_size:20,type:b.l.POLLING,threshold:20,data_source:{total_url:`/course/v1/sessions/${e}/enrollments`,total_url_params:d?Object.assign(Object.assign({},d),t):t,chunk_url:`/course/v1/sessions/${e}/enrollments`,chunk_url_params:d?Object.assign(Object.assign({},d),t):t,force_first_page:!1,post_process_chunk_items:{},options:{session_id:e,status:i,score:s,completion_date:n,attachment:a,mark_as_present:o,message:l}},notify_email:_.c.getInstance().email,notify:!0}}else{let r=t.map(e=>({user_id:e}));u={name:`Massive Evaluate Session - ${(new f.a).transform(new g.a)}`,endpoint:"/course/v1/sessions/evaluate/batch",method:"PUT",chunk_size:20,type:b.l.API,threshold:20,data_source:{items:r,options:{session_id:e,status:i,score:s,completion_date:n,attachment:a,mark_as_present:o,message:l}},notify_email:_.c.getInstance().email,notify:!0}}return this.taskRunnerService.run(u).pipe(Object(c.a)(e=>Object(r.e)(e)))}deleteIltEnrollment(e,t,i){return this.backendService.request(`/learn/v1/enrollments/${e}/${t}/session/${i}`,"DELETE").pipe(Object(c.a)(e=>Object.assign(Object.assign({},e.data),{success:!0})),Object(h.a)(e=>Object(o.a)({success:!1,message:1081==e.code?e.message[0]:void 0})))}massiveAssignInstructors(e,t,i,s){let n;const a={instructors:[...i],type:"event"};if(0===t.length)n={name:`Massive Assign Instructors - ${(new f.a).transform(new g.a)}`,endpoint:"/course/v1/instructors/add",method:"POST",chunk_size:20,type:b.l.POLLING,threshold:20,data_source:{total_url:`/course/v1/sessions/${e}/events`,total_url_params:s||{},chunk_url:`/course/v1/sessions/${e}/events`,chunk_url_params:s||{},force_first_page:!1,post_process_chunk_items:{},options:a},notify_email:_.c.getInstance().email,notify:!0};else{let e=t.map(e=>({id:e}));n={name:`Massive Assign Instructors - ${(new f.a).transform(new g.a)}`,endpoint:"/course/v1/instructors/add",method:"POST",chunk_size:20,type:b.l.API,threshold:20,data_source:{items:e,options:a},notify_email:_.c.getInstance().email,notify:!0}}return this.taskRunnerService.run(n).pipe(Object(c.a)(e=>Object(r.e)(e)))}massiveChangeStatus(e,t,i,s,n){let a;const o={course_id:e,session_id:t,status:s,level:"learner",enrollment_date_now:!0};if(0===i.length)a={name:`Massive Course Update Enrollment status - ${(new f.a).transform(new g.a)}`,endpoint:"/learn/v1/enrollments/batch",method:"POST",chunk_size:20,type:b.l.POLLING,threshold:20,data_source:{total_url:`/course/v1/sessions/${t}/enrollments`,total_url_params:n||{},chunk_url:`/course/v1/sessions/${t}/enrollments`,chunk_url_params:n||{},force_first_page:!1,post_process_chunk_items:{},options:o},notify_email:_.c.getInstance().email,notify:!0};else{let e=i.map(e=>({user_id:e}));a={name:`Massive Course Update Enrollment status - ${(new f.a).transform(new g.a)}`,endpoint:"/learn/v1/enrollments/batch",method:"POST",chunk_size:20,type:b.l.API,threshold:20,data_source:{items:e,options:o},notify_email:_.c.getInstance().email,notify:!0}}return this.taskRunnerService.run(a).pipe(Object(c.a)(e=>Object(r.e)(e)))}massiveSendEmailToUser(e,t,i,s,n,a,o,l){let d;const u={course_id:t,session_id:i,message:s,sender:n,subject:a,cc:o};return d=0===e.length?{name:`Massive ILT Session Send Email - ${(new f.a).transform(new g.a)}`,endpoint:"/learn/v1/enrollments/email/batch",method:"POST",chunk_size:20,type:b.l.POLLING,threshold:20,data_source:{total_url:`/course/v1/sessions/${i}/enrollments`,total_url_params:l||{},chunk_url:`/course/v1/sessions/${i}/enrollments`,chunk_url_params:l||{},force_first_page:!1,post_process_chunk_items:{},options:u},notify_email:_.c.getInstance().email,notify:!0}:{name:`Massive ILT Session Send Email - ${(new f.a).transform(new g.a)}`,endpoint:"learn/v1/enrollments/email/batch",method:"POST",chunk_size:20,type:b.l.API,threshold:20,data_source:{items:e,options:u},notify_email:_.c.getInstance().email,notify:!0},this.taskRunnerService.run(d).pipe(Object(c.a)(e=>Object(r.e)(e)))}massiveUnenroll(e,t,i,s){let n;const a={course_id:e,session_id:t};if(0===i.length)n={name:`Massive ILT Session Unenroll - ${(new f.a).transform(new g.a)}`,endpoint:"/learn/v1/enrollments/batch",method:"DELETE",chunk_size:20,type:b.l.POLLING,threshold:20,data_source:{total_url:`/course/v1/sessions/${t}/enrollments`,total_url_params:s||{},chunk_url:`/course/v1/sessions/${t}/enrollments`,chunk_url_params:s||{},force_first_page:!0,post_process_chunk_items:{},options:a},notify_email:_.c.getInstance().email,notify:!0};else{let e=i.map(e=>({user_id:e}));n={name:`Massive ILT Session Unenroll - ${(new f.a).transform(new g.a)}`,endpoint:"/learn/v1/enrollments/batch",method:"DELETE",chunk_size:20,type:b.l.API,threshold:20,data_source:{items:e,options:a},notify_email:_.c.getInstance().email,notify:!0}}return this.taskRunnerService.run(n).pipe(Object(c.a)(e=>Object(r.e)(e)))}}return e.\u0275fac=function(t){return new(t||e)(v.oc(y.a),v.oc(w.a),v.oc(C.a))},e.\u0275prov=v.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},NKMr:function(e,t,i){"use strict";i.d(t,"b",function(){return s}),i.d(t,"c",function(){return n}),i.d(t,"i",function(){return a}),i.d(t,"a",function(){return o}),i.d(t,"j",function(){return r}),i.d(t,"k",function(){return c}),i.d(t,"g",function(){return l}),i.d(t,"h",function(){return d}),i.d(t,"f",function(){return u}),i.d(t,"d",function(){return h}),i.d(t,"e",function(){return p});var s=function(e){return e.SEARCH="search_text",e.STATUS="status",e}({}),n=function(e){return e[e.ATTENDANCE_NOTSET=-1]="ATTENDANCE_NOTSET",e[e.ATTENDANCE_ABSENT=0]="ATTENDANCE_ABSENT",e[e.ATTENDANCE_PRESENT=1]="ATTENDANCE_PRESENT",e}({}),a=function(e){return e[e.MANUAL=3]="MANUAL",e[e.EVALUATION=0]="EVALUATION",e[e.ATTENDANCE=2]="ATTENDANCE",e[e.TRAINING=1]="TRAINING",e}({}),o=function(e){return e.PASSED="1",e.NOT_PASSED="-1",e}({}),r=function(e){return e.SEARCH="search_text",e.TYPE="type",e.PROPERTIES="properties",e.PROPERTIES_WITHOUT_ATTENDANCE="without_attendance",e.PROPERTIES_WITHOUT_EVENT_INSTRUCTORS="without_event_instructors",e.INSTRUCTORS="instructor_id",e}({});const c={[r.PROPERTIES_WITHOUT_ATTENDANCE]:1,[r.PROPERTIES_WITHOUT_EVENT_INSTRUCTORS]:1};var l=function(e){return e.SEARCH="search_text",e.EVALUATION_STATUS="evaluation_status",e.COMPLETION="completion",e.COURSE_STATUS="status",e}({}),d=function(e){return e[e.EVALUATION_STATUS_EVALUATED=1]="EVALUATION_STATUS_EVALUATED",e[e.EVALUATION_STATUS_NOT_EVALUATED=0]="EVALUATION_STATUS_NOT_EVALUATED",e[e.COMPLETION_COMPLETED=1]="COMPLETION_COMPLETED",e[e.COMPLETION_NOT_COMPLETED=0]="COMPLETION_NOT_COMPLETED",e[e.COURSE_STATUS_WAITING=-2]="COURSE_STATUS_WAITING",e[e.COURSE_STATUS_TO_CONFIRM=-1]="COURSE_STATUS_TO_CONFIRM",e[e.COURSE_STATUS_ENROLLED=0]="COURSE_STATUS_ENROLLED",e[e.COURSE_STATUS_IN_PROGRESS=1]="COURSE_STATUS_IN_PROGRESS",e[e.COURSE_STATUS_COMPLETED=2]="COURSE_STATUS_COMPLETED",e[e.COURSE_STATUS_SUSPENDED=3]="COURSE_STATUS_SUSPENDED",e}({}),u=function(e){return e.date="1",e.text="3",e.freeText="4",e.dropdown="2",e.iFrame="5",e}({}),h=function(e){return e.SEARCH="search_text",e.DATE="date",e.DATE_BEGIN="date_begin",e.DATE_END="date_end",e.PROPERTIES="properties",e.PROPERTIES_WITHOUT_EVENTS="without_events",e.PROPERTIES_WITH_USER_WAITING="with_user_waiting",e.PROPERTIES_WITHOUT_ENROLLED_USERS="without_user_enrolled",e.PROPERTIES_WITHOUT_INSTRUCTORS="without_instructors",e.INSTRUCTOR="instructor_id",e.INSTRUCTORS="instructor_ids",e.LOCATIONS="location_ids",e.SESSION_ATTENDANCE_TYPES="attendance_types",e.SESSION_ATTENDANCE_TYPES_ONLINE="online",e.SESSION_ATTENDANCE_TYPES_ONSITE="onsite",e.SESSION_ATTENDANCE_TYPES_FLEXIBLE="flexible",e.SESSION_ATTENDANCE_TYPES_BLENDED="blended",e}({});const p={[h.PROPERTIES_WITHOUT_EVENTS]:1,[h.PROPERTIES_WITH_USER_WAITING]:1,[h.PROPERTIES_WITHOUT_ENROLLED_USERS]:1}},NPxG:function(e,t,i){var s=i("ekOh"),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case s.L:return n[4*(e-1)+0];case s.M:return n[4*(e-1)+1];case s.Q:return n[4*(e-1)+2];case s.H:return n[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case s.L:return a[4*(e-1)+0];case s.M:return a[4*(e-1)+1];case s.Q:return a[4*(e-1)+2];case s.H:return a[4*(e-1)+3];default:return}}},Ozuj:function(e,t,i){"use strict";i.d(t,"a",function(){return d}),i.d(t,"b",function(){return u});var s=i("3t6O"),n=i("3pRn"),a=i("wqqH"),o=i("sVTu"),r=i("LvDl"),c=i.n(r);const l={status:a.d.TO_BE_STARTED,mode:s.r.INLINE,action:null,settings:{request_all_answers:!1,hide_user_info:!1,allow_answer_edit:!1,allow_backtracking:!1,allow_partial_submission:!1,max_attempts:0,show_final_score:!1,show_average_score:!1,show_score_by_category:!1,time_option:a.f.NONE,time_limit:0,max_score:0,score_type:a.c.ABSOLUTE,pass_mark:0,completion_counts:0,average_user_score:0,max_manual_score:0,order_type:0},pages_count:0,current_page:0,can_view_prev_page:!0,questions_count:0,user_status:{status:a.e.NOT_SUBMITTED,score:0,evaluation_status:a.b.WAITING_EVALUATION,suspension_time:0,time_consumed:0,attempts_consumed:0},questions:[],question_counter:0,is_submitted:!1,timer:{m:0,s:0},has_error:!1,error_message:"",error_code:0};class d{static format(e,t,i=!0){let s=e.status;return t.user_status.status===a.d.SUBMITTED&&(s=a.d.SUBMITTED),t=Object.assign({},t,{status:s}),Object.assign({},i?l:e,t)}static formatQuestions(e,t){const i=[];let s=a.d.STARTED;t.payload.data.acknowledge.user_status&&t.payload.data.acknowledge.user_status.status==a.d.SUBMITTED&&(s=a.d.SUBMITTED),t.type===n.a.SHOW_REVIEW_SUCCESS&&(s=a.d.REVIEW);for(const a in t.payload.data.acknowledge.questions){let s=t.payload.data.acknowledge.questions[a],r=s.title;"title"!==s.type&&(r='<div class="numbering">'+s.question_number+') </div> <div class="title">'+s.title+"</div> ");let l=o.a.ANSWER;t.type===n.a.SHOW_REVIEW_SUCCESS?l=o.a.REVIEW:!1===e.settings.allow_answer_edit&&!1===c.a.isEmpty(s.user_status)&&(l=o.a.READONLY);const d={id_question:s.question,title:r,score:s.score?s.score:0,is_mandatory:s.is_mandatory?s.is_mandatory:0,mode:l,type:s.type,form_control:Object,time_limit:Number(s.time_limit),time_consumed:Number(s.time_consumed),additional_info:s.additional_info,user_status:s.user_status?s.user_status:{},feedback:s.feedback};i.push(d)}return Object.assign({},e,{action:t.type,questions:i,status:s,has_error:!1,current_page:t.payload.data.acknowledge.page_number,can_view_prev_page:!t.payload.data.acknowledge.hasOwnProperty("can_view_prev_page")||t.payload.data.acknowledge.can_view_prev_page,user_status:t.payload.data.acknowledge.user_status?t.payload.data.acknowledge.user_status:e.user_status})}static formatUserEntry(e){let t={};for(let i in e)for(let s in e[i])if("object"==typeof e[i][s]){let n={user_status:{answers:{}}};for(let t in e[i][s])n.user_status.answers[t]=e[i][s][t];t[s]=n}else t[s]={user_status:{answer:e[i][s]}};return t}}function u(e=l,t){switch(t.type){case n.a.SET_INITIAL_STATE:return l;case n.a.LOAD_LAUNCH_PARAMS:return d.format(e,t.payload);case n.a.RELOAD_LAUNCH_PARAMS:return d.format(e,t.payload,!1);case n.a.START_PLAYING:return e.user_status.time_consumed=0,Object.assign({},e,{current_page:1,question_counter:0,user_status:e.user_status});case n.a.RETAKE_THE_TEST:return Object.assign({},e,{status:null,action:n.a.START_PLAYING,current_page:1,question_counter:0,user_status:{status:a.e.NOT_SUBMITTED,score:0,attempts_consumed:e.user_status&&e.user_status.attempts_consumed?e.user_status.attempts_consumed:0,can_view_prev_page:!e.can_view_prev_page||e.can_view_prev_page,evaluation_status:a.b.WAITING_EVALUATION,suspension_time:0,time_consumed:0}});case n.a.LEAVE_PLAY_MODE:return Object.assign({},e,{status:t.payload.status,has_error:!1});case n.a.LEAVE_REVIEW_MODE:return Object.assign({},e,{status:a.d.SUBMITTED});case n.a.GO_TO_PAGE_SUCCESS:return d.formatQuestions(e,t);case n.a.QUIZ_ACTION_REJECTED:{let i=c.a.isObject(t.payload.message)?c.a.head(t.payload.message):t.payload.message,s=c.a.isObject(t.payload.code)?c.a.head(t.payload.code):t.payload.code;return Object.assign({},e,{action:t.type,has_error:!0,error_message:i,error_code:s})}case n.a.SUBMIT_QUIZ_PARTIAL_SUCCESS:return Object.assign({},l,{action:t.type,pages_count:e.pages_count,questions_count:e.questions_count,mode:e.mode,settings:e.settings,user_status:t.payload.data.acknowledge.user_status||e.user_status});case n.a.SUBMIT_QUIZ_SUCCESS:return Object.assign({},e,{questions:[],status:a.d.SUBMITTED,user_status:t.payload.data.acknowledge.user_status,is_submitted:!0,has_error:!1,error_message:""});case n.a.SHOW_REVIEW_SUCCESS:return d.formatQuestions(e,t);case n.a.RELOAD_QUIZ_MAX_SCORE:{const i=e;return i.settings=t.payload.settings,Object.assign({},i)}default:return e}}},QAZZ:function(e,t,i){var s=i("Rb7d");function n(e,t){var i=e.a/255,s=t+'="'+e.hex+'"';return i<1?s+" "+t+'-opacity="'+i.toFixed(2).slice(1)+'"':s}function a(e,t,i){var s=e+t;return void 0!==i&&(s+=" "+i),s}t.render=function(e,t,i){var o=s.getOptions(t),r=e.modules.size,c=e.modules.data,l=r+2*o.margin,d=o.color.light.a?"<path "+n(o.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",u="<path "+n(o.color.dark,"stroke")+' d="'+function(e,t,i){for(var s="",n=0,o=!1,r=0,c=0;c<e.length;c++){var l=Math.floor(c%t),d=Math.floor(c/t);l||o||(o=!0),e[c]?(r++,c>0&&l>0&&e[c-1]||(s+=o?a("M",l+i,.5+d+i):a("m",n,0),n=0,o=!1),l+1<t&&e[c+1]||(s+=a("h",r),r=0)):n++}return s}(c,r,o.margin)+'"/>',h='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+'viewBox="0 0 '+l+" "+l+'" shape-rendering="crispEdges">'+d+u+"</svg>\n";return"function"==typeof i&&i(null,h),h}},QKG3:function(e,t,i){"use strict";i.r(t),i.d(t,"CourseModule",function(){return me});var s=i("tyNb"),n=i("tfGn"),a=i("ZOB2"),o=i("M9jS"),r=i("A0KR"),c=i("+JQb"),l=i("3QLk"),d=i("7o/Q"),u=i("4I5i");function h(e){return t=>t.lift(new p(e))}class p{constructor(e){if(this._skipCount=e,this._skipCount<0)throw new u.a}call(e,t){return t.subscribe(0===this._skipCount?new d.a(e):new g(e,this._skipCount))}}class g extends d.a{constructor(e,t){super(e),this._skipCount=t,this._count=0,this._ring=new Array(t)}_next(e){const t=this._skipCount,i=this._count++;if(i<t)this._ring[i]=e;else{const s=i%t,n=this._ring,a=n[s];n[s]=e,this.destination.next(a)}}}var m=i("lJxs"),b=i("fXoL"),f=i("Y9qQ"),_=i("JA8w"),v=i("qJzG"),y=i("ofXK"),w=i("oTDt");const C=["courseCmp"];function S(e,t){if(1&e){const e=b.lc();b.kc(0,"div"),b.kc(1,"course-content",1,2),b.sc("reloadEvent",function(){return b.Vc(e),b.wc().changeStatus()}),b.jc(),b.jc()}if(2&e){const e=b.wc();b.Mb(1),b.Dc("tabsParams",e.tabsParams)("course",e.course)}}let k=(()=>{class e{constructor(e,t,i,s,n,a){this._backendService=e,this.cache=t,this.route=i,this.ref=s,this.translate=n,this.courseService=a}ngOnInit(){this.initCourseData(),this.langChangeSubscriber=this.translate.onLangChange.pipe(h(1)).subscribe(e=>{this.initCourseData()})}ngOnDestroy(){this.cache.isInitialized()&&this.cache.clear(),this.langChangeSubscriber&&this.langChangeSubscriber.unsubscribe()}initCourseData(){this.route.paramMap.subscribe(e=>{this.course_id=e.get("id"),this.course_title=e.get("title"),this.GetCourses(this.course_id)})}changeStatus(){this.GetCourses(this.course_id)}GetCourses(e){Object(l.b)(this.courseService.request("details",{courseId:e})).pipe(Object(m.a)(e=>(e&&e.instructors&&e.instructors.length>0&&(e.instructors=Object(l.g)(e.instructors)),e))).subscribe(e=>{this.course=e,this.course.additional_information&&(this.course.additional_information=this.course.additional_information.filter(e=>1===parseInt(e.visible_to_user,10))),this.tabsParams={panels:Object(l.f)(this.course,null),style:""}})}}return e.\u0275fac=function(t){return new(t||e)(b.ec(f.a),b.ec(c.b),b.ec(s.a),b.ec(b.i),b.ec(_.a),b.ec(v.a))},e.\u0275cmp=b.Yb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&b.nd(C,1),2&e){let e;b.Rc(e=b.tc())&&(t.courseCmp=e.first)}},features:[b.Lb([{provide:c.d,useClass:c.c}])],decls:2,vars:1,consts:[[4,"ngIf"],[3,"tabsParams","course","reloadEvent"],["courseCmp",""]],template:function(e,t){1&e&&(b.ed(0,S,3,2,"div",0),b.fc(1,"router-outlet")),2&e&&b.Dc("ngIf",t.course)},directives:[y.p,s.m,w.a],encapsulation:2}),e})();var T=i("ajSx"),I=i("gvJE"),x=i("7vd5"),D=i("aWaq"),O=i("aEIV"),E=i("S2Qf"),A=i("o6wD"),P=i("2Vo4"),M=i("v5S6"),L=function(e){return e.ATTENDANCE_FILTERS="attendance_filters",e.LOCATION_FILTERS="location_filters",e}({}),j=i("+RPX"),R=i("ewIA"),F=i("54PV"),N=i("nUpK"),U=i("M+yG");const z=function(){return[]};function q(e,t){if(1&e&&(b.fc(0,"ui-data-browser-filter-multiple-selection",10),b.xc(1,"t")),2&e){const e=b.wc(2);b.Dc("label",b.yc(1,5,"Locations"))("key",e.IltSessionsCatalogListFiltersEnum.LOCATION_FILTERS)("options",e.venueList)("value",e.locationTypeFilterValue)("defaultValue",b.Hc(7,z))}}const V=function(e){return{n:e}};function B(e,t){if(1&e&&(b.kc(0,"span"),b.gd(1),b.xc(2,"t"),b.xc(3,"async"),b.jc()),2&e){const e=b.wc(2);let t=null;b.Mb(1),b.hd(b.zc(2,1,"{n} Session",b.Ic(6,V,null==(t=b.yc(3,4,e.accordion$))?null:t.panels.length)))}}function G(e,t){if(1&e&&(b.kc(0,"span"),b.gd(1),b.xc(2,"t"),b.xc(3,"async"),b.jc()),2&e){const e=b.wc(2);let t=null;b.Mb(1),b.hd(b.zc(2,1,"{n} Sessions",b.Ic(6,V,null==(t=b.yc(3,4,e.accordion$))?null:t.panels.length)))}}function H(e,t){if(1&e&&b.fc(0,"accordion",12),2&e){const e=b.wc().ngIf;b.Dc("type",e.type)("panels",e.panels)}}function $(e,t){if(1&e&&(b.ic(0),b.ed(1,H,1,2,"accordion",11),b.hc()),2&e){const e=t.ngIf;b.wc(3);const i=b.Sc(4);b.Mb(1),b.Dc("ngIf",e.panels.length>0)("ngIfElse",i)}}function Y(e,t){if(1&e&&(b.ic(0),b.ed(1,$,2,2,"ng-container",9),b.xc(2,"async"),b.hc()),2&e){const e=b.wc(2);b.Mb(1),b.Dc("ngIf",b.yc(2,1,e.accordion$))}}function W(e,t){if(1&e){const e=b.lc();b.ic(0),b.kc(1,"dcb-ui-data-browser",4),b.kc(2,"dcb-ui-data-browser-panel-filters",5),b.sc("filtersChange",function(t){return b.Vc(e),b.wc().filtersChange(t)}),b.xc(3,"t"),b.fc(4,"ui-data-browser-filter-single-selection",6),b.xc(5,"t"),b.ed(6,q,2,8,"ui-data-browser-filter-multiple-selection",7),b.jc(),b.kc(7,"dcb-ui-data-browser-control"),b.kc(8,"div",8),b.ed(9,B,4,8,"span",9),b.xc(10,"async"),b.ed(11,G,4,8,"span",9),b.xc(12,"async"),b.jc(),b.jc(),b.kc(13,"dcb-ui-data-browser-content"),b.ed(14,Y,3,3,"ng-container",0),b.jc(),b.jc(),b.hc()}if(2&e){const e=b.wc(),t=b.Sc(2);let i=null,s=null;b.Mb(1),b.bd("bordered"),b.Dc("sticky",!1)("fillHeight",!0),b.Mb(1),b.Dc("filtersLabel",b.yc(3,14,"Filters")),b.Mb(2),b.Dc("label",b.yc(5,16,"Session Attendance Types"))("options",e.sessionAttendanceTypeFilters)("value",e.sessionAttendanceTypeFilterValue)("key",e.IltSessionsCatalogListFiltersEnum.ATTENDANCE_FILTERS),b.Mb(2),b.Dc("ngIf",e.venueList.length>0),b.Mb(3),b.Dc("ngIf",1===(null==(i=b.yc(10,18,e.accordion$))?null:i.panels.length)),b.Mb(2),b.Dc("ngIf",1!==(null==(s=b.yc(12,20,e.accordion$))?null:s.panels.length)),b.Mb(3),b.Dc("ngIf",!e.isFiltersLoading)("ngIfElse",t)}}function Q(e,t){1&e&&(b.kc(0,"div",13),b.fc(1,"ui-spinner"),b.jc())}function K(e,t){if(1&e&&(b.fc(0,"ui-blank-slate",14),b.xc(1,"t"),b.xc(2,"t")),2&e){const e=b.wc();b.Dc("title",b.yc(1,2,e.blankSlateLabel.notFoundWithFilter.title))("description",b.yc(2,4,e.blankSlateLabel.notFoundWithFilter.description))}}function J(e,t){if(1&e&&(b.fc(0,"ui-blank-slate",15),b.xc(1,"t"),b.xc(2,"t")),2&e){const e=b.wc();b.Dc("title",b.yc(1,2,e.blankSlateLabel.notSessions.title))("description",b.yc(2,4,e.blankSlateLabel.notSessions.description))}}let X=(()=>{class e extends A.a{constructor(e,t,i){super(),this.iltSessionsCatalogListService=e,this.changeDetectorRef=t,this.translation=i,this.accordion$=new P.a({}),this.sessionAttendanceTypeFilters=[],this.isFiltersLoading=!1,this.IltSessionsCatalogListFiltersEnum=L,this.venueList=[],this.sessionAttendanceTypeFilterValue="all",this.locationTypeFilterValue=[],this.blankSlateLabel={notFoundWithFilter:{title:I.a.t("standard","Whoops, No results found!"),description:I.a.t("standard","Please try again using different search/filters criteria")},notSessions:{title:I.a.t("standard","Whoops, there are no sessions yet for this course"),description:I.a.t("standard","Please contact your Administrator or the course instructor")}},this._translationPipe=new I.b(i,t)}ngOnInit(){if(this.sessionAttendanceTypeFilters=[{value:"all",label:this._translationPipe.transform(I.a.t("standard","All Sessions"))},{value:R.a.ONSITE,label:this._translationPipe.transform(I.a.t("standard","Full Onsite")),description:this._translationPipe.transform(I.a.t("standard","All sessions are available onsite"))},{value:R.a.ONLINE,label:this._translationPipe.transform(I.a.t("standard","Full Online")),description:this._translationPipe.transform(I.a.t("standard","All sessions are available online"))},{value:R.a.FLEXIBLE,label:this._translationPipe.transform(I.a.t("standard","Flexible")),description:this._translationPipe.transform(I.a.t("standard","All sessions are available both online and onsite"))},{value:R.a.BLENDED,label:this._translationPipe.transform(I.a.t("standard","Blended")),description:this._translationPipe.transform(I.a.t("standard","Sessions with mixed type of attendance"))}],void 0!==this.sessions&&(this.iltSessionsCatalogListService.init(this.sessions),this.venueList=this.getVenues()),void 0!==this.iltSessionsCatalogListService.currentFilters){this.iltSessionsCatalogListService.executeFilterIltSessions(this.iltSessionsCatalogListService.currentFilters);const{attendance_filters:e,location_filters:t}=this.iltSessionsCatalogListService.currentFilters;e&&(this.sessionAttendanceTypeFilterValue=e),t&&(this.locationTypeFilterValue=[...t])}this.subscribeTo(this.managePanels(),this.listenFilterProcess())}managePanels(){return this.iltSessionsCatalogListService.iltSessions$.subscribe(e=>{const t=1===e.length,i=e.map(e=>({title:e.name,subtitleNumber:e.dates.length,subtitle:I.a.t("standard","events"),description:{component:j.a,params:{session:e,courseType:"ilt"}},content:{component:M.a,params:{session_description:e.description,session_additional_fields:e.additional_fields,course:this.course,course_type:"ilt",sessions:e.dates,session_id:e.id_session,session_instructors:e.instructors,locations:e.locations||[]}},opened:t,active:t}));this.accordion$.next({type:"split",panels:i})})}filtersChange(e){this.iltSessionsCatalogListService.executeFilterIltSessions(e)}listenFilterProcess(){return this.iltSessionsCatalogListService.filtersWorkflow$.subscribe(e=>{this.isFiltersLoading="started"===e})}getVenues(){if(void 0===this.sessions)return[];const e=this.sessions.reduce((e,t)=>e.concat(t.locations.map(e=>({value:String(e.id_location),label:e.name}))),[]);return[...new Map(e.map(e=>[e.value,e])).values()]}}return e.\u0275fac=function(t){return new(t||e)(b.ec(F.a),b.ec(b.i),b.ec(E.h))},e.\u0275cmp=b.Yb({type:e,selectors:[["ilt-sessions-catalog-list"]],inputs:{sessions:"sessions",course:"course"},features:[b.Jb],decls:7,vars:2,consts:[[4,"ngIf","ngIfElse"],["uiSpinner",""],["notFoundWithFilter",""],["notSessions",""],["controlsShrinkBreakpoint","sm",3,"sticky","fillHeight"],[3,"filtersLabel","filtersChange"],["defaultValue","all",3,"label","options","value","key"],[3,"label","key","options","value","defaultValue",4,"ngIf"],[1,"session-count"],[4,"ngIf"],[3,"label","key","options","value","defaultValue"],["class","course-accordion",3,"type","panels",4,"ngIf","ngIfElse"],[1,"course-accordion",3,"type","panels"],[1,"ui-spinner-content"],["illustrationName","no-item-found","illustrationSize","md",3,"title","description"],["illustrationName","something-wrong","illustrationSize","md",3,"title","description"]],template:function(e,t){if(1&e&&(b.ed(0,W,15,22,"ng-container",0),b.ed(1,Q,2,0,"ng-template",null,1,b.fd),b.ed(3,K,3,6,"ng-template",null,2,b.fd),b.ed(5,J,3,6,"ng-template",null,3,b.fd)),2&e){const e=b.Sc(6);b.Dc("ngIf",(null==t.sessions?null:t.sessions.length)>0)("ngIfElse",e)}},directives:[y.p,N.Ib,N.Wb,N.Rb,N.Kb,N.Jb,N.Pb,U.a,N.Be,N.B],pipes:[I.b,y.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}[_nghost-%COMP%]{display:block}  .ui-blank-slate{padding-top:var(--ui-spacing-huge);padding-bottom:var(--ui-spacing-huge)}.ui-spinner-content[_ngcontent-%COMP%]{text-align:center;padding:var(--ui-spacing-huge)}.session-count[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;flex:1;height:var(--ui-size-header-height);-webkit-border-start:solid var(--ui-size-border-xs) var(--ui-color-border-neutral);border-inline-start:solid var(--ui-size-border-xs) var(--ui-color-border-neutral);font-weight:var(--ui-typography-weight-bold);padding-left:var(--ui-spacing-sm)}"]}),e})();var Z=i("Gql0");function ee(e,t){if(1&e){const e=b.lc();b.kc(0,"div"),b.kc(1,"course-content",1),b.sc("reloadEvent",function(){return b.Vc(e),b.wc().changeStatus()}),b.jc(),b.jc()}if(2&e){const e=b.wc();b.Mb(1),b.Dc("tabsParams",e.tabsParams)("sessionsEnterData",e.sessionsEnterData)("course",e.course)}}let te=(()=>{class e{constructor(e,t,i,s,n,a,o,r,c){this._backendService=e,this.cache=t,this.route=i,this.ref=s,this.formatter=n,this.translate=a,this.toggleService=o,this.courseService=r,this.iltSessionsCatalogListService=c,this.sessionsEnterData=[],this.refineSessionLabel=(e,t)=>(e.label+='<br /><span             class="text-grey-mid text-small">',e.label+=this.makeReadableDates(t,e),e.label+=" - "+this.formatter.getFormattedTimezone(this.formatter.getContextTimezone()),e.label+=this.makeReadableLocation(e),e.label+="</span>",e)}ngOnInit(){this.initCourseData(),this.langChangeSubscriber=this.translate.onLangChange.pipe(h(1)).subscribe(e=>{this.initCourseData()})}ngOnDestroy(){this.cache.isInitialized()&&this.cache.clear(),this.langChangeSubscriber&&this.langChangeSubscriber.unsubscribe(),this.toggleService.isOn(E.f.TOGGLE_VILT)&&this.iltSessionsCatalogListService.restoreFilterIltSessions()}initCourseData(){this.route.paramMap.subscribe(e=>{this.course_id=e.get("id"),this.course_title=e.get("title"),this.GetCourses(this.course_id)})}GetCourses(e){Object(l.b)(this.courseService.request("details",{courseId:e})).pipe(Object(m.a)(e=>(e&&e.instructors&&e.instructors.length>0&&(e.instructors=Object(l.g)(e.instructors)),e))).subscribe(e=>{if(this.course=e,this.sessionsEnterData=this.course.enter_data.sessions&&this.course.sessions&&this.course.sessions.length?[...this.course.enter_data.sessions.map(this.refineSessionLabel)]:[],this.toggleService.isOn(E.f.TOGGLE_VILT))this.course_sessions={params:{sessions:this.course.sessions,course:this.course},component:X};else if(null==this.course.sessions){let e=new I.b(this.translate,this.ref).transform(I.a.t("standard","This course has no sessions available at this time. Please, check back later."));this.course_sessions=`<div class="tabs-description"> ${e} </div>`}else this.course_sessions={params:{panels:Object(l.d)(this.course.sessions,this.course.type,this.course,this.toggleService.isOn(E.f.TOGGLE_VILT))},component:O.a};this.course.additional_information&&(this.course.additional_information=this.course.additional_information.filter(e=>1===parseInt(e.visible_to_user,10))),this.tabsParams={panels:Object(l.f)(this.course,this.course_sessions),style:""}})}makeReadableLocation(e){const t=this.course.sessions.find(t=>t.id_session===e.value);if(t&&t.locations){const e=t.locations.length;return 1===e?t.locations[0].name?`<br/> ${t.locations[0].name}`:`<br/> ${t.locations[0].address}`:e>0?`<br/> ${new I.b(this.translate,this.ref).transform(I.a.t("standard","Multiple locations"))}`:""}}makeReadableDates(e,t){const i=Object(x.l)(Object(x.j)(),x.a),s=this.course.sessions[e];let n=this.formatter.getContextTimezone();const a=s.dates.length-1,o=this.formatter.convertTimeToUTC(`${s.dates[0].date} ${s.dates[0].start_hour}`,s.dates[0].timezone),r=new D.a(o).formatTimezoned(i,n),c=this.formatter.convertTimeToUTC(`${s.dates[a].date} ${s.dates[a].end_hour}`,s.dates[a].timezone);return`${r} - ${new D.a(c).formatTimezoned(i,n)}`}changeStatus(){this.GetCourses(this.course_id)}}return e.\u0275fac=function(t){return new(t||e)(b.ec(f.a),b.ec(c.b),b.ec(s.a),b.ec(b.i),b.ec(Z.b),b.ec(_.a),b.ec(E.g),b.ec(v.a),b.ec(F.a))},e.\u0275cmp=b.Yb({type:e,selectors:[["ng-component"]],features:[b.Lb([{provide:c.d,useClass:c.c}])],decls:2,vars:1,consts:[[4,"ngIf"],[3,"tabsParams","sessionsEnterData","course","reloadEvent"]],template:function(e,t){1&e&&(b.ed(0,ee,2,3,"div",0),b.fc(1,"router-outlet")),2&e&&b.Dc("ngIf",t.course)},directives:[y.p,s.m,w.a],encapsulation:2}),e})();function ie(e,t){if(1&e){const e=b.lc();b.kc(0,"div"),b.kc(1,"course-content",1),b.sc("reloadEvent",function(){return b.Vc(e),b.wc().changeStatus()}),b.jc(),b.jc()}if(2&e){const e=b.wc();b.Mb(1),b.Dc("tabsParams",e.tabsParams)("sessionsEnterData",e.sessionsEnterData)("course",e.course)}}let se=(()=>{class e{constructor(e,t,i,s,n,a,o){this._backendService=e,this.cache=t,this.route=i,this.ref=s,this.formatter=n,this.translate=a,this.courseService=o,this.sessionsEnterData=[]}ngOnInit(){this.initCourseData(),this.langChangeSubscriber=this.translate.onLangChange.pipe(h(1)).subscribe(e=>{this.initCourseData()})}initCourseData(){this.route.paramMap.subscribe(e=>{this.course_id=e.get("id"),this.course_title=e.get("title"),this.GetCourses(this.course_id)})}GetCourses(e){Object(l.b)(this.courseService.request("details",{courseId:e})).pipe(Object(m.a)(e=>(e&&e.instructors&&e.instructors.length>0&&(e.instructors=Object(l.g)(e.instructors)),e))).subscribe(e=>{if(this.course=e,this.course.enter_data.sessions&&this.course.sessions&&this.course.sessions.length&&(this.course.enter_data.sessions.forEach((e,t)=>{const i=Object(x.l)(Object(x.j)(),x.a),s=this.course.sessions[t],n=new D.a(s.start_date).formatTimezoned(i,Object(x.k)()),a=new D.a(s.end_date).formatTimezoned(i,Object(x.k)());e.label+=`<br />\n                    <span class="text-grey-mid text-small">${n} - ${a}\n                    `;const o=this.course.sessions.find(t=>t.id_session===e.value);o&&o.locations&&(e.label+=1===this.course.sessions[t].locations.length?o.locations[0].name?` | ${o.locations[0].name}`:` | ${o.locations[0].address}`:` | ${new I.b(this.translate,this.ref).transform(I.a.t("standard","Multiple locations"))}`),e.label+="</span>"}),this.sessionsEnterData=[...this.course.enter_data.sessions]),null==this.course.sessions){const e=new I.b(this.translate,this.ref).transform(I.a.t("standard","This course has no sessions available at this time. Please, check back later."));this.course_sessions=`<div class="tabs-description"> ${e} </div>`}else this.course_sessions={params:{panels:Object(l.d)(this.course.sessions,this.course.type,this.course)},component:O.a};this.course.additional_information&&(this.course.additional_information=this.course.additional_information.filter(e=>1===parseInt(e.visible_to_user,10))),this.tabsParams={panels:Object(l.f)(this.course,this.course_sessions),style:""}})}changeStatus(){this.GetCourses(this.course_id)}ngOnDestroy(){this.cache.isInitialized()&&this.cache.clear(),this.langChangeSubscriber&&this.langChangeSubscriber.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(b.ec(f.a),b.ec(c.b),b.ec(s.a),b.ec(b.i),b.ec(Z.b),b.ec(_.a),b.ec(v.a))},e.\u0275cmp=b.Yb({type:e,selectors:[["ng-component"]],features:[b.Lb([{provide:c.d,useClass:c.c}])],decls:2,vars:1,consts:[[4,"ngIf"],[3,"tabsParams","sessionsEnterData","course","reloadEvent"]],template:function(e,t){1&e&&(b.ed(0,ie,2,3,"div",0),b.fc(1,"router-outlet")),2&e&&b.Dc("ngIf",t.course)},directives:[y.p,s.m,w.a],encapsulation:2}),e})();var ne=i("1FWA"),ae=i("8SnQ");const oe=[{path:"view/elearning/:id/:title",component:k,data:{playlistItem:{type:ae.a.COURSE}}},{path:"view/classroom/:id/:title",component:te,data:{playlistItem:{type:ae.a.COURSE}}},{path:"view/webinar/:id/:title",component:se,data:{playlistItem:{type:ae.a.COURSE}}}];var re=i("4Y2v"),ce=i("NCOs"),le=i("PEGs"),de=i("IsFk"),ue=i("GW7C"),he=i("XRhs"),pe=i("A3UQ");const ge=[...oe];let me=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.cc({type:e}),e.\u0275inj=b.bc({providers:[a.a,o.a],imports:[[n.a,r.LearningPlanModule,s.l.forChild(ge),N.Cd]]}),e})();b.Zc(T.a,[y.p,y.o,y.q,y.n],[re.a,I.b]),b.Zc(M.a,[y.n,y.p,ce.a,y.o,le.a],[I.b,y.z,de.a,ue.a,he.a]),b.Zc(j.a,[y.p],[I.b]),b.Zc(ne.a,[y.p,pe.a],[])},QUaw:function(e,t,i){var s=i("Rb7d");t.render=function(e,t,i){var n=i,a=t;void 0!==n||t&&t.getContext||(n=t,t=void 0),t||(a=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),n=s.getOptions(n);var o=s.getImageWidth(e.modules.size,n),r=a.getContext("2d"),c=r.createImageData(o,o);return s.qrToImageData(c.data,e,n),function(e,t,i){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=i,t.width=i,t.style.height=i+"px",t.style.width=i+"px"}(r,a,o),r.putImageData(c,0,0),a},t.renderToDataURL=function(e,i,s){var n=s;return void 0!==n||i&&i.getContext||(n=i,i=void 0),n||(n={}),t.render(e,i,n).toDataURL(n.type||"image/png",(n.rendererOpts||{}).quality)}},Qsg0:function(e,t,i){"use strict";i.d(t,"a",function(){return A});var s=i("3Pt+"),n=i("lJxs"),a=i("gvJE"),o=i("2Jdu"),r=i("de78"),c=i("dRcD"),l=i("L+gB"),d=i("zMZL"),u=i("yUlE"),h=i("3t6O"),p=i("CI6S"),g=i("uNvY"),m=i("TMRp"),b=i("l/Ve"),f=i("IOwI"),_=i("fXoL"),v=i("Y9qQ"),y=i("l7P3"),w=i("iw5W"),C=i("ofXK"),S=i("2YCl"),k=i("ILJs");const T=["paginatedTreeInstance"],I=["rightpanel"];function x(e,t){if(1&e&&(_.kc(0,"div",8),_.gd(1),_.xc(2,"t"),_.jc()),2&e){const e=_.wc();_.Mb(1),_.hd(_.yc(2,1,e.courseDocs))}}function D(e,t){if(1&e&&_.fc(0,"btn-ellipsis",9),2&e){const e=_.wc();_.Dc("orientation",e.ellipsisParamsBL.orientation)("actions",e.ellipsisParamsBL.actions)}}function O(e,t){if(1&e){const e=_.lc();_.kc(0,"div",10),_.kc(1,"rightpanel-component",11,12),_.sc("onClose",function(t){return _.Vc(e),_.wc().onRightPanelClose(t)}),_.jc(),_.jc()}if(2&e){const e=_.wc();_.Mb(1),_.Dc("width",e.rightpanelParams.width)("title",e.rightpanelParams.title)("content",e.rightpanelParams.content)("actions",e.rightpanelParams.actions)}}const E=function(e){return{empty:e}};let A=(()=>{class e{constructor(e,t,i,n,o){this.backendService=e,this.store=t,this.browserDetect=i,this.cdr=n,this.fb=o,this.newCourseExperience=!1,this.linkUrlForm=this.fb.group({inputTitle:["",s.x.required],inputUrl:["",s.x.required]}),this.hasData=!0,this.adminView=!1,this.wizardMode=!1,this.itemsUploadLimit=0,this.userCanUploadFiles=!1,this.canSeeWidgetControls=!1,this.isRegularUserEnrolled=!1,this.uploadedItems=0,this.courseDocs=a.a.t("player","File repository area"),this.attachCourseStoreSubscriber()}get isUserSuperAdmin(){return c.a.getInstance().isCurrentUserA(c.a.LEVEL_SUPERADMIN)}get isUserPowerUser(){return c.a.getInstance().isCurrentUserA(c.a.LEVEL_POWERUSER)}get isUserNormalUser(){return c.a.getInstance().isCurrentUserA(c.a.LEVEL_USER)}get isUserInstructor(){return this.courseData.instructors.filter(e=>Number(e.instructor_id)===c.a.getInstance().id).length>0}get canAdminUploadFiles(){return this.isUserSuperAdmin||this.isUserPowerUser&&this.courseData.can_enter&&this.coursePermissions&&this.coursePermissions.indexOf("course/update")>=0||this.isUserInstructor}get canUserUploadFiles(){return this.isUserNormalUser&&this.courseData.can_enter&&this.itemsUploadLimit>this.uploadedItems}ngOnInit(){this.canSeeWidgetControls=this.canAdminUploadFiles||this.canUserUploadFiles,this.isRegularUserEnrolled=!this.canSeeWidgetControls&&this.courseData.can_enter,this.openRightpanel={type:"normal",properties:{text:"Open right panel"},state:"normal",uploader:()=>{const e=[];this.wizardMode=!0,this.rightpanelParams.actions=[],this.initWizard(),e.push({id:"step1",content:g.a,params:{course_id:this.course_id,user_id:this.user_id}}),this.courseData.type!==h.e.ELEARNING&&e.push({id:"step2",content:b.a,params:{course_id:this.course_id,user_id:this.user_id}}),this.rightpanel.setContent({params:{steps:e,navigationMode:"breadcrumbs",navigationItems:[{title:a.a.t("standard","Upload file")},{title:a.a.t("standard","Set Visibility")}]},component:o.a}),this.rightpanelParams.title=a.a.t("course","_DOCUMENT_UPLOAD"),this.rightpanel.open()},createFolder:()=>{this.rightpanelParams.actions=[{type:"normal",properties:{text:"Create"},handler:e=>(e.componentInstance.create(),new Promise((t,i)=>setTimeout(()=>{t({type:"success",message:"Right Panel confirmed"}),e.close()},2e3)))},{type:"delete",properties:{text:"Cancel"},handler:e=>{e.close()}}],this.rightpanelParams.content={params:{course_id:this.course_id},component:m.a},this.rightpanelParams.title=a.a.t("standard","Create folder"),this.rightpanel.open()},linkUrl:()=>{this.rightpanelParams.actions=[{type:"normal",properties:{text:a.a.t("admin","Save")},handler:e=>this.linkUrlForm.valid?(e.componentInstance.save(),new Promise((t,i)=>setTimeout(()=>{t({type:"success",message:a.a.t("standard","Link URL successfully uploaded")}),e.close(),this.linkUrlForm.reset()},2e3))):new Promise((e,t)=>{e({type:"error",message:a.a.t("standard","Missing title or URL")})})},{type:"delete",properties:{text:a.a.t("standard","Cancel")},handler:e=>{e.close()}}],this.rightpanelParams.content={component:f.a,params:{course_id:this.course_id,user_id:this.user_id,linkUrlFormGroup:this.linkUrlForm}},this.rightpanelParams.title=a.a.t("standard","Link URL"),this.rightpanel.open()}};const e=new P(10,1,3,15,this.backendService,this.course_id,this.user_id,this.current_session_id);e.onFetchData((e=>{this.hasData=!!e.hasOwnProperty("data")&&e.data.count>0}).bind(this)),this.treeParamsBrowse={has_search:!0,selection_mode:"single",mode:"browse",node_actions:[],onClick:{action:e=>this.download(e)},source:e,search_placeholder:a.a.t("admin","Search all folders"),treeType:u.a.files},this.rightpanelParams={width:500,title:"",content:{component:null,params:{}}},this.ellipsisParamsBL={orientation:"bottom-right",actions:[]},this.afterAddingNewItem=l.a.singleton.subscribe("CourseFilesWidgetChanged",e=>{this.updatePermissions(e.data.data.extra_data)})}ngOnDestroy(){this.afterAddingNewItem.unsubscribe(),this.courseSubscription.unsubscribe()}updatePermissions(e){this.uploadedItems=e.uploadedItems,this.itemsUploadLimit=e.uploadItemsLimit,this.userCanUploadFiles=this.canAdminUploadFiles||this.canUserUploadFiles,this.adminView=!("admin"!==this.widget.display_type.toString()&&!this.userCanUploadFiles),this.canAdminUploadFiles?this.ellipsisParamsBL.actions=[{title:a.a.t("standard","Create folder"),action:this.openRightpanel.createFolder},{title:a.a.t("standard","Upload file"),action:this.openRightpanel.uploader},{title:a.a.t("standard","Link URL"),action:this.openRightpanel.linkUrl}]:this.canUserUploadFiles&&(this.ellipsisParamsBL.actions=[{title:a.a.t("standard","Upload file"),action:this.openRightpanel.uploader},{title:a.a.t("standard","Link URL"),action:this.openRightpanel.linkUrl}])}onRightPanelClose(e){"afterClose"===e&&(this.wizardMode&&(this.wizardMode=!1,this.loadRightPanelSubscriber&&this.loadRightPanelSubscriber.unsubscribe(),this.onChangeStepSubscriber&&this.onChangeStepSubscriber.unsubscribe()),this.paginatedTreeInstance.refreshTree(this.paginatedTreeInstance.getSelectedNodesIds()[0].id,!0))}download(e){const t={file_id:e.id,course_id:this.course_id},i=window.open();new Promise((e,s)=>{this.backendService.request("/learn/v1/filerepo/getCourseFile","GET",t).subscribe(t=>{if(t){const s=t.data.Files;10!==s.item_type&&(0===s.item_type?i.location.href=s.path:this.backendService.request("/manage/v1/upload/presigned_url","GET",{filename:s.path,collection:t.data.collection,operation:"read",mime:"noMime"}).subscribe(e=>{if(e){const e=d.a.getInstance();i.location.href=`${window.location.origin}/learn/v1/filerepo/downloadCourseFile?course_id=${this.course_id}&file_id=${s.id_file}&access_token=${e.get("access_token").access_token}`;const t=this;setTimeout(()=>{t.browserDetect.isIE()||t.browserDetect.isMobile()||t.browserDetect.isIPad()||i.close()},3e3)}})),e({type:"success",message:a.a.t("standard","Upload success")})}else e({type:"error",message:a.a.t("standard","Upload failed")})}),this.adminView&&this.rightpanel.close()})}initWizard(){this.loadRightPanelSubscriber=this.rightpanel.onLoad.subscribe(e=>{this.onChangeStepSubscriber=e.onChangeStep.subscribe(t=>{this.rightpanel.setFormControl(e.getWizardForm());const i=[];e.hasNext()&&i.push({type:"normal",properties:{text:a.a.t("standard","Next")},handler:i=>{e.nextStep(),t.next&&t.next()}}),e.hasPrev()&&i.push({type:"normal",properties:{text:a.a.t("standard","Previous"),className:"previous-button"},customClasses:"previous-button",handler:t=>{e.prevStep()}}),e.isLastStep()&&i.push({type:"submit",properties:{text:a.a.t("standard","Confirm")},handler:e=>{let t=[];e.componentInstance.instances.step2&&(t=e.componentInstance.instances.step2.getSelectedSessions());const i=e.componentInstance.instances.step1.getParams(t);return new Promise("missing parameters"===i?(e,t)=>{e({type:"error",message:a.a.t("standard","Missing title or upload file")})}:(e,t)=>{this.backendService.request("/learn/v1/filerepo/uploadNewFile","POST",i).subscribe(t=>{t?(e({type:"success",message:a.a.t("standard","Upload success")}),this.paginatedTreeInstance.refreshTree(this.paginatedTreeInstance.getSelectedNodesIds()[0].id,!0)):e({type:"error",message:a.a.t("standard","Upload failed")})}),this.rightpanel.close()})}}),i.push({type:"cancel",properties:{text:a.a.t("standard","Cancel")},handler:e=>{e.close()}}),this.rightpanel.setActions(i),this.cdr.detectChanges()})})}attachCourseStoreSubscriber(){this.courseSubscription=this.store.select(p.d).subscribe(e=>{e.course_status&&void 0!==e.course_status.permissions&&(this.coursePermissions=e.course_status.permissions)})}}return e.\u0275fac=function(t){return new(t||e)(_.ec(v.a),_.ec(y.e),_.ec(w.a),_.ec(_.i),_.ec(s.d))},e.\u0275cmp=_.Yb({type:e,selectors:[["course-docs"]],viewQuery:function(e,t){if(1&e&&(_.nd(T,1),_.nd(I,1)),2&e){let e;_.Rc(e=_.tc())&&(t.paginatedTreeInstance=e.first),_.Rc(e=_.tc())&&(t.rightpanel=e.first)}},inputs:{current_session_id:"current_session_id",course_id:"course_id",courseData:"courseData",user_id:"user_id",widget:"widget",newCourseExperience:"newCourseExperience"},decls:8,vars:17,consts:[[1,"course-widget","course-docs",3,"ngClass"],[1,"course-docs-header"],["class","course-widget-title",4,"ngIf"],["class","ellipsis",3,"orientation","actions",4,"ngIf"],["class","course-doc-widget-panels",4,"ngIf"],[1,"tree-wrap"],[3,"source","selection_mode","has_search","node_actions","mode","onClick","show_root_label","treeType","search_placeholder"],["paginatedTreeInstance",""],[1,"course-widget-title"],[1,"ellipsis",3,"orientation","actions"],[1,"course-doc-widget-panels"],[3,"width","title","content","actions","onClose"],["rightpanel",""]],template:function(e,t){1&e&&(_.kc(0,"div",0),_.kc(1,"div",1),_.ed(2,x,3,3,"div",2),_.ed(3,D,1,2,"btn-ellipsis",3),_.jc(),_.ed(4,O,3,4,"div",4),_.kc(5,"div",5),_.fc(6,"tree",6,7),_.jc(),_.jc()),2&e&&(_.Wb("widget-new-course-experience",t.newCourseExperience),_.Dc("ngClass",_.Ic(15,E,!t.hasData)),_.Mb(2),_.Dc("ngIf",!t.newCourseExperience),_.Mb(1),_.Dc("ngIf",t.userCanUploadFiles),_.Mb(1),_.Dc("ngIf",t.adminView),_.Mb(2),_.Dc("source",t.treeParamsBrowse.source)("selection_mode",t.treeParamsBrowse.selection_mode)("has_search",t.treeParamsBrowse.has_search)("node_actions",t.treeParamsBrowse.node_actions)("mode",t.treeParamsBrowse.mode)("onClick",t.treeParamsBrowse.onClick)("show_root_label",!1)("treeType",t.treeParamsBrowse.treeType)("search_placeholder",t.treeParamsBrowse.search_placeholder))},directives:[C.n,C.p,u.b,S.a,k.a],pipes:[a.b],encapsulation:2}),e})();class P extends r.b{constructor(e=0,t,i,s,n,a,o,r){super(e,t,i,s,n),this.current_node=e,this.current_page=t,this.page_size=i,this.total=s,this.serviceProvider=n,this.onFetch=null,this.courseId=a,this.userId=o,this.sessionId=r}onFetchData(e){e&&"function"==typeof e&&(this.onFetch=e)}fetchData(e){return this.current_node=e.node_id,this.courseId&&(e.course_id=this.courseId),this.userId&&(e.user_id=this.userId),this.sessionId&&(e.session_id=this.sessionId),this.serviceProvider.request("/learn/v1/filerepo/getCourseFilesTree","GET",e).pipe(Object(n.a)(e=>{for(const t of e.data.items)t.selection_status=0,"laptop"===t.icon&&(t.css_class="unknown"!==t.file_type?`fa-file-${t.file_type}-o`:"fa-file");return l.a.singleton.publish({event_type:"CourseFilesWidgetChanged",sender_id:this.constructor.name,data:{data:e}}),e.extra_data&&(this.current_node=e.extra_data.id||0),null!==this.onFetch&&this.onFetch.apply(this,[e]),e}))}}},R9jb:function(e,t,i){"use strict";i.d(t,"a",function(){return A});var s=i("fXoL"),n=i("ahFQ"),a=i("/76g"),o=i("LRne"),r=i("3E0/"),c=i("IzEk"),l=i("CI6S"),d=i("l7P3"),u=i("nUpK"),h=i("ofXK"),p=i("gvJE");const g=["menuTrigger"],m=["menuWrapper"];function b(e,t){1&e&&s.gc(0)}const f=function(e){return{status:e}},_=function(e){return{hidden:e}};function v(e,t){if(1&e&&(s.ic(0),s.kc(1,"div",9),s.fc(2,"i",10),s.ed(3,b,1,0,"ng-container",11),s.jc(),s.kc(4,"span",12),s.kc(5,"span",13),s.gd(6),s.jc(),s.kc(7,"div",14),s.kc(8,"span",15),s.gd(9),s.xc(10,"t"),s.jc(),s.kc(11,"span",16),s.gd(12),s.jc(),s.jc(),s.jc(),s.kc(13,"span",17),s.fc(14,"ui-icon",18),s.jc(),s.hc()),2&e){const e=s.wc(),t=s.Sc(11);s.Mb(2),s.Dc("ngClass",e.learningObjectType[e.selectedOption.type].icon),s.Mb(1),s.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",s.Ic(10,f,e.selectedOption.status)),s.Mb(3),s.hd(null==e.selectedOption?null:e.selectedOption.name),s.Mb(3),s.hd(s.yc(10,8,e.learningObjectType[e.selectedOption.type].title)),s.Mb(2),s.Dc("ngClass",s.Ic(12,_,!e.selectedOption.duration)),s.Mb(1),s.id("| ",e.selectedOption.duration,""),s.Mb(2),s.Dc("name",e.menuOpen?"caret-up":"caret-down")}}function y(e,t){if(1&e&&(s.fc(0,"i",19),s.kc(1,"span",12),s.kc(2,"span",13),s.gd(3),s.xc(4,"t"),s.jc(),s.jc(),s.kc(5,"span",17),s.fc(6,"ui-icon",18),s.jc()),2&e){const e=s.wc();s.Dc("ngClass",e.defaultOption.icon),s.Mb(3),s.hd(s.yc(4,3,e.defaultOption.label)),s.Mb(3),s.Dc("name",e.menuOpen?"caret-up":"caret-down")}}function w(e,t){1&e&&s.gc(0)}const C=function(e){return{"bolded ui-color-typography-accent":e}};function S(e,t){if(1&e){const e=s.lc();s.kc(0,"dcb-ui-button-dropdown-option",20),s.sc("trigger",function(){s.Vc(e);const i=t.$implicit;return s.wc().select(i)}),s.kc(1,"div",21),s.kc(2,"div",9),s.fc(3,"i",10),s.ed(4,w,1,0,"ng-container",11),s.jc(),s.kc(5,"div",22),s.kc(6,"span",23),s.gd(7),s.jc(),s.kc(8,"div",24),s.kc(9,"span",15),s.gd(10),s.xc(11,"t"),s.jc(),s.kc(12,"span",16),s.gd(13),s.jc(),s.jc(),s.jc(),s.jc(),s.jc()}if(2&e){const e=t.$implicit,i=s.wc(),n=s.Sc(11);s.Mb(3),s.Dc("ngClass",i.learningObjectType[e.type].icon),s.Mb(1),s.Dc("ngTemplateOutlet",n)("ngTemplateOutletContext",s.Ic(10,f,e.status)),s.Mb(2),s.Dc("ngClass",s.Ic(12,C,(null==i.selectedOption?null:i.selectedOption.id)===e.id)),s.Mb(1),s.hd(e.name),s.Mb(3),s.hd(s.yc(11,8,i.learningObjectType[e.type].title)),s.Mb(2),s.Dc("ngClass",s.Ic(14,_,!e.duration)),s.Mb(1),s.id("| ",e.duration,"")}}function k(e,t){1&e&&s.fc(0,"i",30)}function T(e,t){1&e&&s.fc(0,"i",31)}function I(e,t){1&e&&s.fc(0,"i",32)}function x(e,t){1&e&&s.fc(0,"i",32)}function D(e,t){1&e&&s.fc(0,"i",33)}function O(e,t){1&e&&(s.ic(0,25),s.ed(1,k,1,0,"i",26),s.ed(2,T,1,0,"i",27),s.ed(3,I,1,0,"i",28),s.ed(4,x,1,0,"i",28),s.ed(5,D,1,0,"i",29),s.hc()),2&e&&(s.Dc("ngSwitch",t.status),s.Mb(1),s.Dc("ngSwitchCase","locked"),s.Mb(1),s.Dc("ngSwitchCase","failed"),s.Mb(1),s.Dc("ngSwitchCase","in_progress"),s.Mb(1),s.Dc("ngSwitchCase","incomplete"),s.Mb(1),s.Dc("ngSwitchCase","completed"))}const E=function(e){return{opened:e}};let A=(()=>{class e{constructor(e,t,i){this._store=e,this._element=t,this._ref=i,this.linkToLO=new s.q,this.defaultOption={icon:"zmdi zmdi-link",label:a.a.t("standard","Link your question to course content")},this.menuOpen=!1,this.menuTopPosition=0,this.menuBottomPosition=0,this.learningObjectType=n.d}clickOutside(e){var t,i;(null===(i=null===(t=this._element)||void 0===t?void 0:t.nativeElement)||void 0===i?void 0:i.contains(null==e?void 0:e.target))||(this.menuOpen=!1)}ngOnInit(){this.selectOptions=this._store.select(l.b)}select(e){this.selectedOption=e,this.linkToLO.emit(e),this.menuOpen=!1}toggleMenu(){this.menuOpen=!this.menuOpen,this._ref.detectChanges(),this.menuOpen&&Object(o.a)({}).pipe(Object(r.a)(10),Object(c.a)(1)).subscribe(()=>this._setMenuPosition())}_setMenuPosition(){const e=this.menuTrigger.nativeElement.getBoundingClientRect().height,t=this.menuWrapper.nativeElement.getBoundingClientRect().height;document.body.scrollHeight-document.body.scrollTop+t<=document.body.clientHeight?(this.menuTopPosition=null,this.menuBottomPosition=e):(this.menuTopPosition=e,this.menuBottomPosition=null),this._ref.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(s.ec(d.e),s.ec(s.o),s.ec(s.i))},e.\u0275cmp=s.Yb({type:e,selectors:[["lrn-course-question-widget-lo-picker"]],viewQuery:function(e,t){if(1&e&&(s.nd(g,1,s.o),s.nd(m,1,s.o)),2&e){let e;s.Rc(e=s.tc())&&(t.menuTrigger=e.first),s.Rc(e=s.tc())&&(t.menuWrapper=e.first)}},hostBindings:function(e,t){1&e&&s.sc("click",function(e){return t.clickOutside(e)},!1,s.Tc)},outputs:{linkToLO:"linkToLO"},decls:12,vars:14,consts:[[3,"fullWidth","uppercase","trigger"],["menuTrigger",""],[1,"cqw-button-content"],[4,"ngIf","ngIfElse"],["defaultOptionTempl",""],["role","menu",1,"cqw-custom-select-menu","bg-white","ui-button-dropdown-menu","ui-shadow-md",3,"ngClass"],["menuWrapper",""],["class","ui-button-dropdown-option-content ui-color-typography-primary",3,"trigger",4,"ngFor","ngForOf"],["courseStatus",""],[1,"cqw-custom-select-icon"],[1,"course-type-icon","menu-option-icon",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cqw-lo-selected"],[1,"cqw-selected-name","ui-color-typography-accent"],[1,"cqw-selected-sub-label","text-grey-mid"],[1,"lo-type-title"],[3,"ngClass"],[1,"caret-icon"],["size","sm",3,"name"],[1,"selected-option-icon","course-type-icon",3,"ngClass"],[1,"ui-button-dropdown-option-content","ui-color-typography-primary",3,"trigger"],[1,"cqw-custom-select-option"],[1,"cqw-custom-option-info"],[1,"cqw-custom-option-info-label",3,"ngClass"],[1,"cqw-custom-option-info-sub-label","text-grey-mid"],[3,"ngSwitch"],["class","icon-status zmdi zmdi-lock",4,"ngSwitchCase"],["class","icon-status text-error zmdi zmdi-close-circle",4,"ngSwitchCase"],["class","icon-status text-warning zmdi zmdi-check-circle",4,"ngSwitchCase"],["class","icon-status text-positive-green zmdi zmdi-check-circle",4,"ngSwitchCase"],[1,"icon-status","zmdi","zmdi-lock"],[1,"icon-status","text-error","zmdi","zmdi-close-circle"],[1,"icon-status","text-warning","zmdi","zmdi-check-circle"],[1,"icon-status","text-positive-green","zmdi","zmdi-check-circle"]],template:function(e,t){if(1&e&&(s.kc(0,"dcb-ui-button-text",0,1),s.sc("trigger",function(){return t.toggleMenu()}),s.kc(2,"div",2),s.ed(3,v,15,14,"ng-container",3),s.ed(4,y,7,5,"ng-template",null,4,s.fd),s.jc(),s.jc(),s.kc(6,"div",5,6),s.ed(8,S,14,16,"dcb-ui-button-dropdown-option",7),s.xc(9,"async"),s.jc(),s.ed(10,O,6,6,"ng-template",null,8,s.fd)),2&e){const e=s.Sc(5);s.Dc("fullWidth",!0)("uppercase",!1),s.Mb(3),s.Dc("ngIf",!!t.selectedOption)("ngIfElse",e),s.Mb(3),s.dd("top",t.menuTopPosition,"px")("bottom",t.menuBottomPosition,"px"),s.Dc("ngClass",s.Ic(12,E,t.menuOpen)),s.Mb(2),s.Dc("ngForOf",s.yc(9,10,t.selectOptions))}},directives:[u.U,h.p,h.n,h.o,h.u,u.lc,u.H,h.r,h.s],pipes:[h.b,p.b],styles:["lrn-course-question-widget-lo-picker{position:relative;display:block;z-index:calc(var(--ui-zindex-sticky) + 1);border-top:solid var(--ui-size-border-xs) var(--ui-color-border-baseline);border-bottom:solid var(--ui-size-border-xs) var(--ui-color-border-baseline)}lrn-course-question-widget-lo-picker dcb-ui-button-dropdown-option{box-sizing:border-box}lrn-course-question-widget-lo-picker dcb-ui-button-text{cursor:pointer;box-sizing:border-box}lrn-course-question-widget-lo-picker dcb-ui-button-text button{display:block;justify-content:flex-start}lrn-course-question-widget-lo-picker .cqw-button-content{display:flex;flex-grow:1;flex-basis:100%;align-items:center;justify-content:space-between}lrn-course-question-widget-lo-picker .cqw-button-content .cqw-lo-selected{display:flex;flex-direction:column;flex-grow:1;text-align:initial}lrn-course-question-widget-lo-picker .cqw-button-content .lo-type-title{font-weight:var(--ui-typography-weight-regular)}lrn-course-question-widget-lo-picker .caret-icon,lrn-course-question-widget-lo-picker .selected-option-icon{padding:var(--ui-spacing-md)}lrn-course-question-widget-lo-picker .cqw-custom-select-icon{position:relative;margin:var(--ui-spacing-xs) var(--ui-spacing-md)}lrn-course-question-widget-lo-picker .cqw-custom-select-icon .menu-option-icon{color:var(--ui-color-button-label-neutral)}lrn-course-question-widget-lo-picker .cqw-custom-select-icon .course-type-icon{font-size:var(--ui-typography-size-xl)}lrn-course-question-widget-lo-picker .cqw-custom-select-icon .icon-status{position:absolute;top:calc(var(--ui-spacing-xs) * -1);right:calc(var(--ui-spacing-xs) * -1)}lrn-course-question-widget-lo-picker .cqw-custom-select-option{display:flex;align-items:center}lrn-course-question-widget-lo-picker .cqw-custom-select-menu{flex-wrap:nowrap;position:absolute;width:100%;max-height:210px;overflow-y:auto;overflow-x:hidden;z-index:var(--ui-zindex-sticky);background-color:var(--ui-color-layout-surface);opacity:0;pointer-events:none;transform:scale(0);transition:opacity var(--ui-motion-duration-short) var(--ui-motion-easing-default),transform var(--ui-motion-duration-short) var(--ui-motion-easing-entering)}lrn-course-question-widget-lo-picker .cqw-custom-select-menu.opened{transition:opacity var(--ui-motion-duration-short) var(--ui-motion-easing-default),transform var(--ui-motion-duration-short) var(--ui-motion-easing-leaving);opacity:1;transform:scale(1);pointer-events:auto}"],encapsulation:2}),e})()},RYym:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("fXoL");let n=(()=>{class e{initMyCalendar(t){return{type:e.INIT,payload:{view:t.view,viewDate:t.viewDate,startDate:t.startDate,endDate:t.endDate,filters:t.filters}}}updateMyCalendar(t){return{type:e.UPDATE,payload:{view:t.view,viewDate:t.viewDate,startDate:t.startDate,endDate:t.endDate,filters:t.filters}}}loadEventsSucces(t,i,s,n){return{type:e.LOAD_EVENTS_SUCCESS,payload:{status:"ready",events:t,updateParams:i,export:s,filters:i.filters,appliedFilters:n}}}loadEventsReject(t){return{type:e.LOAD_EVENTS_REJECT,payload:{status:"error",errorMsg:t}}}initEventsInYear(t){return{type:e.LOAD_EVENTS_IN_YEAR,payload:{updateParams:t.updateParams}}}loadEventsInYearSucces(t){return{type:e.LOAD_EVENTS_IN_YEAR_SUCCESS,payload:{monthHasEvents:t}}}loadEventsInYearReject(t){return{type:e.LOAD_EVENTS_IN_YEAR_REJECT,payload:{status:"error",errorMsg:t}}}}return e.INIT="[MyCalendar] Init My Calendar",e.UPDATE="[MyCalendar] Update My Calendar",e.LOAD_EVENTS_SUCCESS="[MyCalendar] Load My Calendar events data",e.LOAD_EVENTS_REJECT="[MyCalendar] Failed loading My Calendar events data",e.LOAD_EVENTS_IN_YEAR="[MyCalendar] Init My Calendar events in year",e.LOAD_EVENTS_IN_YEAR_SUCCESS="[MyCalendar] Load My Calendar events in year data",e.LOAD_EVENTS_IN_YEAR_REJECT="[MyCalendar] Failed loading My Calendar events in year data",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.ac({token:e,factory:e.\u0275fac}),e})()},Rb7d:function(e,t){function i(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");var t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");var i=parseInt(t.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:255&i,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});var t=e.width&&e.width>=21?e.width:void 0;return{width:t,scale:t?4:e.scale||4,margin:null==e.margin||e.margin<0?4:e.margin,color:{dark:i(e.color.dark||"#000000ff"),light:i(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,i){var s=t.getScale(e,i);return Math.floor((e+2*i.margin)*s)},t.qrToImageData=function(e,i,s){for(var n=i.modules.size,a=i.modules.data,o=t.getScale(n,s),r=Math.floor((n+2*s.margin)*o),c=s.margin*o,l=[s.color.light,s.color.dark],d=0;d<r;d++)for(var u=0;u<r;u++){var h=4*(d*r+u),p=s.color.light;d>=c&&u>=c&&d<r-c&&u<r-c&&(p=l[a[Math.floor((d-c)/o)*n+Math.floor((u-c)/o)]?1:0]),e[h++]=p.r,e[h++]=p.g,e[h++]=p.b,e[h]=p.a}}},ReIE:function(e,t,i){"use strict";var s=i("wunY");i.d(t,"b",function(){return s.a});var n=i("pMVF");i.d(t,"g",function(){return n.a});var a=i("3pRn");i.d(t,"f",function(){return a.a});var o=i("kyyD");i.d(t,"a",function(){return o.a});var r=i("3/UW");i.d(t,"e",function(){return r.a});var c=i("mEp4");i.d(t,"c",function(){return c.a});var l=i("RYym");i.d(t,"d",function(){return l.a})},SlIW:function(e,t,i){"use strict";i.d(t,"a",function(){return y});var s=i("dRcD"),n=i("gvJE"),a=i("3Pt+"),o=i("L+gB"),r=i("a4yA"),c=i("fXoL"),l=i("Y9qQ"),d=i("ofXK"),u=i("3zhW"),h=i("rnoZ"),p=i("PEGs"),g=i("4VH+");const m=function(){return{category:"app7020"}};function b(e,t){1&e&&(c.kc(0,"div",14),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.hd(c.zc(2,1,"Comments",c.Hc(4,m))))}function f(e,t){if(1&e&&(c.kc(0,"div",15),c.fc(1,"coachTile",16),c.jc()),2&e){const e=t.$implicit,i=c.wc();c.Mb(1),c.Dc("data",e)("open_mode",1)("actionMethods",i.coachTileActionMethods)}}function _(e,t){if(1&e){const e=c.lc();c.kc(0,"span",17),c.sc("click",function(){return c.Vc(e),c.wc().loadMoreDiscussions()}),c.gd(1),c.xc(2,"t"),c.jc()}2&e&&(c.Mb(1),c.hd(c.yc(2,1,"Load More")))}const v=function(e){return{"loading-process":e}};let y=(()=>{class e{constructor(e){this._backendService=e,this.newCourseExperience=!1,this._discussionsPageSize=1,this._messagesPerDiscussionPageSize=10,this._discussions=[],this._loadMoreDiscussions=!0,this._textAreaControl=new a.e("",[a.x.minLength(3)]),this._textAreaLoading=!1,this._avatarOptions={size:40,properties:{bg_color_class:"bg-main",text_color_class:"text-white",icon_class:"zmdi zmdi-account"}},this._textAreaAction={type:"normal",text:n.a.t("standard","Comment"),state:"normal",onClick:()=>{this._textAreaControl.value.length&&this._textAreaControl.valid&&(this._textAreaAction.state="disabled",this._textAreaLoading=!0,this._backendService.request(`/learn/v1/courses/${this.course_id}/comments/thread`,"PUT",{course_id:this.course_id,forum_id:this.forum_id,text:this._textAreaControl.value}).subscribe(e=>{e.data.messageSave||this._discussions.unshift(e.data)},null,()=>{this._textAreaAction.state="normal",this._textAreaLoading=!1,this._textAreaControl.reset("")}))}},this.richTextareaPreset=r.c,this.coachTileActionMethods={like:e=>(console.log("CommentsWidgetComponent.observables.like"),this._backendService.request(`/learn/v1/courses/${this.course_id}/comments/thread/message/${e}/like`,"PUT")),dislike:e=>(console.log("CommentsWidgetComponent.observables.dislike"),this._backendService.request(`/learn/v1/courses/${this.course_id}/comments/thread/message/${e}/dislike`,"PUT")),updateItem:(e,t,i)=>(console.log("CommentsWidgetComponent.observables.updateItem"),this._backendService.request(`/learn/v1/courses/${this.course_id}/comments/thread/${e}`,"PUT",{title:t})),updateSubItem:(e,t,i)=>(console.log("CommentsWidgetComponent.observables.updateSubItem"),this._backendService.request(`/learn/v1/courses/${this.course_id}/comments/thread/${e}/message`,"PUT",{content:t})),fetchSubItems:(e,t,i)=>this._backendService.request(this._apiRequestUrl,"GET",{user_id:this.user_id,forum_id:this.forum_id,thread_id:e,messages_offset:this._messagesPerDiscussionPageSize*(i-1),messages_limit:t})},this._sessionUser=s.a.getInstance()}ngOnInit(){this._apiRequestUrl=`/learn/v1/courses/${this.course_id}/comments`,this._deteleThreadOrCommentSubscribtion=o.a.singleton.subscribe("coachTileDelete",e=>{this.indexOfDiscussion(e.data.id)>=0&&this._backendService.request(`/learn/v1/courses/${this.course_id}/comments/thread/${e.data.id}`,"DELETE").subscribe(e=>{"success"===e.data.deleteDiscussion&&e.data.idThread&&this._discussions.splice(this.indexOfDiscussion(e.data.idThread),1)})},"coach-tile"),this.fetchData({user_id:this.user_id,forum_id:this.forum_id,discussions_offset:this._discussions.length,discussions_limit:this._discussionsPageSize,messages_offset:0,messages_limit:this._messagesPerDiscussionPageSize})}loadMoreDiscussions(){this._fetchDataSubscribtion=this._backendService.request(this._apiRequestUrl,"GET",{user_id:this.user_id,forum_id:this.forum_id,discussions_offset:this._discussions.length+this._discussionsPageSize-1,discussions_limit:this._discussionsPageSize,messages_offset:0,messages_limit:this._messagesPerDiscussionPageSize}).subscribe(t=>{e.isAllItemsLoaded(this._discussions.length,this._discussionsPageSize,t.data.discussions_count)&&(this._loadMoreDiscussions=!1),t.data.items.forEach((e,t)=>{this._discussions.push(e)})})}fetchData(t){this._fetchDataSubscribtion=this._backendService.request(this._apiRequestUrl,"GET",t).subscribe(t=>{e.isAllItemsLoaded(this._discussions.length,this._discussionsPageSize,t.data.discussions_count)&&(this._loadMoreDiscussions=!1),this._discussions=t.data.items})}ngOnDestroy(){this._fetchDataSubscribtion&&this._fetchDataSubscribtion.unsubscribe(),this._deteleThreadOrCommentSubscribtion&&this._deteleThreadOrCommentSubscribtion.unsubscribe()}static isAllItemsLoaded(e,t,i){return e+t>=i}indexOfDiscussion(e){let t=-1;return this._discussions.forEach((i,s)=>{i.id==e&&(t=s)}),t}}return e.\u0275fac=function(t){return new(t||e)(c.ec(l.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["comments"]],inputs:{user_id:"user_id",course_id:"course_id",forum_id:"forum_id",widget:"widget",newCourseExperience:"newCourseExperience"},decls:14,vars:18,consts:[[1,"course-widget","comments"],["class","course-widget-title",4,"ngIf"],[1,"enter-discussion-wrapper","bg-white",3,"ngClass"],[1,"container","clearfix"],[1,"form-section","clearfix"],[1,"avatar-wrapper"],[3,"initials","image_url","size","properties"],[1,"content-wrapper"],[3,"preset","inputFormControl"],[1,"submit-wrapper"],[3,"type","text","state","click"],[1,"discussions-wrapper"],["class","discussion",4,"ngFor","ngForOf"],["class","load-more text-main",3,"click",4,"ngIf"],[1,"course-widget-title"],[1,"discussion"],[3,"data","open_mode","actionMethods"],[1,"load-more","text-main",3,"click"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.ed(1,b,3,5,"div",1),c.kc(2,"div",2),c.kc(3,"div",3),c.kc(4,"div",4),c.kc(5,"div",5),c.fc(6,"avatar",6),c.jc(),c.kc(7,"div",7),c.fc(8,"rich-textarea",8),c.kc(9,"div",9),c.fc(10,"basic-button",10),c.jc(),c.jc(),c.jc(),c.jc(),c.jc(),c.kc(11,"div",11),c.ed(12,f,2,3,"div",12),c.ed(13,_,3,3,"span",13),c.jc(),c.jc()),2&e&&(c.Wb("widget-new-course-experience",t.newCourseExperience),c.Mb(1),c.Dc("ngIf",!t.newCourseExperience),c.Mb(1),c.Dc("ngClass",c.Ic(16,v,t._textAreaLoading)),c.Mb(4),c.Dc("initials",t._sessionUser.user_initials)("image_url",t._sessionUser.avatar_url)("size",t._avatarOptions.size)("properties",t._avatarOptions.properties),c.Mb(2),c.Dc("preset",t.richTextareaPreset.BASE)("inputFormControl",t._textAreaControl),c.Mb(2),c.Dc("type",t._textAreaAction.type)("text",t._textAreaAction.text)("state",t._textAreaAction.state)("click",t._textAreaAction.onClick),c.Mb(2),c.Dc("ngForOf",t._discussions),c.Mb(1),c.Dc("ngIf",t._loadMoreDiscussions))},directives:[d.p,d.n,u.a,h.a,p.a,d.o,g.a],pipes:[n.b],encapsulation:2}),e})()},TMRp:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var s=i("gvJE"),n=i("3Pt+"),a=i("fXoL"),o=i("Y9qQ"),r=i("Jc1x"),c=i("+H5O");const l=["folderList"];let d=(()=>{class e{constructor(e,t,i){this._backendService=e,this.fb=t,this.changeDetector=i,this.folderName=null,this.folderForm=t.group({folderName:["",n.x.required]})}submitForm(){}ngOnInit(){this.fileInfo={type:"text",id:"folder_name",label:s.a.t("storage","_ORGFOLDERNAME"),floating_label:!0}}getFolderName(e){this.folderName=e}create(){if(this.folderName&&this.folderName.length>0){let e={file_name:this.folderName,course_id:this.course_id,parent_id:this.folderList.getFirstId()};this._backendService.request("/learn/v1/filerepo/createNewFolder","POST",e).subscribe(e=>{try{console.log("OK Create File"),console.log(e),this.changeDetector.detectChanges()}catch(t){console.log("CREATE FILE! invalid app/version combination OR the returned JSON is invalid"),this.changeDetector.detectChanges()}})}else this.changeDetector.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(a.ec(o.a),a.ec(n.d),a.ec(a.i))},e.\u0275cmp=a.Yb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&a.nd(l,3),2&e){let e;a.Rc(e=a.tc())&&(t.folderList=e.first)}},inputs:{course_id:"course_id"},decls:5,vars:7,consts:[[1,"create-folder-text-field"],[3,"formGroup","ngSubmit"],[3,"id","type","label","floating_label","inputFormControl","onChange"],[3,"course_id"],["folderList",""]],template:function(e,t){1&e&&(a.kc(0,"div",0),a.kc(1,"form",1),a.sc("ngSubmit",function(){return t.submitForm()}),a.kc(2,"textfield",2),a.sc("onChange",function(e){return t.getFolderName(e)}),a.jc(),a.jc(),a.jc(),a.fc(3,"folder-list",3,4)),2&e&&(a.Mb(1),a.Dc("formGroup",t.folderForm),a.Mb(1),a.Dc("id",t.fileInfo.id)("type",t.fileInfo.type)("label",t.fileInfo.label)("floating_label",t.fileInfo.floating_label)("inputFormControl",t.folderForm.controls.folderName),a.Mb(1),a.Dc("course_id",t.course_id))},directives:[n.y,n.p,n.i,r.a,c.a],encapsulation:2}),e})()},UIvz:function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return l});var s=i("3t6O"),n=i("pMVF"),a=i("LvDl"),o=i.n(a);class r{static format(e,t){var i=[];let n=0;if(void 0!==t){for(let e in t.pages){let a=t.pages[e],r=[];for(let e in a){let t=a[e];t.type!=s.q.TITLE&&n++;let i=t.title;"title"!==t.type&&(i='<div class="numbering">'+n+') </div> <div class="title">'+t.title+"</div> "),r.push({id_question:t.id_question,title:i,score:0,mode:s.p.ANSWER,type:t.type,is_mandatory:t.is_mandatory,form_control:Object,time_limit:0,time_consumed:0,additional_info:t.additional_info,user_status:t.user_status,feedback:{}})}let c={index:Number(e)+1,questions:r,hasPrev:!o.a.isEmpty(t.pages[Number(e)-1]),hasNext:!o.a.isEmpty(t.pages[Number(e)+1])};i.push(c)}return Object.assign({},c,{pages:i})}}static applyUserAnswers(e,t){let i=[],n=[];for(let a in e.pages[e.curPage].questions){let i=e.pages[e.curPage].questions[a],o={};switch(i.type){case s.q.INLINE_CHOICE:case s.q.CHOICE:o.id_answer=t[i.id_question].user_status.answer;break;case s.q.EXTENDED_TEXT:o.text=t[i.id_question].user_status.answer;break;case s.q.CHOICE_MULTIPLE:{let e=[];for(let s in t[i.id_question].user_status.answers)t[i.id_question].user_status.answers[s]&&e.push(parseInt(s,10));o.id_answers=e}break;case s.q.LIKERT_SCALE:{let e={};for(let s in t[i.id_question].user_status.answers)t[i.id_question].user_status.answers[s]&&(e[s]=t[i.id_question].user_status.answers[s]);o.answers=e}}n.push(Object.assign({},i,{user_status:o}))}return i=e.pages.filter(t=>Number(t.index-1)!=e.curPage),i.push(Object.assign({},e.pages[e.curPage],{questions:n})),o.a.sortBy(i,"index")}static formatUserEntry(e){let t={};for(let i in e)if("object"==typeof e[i]){let s={user_status:{answers:{}}};for(let t in e[i])s.user_status.answers[t]=e[i][t];t[i]=s}else t[i]={user_status:{answer:e[i]}};return t}}const c={curPage:0,status:s.x.TO_BE_STARTED,pages:[]};function l(e=c,t){switch(t.type){case n.a.LOAD_LAUNCH_PARAMS:return r.format(e,t.payload);case n.a.BEGIN_SURVEY:return Object.assign({},e,{status:s.x.STARTED});case n.a.LEAVE_SURVEY:return Object.assign({},e,{status:s.x.TO_BE_STARTED});case n.a.GOTO_PAGE:{if(!t.payload.is_dirty)return Object.assign({},e,{curPage:t.payload.id});let i=r.applyUserAnswers(e,t.payload.user_answers);return Object.assign({},e,{curPage:t.payload.id,pages:i})}case n.a.SURVEY_TRACK_COMPLETED:return t.payload.data&&t.payload.data.acknowledge.is_completed?Object.assign({},e,{status:s.x.SUBMITTED}):e;default:return e}}},Up5I:function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i.d(t,"b",function(){return n});var s=function(e){return e[e.COURSES_AND_LEARNING_PLANS=1]="COURSES_AND_LEARNING_PLANS",e[e.COURSES_CONTENT=2]="COURSES_CONTENT",e[e.COURSES_CATALOG=3]="COURSES_CATALOG",e[e.KNOWLEDGE_ASSETS=4]="KNOWLEDGE_ASSETS",e[e.QUESTIONS_AND_ANSWERS=5]="QUESTIONS_AND_ANSWERS",e[e.ALL_RESULTS=6]="ALL_RESULTS",e}({}),n=function(e){return e[e.TILE="tile"]="TILE",e[e.COACH="coach"]="COACH",e[e.ALL_RESULTS="all-results"]="ALL_RESULTS",e}({})},V35J:function(e,t,i){var s=i("Wogr");function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new s(e*e),this.data.fill(0),this.reservedBit=new s(e*e),this.reservedBit.fill(0)}n.prototype.set=function(e,t,i,s){var n=e*this.size+t;this.data[n]=i,s&&(this.reservedBit[n]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,i){this.data[e*this.size+t]^=i},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=n},Wogr:function(e,t,i){"use strict";var s=i("49sm"),n=(a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}())?2147483647:1073741823;function a(e,t,i){return a.TYPED_ARRAY_SUPPORT||this instanceof a?"number"==typeof e?c(this,e):function(e,t,i,s){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,i,s){if(i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(s||0))throw new RangeError("'length' is out of bounds");var n;return n=void 0===i&&void 0===s?new Uint8Array(t):void 0===s?new Uint8Array(t,i):new Uint8Array(t,i,s),a.TYPED_ARRAY_SUPPORT?n.__proto__=a.prototype:n=l(e,n),n}(e,t,i,s):"string"==typeof t?function(e,t){var i=0|u(t),s=r(e,i),n=s.write(t);return n!==i&&(s=s.slice(0,n)),s}(e,t):function(e,t){if(a.isBuffer(t)){var i=0|o(t.length),s=r(e,i);return 0===s.length||t.copy(s,0,0,i),s}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?r(e,0):l(e,t);if("Buffer"===t.type&&Array.isArray(t.data))return l(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}(this,e,t,i):new a(e,t,i)}function o(e){if(e>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function r(e,t){var i;return a.TYPED_ARRAY_SUPPORT?(i=new Uint8Array(t)).__proto__=a.prototype:(null===(i=e)&&(i=new a(t)),i.length=t),i}function c(e,t){var i=r(e,t<0?0:0|o(t));if(!a.TYPED_ARRAY_SUPPORT)for(var s=0;s<t;++s)i[s]=0;return i}function l(e,t){for(var i=t.length<0?0:0|o(t.length),s=r(e,i),n=0;n<i;n+=1)s[n]=255&t[n];return s}function d(e,t){var i;t=t||1/0;for(var s=e.length,n=null,a=[],o=0;o<s;++o){if((i=e.charCodeAt(o))>55295&&i<57344){if(!n){if(i>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===s){(t-=3)>-1&&a.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&a.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function u(e){return a.isBuffer(e)?e.length:"undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)?e.byteLength:("string"!=typeof e&&(e=""+e),0===e.length?0:d(e).length)}a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),a.prototype.write=function(e,t,i){void 0===t||void 0===i&&"string"==typeof t?(i=this.length,t=0):isFinite(t)&&(t|=0,isFinite(i)?i|=0:i=void 0);var s=this.length-t;if((void 0===i||i>s)&&(i=s),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");return function(e,t,i,s){return function(e,t,i,s){for(var n=0;n<s&&!(n+i>=t.length||n>=e.length);++n)t[n+i]=e[n];return n}(d(t,e.length-i),e,i,s)}(this,e,t,i)},a.prototype.slice=function(e,t){var i,s=this.length;if((e=~~e)<0?(e+=s)<0&&(e=0):e>s&&(e=s),(t=void 0===t?s:~~t)<0?(t+=s)<0&&(t=0):t>s&&(t=s),t<e&&(t=e),a.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=a.prototype;else{var n=t-e;i=new a(n,void 0);for(var o=0;o<n;++o)i[o]=this[o+e]}return i},a.prototype.copy=function(e,t,i,s){if(i||(i=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<i&&(s=i),s===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-i&&(s=e.length-t+i);var n,o=s-i;if(this===e&&i<t&&t<s)for(n=o-1;n>=0;--n)e[n+t]=this[n+i];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)e[n+t]=this[n+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+o),t);return o},a.prototype.fill=function(e,t,i){if("string"==typeof e){if("string"==typeof t?(t=0,i=this.length):"string"==typeof i&&(i=this.length),1===e.length){var s=e.charCodeAt(0);s<256&&(e=s)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var n;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(n=t;n<i;++n)this[n]=e;else{var o=a.isBuffer(e)?e:new a(e),r=o.length;for(n=0;n<i-t;++n)this[n+t]=o[n%r]}return this},a.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return r(null,0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=c(null,t),o=0;for(i=0;i<e.length;++i){var l=e[i];if(!a.isBuffer(l))throw new TypeError('"list" argument must be an Array of Buffers');l.copy(n,o),o+=l.length}return n},a.byteLength=u,a.prototype._isBuffer=!0,a.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.exports=a},YXR0:function(e,t,i){"use strict";i.d(t,"a",function(){return _e});var s=i("Lbmx"),n=i("lfsz"),a=i("A+3w"),o=i("gvJE"),r=i("7vd5"),c=i("yRWM"),l=i("o6wD"),d=i("jt8V"),u=i("BPI6"),h=i("raRA"),p=i("6fYS"),g=i("LvDl"),m=i.n(g),b=i("2Vo4"),f=i("XNiG"),_=i("LRne"),v=i("vkgz"),y=i("1G5W"),w=i("D7St"),C=i("NKMr"),S=i("fXoL"),k=i("L+kn"),T=i("tyNb"),I=i("+sIT"),x=i("ofXK"),D=i("lNbR"),O=i("sk0d"),E=i("alYl"),A=i("XEWJ"),P=i("mZNx"),M=i("OFqD"),L=i("vQfe"),j=i("Vqln"),R=i("g9In"),F=i("3D7D"),N=i("nUpK"),U=i("QXP6"),z=i("S2Qf");let q=(()=>{class e{constructor(e){this.translationService=e}transform(e){if(null===e)return"";const t=(e,t)=>this.translationService.instant("{count} {type}",{category:"standard",count:t,type:e});let i=[];return e.onsite>0&&i.push(t("Onsite",e.onsite)),e.online>0&&i.push(t("Online",e.online)),e.flexible>0&&i.push(t("Flexible",e.flexible)),i.join("\n")}}return e.\u0275fac=function(t){return new(t||e)(S.ec(z.h))},e.\u0275pipe=S.dc({name:"iltInstructorSessionsListEventTooltip",type:e,pure:!0}),e})();const V=["multiselect"],B=["dataTable"];function G(e,t){1&e&&(S.gd(0),S.xc(1,"t")),2&e&&S.id(" ",S.yc(1,1,"Name")," ")}function H(e,t){if(1&e){const e=S.lc();S.kc(0,"hyd-ellipsable-text"),S.kc(1,"a",23),S.sc("click",function(){S.Vc(e);const i=t.item;return S.wc(2).navigateToSessionDetailPage(i.id)}),S.gd(2),S.jc(),S.jc()}if(2&e){const e=t.item;S.Mb(2),S.hd(e.name)}}const $=function(){return{category:"report"}};function Y(e,t){1&e&&(S.gd(0),S.xc(1,"t")),2&e&&S.id(" ",S.zc(1,1,"Start date",S.Hc(4,$))," ")}function W(e,t){if(1&e&&(S.kc(0,"hyd-ellipsable-text"),S.gd(1),S.xc(2,"dcbDateTime"),S.jc()),2&e){const e=S.wc().item,t=S.wc(2);S.Mb(1),S.id(" ",S.Ac(2,1,e.date_start,t.timezone,t.format)," ")}}function Q(e,t){1&e&&S.ed(0,W,3,5,"hyd-ellipsable-text",0),2&e&&S.Dc("ngIf",t.item.date_start.length>0)}function K(e,t){1&e&&(S.gd(0),S.xc(1,"t")),2&e&&S.id(" ",S.zc(1,1,"End date",S.Hc(4,$))," ")}function J(e,t){if(1&e&&(S.kc(0,"hyd-ellipsable-text"),S.gd(1),S.xc(2,"dcbDateTime"),S.jc()),2&e){const e=S.wc().item,t=S.wc(2);S.Mb(1),S.id(" ",S.Ac(2,1,e.date_end,t.timezone,t.format)," ")}}function X(e,t){1&e&&S.ed(0,J,3,5,"hyd-ellipsable-text",0),2&e&&S.Dc("ngIf",t.item.date_end.length>0)}const Z=function(){return{category:"classroom"}};function ee(e,t){1&e&&(S.gd(0),S.xc(1,"t")),2&e&&S.id(" ",S.zc(1,1,"Location",S.Hc(4,Z))," ")}function te(e,t){1&e&&(S.kc(0,"hyd-ellipsable-text"),S.gd(1),S.xc(2,"t"),S.jc()),2&e&&(S.Mb(1),S.id(" ",S.yc(2,1,"Multiple Locations"),""))}function ie(e,t){if(1&e&&(S.kc(0,"hyd-ellipsable-text"),S.fc(1,"span",24),S.xc(2,"stripTags"),S.jc()),2&e){const e=S.wc().item;S.Mb(1),S.Dc("innerHTML",S.yc(2,1,e.location.name+" "+e.location.address),S.Wc)}}function se(e,t){if(1&e&&(S.ed(0,te,3,3,"hyd-ellipsable-text",0),S.ed(1,ie,3,3,"hyd-ellipsable-text",0)),2&e){const e=t.item;S.Dc("ngIf",null!=e.location&&e.location.count>1),S.Mb(1),S.Dc("ngIf",null!=e.location&&1==e.location.count)}}function ne(e,t){1&e&&(S.gd(0),S.xc(1,"t")),2&e&&S.id(" ",S.yc(1,1,"events")," ")}function ae(e,t){if(1&e){const e=S.lc();S.kc(0,"div",25),S.sc("click",function(){S.Vc(e);const i=t.item,s=S.wc(2);return s.isEventColumnClickEnable(i)?s.navigateToSessionEventsPage(i.id):""}),S.xc(1,"iltInstructorSessionsListEventTooltip"),S.kc(2,"div",26),S.kc(3,"span"),S.gd(4),S.jc(),S.jc(),S.kc(5,"div",27),S.fc(6,"ui-icon",28),S.jc(),S.jc()}if(2&e){const e=t.item,i=S.wc(2);S.Wb("text-warning",0==e.events)("text-main",e.events>0),S.Dc("tooltip",S.yc(1,8,e.attendance_details)),S.Mb(4),S.hd(e.events),S.Mb(2),S.Dc("size","sm")("color",0==e.events?i.alertColor:i.accentColor)}}function oe(e,t){if(1&e&&(S.gd(0),S.xc(1,"t")),2&e){const e=S.wc().$implicit;S.id(" ",S.yc(1,1,e.label)," ")}}function re(e,t){if(1&e){const e=S.lc();S.kc(0,"div",30),S.sc("click",function(){S.Vc(e);const i=t.item,s=S.wc().$implicit;return s.click?s.click(i):""}),S.kc(1,"div",26),S.kc(2,"span"),S.gd(3),S.jc(),S.jc(),S.kc(4,"div",27),S.fc(5,"ui-icon",31),S.jc(),S.jc()}if(2&e){const e=t.item,i=S.wc().$implicit,s=S.wc(2);S.Wb("text-warning",i.isWarning(e))("text-main",!i.isWarning(e))("text-pointer",null!=i.click),S.Mb(3),S.hd(i.value(e)),S.Mb(2),S.Dc("name",i.icon)("size","sm")("color",i.isWarning(e)?s.alertColor:s.accentColor)}}function ce(e,t){1&e&&(S.kc(0,"hyd-table-column",29),S.kc(1,"hyd-table-column-header"),S.ed(2,oe,2,3,"ng-template"),S.jc(),S.kc(3,"hyd-table-column-cell"),S.ed(4,re,6,10,"ng-template"),S.jc(),S.jc()),2&e&&S.Dc("columnName",t.$implicit.name)("sortable",!0)("alignment","center")}function le(e,t){if(1&e&&S.gd(0),2&e){const e=S.wc().$implicit;S.id(" ",e.name," ")}}function de(e,t){if(1&e&&(S.kc(0,"hyd-ellipsable-text"),S.gd(1),S.jc()),2&e){const e=t.item,i=S.wc().$implicit;S.Mb(1),S.id(" ",i.value(e.additional_fields)," ")}}function ue(e,t){if(1&e&&(S.ic(0),S.kc(1,"hyd-table-column",32),S.kc(2,"hyd-table-column-header"),S.ed(3,le,1,1,"ng-template"),S.jc(),S.kc(4,"hyd-table-column-cell"),S.ed(5,de,2,1,"ng-template"),S.jc(),S.jc(),S.hc()),2&e){const e=t.$implicit;S.Mb(1),S.Dc("columnName",e.id)}}function he(e,t){1&e&&(S.kc(0,"div",35),S.fc(1,"ui-spinner",36),S.jc()),2&e&&(S.Mb(1),S.Dc("size","md"))}function pe(e,t){if(1&e&&S.fc(0,"blankslate",37),2&e){const e=S.wc(3);S.Dc("isVisible",!0)("type",e.BlankSlateType.EMPTY001)("title",e.noResultsTitle)("subtitle",e.noResultsSubtitle)}}function ge(e,t){if(1&e&&(S.kc(0,"div",33),S.ed(1,he,2,1,"div",22),S.ed(2,pe,1,4,"blankslate",34),S.jc()),2&e){const e=S.wc(2);S.Mb(1),S.Dc("ngIf",e.isLoading),S.Mb(1),S.Dc("ngIf",!e.isLoading&&e.noResults)}}function me(e,t){1&e&&(S.kc(0,"div",35),S.fc(1,"ui-spinner",36),S.jc()),2&e&&(S.Mb(1),S.Dc("size","md"))}const be=function(){return{category:"webapp"}};function fe(e,t){if(1&e){const e=S.lc();S.ic(0),S.kc(1,"data-browser",1,2),S.sc("onFiltersUpdate",function(t){return S.Vc(e),S.wc().onFiltersChanged(t)}),S.kc(3,"div",3),S.fc(4,"hyd-column-selector",4),S.jc(),S.kc(5,"div",5),S.xc(6,"async"),S.kc(7,"div",6),S.kc(8,"hyd-table",7,8),S.sc("selectRows",function(t){return S.Vc(e),S.wc().onRowsSelected(t)})("sort",function(t){return S.Vc(e),S.wc().onSortingChanged(t)}),S.xc(10,"async"),S.fc(11,"hyd-column-ellipsable-text",9),S.kc(12,"hyd-table-column",10),S.kc(13,"hyd-table-column-header"),S.ed(14,G,2,3,"ng-template"),S.jc(),S.kc(15,"hyd-table-column-cell"),S.ed(16,H,3,1,"ng-template"),S.jc(),S.jc(),S.kc(17,"hyd-table-column",11),S.kc(18,"hyd-table-column-header"),S.ed(19,Y,2,5,"ng-template"),S.jc(),S.kc(20,"hyd-table-column-cell"),S.ed(21,Q,1,1,"ng-template"),S.jc(),S.jc(),S.kc(22,"hyd-table-column",12),S.kc(23,"hyd-table-column-header"),S.ed(24,K,2,5,"ng-template"),S.jc(),S.kc(25,"hyd-table-column-cell"),S.ed(26,X,1,1,"ng-template"),S.jc(),S.jc(),S.fc(27,"hyd-column-ellipsable-text",9),S.xc(28,"t"),S.kc(29,"hyd-table-column",13),S.kc(30,"hyd-table-column-header"),S.ed(31,ee,2,5,"ng-template"),S.jc(),S.kc(32,"hyd-table-column-cell"),S.ed(33,se,2,2,"ng-template"),S.jc(),S.jc(),S.kc(34,"hyd-table-column",14),S.kc(35,"hyd-table-column-header"),S.ed(36,ne,2,3,"ng-template"),S.jc(),S.kc(37,"hyd-table-column-cell"),S.ed(38,ae,7,10,"ng-template"),S.jc(),S.jc(),S.ed(39,ce,5,3,"hyd-table-column",15),S.ed(40,ue,6,1,"ng-container",16),S.jc(),S.kc(41,"hyd-paginator",17),S.sc("pageChange",function(t){return S.Vc(e),S.wc().onPagingChanged(t)}),S.jc(),S.jc(),S.kc(42,"div",18),S.kc(43,"massive-actions-bar",19),S.sc("selectAll$",function(){return S.Vc(e),S.wc().onSelectEverything(!0)})("unselectAll$",function(){return S.Vc(e),S.wc().onSelectEverything(!1)}),S.xc(44,"t"),S.jc(),S.jc(),S.jc(),S.ed(45,ge,3,2,"div",20),S.xc(46,"async"),S.jc(),S.fc(47,"blankslate",21),S.ed(48,me,2,1,"div",22),S.hc()}if(2&e){const e=S.Sc(9),t=S.wc();S.Mb(1),S.Dc("hidden",!t.initialized||t.noData)("dataBrowserSource",t.dataBrowserSource),S.Mb(3),S.Dc("tableRef",e)("cacheId","ilt-instructor-sessions-list-column-selector_")("lockedColumns",t.lockedColumns)("preselectedColumns",t.preselectedColumns)("hiddenColumns",t.hiddenColumns)("maxSelectable",t.countColumns),S.Mb(1),S.Wb("massive-actions-bar-open",S.yc(6,52,t.showMassiveActionsBar$)),S.Mb(3),S.Dc("data",S.yc(10,54,t.tableData$))("selectable",t.allSelectEnable)("rowsComparisonFunction",t.comparerFn)("rowHeight",t.HYD_TABLE_STYLES.ROW_HEIGHT)("selection",t.currentSelection)("sorting",t.sortingCriteria),S.Mb(3),S.Dc("columnName","code")("headerLabel","Code")("fieldName","code")("translateField",!1)("sortable",!0),S.Mb(1),S.Dc("columnName","name")("sortable",!0),S.Mb(5),S.Dc("sortable",!0)("ellipsed",!0),S.Mb(5),S.Dc("sortable",!0)("ellipsed",!0),S.Mb(5),S.Dc("columnName","hours")("headerLabel",S.zc(28,56,"hours",S.Hc(63,be)))("fieldName","hours")("translateField",!1)("sortable",!0),S.Mb(2),S.Dc("sortable",!1)("ellipsed",!0),S.Mb(5),S.Dc("sortable",!0),S.Mb(5),S.Dc("ngForOf",t.assignmentColumns),S.Mb(1),S.Dc("ngForOf",t.sessionAdditionalFields),S.Mb(1),S.Dc("pageIndex",null==t.paginationInfo?null:t.paginationInfo.page)("pageSize",null==t.paginationInfo?null:t.paginationInfo.pageSize)("length",t.totalCount),S.Mb(2),S.Dc("counter",t.selectedItemsCount)("actions",t.getMassiveActions())("actionTitle",S.yc(44,59,"Choose action"))("type","inline-btn")("isSelectAllButtonVisible",!0)("isUnSelectAllButtonVisible",!0),S.Mb(2),S.Dc("ngIf",S.yc(46,61,t.hideTable$)),S.Mb(2),S.Dc("isVisible",t.initialized&&t.noData)("type",t.blankSlateConfig.type)("title",t.blankSlateConfig.title)("subtitle",t.blankSlateConfig.subtitle),S.Mb(1),S.Dc("ngIf",!t.initialized)}}let _e=(()=>{class e extends l.c{constructor(e,t,i,n,l,d){super(d,l),this.iltSessionService=e,this.router=t,this.route=i,this.docService=n,this.assignmentColumns=[{name:"instructors",label:o.a.t("standard","Instructors"),icon:"assignment-account",isWarning:e=>0==e.instructors,value:e=>e.instructors},{name:"enrolled",label:o.a.t("standard","Enrolled users"),icon:"branch",isWarning:e=>0==e.enrolled,value:e=>e.enrolled+"/"+e.max_enroll,click:e=>this.navigateToSessionEnrollmentsPage(e.id)}],this.allColumns=["code","name","date_begin","date_end","hours","events",...this.assignmentColumns.map(e=>e.name)],this.lockedColumns=["name"],this.preselectedColumns=[...this.allColumns,...this.assignmentColumns.map(e=>e.name)],this.hiddenColumns=["actions"],this.blankSlateConfig={type:c.a.BLANK001,title:o.a.t("classroom","No Sessions found"),subtitle:o.a.t("classroom","Click the Add button in the top right corner to create a new session")},this._rowActions=[],this._massiveActions=[],this.accentColor=p.l.ACCENT,this.alertColor=p.l.ALERT,this.countColumns=this.allColumns.length,this.isSessionAdditionaldFieldLoad$=new b.a(!1),this.sessionAdditionalFields=[],this.destroy$=new f.a,this.searchUsers$=new b.a(""),this.multiSelectMode=a.a.AUTOCOMPLETE,this.format=Object(s.B)(Object(r.j)(),s.u,"short"),this.timezone=Object(r.k)()}get allSelectEnable(){return this._massiveActions.length>0}ngOnInit(){super.ngOnInit(),this.subscribeTo(this.listenToSearchUser())}ngOnDestroy(){super.ngOnDestroy(),this.destroy$.next(!0),this.destroy$.unsubscribe()}ngAfterViewInit(){super.ngAfterViewInit(),this.changeDetector.markForCheck(),m.a.delay(()=>{this.dataTable.multiselects.first.onChange.subscribe(e=>this.searchForUsers(e))},1e3)}fetchDataImpl(e,t,i){return this.iltSessionService.getPaginetedList(this.courseId,e.pageSize,e.page,t.dir,t.columnName,i).pipe(Object(v.a)(()=>this.getRowActions()))}getInitialSorting(){return{columnName:"code",dir:u.a.ASC}}onFiltersChanged(e){var t,i;const s=this.processFilters(e);m.a.isUndefined(s.date)||0!=(null===(t=s.date.from)||void 0===t?void 0:t.length)||0!=(null===(i=s.date.to)||void 0===i?void 0:i.length)||delete s.date,this._currentFilters.next(s),this.dataBrowserSource.appliedFiltersNumber.next(Object.keys(s).filter(e=>e!=C.d.SEARCH).length)}getMassiveActions(){return this._massiveActions}getRowActions(){return this._rowActions}navigateToSessionDetailPage(e){this.router.navigate(["learn","instructor","session",e])}navigateToSessionEventsPage(e){this.router.navigate(["learn","instructor","session",e],{queryParams:{[w.c]:w.b.events_attendance}})}navigateToSessionEnrollmentsPage(e){this.router.navigate(["learn","instructor","session",e],{queryParams:{[w.c]:w.b.enrollments_evaluations}})}navigateToLearnerView(){}navigateToAttendanceSheet(e){this.router.navigate([`/legacy/admin/index.php?r=ClassroomApp/instructor/axAttendanceSheet&course_id=${this.courseId}&id_session=${e}`])}initializeColumns(){this.iltSessionService.getAdditionalField().pipe(Object(y.a)(this.destroy$)).subscribe(e=>{this.sessionAdditionalFields=e,this.sessionAdditionalFields=e.map(e=>({id:"additionalField"+e.id,type:e.type,name:e.name,value:t=>{const i=t.find(t=>t.id==e.id);return i?i.value:""}})),this.countColumns+=this.sessionAdditionalFields.length,this.isSessionAdditionaldFieldLoad$.next(!0)})}initializeColumnSelectorPanel(){return{icon:"view-column",iconTooltip:{tooltipText:"Column selector",tooltipPosition:h.b.BOTTOM},content:{}}}initializeFilters(){let e=[{title:o.a.t("standard","Search"),code:C.d.SEARCH,type:d.d.free_search_filter,params:{placeholder:o.a.t("standard","Search...")}},{title:o.a.t("standard","Instructor"),code:C.d.INSTRUCTORS,type:d.d.multiselect_filter,params:{placeholder:o.a.t("standard","Instructor"),maxSelectableItems:10,maxSuggestedItems:10,source:[]}},{title:o.a.t("standard","Dates"),code:C.d.DATE,type:d.d.timeframe,params:{fromDate:{name:C.d.DATE_BEGIN,type:"date",label:o.a.t("course","_SUBSCRIPTION_DATE_BEGIN")},toDate:{name:C.d.DATE_END,type:"date",label:o.a.t("course","_SUBSCRIPTION_DATE_END")}}},{title:o.a.t("standard","Session Details"),code:C.d.PROPERTIES,type:d.d.checkbox_filter,params:{options:[{key:C.d.PROPERTIES_WITHOUT_EVENTS,label:o.a.t("standard","Without Events")},{key:C.d.PROPERTIES_WITH_USER_WAITING,label:o.a.t("standard","With Users in Waiting List")},{key:C.d.PROPERTIES_WITHOUT_ENROLLED_USERS,label:o.a.t("standard","Without Enrolled Users")}]}},{title:o.a.t("standard","Session Attendance Types"),code:C.d.SESSION_ATTENDANCE_TYPES,type:d.d.checkbox_filter,params:{options:[{key:C.d.SESSION_ATTENDANCE_TYPES_ONSITE,label:o.a.t("standard","Full Onsite"),description:o.a.t("standard","All sessions are available onsite")},{key:C.d.SESSION_ATTENDANCE_TYPES_ONLINE,label:o.a.t("standard","Full Online"),description:o.a.t("standard","All sessions are available online")},{key:C.d.SESSION_ATTENDANCE_TYPES_FLEXIBLE,label:o.a.t("standard","Flexible"),description:o.a.t("standard","All sessions are available both online and onsite")},{key:C.d.SESSION_ATTENDANCE_TYPES_BLENDED,label:o.a.t("standard","Blended"),description:o.a.t("standard","Sessions with mixed type of attendance")}]}}];return n.c.getInstance().isCurrentUserA(n.c.LEVEL_SUPERADMIN)||n.c.getInstance().isCurrentUserA(n.c.LEVEL_POWERUSER)||(e=e.splice(1,1)),Object(_.a)(e)}searchForUsers(e){this.searchUsers$.next(e)}listenToSearchUser(){return this.iltSessionService.getInstructorListSuggest(this.searchUsers$).subscribe(e=>{this.dataTable.multiselects.first.source=[...e],this.dataTable.multiselects.first.filteredList=[...e],this.dataTable.multiselects.first.showItemsList=!0,this.changeDetector.markForCheck(),this.changeDetector.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(S.ec(k.a),S.ec(T.h),S.ec(T.a),S.ec(I.a),S.ec(S.o),S.ec(S.i))},e.\u0275cmp=S.Yb({type:e,selectors:[["ilt-instructor-session-list"]],viewQuery:function(e,t){if(1&e&&(S.nd(V,1),S.nd(B,1)),2&e){let e;S.Rc(e=S.tc())&&(t.multiselect=e.first),S.Rc(e=S.tc())&&(t.dataTable=e.first)}},inputs:{courseId:"courseId"},features:[S.Jb],decls:2,vars:3,consts:[[4,"ngIf"],[1,"data-browser",3,"hidden","dataBrowserSource","onFiltersUpdate"],["dataTable",""],[1,"custom-panel"],[3,"tableRef","cacheId","lockedColumns","preselectedColumns","hiddenColumns","maxSelectable"],[1,"data-browser-table-content"],[1,"table-wrapper"],[1,"hyd-table-ilt-sessions-list",3,"data","selectable","rowsComparisonFunction","rowHeight","selection","sorting","selectRows","sort"],["iltInstructorSessionsListTable",""],[3,"columnName","headerLabel","fieldName","translateField","sortable"],[3,"columnName","sortable"],["columnName","date_begin",3,"sortable","ellipsed"],["columnName","date_end",3,"sortable","ellipsed"],["columnName","location",3,"sortable","ellipsed"],["columnName","events","alignment","center",3,"sortable"],[3,"columnName","sortable","alignment",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"pageIndex","pageSize","length","pageChange"],[1,"massive-actions-bar-wrapper"],[3,"counter","actions","actionTitle","type","isSelectAllButtonVisible","isUnSelectAllButtonVisible","selectAll$","unselectAll$"],["class","table-cover bg-grey-superlight",4,"ngIf"],[1,"no-data",3,"isVisible","type","title","subtitle"],["class","spinner",4,"ngIf"],[1,"text-pointer",3,"click"],[3,"innerHTML"],[1,"col-with-icon-cell","text-pointer",3,"tooltip","click"],[1,"counter"],[1,"icon"],["name","calendar",3,"size","color"],[3,"columnName","sortable","alignment"],[1,"col-with-icon-cell",3,"click"],[3,"name","size","color"],[3,"columnName"],[1,"table-cover","bg-grey-superlight"],[3,"isVisible","type","title","subtitle",4,"ngIf"],[1,"spinner"],[3,"size"],[3,"isVisible","type","title","subtitle"]],template:function(e,t){1&e&&(S.ed(0,fe,49,64,"ng-container",0),S.xc(1,"async")),2&e&&S.Dc("ngIf",S.yc(1,1,t.isSessionAdditionaldFieldLoad$))},directives:[x.p,D.a,O.a,E.a,A.a,P.c,P.d,P.b,x.o,M.b,L.a,j.a,R.a,F.a,N.lc,N.Be],pipes:[x.b,o.b,s.d,U.a,q],styles:['.data-browser-table[_nghost-%COMP%]   .no-data[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .no-data[_ngcontent-%COMP%]{margin-top:100px}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;z-index:1}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate{margin-top:50px}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section{font-size:1.1em}.data-browser-table[_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section+div, .data-browser-table   [_nghost-%COMP%]   .table-cover[_ngcontent-%COMP%]     blankslate h1.title-section+div{font-size:.8em}.data-browser-table[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:flex-start;padding-top:50px;box-sizing:border-box}.data-browser-table[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]   ui-spinner[_ngcontent-%COMP%], .data-browser-table   [_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]   ui-spinner[_ngcontent-%COMP%]{position:static}.data-browser-table[_nghost-%COMP%]     .hyd-table-col[style^="flex-basis: 30.042px"], .data-browser-table   [_nghost-%COMP%]     .hyd-table-col[style^="flex-basis: 30.042px"]{flex-grow:0!important;justify-content:flex-end!important}.color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content, .data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table{display:block;height:calc(100% - 46px)}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table .hyd-table-body, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .table-wrapper .hyd-table .hyd-table-body{height:calc(100% - 39px);overflow-x:hidden;overflow-y:auto}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper{overflow:hidden;height:0}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper massive-actions-bar, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content .massive-actions-bar-wrapper massive-actions-bar{height:52px}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .table-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .table-wrapper{height:calc(100% - 52px)}.data-browser-table[_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .massive-actions-bar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser-table-content.massive-actions-bar-open .massive-actions-bar-wrapper{height:52px;overflow:visible}.data-browser-table[_nghost-%COMP%]     .data-browser, .data-browser-table   [_nghost-%COMP%]     .data-browser{overflow-y:auto;overflow-x:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{width:330px;padding:0;margin:0;display:block;height:100%;overflow-y:auto;overflow-x:hidden;background-color:#fff}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-right:1px solid var(--hyd-color-border-neutral)}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-right:0}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-left:0}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters{border-left:1px solid var(--hyd-color-border-neutral)}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-wrapper{box-sizing:border-box;border:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tab, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tab, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs-body, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs-body{height:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab{display:flex;flex-direction:column}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter{flex-shrink:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter.last, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .filter.last{flex-grow:1}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .clear-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tabs .data-tabs-body .data-tab .clear-filters{flex-shrink:0;justify-content:flex-end;padding:10px}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-left:10px}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-right:auto}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser #sidebar-filters #filters-holder{padding-right:10px}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .filter-box, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .filter-box{padding-right:20px}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--9-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--9-col, .data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--12-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container>.mdl-cell.mdl-cell--12-col{height:100%;margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--9-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--9-col{position:relative;width:calc(100% - 330px - 15px);margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col{position:relative;width:calc(100% - 15px);margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col.header-row, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-cell.mdl-cell--12-col.header-row{width:100%}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser>.section-wrapper, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser>.section-wrapper{height:calc(100% - 40px - 1px);overflow:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .docebo-data-browser .mdl-grid.grid-content-container{height:100%;overflow:hidden}.data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid{margin:0}.data-browser-table[_nghost-%COMP%]     .data-browser .full-width-header-container .mdl-grid, .data-browser-table   [_nghost-%COMP%]     .data-browser .full-width-header-container .mdl-grid{margin:0 auto}.data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{overflow:hidden;height:100%}.router-outlet:not(.direction-rtl):not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{margin:0 -15px 0 0}.router-outlet.direction-rtl:not(.heracles-root)   .data-browser-table[_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .mdl-grid.grid-content-container{margin:0 0 0 -15px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters{height:40px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder{height:40px!important}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder span i, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters #filters-holder span i{padding-top:10px;padding-bottom:10px}.data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer, .data-browser-table   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer{height:40px;padding:0 6px}.data-browser-table.full-width-header[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container, .data-browser-table.full-width-header   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .search-header-container{flex-grow:1;max-width:unset}.data-browser-table.full-width-header[_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer, .data-browser-table.full-width-header   [_nghost-%COMP%]     .data-browser .header-holder #sorting-filters .spacer{display:none}[_nghost-%COMP%]{display:block}.col-with-icon-cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%}.col-with-icon-cell[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%], .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;width:50%}.col-with-icon-cell[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{justify-content:flex-end}.col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{justify-content:flex-start}.router-outlet:not(.direction-rtl):not(.heracles-root)[_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .router-outlet:not(.direction-rtl):not(.heracles-root)   [_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:6px}.router-outlet.direction-rtl:not(.heracles-root)[_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .router-outlet.direction-rtl:not(.heracles-root)   [_nghost-%COMP%]   .col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:6px}.col-with-icon-cell[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   i.zmdi[_ngcontent-%COMP%]{font-size:var(--hyd-size-icon-sm)}.text-pointer[_ngcontent-%COMP%]{cursor:pointer}.spinner[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;width:100%;box-sizing:border-box}.spinner[_ngcontent-%COMP%]   .mdl-spinner[_ngcontent-%COMP%]{position:static}'],changeDetection:0}),e})()},Z92M:function(e,t){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},ZOB2:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var s=i("AytR"),n=i("dRcD"),a=i("gvJE"),o=i("T8dX"),r=i("fXoL");let c=(()=>{class e{constructor(){this.getMultidomainSubfolder=()=>void 0!==s.a.subfolder&&""!==s.a.subfolder?`/${s.a.subfolder}`:""}getDeeplinkButtonForCourse(e,t,i){const s=n.a.getInstance();if(!e.deeplink)return null;const r=this.getMultidomainSubfolder(),c=document.location.origin+r,l=a.a.t("standard",i?"Share this link to allow people to see the course or the training material you are viewing and automatically enroll.":"Share this link to allow people to see the course and automatically enroll."),d=`${c}/learn/course/${e.id}/${e.slug_name}?generated_by=${s.id}&hash=${e.deeplink}`;let u={mainTitle:a.a.t("course","Get shareable link"),title:l};return u=Object.assign(Object.assign({},u),i?{controls:[{type:"radio",label:a.a.t("standard","Course link"),name:"copyLinkType",value:d,checked:!0},{type:"radio",label:a.a.t("standard","This content link"),name:"copyLinkType",value:`${c}/learn/course/${e.id}/play/${i.id}/${i.slug}?hash=${e.deeplink}&generated_by=${s.id}`,checked:!1}]}:{singleLink:d}),{properties:{icons:["zmdi zmdi-link"],baloon:{width:422,title:" ",style:"white",position:"bottom-left",component:{params:u,component:o.a},isSuggestionBalloon:!1,showOnClick:!1,uniquePrefix:t,isFab:!0},tooltipText:a.a.t("course","Get shareable link")}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.ac({token:e,factory:e.\u0275fac}),e})()},Znps:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var s=i("ofXK"),n=i("fXoL");let a=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.cc({type:e}),e.\u0275inj=n.bc({imports:[[s.c]]}),e})()},a1XQ:function(e,t,i){"use strict";i.r(t),i.d(t,"LearnModule",function(){return tP});var s=i("tyNb"),n=i("dpSy"),a=i("HDdC"),o=i("dRcD"),r=i("L+gB"),c=i("fXoL");let l=(()=>{class e{constructor(e){this.router=e}canActivate(e,t){return new a.a(e=>{let t=()=>{o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN)&&this.router.navigate(["/learn/home"]),e.next(!o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN)),e.complete()},i=()=>{this.router.navigate(["/learn/signin"]),e.next(!1),e.complete()};if(o.a.getInstance().isLoaded())t();else{let e=r.a.singleton.subscribe("UserSessionReady",()=>{e.unsubscribe(),t()}),s=r.a.singleton.subscribe("UserSessionError",e=>{s.unsubscribe(),401==e.data.status&&i()})}})}}return e.\u0275fac=function(t){return new(t||e)(c.oc(s.h))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var d=i("tfGn"),u=i("S2Qf"),h=i("uxYR"),p=i("zanj"),g=i("yoPb"),m=i("ofXK"),b=i("nUpK"),f=i("Lbmx");let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.cc({type:e}),e.\u0275inj=c.bc({imports:[[m.c,d.a,b.Ld,b.Gd,b.Q,b.V,f.b]]}),e})();var v=i("rL2y"),y=i("9jGm"),w=i("l7P3"),C=i("0FX9");const S=["qrcElement"];let k=(()=>{class e{constructor(e){this.renderer=e,this.colordark="",this.colorlight="",this.level="",this.hidetitle=!1,this.size=0,this.usesvg=!1,this.allowEmptyString=!1,this.qrdata="",this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.scale=4,this.width=10,""!==this.colordark&&console.warn("[angularx-qrcode] colordark is deprecated, use colorDark."),""!==this.colorlight&&console.warn("[angularx-qrcode] colorlight is deprecated, use colorLight."),""!==this.level&&console.warn("[angularx-qrcode] level is deprecated, use errorCorrectionLevel."),!1!==this.hidetitle&&console.warn("[angularx-qrcode] hidetitle is deprecated."),0!==this.size&&console.warn("[angularx-qrcode] size is deprecated, use `width`. Defaults to 10."),!1!==this.usesvg&&console.warn("[angularx-qrcode] usesvg is deprecated, use [elementType]=\"'svg'\".")}ngOnChanges(){this.createQRCode()}isValidQrCodeText(e){return!1===this.allowEmptyString?!(void 0===e||""===e||"null"===e||null===e):!(void 0===e)}toDataURL(){return new Promise((e,t)=>{Object(C.toDataURL)(this.qrdata,{color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},(i,s)=>{i?t(i):e(s)})})}toCanvas(e){return new Promise((t,i)=>{Object(C.toCanvas)(e,this.qrdata,{color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},e=>{e?i(e):t("success")})})}toSVG(){return new Promise((e,t)=>{Object(C.toString)(this.qrdata,{color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,type:"svg",version:this.version,width:this.width},(i,s)=>{i?t(i):e(s)})})}renderElement(e){for(const t of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,t);this.renderer.appendChild(this.qrcElement.nativeElement,e)}createQRCode(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):void 0!==this.version&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error('[angularx-qrcode] Field `qrdata` is empty, set`allowEmptyString="true"` to overwrite this behaviour.');let e;switch(this.elementType){case"canvas":e=this.renderer.createElement("canvas"),this.toCanvas(e).then(()=>{this.renderElement(e)}).catch(e=>{console.error("[angularx-qrcode] canvas error: ",e)});break;case"svg":e=this.renderer.createElement("div"),this.toSVG().then(t=>{this.renderer.setProperty(e,"innerHTML",t);const i=e.firstChild;this.renderer.setAttribute(i,"height",`${this.width}`),this.renderer.setAttribute(i,"width",`${this.width}`),this.renderElement(i)}).catch(e=>{console.error("[angularx-qrcode] svg error: ",e)});break;case"url":case"img":default:e=this.renderer.createElement("img"),this.toDataURL().then(t=>{e.setAttribute("src",t),this.renderElement(e)}).catch(e=>{console.error("[angularx-qrcode] img/url error: ",e)})}}catch(e){console.error("[angularx-qrcode] Error generating QR Code: ",e.message)}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.M))},e.\u0275cmp=c.Yb({type:e,selectors:[["qrcode"]],viewQuery:function(e,t){if(1&e&&c.nd(S,3),2&e){let e;c.Rc(e=c.tc())&&(t.qrcElement=e.first)}},inputs:{colordark:"colordark",colorlight:"colorlight",level:"level",hidetitle:"hidetitle",size:"size",usesvg:"usesvg",allowEmptyString:"allowEmptyString",qrdata:"qrdata",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",margin:"margin",scale:"scale",width:"width",version:"version"},features:[c.Kb],decls:2,vars:2,consts:[["qrcElement",""]],template:function(e,t){1&e&&c.fc(0,"div",null,0),2&e&&c.Qb(t.cssClass)},encapsulation:2,changeDetection:0}),e})(),T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.cc({type:e}),e.\u0275inj=c.bc({providers:[]}),e})();var I=i("Y9qQ");let x=(()=>{class e{constructor(e,t){this.backendService=e,this.toggleService=t}createAccount(e){const t=this.buildPayload(e);return this.backendService.request("/learn/v1/webinar/adobeconnect/accounts","POST",t)}editAccount(e){const t=this.buildPayload(e);return this.backendService.request(`/learn/v1/webinar/adobeconnect/accounts/${e.get("id").value}`,"PUT",t)}fetchAccounts(e){const t=Object.assign(Object.assign({},e),{providers:["adobeconnectv2meeting","adobeconnectv2seminar"]});return this.backendService.request("/learn/v1/webinar/adobeconnect/accounts","GET",t)}deleteAccount(e){return this.backendService.request(`/learn/v1/webinar/adobeconnect/accounts/${e}`,"DELETE")}buildPayload(e){return{name:e.controls.name.value,tool:"seminar"===e.controls.sessionType.value?"adobeconnectv2seminar":"adobeconnectv2meeting",additional_info:e.controls.description.value,server_url:e.controls.serverUrl.value,admin_username:e.controls.username.value,admin_password:e.controls.password.value,session_type:e.controls.sessionType.value,max_sessions:0|e.controls.sessionLimitAccount.value,max_sessions_per_course:0|e.controls.sessionLimitCourses.value,max_concurrent_sessions:0|e.controls.sessionLimitConcurrentRooms.value,tool_mapping_field_lms:e.controls.attendanceTrackingCheckbox.value?e.controls.doceboField.value:""}}}return e.\u0275fac=function(t){return new(t||e)(c.oc(I.a),c.oc(u.g))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var D=i("lfsz");let O=(()=>{class e{constructor(e,t){this.router=e,this.toggleService=t,this.platform=D.b.getInstance()}canActivate(e,t){return!!this.platform.isPluginActive("AdobeConnectV2App")||(this.router.navigate(["/not-found"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(c.oc(s.h),c.oc(u.g))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var E=i("d+dA");let A=(()=>{class e{constructor(e){this.router=e,this.platform=E.b.getInstance()}canActivate(e,t){return!!this.platform.isPluginActive("AdobeConnectV2App")||(this.router.navigate(["/unauthorized"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(c.oc(s.h))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var P=i("35q8"),M=i("gvJE");let L=(()=>{class e{constructor(){this.titleBarSubtitle=M.a.t("webinar","Manage your Adobe Connect account properties"),this.propertiesTabTitle=M.a.t("standard","Properties"),this.generalTabTitle=M.a.t("standard","General"),this.detailsTabTitle=M.a.t("standard","Details"),this.generalVerticalTabTitle=M.a.t("app7020","General Settings"),this.generalVerticalTabDescription=M.a.t("webinar","Set the general information for this account"),this.detailsVerticalTabDescription=M.a.t("webinar","Set the details for this account"),this.templatesListTabTitle=M.a.t("webinar","Templates"),this.roomsListTabTitle=M.a.t("webinar","Rooms"),this.foldersListTabTitle=M.a.t("organization","Folders"),this.chooseAction=M.a.t("standard","Choose action"),this.successMessage=M.a.t("app7020","Your changes has been successfully saved"),this.errorMessage=M.a.t("standard","Something went wrong. Please, try again later!"),this.confirmButton=M.a.t("standard","Save Changes"),this.noResultsTitle=M.a.t("standard","Whoops, No results found!"),this.noResultsSubtitle=M.a.t("myteam","Please try again using different search/filters criteria."),this.loadingMessage=e=>{switch(e){case"template":return this.retrievingTemplates;case"folder":return this.retrievingFolders;case"room":return this.retrievingRooms}},this.successMessagePanelUi=e=>M.a.t("webinar","{source} has been assigned successfully",{source:e}),this.retrievingTemplates=M.a.t("standard","We are retrieving templates"),this.retrievingFolders=M.a.t("standard","We are retrieving folders"),this.retrievingRooms=M.a.t("standard","We are retrieving rooms"),this.waitMessage=M.a.t("app7020","this operation may take few minutes."),this.maxNumberExceededMessageTitle=M.a.t("gamification","Maximum number exceeded"),this.maxNumberExceededMessage=M.a.t("webinar","The limit of the items you can select (20) was exceeded. In order to continue, please unselect a few items."),this.searchTitle=M.a.t("standard","Search"),this.searchPlaceHolder=M.a.t("standard","Search..."),this.items=M.a.t("standard","items"),this.cancel=M.a.t("app7020","Cancel"),this.unassign=M.a.t("app7020","Unassign"),this.requiredMarkerLabel=M.a.t("standard","(Required)"),this.optionsLabel=M.a.t("admin","Options"),this.sessionTypeLabel=M.a.t("webinar","Session type"),this.templateTabBlankSlateTitle=M.a.t("webinar","No template yet"),this.templateTabBlankSlateSubtitle=M.a.t("webinar","Use the Assign Template button to add a new template"),this.roomTabBlankSlateTitle=M.a.t("webinar","No room yet"),this.roomTabBlankSlateSubtitle=M.a.t("webinar","Use the Assign Room button to add a new room"),this.folderTabBlankSlateTitle=M.a.t("webinar","No folder yet"),this.folderTabBlankSlateSubtitle=M.a.t("webinar","Use the Assign Folder button to add a new folder"),this.templateBlankSlateTitle=M.a.t("webinar","No Templates associated to this Account yet"),this.templateBlankSlateDescription=M.a.t("webinar","Access your Adobe Connect admin account to\nstart associating templates"),this.folderBlankSlateTitle=M.a.t("webinar","No Folders associated to this Account yet"),this.folderBlankSlateDescription=M.a.t("webinar","Access your Adobe Connect admin account to\nstart associating folders"),this.roomBlankSlateTitle=M.a.t("webinar","No Rooms associated to this Account yet"),this.roomBlankSlateDescription=M.a.t("webinar","Access your Adobe Connect admin account to\nstart associating rooms"),this.templateUnassignDialogTitle=M.a.t("webinar","Unassign Template"),this.templateUnassignDialogContent=M.a.t("webinar","Are you sure you want to unassign the selected template?"),this.roomUnassignDialogTitle=M.a.t("webinar","Unassign Room"),this.roomUnassignDialogContent=M.a.t("webinar","Are you sure you want to unassign the selected room?"),this.folderUnassignDialogTitle=M.a.t("webinar","Unassign Folder"),this.folderUnassignDialogContent=M.a.t("webinar","Are you sure you want to unassign the selected folder?"),this.massiveActionUnassignAll=M.a.t("webinar","Unassign All"),this.foldersRightPanelTitle=M.a.t("webinar","Assign Folder"),this.foldersRightPanelDescription=M.a.t("webinar","Select the folders you want to assign to the account"),this.templatesRightPanelTitle=M.a.t("webinar","Assign Template"),this.templatesRightPanelDescription=M.a.t("webinar","Select the templates you want to assign to the account"),this.roomsRightPanelTitle=M.a.t("webinar","Assign Room"),this.roomsRightPanelDescription=M.a.t("webinar","Select the rooms you want to assign to the account"),this.defaultTitle=M.a.t("standard","Default Title"),this.defaultDescription=M.a.t("standard","Default Description"),this.modalChangesTitle=M.a.t("standard","You're leaving without saving changes"),this.modalChangesMessage=M.a.t("standard","Do you want to save changes before leaving the page? Otherwise, all unsaved changes will be lost."),this.saveChanges=M.a.t("app7020","Save Changes"),this.discardChanges=M.a.t("standard","Discard changes"),this.attendanceTrackingTitle=M.a.t("app7020","Attendance Tracking"),this.attendanceTrackingSubtitle=M.a.t("app7020","Track the user attendance and block access to the guest account"),this.attendanceTrackingCheckboxTitle=M.a.t("app7020","Enable Attendance Tracking"),this.attendanceTrackingCheckboxDesc=M.a.t("app7020","Enabling the tracking feature requires you to map the Docebo field to the corresponding one within Adobe Connect")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var j=i("+sIT");let R=(()=>{class e{constructor(e,t,i){this.pageService=e,this.adobeConnectAccountEditDictionary=t,this.docLayoutService=i}canDeactivate(e){return new Promise(t=>{e.propertiesTab.formGroup.dirty?this.pageService.dialog.open({id:1,width:465,height:200,title:this.adobeConnectAccountEditDictionary.modalChangesTitle,content:this.adobeConnectAccountEditDictionary.modalChangesMessage,actions:[{type:"cancel",properties:{text:this.adobeConnectAccountEditDictionary.cancel},handler:e=>{e.close(),t(!1)}},{type:"normal",properties:{text:this.adobeConnectAccountEditDictionary.saveChanges},handler:i=>{e.propertiesTab.saveChanges().then(i=>{this.docLayoutService.toast.showToast({message:i,type:"success"}),e.propertiesTab.formGroup.markAsPristine(),t(!0)}).catch(e=>{this.docLayoutService.toast.showToast({message:e,type:"error"}),t(!1)}),i.close()}},{type:"cancel",properties:{text:this.adobeConnectAccountEditDictionary.discardChanges},handler:i=>{e.propertiesTab.resetForm(),i.close(),t(!0)}}]}):setTimeout(()=>{t(!0)})})}}return e.\u0275fac=function(t){return new(t||e)(c.oc(P.a),c.oc(L),c.oc(j.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),F=(()=>{class e{constructor(e){this.actions=e}}return e.\u0275fac=function(t){return new(t||e)(c.oc(y.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var N=function(e){return e.AccountSuccessfullyCreated="[AdobeConnect] Account Successfully Created",e.AccountSuccessfullyEdited="[AdobeConnect] Account Successfully Edited",e.AccountSuccessfullyDeleted="[AdobeConnect] Account Successfully Deleted",e}({});class U{constructor(e){this.payload=e,this.type=N.AccountSuccessfullyCreated}}class z{constructor(e){this.payload=e,this.type=N.AccountSuccessfullyDeleted}}const q={accounts:[],lastCreatedAccount:null,lastEditedAccount:null,status:"AdobeConnectInitialState",paring:null,lastDeletedAccountPartial:null,windowHasFocus:!1};function V(e=q,t){switch(t.type){case N.AccountSuccessfullyCreated:return Object.assign(Object.assign({},e),{status:"AccountCreated",lastCreatedAccount:t.payload});case N.AccountSuccessfullyEdited:return Object.assign(Object.assign({},e),{status:"AccountEdited",lastEditedAccount:t.payload});case N.AccountSuccessfullyDeleted:return Object.assign(Object.assign({},e),{status:"AccountDeleted",lastDeletedAccountPartial:t.payload});default:return e}}let B=(()=>{class e{constructor(e){this.backendService=e}createAccount(e){const t=this.buildPayload(e);return this.backendService.request("/learn/v1/webinar/gotomeeting/accounts","POST",t)}editAccount(e){const t=this.buildPayload(e);return this.backendService.request(`/learn/v1/webinar/gotomeeting/accounts/${e.get("id").value}`,"PUT",t)}fetchAccounts(e){const t=Object.assign(Object.assign({},e),{providers:["gotomeetingv2meeting","gotomeetingv2webinar","gotomeetingv2training"]});return this.backendService.request("/learn/v1/webinar/gotomeeting/accounts","GET",t)}unpairAccount(e){return this.backendService.request(`/learn/v1/webinar/gotomeeting/accounts/${e}/pair`,"DELETE")}deleteAccount(e){return this.backendService.request(`/learn/v1/webinar/gotomeeting/accounts/${e}`,"DELETE")}buildPayload(e){const t="meeting"===e.get("sessionType").value?"gotomeetingv2meeting":"webinar"===e.get("sessionType").value?"gotomeetingv2webinar":"gotomeetingv2training";return{name:e.get("accountName").value,tool:t,additional_info:e.get("accountDescription").value,app_key:e.get("clientId").value,app_secret:e.get("clientSecret").value,session_type:t,max_sessions:0|e.get("sessionLimitAccount").value,max_sessions_per_course:0|e.get("sessionLimitCourses").value,max_concurrent_sessions:0|e.get("sessionLimitConcurrentRooms").value}}}return e.\u0275fac=function(t){return new(t||e)(c.oc(I.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})(),G=(()=>{class e{constructor(e){this.router=e,this.platform=E.b.getInstance()}canActivate(e,t){return!!this.platform.isPluginActive("GotomeetingV2App")||(this.router.navigate(["/unauthorized"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(c.oc(s.h))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var H=function(e){return e.AccountSuccessfullyCreated="[GoToMeeting] Account Successfully Created",e.AccountSuccessfullyEdited="[GoToMeeting] Account Successfully Edited",e.AccountSuccessfullyPaired="[GoToMeeting] Account Successfully Paired",e.AccountSuccessfullyDeleted="[GoToMeeting] Account Successfully Deleted",e.PairingAccountRequested="[GoToMeeting] Pairing Account Requested",e.PairingAccountAcquired="[GoToMeeting] Pairing Account Acquired",e.PairingAccountCompleted="[GoToMeeting] Pairing Account Completed",e.PairingAccountAborted="[GoToMeeting] Pairing Account Aborted",e}({});class Y{constructor(e){this.payload=e,this.type=H.AccountSuccessfullyCreated}}class W{constructor(e){this.payload=e,this.type=H.AccountSuccessfullyEdited}}class Q{constructor(e){this.payload=e,this.type=H.PairingAccountRequested}}class K{constructor(e){this.payload=e,this.type=H.PairingAccountAcquired}}class J{constructor(){this.type=H.PairingAccountCompleted}}class X{constructor(){this.type=H.PairingAccountAborted}}class Z{constructor(e){this.payload=e,this.type=H.AccountSuccessfullyDeleted}}const ee={accounts:[],lastCreatedAccount:null,lastRequestedPairedAccount:null,lastEditedAccount:null,status:"GoToMeetingInitialState",pairing:null,lastDeletedAccountPartial:null,windowHasFocus:!1};function te(e=ee,t){switch(t.type){case H.AccountSuccessfullyCreated:return Object.assign(Object.assign({},e),{status:"AccountCreated",lastCreatedAccount:t.payload,pairing:null});case H.AccountSuccessfullyPaired:return Object.assign(Object.assign({},e),{status:"AccountSuccessfullyPaired",lastRequestedPairedAccount:t.payload,pairing:null});case H.AccountSuccessfullyEdited:return Object.assign(Object.assign({},e),{status:"AccountEdited",lastEditedAccount:t.payload,pairing:null});case H.AccountSuccessfullyDeleted:return Object.assign(Object.assign({},e),{status:"AccountDeleted",lastDeletedAccountPartial:t.payload,pairing:null});case H.PairingAccountRequested:return Object.assign(Object.assign({},e),{status:"PairingAccountRequested",lastRequestedPairedAccount:t.payload,lastEditedAccount:null,pairing:null});case H.PairingAccountAcquired:return Object.assign(Object.assign({},e),{status:"PairingAccountAcquired",lastRequestedPairedAccount:null,pairing:Object.assign({},t.payload)});case H.PairingAccountCompleted:return Object.assign(Object.assign({},ee),{status:"PairingAccountCompleted"});case H.PairingAccountAborted:return Object.assign(Object.assign({},ee),{status:"PairingAccountAborted"});default:return e}}let ie=(()=>{class e{constructor(e){this.router=e}canActivate(e){let t=e.children[0].params,i="learning_plan"==e.url[0].path?"lp":"course";return!(e.queryParams.hash&&e.queryParams.hash.length>0&&o.a.getInstance().isValid()&&(this.router.navigate(["/learn/"+i+"/"+t.id+"/"+encodeURIComponent(t.title)]),1))}}return e.\u0275fac=function(t){return new(t||e)(c.oc(s.h))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var se=i("IzEk"),ne=i("3t6O"),ae=i("CI6S"),oe=i("r1ax");let re=(()=>{class e{constructor(e,t){this.router=e,this.store=t}canActivate(e){return!!Object(oe.a)()||this._hasOldSignatureConditions(e)}_hasOldSignatureConditions(e){const{params:t}=e;return t.slug!==String(ne.a.SIGN)||!t.id_lo.match(/^(sign_)[\d]+$/)||(this.store.pipe(Object(w.q)(ae.d),Object(se.a)(1)).subscribe(e=>{this.router.navigate([`/learn/course/${t.id}/${e.slug_name}/sign`])}),!1)}}return e.\u0275fac=function(t){return new(t||e)(c.oc(s.h),c.oc(w.e))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var ce=i("DV2z"),le=i("Lzvv");let de=(()=>{class e{constructor(e,t,i){this._backendService=e,this.externalPluginService=t,this.bootstrapService=i}lmsLogout(){this._backendService.logout().subscribe(()=>{E.b.getInstance().isPluginActive("ZendeskApp")&&(E.b.getInstance().getPluginSettings("ZendeskApp").show_to_non_authenticated||this.externalPluginService.zendeskWidgetOptions("hide"))},e=>{this.bootstrapService.removeCustomStyles("multidomain_styles")},()=>{this.bootstrapService.removeCustomStyles("multidomain_styles")})}canActivate(e){return E.b.getInstance().isPluginActive("OpenIDConnectApp")?this._backendService.openidConnectLogout().subscribe(e=>{e&&e.data&&e.data.idp_logout_url&&(window.location.href=e.data.idp_logout_url)},()=>{this.lmsLogout()},()=>{this.lmsLogout()}):this.lmsLogout(),!0}}return e.\u0275fac=function(t){return new(t||e)(c.oc(I.a),c.oc(ce.a),c.oc(le.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var ue=i("nY0b"),he=i("cSwE"),pe=i("hJ4h"),ge=i("ah4f"),me=i("MqiY"),be=i("mqFx"),fe=i("3Hn1"),_e=i("0YBW"),ve=i("rwdK"),ye=i("S/1/"),we=i("wSih"),Ce=i("+uA4"),Se=i("sCVX"),ke=i("8SnQ"),Te=i("T8dX"),Ie=i("S0b3"),xe=i("g5rY"),De=i("1W8S"),Oe=i("1frc"),Ee=i("rLbr"),Ae=function(e){return e.TEMPLATE="template",e.FOLDER="folder",e.ROOM="room",e}({}),Pe=i("hQwR"),Me=i("jt8V"),Le=i("VkN6"),je=i("2Vo4");class Re{constructor(e){this.dictionary=new L,this.massiveActions=[{action:()=>this.editListComponent.openUnassignDialog(this.editListComponent.selectedRows,this.editListComponent.fullTableData),id:"delete",title:this.dictionary.massiveActionUnassignAll,active:!1,key:"unassign-all",disabled:!1,type:Pe.a.DELETE}],this.assignmentListDataSource={mode:Me.a.push,viewOptionLabel:this.dictionary.searchTitle,filters:new je.a([{title:this.dictionary.searchTitle,code:"search",type:Me.d.free_search_filter,params:{placeholder:this.dictionary.searchPlaceHolder}}]),appliedFiltersNumber:new je.a(0),displayedItemsNumber:new je.a(0),viewOptions:new je.a([]),disableViewOptions:!0,elementLabels:{singular:this.dictionary.items,plural:this.dictionary.items}},this.tableColumns={name:{columnName:"name",sortable:!1,headerLabel:"Name",alignment:Le.a.LEFT},assignment_date:{columnName:"assignment_date",sortable:!1,headerLabel:"Assignment Date",alignment:Le.a.RIGHT},ellipsis:{ellipsisActions:[{id:"delete",title:"Unassign",active:!0,action:e=>{this.editListComponent.openUnassignDialog([e],this.editListComponent.tableData)}}],alignment:Le.a.CENTER}},this.unassignDialogActions=[{id:"cancel",type:"neutral",label:this.dictionary.cancel,slot:"end"},{id:"unassign",type:"negative",label:this.dictionary.unassign,slot:"end"}],this.unassignTemplateDialogOptions={title:this.dictionary.templateUnassignDialogTitle,content:this.dictionary.templateUnassignDialogContent,actions:this.unassignDialogActions},this.unassignRoomDialogOptions={title:this.dictionary.roomUnassignDialogTitle,content:this.dictionary.roomUnassignDialogContent,actions:this.unassignDialogActions},this.unassignFolderDialogOptions={title:this.dictionary.folderUnassignDialogTitle,content:this.dictionary.folderUnassignDialogContent,actions:this.unassignDialogActions},this.editListComponent=e}getUnassignDialogOptions(e){switch(e){case Ae.TEMPLATE:return this.unassignTemplateDialogOptions;case Ae.FOLDER:return this.unassignFolderDialogOptions;case Ae.ROOM:return this.unassignRoomDialogOptions}}}var Fe=i("lNbR"),Ne=i("OFqD"),Ue=i("alYl"),ze=i("9FoH"),qe=i("mZNx"),Ve=i("NDY9"),Be=i("vQfe"),Ge=i("IsFk");function He(e,t){if(1&e&&(c.gd(0),c.xc(1,"t")),2&e){const e=c.wc(3);c.hd(c.yc(1,1,e.tableColumns.assignment_date.headerLabel))}}function $e(e,t){1&e&&(c.gd(0),c.xc(1,"HDate")),2&e&&c.id(" ",c.yc(1,1,t.item.assignment_date)," ")}function Ye(e,t){if(1&e){const e=c.lc();c.kc(0,"hyd-table",10),c.sc("selectRows",function(t){return c.Vc(e),c.wc(2).onSelectRows(t)}),c.fc(1,"hyd-table-column-text",11),c.kc(2,"hyd-table-column",12),c.kc(3,"hyd-table-column-header"),c.ed(4,He,2,3,"ng-template"),c.jc(),c.kc(5,"hyd-table-column-cell"),c.ed(6,$e,2,3,"ng-template"),c.jc(),c.jc(),c.fc(7,"hyd-table-column-ellipsis",13),c.jc()}if(2&e){const e=c.wc(2);c.Dc("data",e.tableData)("selection",e.currentSelections)("selectable",!0),c.Mb(1),c.Dc("headerLabel",e.tableColumns.name.headerLabel)("fieldName","name")("columnName",e.tableColumns.name.columnName)("sortable",e.tableColumns.name.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.assignment_date.columnName)("sortable",e.tableColumns.assignment_date.sortable),c.Mb(5),c.Dc("columnName","ellipsis")("actions",e.tableColumns.ellipsis.ellipsisActions)("orientation","top-right")}}function We(e,t){if(1&e){const e=c.lc();c.kc(0,"massive-actions-bar",14),c.sc("unselectAll$",function(){return c.Vc(e),c.wc(2).unselectEverything()})("selectAll$",function(){return c.Vc(e),c.wc(2).selectEverything()}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("title",e.dictionary.massiveActionUnassignAll)("type","inline-btn")("counter",e.selectedRows.length)("orientation","top-right")("actions",e.editListConstants.massiveActions)("actionTitle",e.dictionary.chooseAction)}}function Qe(e,t){if(1&e&&(c.fc(0,"ui-blank-slate",15),c.xc(1,"t"),c.xc(2,"t")),2&e){const e=c.wc(2);c.Dc("illustrationName","no-item-found")("illustrationSize",e.emptyTabObject.illustrationSize)("title",c.yc(1,4,e.dictionary.noResultsTitle))("description",c.yc(2,6,e.dictionary.noResultsSubtitle))}}function Ke(e,t){if(1&e){const e=c.lc();c.kc(0,"data-browser",2),c.sc("onFiltersUpdate",function(t){return c.Vc(e),c.wc().onFiltersUpdate(t)}),c.kc(1,"div",3),c.ed(2,Ye,8,12,"hyd-table",4),c.jc(),c.kc(3,"div",5),c.fc(4,"hyd-paginator",6),c.kc(5,"div",7),c.ed(6,We,1,6,"massive-actions-bar",8),c.jc(),c.jc(),c.ed(7,Qe,3,8,"ui-blank-slate",9),c.jc()}if(2&e){const e=c.wc();c.Dc("dataBrowserSource",e.assignmentListDataSource),c.Mb(1),c.Dc("hidden",!1),c.Mb(1),c.Dc("ngIf",e.tableData.length>0),c.Mb(2),c.Dc("pageIndex",0)("pageSize",20)("showPageSizeDropdown",!1)("pageSizeAutoAllowed",!1)("length",e.fullTableData.length),c.Mb(2),c.Dc("ngIf",e.selectedRows.length>0),c.Mb(1),c.Dc("ngIf",0===e.tableData.length&&e.isFilterSearchOn)}}function Je(e,t){if(1&e&&(c.fc(0,"ui-blank-slate",16),c.xc(1,"t"),c.xc(2,"t")),2&e){const e=c.wc();c.Dc("illustrationName",e.emptyTabObject.illustrationName)("illustrationSize",e.emptyTabObject.illustrationSize)("title",c.yc(1,4,e.emptyTabObject.blankSlateTitle))("description",c.yc(2,6,e.emptyTabObject.blankSlateDescription))}}let Xe=(()=>{class e{constructor(e,t,i){this.dictionary=e,this.docService=t,this.backendService=i,this.tableData=[],this.fullTableData=[],this.selectedRows=[],this.isFilterSearchOn=!1,this.currentSelections={selectedAll:!1,selectedRows:[]}}ngOnInit(){this.initEmptyTabObject(this.recordsType),this.initTableData(this.recordsType),this.editListConstants=new Re(this),this.assignmentListDataSource=this.editListConstants.assignmentListDataSource,this.tableColumns=this.editListConstants.tableColumns,this.docService.page.activateFullHeightMode()}openUnassignDialog(e,[...t]){this.docService.dialog.showCommonDialog(this.editListConstants.getUnassignDialogOptions(this.recordsType)).subscribe(i=>{if(i.actionSuccess.next(!0),"unassign"===i.actionID){const i=e.map(e=>e.sco_id);this.unassignAssignment(i,t)}})}unassignAssignment(e,t){t=t.filter(t=>!e.includes(t.sco_id));const i=this.buildApiPayload(t,this.recordsType);this.updateAssignments(i).then(()=>{this.tableData=t,this.fullTableData=t,this.currentSelections={selectedAll:!1,selectedRows:[]},this.selectedRows=[],this.docService.toast.showToast({type:"success",message:this.dictionary.successMessage})},()=>{this.docService.toast.showToast({type:"error",message:this.dictionary.errorMessage})})}onFiltersUpdate(e){e.search&&e.search.length>=3?(this.isFilterSearchOn=!0,this.tableData=this.fullTableData.filter(t=>t.name.toLowerCase().includes(e.search.toLowerCase()))):(this.isFilterSearchOn=!1,this.tableData=[...this.fullTableData])}onSelectRows(e){e.selectedAll&&!this.isFilterSearchOn?this.selectedRows=[...this.fullTableData]:e.selectedAll&&this.isFilterSearchOn?this.currentSelections={selectedAll:!1,selectedRows:this.selectedRows}:this.selectedRows=e.selectedRows}selectEverything(){this.currentSelections.selectedAll=!0,this.selectedRows=[...this.fullTableData]}unselectEverything(){this.currentSelections.selectedRows=[],this.currentSelections.selectedAll=!1,this.tableData=[...this.tableData],this.selectedRows=[]}updateAssignments(e){return new Promise((t,i)=>this.backendService.request("/learn/v1/webinar/adobeconnect/accounts/assignments/"+this.adobeAccount.id,Ee.a.PUT,e).subscribe(()=>{t(!0)},()=>{i(!1)}))}buildApiPayload(e,t){return{items:[{assignment_type:t,assignments:e}]}}initTableData(e){var t,i,s;switch(e){case Ae.TEMPLATE:this.tableData=null!==(t=this.adobeAccount.assignedTemplates)&&void 0!==t?t:[];break;case Ae.FOLDER:this.tableData=null!==(i=this.adobeAccount.assignedFolders)&&void 0!==i?i:[];break;case Ae.ROOM:this.tableData=null!==(s=this.adobeAccount.assignedRooms)&&void 0!==s?s:[]}this.fullTableData=[...this.tableData]}initEmptyTabObject(e){switch(e){case Ae.TEMPLATE:this.emptyTabObject={blankSlateTitle:this.dictionary.templateTabBlankSlateTitle,blankSlateDescription:this.dictionary.templateTabBlankSlateSubtitle,illustrationName:"different-content-files",illustrationSize:b.qc.MD};break;case Ae.FOLDER:this.emptyTabObject={blankSlateTitle:this.dictionary.folderTabBlankSlateTitle,blankSlateDescription:this.dictionary.folderTabBlankSlateSubtitle,illustrationName:"different-content-files",illustrationSize:b.qc.MD};break;case Ae.ROOM:this.emptyTabObject={blankSlateTitle:this.dictionary.roomTabBlankSlateTitle,blankSlateDescription:this.dictionary.roomTabBlankSlateSubtitle,illustrationName:"different-content-files",illustrationSize:b.qc.MD}}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(L),c.ec(j.a),c.ec(I.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["her-adobeconnect-account-edit-list-tab"]],inputs:{recordsType:"recordsType",adobeAccount:"adobeAccount"},features:[c.Lb([L])],decls:2,vars:2,consts:[["class","data-browser",3,"dataBrowserSource","onFiltersUpdate",4,"ngIf"],["class","list-tab-blankslate",3,"illustrationName","illustrationSize","title","description",4,"ngIf"],[1,"data-browser",3,"dataBrowserSource","onFiltersUpdate"],[1,"hyd-table-wrapper",3,"hidden"],["class","hyd-table-container hyd-table",3,"data","selection","selectable","selectRows",4,"ngIf"],[1,"assignments-list-tab-footer"],[3,"pageIndex","pageSize","showPageSizeDropdown","pageSizeAutoAllowed","length"],[1,"massive-actions-bar-wrapper"],[3,"title","type","counter","orientation","actions","actionTitle","unselectAll$","selectAll$",4,"ngIf"],[3,"illustrationName","illustrationSize","title","description",4,"ngIf"],[1,"hyd-table-container","hyd-table",3,"data","selection","selectable","selectRows"],[3,"headerLabel","fieldName","columnName","sortable"],[3,"columnName","sortable"],[3,"columnName","actions","orientation"],[3,"title","type","counter","orientation","actions","actionTitle","unselectAll$","selectAll$"],[3,"illustrationName","illustrationSize","title","description"],[1,"list-tab-blankslate",3,"illustrationName","illustrationSize","title","description"]],template:function(e,t){1&e&&(c.ed(0,Ke,8,10,"data-browser",0),c.ed(1,Je,3,8,"ui-blank-slate",1)),2&e&&(c.Dc("ngIf",t.fullTableData.length>0),c.Mb(1),c.Dc("ngIf",0===t.fullTableData.length))},directives:[m.p,Fe.a,Ne.b,Ue.a,ze.a,qe.c,qe.d,qe.b,Ve.a,Be.a,b.B],pipes:[M.b,Ge.a],styles:[".list-tab-blankslate ui-illustration{margin-top:var(--hyd-spacing-xl)}.hyd-table-wrapper{padding-bottom:6rem}.assignments-list-tab-footer{position:fixed;bottom:1px;width:100%}"],encapsulation:2}),e})();var Ze=i("3Pt+"),et=i("Z/On"),tt=i("/76g");const it=e=>t=>("string"==typeof t.value&&""==t.value||null==t.value)&&t.parent&&t.parent.controls[e].value?{thisIsRequiredField:"This is mandatory field"}:null,st=(e,t,i)=>s=>s.value>e?{notMoreThan:i.instant("Max limit is {max} {things}",{category:"standard",max:e,things:t})}:null;let nt=(()=>{class e{constructor(){this.tableColumns={name:{headerLabel:tt.a.t("standard","Name"),fieldName:"name",columnName:"name",sortable:!1}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();const at={mode:Me.a.push,filters:new je.a([{title:tt.a.t("standard","Search"),code:"search",type:Me.d.free_search_filter,params:{placeholder:tt.a.t("standard","Search...")}}]),appliedFiltersNumber:new je.a(0),displayedItemsNumber:new je.a(0),viewOptions:new je.a([]),viewOptionLabel:tt.a.t("standard","viewOptionLabel"),disableViewOptions:!0,elementLabels:{singular:tt.a.t("standard","items"),plural:tt.a.t("standard","items")}};var ot=i("LvDl"),rt=i.n(ot),ct=i("19uv");function lt(e,t){if(1&e&&(c.kc(0,"div",4),c.fc(1,"ui-spinner",5),c.kc(2,"div",6),c.gd(3),c.xc(4,"t"),c.fc(5,"br"),c.gd(6),c.xc(7,"t"),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("size","md"),c.Mb(2),c.id(" ",c.yc(4,3,e.dictionary.loadingMessage(e.recordType)),""),c.Mb(3),c.id(" ",c.yc(7,5,e.dictionary.waitMessage)," ")}}function dt(e,t){if(1&e&&(c.kc(0,"div",12),c.kc(1,"div",13),c.fc(2,"icon",14),c.jc(),c.kc(3,"div",15),c.kc(4,"span",16),c.gd(5),c.xc(6,"t"),c.jc(),c.fc(7,"br"),c.kc(8,"span",17),c.gd(9),c.xc(10,"t"),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(5),c.id(" ",c.yc(6,2,e.dictionary.maxNumberExceededMessageTitle)," "),c.Mb(4),c.id(" ",c.yc(10,4,e.dictionary.maxNumberExceededMessage)," ")}}function ut(e,t){if(1&e){const e=c.lc();c.kc(0,"hyd-table",18),c.sc("selectRows",function(t){return c.Vc(e),c.wc(2).onSelectRows(t)}),c.fc(1,"hyd-table-column-text",19),c.jc()}if(2&e){const e=c.wc(2);c.Dc("data",e.tableData)("selectable",!0)("selection",e.defaultSelection)("rowsComparisonFunction",e.assignmentsComparisonFn),c.Mb(1),c.Dc("headerLabel",e.tableHelper.tableColumns.name.headerLabel)("fieldName","name")("columnName",e.tableHelper.tableColumns.name.columnName)("sortable",e.tableHelper.tableColumns.name.sortable)}}const ht=function(e){return{"max-limit-reached":e}};function pt(e,t){if(1&e){const e=c.lc();c.kc(0,"data-browser",7),c.sc("onFiltersUpdate",function(t){return c.Vc(e),c.wc().onFiltersUpdate(t)}),c.ed(1,dt,11,6,"div",8),c.kc(2,"div",9),c.ed(3,ut,2,8,"hyd-table",10),c.jc(),c.fc(4,"hyd-selection-count",11),c.jc()}if(2&e){const e=c.wc();c.Dc("dataBrowserSource",e.assignmentListDataSource),c.Mb(1),c.Dc("ngIf",e.selectedRows.length>e.maxNumber),c.Mb(1),c.Dc("hidden",!1)("ngClass",c.Ic(8,ht,e.selectedRows.length>e.maxNumber)),c.Mb(1),c.Dc("ngIf",e.tableData.length>0),c.Mb(1),c.Dc("currentCount",e.selectedRows.length)("totalCount",e.maxNumber)("showMaxLimit",!0)}}function gt(e,t){if(1&e&&(c.fc(0,"ui-blank-slate",20),c.xc(1,"t"),c.xc(2,"t")),2&e){const e=c.wc();c.Dc("illustrationName","no-item-found")("illustrationSize",e.emptyTabObject.illustrationSize)("title",c.yc(1,4,e.dictionary.noResultsTitle))("description",c.yc(2,6,e.dictionary.noResultsSubtitle))}}function mt(e,t){if(1&e&&(c.fc(0,"ui-blank-slate",21),c.xc(1,"t"),c.xc(2,"t")),2&e){const e=c.wc();c.Dc("illustrationName",e.emptyTabObject.illustrationName)("illustrationSize",e.emptyTabObject.illustrationSize)("title",c.yc(1,4,e.emptyTabObject.blankSlateTitle))("description",c.yc(2,6,e.emptyTabObject.blankSlateDescription))}}let bt=(()=>{class e{constructor(e,t,i,s,n){this.dictionary=e,this.backendService=t,this.tableHelper=i,this.changeDetector=s,this.docService=n,this.preSelectedRows=[],this.tablePageChange=new c.q,this.selectedRows=[],this.maxNumber=20,this.tableData=[],this.fullTableData=[],this.assignmentListDataSource=at,this.isFilterSearchOn=!1,this.tablePaginator={pageIndex:0,pageSize:20,length:0,pageSizeAutoAllowed:!1,showPageSizeDropdown:!1},this.endpointUrl="/learn/v1/adobe-connect/forwardCommand"}ngOnInit(){this.isLoaded=!1,this.isSearch=!1,this.initEmptyTabObject(this.recordType)}ngAfterViewInit(){this.retrieveAdobeAccountRecords({action:this.action,identifier:"self",resource:this.sessionType,account_id:this.adobeAccountId}).then(e=>{e.data?this.parseData(e.data):(this.docService.toast.showToast({message:this.dictionary.errorMessage,type:"error"}),this.isLoaded=!0)})}onTablePageChange(e){this.tablePaginator.pageSize=e.pageSize,this.tablePaginator.pageIndex=e.pageIndex,this.tablePageChange.emit(e)}onFiltersUpdate(e){e.search&&e.search.length>=3?(this.isFilterSearchOn=!0,this.tableData=this.fullTableData.filter(t=>t.name.toLowerCase().includes(e.search.toLowerCase())),this.defaultSelectionBeforeFilter=rt.a.cloneDeep(this.defaultSelection)):(this.isFilterSearchOn=!1,this.tableData=[...this.fullTableData])}onSelectRows(e){e.selectedAll&&!this.isFilterSearchOn?this.selectedRows=[...this.fullTableData]:e.selectedAll&&this.isFilterSearchOn?(1!==this.tableData.length||this.isStillPresentOnAdobe(this.tableData[0].sco_id,this.defaultSelectionBeforeFilter.selectedRows)||(this.defaultSelectionBeforeFilter.selectedRows.push(this.tableData[0]),this.selectedRows=this.defaultSelectionBeforeFilter.selectedRows),this.defaultSelection={selectedAll:!1,selectedRows:this.selectedRows}):this.selectedRows=e.selectedRows,this.selectedRows.length>this.maxNumber?ft.setConfirmButtonDisabled(!0):(ft.setConfirmButtonDisabled(!1),this.buildItems(this.selectedRows))}buildItems(e){switch(this.action){case"templates":ft.setTemplateItemsSelected(e);break;case"seminar_rooms":ft.setRoomItemsSelected(e);break;case"shared_folders":ft.setFolderItemsSelected(e)}}assignmentsComparisonFn(e,t){return e.sco_id==t.sco_id}initTabContent(){this.preSelectedRows=this.filterPreSelectedRows(this.preSelectedRows,this.tableData),this.defaultSelection={selectedAll:!1,selectedRows:this.preSelectedRows},this.buildItems(this.defaultSelection.selectedRows),this.fullTableData=[...this.tableData],this.tablePaginator.length=this.fullTableData.length,this.selectedRows.length=this.preSelectedRows.length,this.isLoaded=!0,ft.setConfirmButtonDisabled(0==this.selectedRows.length),this.changeDetector.detectChanges()}retrieveAdobeAccountRecords(e){return new Promise(t=>{this.backendService.request(this.endpointUrl,Ee.a.POST,e).subscribe(e=>{t(e)})})}parseData(e){var t,i,s,n,a;let o=[];switch(Array.isArray(null===(t=e["expanded-scos"])||void 0===t?void 0:t.sco)?o=null!==(s=null===(i=e["expanded-scos"])||void 0===i?void 0:i.sco)&&void 0!==s?s:[]:(null===(n=e["expanded-scos"])||void 0===n?void 0:n.sco)&&o.push(null===(a=e["expanded-scos"])||void 0===a?void 0:a.sco),this.action){case"seminar_rooms":for(let e of o)this.tableData.push({sco_id:e["@attributes"]["sco-id"],name:e["url-path"]+e.name,assignment_date:0});break;case"templates":case"shared_folders":for(let e of o)this.tableData.push({sco_id:e["@attributes"]["sco-id"],name:e.name,assignment_date:0});break;default:this.docService.toast.showToast({message:this.dictionary.errorMessage,type:"error"})}setTimeout(()=>{this.initTabContent()})}initEmptyTabObject(e){switch(e){case Ae.TEMPLATE:this.emptyTabObject={blankSlateTitle:this.dictionary.templateBlankSlateTitle,blankSlateDescription:this.dictionary.templateBlankSlateDescription,illustrationName:"different-content-files",illustrationSize:b.qc.MD};break;case Ae.FOLDER:this.emptyTabObject={blankSlateTitle:this.dictionary.folderBlankSlateTitle,blankSlateDescription:this.dictionary.folderBlankSlateDescription,illustrationName:"different-content-files",illustrationSize:b.qc.MD};break;case Ae.ROOM:this.emptyTabObject={blankSlateTitle:this.dictionary.roomBlankSlateTitle,blankSlateDescription:this.dictionary.roomBlankSlateDescription,illustrationName:"different-content-files",illustrationSize:b.qc.MD}}}filterPreSelectedRows(e,t){let i=[];return e.forEach(e=>{this.isStillPresentOnAdobe(e.sco_id,t)&&i.push(e)}),i}isStillPresentOnAdobe(e,t){let i=!1;return t.forEach(t=>{e===t.sco_id&&(i=!0)}),i}}return e.\u0275fac=function(t){return new(t||e)(c.ec(L),c.ec(I.a),c.ec(nt),c.ec(c.i),c.ec(j.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["her-adobeconnect-account-edit-panel"]],inputs:{sessionType:"sessionType",action:"action",adobeAccountId:"adobeAccountId",recordType:"recordType",editTabList:"editTabList",preSelectedRows:"preSelectedRows"},outputs:{tablePageChange:"tablePageChange"},features:[c.Lb([L,nt])],decls:4,vars:4,consts:[["class","spinner",4,"ngIf"],["class","panel-data-browser",3,"dataBrowserSource","onFiltersUpdate",4,"ngIf"],["class","no-results-blankslates",3,"illustrationName","illustrationSize","title","description",4,"ngIf"],["class","no-associate-blankslates",3,"illustrationName","illustrationSize","title","description",4,"ngIf"],[1,"spinner"],[3,"size"],[1,"spinner-padding-top"],[1,"panel-data-browser",3,"dataBrowserSource","onFiltersUpdate"],["class","widget-setting-form-title bg-red border-grey-light",4,"ngIf"],[1,"hyd-table-wrapper",3,"hidden","ngClass"],["class","hyd-table-container",3,"data","selectable","selection","rowsComparisonFunction","selectRows",4,"ngIf"],[1,"hyd-selection-count","hyd-selection-count-panel",3,"currentCount","totalCount","showMaxLimit"],[1,"widget-setting-form-title","bg-red","border-grey-light"],[1,"warning-icon"],[1,"fa","fa-exclamation-circle"],[1,"subtitle-warning"],[1,"title"],[1,"sub-title-message"],[1,"hyd-table-container",3,"data","selectable","selection","rowsComparisonFunction","selectRows"],[3,"headerLabel","fieldName","columnName","sortable"],[1,"no-results-blankslates",3,"illustrationName","illustrationSize","title","description"],[1,"no-associate-blankslates",3,"illustrationName","illustrationSize","title","description"]],template:function(e,t){1&e&&(c.ed(0,lt,8,7,"div",0),c.ed(1,pt,5,10,"data-browser",1),c.ed(2,gt,3,8,"ui-blank-slate",2),c.ed(3,mt,3,8,"ui-blank-slate",3)),2&e&&(c.Dc("ngIf",!t.isLoaded),c.Mb(1),c.Dc("ngIf",t.isLoaded&&t.fullTableData.length>0),c.Mb(1),c.Dc("ngIf",0===t.tableData.length&&t.isFilterSearchOn),c.Mb(1),c.Dc("ngIf",t.isLoaded&&0===t.fullTableData.length))},directives:[m.p,b.Be,Fe.a,m.n,ct.a,Ue.a,ze.a,b.B],pipes:[M.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}.spinner-padding-top[_ngcontent-%COMP%]{padding-top:90px}.widget-setting-form-title[_ngcontent-%COMP%]{box-sizing:border-box;padding:0 25px;border-width:0 0 1px;border-style:solid;display:flex}.bg-red[_ngcontent-%COMP%]{background-color:var(--ui-color-semantic-error-default);max-height:80px}.bg-red-outline[_ngcontent-%COMP%]{background:transparent;color:#fff;border-color:var(--ui-color-semantic-error-default)}@media (-ms-high-contrast:none),(hover:hover),screen and (-ms-high-contrast:active){.bg-red-outline[_ngcontent-%COMP%]:hover{border-color:transparent;background:var(--ui-color-semantic-error-default);color:#fff}}.bg-red-filled[_ngcontent-%COMP%]{color:#fff;border-color:transparent;background:var(--ui-color-semantic-error-default)}.border-grey-light[_ngcontent-%COMP%]{border-color:var(--ui-color-badge-background-light)}.subtitle-warning[_ngcontent-%COMP%]{flex:9;padding-top:var(--hyd-spacing-xxs);padding-bottom:var(--hyd-spacing-xxs)}.subtitle-warning[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#fff;padding:10px 0;line-height:22px}.subtitle-warning[_ngcontent-%COMP%]   .sub-title-message[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:#fff;padding:10px 0;line-height:18px}.warning-icon[_ngcontent-%COMP%]{flex:0;padding-top:1.8rem;height:100%;padding-right:var(--hyd-spacing-xs);font-size:18px}.warning-icon[_ngcontent-%COMP%]   icon[_ngcontent-%COMP%]{color:#fff}  .no-associate-blankslates .ui-blank-slate,   .no-results-blankslates .ui-blank-slate{padding-top:var(--hyd-spacing-huge)}  .no-associate-blankslates .ui-blank-slate .ui-typography-body{padding-left:100px;padding-right:100px}  .panel-data-browser>.docebo-data-browser>.section-wrapper,   .panel-data-browser>.docebo-data-browser>.section-wrapper .mdl-grid{height:100%;overflow:hidden}  .docebo-data-browser .full-width-header-container{max-height:50px}  her-adobeconnect-account-edit-panel{height:100%;overflow:hidden}  her-adobeconnect-account-edit-panel .mdl-cell.mdl-cell--12-col{margin-top:0;margin-bottom:0;height:100%;overflow:hidden}  her-adobeconnect-account-edit-panel .hyd-table-wrapper .hyd-table .hyd-table-body{overflow-y:auto}  her-adobeconnect-account-edit-panel .hyd-table-wrapper:not(.max-limit-reached) .hyd-table .hyd-table-body{height:calc(100vh - 261px)}  her-adobeconnect-account-edit-panel .hyd-table-wrapper.max-limit-reached .hyd-table .hyd-table-body{height:calc(100vh - 336px)}  her-adobeconnect-account-edit-panel .docebo-data-browser #sorting-filters .search-header-container{width:calc(100% - 1px);max-width:calc(100% - 1px)}  .hyd-selection-count-panel{position:fixed;bottom:40px;width:100%}.panel-data-browser[_ngcontent-%COMP%]{position:absolute;overflow:hidden;height:100%;width:100%}.panel-data-browser[_ngcontent-%COMP%]   .hyd-table-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.panel-data-browser[_ngcontent-%COMP%]   .hyd-table-wrapper[_ngcontent-%COMP%]   hyd-table[_ngcontent-%COMP%]{flex-grow:2}.panel-data-browser[_ngcontent-%COMP%]   .hyd-table-wrapper[_ngcontent-%COMP%]   hyd-paginator[_ngcontent-%COMP%]{bottom:0;left:0;width:100%;flex-grow:0}.panel-data-browser[_ngcontent-%COMP%]   .hyd-table-wrapper[_ngcontent-%COMP%]   .select-counter[_ngcontent-%COMP%]{height:44px;padding:0 12px 0 24px;display:flex;align-items:center;font-weight:700}"]}),e})();class ft{constructor(e,t){this.adobeAccount=e,this.adobeEditComponent=t}initDocServices(){var e,t,i,s,n;this.adobeEditComponent.docService.breadcrumbs.setHierarchicalBreadcrumbs([{label:"Adobe Connect V2",href:"/learn/adobeconnect/manage"},{label:null!==(t=null===(e=this.adobeAccount)||void 0===e?void 0:e.name)&&void 0!==t?t:"",href:"/learn/adobeconnect/manage"+(null===(i=this.adobeAccount)||void 0===i?void 0:i.id)}]),this.adobeEditComponent.docService.header.showTitleBar({title:null!==(n=null===(s=this.adobeAccount)||void 0===s?void 0:s.name)&&void 0!==n?n:"",subtitle:this.adobeEditComponent.dictionary.titleBarSubtitle,fullWidth:!0,mode:"bordered"})}setActionsButton(){this.adobeEditComponent.docService.actionButtons.setActionButtons([{properties:{icons:["plus"],BgClass:"bg-positive-green hover-bg-grey-light hover-text-main",tooltipText:"New"},subitems:this.populateSubItemsArray()}])}populateSubItemsArray(){var e;let t=[{icons:["collection-item"],BgClass:"bg-white-opacity text-main",tooltipText:tt.a.t("webinar","Assign Template"),onClick:()=>this.initializeRightPanel(Ae.TEMPLATE)}];switch(null===(e=this.adobeAccount)||void 0===e?void 0:e.sessionType){case"meeting":t.push({icons:["folder"],BgClass:"bg-white-opacity text-main",tooltipText:tt.a.t("webinar","Assign Folder"),onClick:()=>this.initializeRightPanel(Ae.FOLDER)});break;case"seminar":t.push({icons:["tab"],BgClass:"bg-white-opacity text-main",tooltipText:tt.a.t("webinar","Assign Room"),onClick:()=>this.initializeRightPanel(Ae.ROOM)})}return t}initializeRightPanel(e){var t,i;let s=this.populatePanelDataByType(e);this.adobeEditComponent.pageService.rightPanel.setTitle(s.title),this.adobeEditComponent.pageService.rightPanel.setDescription(s.description),this.adobeEditComponent.pageService.rightPanel.setContent({params:{preSelectedRows:this.retrieveSelectedRows(e),sessionType:null===(t=this.adobeAccount)||void 0===t?void 0:t.sessionType,recordType:e,action:s.action,adobeAccountId:null===(i=this.adobeAccount)||void 0===i?void 0:i.id},component:bt}),ft.confirmButton={type:"normal",disabled:!0,properties:{text:tt.a.t("standard","Confirm")},handler:()=>{var t;let i=[];for(let s of ft.selectedItems){let t={name:s.name,sco_id:s.sco_id,assignment_date:this.populateAssignmentDate(s.sco_id,e)};i.push(t)}this.adobeEditComponent.backendService.request("/learn/v1/webinar/adobeconnect/accounts/assignments/"+(null===(t=this.adobeAccount)||void 0===t?void 0:t.id),Ee.a.PUT,{items:[{assignment_type:e,assignments:i}]}).subscribe(()=>{if(this.adobeEditComponent.docService.toast.showToast({message:this.adobeEditComponent.dictionary.successMessagePanelUi(e),type:"success"}),null!==this.adobeAccount){switch(e){case"template":this.adobeAccount.assignedTemplates=i,this.templatesListReference.initTableData(e);break;case"folder":this.adobeAccount.assignedFolders=i,this.foldersListReference.initTableData(e);break;case"room":this.adobeAccount.assignedRooms=i,this.roomsListReference.initTableData(e)}this.adobeEditComponent.tabsManagerComp.activateTabByName(e)}this.adobeEditComponent.pageService.rightPanel.close()},()=>{this.adobeEditComponent.docService.toast.showToast({message:this.adobeEditComponent.dictionary.errorMessage,type:"error"})})}},this.adobeEditComponent.pageService.rightPanel.setActions([{type:"cancel",properties:{text:tt.a.t("standard","_CANCEL")},handler:()=>{this.adobeEditComponent.pageService.rightPanel.close()}},ft.confirmButton]),this.adobeEditComponent.pageService.rightPanel.open()}retrieveSelectedRows(e){switch(e){case"template":return[...this.templatesListReference.tableData];case"folder":return[...this.foldersListReference.tableData];case"room":return[...this.roomsListReference.tableData]}return[]}static setConfirmButtonDisabled(e){ft.confirmButton.disabled=e}static setTemplateItemsSelected(e){ft.selectedItems=e}static setRoomItemsSelected(e){ft.selectedItems=e}static setFolderItemsSelected(e){ft.selectedItems=e}populatePanelDataByType(e){switch(e){case Ae.FOLDER:return{title:this.adobeEditComponent.dictionary.foldersRightPanelTitle,description:this.adobeEditComponent.dictionary.foldersRightPanelDescription,action:"shared_folders"};case Ae.TEMPLATE:return{title:this.adobeEditComponent.dictionary.templatesRightPanelTitle,description:this.adobeEditComponent.dictionary.templatesRightPanelDescription,action:"templates"};case Ae.ROOM:return{title:this.adobeEditComponent.dictionary.roomsRightPanelTitle,description:this.adobeEditComponent.dictionary.roomsRightPanelDescription,action:"seminar_rooms"};default:return{title:this.adobeEditComponent.dictionary.defaultTitle,description:this.adobeEditComponent.dictionary.defaultDescription,action:""}}}static toCapitalLetter(e){try{return e.charAt(0).toUpperCase()+e.slice(1)}catch(t){return e}}populateAssignmentDate(e,t){let i=Date.now(),s=[];switch(t){case"template":s=this.templatesListReference.fullTableData;break;case"folder":s=this.foldersListReference.fullTableData;break;case"room":s=this.roomsListReference.fullTableData}return s.forEach(t=>{e!==t.sco_id||(i=t.assignment_date)}),i}}var _t=i("XNiG"),vt=i("1G5W"),yt=i("Kj3r"),wt=i("/uUt"),Ct=i("Jc1x");const St=["adobeConnectAccountEditTabContentDiv"];function kt(e,t){if(1&e&&(c.kc(0,"ui-input-select-option",27),c.gd(1),c.jc()),2&e){const e=t.$implicit;c.Dc("value",e.value),c.Mb(1),c.id(" ",e.label," ")}}const Tt=function(){return{category:"error"}};function It(e,t){1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.zc(2,1,"Something is missing, please select a Docebo Field",c.Hc(4,Tt))," "))}function xt(e,t){if(1&e&&(c.kc(0,"div",24),c.kc(1,"ui-input-select",25),c.xc(2,"t"),c.xc(3,"t"),c.ed(4,kt,2,2,"ui-input-select-option",26),c.ed(5,It,3,5,"ui-input-error",14),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("label",c.yc(2,6,e.doceboFieldDropdown.label))("formControl",e.doceboFieldDropdown.inputFormControl)("requiredMarker",c.yc(3,8,e.doceboFieldDropdown.requiredMarker))("required",e.doceboFieldDropdown.required),c.Mb(3),c.Dc("ngForOf",e.doceboFieldDropdown.options),c.Mb(1),c.Dc("ngIf",(null==e.doceboFieldDropdown.inputFormControl.errors?null:e.doceboFieldDropdown.inputFormControl.errors.required)&&e.doceboFieldDropdown.inputFormControl.dirty)}}function Dt(e,t){if(1&e&&(c.kc(0,"div",20),c.kc(1,"div",21),c.kc(2,"div",16),c.gd(3),c.xc(4,"t"),c.kc(5,"div",22),c.gd(6),c.xc(7,"t"),c.jc(),c.jc(),c.kc(8,"ui-input-checkbox",18),c.kc(9,"ui-input-label"),c.gd(10),c.xc(11,"t"),c.jc(),c.kc(12,"ui-input-description"),c.gd(13),c.xc(14,"t"),c.jc(),c.jc(),c.jc(),c.ed(15,xt,6,10,"div",23),c.jc()),2&e){const e=c.wc();c.Mb(3),c.id(" ",c.yc(4,6,e.dictionary.attendanceTrackingTitle)," "),c.Mb(3),c.id(" ",c.yc(7,8,e.dictionary.attendanceTrackingSubtitle)," "),c.Mb(2),c.Dc("formControl",e.attendanceTrackingCheckbox.inputFormControl),c.Mb(2),c.id(" ",c.yc(11,10,e.dictionary.attendanceTrackingCheckboxTitle)," "),c.Mb(3),c.id(" ",c.yc(14,12,e.dictionary.attendanceTrackingCheckboxDesc)," "),c.Mb(2),c.Dc("ngIf",e.attendanceTrackingCheckbox.inputFormControl.value)}}function Ot(e,t){1&e&&c.fc(0,"hr")}function Et(e,t){if(1&e&&(c.kc(0,"div",28),c.fc(1,"textfield",29),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitCourses.type)("id",e.sessionLimitCourses.id)("floating_label",e.sessionLimitCourses.floating_label)("label",e.sessionLimitCourses.label)("max_length",e.sessionLimitCourses.max_length)("inputFormControl",e.sessionLimitCourses.inputFormControl)("showRequiredFieldIndicator",!0)("minValueNumber",0)}}function At(e,t){if(1&e&&(c.kc(0,"div",28),c.fc(1,"textfield",29),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitAccount.type)("id",e.sessionLimitAccount.id)("floating_label",e.sessionLimitAccount.floating_label)("label",e.sessionLimitAccount.label)("max_length",e.sessionLimitAccount.max_length)("inputFormControl",e.sessionLimitAccount.inputFormControl)("showRequiredFieldIndicator",!0)("minValueNumber",0)}}function Pt(e,t){if(1&e&&(c.kc(0,"div",28),c.fc(1,"textfield",29),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitConcurrentRooms.type)("id",e.sessionLimitConcurrentRooms.id)("floating_label",e.sessionLimitConcurrentRooms.floating_label)("label",e.sessionLimitConcurrentRooms.label)("max_length",e.sessionLimitConcurrentRooms.max_length)("inputFormControl",e.sessionLimitConcurrentRooms.inputFormControl)("showRequiredFieldIndicator",!0)("minValueNumber",0)}}const Mt=function(){return{category:"standard"}},Lt=function(){return{category:"webinar"}};let jt=(()=>{class e{constructor(e,t,i,s,n){this.dictionary=e,this.translationService=t,this.backendService=i,this.pageService=s,this.docService=n,this.canShowAttendanceTrackingOption=!1,this.ngUnsubscribe=new _t.a,this.NAME_MAX_LENGTH=50,this.formGroup=new Ze.h({})}ngOnInit(){this.updateAdobeAccountFormGroup(),this.initFormFieldsParameters(),this.sessionLimitCheckboxesValueChanges(["Courses","Account","ConcurrentRooms"]),this.canShowAttendanceTrackingOption&&this.attendanceTrackingCheckboxControlValueChanges()}ngAfterViewInit(){this.initFloatingSaveBarAndButton(),rt.a.delay(()=>{this.adobeConnectAccountEditTabContentDiv.nativeElement.insertAdjacentHTML("beforeend",'<div class="safariHotfix"> </div>')},500)}ngOnDestroy(){this.pageService.hideFloatingSaveBar(),this.pageService.destroyFloatingSaveBar(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}updateAdobeAccountFormGroup(){this.formGroup.setControl("name",new Ze.e(this.adobeAccountObject.name,[Ze.x.required,Ze.x.maxLength(this.NAME_MAX_LENGTH)])),this.formGroup.setControl("description",new Ze.e(this.adobeAccountObject.description)),this.formGroup.setControl("username",new Ze.e(this.adobeAccountObject.username,Ze.x.required)),this.formGroup.setControl("password",new Ze.e(this.adobeAccountObject.password,Ze.x.required)),this.formGroup.setControl("serverUrl",new Ze.e(this.adobeAccountObject.serverUrl,Ze.x.required)),this.formGroup.setControl("sessionType",new Ze.e(ft.toCapitalLetter(this.adobeAccountObject.sessionType))),this.formGroup.setControl("sessionLimitAccountCheckbox",new Ze.e(!!this.adobeAccountObject.sessionLimitAccount)),this.formGroup.setControl("sessionLimitCoursesCheckbox",new Ze.e(!!this.adobeAccountObject.sessionLimitCourses)),this.formGroup.setControl("sessionLimitConcurrentRoomsCheckbox",new Ze.e(!!this.adobeAccountObject.sessionLimitConcurrentRooms)),this.canShowAttendanceTrackingOption&&(this.formGroup.setControl("attendanceTrackingCheckbox",new Ze.e(!!this.adobeAccountObject.doceboField)),this.formGroup.setControl("doceboField",new Ze.e(this.adobeAccountObject.doceboField,[it("attendanceTrackingCheckbox")]))),this.formGroup.setControl("sessionLimitAccount",new Ze.e(this.adobeAccountObject.sessionLimitAccount,[st(999,"sessions",this.translationService),it("sessionLimitAccountCheckbox")])),this.formGroup.setControl("sessionLimitCourses",new Ze.e(this.adobeAccountObject.sessionLimitCourses,[st(999,"sessions",this.translationService),it("sessionLimitCoursesCheckbox")])),this.formGroup.setControl("sessionLimitConcurrentRooms",new Ze.e(this.adobeAccountObject.sessionLimitConcurrentRooms,[st(999,"sessions",this.translationService),it("sessionLimitConcurrentRoomsCheckbox")]))}initFormFieldsParameters(){this.name={label:tt.a.t("webinar","Account Name"),max_length:this.NAME_MAX_LENGTH,show_counter:!0,requiredMarker:this.dictionary.requiredMarkerLabel,inputFormControl:this.formGroup.controls.name},this.description={label:tt.a.t("app7020","Description"),inputFormControl:this.formGroup.controls.description},this.username={id:"username",label:tt.a.t("standard","Username"),requiredMarker:this.dictionary.requiredMarkerLabel,inputFormControl:this.formGroup.controls.username},this.password={label:tt.a.t("WebhookAuth","Password"),requiredMarker:this.dictionary.requiredMarkerLabel,tooltip_label_show:tt.a.t("standard","Show"),tooltip_label_hide:tt.a.t("standard","Hide"),inputFormControl:this.formGroup.controls.password},this.serverUrl={label:tt.a.t("custom_domain","_DOMAIN_NAME_"),requiredMarker:this.dictionary.requiredMarkerLabel,inputFormControl:this.formGroup.controls.serverUrl},this.sessionType={type:et.a.TEXT,label:this.dictionary.sessionTypeLabel,inputFormControl:this.formGroup.controls.sessionType},this.sessionLimitCoursesCheckbox={label:tt.a.t("webinar","Set session limits for courses"),inputFormControl:this.formGroup.controls.sessionLimitCoursesCheckbox,checked:!1},this.sessionLimitAccountCheckbox={label:tt.a.t("webinar","Set session limits per accounts"),inputFormControl:this.formGroup.controls.sessionLimitAccountCheckbox,checked:!1},this.sessionLimitConcurrentRoomsCheckbox={label:tt.a.t("webinar","Set session for concurrent rooms"),inputFormControl:this.formGroup.controls.sessionLimitConcurrentRoomsCheckbox,checked:!1},this.canShowAttendanceTrackingOption&&(this.attendanceTrackingCheckbox={label:tt.a.t("app7020","Attendance Tracking"),inputFormControl:this.formGroup.controls.attendanceTrackingCheckbox,checked:!1},this.doceboFieldDropdown={label:tt.a.t("salesforce","Docebo Field"),inputFormControl:this.formGroup.controls.doceboField,options:this.mapDoceboFields(this.adobeAccountObject.doceboFieldList),required:!0,requiredMarker:this.dictionary.requiredMarkerLabel}),this.sessionLimitAccount={type:et.a.NUMBER,id:"session-limit-accounts",floating_label:!0,label:tt.a.t("webinar","Max sessions for this account"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.controls.sessionLimitAccount},this.sessionLimitCourses={type:et.a.NUMBER,id:"session-limit-courses",floating_label:!0,label:tt.a.t("configuration","Max rooms per course"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.controls.sessionLimitCourses},this.sessionLimitConcurrentRooms={type:et.a.NUMBER,id:"session-limit-concurrent-rooms",floating_label:!0,label:tt.a.t("configuration","Max concurrent rooms"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.controls.sessionLimitConcurrentRooms}}mapDoceboFields(e){return e?Object.entries(e).map(([e,t])=>({value:e,label:t})):[]}setCheckBoxesAndInputTexts(){this.sessionLimitAccountCheckbox.checked=!!this.adobeAccountObject.sessionLimitAccount,this.sessionLimitCoursesCheckbox.checked=!!this.adobeAccountObject.sessionLimitCourses,this.sessionLimitConcurrentRoomsCheckbox.checked=!!this.adobeAccountObject.sessionLimitConcurrentRooms,this.sessionLimitAccountCheckbox.inputFormControl.valueChanges.subscribe(e=>{e?(this.sessionLimitAccount.inputFormControl.setValue(0!==this.adobeAccountObject.sessionLimitAccount?this.adobeAccountObject.sessionLimitAccount:null),this.sessionLimitAccountCheckbox.checked=!0):(this.sessionLimitAccount.inputFormControl.setValue(null),this.sessionLimitAccountCheckbox.checked=!1)}),this.sessionLimitCoursesCheckbox.inputFormControl.valueChanges.subscribe(e=>{e?(this.sessionLimitCourses.inputFormControl.setValue(0!==this.adobeAccountObject.sessionLimitCourses?this.adobeAccountObject.sessionLimitCourses:null),this.sessionLimitCoursesCheckbox.checked=!0):(this.sessionLimitCourses.inputFormControl.setValue(null),this.sessionLimitCoursesCheckbox.checked=!1)}),this.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges.subscribe(e=>{e?(this.sessionLimitConcurrentRooms.inputFormControl.setValue(0!==this.adobeAccountObject.sessionLimitConcurrentRooms?this.adobeAccountObject.sessionLimitConcurrentRooms:null),this.sessionLimitConcurrentRoomsCheckbox.checked=!0):(this.sessionLimitConcurrentRooms.inputFormControl.setValue(null),this.sessionLimitConcurrentRoomsCheckbox.checked=!1)})}initFloatingSaveBarAndButton(){this.pageService.initFloatingSaveButton({formControl:this.formGroup,initHidden:!0,isSubmitAlwaysEnabled:!1,actions:[{properties:{text:this.dictionary.confirmButton,colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>this.saveChanges()}]}),this.pageService.showFloatingSaveBar(),this.formGroup.markAsPristine(),this.formGroup.valueChanges.pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(()=>{this.formGroup.markAsDirty(),this.pageService.floatingSaveButtonMarkAsDirty(this.formGroup.dirty),this.formGroup.dirty&&this.pageService.preventNavigation()})}saveChanges(){return this.formGroup.valid?new Promise((e,t)=>{const i=this.formGroup.getRawValue(),s=this.canShowAttendanceTrackingOption?i.attendanceTrackingCheckbox?i.doceboField:"":void 0,n={id:this.adobeAccountObject.id,name:i.name,tool:(a=i.sessionType.toLowerCase(),{meeting:"adobeconnectv2meeting",seminar:"adobeconnectv2seminar"}[a]),session_type:i.sessionType.toLowerCase(),additional_info:i.description,admin_username:i.username,admin_password:i.password,server_url:i.serverUrl,email:"",max_sessions:i.sessionLimitAccountCheckbox?i.sessionLimitAccount:0,max_sessions_per_course:i.sessionLimitCoursesCheckbox?i.sessionLimitCourses:0,max_concurrent_sessions:i.sessionLimitConcurrentRoomsCheckbox?i.sessionLimitConcurrentRooms:0,tool_mapping_field_lms:s};var a;this.backendService.request("/learn/v1/webinar/adobeconnect/accounts/"+this.adobeAccountObject.id,Ee.a.PUT,n).subscribe(({data:t})=>{var i;e(this.dictionary.successMessage),this.pageService.floatingSaveButtonMarkAsDirty(!1),this.formGroup.controls.sessionLimitCourses.setValue(t.max_sessions_per_course),this.formGroup.controls.sessionLimitAccount.setValue(t.max_sessions),this.formGroup.controls.sessionLimitConcurrentRooms.setValue(t.max_concurrent_sessions),this.formGroup.markAsPristine(),this.docService.header.showTitleBar({title:null!==(i=t.name)&&void 0!==i?i:"",subtitle:this.dictionary.titleBarSubtitle,fullWidth:!0,mode:"bordered"})},()=>{t(this.dictionary.errorMessage),this.pageService.floatingSaveButtonMarkAsDirty(!0)})}):(this.pageService.floatingSaveButtonMarkAsDirty(!0),this.markOptionalCheckboxesAsTouched(),new Promise((e,t)=>{t(this.dictionary.errorMessage)}))}markOptionalCheckboxesAsTouched(){this.sessionLimitAccountCheckbox.checked&&this.formGroup.controls.sessionLimitAccount.markAsTouched(),this.sessionLimitCoursesCheckbox.checked&&this.formGroup.controls.sessionLimitCourses.markAsTouched(),this.sessionLimitConcurrentRoomsCheckbox.checked&&this.formGroup.controls.sessionLimitConcurrentRooms.markAsTouched()}resetForm(){this.formGroup.reset()}attendanceTrackingCheckboxControlValueChanges(){return this.formGroup.controls.attendanceTrackingCheckbox.valueChanges.pipe(Object(yt.a)(400),Object(wt.a)(),Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{e?this.formGroup.controls.doceboField.setValidators([Ze.x.required]):(this.formGroup.controls.doceboField.clearValidators(),this.formGroup.controls.doceboField.setErrors(null)),this.formGroup.controls.doceboField.updateValueAndValidity()})}sessionLimitCheckboxesValueChanges(e){e.forEach(e=>{this.formGroup.controls[`sessionLimit${e}Checkbox`].valueChanges.pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(t=>{t?this.formGroup.controls[`sessionLimit${e}`].setValidators([Ze.x.required,st(999,"ConcurrentRooms"===e?"rooms":"sessions",this.translationService)]):(this.formGroup.controls[`sessionLimit${e}`].clearValidators(),this.formGroup.controls[`sessionLimit${e}`].setValue(this.formGroup.controls[`sessionLimit${e}`].value||0)),this.formGroup.controls[`sessionLimit${e}`].updateValueAndValidity(),this.formGroup.controls[`sessionLimit${e}`].markAsTouched(),this.formGroup.controls[`sessionLimit${e}`].markAsDirty()})})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(L),c.ec(u.h),c.ec(I.a),c.ec(u.c),c.ec(j.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["her-adobeconnect-account-edit-properties-tab"]],viewQuery:function(e,t){if(1&e&&c.nd(St,1),2&e){let e;c.Rc(e=c.tc())&&(t.adobeConnectAccountEditTabContentDiv=e.first)}},inputs:{adobeAccountObject:"adobeAccountObject",canShowAttendanceTrackingOption:"canShowAttendanceTrackingOption"},features:[c.Lb([L])],decls:87,vars:110,consts:[[1,"wrapper"],[3,"activeTab"],[3,"tabName","title"],[1,"adobeconnect-account-edit-tab-content"],["adobeConnectAccountEditTabContentDiv",""],[1,"hyd-row"],[1,"bold-subtitle","options-subtitle","hyd-col-24","hyd-col-md-24"],[1,"hyd-col-24","hyd-col-md-12"],[3,"label","requiredMarker","formControl","autocomplete","maxLength"],[3,"label","requiredMarker","formControl","autocomplete"],[1,"hyd-col-24","hyd-col-md-24"],[3,"label","formControl","autocomplete"],[3,"label","requiredMarker","formControl","tooltipLabelShow","tooltipLabelHide","autocomplete"],["class","ui-row",4,"ngIf"],[4,"ngIf"],[1,"hyd-row","session-type-row"],[1,"bold-subtitle","options-subtitle"],[3,"label","type","inputFormControl","readOnly","showRequiredFieldIndicator"],[3,"formControl"],["class","input-of-checkbox-spacer",4,"ngIf"],[1,"ui-row"],[1,"ui-col-24","ui-col-md-24"],[1,"ui-typography-subtitle","ui-color-typography-secondary"],["class","ui-col-24 ui-col-md-12",4,"ngIf"],[1,"ui-col-24","ui-col-md-12"],["ngDefaultControl","",3,"label","formControl","requiredMarker","required"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"input-of-checkbox-spacer"],[3,"type","id","floating_label","label","max_length","inputFormControl","showRequiredFieldIndicator","minValueNumber"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"ui-tabs-vertical",1),c.kc(2,"ui-tab-vertical",2),c.xc(3,"t"),c.kc(4,"ui-tab-vertical-header"),c.kc(5,"ui-tab-vertical-title"),c.gd(6),c.xc(7,"t"),c.jc(),c.kc(8,"ui-tab-vertical-description"),c.gd(9),c.xc(10,"t"),c.jc(),c.jc(),c.kc(11,"ui-tab-vertical-content"),c.kc(12,"div",3,4),c.kc(14,"div",5),c.kc(15,"div",6),c.gd(16),c.xc(17,"t"),c.jc(),c.kc(18,"div",7),c.fc(19,"ui-input-text",8),c.xc(20,"t"),c.xc(21,"t"),c.jc(),c.kc(22,"div",7),c.fc(23,"ui-input-text",9),c.xc(24,"t"),c.xc(25,"t"),c.jc(),c.jc(),c.kc(26,"div",5),c.kc(27,"div",10),c.fc(28,"ui-input-text",11),c.xc(29,"t"),c.jc(),c.jc(),c.kc(30,"div",5),c.kc(31,"div",7),c.fc(32,"ui-input-text",9),c.xc(33,"t"),c.xc(34,"t"),c.jc(),c.kc(35,"div",7),c.fc(36,"ui-input-password",12),c.xc(37,"t"),c.xc(38,"t"),c.xc(39,"t"),c.xc(40,"t"),c.jc(),c.jc(),c.jc(),c.jc(),c.jc(),c.kc(41,"ui-tab-vertical",2),c.xc(42,"t"),c.kc(43,"ui-tab-vertical-header"),c.kc(44,"ui-tab-vertical-title"),c.gd(45),c.xc(46,"t"),c.jc(),c.kc(47,"ui-tab-vertical-description"),c.gd(48),c.xc(49,"t"),c.jc(),c.jc(),c.kc(50,"ui-tab-vertical-content"),c.kc(51,"div",3),c.ed(52,Dt,16,14,"div",13),c.ed(53,Ot,1,0,"hr",14),c.kc(54,"div",15),c.kc(55,"div",7),c.kc(56,"div",16),c.gd(57),c.xc(58,"t"),c.jc(),c.fc(59,"textfield",17),c.xc(60,"t"),c.xc(61,"t"),c.jc(),c.fc(62,"div",7),c.jc(),c.fc(63,"hr"),c.kc(64,"div",5),c.kc(65,"div",10),c.kc(66,"div",16),c.gd(67),c.xc(68,"t"),c.jc(),c.kc(69,"ui-input-checkbox",18),c.kc(70,"ui-input-label"),c.gd(71),c.xc(72,"t"),c.jc(),c.jc(),c.ed(73,Et,2,8,"div",19),c.xc(74,"async"),c.kc(75,"ui-input-checkbox",18),c.kc(76,"ui-input-label"),c.gd(77),c.xc(78,"t"),c.jc(),c.jc(),c.ed(79,At,2,8,"div",19),c.xc(80,"async"),c.kc(81,"ui-input-checkbox",18),c.kc(82,"ui-input-label"),c.gd(83),c.xc(84,"t"),c.jc(),c.jc(),c.ed(85,Pt,2,8,"div",19),c.xc(86,"async"),c.jc(),c.jc(),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(1),c.Dc("activeTab","general-tab"),c.Mb(1),c.Dc("tabName","general-tab")("title",c.yc(3,50,t.dictionary.generalTabTitle)),c.Mb(4),c.id(" ",c.yc(7,52,t.dictionary.generalVerticalTabTitle)," "),c.Mb(3),c.id(" ",c.yc(10,54,t.dictionary.generalVerticalTabDescription)," "),c.Mb(7),c.id(" ",c.zc(17,56,"General Information",c.Hc(108,Mt))," "),c.Mb(3),c.Dc("label",c.yc(20,59,t.name.label))("requiredMarker",c.yc(21,61,t.name.requiredMarker))("formControl",t.name.inputFormControl)("autocomplete","off")("maxLength",t.name.max_length),c.Mb(4),c.Dc("label",c.yc(24,63,t.serverUrl.label))("requiredMarker",c.yc(25,65,t.serverUrl.requiredMarker))("formControl",t.serverUrl.inputFormControl)("autocomplete","off"),c.Mb(5),c.Dc("label",c.yc(29,67,t.description.label))("formControl",t.description.inputFormControl)("autocomplete","off"),c.Mb(4),c.Dc("label",c.yc(33,69,t.username.label))("requiredMarker",c.yc(34,71,t.username.requiredMarker))("formControl",t.username.inputFormControl)("autocomplete","off"),c.Mb(4),c.Dc("label",c.yc(37,73,t.password.label))("requiredMarker",c.yc(38,75,t.password.requiredMarker))("formControl",t.password.inputFormControl)("tooltipLabelShow",c.yc(39,77,t.password.tooltip_label_show))("tooltipLabelHide",c.yc(40,79,t.password.tooltip_label_hide))("autocomplete","new-password"),c.Mb(5),c.Dc("tabName","details-tab")("title",c.yc(42,81,t.dictionary.detailsTabTitle)),c.Mb(4),c.id(" ",c.yc(46,83,t.dictionary.detailsTabTitle)," "),c.Mb(3),c.id(" ",c.yc(49,85,t.dictionary.detailsVerticalTabDescription)," "),c.Mb(4),c.Dc("ngIf",t.canShowAttendanceTrackingOption),c.Mb(1),c.Dc("ngIf",t.canShowAttendanceTrackingOption),c.Mb(4),c.id(" ",c.zc(58,87,"Session type",c.Hc(109,Lt))," "),c.Mb(2),c.Dc("label",c.yc(60,90,t.sessionType.label)+" "+c.yc(61,92,t.dictionary.requiredMarkerLabel))("type",t.sessionType.type)("inputFormControl",t.sessionType.inputFormControl)("readOnly",!0)("showRequiredFieldIndicator",!1),c.Mb(8),c.id(" ",c.yc(68,94,t.dictionary.optionsLabel)," "),c.Mb(2),c.Dc("formControl",t.sessionLimitCoursesCheckbox.inputFormControl),c.Mb(2),c.id(" ",c.yc(72,96,t.sessionLimitCoursesCheckbox.label)," "),c.Mb(2),c.Dc("ngIf",c.yc(74,98,t.sessionLimitCoursesCheckbox.inputFormControl.valueChanges)||t.sessionLimitCourses.inputFormControl.value>0&&t.sessionLimitCoursesCheckbox.inputFormControl.value),c.Mb(2),c.Dc("formControl",t.sessionLimitAccountCheckbox.inputFormControl),c.Mb(2),c.id(" ",c.yc(78,100,t.sessionLimitAccountCheckbox.label)," "),c.Mb(2),c.Dc("ngIf",c.yc(80,102,t.sessionLimitAccountCheckbox.inputFormControl.valueChanges)||t.sessionLimitAccount.inputFormControl.value>0&&t.sessionLimitAccountCheckbox.inputFormControl.value),c.Mb(2),c.Dc("formControl",t.sessionLimitConcurrentRoomsCheckbox.inputFormControl),c.Mb(2),c.id(" ",c.yc(84,104,t.sessionLimitConcurrentRoomsCheckbox.label)," "),c.Mb(2),c.Dc("ngIf",c.yc(86,106,t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges)||t.sessionLimitConcurrentRooms.inputFormControl.value>0&&t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.value))},directives:[b.af,b.Me,b.Pe,b.Qe,b.Oe,b.Ne,b.Qc,Ze.o,Ze.f,b.Dc,m.p,Ct.a,b.sc,b.Cc,b.zc,b.Lc,Ze.b,Ze.v,m.o,b.Nc,b.Ac],pipes:[M.b,m.b],styles:[".force_refresh{z-index:100}.adobeconnect-account-edit-tab-content ui-input-select{margin:var(--hyd-spacing-xxs) var(--hyd-spacing-lg)}.adobeconnect-account-edit-tab-content .hyd-row{margin-bottom:var(--hyd-spacing-md)}.adobeconnect-account-edit-tab-content ui-input-checkbox div.ui-input-checkbox{margin-bottom:0}"],encapsulation:2}),e})();const Rt=["tabsManager"],Ft=["propertiesTab"],Nt=["templatesList"],Ut=["foldersList"],zt=["roomsList"];function qt(e,t){if(1&e&&(c.kc(0,"tab",6),c.fc(1,"her-adobeconnect-account-edit-list-tab",7,10),c.jc()),2&e){const e=c.wc(2);c.Dc("title",e.dictionary.foldersListTabTitle)("name","folder"),c.Mb(1),c.Dc("recordsType",e.recordTypes.FOLDER)("adobeAccount",e.adobeAccountObject)}}function Vt(e,t){if(1&e&&(c.kc(0,"tab",6),c.fc(1,"her-adobeconnect-account-edit-list-tab",7,11),c.jc()),2&e){const e=c.wc(2);c.Dc("title",e.dictionary.roomsListTabTitle)("name","room"),c.Mb(1),c.Dc("recordsType",e.recordTypes.ROOM)("adobeAccount",e.adobeAccountObject)}}function Bt(e,t){if(1&e){const e=c.lc();c.kc(0,"tabs-manager",1,2),c.sc("tabChoose",function(t){return c.Vc(e),c.wc().onTabChoose(t)}),c.kc(2,"tab",3),c.xc(3,"t"),c.fc(4,"her-adobeconnect-account-edit-properties-tab",4,5),c.jc(),c.kc(6,"tab",6),c.fc(7,"her-adobeconnect-account-edit-list-tab",7,8),c.jc(),c.ed(9,qt,3,4,"tab",9),c.ed(10,Vt,3,4,"tab",9),c.jc()}if(2&e){const e=c.wc();c.dd("height",e.tabsHeight),c.Mb(2),c.Dc("title",c.yc(3,13,e.dictionary.propertiesTabTitle))("name","properties")("defaultTab",!0),c.Mb(2),c.Dc("adobeAccountObject",e.adobeAccountObject)("canShowAttendanceTrackingOption",e.canShowAttendanceTrackingOption),c.Mb(2),c.Dc("title",e.dictionary.templatesListTabTitle)("name","template"),c.Mb(1),c.Dc("recordsType",e.recordTypes.TEMPLATE)("adobeAccount",e.adobeAccountObject),c.Mb(2),c.Dc("ngIf",null!==e.adobeAccountObject&&"meeting"===e.adobeAccountObject.sessionType),c.Mb(1),c.Dc("ngIf",null!==e.adobeAccountObject&&"seminar"===e.adobeAccountObject.sessionType)}}let Gt=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this.dictionary=e,this.docService=t,this.backendService=i,this.pageService=s,this.changeDetectRef=n,this.translationService=a,this.route=o,this.toggleService=r,this.recordTypes=Ae,this.accountId=0,this.adobeAccountObject=null,this.oldTabsHeight="0",this.tabsHeight="0",this.toggleAdobeConnectIsOn=!1,this.toggleAdobeConnectAttendanceTrackingIsOn=!1}get canShowAttendanceTrackingOption(){return this.toggleAdobeConnectAttendanceTrackingIsOn&&this.toggleAdobeConnectIsOn}ngOnInit(){this.toggleAdobeConnectIsOn=this.toggleService.isOn(u.f.TOGGLE_ADOBE_CONNECT_V2_SESSION_COMPLETION_VILT),this.toggleAdobeConnectAttendanceTrackingIsOn=this.toggleService.isOn(u.f.TOGGLE_ADOBE_CONNECT_V2_ATTENDANCE_TRACKING),this.route.paramMap.subscribe(e=>{this.accountId=Number(e.get("account_id")),this.getAdobeConnectAccountDetails(this.accountId).then(e=>{this.adobeAccountObject=e,this.adobeAccountEditHelper=new ft(this.adobeAccountObject,this),this.adobeAccountEditHelper.initDocServices()},e=>{console.log(e)})})}ngAfterViewInit(){this.templatesList.changes.subscribe(()=>{void 0!==this.templatesList&&(this.adobeAccountEditHelper.templatesListReference=this.templatesList.first,this.adobeAccountEditHelper.setActionsButton())}),this.foldersList.changes.subscribe(()=>{void 0!==this.foldersList&&(this.adobeAccountEditHelper.foldersListReference=this.foldersList.first,this.adobeAccountEditHelper.setActionsButton())}),this.roomsList.changes.subscribe(()=>{void 0!==this.roomsList&&(this.adobeAccountEditHelper.roomsListReference=this.roomsList.first,this.adobeAccountEditHelper.setActionsButton())}),setInterval(()=>{if(this.tabsManager){const e=this.tabsManager.nativeElement.getBoundingClientRect().top,t=window.innerHeight-e+"px";this.oldTabsHeight!==t&&(this.tabsHeight=t,this.oldTabsHeight=t)}},1e3)}ngOnDestroy(){this.docService.actionButtons.clearActionButtons()}getAdobeConnectAccountDetails(e){return new Promise(t=>{this.backendService.request("/learn/v1/webinar/adobeconnect/accounts/"+e,Ee.a.GET).subscribe(i=>{var s,n,a;let o={id:e,name:i.data.name,serverUrl:i.data.server_url,description:i.data.description,username:i.data.admin_username,password:i.data.admin_password,sessionType:(i.data.session_type||"meeting").toLowerCase(),createdAt:new Date(i.data.created_at),sessionLimitCourses:i.data.max_rooms_per_course,sessionLimitAccount:i.data.max_rooms,sessionLimitConcurrentRooms:i.data.max_concurrent_rooms,assignedTemplates:null!==(s=i.data.assigned_templates)&&void 0!==s?s:[],assignedFolders:null!==(n=i.data.assigned_folders)&&void 0!==n?n:[],assignedRooms:null!==(a=i.data.assigned_rooms)&&void 0!==a?a:[],doceboField:i.data.tool_mapping_field_lms,doceboFieldList:i.data.docebo_fields};t(o)})})}onTabChoose(e){switch(e){case Ae.TEMPLATE:case Ae.ROOM:case Ae.FOLDER:this.pageService.hideFloatingSaveBar();break;case"properties":this.pageService.showFloatingSaveBar()}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(L),c.ec(j.a),c.ec(I.a),c.ec(u.c),c.ec(c.i),c.ec(u.h),c.ec(s.a),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["her-adobeconnect-account-edit"]],viewQuery:function(e,t){if(1&e&&(c.nd(Rt,1,c.o),c.nd(Rt,1),c.nd(Ft,1),c.nd(Nt,1),c.nd(Ut,1),c.nd(zt,1)),2&e){let e;c.Rc(e=c.tc())&&(t.tabsManager=e.first),c.Rc(e=c.tc())&&(t.tabsManagerComp=e.first),c.Rc(e=c.tc())&&(t.propertiesTab=e.first),c.Rc(e=c.tc())&&(t.templatesList=e),c.Rc(e=c.tc())&&(t.foldersList=e),c.Rc(e=c.tc())&&(t.roomsList=e)}},features:[c.Lb([L])],decls:1,vars:1,consts:[[3,"height","tabChoose",4,"ngIf"],[3,"tabChoose"],["tabsManager",""],[3,"title","name","defaultTab"],[3,"adobeAccountObject","canShowAttendanceTrackingOption"],["propertiesTab",""],[3,"title","name"],[3,"recordsType","adobeAccount"],["templatesList",""],[3,"title","name",4,"ngIf"],["foldersList",""],["roomsList",""]],template:function(e,t){1&e&&c.ed(0,Bt,11,15,"tabs-manager",0),2&e&&c.Dc("ngIf",null!==t.adobeAccountObject)},styles:[".color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}.wrapper{box-sizing:border-box;display:block;margin-top:var(--hyd-spacing-big);padding-bottom:var(--hyd-spacing-huge)}.adobeconnect-account-edit-tab-content{margin-top:var(--hyd-spacing-md);padding-bottom:var(--hyd-spacing-xs);margin-bottom:var(--hyd-spacing-tiny)}.safariHotfix{position:relative;width:1px;height:1px}.bold-subtitle{padding-bottom:15px;font-weight:600;font-size:14px;line-height:20px}.options-container{padding:2px 0}span.mdl-checkbox__label{font-size:13px!important}checkbox .mdl-checkbox__label{font-size:13px}.session-type-row{margin-bottom:var(--hyd-spacing-md)}.hyd-shadow-md{box-shadow:var(--hyd-shadow-md) var(--hyd-color-layout-shadow)!important}.input-of-checkbox-spacer{padding-left:var(--hyd-spacing-md)!important}tabs-manager{display:block}tabs-manager>.tabs-manager{height:100%}tabs-manager>.tabs-manager>.tabs-content{height:calc(100% - 50px)!important;overflow-y:auto!important}tabs-manager>.tabs-manager>.tabs-content>tab>.tab{height:100%}tabs-manager>.tabs-manager>.tabs-content>tab>.tab:not(.tab-visible){height:100%;overflow:hidden}tabs-manager>.tabs-manager>.tabs-content .docebo-data-browser{height:100%}tabs-manager>.tabs-manager>.tabs-content .docebo-data-browser>.section-wrapper{height:calc(100% - 51px);overflow-y:auto}tabs-manager>.tabs-manager>.tabs-content .docebo-data-browser>.section-wrapper>.grid-content-container{overflow:visible;height:auto}"],encapsulation:2}),e})(),Ht=(()=>{class e{canLoad(e,t){return Object(oe.a)()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var $t=i("Karm"),Yt=i("cp0P");let Wt=(()=>{class e{constructor(e,t){this._router=e,this._backendService=t}canActivate(e,t){return this._canAccessOldCourseExperience(e)}canActivateChild(e,t){return this._canAccessOldCourseExperience(e)}_canAccessOldCourseExperience(e){var t,i,s;if(!Object(oe.a)())return!0;const n=e.params.id,o=e.params.title||e.params.slug,r=e.params.id_lo,c=e.params.id_session,l=e.params.lp||e.queryParams.lp,d=e.params.type,u=e.queryParams.generated_by,h=e.queryParams.hash;switch(null===(t=e.routeConfig)||void 0===t?void 0:t.path){case"external":case"internal":const t=(null===(s=null===(i=this._router.getCurrentNavigation())||void 0===i?void 0:i.finalUrl)||void 0===s?void 0:s.root.children.primary.segments)||[];return this._router.createUrlTree([`/learn/courses/${t[t.length-2].path}/${t[t.length-1].path}`]);case"view/elearning/:id/:title":case"view/classroom/:id/:title":case"view/webinar/:id/:title":case"course/:id/:slug":case"course/:id/:slug/:type":return new a.a(e=>{if(l)this._backendService.request(`/learn/v1/lp/${l}`,"GET").pipe(Object(se.a)(1)).subscribe(t=>{var i,s,a,r,c,d,u;const h=null!==(r=null===(a=null===(s=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.courses)||void 0===s?void 0:s.find(e=>e.idCourse===+n))||void 0===a?void 0:a.slug_name)&&void 0!==r?r:o;let p="";p=(null===(d=null===(c=null==t?void 0:t.data)||void 0===c?void 0:c.enrollment)||void 0===d?void 0:d.date_enrolled)?`/learn/learning-plans/${l}/${(null===(u=null==t?void 0:t.data)||void 0===u?void 0:u.slug_name)||"lp_slug"}/courses/${n}/${h}`:`/learn/courses/${n}/${h}`,e.next(this._router.createUrlTree([p])),e.complete()},()=>{e.next(this._router.createUrlTree["not-found"]),e.complete()});else{const t=Object.assign(Object.assign({},u?{generated_by:u}:{}),h?{hash:h}:{});e.next(this._router.createUrlTree([d&&"sign"===d?`/learn/courses/${n}/${o}/lessons/e-signature/sign`:`/learn/courses/${n}/${o}`],{queryParams:t})),e.complete()}});case"course/:id":case"course/:id/play":case"course/:id/play/:id_lo/:slug":case"course/:id/session/:id_session/:slug":return new a.a(t=>{const i=[this._backendService.request(`/learn/v1/courses/${n}`,"GET")];l&&i.push(this._backendService.request(`/learn/v1/lp/${l}`,"GET")),Object(Yt.a)(i).pipe(Object(se.a)(1)).subscribe(i=>{var s,a,d,u,h,p,g,m,b,f;const _=i[0],v=i[1],y=null===(s=null==_?void 0:_.data)||void 0===s?void 0:s.slug_name,w=null===(a=null==v?void 0:v.data)||void 0===a?void 0:a.slug_name;let C=l&&(null===(u=null===(d=null==v?void 0:v.data)||void 0===d?void 0:d.enrollment)||void 0===u?void 0:u.date_enrolled)?`/learn/learning-plans/${l}/${w}/courses/${n}/${y}`:`/learn/courses/${n}/${y}`;if((null===(h=e.routeConfig)||void 0===h?void 0:h.path)&&(null===(g=null===(p=e.routeConfig)||void 0===p?void 0:p.path)||void 0===g?void 0:g.indexOf("id_lo"))>-1){const{params:t}=e;C=t.slug===String($t.a.SIGN)&&t.id_lo.match(/^(sign_)[\d]+$/)?`${C}/lessons/e-signature/sign`:`${C}/lessons/${r}/${o}`}else(null===(m=e.routeConfig)||void 0===m?void 0:m.path)&&(null===(f=null===(b=e.routeConfig)||void 0===b?void 0:b.path)||void 0===f?void 0:f.indexOf("id_session"))>-1&&(C=`${C}/sessions/${c}/${o}`);t.next(this._router.createUrlTree([C])),t.complete()},()=>{t.next(this._router.createUrlTree["not-found"]),t.complete()})});case"lp/:id/:slug":case"view/:id/:title":return this._router.createUrlTree([`/learn/learning-plans/${n}/${o}`]);default:return!0}}}return e.\u0275fac=function(t){return new(t||e)(c.oc(s.h),c.oc(I.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Qt=i("m77G");let Kt=(()=>{class e{constructor(e){this._auth0Service=e}ngOnInit(){this._auth0Service.authenticated||this._auth0Service.login()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Qt.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},styles:[""]}),e})();var Jt=i("pLZG");let Xt=(()=>{class e{constructor(e,t,i){this.auth=e,this.docLayoutService=t,this.router=i,this.subscription=this.router.events.pipe(Object(Jt.a)(e=>e instanceof s.d)).subscribe(()=>{this.docLayoutService.page.activateNoLayoutMode()}),this.auth.handleLoginCallback()}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Qt.a),c.ec(j.a),c.ec(s.h))},e.\u0275cmp=c.Yb({type:e,selectors:[["app-callback"]],decls:1,vars:0,template:function(e,t){1&e&&c.fc(0,"div")},encapsulation:2}),e})();var Zt=i("aWaq"),ei=i("3RMk"),ti=i("quSY"),ii=i("7vd5"),si=i("3/UW"),ni=i("Gql0"),ai=i("vEO/");const oi=function(){return{category:"learn"}};function ri(e,t){1&e&&(c.kc(0,"p"),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.zc(2,1,"Time shown is referred to the location time of the sessions:",c.Hc(4,oi))," "))}function ci(e,t){if(1&e&&(c.kc(0,"div",6),c.fc(1,"ui-notification-inline",9),c.xc(2,"t"),c.xc(3,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("title",c.yc(2,3,e.waitingListTitle))("message",c.yc(3,5,e.waitingListMessage))("type","alert")}}let li=(()=>{class e{constructor(e,t,i,s,n,a){this.backendService=e,this.fb=t,this.ref=i,this.store=s,this.overviewActions=n,this.formatterService=a,this.sessionFieldsParams={unenroll_session:{},enroll_session:{}},this.waitingListTitle=M.a.t("course","Session waiting list"),this.waitingListMessage=M.a.t("course","The maximum number of seats has been reached for the session you are switching to. You will be placed on the waiting list."),this.sessions=[],this.available_enroll=[],this.sessionChangeForm=this.fb.group({enroll_session:[],unenroll_session:[]})}ngOnInit(){this.fillSessionsToDropdowns()}changeSessionRequest(){return new Promise(e=>{const t=this.sessionChangeForm.getRawValue(),i=t.enroll_session.value,s={old_session_id:t.unenroll_session.value,course_id:this.idCourse,new_session:{id:t.enroll_session.value,slug_name:this.sessions.find(e=>{if(e.id_session==i)return e.slug_name})}};this.sessionChanges().pipe(Object(se.a)(1)).subscribe(e=>{window.location.href=`learn/course/${this.idCourse}/session/${e.id}/${e.slug_name}`}),this.store.dispatch(this.overviewActions.changeEnrollmentSession(s)),e(!0)})}sessionChanges(){return a.a.create(e=>{let t=null,i=new ti.a;i=this.store.select(ae.m).subscribe(s=>{s.current_session&&(t=null===t?Number(s.current_session.id):t,Number(s.current_session.id)!==t&&(i.unsubscribe(),e.next(s.current_session),e.complete()))})})}fillSessionsToDropdowns(){const e=[],t=[];this.sessions.forEach(i=>{let s,n,a="",o="";const r=i.dates.length-1;this.useLocationTimezone?(s=new Zt.a(`${i.dates[0].date} ${i.dates[0].start_hour}`).formatUTC(Object(ii.m)(Object(ii.j)(),"short","medium")),a=` (${i.dates[0].timezone})`,n=new Zt.a(`${i.dates[r].date} ${i.dates[r].end_hour}`).formatUTC(Object(ii.m)(Object(ii.j)(),"short","medium")),o=` (${i.dates[r].timezone})`,Object(ii.k)()===i.dates[0].timezone&&Object(ii.k)()===i.dates[r].timezone&&(a="",o="")):(s=(new ei.a).transform(i.start_date),n=(new ei.a).transform(i.end_date)),!1===this.useLocationTimezone&&i.dates[0].timezone===i.dates[r].timezone&&(a="",o="");let c={value:i.id_session,label:`<strong> ${i.name} </strong>\n                        <small> ${s}${a} - ${n}${o} </small>\n                    `};c=this.betterDateTimeFeature(i,c),i.enrolled.can_enroll_session?t.push(c):i.enrolled.is_enrolled&&e.push(c)}),this.sessionFieldsParams={unenroll_session:{label:M.a.t("standard","Unenroll from this session"),options:e,name:"unenroll_session",value:""},enroll_session:{label:M.a.t("standard","Enroll into this session"),options:t,name:"enroll_session",value:""}},this.ref.markForCheck()}betterDateTimeFeature(e,t){const i=Object(ii.m)(Object(ii.j)(),ii.a,ii.a),s=Object(ii.k)(),n=this.formatterService.getFormattedTimezone(s),a=new Zt.a(e.start_date).formatTimezoned(i,s),o=new Zt.a(e.end_date).formatTimezoned(i,s);return t.label=`\n            <strong>${e.name}</strong>\n            <div class="datetime-and-timezone-text">${a.toUpperCase()} | ${o.toUpperCase()} | ${n}</div>\n        `,t}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a),c.ec(Ze.d),c.ec(c.i),c.ec(w.e),c.ec(si.a),c.ec(ni.b))},e.\u0275cmp=c.Yb({type:e,selectors:[["change-session"]],inputs:{sessions:"sessions",available_enroll:"available_enroll",idCourse:"idCourse",useLocationTimezone:"useLocationTimezone"},decls:12,vars:20,consts:[[1,"change-session"],[1,"description"],[4,"ngIf"],[1,"session-change-form","text-black",3,"formGroup"],[1,"row","dropwdown",2,"padding-top","24px"],[3,"getLabels","floating_label","label","options","name","value","inputFormControl"],[1,"row",2,"padding-top","24px"],["customMaxHeight","200px",3,"getLabels","floating_label","label","options","name","value","inputFormControl"],["class","row","style","padding-top:24px",4,"ngIf"],[3,"title","message","type"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.kc(2,"p"),c.gd(3),c.xc(4,"t"),c.jc(),c.ed(5,ri,3,5,"p",2),c.jc(),c.kc(6,"form",3),c.kc(7,"div",4),c.fc(8,"dropdown",5),c.jc(),c.kc(9,"div",6),c.fc(10,"dropdown",7),c.jc(),c.ed(11,ci,4,7,"div",8),c.jc(),c.jc()),2&e&&(c.Mb(3),c.id(" ",c.yc(4,18,"You will be unenrolled from the current session, then enrolled into the selected session. Are you sure you want to proceed with this session change?")," "),c.Mb(2),c.Dc("ngIf",t.useLocationTimezone),c.Mb(1),c.Dc("formGroup",t.sessionChangeForm),c.Mb(2),c.Dc("getLabels",!0)("floating_label",!0)("label",t.sessionFieldsParams.unenroll_session.label)("options",t.sessionFieldsParams.unenroll_session.options)("name",t.sessionFieldsParams.unenroll_session.name)("value",t.sessionFieldsParams.unenroll_session.value)("inputFormControl",t.sessionChangeForm.controls.unenroll_session),c.Mb(2),c.Dc("getLabels",!0)("floating_label",!0)("label",t.sessionFieldsParams.enroll_session.label)("options",t.sessionFieldsParams.enroll_session.options)("name",t.sessionFieldsParams.enroll_session.name)("value",t.sessionFieldsParams.enroll_session.value)("inputFormControl",t.sessionChangeForm.controls.enroll_session),c.Mb(1),c.Dc("ngIf",t.available_enroll[t.sessionChangeForm.getRawValue().enroll_session.value]<=0))},directives:[m.p,Ze.y,Ze.p,Ze.i,ai.a,b.Jd],pipes:[M.b],styles:["[_nghost-%COMP%]     .datetime-and-timezone-text{font-size:var(--hyd-typography-size-xs)}[_nghost-%COMP%]     .dropdown-head .datetime-and-timezone-text{color:var(--ui-color-typography-secondary)}"]}),e})();var di=i("lJxs"),ui=i("j5TW"),hi=i("NCOs");function pi(e,t){if(1&e&&c.fc(0,"img",9),2&e){const e=c.wc();c.Nb("src",e.bannerImage,c.Yc)}}function gi(e,t){1&e&&(c.kc(0,"div",10),c.fc(1,"i",11),c.jc())}function mi(e,t){if(1&e&&c.fc(0,"line-limiter",12),2&e){const e=c.wc();c.Dc("content",e.limiter.content)("lines",e.limiter.lines)("removeHtml",e.limiter.removeHtml)("more_label",e.limiter.more_label)("less_label",e.limiter.less_label)("show_label",e.limiter.showLabel)}}let bi=(()=>{class e{constructor(e,t,i){this.backendService=e,this.pageService=t,this.formatter=i,this.collection="assets",this.hasImage=!0,this.showLimiter=!1,this.limiter={content:"",lines:5,removeHtml:!1,more_label:M.a.t("standard","Show more"),less_label:M.a.t("standard","Show less"),showLabel:!0}}ngOnInit(){if(this.initLimiter(this.course),!this.course.partner_data||""===this.course.partner_data.logo_full_path)return this.bannerImage="",void(this.hasImage=!1);this.bannerImage=this.course.partner_data.logo_full_path}renderJSON(e){const t=JSON.parse(e),i=o.a.getInstance().language;return"single_value"===t.type?t.value:t.values[i]?t.values[i]:t.values.en}initLimiter(e){this.backendService.request("/manage/v1/contentpartnerfields","GET",{id_partner:e.partner_data.id,as_array:!0,course_id:e.id}).pipe(Object(di.a)(e=>e.data.items)).subscribe(t=>{this.limiter={content:this.renderBannerDescription(e.partner_data,t),lines:5,removeHtml:!1,more_label:M.a.t("standard","Show more"),less_label:M.a.t("standard","Show less"),showLabel:t&&t.length>1},this.showLimiter=!0})}renderBannerDescription(e,t){let i="";return i+=this.renderJSON(e.description),void 0!==t&&(i+="<br/>",i+='<ul class="partner-additional-fields-list">',t.forEach(e=>{switch(e.type){case"date":const t=Object(ui.a)(this.formatter,e.value);i+="<li><strong>"+e.title+"</strong>"+t+"</li>";break;case"dropdown":let s="";e.options.forEach(t=>{e.value===t.id&&(s=t.label)}),i+="<li><strong>"+e.title+"</strong>"+s+"</li>";break;default:let n="";null!==e.value&&(n=e.value),i+="<li><strong>"+e.title+"</strong>"+n+"</li>"}}),i+="</ul>",i+="<br/>"),i}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a),c.ec(P.a),c.ec(ni.b))},e.\u0275cmp=c.Yb({type:e,selectors:[["partner-banner"]],inputs:{course:"course"},decls:12,vars:7,consts:[[1,"partner-banner","bg-white","border-grey-light","mdl-shadow--2dp"],[1,"partner-banner-image"],[1,"text-grey-mid","hint","partner-provided"],["alt","",4,"ngIf"],["class","no-image-wrap bg-grey-light",4,"ngIf"],[1,"partner-banner-content"],[1,"title","title-popup","bolded"],[1,"description"],[3,"content","lines","removeHtml","more_label","less_label","show_label",4,"ngIf"],["alt",""],[1,"no-image-wrap","bg-grey-light"],[1,"zmdi","zmdi-image-o"],[3,"content","lines","removeHtml","more_label","less_label","show_label"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.kc(2,"p",2),c.gd(3),c.xc(4,"t"),c.jc(),c.ed(5,pi,1,1,"img",3),c.ed(6,gi,2,0,"div",4),c.jc(),c.kc(7,"div",5),c.kc(8,"h2",6),c.gd(9),c.jc(),c.kc(10,"div",7),c.ed(11,mi,1,6,"line-limiter",8),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(3),c.id("",c.yc(4,5,"Content provided by"),":"),c.Mb(2),c.Dc("ngIf",t.hasImage),c.Mb(1),c.Dc("ngIf",!t.hasImage),c.Mb(3),c.hd(t.renderJSON(t.course.partner_data.name)),c.Mb(2),c.Dc("ngIf",t.showLimiter))},directives:[m.p,hi.a],pipes:[M.b],encapsulation:2}),e})();var fi=i("V3DN"),_i=i("5nM7"),vi=i("7o/Q");function yi(e){return t=>t.lift(new wi(e))}class wi{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new Ci(e,this.predicate))}}class Ci extends vi.a{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}var Si=i("zp1y"),ki=i("eIep"),Ti=i("vkgz"),Ii=i("Rm6y"),xi=i("LVoI"),Di=i("zMZL"),Oi=i("sTJh"),Ei=i("LRne"),Ai=i("1uah"),Pi=i("KaK6"),Mi=i("O2fu"),Li=i("jhN1"),ji=i("4Y2v");function Ri(e,t){if(1&e&&(c.fc(0,"div",4),c.xc(1,"sanitizeHtml")),2&e){const e=c.wc();c.Dc("innerHTML",c.yc(1,1,e.description),c.Wc)}}function Fi(e,t){1&e&&(c.kc(0,"div",9),c.fc(1,"span",10),c.jc())}function Ni(e,t){1&e&&(c.kc(0,"div",9),c.fc(1,"span",10),c.jc())}function Ui(e,t){if(1&e&&(c.kc(0,"div",5),c.ed(1,Fi,2,0,"div",6),c.kc(2,"div",7),c.gd(3),c.jc(),c.fc(4,"div",8),c.ed(5,Ni,2,0,"div",6),c.jc()),2&e){const e=t.$implicit,i=t.index,s=c.wc();c.Mb(1),c.Dc("ngIf",0==i),c.Mb(2),c.hd(e.title),c.Mb(1),c.Dc("innerHTML",e.rendered,c.Wc),c.Mb(1),c.Dc("ngIf",i<s.additional_fields_count)}}let zi=(()=>{class e{constructor(e,t,i){this._backendService=e,this.formatter=t,this.sanitizer=i}ngOnInit(){this.course_description_header=M.a.t("standard","Course Description"),this.showDescription=null!==this.widget.params.show_desc,this._backendService.request("/learn/v1/coursedesc/getCourseDescription?course_id="+this.course_id+"&current_session_id="+this.current_session_id+"&display_type="+this.widget.display_type,"GET").subscribe(e=>{this.title=e.data.course_description.Title,this.description=e.data.course_description.Description,this.additional_fields=this.filterVisibleAdditionalFields(e.data.course_description.Additional_fields),this.additional_fields_count=this.additional_fields.length-1})}filterVisibleAdditionalFields(e){let t=[];return e.forEach(e=>{this.widget.params.additional_fields&&this.widget.params.additional_fields.find(t=>t===e.id)&&"-"!==e.value&&(e.rendered=this.renderFieldValue(e),t.push(e))}),t}renderFieldValue(e){switch(e.type){case"date":return Object(ui.a)(this.formatter,e.value);case"textarea":let t="";return null!==e.value&&(t=e.value),this.sanitizer.bypassSecurityTrustHtml(t);default:let i="";return null!==e.value&&(i=e.value),i}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a),c.ec(ni.b),c.ec(Li.b))},e.\u0275cmp=c.Yb({type:e,selectors:[["course-description"]],inputs:{course_id:"course_id",widget:"widget",current_session_id:"current_session_id"},decls:6,vars:5,consts:[[1,"course-widget","course-description"],[1,"course-widget-title"],["class","default-headings-styles default-list-style description-content",3,"innerHTML",4,"ngIf"],["class","mdl-grid",4,"ngFor","ngForOf"],[1,"default-headings-styles","default-list-style","description-content",3,"innerHTML"],[1,"mdl-grid"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],[1,"mdl-cell","mdl-cell--3-col","bolded"],[1,"mdl-cell","mdl-cell--9-col",3,"innerHTML"],[1,"mdl-cell","mdl-cell--12-col"],[1,"separator-horizontal"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.gd(2),c.xc(3,"t"),c.jc(),c.ed(4,Ri,2,3,"div",2),c.ed(5,Ui,6,4,"div",3),c.jc()),2&e&&(c.Mb(2),c.hd(c.yc(3,3,t.course_description_header)),c.Mb(2),c.Dc("ngIf",t.showDescription),c.Mb(1),c.Dc("ngForOf",t.additional_fields))},directives:[m.p,m.o],pipes:[M.b,ji.a],encapsulation:2}),e})();var qi=i("3zhW");function Vi(e,t){if(1&e&&(c.kc(0,"div",10),c.gd(1),c.jc()),2&e){const e=c.wc().$implicit,t=c.wc(2);c.Mb(1),c.hd(t.getInstructorFullName(e))}}function Bi(e,t){if(1&e&&(c.kc(0,"div",10),c.gd(1),c.jc()),2&e){const e=c.wc().$implicit;c.Mb(1),c.hd(e.userid)}}function Gi(e,t){if(1&e&&(c.kc(0,"div",11),c.fc(1,"a",12),c.jc()),2&e){const e=c.wc().$implicit;c.Mb(1),c.Fc("href","mailto:",e.email,"",c.Yc)}}function Hi(e,t){if(1&e&&(c.kc(0,"div",6),c.fc(1,"avatar",7),c.ed(2,Vi,2,1,"div",8),c.ed(3,Bi,2,1,"div",8),c.ed(4,Gi,2,1,"div",9),c.jc()),2&e){const e=t.$implicit,i=c.wc(2);c.Mb(1),c.Dc("image_url",e.urlAvatar)("size",i.avatarParams.size),c.Mb(1),c.Dc("ngIf",e.firstname.length>0&&e.lastname.length>0),c.Mb(1),c.Dc("ngIf",0==e.firstname.length||0==e.lastname.length),c.Mb(1),c.Dc("ngIf",e.email.length>0)}}const $i=function(e){return{"not-border":e}};function Yi(e,t){if(1&e&&(c.kc(0,"div",4),c.ed(1,Hi,5,5,"div",5),c.jc()),2&e){const e=c.wc();c.Dc("ngClass",c.Ic(2,$i,0==e.instructors.length)),c.Mb(1),c.Dc("ngForOf",e.instructors)}}const Wi=function(){return{category:"classroom"}};function Qi(e,t){1&e&&(c.kc(0,"div",13),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.hd(c.zc(2,1,"(No instructors)",c.Hc(4,Wi))))}const Ki=function(){return{category:"standard"}};let Ji=(()=>{class e{constructor(e){this._backendService=e,this.apiUrl="/learn/v1/instructor/getInstructorData"}ngOnInit(){let e={user_id:this.user_id,course_id:this.course_id};null!=this.session_id&&(e.session_id=this.session_id),this._backendService.request(this.apiUrl,"GET",e).subscribe(e=>{this.instructors=e.data.instructors}),this.avatarParams={image_url:"",size:40}}getInstructorFullName(e){return D.b.getInstance().getFullName(e)}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],inputs:{user_id:"user_id",course_id:"course_id",session_id:"session_id"},decls:6,vars:7,consts:[[1,"course-widget","myinstructor-list"],[1,"course-widget-title"],["class","myinstructor-content",3,"ngClass",4,"ngIf"],["class","myinstructor-nodata",4,"ngIf"],[1,"myinstructor-content",3,"ngClass"],["class","myinstructor-row text-basic-size",4,"ngFor","ngForOf"],[1,"myinstructor-row","text-basic-size"],[3,"image_url","size"],["class","myinstructor-name",4,"ngIf"],["class","myinstructor-icon",4,"ngIf"],[1,"myinstructor-name"],[1,"myinstructor-icon"],[1,"fa","fa-envelope","fa-lg",3,"href"],[1,"myinstructor-nodata"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.gd(2),c.xc(3,"t"),c.jc(),c.ed(4,Yi,2,4,"div",2),c.ed(5,Qi,3,5,"div",3),c.jc()),2&e&&(c.Mb(2),c.hd(c.zc(3,3,"Teacher(s)",c.Hc(6,Ki))),c.Mb(2),c.Dc("ngIf",t.instructors),c.Mb(1),c.Dc("ngIf",t.instructors&&0==t.instructors.length))},directives:[m.p,m.n,m.o,qi.a],pipes:[M.b],encapsulation:2}),e})();var Xi=i("hkxS"),Zi=i("pnJL"),es=i("HpyV"),ts=i("F97A");let is=(()=>{class e{constructor(e,t){this.router=e,this._backendService=t,this.onJoinButtonClick=()=>{window.open(this._backendService.getBaseUrl()+"/lms/index.php?r=videoconference/joinMeeting&room_id="+this.idSession+"&day="+this.daySession)}}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.h),c.ec(I.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["webconference-join-button"]],inputs:{idSession:"idSession",daySession:"daySession",buttonProperties:"buttonProperties"},decls:1,vars:2,consts:[[3,"properties","click"]],template:function(e,t){1&e&&c.fc(0,"rectangular-button",0),2&e&&c.Dc("properties",t.buttonProperties)("click",t.onJoinButtonClick)},directives:[ts.a],encapsulation:2}),e})();var ss=i("E27F"),ns=i("yX1P");function as(e,t){if(1&e){const e=c.lc();c.kc(0,"div",2),c.kc(1,"div",3),c.kc(2,"div",4),c.kc(3,"datetime-picker",5),c.sc("onConfirmDateDialog",function(t){return c.Vc(e),c.wc().onChange(t)}),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(3),c.Dc("type","date")("name","expiration-date")("label",e.searchlabel)("initialEmptyValue",!0)}}function os(e,t){if(1&e&&(c.kc(0,"div",17),c.fc(1,"webconference-join-button",18),c.xc(2,"dateOrigin"),c.jc()),2&e){const e=c.wc(2).$implicit,t=c.wc(2);c.Mb(1),c.Dc("idSession",e.id_session)("daySession",c.zc(2,3,e.day,"yyyy-MM-dd"))("buttonProperties",t.buttonProperties)}}const rs=function(){return{category:"classroom"}};function cs(e,t){if(1&e&&(c.kc(0,"div"),c.kc(1,"div",10),c.gd(2),c.xc(3,"dateOrigin"),c.kc(4,"div",11),c.gd(5),c.xc(6,"dateOrigin"),c.jc(),c.jc(),c.kc(7,"div",12),c.kc(8,"div",13),c.gd(9),c.jc(),c.kc(10,"div",14),c.fc(11,"em",15),c.gd(12),c.xc(13,"t"),c.jc(),c.kc(14,"div",14),c.fc(15,"em",15),c.gd(16),c.xc(17,"transformMinutes"),c.jc(),c.ed(18,os,3,6,"div",16),c.jc(),c.jc()),2&e){const e=c.wc().$implicit;c.Mb(2),c.id("",c.zc(3,7,e.day,"d")," "),c.Mb(3),c.hd(c.zc(6,10,e.day,"MM/y")),c.Mb(4),c.hd(e.name),c.Mb(3),c.jd("",e.date_begin_object," ",c.zc(13,13,"(Your time)",c.Hc(18,rs)),""),c.Mb(4),c.hd(c.yc(17,16,e.total_time)),c.Mb(2),c.Dc("ngIf",e.onair&&1==e.onair||e.isSessionNow)}}function ls(e,t){if(1&e&&(c.kc(0,"div",8),c.ed(1,cs,19,19,"div",9),c.jc()),2&e){const e=t.$implicit;c.Mb(1),c.Dc("ngIf",e.name.length>0)}}const ds=function(e){return{"no-margin-top":e}};function us(e,t){if(1&e&&(c.kc(0,"div",6),c.ed(1,ls,2,1,"div",7),c.jc()),2&e){const e=c.wc();c.Dc("ngClass",c.Ic(2,ds,e.showSearch)),c.Mb(1),c.Dc("ngForOf",e.webconferenceList)}}function hs(e,t){if(1&e&&(c.kc(0,"div",6),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Dc("ngClass",c.Ic(5,ds,e.showSearch)),c.Mb(1),c.id(" ",c.zc(2,2,"(No Webconference)",c.Hc(7,rs)),"\n")}}let ps=(()=>{class e{constructor(e,t){this.formatter=e,this._backendService=t,this.showSearch=!1,this.searchlabel=M.a.t("coaching","Search by date"),this.buttonProperties={text:M.a.t("standard","Join"),typeStyle:"filled",textColor:"text-white",className:"webconference-tab-join-button"}}ngOnInit(){let e=this.formatter.currentUtcDateTime();for(let t=0;t<this.webconferenceList.length;t++)this.webconferenceList[t].isSessionNow=this.webconferenceList[t].date_begin<=e&&this.webconferenceList[t].date_end>=e;this.handleDates()}onChange(e){this._backendService.request("/learn/v1/webconference/getWebconferenceData","GET",{user_id:o.a.getInstance().id,course_id:this.course_id,date_time:e.substr(0,10)}).subscribe(e=>{e.data.webconference&&e.data.webconference.history&&(this.webconferenceList=e.data.webconference.history,this.handleDates())})}handleDates(){for(let e=0;e<this.webconferenceList.length;e++){this.formatter.format("dateTime",this.webconferenceList[e].date_begin,{timezone:o.a.getInstance().timezone,relativeMaxDaysDifference:1},{output:"calendar"}).subscribe(t=>{this.webconferenceList[e].date_begin_object=t});let t="";t=this.showSearch?this.webconferenceList[e].day:this.webconferenceList[e].date_begin,this.formatter.format("dateInUserTimeZone",t,{timezone:o.a.getInstance().timezone},{output:"isoString"}).subscribe(t=>{this.webconferenceList[e].day=t})}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(ni.b),c.ec(I.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],inputs:{webconferenceList:"webconferenceList",showSearch:"showSearch",course_id:"course_id"},decls:3,vars:3,consts:[["class","webconference-tab-wrapper text-basic-size no-margin-top",4,"ngIf"],["class","webconference-tab-wrapper text-basic-size",3,"ngClass",4,"ngIf"],[1,"webconference-tab-wrapper","text-basic-size","no-margin-top"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--4-col","mdl-grid","webconference-tab-row"],[3,"type","name","label","initialEmptyValue","onConfirmDateDialog"],[1,"webconference-tab-wrapper","text-basic-size",3,"ngClass"],["class","webconference-tab-row",4,"ngFor","ngForOf"],[1,"webconference-tab-row"],[4,"ngIf"],[1,"webconference-tab-row-day"],[1,"webconference-tab-row-date"],[1,"webconference-tab-row-content-box"],[1,"webconference-tab-row-title"],[1,"webconference-tab-row-display-time"],[1,"fa","fa-clock-o"],["class","webconference-tab-row-display-button",4,"ngIf"],[1,"webconference-tab-row-display-button"],[3,"idSession","daySession","buttonProperties"]],template:function(e,t){1&e&&(c.ed(0,as,4,4,"div",0),c.ed(1,us,2,4,"div",1),c.ed(2,hs,3,8,"div",1)),2&e&&(c.Dc("ngIf",t.showSearch),c.Mb(1),c.Dc("ngIf",t.webconferenceList&&t.webconferenceList.length>0),c.Mb(1),c.Dc("ngIf",t.webconferenceList&&0==t.webconferenceList.length))},directives:[m.p,es.a,m.n,m.o,is],pipes:[ss.a,M.b,ns.a],encapsulation:2}),e})();var gs=i("z52M");function ms(e,t){if(1&e&&(c.kc(0,"div",3),c.fc(1,"tabs",4),c.jc()),2&e){const e=c.wc();c.Mb(1),c.bd(e.tabsParams.style),c.Dc("panels",e.tabsParams.panels)}}const bs=function(){return{category:"player"}};let fs=(()=>{class e{constructor(e){this._backendService=e,this.apiUrl="/learn/v1/webconference/getWebconferenceData"}ngOnInit(){this._backendService.request(this.apiUrl,"GET",{user_id:this.user_id,course_id:this.course_id}).subscribe(e=>{this.webconferences=e.data.webconference,this.tabsParams={panels:[{title:M.a.t("conference","Scheduled"),content:{params:{webconferenceList:this.webconferences.scheduled,course_id:this.course_id},component:ps}},{title:M.a.t("standard","_HISTORY"),content:{params:{webconferenceList:this.webconferences.history,showSearch:!0,course_id:this.course_id},component:ps}}],style:""}})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],inputs:{user_id:"user_id",course_id:"course_id"},decls:5,vars:6,consts:[[1,"course-widget","webconference"],[1,"course-widget-title"],["class","webconference-content",4,"ngIf"],[1,"webconference-content"],[3,"panels"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.gd(2),c.xc(3,"t"),c.jc(),c.ed(4,ms,2,3,"div",2),c.jc()),2&e&&(c.Mb(2),c.hd(c.zc(3,2,"Video Conferences",c.Hc(5,bs))),c.Mb(2),c.Dc("ngIf",t.webconferences))},directives:[m.p,gs.a],pipes:[M.b],encapsulation:2}),e})();var _s=i("SlIW"),vs=i("Qsg0"),ys=i("rzzE");function ws(e,t){if(1&e&&(c.kc(0,"ui-link",4),c.gd(1),c.jc()),2&e){const e=c.wc();c.Ec("href",e.urlLink),c.Mb(1),c.hd(e.linkText)}}let Cs=(()=>{class e{constructor(e){this._backendService=e}ngOnInit(){let e=this.widget.params.enrollmentAdditionalField;this._backendService.request("/learn/v1/enrollments?id_course="+this.course_id+"&id_user="+this.user_id,"GET").subscribe(t=>{this.withInstructions(this.widget.params.instructionField),this.withUrlLink(t.data.items[0].enrollment_fields[e]),this.withLinkText(this.widget.params.linkTextField)})}ngOnDestroy(){}withInstructions(e){this.instructions=e}withUrlLink(e){this.urlLink=e}withLinkText(e){this.linkText=e&&0!=e.trim().length?e:this.urlLink}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],inputs:{course_id:"course_id",user_id:"user_id",widget:"widget"},decls:7,vars:4,consts:[[1,"course-widget"],[1,"course-widget-title"],[3,"innerHTML"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.gd(2,"Virtual Lab"),c.jc(),c.fc(3,"div",2),c.xc(4,"sanitizeHtml"),c.fc(5,"br"),c.ed(6,ws,2,2,"ui-link",3),c.jc()),2&e&&(c.Mb(3),c.Dc("innerHTML",c.yc(4,2,t.instructions),c.Wc),c.Mb(3),c.Dc("ngIf",null!=t.urlLink))},directives:[m.p,b.ad],pipes:[ji.a],encapsulation:2}),e})();class Ss extends Pi.b{static buildWidgetCustomComponent(e,t,i){switch(e.content_type){case Mi.a.coursedesc:return new Mi.b(zi,t,e);case Mi.a.myinstructor:return new Mi.b(Ji,t,e);case Mi.a.forum:return new Mi.b(Xi.a,t,e);case Mi.a.questions:return new Mi.b(Zi.a,t,e);case Mi.a.videoconf:return new Mi.b(fs,t,e);case Mi.a.comments:return new Mi.b(_s.a,t,e);case Mi.a.coursedocs:return new Mi.b(vs.a,t,e,i);case Mi.a.iframe:return new Mi.b(ys.a,t,e);case Mi.a.virtuallab:return new Mi.b(Cs,t,e,i);default:return null}}}class ks extends Ss{constructor(e,t){super(),this._backendService=e,this.params=t}fetchData(e){let t=[],i=+this.params.course_id,s=E.b.getInstance();return this._backendService.request(`/learn/v1/courses/${i}`,"GET",{},{},I.b,null,e=>this._backendService.redirectWhenCode9000(e)).pipe(Object(di.a)(e=>e.data)).subscribe(n=>{this._backendService.request(`/learn/v1/courses/${i}/widgets`,"GET").pipe(Object(di.a)(e=>e.data)).subscribe(i=>{i.widgets&&i.widgets.length>0||!n.has_overview||e.defaultWidgets&&e.defaultWidgets.length>0&&(i.widgets=e.defaultWidgets);for(let e=0;e<i.widgets.length;e++){let a=i.widgets[e],o=new Mi.c(a.id,a.title,a.content_type,a.display_type,a.position,a.columns_span,a.params?JSON.parse(a.params):{});o.component=Ss.buildWidgetCustomComponent(o,this.params,n),("questions"===a.content_type||"questions-new"===a.content_type)&&(n.has_overview||!s.isPluginActive("Share7020App")||0==n.tree.length)||t.push(o)}})}),Object(Ei.a)(t)}}var Ts=i("ReIE"),Is=i("PEGs"),xs=i("GW7C"),Ds=i("XRhs"),Os=i("Pg6A");function Es(e,t){if(1&e&&(c.kc(0,"div",7),c.kc(1,"div",8),c.gd(2),c.xc(3,"t"),c.jc(),c.fc(4,"line-limiter",9),c.jc()),2&e){const e=c.wc();c.Mb(2),c.id(" ",c.yc(3,2,"Instructors")," "),c.Mb(2),c.Dc("content",e.getInstructors(e.session.instructors))}}function As(e,t){if(1&e&&c.fc(0,"div",16),2&e){const e=c.wc(2);c.Dc("innerHTML",e.locations[e.session.current_location].country_name,c.Wc)}}function Ps(e,t){if(1&e&&c.fc(0,"div",16),2&e){const e=c.wc(2);c.Dc("innerHTML",e.locations[e.session.current_location].address,c.Wc)}}const Ms=function(){return{category:"classroom"}};function Ls(e,t){if(1&e){const e=c.lc();c.kc(0,"div",10),c.fc(1,"i",11),c.kc(2,"div",12),c.fc(3,"div",13),c.xc(4,"t"),c.kc(5,"a",14),c.sc("click",function(t){c.Vc(e);const i=c.wc();return i.loadLocationPreview(i.locations[i.session.current_location],t)}),c.kc(6,"h4"),c.gd(7),c.jc(),c.jc(),c.ed(8,As,1,1,"div",15),c.ed(9,Ps,1,1,"div",15),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(3),c.Dc("innerHTML",c.zc(4,4,"Location",c.Hc(7,Ms)),c.Wc),c.Mb(4),c.hd(e.locations[e.session.current_location].name),c.Mb(1),c.Dc("ngIf",e.locations[e.session.current_location].country_name),c.Mb(1),c.Dc("ngIf",e.locations[e.session.current_location].address)}}const js=function(e){return{date:e}};function Rs(e,t){if(1&e&&(c.kc(0,"div",21),c.gc(1,22),c.jc()),2&e){const e=t.$implicit;c.wc(3);const i=c.Sc(7);c.Mb(1),c.Dc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.Ic(2,js,e))}}function Fs(e,t){if(1&e&&(c.kc(0,"div",19),c.ed(1,Rs,2,4,"div",20),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngForOf",e.session.dates)}}function Ns(e,t){if(1&e&&(c.ic(0),c.gd(1),c.xc(2,"t"),c.xc(3,"t"),c.hc()),2&e){const e=c.wc(4);c.Mb(1),c.id(" ",e.userTimezoneEnabled&&e.isLoggedIn?c.yc(2,1,"Your Time"):c.yc(3,3,"Local Time")," ")}}function Us(e,t){1&e&&(c.gd(0),c.xc(1,"t")),2&e&&c.id(" ",c.yc(1,1,"Local Time")," ")}function zs(e,t){if(1&e&&(c.ic(0),c.gd(1),c.xc(2,"HTime"),c.hc()),2&e){const e=c.wc(2).$implicit,t=c.wc(3);c.Mb(1),c.id("- ",c.Ac(2,1,e.dateEndUTC,t.userTimezoneEnabled&&t.isLoggedIn?t.userTimezone:e.timezone,t.timeFormat),"")}}function qs(e,t){if(1&e&&(c.ic(0),c.kc(1,"div",35),c.kc(2,"span",36),c.gd(3),c.xc(4,"HTime"),c.ed(5,zs,3,5,"ng-container",31),c.jc(),c.kc(6,"div"),c.gd(7),c.xc(8,"timezoneFormatter"),c.jc(),c.jc(),c.hc()),2&e){const e=c.wc().$implicit,t=c.wc(3);c.Mb(3),c.id(" ",c.Ac(4,3,e.dateStartUTC,t.userTimezoneEnabled&&t.isLoggedIn?t.userTimezone:e.timezone,t.timeFormat)," "),c.Mb(2),c.Dc("ngIf",t.isClassroom),c.Mb(2),c.hd(c.yc(8,7,t.userTimezoneEnabled&&t.isLoggedIn?t.userTimezone:e.timezone))}}function Vs(e,t){if(1&e&&(c.ic(0),c.gd(1),c.xc(2,"HTime"),c.hc()),2&e){const e=c.wc(2).$implicit,t=c.wc(3);c.Mb(1),c.id("- ",c.Ac(2,1,e.dateEndUTC,e.timezone,t.timeFormat),"")}}function Bs(e,t){if(1&e&&(c.kc(0,"div",35),c.kc(1,"span",36),c.gd(2),c.xc(3,"HTime"),c.ed(4,Vs,3,5,"ng-container",31),c.jc(),c.kc(5,"div"),c.gd(6),c.xc(7,"timezoneFormatter"),c.jc(),c.jc()),2&e){const e=c.wc().$implicit,t=c.wc(3);c.Mb(2),c.id(" ",c.Ac(3,3,e.dateStartUTC,e.timezone,t.timeFormat)," "),c.Mb(2),c.Dc("ngIf",t.isClassroom),c.Mb(2),c.hd(c.yc(7,7,e.timezone))}}function Gs(e,t){if(1&e&&(c.ic(0),c.fc(1,"i",38),c.gd(2),c.xc(3,"HDate"),c.hc()),2&e){const e=c.wc(2).$implicit,t=c.wc(3);c.Mb(2),c.id(" ",c.zc(3,1,e.dateStartUTC,t.userTimezone)," | ")}}function Hs(e,t){if(1&e&&(c.ic(0),c.gd(1),c.xc(2,"HTime"),c.hc()),2&e){const e=c.wc(2).$implicit,t=c.wc(3);c.Mb(1),c.id("- ",c.Ac(2,1,e.dateEndUTC,t.userTimezone,t.timeFormat),"")}}function $s(e,t){if(1&e&&(c.ic(0),c.kc(1,"div",37),c.fc(2,"i",26),c.kc(3,"span"),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"div",35),c.kc(7,"span",36),c.ed(8,Gs,4,4,"ng-container",31),c.xc(9,"HDate"),c.xc(10,"HDate"),c.gd(11),c.xc(12,"HTime"),c.ed(13,Hs,3,5,"ng-container",31),c.jc(),c.kc(14,"div"),c.gd(15),c.xc(16,"timezoneFormatter"),c.jc(),c.jc(),c.jc(),c.hc()),2&e){const e=c.wc().$implicit,t=c.wc(3);c.Mb(4),c.id(" ",c.yc(5,5,"Your Time")," "),c.Mb(4),c.Dc("ngIf",c.zc(9,7,e.dateStartUTC,t.userTimezone)!==c.zc(10,10,e.dateStartUTC,e.timezone)),c.Mb(3),c.id(" ",c.Ac(12,13,e.dateStartUTC,t.userTimezone,t.timeFormat)," "),c.Mb(2),c.Dc("ngIf",t.isClassroom),c.Mb(2),c.hd(c.yc(16,17,t.userTimezone))}}function Ys(e,t){if(1&e&&(c.kc(0,"p"),c.fc(1,"i",39),c.kc(2,"span",40),c.gd(3),c.xc(4,"transformMinutes"),c.jc(),c.jc()),2&e){const e=c.wc().$implicit;c.Mb(3),c.id(" ",c.yc(4,1,e.duration)," ")}}function Ws(e,t){if(1&e){const e=c.lc();c.kc(0,"div",41),c.fc(1,"i",11),c.kc(2,"div",12),c.kc(3,"a",42),c.sc("click",function(){c.Vc(e);const t=c.wc().$implicit,i=c.wc(3);return i.loadLocationPreview(i.locations[t.id_location])}),c.kc(4,"div"),c.gd(5),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc().$implicit,t=c.wc(3);c.Mb(5),c.hd(t.locations[e.id_location].name)}}function Qs(e,t){1&e&&(c.kc(0,"div",43),c.fc(1,"i",44),c.kc(2,"div",12),c.kc(3,"span",27),c.gd(4),c.xc(5,"t"),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(4),c.hd(c.yc(5,1,"Video Conference")))}function Ks(e,t){if(1&e&&(c.kc(0,"div",45),c.kc(1,"div",46),c.fc(2,"ui-icon",47),c.jc(),c.kc(3,"div",48),c.kc(4,"span"),c.gd(5),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc().$implicit,t=c.wc(3);c.Mb(5),c.id(" ",t.getInstructors(e.instructors),"")}}function Js(e,t){if(1&e&&(c.kc(0,"div",21),c.kc(1,"h4",23),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"div",24),c.gd(5),c.xc(6,"HDate"),c.jc(),c.kc(7,"div",25),c.kc(8,"div"),c.fc(9,"i",26),c.kc(10,"span",27),c.ed(11,Ns,4,5,"ng-container",28),c.ed(12,Us,2,3,"ng-template",null,29,c.fd),c.jc(),c.ed(14,qs,9,9,"ng-container",28),c.ed(15,Bs,8,9,"ng-template",null,30,c.fd),c.ed(17,$s,17,19,"ng-container",31),c.ed(18,Ys,5,3,"p",31),c.jc(),c.ed(19,Ws,6,1,"div",32),c.ed(20,Qs,6,3,"div",33),c.ed(21,Ks,6,1,"div",34),c.jc(),c.jc()),2&e){const e=t.$implicit,i=c.Sc(13),s=c.Sc(16),n=c.wc(3);c.Mb(2),c.id(" ",c.yc(3,11,e.name)," "),c.Mb(3),c.id(" ",c.zc(6,13,e.dateStartUTC,n.userTimezoneEnabled&&n.isLoggedIn&&!e.id_location?n.userTimezone:e.timezone)," "),c.Mb(6),c.Dc("ngIf",!e.id_location)("ngIfElse",i),c.Mb(3),c.Dc("ngIf",!e.id_location)("ngIfElse",s),c.Mb(3),c.Dc("ngIf",n.userTimezoneEnabled&&n.isLoggedIn&&!!e.id_location&&n.userTimezone!==e.timezone),c.Mb(1),c.Dc("ngIf",e.duration),c.Mb(1),c.Dc("ngIf",e.id_location&&n.locations[e.id_location]&&!n.locations[n.session.current_location]),c.Mb(1),c.Dc("ngIf",n.isClassroom&&n.vilt&&e.tool),c.Mb(1),c.Dc("ngIf",n.isClassroom&&n.vilt&&e.instructors.length>0)}}function Xs(e,t){if(1&e&&(c.kc(0,"div",19),c.ed(1,Js,22,16,"div",20),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngForOf",e.session.dates)}}function Zs(e,t){if(1&e&&(c.kc(0,"div",17),c.ed(1,Fs,2,1,"div",18),c.ed(2,Xs,2,1,"div",18),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",e.isWebinar),c.Mb(1),c.Dc("ngIf",e.isClassroom)}}function en(e,t){if(1&e&&(c.ic(0),c.gd(1),c.hc()),2&e){const e=c.wc().date;c.Mb(1),c.jd(" ",e.timeStart," - ",e.timeEnd," ")}}function tn(e,t){if(1&e&&c.gd(0),2&e){const e=c.wc().date;c.id(" ",e.timeStart," ")}}function sn(e,t){if(1&e&&(c.kc(0,"p"),c.fc(1,"i",39),c.kc(2,"span",40),c.gd(3),c.xc(4,"transformMinutes"),c.jc(),c.jc()),2&e){const e=c.wc().date;c.Mb(3),c.id(" ",c.yc(4,1,e.duration)," ")}}const nn=function(e){return{"timezone-difference":!0,"is-hidden":e}};function an(e,t){if(1&e&&(c.kc(0,"div",49),c.gd(1),c.jc(),c.kc(2,"div",50),c.kc(3,"h5",51),c.gd(4),c.jc(),c.kc(5,"div"),c.kc(6,"p"),c.fc(7,"i",26),c.kc(8,"span",36),c.ed(9,en,2,2,"ng-container",28),c.ed(10,tn,1,1,"ng-template",null,52,c.fd),c.jc(),c.kc(12,"span",53),c.gd(13),c.xc(14,"t"),c.xc(15,"timezoneDifference"),c.jc(),c.jc(),c.ed(16,sn,5,3,"p",31),c.jc(),c.jc()),2&e){const e=t.date,i=c.Sc(11),s=c.wc();c.Mb(1),c.id(" ",e.date," "),c.Mb(3),c.hd(e.name),c.Mb(5),c.Dc("ngIf",!e.duration)("ngIfElse",i),c.Mb(3),c.Dc("ngClass",c.Ic(12,nn,1==s.userUserLocalTimeArray)),c.Mb(1),c.jd(" (",e.timezone," | ",c.yc(14,8,c.yc(15,10,e.timezone)),") "),c.Mb(3),c.Dc("ngIf",e.duration)}}let on=(()=>{class e{constructor(e,t,i,s,n){this._store=e,this._overviewActions=t,this.pageService=i,this.formatter=s,this.toggleService=n,this.enroll=new c.q,this.displayDateBegin=[],this.displayDateEnd=[],this.timezoneToUse=[],this.userUserLocalTimeArray=0,this.timeFormat=Object(ii.n)(Object(ii.j)(),"short"),this.userTimezoneEnabled="off"!==D.b.getInstance().user_settings.timezone_allow_user_override,this.isLoggedIn=D.c.getInstance().isValid(),this.userTimezone=D.c.getInstance().timezone,this.mapReady=!1}get hasInstructors(){return this.session.instructors&&this.session.instructors.some(e=>null!=e)}ngOnInit(){this.vilt=this.toggleService.isOn(u.f.TOGGLE_VILT),this.isWebinar="webinar"===this.course.type,this.isClassroom="classroom"===this.course.type,this.convertDatesWithTimezone(),this.locations=this.overview.locations;let e=M.a.t("standard","Enroll into this session");this.course.available_seats&&this.course.available_seats[this.session.id]<=0&&(e=M.a.t("ecommerce","Session full (waiting list)"));let t=!(!this.course.enrolled||!this.course.enrolled.is_enrolled)&&this.course.enrolled.is_enrolled;this.buttonSave={type:"normal",text:e,onClick:()=>{this._store.dispatch(this._overviewActions.enrollUserToSession(this.course.id,this.session.id,t))}}}loadLocationPreview(e,t){t.preventDefault(),this.pageService.locationViewer.loadMapPreview(e)}getInstructors(e){return 0==e.length?"":e.filter(e=>null!=e).map(e=>""==e.firstname||""==e.lastname?e.username:e.firstname+" "+e.lastname).join(", ")}ngOnDestroy(){var e;null===(e=this.changeTimeView)||void 0===e||e.unsubscribe()}convertDatesWithTimezone(){const e=this.session.dates;this.displayDateBegin=[],e.forEach((e,t)=>{if(e.duration){this.timezoneToUse.push([e.timezone,this.formatter.currentTimezone]),this.userUserLocalTimeArray=1;const i=this.formatter.convertTimeToUTC(`${e.day} ${e.start_hour}`,e.timezone),s=new Zt.a(i).formatTimezoned(Object(ii.l)(Object(ii.j)(),"short"),this.timezoneToUse[t][this.userUserLocalTimeArray]),n=new Zt.a(i).formatTimezoned(Object(ii.n)(Object(ii.j)(),"short"),this.timezoneToUse[t][this.userUserLocalTimeArray]);e.date=s,e.timeStart=n}else e.dateStartUTC=this.formatter.convertTimeToUTC(`${e.day} ${e.time_begin}`,e.timezone),e.dateEndUTC=this.formatter.convertTimeToUTC(`${e.day} ${e.time_end}`,e.timezone)})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(w.e),c.ec(Ts.e),c.ec(P.a),c.ec(ni.b),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],inputs:{session:"session",course:"course",overview:"overview",userUserLocalTime:"userUserLocalTime"},outputs:{enroll:"enroll"},decls:8,vars:7,consts:[[1,"enroll-viewer_wrapper","bg-before-grey-light","mdl-grid"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],["class","mdl-cell mdl-cell--6-col location-details",4,"ngIf"],["class","mdl-cell mdl-cell--6-col session-details",4,"ngIf"],[1,"mdl-cell","mdl-cell--12-col","enroll-footer","bg-before-grey-light"],[3,"buttonType","type","text","click"],["oldWebinarView",""],[1,"mdl-cell","mdl-cell--12-col"],[1,"hyd-typography-heading-5","hyd-color-typography-primary"],["lines","2","more_label","Show more","less_label","Show less",3,"content"],[1,"mdl-cell","mdl-cell--6-col","location-details"],[1,"zmdi","zmdi-pin","text-grey-mid"],[1,"address-wrap"],[1,"location","text-grey-mid",3,"innerHTML"],["href","#",1,"text-main","location-ref",3,"click"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],[1,"mdl-cell","mdl-cell--6-col","session-details"],["class","session-days",4,"ngIf"],[1,"session-days"],["class","session-date","style","padding-bottom: 5px",4,"ngFor","ngForOf"],[1,"session-date",2,"padding-bottom","5px"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"text-main",2,"margin","8px 0"],[1,"date","no-after","bg-after-grey-light","text-grey-dark","content"],[1,"date-info","content"],[1,"zmdi","zmdi-time","text-grey-mid"],[1,"simple-text"],[4,"ngIf","ngIfElse"],["venuesTemplateTitle",""],["venuesTemplate",""],[4,"ngIf"],["class","location-details",4,"ngIf"],["class","location-details","style","padding: 0",4,"ngIf"],["class","instructor-details",4,"ngIf"],[1,"session-translation"],[1,"bolded"],[2,"margin-top","8px"],[1,"zmdi","zmdi-alert-triangle"],[1,"zmdi","zmdi-time-interval","text-grey-mid"],[1,"text-grey-mid"],[1,"location-details"],["href","#","onclick","return false;",1,"text-main","location-ref",3,"click"],[1,"location-details",2,"padding","0"],[1,"zmdi","zmdi-videocam","text-grey-mid"],[1,"instructor-details"],[1,"icon"],["name","assignment-account","size","xs"],[1,"label"],[1,"date","bg-after-grey-light","text-grey-dark"],[1,"date-info"],[1,"text-main"],["withDuration",""],[3,"ngClass"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.ed(1,Es,5,4,"div",1),c.ed(2,Ls,10,8,"div",2),c.ed(3,Zs,3,2,"div",3),c.kc(4,"div",4),c.fc(5,"basic-button",5),c.jc(),c.jc(),c.ed(6,an,17,14,"ng-template",null,6,c.fd)),2&e&&(c.Mb(1),c.Dc("ngIf",t.isClassroom&&t.vilt&&t.hasInstructors),c.Mb(1),c.Dc("ngIf",t.session.current_location&&t.locations[t.session.current_location]),c.Mb(1),c.Dc("ngIf",t.session.dates),c.Mb(2),c.Dc("buttonType",t.buttonSave.buttonType)("type",t.buttonSave.type)("text",t.buttonSave.text)("click",t.buttonSave.onClick))},directives:[m.p,Is.a,hi.a,m.o,m.u,b.lc,m.n],pipes:[M.b,Ge.a,xs.a,Ds.a,ns.a,Os.a],encapsulation:2}),e})();var rn=i("JA8w"),cn=i("MxMe");function ln(e,t){1&e&&c.fc(0,"i",11)}function dn(e,t){1&e&&c.fc(0,"i",12)}function un(e,t){if(1&e&&(c.kc(0,"span",15),c.fc(1,"i",16),c.gd(2),c.jc()),2&e){const e=c.wc(3);c.Mb(2),c.id(" ",e.locations[e.session.current_location].name,"")}}function hn(e,t){if(1&e&&(c.kc(0,"span",17),c.fc(1,"i",16),c.gd(2),c.xc(3,"t"),c.jc()),2&e){const e=c.wc(3);c.Mb(2),c.jd(" ",c.yc(3,2,"Multiple locations")," (",e.locations_count,")")}}function pn(e,t){if(1&e&&(c.kc(0,"span"),c.ed(1,un,3,1,"span",13),c.ed(2,hn,4,4,"span",14),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngIf",e.course&&"-1"!==e.session.current_location&&e.locations[e.session.current_location]),c.Mb(1),c.Dc("ngIf",e.course&&e.locations_count>0&&!e.locations[e.session.current_location])}}function gn(e,t){if(1&e&&(c.kc(0,"div",2),c.kc(1,"span",3),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"span",4),c.fc(5,"i",5),c.gd(6),c.xc(7,"HDate"),c.jc(),c.kc(8,"span",6),c.ed(9,ln,1,0,"i",7),c.ed(10,dn,1,0,"i",8),c.jc(),c.kc(11,"span",3),c.gd(12),c.xc(13,"t"),c.jc(),c.kc(14,"span",4),c.fc(15,"i",5),c.gd(16),c.xc(17,"HDate"),c.jc(),c.ed(18,pn,3,2,"span",9),c.kc(19,"div",10),c.gd(20),c.xc(21,"timezoneFormatter"),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.hd(c.yc(3,8,"_START")),c.Mb(4),c.id(" ",c.zc(7,10,e.session.start_date,e.betterDateTimeTimezone)," "),c.Mb(3),c.Dc("ngIf",!e.isRtl),c.Mb(1),c.Dc("ngIf",e.isRtl),c.Mb(2),c.hd(c.yc(13,13,"_END")),c.Mb(4),c.id(" ",c.zc(17,15,e.session.end_date,e.betterDateTimeTimezone)," "),c.Mb(2),c.Dc("ngIf","classroom"==e.course.type),c.Mb(2),c.hd(c.yc(21,18,e.betterDateTimeTimezone))}}function mn(e,t){if(1&e&&(c.ic(0),c.kc(1,"span",22),c.gd(2),c.xc(3,"HTime"),c.xc(4,"HTime"),c.jc(),c.kc(5,"div"),c.gd(6),c.xc(7,"timezoneFormatter"),c.jc(),c.hc()),2&e){const e=c.wc(2);c.Mb(2),c.jd(" ",c.Ac(3,3,e.session.dateStartUTC,e.session.timezone,e.timeFormat)," - ",c.Ac(4,7,e.session.dateEndUTC,e.session.timezone,e.timeFormat)," "),c.Mb(4),c.id(" ",c.yc(7,11,e.session.timezone)," ")}}function bn(e,t){if(1&e&&(c.kc(0,"span",22),c.gd(1),c.xc(2,"HTime"),c.xc(3,"HTime"),c.jc(),c.kc(4,"div"),c.gd(5),c.xc(6,"timezoneFormatter"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.jd(" ",c.Ac(2,3,e.session.dateStartUTC,e.userTimezoneEnabled?e.timeZone:e.session.timezone,e.timeFormat)," - ",c.Ac(3,7,e.session.dateEndUTC,e.userTimezoneEnabled?e.timeZone:e.session.timezone,e.timeFormat)," "),c.Mb(4),c.id(" ",c.yc(6,11,e.userTimezoneEnabled?e.timeZone:e.session.timezone)," ")}}function fn(e,t){if(1&e&&(c.kc(0,"div",2),c.kc(1,"span",18),c.fc(2,"i",19),c.ed(3,mn,8,13,"ng-container",20),c.ed(4,bn,7,13,"ng-template",null,21,c.fd),c.jc(),c.jc()),2&e){const e=c.Sc(5),t=c.wc();c.Mb(3),c.Dc("ngIf",t.session.id_location)("ngIfElse",e)}}const _n=function(e){return{length:"short",timezone:e}};function vn(e,t){if(1&e&&(c.kc(0,"div",23),c.fc(1,"i",24),c.kc(2,"span",25),c.gd(3),c.xc(4,"time"),c.jc(),c.fc(5,"i",26),c.kc(6,"span",25),c.gd(7),c.xc(8,"transformMinutes"),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(3),c.jd(" ",c.zc(4,3,e.webinarListing.dateTime,c.Ic(8,_n,e.webinarListing.timezone))," ",e.webinarListing.timezone," "),c.Mb(4),c.hd(c.yc(8,6,e.webinarListing.duration))}}let yn=(()=>{class e{constructor(e,t){this.formatter=e,this.translationService=t,this.userUserLocalTimeArray=0,this.timeZone=o.a.getInstance().timezone,this.timeFormat=Object(ii.n)(Object(ii.j)(),"short"),this.userTimezoneEnabled="off"!==E.b.getInstance().user_settings.timezone_allow_user_override,this.isRtl=!1,this.betterDateTimeTimezone=Object(ii.k)()}ngOnInit(){if(this.session&&this.session.day&&this.session.timezone&&(this.session.dateStartUTC=this.formatter.convertTimeToUTC(`${this.session.day} ${this.session.time_begin}`,this.session.timezone),this.session.dateEndUTC=this.formatter.convertTimeToUTC(`${this.session.day} ${this.session.time_end}`,this.session.timezone),this.convertDatesWithTimezone()),this.course&&this.overview){this.locations=this.overview.locations;let e=0;for(let t in this.session.dates){let i=this.session.dates[t];i.id_location&&this.locations[i.id_location]&&e++}this.locations_count=e}const e=this.translationService.languageToUse(),t=E.b.getInstance().active_languages;this.isRtl=!!t[e].is_rtl&&t[e].is_rtl}convertDatesWithTimezone(){let e,t;this.session&&(this.session.begin_day?(e=this.session,t=`${e.begin_day} ${e.begin_time}`,this.displayDateBegin=this.formatter.convertTimeToUTC(t,e.begin_timezone),t=`${e.end_day} ${e.end_time}`,this.displayDateEnd=this.formatter.convertTimeToUTC(t,e.end_timezone),this.timezoneToUse=[e.begin_timezone,this.formatter.currentTimezone],this.timezoneEndToUse=[e.end_timezone,this.formatter.currentTimezone],this.displayDateBegin=this.formatter.getTimezonedDate(this.displayDateBegin,this.timezoneToUse[this.userUserLocalTimeArray]),this.displayDateEnd=this.formatter.getTimezonedDate(this.displayDateEnd,this.timezoneEndToUse[this.userUserLocalTimeArray])):this.session.start_date?(this.displayDateBegin=this.session.start_date,this.displayDateEnd=this.session.end_date,this.timezoneToUse=[this.formatter.currentTimezone],this.timezoneEndToUse=[this.formatter.currentTimezone],this.displayDateBegin=this.formatter.getTimezonedDate(this.displayDateBegin,this.timezoneToUse[this.userUserLocalTimeArray]),this.displayDateEnd=this.formatter.getTimezonedDate(this.displayDateEnd,this.timezoneEndToUse[this.userUserLocalTimeArray])):this.session.time_begin&&(e=this.session,t=`${e.day} ${e.time_begin}`,this.displayDateBegin=this.formatter.convertTimeToUTC(t,e.timezone),t=`${e.day} ${e.time_end}`,this.displayDateEnd=this.formatter.convertTimeToUTC(t,e.timezone),this.timezoneToUse=[e.timezone,this.formatter.currentTimezone],this.timezoneEndToUse=[e.timezone,this.formatter.currentTimezone],this.displayDateBegin=this.formatter.getTimezonedDate(this.displayDateBegin,this.timezoneToUse[this.userUserLocalTimeArray]),this.displayDateEnd=this.formatter.getTimezonedDate(this.displayDateEnd,this.timezoneEndToUse[this.userUserLocalTimeArray])))}}return e.\u0275fac=function(t){return new(t||e)(c.ec(ni.b),c.ec(rn.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],inputs:{session:"session",overview:"overview",course:"course",webinarListing:"webinarListing"},decls:3,vars:3,consts:[["class","ilt-description",4,"ngIf"],["class","ilt-description text-grey-mid",4,"ngIf"],[1,"ilt-description"],[1,"text-grey-mid","dates"],[1,"date","text-grey-dark"],[1,"zmdi","zmdi-calendar","text-grey-mid"],[1,"arrow","text-grey-mid"],["class","zmdi zmdi-arrow-right",4,"ngIf"],["class","zmdi zmdi-arrow-left",4,"ngIf"],[4,"ngIf"],[1,"timezone-desc"],[1,"zmdi","zmdi-arrow-right"],[1,"zmdi","zmdi-arrow-left"],["class","location text-main",4,"ngIf"],["class","location text-grey-dark",4,"ngIf"],[1,"location","text-main"],[1,"zmdi","zmdi-pin","text-grey-mid"],[1,"location","text-grey-dark"],[1,"text-grey-dark"],[1,"zmdi","zmdi-time","text-grey-mid"],[4,"ngIf","ngIfElse"],["webOnly",""],[1,"text-uppercase","bolded"],[1,"ilt-description","text-grey-mid"],[1,"zmdi","zmdi-time"],[1,"bolded","inner-text"],[1,"zmdi","zmdi-time-interval"]],template:function(e,t){1&e&&(c.ed(0,gn,22,20,"div",0),c.ed(1,fn,6,2,"div",0),c.ed(2,vn,9,10,"div",1)),2&e&&(c.Dc("ngIf",t.session&&!t.session.day),c.Mb(1),c.Dc("ngIf",t.session&&t.session.day&&t.session.time_begin),c.Mb(1),c.Dc("ngIf",t.webinarListing))},directives:[m.p],pipes:[M.b,Ge.a,Ds.a,xs.a,cn.a,ns.a],encapsulation:2}),e})();var wn=i("M+yG");const Cn=function(){return{category:"classroom"}},Sn=function(){return["/learn/home"]};function kn(e,t){1&e&&(c.kc(0,"div",6),c.fc(1,"img",7),c.fc(2,"h4",8),c.xc(3,"t"),c.fc(4,"p",9),c.xc(5,"t"),c.fc(6,"a",10),c.xc(7,"t"),c.jc()),2&e&&(c.Mb(2),c.Dc("innerHTML",c.zc(3,4,"No Sessions Available",c.Hc(13,Cn)),c.Wc),c.Mb(2),c.Dc("innerHTML",c.zc(5,7,"Unfortunately, we haven't found any available session for you to enroll. Please contact your platform Administrator.",c.Hc(14,Cn)),c.Wc),c.Mb(2),c.Dc("routerLink",c.Hc(15,Sn))("innerHTML",c.zc(7,10,"Go to dashboard",c.Hc(16,Cn)),c.Wc))}function Tn(e,t){if(1&e&&(c.kc(0,"div",11),c.kc(1,"h4"),c.gd(2),c.xc(3,"t"),c.jc(),c.fc(4,"accordion",12),c.jc()),2&e){const e=c.wc();c.Mb(2),c.hd(c.zc(3,4,"You have not selected a session yet. Please select one, and click ENROLL INTO THIS SESSION.",c.Hc(7,Cn))),c.Mb(2),c.Dc("type",e.accordionParams.type)("title",e.accordionParams.title)("panels",e.accordionParams.panels)}}function In(e,t){if(1&e&&(c.kc(0,"div",1),c.kc(1,"div",13),c.kc(2,"div",14),c.kc(3,"div",15),c.kc(4,"div",1),c.kc(5,"div",16),c.fc(6,"course-description",17),c.jc(),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(6),c.Dc("course_id",e.course.id)("widget",e.widgetData)}}let xn=(()=>{class e{constructor(e,t){this.changeDetector=e,this.toggleService=t,this.panels=[],this.widgetData={},this.canShowDescriptionWidget=!1,this.preferenceForTime=!1,this.eventEmitter=r.a.singleton}ngOnInit(){var e;if(this.canShowDescriptionWidget=(null===(e=this.overview.managed_sessions)||void 0===e?void 0:e.length)>0&&this.toggleService.isOn(u.f.TOGGLE_VILT)&&"classroom"===this.course.type,this.overview.available_sessions){let e,i;for(var t=0;t<this.overview.available_sessions.length;t++){e=this.overview.available_sessions[t],"webinar"===this.course.type&&(this.preferenceForTime=!0),i={params:{session:e,course:this.course,overview:this.overview,userUserLocalTime:this.preferenceForTime},component:on};const s=this.course.sessions.find(t=>t.id_session==e.id);void 0!==s&&s.enrolled.can_enroll_session&&this.panels.push({title:e.name,description:{params:{session:e,course:this.course,overview:this.overview},component:yn},content:i,hideDescriptionOnOpen:!0})}}this.accordionParams={type:"split",panels:this.panels},this.widgetData={id:0,title:null,content_type:"coursedesc",display_type:"learner",position:1,columns_span:12,params:{course_id:this.course.id}}}showTimePreference(e){this.preferenceForTime=e,this.changeDetector.detectChanges(),this.eventEmitter.publish({event_type:"showTimeZonePreferenceForCourseOverview",sender_id:"session-enroller",data:{userUserLocalTime:e}})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["session-enroller"]],inputs:{course:"course",overview:"overview"},decls:6,vars:3,consts:[[1,"session-enroller__wrapper","mdl-wrapper"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--12-col"],["class","no-sessions",4,"ngIf"],["class","sessions-list",4,"ngIf"],["class","mdl-grid",4,"ngIf"],[1,"no-sessions"],["src","/public/images/learn/no_session.png","all","No sessions available"],[3,"innerHTML"],[1,"text-grey-mid",3,"innerHTML"],[1,"text-main",3,"routerLink","innerHTML"],[1,"sessions-list"],[3,"type","title","panels"],[1,"widgets-area","mdl-cell","mdl-cell--12-col"],["id","collection-widgets-holder"],[1,"widgets-collection-course-wrapper","no-side-padding"],[1,"bg-white","mdl-shadow--2dp","mdl-cell","mdl-cell--12-col"],[3,"course_id","widget"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.kc(2,"div",2),c.ed(3,kn,8,17,"div",3),c.ed(4,Tn,5,8,"div",4),c.jc(),c.jc(),c.ed(5,In,7,2,"div",5),c.jc()),2&e&&(c.Mb(3),c.Dc("ngIf",t.overview.available_sessions.length<=0),c.Mb(1),c.Dc("ngIf",t.overview.available_sessions&&t.overview.available_sessions.length>0),c.Mb(1),c.Dc("ngIf",t.canShowDescriptionWidget))},directives:[m.p,s.k,wn.a,zi],pipes:[M.b],encapsulation:2}),e})();function Dn(e,t){if(1&e&&(c.kc(0,"div",1),c.kc(1,"div",2),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"div",3),c.gd(5),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.id(" ",c.yc(3,2,"Description")," "),c.Mb(3),c.hd(e.day.description)}}function On(e,t){if(1&e&&(c.kc(0,"div",7),c.kc(1,"div",8),c.fc(2,"ui-icon",9),c.jc(),c.kc(3,"div",10),c.kc(4,"span"),c.gd(5),c.xc(6,"t"),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(5),c.jd(" ",c.yc(6,2,"Instructors:")," ",e.instructorLabel,"")}}function En(e,t){if(1&e&&(c.kc(0,"span"),c.kc(1,"a",13),c.gd(2),c.jc(),c.gd(3),c.xc(4,"t"),c.jc()),2&e){const e=c.wc(3);c.Mb(1),c.Dc("href",e.day.collaboration_tool,c.Yc),c.Mb(1),c.hd(e.day.collaboration_tool),c.Mb(1),c.id(" ",c.yc(4,3,"Collaboration Tool")," ")}}function An(e,t){if(1&e&&(c.kc(0,"span"),c.gd(1),c.xc(2,"t"),c.kc(3,"a",13),c.gd(4),c.jc(),c.jc()),2&e){const e=c.wc(3);c.Mb(1),c.id(" ",c.yc(2,3,"Collaboration Tool")," "),c.Mb(2),c.Dc("href",e.day.collaboration_tool,c.Yc),c.Mb(1),c.hd(e.day.collaboration_tool)}}function Pn(e,t){if(1&e&&(c.kc(0,"div",7),c.kc(1,"div",8),c.fc(2,"ui-icon",11),c.jc(),c.kc(3,"div",10),c.ed(4,En,5,5,"span",12),c.ed(5,An,5,5,"span",12),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(4),c.Dc("ngIf",e.isRtl),c.Mb(1),c.Dc("ngIf",!e.isRtl)}}function Mn(e,t){if(1&e&&(c.kc(0,"div",1),c.kc(1,"div",4),c.kc(2,"div"),c.kc(3,"h1",5),c.gd(4),c.xc(5,"t"),c.jc(),c.ed(6,On,7,4,"div",6),c.ed(7,Pn,6,2,"div",6),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(4),c.id(" ",c.yc(5,3,"Event Information")," "),c.Mb(2),c.Dc("ngIf",e.day.instructors.length>0),c.Mb(1),c.Dc("ngIf",null!=e.day.collaboration_tool)}}function Ln(e,t){if(1&e&&(c.ic(0),c.fc(1,"i",24),c.gd(2),c.xc(3,"HDate"),c.hc()),2&e){const e=c.wc(3);c.Mb(2),c.id(" ",c.zc(3,1,e.displayDateBegin,e.userTimezone)," | ")}}function jn(e,t){if(1&e&&(c.ic(0),c.kc(1,"div",15),c.fc(2,"i",16),c.kc(3,"div",17),c.kc(4,"div",18),c.gd(5),c.xc(6,"t"),c.jc(),c.kc(7,"h4",19),c.ed(8,Ln,4,4,"ng-container",12),c.xc(9,"HDate"),c.xc(10,"HDate"),c.gd(11),c.xc(12,"HTime"),c.xc(13,"HTime"),c.jc(),c.kc(14,"div",20),c.gd(15),c.xc(16,"timezoneFormatter"),c.jc(),c.jc(),c.jc(),c.hc()),2&e){const e=c.wc(2);c.Mb(5),c.id(" ",c.yc(6,5,"Your Time")," "),c.Mb(3),c.Dc("ngIf",c.zc(9,7,e.displayDateBegin,e.userTimezone)!==c.zc(10,10,e.displayDateBegin,e.day.timezone)),c.Mb(3),c.jd(" ",c.Ac(12,13,e.displayDateBegin,e.userTimezone,e.timeFormat)," - ",c.Ac(13,17,e.displayDateEnd,e.userTimezone,e.timeFormat)," "),c.Mb(4),c.id(" ",c.yc(16,21,e.userTimezone)," ")}}const Rn=function(){return{category:"classroom"}};function Fn(e,t){if(1&e){const e=c.lc();c.kc(0,"div",25),c.fc(1,"i",26),c.kc(2,"div",17),c.fc(3,"div",27),c.xc(4,"t"),c.kc(5,"h4",28),c.sc("click",function(){c.Vc(e);const t=c.wc(2);return t.loadMapPreview(t.overview.locations[t.day.id_location])}),c.gd(6),c.jc(),c.kc(7,"div"),c.gd(8),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Mb(3),c.Dc("innerHTML",c.zc(4,3,"Location",c.Hc(6,Rn)),c.Wc),c.Mb(3),c.id(" ",e.overview.locations[e.day.id_location].name," "),c.Mb(2),c.hd(e.overview.locations[e.day.id_location].address)}}const Nn=function(){return{category:"standard"}};function Un(e,t){if(1&e&&(c.kc(0,"div",29),c.fc(1,"i",30),c.kc(2,"div",17),c.kc(3,"div",18),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"h4",19),c.gd(7),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(4),c.hd(c.zc(5,2,"Classroom",c.Hc(5,Nn))),c.Mb(3),c.hd(e.classrooms[e.day.id_classroom].name)}}function zn(e,t){if(1&e&&(c.kc(0,"p"),c.fc(1,"i",32),c.gd(2),c.xc(3,"t"),c.jc()),2&e){const e=c.wc(4);c.Mb(2),c.jd(" ",e.classrooms[e.day.id_classroom].seats," ",c.yc(3,2,"available seats")," ")}}function qn(e,t){if(1&e&&(c.kc(0,"p"),c.fc(1,"i",33),c.gd(2),c.jc()),2&e){const e=c.wc(4);c.Mb(2),c.id(" ",e.classrooms[e.day.id_classroom].details," ")}}function Vn(e,t){if(1&e&&(c.kc(0,"p"),c.fc(1,"i",34),c.gd(2),c.jc()),2&e){const e=c.wc(4);c.Mb(2),c.id(" ",e.classrooms[e.day.id_classroom].equipment," ")}}function Bn(e,t){if(1&e&&(c.ic(0),c.kc(1,"h5"),c.gd(2),c.xc(3,"t"),c.jc(),c.ed(4,zn,4,4,"p",12),c.ed(5,qn,3,1,"p",12),c.ed(6,Vn,3,1,"p",12),c.hc()),2&e){const e=c.wc(3);c.Mb(2),c.hd(c.zc(3,4,"Additional classroom information",c.Hc(7,Rn))),c.Mb(2),c.Dc("ngIf",e.classrooms[e.day.id_classroom].seats),c.Mb(1),c.Dc("ngIf",e.classrooms[e.day.id_classroom].details),c.Mb(1),c.Dc("ngIf",e.classrooms[e.day.id_classroom].equipment)}}function Gn(e,t){if(1&e&&(c.kc(0,"div",31),c.ed(1,Bn,7,8,"ng-container",12),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngIf",0!=e.classrooms[e.day.id_classroom])}}function Hn(e,t){if(1&e&&(c.kc(0,"div",1),c.kc(1,"h1",5),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"div",14),c.kc(5,"div",15),c.fc(6,"i",16),c.kc(7,"div",17),c.kc(8,"div",18),c.gd(9),c.xc(10,"t"),c.jc(),c.kc(11,"h4",19),c.gd(12),c.xc(13,"HTime"),c.xc(14,"HTime"),c.jc(),c.kc(15,"div",20),c.gd(16),c.xc(17,"timezoneFormatter"),c.jc(),c.jc(),c.jc(),c.ed(18,jn,17,23,"ng-container",12),c.jc(),c.ed(19,Fn,9,7,"div",21),c.ed(20,Un,8,6,"div",22),c.ed(21,Gn,2,1,"div",23),c.jc()),2&e){const e=c.wc();c.Mb(2),c.id(" ",c.yc(3,9,"Venue details")," "),c.Mb(7),c.id(" ",c.yc(10,11,"Local Time")," "),c.Mb(3),c.jd(" ",c.Ac(13,13,e.displayDateBegin,e.day.timezone,e.timeFormat)," - ",c.Ac(14,17,e.displayDateEnd,e.day.timezone,e.timeFormat)," "),c.Mb(4),c.id(" ",c.yc(17,21,e.day.timezone)," "),c.Mb(2),c.Dc("ngIf",e.userTimezoneEnabled&&e.userTimezone!==e.day.timezone),c.Mb(1),c.Dc("ngIf",e.overview.locations[e.day.id_location]&&e.locations.length>1),c.Mb(1),c.Dc("ngIf",e.classrooms[e.day.id_classroom]),c.Mb(1),c.Dc("ngIf",e.day.id_classroom)}}let $n=(()=>{class e{constructor(e,t){this.pageService=e,this.formatter=t,this.locations=[],this.classrooms=[],this.isRtl=!1,this.userUserLocalTimeArray=0,this.userTimezoneEnabled="off"!==D.b.getInstance().user_settings.timezone_allow_user_override,this.timeFormat=Object(ii.n)(Object(ii.j)(),"short"),this.userTimezone=D.c.getInstance().timezone}ngOnInit(){this.isRtl=D.b.getInstance().getLangByShortCode(D.c.getInstance().language).is_rtl,this.changeTimeView=r.a.singleton.subscribe("showTimeZonePreferenceForCourseOverview",e=>{this.userUserLocalTimeArray=e.data.userUserLocalTime?1:0}),this.userUserLocalTimeArray=this.userUserLocalTime?1:0}get instructorLabel(){return 0==this.day.instructors.length?"":this.day.instructors.map(e=>""==e.firstname||""==e.lastname?e.username:e.firstname+" "+e.lastname).join(", ")}get currentLocation(){return this.locations.find(e=>e.id_location==this.day.id_location)}loadMapPreview(e){this.pageService.locationViewer.loadMapPreview(e)}ngOnDestroy(){this.changeTimeView.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(u.c),c.ec(ni.b))},e.\u0275cmp=c.Yb({type:e,selectors:[["ilt-new-viewer"]],inputs:{day:"day",overview:"overview",timezoneToUse:"timezoneToUse",displayDateBegin:"displayDateBegin",displayDateEnd:"displayDateEnd",locations:"locations",classrooms:"classrooms",userUserLocalTime:"userUserLocalTime"},decls:3,vars:3,consts:[["class","ilt-wrapper new-ilt-style bg-before-grey-light",4,"ngIf"],[1,"ilt-wrapper","new-ilt-style","bg-before-grey-light"],[1,"title-normal"],[1,"description"],[1,"button-block","button-block-collaboration-tool"],[1,"hyd-typography-heading-5","hyd-color-typography-primary","new-ilt-style"],["class","ilt-event-info",4,"ngIf"],[1,"ilt-event-info"],[1,"icon"],["name","assignment-account"],[1,"label"],["name","staff"],[4,"ngIf"],["target","_blank",3,"href"],[1,"block-wrap","time-details","new-better-timezone"],[1,"new-timezone-row-container"],[1,"zmdi","zmdi-time","text-grey-mid"],[1,"data-wrap"],[1,"location","text-grey-mid"],[1,"bolded"],[2,"margin-top","var(--hyd-spacing-tiny)"],["class","block-wrap location-details",4,"ngIf"],["class","block-wrap classroom-details",4,"ngIf"],["class","enroll-footer bg-before-grey-light",4,"ngIf"],[1,"zmdi","zmdi-alert-triangle"],[1,"block-wrap","location-details"],[1,"zmdi","zmdi-pin","text-grey-mid"],[1,"location","text-grey-mid",3,"innerHTML"],[1,"bolded","text-main","clickable",3,"click"],[1,"block-wrap","classroom-details"],[1,"zmdi","zmdi-home","text-grey-mid"],[1,"enroll-footer","bg-before-grey-light"],[1,"text-grey-mid","zmdi","zmdi-accounts-alt"],[1,"text-grey-mid","zmdi","zmdi-library"],[1,"text-grey-mid","zmdi","zmdi-wrench"]],template:function(e,t){1&e&&(c.ed(0,Dn,6,4,"div",0),c.ed(1,Mn,8,5,"div",0),c.ed(2,Hn,22,23,"div",0)),2&e&&(c.Dc("ngIf",t.day.description),c.Mb(1),c.Dc("ngIf",t.day.instructors.length>0||null!=t.day.collaboration_tool),c.Mb(1),c.Dc("ngIf",t.overview.locations[t.day.id_location]))},directives:[m.p,b.lc],pipes:[M.b,xs.a,Ds.a,Ge.a],encapsulation:2}),e})();var Yn=i("PqYM"),Wn=function(e){return e.adobeconnectv2meeting="adobeconnectv2meeting",e.adobeconnectv2seminar="adobeconnectv2seminar",e.gotomeetingv2meeting="gotomeetingv2meeting",e.gotomeetingv2training="gotomeetingv2training",e.gotomeetingv2webinar="gotomeetingv2webinar",e.webexv2event="webexv2event",e.webexv2meeting="webexv2meeting",e.webexv2training="webexv2training",e.zoomv2webinar="zoomv2webinar",e.zoomv2meeting="zoomv2meeting",e.onairv1meeting="onairv1meeting",e.onairv1webinar="onairv1webinar",e.trwebinar="trwebinar",e}({}),Qn=function(e){return e.SUBSCRIBED="subscribed",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.WAITING="waiting",e}({}),Kn=function(e){return e[e.SCORM="scormorg"]="SCORM",e[e.AICC="aicc"]="AICC",e[e.TINCAN="tincan"]="TINCAN",e[e.VIDEO="video"]="VIDEO",e[e.YOUTUBE="youtube"]="YOUTUBE",e[e.WISTIA="wistia"]="WISTIA",e[e.VIMEO="vimeo"]="VIMEO",e[e.FILE="file"]="FILE",e[e.ASSIGNMENT="deliverable"]="ASSIGNMENT",e[e.HTMLPAGE="htmlpage"]="HTMLPAGE",e[e.SURVEY="poll"]="SURVEY",e[e.QUIZ="test"]="QUIZ",e[e.SIGN="sign"]="SIGN",e[e.GOOGLEDRIVE="googledrive"]="GOOGLEDRIVE",e}({}),Jn=function(e){return e[e.NON_EXISTENT=0]="NON_EXISTENT",e[e.DOWNLOADING=1]="DOWNLOADING",e[e.UPLOADING=2]="UPLOADING",e[e.CONVERTING=3]="CONVERTING",e[e.FAILED=4]="FAILED",e[e.COMPLETED=5]="COMPLETED",e}({}),Xn=function(e){return e.NON_EXISTENT="Non-existent",e.DOWNLOADING="Downloading",e.UPLOADING="Uploading",e.CONVERTING="Converting",e.FAILED="Failed",e.COMPLETED="Completed",e}({}),Zn=i("/hE/"),ea=i("fnIB");const ta=["singleUpload"],ia=function(){return{category:"webinar"}};function sa(e,t){1&e&&(c.kc(0,"div",11),c.kc(1,"div",12),c.fc(2,"ui-spinner"),c.kc(3,"h4"),c.gd(4),c.xc(5,"t"),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(4),c.hd(c.zc(5,1,"Importing and converting your webinar recording...",c.Hc(4,ia))))}function na(e,t){if(1&e&&(c.kc(0,"div",3),c.kc(1,"div",3),c.fc(2,"radio",7),c.xc(3,"t"),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.Dc("label",c.yc(3,7,e.apiGrab.label))("name",e.apiGrab.name)("value",e.apiGrab.value)("enabled",e.apiGrab.enabled)("required",e.apiGrab.required)("change",e.apiGrab.change)("inputFormControl",e.webinarRecordingsForm.controls.formal)}}function aa(e,t){if(1&e&&(c.kc(0,"div",3),c.kc(1,"div",3),c.fc(2,"radio",7),c.xc(3,"t"),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.Dc("label",c.yc(3,7,e.apiLink.label))("name",e.apiLink.name)("value",e.apiLink.value)("enabled",e.apiLink.enabled)("required",e.apiLink.required)("change",e.apiLink.change)("inputFormControl",e.webinarRecordingsForm.controls.formal)}}function oa(e,t){1&e&&(c.kc(0,"div",13),c.kc(1,"div",14),c.fc(2,"i",15),c.kc(3,"span",16),c.gd(4),c.xc(5,"t"),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(4),c.id(" ",c.zc(5,1,"In order to use this functionality, video service provider must be whitelisted in the Advanced Settings",c.Hc(4,ia))," "))}let ra=(()=>{class e{constructor(e,t,i,s){this.fb=e,this.docLayoutService=t,this.backendService=i,this.changeDetector=s,this.showUploader=!0,this.showLinkField=!1,this.uploadingFile=!1,this.ticker=Object(Yn.a)(0,3e3)}ngOnInit(){this.uploader={label:M.a.t("webinar","Your video"),placeholder:M.a.t("standard","Click to choose a file"),allowed_extensions:["3gp","3gp2","avi","flv","mkv","mov","mp4","mpeg","mpeg4","mpg","mpg2","ogg","ogm","wmv"],max_file_size:800,collection:"webinar_recording",style:"form"},this.externalLink={id:"link_upload",label:"URL",type:"text",name:"link_upload",floating_label:!0,enableText:!0,value:""},this.videoUpload={label:M.a.t("webinar","Add webinar recording"),name:"radio-group",value:"custom",enabled:!0,checked:!0,required:!1,change:e=>{this.radioFunction(e)}},this.videoLink={label:M.a.t("webinar","Import video recording from an external link"),name:"radio-group",value:"embeded",enabled:!0,required:!1,change:e=>{this.radioFunction(e)}},this.apiGrab={label:M.a.t("webinar","Use {webinartool} recording",{webinartool:this.tool_name}),name:"radio-group",value:"api_grab",enabled:!0,required:!1,change:e=>{this.radioFunction(e)}},this.apiLink={label:M.a.t("webinar","Use {webinartool} recording",{webinartool:this.tool_name}),name:"radio-group",value:"api_link",enabled:!0,required:!1,change:e=>{this.radioFunction(e)}},this.webinarRecordingsForm=this.fb.group({video_type:[this.videoUpload.value],uploader:[""],external_link:[""]}),this.setFormValidators()}setFormValidators(e="custom"){switch(e){case"custom":this.webinarRecordingsForm.controls.uploader.setValidators([Ze.x.required]),this.webinarRecordingsForm.controls.uploader.updateValueAndValidity(),this.webinarRecordingsForm.controls.external_link.setValidators(null),this.webinarRecordingsForm.controls.external_link.updateValueAndValidity(),this.webinarRecordingsForm.controls.video_type.setValidators(null),this.webinarRecordingsForm.controls.video_type.updateValueAndValidity();break;case"embeded":this.webinarRecordingsForm.controls.uploader.setValidators(null),this.webinarRecordingsForm.controls.uploader.updateValueAndValidity(),this.webinarRecordingsForm.controls.external_link.setValidators([Ze.x.required]),this.webinarRecordingsForm.controls.external_link.updateValueAndValidity(),this.webinarRecordingsForm.controls.video_type.setValidators(null),this.webinarRecordingsForm.controls.video_type.updateValueAndValidity();break;case"api_link":case"api_grab":this.webinarRecordingsForm.controls.uploader.setValidators(null),this.webinarRecordingsForm.controls.uploader.updateValueAndValidity(),this.webinarRecordingsForm.controls.external_link.setValidators(null),this.webinarRecordingsForm.controls.external_link.updateValueAndValidity(),this.webinarRecordingsForm.controls.video_type.setValidators([Ze.x.required]),this.webinarRecordingsForm.controls.video_type.updateValueAndValidity()}}radioFunction(e){this.showUploader="custom"==e,this.showLinkField="embeded"==e,"api_link"!=e&&"api_grab"!=e||(this.showUploader=!1,this.showLinkField=!1),this.setFormValidators(e),this.webinarRecordingsForm.controls.video_type.setValue(e)}submitVideo(){var e;this.webinarRecordingsForm.disable(),this.uploadingFile=!0,this.changeDetector.detectChanges();var t=this.webinarRecordingsForm.controls.video_type.value;switch(null!=this.webinarRecordingsForm.controls.uploader.value&&(this._previousFileName=this.webinarRecordingsForm.controls.uploader.value),t){case"custom":e={recording_type:2,filename:this.webinarRecordingsForm.controls.uploader.value||this._previousFileName};break;case"embeded":e={recording_type:3,url:this.webinarRecordingsForm.controls.external_link.value};break;case"api_link":e={recording_type:4};break;case"api_grab":e={recording_type:1}}this.backendService.request(`/course/v1/events/${this.id_event}/recording`,"POST",e).subscribe(e=>{this.subscriber=this.ticker.subscribe(e=>this.checkUploadStatus(e))},e=>{this.throwError(e)})}checkUploadStatus(e){this.backendService.request(`/course/v1/events/${this.id_event}/recording`,"GET").subscribe(t=>{this.handler("uploading"),t.data.status===Xn.CONVERTING&&1800!=e||(1800==e?(this.throwError(),this.subscriber.unsubscribe()):(t.data.status===Xn.COMPLETED?(this.docLayoutService.toast.showToast({message:M.a.t("standard","Your video has been uploaded."),type:"success"}),this.cleanForm(),this.handler("uploaded")):(this.docLayoutService.toast.showToast({message:M.a.t("standard","Your video hasn't been uploaded."),type:"error"}),this.cleanForm(this.webinarRecordingsForm.controls.video_type.value),this.handler("failed")),this.subscriber.unsubscribe(),this.uploadingFile=!1,this.changeDetector.detectChanges()))},e=>{this.throwError(e)})}throwError(e){if(e){console.log("error",e.message);for(let t=0;t<e.message.length;t++)this.docLayoutService.toast.showToast({message:M.a.t("standard",e.message[t]),type:"error"})}else this.docLayoutService.toast.showToast({message:M.a.t("standard","Your video hasn't been uploaded."),type:"error"});this.uploadingFile=!1,this.cleanForm(this.webinarRecordingsForm.controls.video_type.value),this.handler("failed"),this.changeDetector.detectChanges()}cleanForm(e){e||(e="custom"),this.webinarRecordingsForm.reset(),this.webinarRecordingsForm.controls.uploader.setValue(null),this.webinarRecordingsForm.controls.external_link.setValue(null),this.webinarRecordingsForm.controls.video_type.setValue(e),this.setFormValidators(e),this.singleUpload.clear(!0),this.webinarRecordingsForm.enable(),this.webinarRecordingsForm.updateValueAndValidity()}uploadedRecording(){this.changeDetector.detectChanges()}deleteRecording(){this.cleanForm()}ngOnDestroy(){this.uploadingFile&&this.docLayoutService.toast.showToast({message:M.a.t("standard","Your recording is still being uploaded in the background. Please don't navigate away from the page."),type:"error"})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Ze.d),c.ec(j.a),c.ec(I.a),c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&c.nd(ta,1),2&e){let e;c.Rc(e=c.tc())&&(t.singleUpload=e.first)}},inputs:{id_session:"id_session",id_event:"id_event",tool_name:"tool_name",api_link:"api_link",api_grab:"api_grab",super_user:"super_user",handler:"handler"},decls:20,vars:45,consts:[["class","webinar-loading-overlay bg-white",4,"ngIf"],[1,"webinar-recordings"],[3,"formGroup","ngSubmit"],[1,"mdl-cell--12-col"],[3,"label","name","value","enabled","required","checked","change","inputFormControl"],[3,"label","allowed_extensions","placeholder","collection","max_file_size","inputFormControl","uploaded","reset"],["singleUpload",""],[3,"label","name","value","enabled","required","change","inputFormControl"],[3,"id","type","floating_label","value","inputFormControl"],["class","mdl-cell--12-col",4,"ngIf"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],[1,"webinar-loading-overlay","bg-white"],[1,"loader"],[1,"mdl-cell","mdl-cell--12-col"],[1,"webinar-completion-warning","bg-warning","text-white"],[1,"zmdi","zmdi-alert-triangle"],[1,"inner-text"]],template:function(e,t){1&e&&(c.ed(0,sa,6,5,"div",0),c.kc(1,"div",1),c.kc(2,"form",2),c.sc("ngSubmit",function(){return t.submitVideo()}),c.kc(3,"div",3),c.kc(4,"div",3),c.fc(5,"radio",4),c.xc(6,"t"),c.jc(),c.kc(7,"div"),c.kc(8,"single-upload",5,6),c.sc("uploaded",function(){return t.uploadedRecording()})("reset",function(){return t.deleteRecording()}),c.xc(10,"t"),c.jc(),c.jc(),c.jc(),c.kc(11,"div",3),c.kc(12,"div",3),c.fc(13,"radio",7),c.xc(14,"t"),c.jc(),c.kc(15,"div"),c.fc(16,"textfield",8),c.jc(),c.jc(),c.ed(17,na,4,9,"div",9),c.ed(18,aa,4,9,"div",9),c.jc(),c.ed(19,oa,6,5,"div",10),c.jc()),2&e&&(c.Dc("ngIf",t.uploadingFile),c.Mb(2),c.Dc("formGroup",t.webinarRecordingsForm),c.Mb(3),c.Dc("label",c.yc(6,39,t.videoUpload.label))("name",t.videoUpload.name)("value",t.videoUpload.value)("enabled",t.videoUpload.enabled)("required",t.videoUpload.required)("checked",t.videoUpload.checked)("change",t.videoUpload.change)("inputFormControl",t.webinarRecordingsForm.controls.formal),c.Mb(2),c.Rb("mdl-cell--12-col ",t.showUploader?"visible-item":"hidden-item"," "),c.Mb(1),c.bd(t.uploader.style),c.Dc("label",c.yc(10,41,t.uploader.label))("allowed_extensions",t.uploader.allowed_extensions)("placeholder",t.uploader.placeholder)("collection",t.uploader.collection)("max_file_size",t.uploader.max_file_size)("inputFormControl",t.webinarRecordingsForm.controls.uploader),c.Mb(5),c.Dc("label",c.yc(14,43,t.videoLink.label))("name",t.videoLink.name)("value",t.videoLink.value)("enabled",t.videoLink.enabled)("required",t.videoLink.required)("change",t.videoLink.change)("inputFormControl",t.webinarRecordingsForm.controls.formal),c.Mb(2),c.Rb("mdl-cell--12-col  ",t.showLinkField?"visible-item":"hidden-item"," "),c.Mb(1),c.Dc("id",t.externalLink.id)("type",t.externalLink.type)("floating_label",t.externalLink.floating_label)("value",t.externalLink.value)("inputFormControl",t.webinarRecordingsForm.controls.external_link),c.Mb(1),c.Dc("ngIf",t.api_grab),c.Mb(1),c.Dc("ngIf",t.api_link),c.Mb(1),c.Dc("ngIf",t.showLinkField))},directives:[m.p,Ze.y,Ze.p,Ze.i,Zn.a,ea.a,Ct.a,b.Be],pipes:[M.b],encapsulation:2}),e})();var ca=i("GyhO"),la=i("GJmQ"),da=function(e){return e.ADOBECONNECT_V2_MEETING="adobeconnectv2meeting",e.ADOBECONNECT_V2_SEMINAR="adobeconnectv2seminar",e.GO_TO_MEETING_V2_MEETING="gotomeetingv2meeting",e.GO_TO_MEETING_V2_TRAINING="gotomeetingv2training",e.GO_TO_MEETING_V2_WEBINAR="gotomeetingv2webinar",e.WEBEX_V2_EVENT="webexv2event",e.WEBEX_V2_MEETING="webexv2meeting",e.WEBEX_V2_TRAINING="webexv2training",e.ZOOM_V2_WEBINAR="zoomv2webinar",e.ZOOM_V2_MEETING="zoomv2meeting",e.ONAIR_V1_MEETING="onairv1meeting",e.ONAIR_V1_WEBINAR="onairv1webinar",e.TR_WEBINAR="trwebinar",e.BLUEJEANS_V2_MEETING="bluejeansv2meeting",e.ZOOM_V3_WEBINAR="zoomv3webinar",e.ZOOM_V3_MEETING="zoomv3meeting",e}({});const ua={title:tt.a.t("webex","Email address missing in your account"),message:tt.a.t("webex","You cannot access the webinar because your account does not have an email address associated with it.\n                Please add one in the Personal Info section found in the My Profile page.\n                Alternatively, contact your Administrator.")},ha={title:tt.a.t("zoom-marketplace","Email address, first name or last name missing in your account"),message:tt.a.t("zoom-marketplace","You cannot access the webinar because your account needs to have an email address,\n                first name and last name associated with it. Please the missing information in the Personal Info\n                section found in the My Profile page. Alternatively, contact your Administrator.")},pa={[da.WEBEX_V2_MEETING]:ua,[da.WEBEX_V2_TRAINING]:ua,[da.WEBEX_V2_EVENT]:ua,[da.BLUEJEANS_V2_MEETING]:ua,[da.ZOOM_V3_MEETING]:ha,[da.ZOOM_V3_WEBINAR]:ha};let ga=(()=>{class e{constructor(){this._error=new _t.a,this.error$=this._error.asObservable(),this._joinConditions=new je.a([{webinarTool:da.WEBEX_V2_MEETING,canJoin:()=>this.userHasEmail()},{webinarTool:da.WEBEX_V2_TRAINING,canJoin:()=>this.userHasEmail()},{webinarTool:da.WEBEX_V2_EVENT,canJoin:()=>this.userHasEmail()},{webinarTool:da.BLUEJEANS_V2_MEETING,canJoin:()=>this.userHasEmail()},{webinarTool:da.ZOOM_V3_MEETING,canJoin:e=>this.checkZoomV3Conditions(e)},{webinarTool:da.ZOOM_V3_WEBINAR,canJoin:e=>this.checkZoomV3Conditions(e)}])}checkZoomV3Conditions(e){const{zoomV3RegistrationEnabled:t,isSessionInstructor:i,isEventInstructor:s}=e;if(!t||i||s)return Object(Ei.a)(!0);const n=D.c.getInstance();return Object(Ei.a)(Boolean(n.lastname&&n.firstname&&n.email))}userHasEmail(){return Object(Ei.a)(!!D.c.getInstance().email)}canJoin$(e,t){return this._joinConditions.pipe(Object(ki.a)(i=>{const s=[],n=i.filter(t=>e.includes(t.webinarTool));if(!n.length)return Object(Ei.a)(!0);for(const e of n)s.push(e.canJoin(t).pipe(Object(Ti.a)(t=>{!t&&this._error.next(pa[e.webinarTool])})));return Object(ca.a)(...s).pipe(Object(la.a)(e=>e,!0))}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var ma=i("ILJs"),ba=i("xIAn"),fa=i("2Hr6");const _a=["rightpanel"],va=function(){return{category:"standard"}};function ya(e,t){if(1&e&&(c.kc(0,"div",10),c.fc(1,"i",29),c.kc(2,"div",12),c.kc(3,"div",13),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"h4",14),c.gd(7),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(4),c.id(" ",c.zc(5,2,"Event Type",c.Hc(5,va))," "),c.Mb(3),c.hd(e.date.event_type)}}const wa=function(){return{category:"webinar"}};function Ca(e,t){if(1&e&&(c.kc(0,"div",10),c.fc(1,"i",30),c.kc(2,"div",12),c.kc(3,"div",13),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"h4",14),c.gd(7),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(4),c.id(" ",c.zc(5,2,"Room",c.Hc(5,wa))," "),c.Mb(3),c.hd(e.date.kaltura_v1_room)}}function Sa(e,t){1&e&&(c.kc(0,"div",31),c.fc(1,"em",32),c.kc(2,"div"),c.kc(3,"div",33),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"div",34),c.gd(7),c.xc(8,"t"),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(4),c.id(" ",c.zc(5,2,"Info",c.Hc(8,va))," "),c.Mb(3),c.id(" ",c.zc(8,5,"Guest user will not be able to join this meeting",c.Hc(9,va))," "))}function ka(e,t){if(1&e&&(c.fc(0,"ui-notification-inline",36),c.xc(1,"t"),c.xc(2,"t")),2&e){const e=c.wc().ngIf;c.Dc("title",c.yc(1,3,e.title))("message",c.yc(2,5,e.message))("closable",!1)}}function Ta(e,t){if(1&e&&(c.ic(0),c.ed(1,ka,3,7,"ui-notification-inline",35),c.hc()),2&e){const e=t.ngIf;c.Mb(1),c.Dc("ngIf",e)}}function Ia(e,t){1&e&&(c.kc(0,"span",37),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"You did not attend this webinar. And the recording for it is still not available.")," "))}function xa(e,t){1&e&&(c.kc(0,"span",37),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"You did not attend this webinar. However, a recording is available")," "))}function Da(e,t){if(1&e&&(c.kc(0,"span",37),c.gd(1),c.xc(2,"t"),c.kc(3,"span",38),c.gd(4),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.zc(2,2,"Your webinar starts in",c.Hc(5,wa))," "),c.Mb(3),c.id(" ",e.timerOutput,"")}}function Oa(e,t){if(1&e&&c.fc(0,"rectangular-button",39),2&e){const e=c.wc(2);c.Dc("properties",e.viewRecording.properties)("click",e.viewRecording.onClick)}}function Ea(e,t){if(1&e){const e=c.lc();c.kc(0,"a",40),c.sc("click",function(){return c.Vc(e),c.wc(2).deleteRecording()}),c.gd(1),c.xc(2,"t"),c.jc()}2&e&&(c.Mb(1),c.hd(c.zc(2,1,"Delete your webinar video recording",c.Hc(4,wa))))}function Aa(e,t){if(1&e&&c.fc(0,"rectangular-button",39),2&e){const e=c.wc(2);c.Dc("properties",e.addRecording.properties)("click",e.addRecording.onClick)}}const Pa=function(e){return{category:"standard",time:e}};function Ma(e,t){if(1&e&&(c.kc(0,"span",38),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(4);c.Mb(1),c.hd(c.zc(2,1,"{time} ago",c.Ic(4,Pa,e.timerOutput)))}}function La(e,t){if(1&e&&(c.kc(0,"span",37),c.gd(1),c.xc(2,"t"),c.ed(3,Ma,3,6,"span",43),c.jc()),2&e){const e=c.wc(3);c.Mb(1),c.id(" ",c.yc(2,2,"The webinar started:")," "),c.Mb(2),c.Dc("ngIf",!!e.timerOutput)}}function ja(e,t){if(1&e&&(c.kc(0,"div",41),c.ed(1,La,4,4,"span",23),c.fc(2,"rectangular-button",42),c.xc(3,"async"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngIf",!e.date.upcoming),c.Mb(1),c.Dc("properties",e.joinWebinar.properties)("state",e.date.webinar_tool_sync_failed||!c.yc(3,4,e.webinarToolCanJoinCondition$)?"disabled":"normal")("click",e.joinWebinar.onClick)}}function Ra(e,t){if(1&e){const e=c.lc();c.kc(0,"rightpanel-component",44,45),c.sc("onLoad",function(t){return c.Vc(e),c.wc(2).checkForm(t)}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("width",e.rightpanelParams.width)("title",e.rightpanelParams.title)("content",e.rightpanelParams.content)("actions",e.rightpanelParams.actions)}}function Fa(e,t){if(1&e&&(c.kc(0,"div",7),c.kc(1,"div",8),c.kc(2,"h1",9),c.gd(3),c.xc(4,"t"),c.jc(),c.kc(5,"div",10),c.fc(6,"i",11),c.kc(7,"div",12),c.kc(8,"div",13),c.gd(9),c.xc(10,"t"),c.xc(11,"t"),c.jc(),c.kc(12,"h4",14),c.gd(13),c.xc(14,"HTime"),c.jc(),c.kc(15,"div",15),c.gd(16),c.xc(17,"timezoneFormatter"),c.jc(),c.jc(),c.jc(),c.kc(18,"div",10),c.fc(19,"i",16),c.kc(20,"div",12),c.kc(21,"div",13),c.gd(22),c.xc(23,"t"),c.jc(),c.kc(24,"h4",14),c.gd(25),c.xc(26,"transformMinutes"),c.jc(),c.jc(),c.jc(),c.kc(27,"div",10),c.fc(28,"i",17),c.kc(29,"div",12),c.kc(30,"div",13),c.gd(31),c.xc(32,"t"),c.jc(),c.kc(33,"h4",14),c.gd(34),c.jc(),c.jc(),c.jc(),c.ed(35,ya,8,6,"div",18),c.ed(36,Ca,8,6,"div",18),c.jc(),c.kc(37,"div",19),c.ed(38,Sa,9,10,"div",20),c.ed(39,Ta,2,1,"ng-container",21),c.xc(40,"async"),c.kc(41,"div",22),c.ed(42,Ia,3,3,"span",23),c.ed(43,xa,3,3,"span",23),c.ed(44,Da,5,6,"span",23),c.kc(45,"div",24),c.ed(46,Oa,1,2,"rectangular-button",25),c.jc(),c.kc(47,"div",24),c.ed(48,Ea,3,5,"a",26),c.xc(49,"async"),c.jc(),c.kc(50,"div",24),c.ed(51,Aa,1,2,"rectangular-button",25),c.xc(52,"async"),c.jc(),c.ed(53,ja,4,6,"div",27),c.jc(),c.jc(),c.ed(54,Ra,2,4,"rightpanel-component",28),c.jc()),2&e){const e=c.wc();c.Mb(3),c.id(" ",c.yc(4,20,"Video conference details")," "),c.Mb(6),c.id(" ",e.userTimezoneEnabled&&e.isLoggedIn?c.yc(10,22,"Your Time"):c.yc(11,24,"Local Time")," "),c.Mb(4),c.id(" ",c.Ac(14,26,e.UTCStartTime,e.userTimezoneEnabled?e.userTimeZone:e.sessionTimeZone,e.timeFormat)," "),c.Mb(3),c.id(" ",c.yc(17,30,e.userTimezoneEnabled?e.userTimeZone:e.sessionTimeZone)," "),c.Mb(6),c.id(" ",c.yc(23,32,"Duration")," "),c.Mb(3),c.hd(c.yc(26,34,e.date.duration)),c.Mb(6),c.id(" ",c.zc(32,36,"Tool",c.Hc(45,wa))," "),c.Mb(3),c.hd(e.date.tool),c.Mb(1),c.Dc("ngIf",!!e.date.event_type),c.Mb(1),c.Dc("ngIf",!!e.date.kaltura_v1_room),c.Mb(2),c.Dc("ngIf",e.showInfoBox),c.Mb(1),c.Dc("ngIf",c.yc(40,39,e.webinarToolError$)),c.Mb(3),c.Dc("ngIf",e.date.not_attended&&(!e.date.has_recording||e.date.recording_status!=e.RecordingStatusCodeEnum.COMPLETED)&&!e.isEventUpcoming),c.Mb(1),c.Dc("ngIf",e.date.not_attended&&e.date.has_recording&&e.date.recording_status==e.RecordingStatusCodeEnum.COMPLETED&&!e.isEventUpcoming),c.Mb(1),c.Dc("ngIf",e.date.upcoming),c.Mb(2),c.Dc("ngIf",e.date.has_recording&&e.date.recording_status==e.RecordingStatusCodeEnum.COMPLETED&&!e.isEventUpcoming),c.Mb(2),c.Dc("ngIf",("instructor"==e.date.user_level||e.date.super_user||e.date.power_user&&c.yc(49,41,e.canPowerUserManageRecording$))&&e.date.has_recording&&e.date.recording_status==e.RecordingStatusCodeEnum.COMPLETED&&!e.date.upcoming&&!e.isEventUpcoming),c.Mb(3),c.Dc("ngIf",("instructor"==e.date.user_level||e.date.super_user||e.date.power_user&&c.yc(52,43,e.canPowerUserManageRecording$))&&(!e.date.has_recording||e.date.recording_status!=e.RecordingStatusCodeEnum.COMPLETED)&&!e.date.upcoming&&!e.isEventUpcoming&&e.showAddNewVideo),c.Mb(2),c.Dc("ngIf",e.isEventUpcoming),c.Mb(1),c.Dc("ngIf",e.showRightPanel)}}function Na(e,t){if(1&e&&(c.kc(0,"div",46),c.fc(1,"iframe",47),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("src",e.iframeUrl,c.Xc)}}function Ua(e,t){if(1&e&&c.fc(0,"player-iframe",48),2&e){const e=c.wc();c.Dc("url",e.recordData.recording.url)("bookmark",0)}}function za(e,t){if(1&e&&c.fc(0,"player-flowplayer",49),2&e){const e=c.wc();c.Dc("mp4_url",e.recordData.recording.url)("hls_url",e.recordData.recording.hls)("speedControlEnabled","true")}}let qa=(()=>{class e{constructor(e,t,i,s,n,a,r,c,l,d,u,h,p){this.router=e,this._el=t,this.docLayoutService=i,this.backendService=s,this.formatter=n,this._store=a,this.overviewActions=r,this._route=c,this.changeDetector=l,this.sanitizer=d,this.toggleService=u,this.store=h,this.webinarToolJoinConditionsService=p,this.webinarToolError$=this.webinarToolJoinConditionsService.error$,this.isEventUpcoming=!1,this.showAddNewVideo=!0,this.showRightPanel=!1,this.showVideoFrame=!1,this.userTimeZone=o.a.getInstance().timezone,this.canPowerUserManageRecording$=Object(Ei.a)(!1),this.userTimezoneEnabled="off"!==D.b.getInstance().user_settings.timezone_allow_user_override,this.isLoggedIn=o.a.getInstance().isValid(),this.RecordingStatusCodeEnum=Jn,this.ticker=Object(Yn.a)(0,1e3),this.viewRecording={},this.addRecording={},this.joinWebinar={},this.isIframeinit=!1,this.iframeUrl="",this.toggleAdobeConnectIsOn=!1,this.toggleAdobeConnectAttendanceTrackingIsOn=!1,this.joinWebinarAction=()=>{this.routeTo()}}ngOnInit(){this.initializeRightPanel(),this.webinarToolCanJoinCondition$=this.webinarToolJoinConditionsService.canJoin$(this.date.webinar_tool,{zoomV3RegistrationEnabled:this.date.zoom_v3_registration_enabled,isSessionInstructor:this.overview.current_session.is_instructor,isEventInstructor:this.date.is_instructor}),this.toggleAdobeConnectIsOn=this.toggleService.isOn(u.f.TOGGLE_ADOBE_CONNECT_V2_SESSION_COMPLETION_VILT),this.toggleAdobeConnectAttendanceTrackingIsOn=this.toggleService.isOn(u.f.TOGGLE_ADOBE_CONNECT_V2_ATTENDANCE_TRACKING),this.joinWebinar={properties:{text:M.a.t("standard","join the webinar"),colorScheme:"positive-green",typeStyle:"filled"},onClick:this.joinWebinarAction},this.addRecording={properties:{text:M.a.t("webinar","Add recording"),colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>{this.rightpanel.open()}},this.viewRecording={properties:{text:M.a.t("standard","view the recording"),colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>{this.backendService.request(`/course/v1/events/${this.date.id}/watch_recording`,"GET").pipe(Object(di.a)(e=>e)).subscribe(e=>{this.recordData=e.data,"link"==e.data.recording.type?(window.open(e.data.recording.url,"_blank"),this._store.dispatch(this.overviewActions.loadOverviewInfo(this.course_id))):"video"==e.data.recording.type||"iframe"==e.data.recording.type?(this.showVideoFrame=!0,this.changeDetector.detectChanges(),this._el.nativeElement.querySelector(".webinar-iframe-video")&&this._el.nativeElement.querySelector(".webinar-iframe-video").classList.add("opened"),document.body.classList.add("hide-overflow")):this.docLayoutService.toast.showToast({message:M.a.t("standard","Something went wrong."),type:"error"})})}},this.webinarStartHour=this.date.day+" "+this.date.time_begin;const e=this.formatter.convertTimeToUTC(this.webinarStartHour,this.date.timezone);this.UTCStartTime=e,this.timeFormat=Object(ii.n)(Object(ii.j)(),"short"),this.formatter.format("time",e,{length:"short"}).subscribe(e=>this.webinarStartDateToUserTimezone=e),this.sessionTimeZone=this.date.timezone,this.webinarEndHour=this.formatter.calculateDuration(e,this.date.duration);const t=!this.date.instructor_join||"instructor"!==this.date.user_level&&"tutor"!==this.date.user_level?this.date.student_join&&"learner"===this.date.user_level?this.date.student_join:null:this.date.instructor_join;this.webinarPreJoinDateToUTC=t?this.formatter.calculateDuration(e,-1*t):0,this.minutesRemainingToStart=this.formatter.getTime(e),this.webinarEndHour=this.formatter.getTime(this.webinarEndHour),0!==this.webinarPreJoinDateToUTC&&(this.joinInAdvanceMinutes=this.formatter.getTime(this.webinarPreJoinDateToUTC)),this.subscriber=this.ticker.subscribe(e=>{this.upcomingTimer()}),this.changeDetector.detectChanges(),this.canPowerUserManageRecording$=this.store.select(ae.e).pipe(Object(di.a)(e=>!!e.permissions&&e.permissions.some(e=>e==u.e.COURSE_UPDATE)))}ngOnDestroy(){this.subscriber&&this.subscriber.unsubscribe(),this.rightpanel&&this.rightpanel.componentInstance&&this.rightpanel.componentInstance.subscriber&&this.rightpanel.componentInstance.subscriber.unsubscribe()}closeIframe(){this._el.nativeElement.querySelector(".webinar-iframe-video")&&this._el.nativeElement.querySelector(".webinar-iframe-video").classList.remove("opened"),document.body.classList.remove("hide-overflow"),this.showVideoFrame=!1,this._store.dispatch(this.overviewActions.loadOverviewInfo(this.course_id))}upcomingTimer(){let e=this.formatter.currentUtcDateTime();e=this.formatter.getTime(e);let t=this.formatter.returnTimer(this.webinarStartHour,{timezone:this.date.timezone});t||(this.date.upcoming=!1);const i=this.formatter.convertTimeToUTC(this.date.day+" "+this.date.time_end,this.date.timezone);this.formatter.getTime(i)>e?(this.minutesRemainingToStart<=e||this.joinInAdvanceMinutes&&this.joinInAdvanceMinutes<e||"-1"===this.date.instructor_join&&("instructor"===this.date.user_level||"tutor"===this.date.user_level)||"-1"===this.date.student_join&&"learner"===this.date.user_level?(this.isEventUpcoming=!0,this.showAddNewVideo=!1):(this.isEventUpcoming=!1,this.showAddNewVideo=!1),this.timerOutput=t):(this.isEventUpcoming=!1,this.showAddNewVideo=!0,this.subscriber.unsubscribe())}deleteRecording(){this.docLayoutService.dialog.showCommonDialog({title:M.a.t("standard","Delete recording"),content:M.a.t("standard","Delete your webinar video recording?"),showConfirmationCheck:!0,requireConfirmation:!0,confirmationLabel:M.a.t("standard","Yes, I want to proceed"),actions:[{id:"cancel",type:"neutral",label:M.a.t("standard","Cancel"),slot:"end"},{id:"delete",type:"negative",label:M.a.t("standard","delete"),slot:"end"}]}).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.backendService.request(`/course/v1/events/${this.date.id}/recording`,"DELETE").subscribe(t=>{this.docLayoutService.toast.showToast({message:M.a.t("standard","Your recording has been deleted."),type:"success"}),e.actionSuccess.next(!0),this._route.params.pipe(Object(se.a)(1)).subscribe(e=>{let t=e.id_session;t&&this.id_session==t&&this._store.dispatch(this.overviewActions.loadOverviewInfo(this.course_id))})},()=>{this.docLayoutService.toast.showToast({message:M.a.t("standard","Your recording hasn't been deleted."),type:"error"}),e.actionSuccess.next(!1)})})}uploadStatus(e){switch(e){case"uploaded":this.rightpanel.close(),this.showAddNewVideo=!0,this.date.has_recording=!0,this.date.recording_status=Jn.COMPLETED;let e=this._route.params.subscribe(e=>{let t=e.id_session;t&&this.id_session===t&&this._store.dispatch(this.overviewActions.loadOverviewInfo(this.course_id))});e&&e.unsubscribe();break;case"uploading":this.showAddNewVideo=!1;break;case"failed":this.date.recording_status=Jn.FAILED,this.showAddNewVideo=!0}}routeTo(){this.backendService.request(`/course/v1/events/${this.date.id}/join_webtool`,"GET").subscribe(e=>{if(void 0!==e.data.join_url)if(console.log("Getting url data"),console.log(e.data),void 0===e.data.credentials)if(console.log("Sending request via GET"),"undefined"!=e.data.show_type&&"iframe"==e.data.show_type){let t=this.sanitizer.bypassSecurityTrustResourceUrl(e.data.join_url);this.iframeStatus$.next({isInit:!0,url:t,name:this.date.name})}else window.open(e.data.join_url,"_blank");else{console.log("Sending request via POST");const i=e.data.credentials,s=e.data.join_url,n=document.createElement("form");if(n.target="_blank",n.method="POST",n.action=s,e.data.credentials)for(var t in i){let e=document.createElement("input");e.type="hidden",e.name=t,e.setAttribute("value",i[t]),n.appendChild(e)}document.body.appendChild(n),n.submit(),n.remove()}else this.docLayoutService.toast.showToast({message:M.a.t("standard","Failed to join webinar session."),type:"error"})},e=>{const t={20100:()=>{this.docLayoutService.toast.showToast({message:M.a.t("zoom","You cannot access a Zoom meeting without having a valid email in your profile"),type:"error"})},20101:()=>{this.docLayoutService.toast.showToast({message:M.a.t("webinar","Unable to retrieve join URL due to internal error"),type:"error"})},21021:()=>{this.docLayoutService.toast.showToast({message:M.a.t("bluejeans","You cannot access a Bluejeans meeting without having a valid email in your profile"),type:"error"})},500:()=>{this.docLayoutService.toast.showToast({message:M.a.t("standard","Internal Server Error"),type:"error"})}};t[e.code]&&t[e.code]()})}checkForm(e){setTimeout(()=>{this.rightpanel.setFormControl(e.webinarRecordingsForm)})}initializeRightPanel(){this.rightpanelParams={width:500,title:M.a.t("webinar","Add recording"),content:{params:{id_session:this.id_session,id_event:this.date.id,api_link:this.date.api_link,api_grab:this.date.api_grab,tool_name:this.date.tool,super_user:this.date.super_user,handler:this.uploadStatus.bind(this)},component:ra},actions:[{type:"submit",properties:{text:M.a.t("standard","Confirm"),state:"disabled"},handler:()=>{this.rightpanel.componentInstance.submitVideo()}},{type:"cancel",properties:{text:"Cancel"},handler:e=>{e.close()}}]},this.showRightPanel=!0}isAdobeMeetingField(e){return e==Wn.adobeconnectv2meeting}get showInfoBox(){return this.isAdobeMeetingField(this.date.webinar_tool)&&this.toggleAdobeConnectAttendanceTrackingIsOn&&this.toggleAdobeConnectIsOn&&this.date.tool_mapping_field_lms}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.h),c.ec(c.o),c.ec(j.a),c.ec(I.a),c.ec(ni.b),c.ec(w.e),c.ec(Ts.e),c.ec(s.a),c.ec(c.i),c.ec(Li.b),c.ec(u.g),c.ec(w.e),c.ec(ga))},e.\u0275cmp=c.Yb({type:e,selectors:[["ilt-viewer-tool"]],viewQuery:function(e,t){if(1&e&&c.nd(_a,1),2&e){let e;c.Rc(e=c.tc())&&(t.rightpanel=e.first)}},inputs:{date:"date",overview:"overview",id_session:"id_session",course_id:"course_id",session_slug_name:"session_slug_name",recordData:"recordData",iframeStatus$:"iframeStatus$"},features:[c.Lb([ga])],decls:7,vars:4,consts:[["class","ilt-wrapper new-ilt-style bg-before-grey-light",4,"ngIf"],["class","webinar-iframe-holder player-wrapper",4,"ngIf"],[1,"webinar-iframe-video"],[1,"player-wrapper"],[3,"url","bookmark",4,"ngIf"],[3,"mp4_url","hls_url","speedControlEnabled",4,"ngIf"],[1,"zmdi","zmdi-close",3,"click"],[1,"ilt-wrapper","new-ilt-style","bg-before-grey-light"],[1,"information-wrap"],[1,"hyd-typography-heading-5","hyd-color-typography-primary","new-ilt-style"],[1,"block-wrap","time-details"],[1,"zmdi","zmdi-time","text-grey-mid"],[1,"data-wrap"],[1,"location","text-grey-mid"],[1,"bolded"],[2,"margin-top","var(--hyd-spacing-tiny)"],[1,"zmdi","zmdi-time-interval","text-grey-mid"],[1,"zmdi","zmdi-videocam","text-grey-mid"],["class","block-wrap time-details",4,"ngIf"],[1,"enroll-footer","bg-before-grey-light","recording-available"],["class","ilt-warning-block",4,"ngIf"],[4,"ngIf"],[1,"ilt-info-block"],["class","title-regular",4,"ngIf"],[1,"button-block"],[3,"properties","click",4,"ngIf"],["class","cursor text-main",3,"click",4,"ngIf"],["class","button-block join-button-block",4,"ngIf"],[3,"width","title","content","actions","onLoad",4,"ngIf"],[1,"zmdi","zmdi-laptop","text-grey-mid"],[1,"zmdi","zmdi-home","text-grey-mid"],[1,"ilt-warning-block"],[1,"zmdi","zmdi-info","zmdi-hc-2x"],[1,"ui-typography-heading-5"],[1,"ui-typography-subtitle"],["type","error",3,"title","message","closable",4,"ngIf"],["type","error",3,"title","message","closable"],[1,"title-regular"],[1,"timer-string"],[3,"properties","click"],[1,"cursor","text-main",3,"click"],[1,"button-block","join-button-block"],[3,"properties","state","click"],["class","timer-string",4,"ngIf"],[3,"width","title","content","actions","onLoad"],["rightpanel",""],[1,"webinar-iframe-holder","player-wrapper"],["title","community",1,"ilt-iframe",3,"src"],[3,"url","bookmark"],[3,"mp4_url","hls_url","speedControlEnabled"]],template:function(e,t){1&e&&(c.ed(0,Fa,55,46,"div",0),c.ed(1,Na,2,1,"div",1),c.kc(2,"div",2),c.kc(3,"div",3),c.ed(4,Ua,1,2,"player-iframe",4),c.ed(5,za,1,3,"player-flowplayer",5),c.kc(6,"i",6),c.sc("click",function(){return t.closeIframe()}),c.jc(),c.jc(),c.jc()),2&e&&(c.Dc("ngIf",t.date.tool&&!t.isIframeinit),c.Mb(1),c.Dc("ngIf",t.isIframeinit),c.Mb(3),c.Dc("ngIf",t.showVideoFrame&&t.date.has_recording&&t.date.recording_status==t.RecordingStatusCodeEnum.COMPLETED&&"iframe"==t.recordData.recording.type),c.Mb(1),c.Dc("ngIf",t.showVideoFrame&&t.date.has_recording&&t.date.recording_status==t.RecordingStatusCodeEnum.COMPLETED&&"video"==t.recordData.recording.type))},directives:[m.p,b.Jd,ts.a,ma.a,ba.a,fa.a],pipes:[M.b,xs.a,Ds.a,ns.a,m.b],encapsulation:2}),e})();const Va=function(){return{category:"classroom"}};function Ba(e,t){if(1&e){const e=c.lc();c.kc(0,"div",11),c.fc(1,"i",12),c.kc(2,"div",6),c.fc(3,"div",13),c.xc(4,"t"),c.kc(5,"h4",14),c.sc("click",function(){c.Vc(e);const t=c.wc(2);return t.loadMapPreview(t.overview.locations[t.day.id_location])}),c.gd(6),c.jc(),c.kc(7,"div"),c.gd(8),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Mb(3),c.Dc("innerHTML",c.zc(4,3,"Location",c.Hc(6,Va)),c.Wc),c.Mb(3),c.id(" ",e.overview.locations[e.day.id_location].name," "),c.Mb(2),c.hd(e.overview.locations[e.day.id_location].address)}}const Ga=function(){return{category:"standard"}};function Ha(e,t){if(1&e&&(c.kc(0,"div",15),c.fc(1,"i",16),c.kc(2,"div",6),c.kc(3,"div",17),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"h4",18),c.gd(7),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(4),c.hd(c.zc(5,2,"Classroom",c.Hc(5,Ga))),c.Mb(3),c.hd(e.classrooms[e.day.id_classroom].name)}}function $a(e,t){if(1&e&&(c.kc(0,"p"),c.fc(1,"i",21),c.gd(2),c.xc(3,"t"),c.jc()),2&e){const e=c.wc(4);c.Mb(2),c.jd(" ",e.classrooms[e.day.id_classroom].seats," ",c.yc(3,2,"available seats")," ")}}function Ya(e,t){if(1&e&&(c.kc(0,"p"),c.fc(1,"i",22),c.gd(2),c.jc()),2&e){const e=c.wc(4);c.Mb(2),c.id(" ",e.classrooms[e.day.id_classroom].details," ")}}function Wa(e,t){if(1&e&&(c.kc(0,"p"),c.fc(1,"i",23),c.gd(2),c.jc()),2&e){const e=c.wc(4);c.Mb(2),c.id(" ",e.classrooms[e.day.id_classroom].equipment," ")}}function Qa(e,t){if(1&e&&(c.ic(0),c.kc(1,"h5"),c.gd(2),c.xc(3,"t"),c.jc(),c.ed(4,$a,4,4,"p",20),c.ed(5,Ya,3,1,"p",20),c.ed(6,Wa,3,1,"p",20),c.hc()),2&e){const e=c.wc(3);c.Mb(2),c.hd(c.zc(3,4,"Additional classroom information",c.Hc(7,Va))),c.Mb(2),c.Dc("ngIf",e.classrooms[e.day.id_classroom].seats),c.Mb(1),c.Dc("ngIf",e.classrooms[e.day.id_classroom].details),c.Mb(1),c.Dc("ngIf",e.classrooms[e.day.id_classroom].equipment)}}function Ka(e,t){if(1&e&&(c.kc(0,"div",19),c.ed(1,Qa,7,8,"ng-container",20),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngIf",0!=e.classrooms[e.day.id_classroom])}}function Ja(e,t){if(1&e&&(c.kc(0,"div",3),c.kc(1,"div",4),c.fc(2,"i",5),c.kc(3,"div",6),c.fc(4,"div",7),c.xc(5,"t"),c.fc(6,"div",7),c.xc(7,"t"),c.kc(8,"h4"),c.gd(9),c.xc(10,"HTime"),c.xc(11,"HTime"),c.jc(),c.kc(12,"span"),c.gd(13),c.xc(14,"t"),c.xc(15,"timezoneDifference"),c.jc(),c.jc(),c.jc(),c.ed(16,Ba,9,7,"div",8),c.ed(17,Ha,8,6,"div",9),c.ed(18,Ka,2,1,"div",10),c.jc()),2&e){const e=c.wc();c.Mb(4),c.Rb("location text-grey-mid ",1==e.userUserLocalTimeArray?"hidden":"",""),c.Dc("innerHTML",c.zc(5,21,"location's time",c.Hc(39,Ga)),c.Wc),c.Mb(2),c.Rb("location text-grey-mid ",1==e.userUserLocalTimeArray?"":"hidden",""),c.Dc("innerHTML",c.zc(7,24,"my time",c.Hc(40,Ga)),c.Wc),c.Mb(2),c.Rb("text-uppercase bolded __TZ_",e.timezoneToUse[e.userUserLocalTimeArray],""),c.Mb(1),c.jd(" ",c.Ac(10,27,e.displayDateBegin,e.timezoneToUse[e.userUserLocalTimeArray],e.timeFormat)," - ",c.Ac(11,31,e.displayDateEnd,e.timezoneToUse[e.userUserLocalTimeArray],e.timeFormat)," "),c.Mb(3),c.Rb("timezone-difference ",1==e.userUserLocalTimeArray?"is-hidden":"",""),c.Mb(1),c.jd("(",e.day.timezone," | ",c.yc(14,35,c.yc(15,37,e.day.timezone)),")"),c.Mb(3),c.Dc("ngIf",e.overview.locations[e.day.id_location]&&e.locations.length>1),c.Mb(1),c.Dc("ngIf",e.classrooms[e.day.id_classroom]),c.Mb(1),c.Dc("ngIf",e.day.id_classroom)}}function Xa(e,t){if(1&e&&c.fc(0,"ilt-new-viewer",24),2&e){const e=c.wc();c.Dc("day",e.day)("timezoneToUse",e.timezoneToUse)("userUserLocalTime",e.userUserLocalTime)("displayDateBegin",e.displayDateBegin)("displayDateEnd",e.displayDateEnd)("locations",e.locations)("classrooms",e.classrooms)("overview",e.overview)}}function Za(e,t){if(1&e&&c.fc(0,"ilt-viewer-tool",25),2&e){const e=c.wc();c.Dc("date",e.day)("id_session",e.id_session)("course_id",e.course.id)("session_slug_name",e.session_slug_name)("recordData",e.recordData)("iframeStatus$",e.iframeStatus$)("overview",e.overview)}}let eo=(()=>{class e{constructor(e,t,i){this.pageService=e,this.formatter=t,this.toggleService=i,this.vilt=!1,this.userUserLocalTimeArray=0,this.timeFormat=Object(ii.n)(Object(ii.j)(),"short")}ngOnInit(){this.vilt=this.toggleService.isOn(u.f.TOGGLE_VILT),this.day.duration=this.day.effective_duration,this.classrooms=this.overview.classrooms,this.changeTimeView=r.a.singleton.subscribe("showTimeZonePreferenceForCourseOverview",e=>{this.userUserLocalTimeArray=e.data.userUserLocalTime?1:0}),this.userUserLocalTimeArray=this.userUserLocalTime?1:0,this.displayDateBegin=this.formatter.convertTimeToUTC(this.day.day+" "+this.day.time_begin,this.day.timezone),this.displayDateEnd=this.formatter.convertTimeToUTC(this.day.day+" "+this.day.time_end,this.day.timezone),this.timezoneToUse=[this.day.timezone,this.formatter.currentTimezone]}loadMapPreview(e){this.pageService.locationViewer.loadMapPreview(e)}ngOnDestroy(){this.changeTimeView.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(P.a),c.ec(ni.b),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["ilt-viewer"]],inputs:{day:"day",course:"course",overview:"overview",locations:"locations",userUserLocalTime:"userUserLocalTime",date:"date",id_session:"id_session",session_slug_name:"session_slug_name",recordData:"recordData",iframeStatus$:"iframeStatus$"},decls:3,vars:3,consts:[["class","ilt-wrapper bg-before-grey-light",4,"ngIf"],[3,"day","timezoneToUse","userUserLocalTime","displayDateBegin","displayDateEnd","locations","classrooms","overview",4,"ngIf"],[3,"date","id_session","course_id","session_slug_name","recordData","iframeStatus$","overview",4,"ngIf"],[1,"ilt-wrapper","bg-before-grey-light"],[1,"block-wrap","time-details"],[1,"zmdi","zmdi-time","text-grey-mid"],[1,"data-wrap"],[3,"innerHTML"],["class","block-wrap location-details",4,"ngIf"],["class","block-wrap classroom-details",4,"ngIf"],["class","enroll-footer bg-before-grey-light",4,"ngIf"],[1,"block-wrap","location-details"],[1,"zmdi","zmdi-pin","text-grey-mid"],[1,"location","text-grey-mid",3,"innerHTML"],[1,"bolded","text-main","clickable",3,"click"],[1,"block-wrap","classroom-details"],[1,"zmdi","zmdi-home","text-grey-mid"],[1,"location","text-grey-mid"],[1,"bolded"],[1,"enroll-footer","bg-before-grey-light"],[4,"ngIf"],[1,"text-grey-mid","zmdi","zmdi-accounts-alt"],[1,"text-grey-mid","zmdi","zmdi-library"],[1,"text-grey-mid","zmdi","zmdi-wrench"],[3,"day","timezoneToUse","userUserLocalTime","displayDateBegin","displayDateEnd","locations","classrooms","overview"],[3,"date","id_session","course_id","session_slug_name","recordData","iframeStatus$","overview"]],template:function(e,t){1&e&&(c.ed(0,Ja,19,41,"div",0),c.ed(1,Xa,1,8,"ilt-new-viewer",1),c.ed(2,Za,1,7,"ilt-viewer-tool",2)),2&e&&(c.Dc("ngIf",t.overview.locations[t.day.id_location]&&!t.vilt),c.Mb(1),c.Dc("ngIf",t.vilt),c.Mb(1),c.Dc("ngIf",t.vilt))},directives:[m.p,$n,qa],pipes:[M.b,xs.a,Os.a],encapsulation:2}),e})();var to=i("64/C");const io=["googleMap"],so=["locationSlider"];function no(e,t){if(1&e){const e=c.lc();c.kc(0,"i",19),c.sc("click",function(){c.Vc(e);const t=c.wc().index;return c.wc().movePrev(t)}),c.jc()}}const ao=function(e,t){return{category:"classroom",index1:e,index2:t}};function oo(e,t){if(1&e&&(c.kc(0,"h5"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc().index,t=c.wc();c.Mb(1),c.id(" ",c.zc(2,1,"MULTIPLE LOCATIONS ({index1} of {index2})",c.Jc(4,ao,e+1,t.location.length))," ")}}function ro(e,t){if(1&e&&c.fc(0,"div",14),2&e){const e=c.wc().$implicit;c.Dc("innerHTML",null==e?null:e.address,c.Wc)}}function co(e,t){if(1&e){const e=c.lc();c.kc(0,"i",20),c.sc("click",function(){c.Vc(e);const t=c.wc().index;return c.wc().moveNext(t)}),c.jc()}}function lo(e,t){if(1&e){const e=c.lc();c.kc(0,"div",10),c.ed(1,no,1,0,"i",11),c.ed(2,oo,3,7,"h5",12),c.kc(3,"div",13),c.gd(4),c.jc(),c.fc(5,"div",14),c.ed(6,ro,1,1,"div",15),c.kc(7,"div",16),c.kc(8,"rectangular-button",17),c.sc("click",function(i){c.Vc(e);const s=t.$implicit;return c.wc().loadMap(s,i)}),c.jc(),c.jc(),c.ed(9,co,1,0,"i",18),c.jc()}if(2&e){const e=t.$implicit,i=t.last,s=t.first,n=c.wc();c.Mb(1),c.Dc("ngIf",n.location.length>1&&!s),c.Mb(1),c.Dc("ngIf",n.location.length>1),c.Mb(2),c.id(" ",e.name," "),c.Mb(1),c.Dc("innerHTML",null==e?null:e.country_name,c.Wc),c.Mb(1),c.Dc("ngIf",null==e?null:e.address),c.Mb(2),c.Dc("properties",n.mapButton.properties),c.Mb(1),c.Dc("ngIf",n.location.length>1&&!i)}}const uo=function(e){return{"carousel-locations":e}};let ho=(()=>{class e{constructor(e,t){this.el=e,this.pageService=t,this.location=[],this.address=""}ngOnInit(){this.location&&(this.mapButton={properties:{text:M.a.t("classroom","Location map and details"),colorScheme:"main",typeStyle:"filled"}})}onLocationChange(e){var t,i=new google.maps.DirectionsRenderer;(new google.maps.Geocoder).geocode({address:e=e.address&&""!==e.address?e.address:e.country_name},function(e,i){if(i==google.maps.GeocoderStatus.OK){var s={zoom:14,disableDefaultUI:!0,scrollwheel:!1,draggable:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};setTimeout(()=>{(t=new google.maps.Map(document.getElementById("location-map"),s)).setCenter(e[0].geometry.location)},100)}}),i.setMap(t)}loadMap(e,t){this.pageService.locationViewer.loadMapPreview(e)}ngAfterViewInit(){this.initCarousel(),"undefined"!=typeof google&&this.onLocationChange(this.location[0])}initCarousel(){this.owl=$(this.locationSlider.nativeElement),this.owl.owlCarousel({items:1,startPosition:0,nav:!1,dots:!1,loop:!1,touchDrag:!1,mouseDrag:!1})}moveNext(e){this.owl.trigger("next.owl.carousel"),this.onLocationChange(e+1<this.location.length?this.location[e+1]:this.location[0])}movePrev(e){this.owl.trigger("prev.owl.carousel"),this.onLocationChange(e>0?this.location[e-1]:this.location[this.location.length-1])}destroySlider(e=!1){this.owl&&(!0===e&&(this.owl.off(".owl.carousel"),this.owl.hasClass("owl-carousel")&&(this.owl.owlCarousel({touchDrag:!1,mouseDrag:!1}),this.owl.removeClass("owl-loaded"),this.owl.find(".owl-stage-outer").children().unwrap(),this.owl.removeData())),$(".owl-stage").off(".owl.core"),$(document).off(".owl.core"),this.owl.trigger("destroy.owl.carousel"))}ngOnDestroy(){this.destroySlider(!0)}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.o),c.ec(P.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["location-map"]],viewQuery:function(e,t){if(1&e&&(c.nd(io,1),c.nd(so,1)),2&e){let e;c.Rc(e=c.tc())&&(t.googleMap=e.first),c.Rc(e=c.tc())&&(t.locationSlider=e.first)}},inputs:{location:"location"},decls:10,vars:4,consts:[[1,"mdl-wrapper","locations-position"],[1,"location-wrap",3,"ngClass"],["id","owl-locations-slider",1,"owl-carousel","owl-theme"],["locationSlider",""],["class","item",4,"ngFor","ngForOf"],[1,"marker-icon","bg-main"],[1,"zmdi","zmdi-pin","text-white"],[1,"map-wrapper"],["id","location-map",1,"map",2,"height","100%"],["googleMap",""],[1,"item"],["class","zmdi zmdi-chevron-left navigation left text-main",3,"click",4,"ngIf"],[4,"ngIf"],[1,"bolded"],[1,"country-name",3,"innerHTML"],["class","country-name",3,"innerHTML",4,"ngIf"],[1,"button-location"],[3,"properties","click"],["class","zmdi zmdi-chevron-right navigation right text-main",3,"click",4,"ngIf"],[1,"zmdi","zmdi-chevron-left","navigation","left","text-main",3,"click"],[1,"zmdi","zmdi-chevron-right","navigation","right","text-main",3,"click"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.kc(2,"div",2,3),c.ed(4,lo,10,7,"div",4),c.jc(),c.jc(),c.kc(5,"div",5),c.fc(6,"i",6),c.jc(),c.jc(),c.kc(7,"div",7),c.fc(8,"div",8,9),c.jc()),2&e&&(c.Mb(1),c.Dc("ngClass",c.Ic(2,uo,t.location.length>1)),c.Mb(3),c.Dc("ngForOf",t.location))},directives:[m.n,m.o,m.p,ts.a],pipes:[M.b],encapsulation:2}),e})();function po(e,t){if(1&e&&c.fc(0,"location-map",10),2&e){const e=c.wc(2);c.Dc("location",e.locations_array)}}function go(e,t){if(1&e&&(c.kc(0,"div",8),c.ed(1,po,1,1,"location-map",9),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",e.mapReady)}}const mo=function(e,t){return{category:"webinar",needed:e,total:t}};function bo(e,t){if(1&e&&(c.kc(0,"span",14),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.zc(2,1,"You must attend at least {needed}/{total} session dates to complete this course",c.Jc(4,mo,e.minDates,e.maxDates))," ")}}function fo(e,t){if(1&e&&(c.kc(0,"span",14),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.zc(2,1,"You must attend at least {needed}/{total} events to complete this session",c.Jc(4,mo,e.minDates,e.maxDates))," ")}}function _o(e,t){if(1&e&&(c.kc(0,"div",5),c.kc(1,"div",11),c.fc(2,"i",12),c.ed(3,bo,3,7,"span",13),c.ed(4,fo,3,7,"span",13),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(3),c.Dc("ngIf",!e.isVilt),c.Mb(1),c.Dc("ngIf",e.isVilt)}}function vo(e,t){if(1&e&&c.fc(0,"accordion",15),2&e){const e=c.wc();c.Dc("type",e.accordionParams.type)("title",e.accordionParams.title)("panels",e.accordionParams.panels)("mode",e.accordionParams.mode)}}let yo=(()=>{class e{constructor(e,t,i,s,n){this.googleMap=e,this.changeDetector=t,this.formatter=i,this.router=s,this.toggleService=n,this.panels=[],this.locations_array=[],this.timezoneToUse=[],this.isVilt=!1,this.userTimezoneEnabled="off"!==D.b.getInstance().user_settings.timezone_allow_user_override,this.mapReady=!1,this.minDates=null,this.maxDates=null,this.preferenceForTime=!1,this.eventEmitter=r.a.singleton}get courseStatusTypes(){return Qn}ngOnInit(){var e,t;this.isVilt=this.toggleService.isOn(u.f.TOGGLE_VILT),this.maxDates=this.current_session.dates.length,this.minDates=this.current_session.min_dates_for_completion?this.current_session.min_dates_for_completion:this.current_session.dates.length,this.googleMap.loadMap().then(e=>{this.mapReady=!0}),this.chooseLanguage={ellipsisType:"inline",orientation:"bottom-left",actions:[{title:M.a.t("standard","location's time"),action:e=>{this.showTimePreference(!1)}},{title:M.a.t("standard","my time"),action:e=>{this.showTimePreference(!0)}}]},this.changeTimeView=this.eventEmitter.subscribe("showTimeZonePreferenceForCourseOverview",i=>{if(this.current_session)for(var s=0;s<this.current_session.dates.length;s++){this.panels[s].content&&(this.panels[s].content.params.userUserLocalTime=this.preferenceForTime);const i=this.formatter.convertTimeToUTC(e=this.current_session.dates[s].day+" "+this.current_session.dates[s].time_begin,this.current_session.dates[s].timezone);this.panels[s].timeline_zone=this.timezoneToUse[s][t=this.preferenceForTime?1:0],this.panels[s].timeline_date=this.formatter.getTimezonedDate(i,this.timezoneToUse[s][t]),this.changeDetector.detectChanges()}});const i=!this.toggleService.isOn(u.f.TOGGLE_VILT)&&o.a.getInstance().pu_manage_user_permission.can_evaluate_course,s="instructor"===this.course.level||o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN);let n;for(let a=0;a<this.current_session.dates.length;a++){n=this.toggleService.isOn(u.f.TOGGLE_VILT)?{params:{day:Object.assign(Object.assign({},this.current_session.dates[a]),{user_level:this.course.level,duration:this.current_session.dates[a].effective_duration,upcoming:this.current_session.dates[a].user_status==ne.w.UPCOMING,not_attended:this.current_session.dates[a].user_status==ne.w.NOT_ATTENDED,student_join:!!this.current_session.dates[a].join_in_advance_user&&this.current_session.dates[a].join_in_advance_user,instructor_join:!!this.current_session.dates[a].join_in_advance_instructor&&this.current_session.dates[a].join_in_advance_instructor,api_grab:!!this.current_session.dates[a].allowed_api_grab,api_link:!!this.current_session.dates[a].allowed_api_link,super_user:o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN),power_user:this.course.can_manage_course&&o.a.getInstance().isCurrentUserA(o.a.LEVEL_POWERUSER)}),course:this.course,overview:this.overview,locations:this.locations_array,userUserLocalTime:this.preferenceForTime,id_session:this.current_session.id,course_id:this.course.id,session_slug_name:this.current_session.slug_name,iframeStatus$:this.iframeStatus$},component:eo}:{params:{day:this.current_session.dates[a],course:this.course,overview:this.overview,locations:this.locations_array,userUserLocalTime:this.preferenceForTime},component:eo};let t=!1,r=[],c=this.course.can_manage_course,l=!!(o.a.getInstance().isCurrentUserA(o.a.LEVEL_POWERUSER)&&this.course.enrolled.is_enrolled&&this.current_session.is_enrolled)&&this.course.enrolled.is_enrolled;(s||l&&c)&&(this.toggleService.isOn(u.f.TOGGLE_VILT)?r.push({icon:"zmdi zmdi-print",color:"text-grey-mid-permanent",tooltip_text:M.a.t("classroom","Print attendance sheet"),tooltip_position:"top",onClick:()=>{this.router.navigate([`/legacy/admin/index.php?r=ClassroomApp/instructor/axAttendanceSheet&course_id=${this.course.id}&id_session=${this.current_session.id}`])}}):r.push({icon:"zmdi zmdi-print",color:"text-grey-mid-permanent",tooltip_text:M.a.t("classroom","Print attendance sheet"),tooltip_position:"top",onClick:()=>{this.router.navigate(["/legacy/admin/index.php?r=player/training/session&course_id="+this.course.id+"&id_session="+this.current_session.id+"&printAttendance=1"])}}),(i||s)&&(this.toggleService.isOn(u.f.TOGGLE_VILT)?(this.current_session.is_instructor?r.push({icon:"zmdi zmdi-book",color:"text-grey-mid-permanent",tooltip_text:M.a.t("classroom","Evaluation"),tooltip_position:"top",onClick:()=>{this.router.navigate(["learn","instructor","session",this.current_session.id],{queryParams:{tab:"enrollments_evaluations"}})}}):(o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN)||i)&&r.push({icon:"zmdi zmdi-book",color:"text-grey-mid-permanent",tooltip_text:M.a.t("classroom","Evaluation"),tooltip_position:"top",onClick:()=>{this.router.navigate(["course","session",this.current_session.id],{queryParams:{tab:"enrollments_evaluations"}})}}),this.current_session.dates[a].is_instructor||this.current_session.is_instructor?r.push({icon:"zmdi zmdi-accounts",color:"text-grey-mid-permanent",tooltip_text:M.a.t("standard","_ATTENDANCE"),tooltip_position:"top",onClick:()=>{this.router.navigate(["learn","instructor","event",this.current_session.dates[a].id])}}):(o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN)||i)&&r.push({icon:"zmdi zmdi-accounts",color:"text-grey-mid-permanent",tooltip_text:M.a.t("standard","_ATTENDANCE"),tooltip_position:"top",onClick:()=>{this.router.navigate(["course","event",this.current_session.dates[a].id],{queryParams:{tab:"attendance"}})}})):r.push({icon:"zmdi zmdi-book",color:"text-grey-mid-permanent",tooltip_text:M.a.t("classroom","Evaluation & attendance"),tooltip_position:"top",onClick:()=>{this.router.navigate(["/legacy/admin/index.php?r=ClassroomApp/instructor/evaluation&course_id="+this.course.id+"&id_session="+this.current_session.id])}}))),this.current_session.dates[a].user_status===ne.w.ATTENDED&&(t=!0),e=this.formatter.convertTimeToUTC(e=this.current_session.dates[a].day+" "+this.current_session.dates[a].time_begin,this.current_session.dates[a].timezone),e=this.formatter.getTimezonedDate(e,this.current_session.dates[a].timezone),this.timezoneToUse.push([this.current_session.dates[a].timezone,this.formatter.currentTimezone]),this.panels.push({title:this.current_session.dates[a].name,description:{params:{session:this.current_session.dates[a],course:this.course,overview:this.overview},component:yn},content:n,hideDescriptionOnOpen:!0,timeline_date:e,timeline_zone:this.current_session.dates[a].timezone,markAsCompleted:t,action_buttons:r})}if(this.overview.locations){let e=this.overview.locations,t=(Object.keys(e).map(function(t){return e[t]}),[]);for(let i of this.current_session.dates)this.overview.locations[i.id_location]&&-1==t.indexOf(i.id_location)&&(t.push(i.id_location),this.locations_array.push(this.overview.locations[i.id_location]))}this.accordionParams={type:"split",panels:this.panels,mode:"timeline"},this.panels.forEach((t,i)=>{t.timeline_zone=this.current_session.dates[i].timezone,this.current_session.dates[i].id_location||(t.timeline_zone=this.userTimezoneEnabled?o.a.getInstance().timezone:this.current_session.dates[i].timezone);const s=this.formatter.convertTimeToUTC(e=this.current_session.dates[i].day+" "+this.current_session.dates[i].time_begin,this.current_session.dates[i].timezone);t.timeline_date=this.formatter.getTimezonedDate(s,t.timeline_zone).format()})}showTimePreference(e){this.preferenceForTime=e,this.changeDetector.detectChanges(),this.eventEmitter.publish({event_type:"showTimeZonePreferenceForCourseOverview",sender_id:"session-enroller",data:{userUserLocalTime:e}})}ngOnDestroy(){this.changeTimeView.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(to.a),c.ec(c.i),c.ec(ni.b),c.ec(s.h),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["ilt-listing"]],inputs:{course:"course",overview:"overview",current_session:"current_session",webinarListing:"webinarListing",iframeStatus$:"iframeStatus$"},decls:8,vars:3,consts:[[1,"ilt-viewer__wrapper"],["class","locations-wrapper",4,"ngIf"],[1,"mdl-wrapper"],[1,"mdl-grid"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],[1,"mdl-cell","mdl-cell--12-col"],[1,"sessions-dates"],[3,"type","title","panels","mode",4,"ngIf"],[1,"locations-wrapper"],[3,"location",4,"ngIf"],[3,"location"],[1,"webinar-completion-warning","bg-warning","text-white"],[1,"zmdi","zmdi-alert-triangle"],["class","inner-text",4,"ngIf"],[1,"inner-text"],[3,"type","title","panels","mode"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.ed(1,go,2,1,"div",1),c.kc(2,"div",2),c.kc(3,"div",3),c.ed(4,_o,5,2,"div",4),c.kc(5,"div",5),c.kc(6,"div",6),c.ed(7,vo,1,4,"accordion",7),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(1),c.Dc("ngIf",t.overview.locations&&t.locations_array.length>0),c.Mb(3),c.Dc("ngIf",2==t.current_session.evaluation_type&&t.course.status!==t.courseStatusTypes.COMPLETED),c.Mb(3),c.Dc("ngIf",t.accordionParams))},directives:[m.p,ho,wn.a],pipes:[M.b],encapsulation:2}),e})();const wo=["singleUpload"],Co=function(){return{category:"webinar"}};function So(e,t){1&e&&(c.kc(0,"div",11),c.kc(1,"div",12),c.fc(2,"ui-spinner"),c.kc(3,"h4"),c.gd(4),c.xc(5,"t"),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(4),c.hd(c.zc(5,1,"Importing and converting your webinar recording...",c.Hc(4,Co))))}function ko(e,t){if(1&e&&(c.kc(0,"div",3),c.kc(1,"div",3),c.fc(2,"radio",7),c.xc(3,"t"),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.Dc("label",c.yc(3,7,e.apiGrab.label))("name",e.apiGrab.name)("value",e.apiGrab.value)("enabled",e.apiGrab.enabled)("required",e.apiGrab.required)("change",e.apiGrab.change)("inputFormControl",e.webinarRecordingsForm.controls.formal)}}function To(e,t){if(1&e&&(c.kc(0,"div",3),c.kc(1,"div",3),c.fc(2,"radio",7),c.xc(3,"t"),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.Dc("label",c.yc(3,7,e.apiLink.label))("name",e.apiLink.name)("value",e.apiLink.value)("enabled",e.apiLink.enabled)("required",e.apiLink.required)("change",e.apiLink.change)("inputFormControl",e.webinarRecordingsForm.controls.formal)}}function Io(e,t){1&e&&(c.kc(0,"div",13),c.kc(1,"div",14),c.fc(2,"i",15),c.kc(3,"span",16),c.gd(4),c.xc(5,"t"),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(4),c.id(" ",c.zc(5,1,"In order to use this functionality, video service provider must be whitelisted in the Advanced Settings",c.Hc(4,Co))," "))}let xo=(()=>{class e{constructor(e,t,i,s){this.fb=e,this.docLayoutService=t,this.backendService=i,this.changeDetector=s,this.showUploader=!0,this.showLinkField=!1,this.uploadingFile=!1,this.ticker=Object(Yn.a)(0,3e3)}ngOnInit(){this.uploader={label:M.a.t("webinar","Your video"),placeholder:M.a.t("standard","Click to choose a file"),allowed_extensions:["3gp","3gp2","avi","flv","mkv","mov","mp4","mpeg","mpeg4","mpg","mpg2","ogg","ogm","wmv"],max_file_size:800,fileSizeErrorMessage:M.a.t("forum","Max. file size {size} MB",{size:800}),collection:"webinar_recording",style:"form"},this.externalLink={id:"link_upload",label:"URL",type:"text",name:"link_upload",floating_label:!0,enableText:!0,value:""},this.videoUpload={label:M.a.t("webinar","Add webinar recording"),name:"radio-group",value:"custom",enabled:!0,checked:!0,required:!1,change:e=>{this.radioFunction(e)}},this.videoLink={label:M.a.t("webinar","Import video recording from an external link"),name:"radio-group",value:"embeded",enabled:!0,required:!1,change:e=>{this.radioFunction(e)}},this.apiGrab={label:M.a.t("webinar","Use {webinartool} recording",{webinartool:this.tool_name}),name:"radio-group",value:"api_grab",enabled:!0,required:!1,change:e=>{this.radioFunction(e)}},this.apiLink={label:M.a.t("webinar","Use {webinartool} recording",{webinartool:this.tool_name}),name:"radio-group",value:"api_link",enabled:!0,required:!1,change:e=>{this.radioFunction(e)}},this.webinarRecordingsForm=this.fb.group({video_type:[this.videoUpload.value],uploader:[""],external_link:[""]}),this.setFormValidators()}setFormValidators(e="custom"){switch(e){case"custom":this.webinarRecordingsForm.controls.uploader.setValidators([Ze.x.required]),this.webinarRecordingsForm.controls.uploader.updateValueAndValidity(),this.webinarRecordingsForm.controls.external_link.setValidators(null),this.webinarRecordingsForm.controls.external_link.updateValueAndValidity(),this.webinarRecordingsForm.controls.video_type.setValidators(null),this.webinarRecordingsForm.controls.video_type.updateValueAndValidity();break;case"embeded":this.webinarRecordingsForm.controls.uploader.setValidators(null),this.webinarRecordingsForm.controls.uploader.updateValueAndValidity(),this.webinarRecordingsForm.controls.external_link.setValidators([Ze.x.required]),this.webinarRecordingsForm.controls.external_link.updateValueAndValidity(),this.webinarRecordingsForm.controls.video_type.setValidators(null),this.webinarRecordingsForm.controls.video_type.updateValueAndValidity();break;case"api_link":case"api_grab":this.webinarRecordingsForm.controls.uploader.setValidators(null),this.webinarRecordingsForm.controls.uploader.updateValueAndValidity(),this.webinarRecordingsForm.controls.external_link.setValidators(null),this.webinarRecordingsForm.controls.external_link.updateValueAndValidity(),this.webinarRecordingsForm.controls.video_type.setValidators([Ze.x.required]),this.webinarRecordingsForm.controls.video_type.updateValueAndValidity()}}radioFunction(e){this.showUploader="custom"==e,this.showLinkField="embeded"==e,"api_link"!=e&&"api_grab"!=e||(this.showUploader=!1,this.showLinkField=!1),this.setFormValidators(e),this.webinarRecordingsForm.controls.video_type.setValue(e)}submitVideo(){var e;switch(this.webinarRecordingsForm.disable(),this.uploadingFile=!0,this.changeDetector.detectChanges(),this.webinarRecordingsForm.controls.video_type.value){case"custom":e={recording_type:2,filename:this.webinarRecordingsForm.controls.uploader.value};break;case"embeded":e={recording_type:3,url:this.webinarRecordingsForm.controls.external_link.value};break;case"api_link":e={recording_type:4};break;case"api_grab":e={recording_type:1}}this.backendService.request("/learn/v1/webinar/"+this.id_session+"/"+this.day+"/recording","POST",e).subscribe(e=>{this.subscriber=this.ticker.subscribe(e=>this.checkUploadStatus(e))},e=>{this.throwError(e)})}checkUploadStatus(e){this.backendService.request("/learn/v1/webinar/"+this.id_session+"/"+this.day+"/recording_status","GET").subscribe(t=>{this.handler("uploading"),"Converting"===t.data.status&&1800!=e||(1800==e?(this.throwError(),this.subscriber.unsubscribe()):(this.subscriber.unsubscribe(),this.docLayoutService.toast.showToast({message:M.a.t("standard","Your video has been uploaded."),type:"success"}),this.uploadingFile=!1,this.cleanForm(),this.handler("uploaded")))},e=>{this.throwError(e)})}throwError(e){if(e){console.log("error",e.message);for(let t=0;t<e.message.length;t++)this.docLayoutService.toast.showToast({message:M.a.t("standard",e.message[t]),type:"error"})}else this.docLayoutService.toast.showToast({message:M.a.t("standard","Your video hasn't been uploaded."),type:"error"});this.uploadingFile=!1,this.cleanForm(this.webinarRecordingsForm.controls.video_type.value),this.handler("failed"),this.changeDetector.detectChanges()}cleanForm(e){e||(e="custom"),this.webinarRecordingsForm.reset(),this.webinarRecordingsForm.controls.uploader.setValue(null),this.webinarRecordingsForm.controls.external_link.setValue(null),this.webinarRecordingsForm.controls.video_type.setValue(e),this.setFormValidators(e),this.singleUpload.clear(!0),this.webinarRecordingsForm.enable(),this.webinarRecordingsForm.updateValueAndValidity()}uploadedRecording(){this.changeDetector.detectChanges()}deleteRecording(){this.cleanForm()}ngOnDestroy(){this.uploadingFile&&this.docLayoutService.toast.showToast({message:M.a.t("standard","Your recording is still being uploaded in the background. Please don't navigate away from the page."),type:"error"})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Ze.d),c.ec(j.a),c.ec(I.a),c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&c.nd(wo,1),2&e){let e;c.Rc(e=c.tc())&&(t.singleUpload=e.first)}},inputs:{id_session:"id_session",day:"day",tool_name:"tool_name",api_link:"api_link",api_grab:"api_grab",super_user:"super_user",handler:"handler"},decls:20,vars:46,consts:[["class","webinar-loading-overlay bg-white",4,"ngIf"],[1,"webinar-recordings"],[3,"formGroup","ngSubmit"],[1,"mdl-cell--12-col"],[3,"label","name","value","enabled","required","checked","change","inputFormControl"],[3,"label","allowed_extensions","placeholder","collection","max_file_size","fileSizeErrorMessage","inputFormControl","uploaded","reset"],["singleUpload",""],[3,"label","name","value","enabled","required","change","inputFormControl"],[3,"id","type","floating_label","value","inputFormControl"],["class","mdl-cell--12-col",4,"ngIf"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],[1,"webinar-loading-overlay","bg-white"],[1,"loader"],[1,"mdl-cell","mdl-cell--12-col"],[1,"webinar-completion-warning","bg-warning","text-white"],[1,"zmdi","zmdi-alert-triangle"],[1,"inner-text"]],template:function(e,t){1&e&&(c.ed(0,So,6,5,"div",0),c.kc(1,"div",1),c.kc(2,"form",2),c.sc("ngSubmit",function(){return t.submitVideo()}),c.kc(3,"div",3),c.kc(4,"div",3),c.fc(5,"radio",4),c.xc(6,"t"),c.jc(),c.kc(7,"div"),c.kc(8,"single-upload",5,6),c.sc("uploaded",function(){return t.uploadedRecording()})("reset",function(){return t.deleteRecording()}),c.xc(10,"t"),c.jc(),c.jc(),c.jc(),c.kc(11,"div",3),c.kc(12,"div",3),c.fc(13,"radio",7),c.xc(14,"t"),c.jc(),c.kc(15,"div"),c.fc(16,"textfield",8),c.jc(),c.jc(),c.ed(17,ko,4,9,"div",9),c.ed(18,To,4,9,"div",9),c.jc(),c.ed(19,Io,6,5,"div",10),c.jc()),2&e&&(c.Dc("ngIf",t.uploadingFile),c.Mb(2),c.Dc("formGroup",t.webinarRecordingsForm),c.Mb(3),c.Dc("label",c.yc(6,40,t.videoUpload.label))("name",t.videoUpload.name)("value",t.videoUpload.value)("enabled",t.videoUpload.enabled)("required",t.videoUpload.required)("checked",t.videoUpload.checked)("change",t.videoUpload.change)("inputFormControl",t.webinarRecordingsForm.controls.formal),c.Mb(2),c.Rb("mdl-cell--12-col ",t.showUploader?"visible-item":"hidden-item"," "),c.Mb(1),c.bd(t.uploader.style),c.Dc("label",c.yc(10,42,t.uploader.label))("allowed_extensions",t.uploader.allowed_extensions)("placeholder",t.uploader.placeholder)("collection",t.uploader.collection)("max_file_size",t.uploader.max_file_size)("fileSizeErrorMessage",t.uploader.fileSizeErrorMessage)("inputFormControl",t.webinarRecordingsForm.controls.uploader),c.Mb(5),c.Dc("label",c.yc(14,44,t.videoLink.label))("name",t.videoLink.name)("value",t.videoLink.value)("enabled",t.videoLink.enabled)("required",t.videoLink.required)("change",t.videoLink.change)("inputFormControl",t.webinarRecordingsForm.controls.formal),c.Mb(2),c.Rb("mdl-cell--12-col  ",t.showLinkField?"visible-item":"hidden-item"," "),c.Mb(1),c.Dc("id",t.externalLink.id)("type",t.externalLink.type)("floating_label",t.externalLink.floating_label)("value",t.externalLink.value)("inputFormControl",t.webinarRecordingsForm.controls.external_link),c.Mb(1),c.Dc("ngIf",t.api_grab),c.Mb(1),c.Dc("ngIf",t.api_link),c.Mb(1),c.Dc("ngIf",t.showLinkField))},directives:[m.p,Ze.y,Ze.p,Ze.i,Zn.a,ea.a,Ct.a,b.Be],pipes:[M.b],encapsulation:2}),e})();const Do=["rightpanel"];function Oo(e,t){1&e&&(c.kc(0,"span",24),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"You did not attend this webinar. And the recording for it is still not available.")," "))}function Eo(e,t){1&e&&(c.kc(0,"span",24),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"You did not attend this webinar. However, a recording is available")," "))}const Ao=function(){return{category:"webinar"}};function Po(e,t){if(1&e&&(c.kc(0,"span",24),c.gd(1),c.xc(2,"t"),c.kc(3,"span",25),c.gd(4),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(1),c.id(" ",c.zc(2,2,"Your webinar starts in",c.Hc(5,Ao))," "),c.Mb(3),c.id(" ",e.timerOutput,"")}}function Mo(e,t){if(1&e&&c.fc(0,"rectangular-button",26),2&e){const e=c.wc();c.Dc("properties",e.viewRecording.properties)("click",e.viewRecording.onClick)}}function Lo(e,t){if(1&e){const e=c.lc();c.kc(0,"a",27),c.sc("click",function(){return c.Vc(e),c.wc().deleteRecording()}),c.gd(1),c.xc(2,"t"),c.jc()}2&e&&(c.Mb(1),c.hd(c.zc(2,1,"Delete your webinar video recording",c.Hc(4,Ao))))}function jo(e,t){if(1&e&&c.fc(0,"rectangular-button",26),2&e){const e=c.wc();c.Dc("properties",e.addRecording.properties)("click",e.addRecording.onClick)}}const Ro=function(e){return{category:"standard",time:e}};function Fo(e,t){if(1&e&&(c.kc(0,"span",25),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(3);c.Mb(1),c.hd(c.zc(2,1,"{time} ago",c.Ic(4,Ro,e.timerOutput)))}}function No(e,t){if(1&e&&(c.kc(0,"span",24),c.gd(1),c.xc(2,"t"),c.ed(3,Fo,3,6,"span",28),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,2,"The webinar started:")," "),c.Mb(2),c.Dc("ngIf",!!e.timerOutput)}}function Uo(e,t){if(1&e&&(c.kc(0,"div",12),c.ed(1,No,4,4,"span",11),c.fc(2,"rectangular-button",26),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",!e.date.upcoming),c.Mb(1),c.Dc("properties",e.joinWebinar.properties)("click",e.joinWebinar.onClick)}}const zo=function(){return{category:"app7020"}};function qo(e,t){1&e&&(c.kc(0,"div",29),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.zc(2,1,"Description",c.Hc(4,zo))," "))}function Vo(e,t){if(1&e){const e=c.lc();c.kc(0,"rightpanel-component",30,31),c.sc("onOpen",function(t){return c.Vc(e),c.wc().checkForm(t)}),c.jc()}if(2&e){const e=c.wc();c.Dc("width",e.rightpanelParams.width)("title",e.rightpanelParams.title)("content",e.rightpanelParams.content)("actions",e.rightpanelParams.actions)}}function Bo(e,t){if(1&e&&c.fc(0,"player-iframe",32),2&e){const e=c.wc();c.Dc("url",e.recordData.recording.url)("bookmark",0)}}function Go(e,t){if(1&e&&c.fc(0,"player-flowplayer",33),2&e){const e=c.wc();c.Dc("mp4_url",e.recordData.recording.url)("hls_url",e.recordData.recording.hls)("speedControlEnabled","true")}}let Ho=(()=>{class e{constructor(e,t,i,s,n,a,r,c,l){this.router=e,this._el=t,this.docLayoutService=i,this.backendService=s,this.formatter=n,this._store=a,this.overviewActions=r,this._route=c,this.changeDetector=l,this.showJoinButton=!1,this.showAddNewVideo=!0,this.showRightPanel=!1,this.showVideoFrame=!1,this.userTimeZone=o.a.getInstance().timezone,this.ticker=Object(Yn.a)(0,1e3),this.disableConfirm=!0,this.viewRecording={},this.addRecording={},this.joinWebinar={},this.isIframeinit=!1,this.iframeUrl="",this.joinWebinarAction=()=>{this.routeTo()}}ngOnInit(){this.initializeRightPanel(),this.joinWebinar={properties:{text:M.a.t("standard","join the webinar"),colorScheme:"positive-green",typeStyle:"filled"},onClick:this.joinWebinarAction},this.addRecording={properties:{text:M.a.t("webinar","Add recording"),colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>{this.rightpanel.open()}},this.viewRecording={properties:{text:M.a.t("standard","view the recording"),colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>{this.backendService.request("/learn/v1/courses/session/"+this.id_session+"/date/"+this.date.day,"GET").pipe(Object(di.a)(e=>e)).subscribe(e=>{this.recordData=e.data,"link"==e.data.recording.type?(window.open(e.data.recording.url,"_blank"),this._store.dispatch(this.overviewActions.loadOverviewInfo(this.course_id))):"video"==e.data.recording.type||"iframe"==e.data.recording.type?(this.showVideoFrame=!0,this.changeDetector.detectChanges(),this._el.nativeElement.querySelector(".webinar-iframe-video")&&this._el.nativeElement.querySelector(".webinar-iframe-video").classList.add("opened"),document.body.classList.add("hide-overflow")):this.docLayoutService.toast.showToast({message:M.a.t("standard","Something went wrong."),type:"error"})})}},this.webinarStartHour=this.date.day+" "+this.date.time_begin;const e=this.formatter.convertTimeToUTC(this.webinarStartHour,this.date.timezone);this.formatter.format("time",e,{length:"short"}).subscribe(e=>this.webinarStartDateToUserTimezone=e),this.sessionTimeZone=this.date.timezone,this.webinarEndHour=this.formatter.calculateDuration(e,this.date.duration);const t=this.date.student_join&&["learner","tutor"].includes(this.date.user_level)?this.date.student_join:null,i=this.date.instructor_join&&"instructor"===this.date.user_level?this.date.instructor_join:t;this.webinarPreJoinDateToUTC=i?this.formatter.calculateDuration(e,-1*i):0,this.minutesRemainingToStart=this.formatter.getTime(e),this.webinarEndHour=this.formatter.getTime(this.webinarEndHour),0!==this.webinarPreJoinDateToUTC&&(this.joinInAdvanceMinutes=this.formatter.getTime(this.webinarPreJoinDateToUTC)),this.subscriber=this.ticker.subscribe(e=>{this.upcomingTimer()}),this.changeDetector.detectChanges()}ngOnDestroy(){this.subscriber&&this.subscriber.unsubscribe(),this.rightpanel&&this.rightpanel.componentInstance&&this.rightpanel.componentInstance.subscriber&&this.rightpanel.componentInstance.subscriber.unsubscribe()}closeIframe(){this._el.nativeElement.querySelector(".webinar-iframe-video")&&this._el.nativeElement.querySelector(".webinar-iframe-video").classList.remove("opened"),document.body.classList.remove("hide-overflow"),this.showVideoFrame=!1,this._store.dispatch(this.overviewActions.loadOverviewInfo(this.course_id))}upcomingTimer(){let e=this.formatter.currentUtcDateTime();e=this.formatter.getTime(e);let t=this.formatter.returnTimer(this.webinarStartHour,{timezone:this.date.timezone});t||(this.date.upcoming=!1),this.webinarEndHour>e?(this.minutesRemainingToStart<=e||this.joinInAdvanceMinutes&&this.joinInAdvanceMinutes<e||"-1"===this.date.instructor_join&&"instructor"===this.date.user_level||"-1"===this.date.student_join&&["learner","tutor"].includes(this.date.user_level)?(this.showJoinButton=!0,this.showAddNewVideo=!1):(this.showJoinButton=!1,this.showAddNewVideo=!1),this.timerOutput=t):(console.log(this.date),this.showJoinButton=!1,this.showAddNewVideo=this.date.is_recording_supported,this.subscriber.unsubscribe())}deleteRecording(){this.docLayoutService.dialog.showCommonDialog({title:M.a.t("standard","Delete recording"),content:M.a.t("standard","Delete your webinar video recording?"),showConfirmationCheck:!0,requireConfirmation:!0,confirmationLabel:M.a.t("standard","Yes, I want to proceed"),actions:[{id:"cancel",type:"neutral",label:M.a.t("standard","Cancel"),slot:"end"},{id:"delete",type:"negative",label:M.a.t("standard","delete"),slot:"end"}]}).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.backendService.request("/learn/v1/webinar/"+this.id_session+"/"+this.date.day+"/recording","DELETE").subscribe(t=>{this.docLayoutService.toast.showToast({message:M.a.t("standard","Your recording has been deleted."),type:"success"}),e.actionSuccess.next(!0),this._route.params.pipe(Object(se.a)(1)).subscribe(e=>{let t=e.id_session;t&&this.id_session==t&&this._store.dispatch(this.overviewActions.loadOverviewInfo(this.course_id))})},()=>{this.docLayoutService.toast.showToast({message:M.a.t("standard","Your recording hasn't been deleted."),type:"error"}),e.actionSuccess.next(!1)})})}uploadStatus(e){switch(e){case"uploaded":this.rightpanel.close(),this.showAddNewVideo=!0;let e=this._route.params.subscribe(e=>{let t=e.id_session;t&&this.id_session===t&&this._store.dispatch(this.overviewActions.loadOverviewInfo(this.course_id))});e&&e.unsubscribe();break;case"uploading":this.showAddNewVideo=!1;break;case"failed":this.showAddNewVideo=!0}}routeTo(){this.backendService.request("/learn/v1/courses/"+this.course_id+"/session/"+this.id_session+"/date/"+this.date.day+"/join","GET").subscribe(e=>{if(void 0!==e.data.join_url)if(console.log("Getting url data"),console.log(e.data),void 0===e.data.credentials)console.log("Sending request via GET"),"undefined"!=e.data.show_type&&"iframe"==e.data.show_type?(this.isIframeinit=!0,this.iframeUrl=e.data.join_url):window.open(e.data.join_url,"_blank");else{console.log("Sending request via POST");const i=e.data.credentials,s=e.data.join_url,n=document.createElement("form");if(n.target="_blank",n.method="POST",n.action=s,e.data.credentials)for(var t in i){let e=document.createElement("input");e.type="hidden",e.name=t,e.setAttribute("value",i[t]),n.appendChild(e)}document.body.appendChild(n),n.submit(),n.remove()}else this.docLayoutService.toast.showToast({message:M.a.t("standard","Failed to join webinar session."),type:"error"})},e=>{20100===e.code&&this.docLayoutService.toast.showToast({message:M.a.t("zoom","You cannot access a Zoom meeting without having a valid email in your profile"),type:"error"})})}checkForm(e){setTimeout(()=>{this.rightpanel.setFormControl(this.rightpanel.componentInstance.webinarRecordingsForm)},10)}initializeRightPanel(){this.rightpanelParams={width:500,title:M.a.t("webinar","Add webinar recording"),content:{params:{id_session:this.id_session,day:this.date.day,api_link:this.date.api_link,api_grab:this.date.api_grab,tool_name:this.date.tool,super_user:this.date.super_user,handler:this.uploadStatus.bind(this)},component:xo},actions:[{type:"submit",properties:{text:M.a.t("standard","Confirm"),state:"disabled"},handler:()=>{this.rightpanel.componentInstance.submitVideo()}},{type:"cancel",properties:{text:"Cancel"},handler:e=>{e.close()}}]},this.showRightPanel=!0}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.h),c.ec(c.o),c.ec(j.a),c.ec(I.a),c.ec(ni.b),c.ec(w.e),c.ec(Ts.e),c.ec(s.a),c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["webinar-viewer"]],viewQuery:function(e,t){if(1&e&&c.nd(Do,1),2&e){let e;c.Rc(e=c.tc())&&(t.rightpanel=e.first)}},inputs:{date:"date",id_session:"id_session",course_id:"course_id",session_slug_name:"session_slug_name",recordData:"recordData"},decls:49,vars:28,consts:[[1,"ilt-wrapper","bg-before-grey-light"],[1,"information-wrap"],[1,"block-wrap","time-details"],[1,"zmdi","zmdi-time","text-grey-mid"],[1,"data-wrap"],[1,"location","text-grey-mid"],[1,"bolded"],[1,"zmdi","zmdi-time-interval","text-grey-mid"],[1,"zmdi","zmdi-videocam","text-grey-mid"],[1,"enroll-footer","bg-before-grey-light","recording-available"],[1,"webinar-info-block"],["class","title-regular",4,"ngIf"],[1,"button-block"],[3,"properties","click",4,"ngIf"],["class","cursor text-main",3,"click",4,"ngIf"],["class","button-block",4,"ngIf"],["class","title-normal",4,"ngIf"],[1,"description"],[3,"width","title","content","actions","onOpen",4,"ngIf"],[1,"webinar-iframe-video"],[1,"player-wrapper"],[3,"url","bookmark",4,"ngIf"],[3,"mp4_url","hls_url","speedControlEnabled",4,"ngIf"],[1,"zmdi","zmdi-close",3,"click"],[1,"title-regular"],[1,"timer-string"],[3,"properties","click"],[1,"cursor","text-main",3,"click"],["class","timer-string",4,"ngIf"],[1,"title-normal"],[3,"width","title","content","actions","onOpen"],["rightpanel",""],[3,"url","bookmark"],[3,"mp4_url","hls_url","speedControlEnabled"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.kc(2,"div",2),c.fc(3,"i",3),c.kc(4,"div",4),c.kc(5,"div",5),c.gd(6),c.xc(7,"t"),c.jc(),c.kc(8,"h4",6),c.gd(9),c.jc(),c.jc(),c.jc(),c.kc(10,"div",2),c.fc(11,"i",7),c.kc(12,"div",4),c.kc(13,"div",5),c.gd(14),c.xc(15,"t"),c.jc(),c.kc(16,"h4",6),c.gd(17),c.xc(18,"transformMinutes"),c.jc(),c.jc(),c.jc(),c.kc(19,"div",2),c.fc(20,"i",8),c.kc(21,"div",4),c.kc(22,"div",5),c.gd(23),c.xc(24,"t"),c.jc(),c.kc(25,"h4",6),c.gd(26),c.jc(),c.jc(),c.jc(),c.jc(),c.kc(27,"div",9),c.kc(28,"div",10),c.ed(29,Oo,3,3,"span",11),c.ed(30,Eo,3,3,"span",11),c.ed(31,Po,5,6,"span",11),c.kc(32,"div",12),c.ed(33,Mo,1,2,"rectangular-button",13),c.jc(),c.kc(34,"div",12),c.ed(35,Lo,3,5,"a",14),c.jc(),c.kc(36,"div",12),c.ed(37,jo,1,2,"rectangular-button",13),c.jc(),c.ed(38,Uo,3,3,"div",15),c.jc(),c.kc(39,"div"),c.ed(40,qo,3,5,"div",16),c.kc(41,"div",17),c.gd(42),c.jc(),c.jc(),c.jc(),c.ed(43,Vo,2,4,"rightpanel-component",18),c.jc(),c.kc(44,"div",19),c.kc(45,"div",20),c.ed(46,Bo,1,2,"player-iframe",21),c.ed(47,Go,1,3,"player-flowplayer",22),c.kc(48,"i",23),c.sc("click",function(){return t.closeIframe()}),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(6),c.id(" ",c.yc(7,18,"my time")," "),c.Mb(3),c.id(" ",t.webinarStartDateToUserTimezone," "),c.Mb(5),c.id(" ",c.yc(15,20,"Duration")," "),c.Mb(3),c.hd(c.yc(18,22,t.date.duration)),c.Mb(6),c.id(" ",c.zc(24,24,"Tool",c.Hc(27,Ao))," "),c.Mb(3),c.hd(t.date.tool),c.Mb(3),c.Dc("ngIf",t.date.not_attended&&!t.date.has_recording&&!t.showJoinButton),c.Mb(1),c.Dc("ngIf",t.date.not_attended&&t.date.has_recording&&!t.showJoinButton),c.Mb(1),c.Dc("ngIf",t.date.upcoming),c.Mb(2),c.Dc("ngIf",t.date.has_recording&&!t.showJoinButton),c.Mb(2),c.Dc("ngIf",("instructor"==t.date.user_level||t.date.super_user)&&t.date.has_recording&&!t.date.upcoming&&!t.showJoinButton),c.Mb(2),c.Dc("ngIf",("instructor"==t.date.user_level||t.date.super_user)&&!t.date.has_recording&&!t.date.upcoming&&!t.showJoinButton&&t.showAddNewVideo),c.Mb(1),c.Dc("ngIf",t.showJoinButton),c.Mb(2),c.Dc("ngIf",t.date.description),c.Mb(2),c.hd(t.date.description),c.Mb(1),c.Dc("ngIf",t.showRightPanel),c.Mb(3),c.Dc("ngIf",t.showVideoFrame&&t.date.has_recording&&"iframe"==t.recordData.recording.type),c.Mb(1),c.Dc("ngIf",t.showVideoFrame&&t.date.has_recording&&"video"==t.recordData.recording.type))},directives:[m.p,ts.a,ma.a,ba.a,fa.a],pipes:[M.b,ns.a],encapsulation:2}),e})();const $o=function(e,t){return{category:"webinar",needed:e,total:t}};function Yo(e,t){if(1&e&&(c.kc(0,"div",4),c.kc(1,"div",7),c.fc(2,"i",8),c.kc(3,"span",9),c.gd(4),c.xc(5,"t"),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(4),c.id(" ",c.zc(5,1,"You must attend at least {needed}/{total} session dates to complete this course",c.Jc(4,$o,e.minDates,e.maxDates))," ")}}let Wo=(()=>{class e{constructor(e){this.formatter=e,this.panels=[],this.minDates=null,this.maxDates=null}get courseStatusTypes(){return ne.d}ngOnInit(){let e;this.maxDates=this.session_date.length,this.current_session.min_dates_for_completion&&(this.minDates=this.current_session.min_dates_for_completion);for(var t=0;t<this.session_date.length;t++){e={params:{date:{day:this.session_date[t].day,name:this.session_date[t].name,description:this.session_date[t].description,upcoming:this.session_date[t].user_status==ne.y.UPCOMING,not_attended:this.session_date[t].user_status==ne.y.NOT_ATTENDED,duration:this.session_date[t].duration,timezone:this.session_date[t].timezone,time_begin:this.session_date[t].start_hour,user_level:this.user_level,super_user:o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN),student_join:!!this.session_date[t].join_in_advance_user&&this.session_date[t].join_in_advance_user,instructor_join:!!this.session_date[t].join_in_advance_instructor&&this.session_date[t].join_in_advance_instructor,has_recording:this.session_date[t].has_recording,tool:this.session_date[t].tool,url:this.session_date[t].url,api_grab:!!this.session_date[t].allowed_api_grab,api_link:!!this.session_date[t].allowed_api_link,is_recording_supported:!!this.session_date[t].is_recording_supported},id_session:this.current_session.id,course_id:this.course_id,session_slug_name:this.current_session.slug_name},component:Ho};let i=this.formatter.convertTimeToUTC(`${this.current_session.dates[t].day} ${this.current_session.dates[t].start_hour}`,this.current_session.dates[t].timezone);i=this.formatter.getTimezonedDate(i,o.a.getInstance().timezone);const s={dateTime:i,duration:this.session_date[t].duration,timezone:o.a.getInstance().timezone};this.panels.push({title:this.session_date[t].name,description:{params:{webinarListing:s},component:yn},content:e,hideDescriptionOnOpen:!0,timeline_date:i,label:{background:this.session_date[t].user_status==ne.y.NOT_ATTENDED?"bg-grey-dark":this.session_date[t].user_status==ne.y.ATTENDED?"bg-positive-green":"bg-main",color:"text-white",text:this.labelTranslatableText(t)},markAsCompleted:this.session_date[t].user_status==ne.y.ATTENDED})}this.webinarAccordion={type:"split",panels:this.panels,mode:"timeline"}}labelTranslatableText(e){return M.a.t("webinar",this.session_date[e].user_status===ne.y.NOT_ATTENDED?"Not attended":this.session_date[e].user_status===ne.y.ATTENDED?"Attended":"Upcoming")}}return e.\u0275fac=function(t){return new(t||e)(c.ec(ni.b))},e.\u0275cmp=c.Yb({type:e,selectors:[["webinar-listing"]],inputs:{current_session:"current_session",session_date:"session_date",user_level:"user_level",course_id:"course_id",course_status:"course_status"},decls:7,vars:5,consts:[[1,"ilt-viewer__wrapper"],[1,"mdl-wrapper"],[1,"mdl-grid"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],[1,"mdl-cell","mdl-cell--12-col"],[1,"sessions-dates"],[3,"type","title","panels","mode"],[1,"webinar-completion-warning","bg-warning","text-white"],[1,"zmdi","zmdi-alert-triangle"],[1,"inner-text"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.kc(2,"div",2),c.ed(3,Yo,6,7,"div",3),c.kc(4,"div",4),c.kc(5,"div",5),c.fc(6,"accordion",6),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(3),c.Dc("ngIf",t.minDates&&t.course_status!==t.courseStatusTypes.COMPLETED),c.Mb(3),c.Dc("type",t.webinarAccordion.type)("title",t.webinarAccordion.title)("panels",t.webinarAccordion.panels)("mode",t.webinarAccordion.mode))},directives:[m.p,wn.a],pipes:[M.b],encapsulation:2}),e})();const Qo={expiredTitle:tt.a.t("standard","Expired Certification"),renewableTitle:tt.a.t("standard","Renewable Certification"),expiredRenewableWithThisCourseMessage:tt.a.t("standard","This course is eligible to renew the certification: {certification_name}. The certification expired on: {date}."),expiredNotRenewableWithThisCourseMessage:tt.a.t("standard","This course is not eligible to renew the certification: {certification_name}. Click on RENEW CERTIFICATION to see the list of eligible courses. The certification expired on: {date}."),renewableWithThisCourseMessage:tt.a.t("standard","This course is eligible to renew the certification: {certification_name}. The certification expires on: {date}."),notRenewableWithThisCourseMessage:tt.a.t("standard","This course is not eligible to renew the certification: {certification_name}. Click on RENEW CERTIFICATION to see the list of eligible courses. The certification expires on: {date}."),expiredRenewableWithThisLPMessage:tt.a.t("standard","This learning plan is eligible to renew the certification: {certification_name}. The certification expired on {date}."),expiredNotRenewableWithThisLPMessage:tt.a.t("standard","This learning plan is not eligible to renew the certification: {certification_name}. Click on RENEW CERTIFICATION to see the list of eligible courses. The certification expired on {date}."),renewableWithThisLPMessage:tt.a.t("standard","This learning plan is eligible to renew the certification: {certification_name}. The certification expires on: {date}."),notRenewableWithThisLPMessage:tt.a.t("standard","This learning plan is not eligible to renew the certification: {certification_name}. Click on RENEW CERTIFICATION to see the list of eligible courses. The certification expires on: {date}."),renewCertification:tt.a.t("standard","Renew certification"),renewNowDialogCourseMainContent:tt.a.t("standard","If you proceed, the course completion status will be reset, and you will have to complete it again to renew the certification: {certification_name}."),renewNowDialogAskToProceed:tt.a.t("standard","Do you want to proceed?"),renewDialogAction:tt.a.t("standard","Renew"),cancelDialogAction:tt.a.t("standard","Cancel"),errorCourseRenewNow:tt.a.t("standard","Error while resetting the course completion status. Please try again."),error1009:tt.a.t("standard","Error while renewing the certification because of a problem with the archiving of your enrollments. Please contact your Administrator."),successCourseRenewNow:tt.a.t("standard","The course completion status has been reset successfully")};var Ko=i("7M0w"),Jo=i("jH9s"),Xo=i("UwqK"),Zo=i("sgaC"),er=i("MZXA"),tr=i("9wRM");const ir=["docSharedDialog"],sr=function(e){return{certification_name:e}};function nr(e,t){if(1&e){const e=c.lc();c.kc(0,"doc-shared-dialog-body"),c.kc(1,"doc-shared-dialog-title"),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"doc-shared-dialog-content"),c.kc(5,"p"),c.gd(6),c.xc(7,"t"),c.jc(),c.fc(8,"br"),c.kc(9,"p"),c.gd(10),c.xc(11,"t"),c.jc(),c.fc(12,"br"),c.jc(),c.kc(13,"doc-shared-dialog-actions"),c.kc(14,"doc-shared-dialog-action",2),c.sc("trigger",function(){return c.Vc(e),c.wc(),c.Sc(1).hide()}),c.xc(15,"t"),c.jc(),c.kc(16,"doc-shared-dialog-action",3),c.sc("trigger",function(){return c.Vc(e),c.wc().renew()}),c.xc(17,"t"),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(2),c.id(" ",c.yc(3,5,e.DICTIONARY.renewCertification)," "),c.Mb(4),c.hd(c.zc(7,7,e.DICTIONARY.renewNowDialogCourseMainContent,c.Ic(16,sr,e.certificationName))),c.Mb(4),c.hd(c.yc(11,10,e.DICTIONARY.renewNowDialogAskToProceed)),c.Mb(4),c.Dc("label",c.yc(15,12,e.DICTIONARY.cancelDialogAction)),c.Mb(2),c.Dc("label",c.yc(17,14,e.DICTIONARY.renewDialogAction))}}let ar=(()=>{class e{constructor(){this.dialogSize="md",this.renewNow=new c.q,this.DICTIONARY=Qo}renew(){this.renewNow.emit()}show(){this.docSharedDialog.show()}hide(){this.docSharedDialog.hide()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["renew-dialog"]],viewQuery:function(e,t){if(1&e&&c.nd(ir,1),2&e){let e;c.Rc(e=c.tc())&&(t.docSharedDialog=e.first)}},inputs:{dialogSize:"dialogSize",certificationName:"certificationName"},outputs:{renewNow:"renewNow"},decls:3,vars:2,consts:[[3,"size","canClose"],["docSharedDialog",""],[3,"label","trigger"],["type","positive",3,"label","trigger"]],template:function(e,t){1&e&&(c.kc(0,"doc-shared-dialog",0,1),c.ed(2,nr,18,18,"ng-template"),c.jc()),2&e&&c.Dc("size",t.dialogSize)("canClose",!1)},directives:[Ko.a,Jo.a,Xo.a,Zo.a,er.a,tr.a],pipes:[M.b],styles:["doc-shared-dialog-body[_ngcontent-%COMP%] {padding-bottom: 0;}"],changeDetection:0}),e})(),or=(()=>{class e{constructor(){this.isRenewableFromThisResource=!1,this.renewNow=new c.q,this.goToCourses=new c.q,this.DICTIONARY=Qo,this.dateFormat=Object(ii.l)(Object(ii.j)(),ii.a),this.timezone=Object(ii.k)(),this.notificationInlineTypeEnum=b.Nd,this.notificationBannerColorEnum=b.Ed,this.notificationBannerInfoIcon="info",this.buttonColorEnum=b.D}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],inputs:{certificationName:"certificationName",isExpired:"isExpired",isRenewableFromThisResource:"isRenewableFromThisResource",expiringAt:"expiringAt"},outputs:{renewNow:"renewNow",goToCourses:"goToCourses"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();const rr=function(e,t){return{certification_name:e,date:t}};function cr(e,t){if(1&e&&(c.ic(0),c.fc(1,"ui-notification-inline",4),c.xc(2,"t"),c.xc(3,"t"),c.xc(4,"dcbDate"),c.hc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("type",e.notificationInlineTypeEnum.ERROR)("title",c.yc(2,4,e.DICTIONARY.expiredTitle))("message",c.zc(3,6,e.DICTIONARY.expiredRenewableWithThisCourseMessage,c.Jc(13,rr,e.certificationName,c.Ac(4,9,e.expiringAt,e.timezone,e.dateFormat))))("closable",!1)}}function lr(e,t){if(1&e&&(c.ic(0),c.fc(1,"ui-notification-inline",4),c.xc(2,"t"),c.xc(3,"t"),c.xc(4,"dcbDate"),c.hc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("type",e.notificationInlineTypeEnum.INFO)("title",c.yc(2,4,e.DICTIONARY.renewableTitle))("message",c.zc(3,6,e.DICTIONARY.renewableWithThisCourseMessage,c.Jc(13,rr,e.certificationName,c.Ac(4,9,e.expiringAt,e.timezone,e.dateFormat))))("closable",!1)}}function dr(e,t){if(1&e){const e=c.lc();c.ic(0),c.ed(1,cr,5,16,"ng-container",0),c.ed(2,lr,5,16,"ng-container",0),c.kc(3,"div",2),c.kc(4,"ui-button-raised-primary",3),c.sc("trigger",function(){return c.Vc(e),c.wc().renewNow.emit()}),c.xc(5,"t"),c.xc(6,"t"),c.jc(),c.jc(),c.hc()}if(2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",e.isExpired),c.Mb(1),c.Dc("ngIf",!e.isExpired),c.Mb(2),c.Dc("fullWidth",!0)("label",c.yc(5,5,e.DICTIONARY.renewCertification))("ariaLabel",c.yc(6,7,e.DICTIONARY.renewCertification))}}function ur(e,t){if(1&e&&(c.ic(0),c.fc(1,"ui-notification-inline",4),c.xc(2,"t"),c.xc(3,"t"),c.xc(4,"dcbDate"),c.hc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("type",e.notificationInlineTypeEnum.ERROR)("title",c.yc(2,4,e.DICTIONARY.expiredTitle))("message",c.zc(3,6,e.DICTIONARY.expiredNotRenewableWithThisCourseMessage,c.Jc(13,rr,e.certificationName,c.Ac(4,9,e.expiringAt,e.timezone,e.dateFormat))))("closable",!1)}}function hr(e,t){if(1&e&&(c.ic(0),c.fc(1,"ui-notification-inline",4),c.xc(2,"t"),c.xc(3,"t"),c.xc(4,"dcbDate"),c.hc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("type",e.notificationInlineTypeEnum.INFO)("title",c.yc(2,4,e.DICTIONARY.renewableTitle))("message",c.zc(3,6,e.DICTIONARY.notRenewableWithThisCourseMessage,c.Jc(13,rr,e.certificationName,c.Ac(4,9,e.expiringAt,e.timezone,e.dateFormat))))("closable",!1)}}function pr(e,t){if(1&e){const e=c.lc();c.ic(0),c.ed(1,ur,5,16,"ng-container",0),c.ed(2,hr,5,16,"ng-container",0),c.kc(3,"div",2),c.kc(4,"ui-button-raised-primary",3),c.sc("trigger",function(){return c.Vc(e),c.wc().goToCourses.emit()}),c.xc(5,"t"),c.xc(6,"t"),c.jc(),c.jc(),c.hc()}if(2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",e.isExpired),c.Mb(1),c.Dc("ngIf",!e.isExpired),c.Mb(2),c.Dc("fullWidth",!0)("label",c.yc(5,5,e.DICTIONARY.renewCertification))("ariaLabel",c.yc(6,7,e.DICTIONARY.renewCertification))}}let gr=(()=>{class e extends or{}return e.\u0275fac=function(t){return mr(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["course-player-widget"]],features:[c.Jb],decls:3,vars:2,consts:[[4,"ngIf"],[1,"certification-manager-separator-progress-bar"],[1,"button-to-renew"],[3,"fullWidth","label","ariaLabel","trigger"],[3,"type","title","message","closable"]],template:function(e,t){1&e&&(c.ed(0,dr,7,9,"ng-container",0),c.ed(1,pr,7,9,"ng-container",0),c.fc(2,"div",1)),2&e&&(c.Dc("ngIf",t.isRenewableFromThisResource),c.Mb(1),c.Dc("ngIf",!t.isRenewableFromThisResource))},directives:[m.p,b.S,b.Jd],pipes:[M.b,f.c],styles:["[_nghost-%COMP%]{display:block;margin:30px}[_nghost-%COMP%]     ui-notification-inline .ui-notification-inline-message{font-size:var(--ui-typography-size-sm);font-weight:var(--ui-typography-weight-regular);line-height:var(--ui-typography-lineheight-sm)}.button-to-renew[_ngcontent-%COMP%]{margin-top:var(--ui-spacing-sm)}.certification-manager-separator-progress-bar[_ngcontent-%COMP%]{margin-top:var(--ui-spacing-sm);border-bottom:var(--ui-size-border-xs) solid var(--ui-color-border-neutral);margin-bottom:-20px;margin-left:-30px;margin-right:-30px}"],changeDetection:0}),e})();const mr=c.mc(gr),br=function(e,t){return{certification_name:e,date:t}};function fr(e,t){if(1&e){const e=c.lc();c.ic(0),c.kc(1,"ui-notification-banner",1),c.kc(2,"ui-notification-banner-title"),c.gd(3),c.xc(4,"t"),c.jc(),c.kc(5,"ui-notification-banner-subtitle"),c.gd(6),c.xc(7,"t"),c.xc(8,"dcbDate"),c.jc(),c.kc(9,"ui-notification-banner-actions"),c.kc(10,"ui-button-text",2),c.sc("trigger",function(){return c.Vc(e),c.wc(2).renewNow.emit()}),c.xc(11,"t"),c.xc(12,"t"),c.jc(),c.jc(),c.jc(),c.hc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("color",e.notificationBannerColorEnum.ERROR)("icon",e.notificationBannerInfoIcon),c.Mb(2),c.hd(c.yc(4,7,e.DICTIONARY.expiredTitle)),c.Mb(3),c.id(" ",c.zc(7,9,e.DICTIONARY.expiredRenewableWithThisCourseMessage,c.Jc(20,br,e.certificationName,c.Ac(8,12,e.expiringAt,e.timezone,e.dateFormat)))," "),c.Mb(4),c.Dc("label",c.yc(11,16,e.DICTIONARY.renewCertification))("ariaLabel",c.yc(12,18,e.DICTIONARY.renewCertification))("color",e.buttonColorEnum.PRIMARY)}}function _r(e,t){if(1&e){const e=c.lc();c.ic(0),c.kc(1,"ui-notification-banner",1),c.kc(2,"ui-notification-banner-title"),c.gd(3),c.xc(4,"t"),c.jc(),c.kc(5,"ui-notification-banner-subtitle"),c.gd(6),c.xc(7,"t"),c.xc(8,"dcbDate"),c.jc(),c.kc(9,"ui-notification-banner-actions"),c.kc(10,"ui-button-text",2),c.sc("trigger",function(){return c.Vc(e),c.wc(2).renewNow.emit()}),c.xc(11,"t"),c.xc(12,"t"),c.jc(),c.jc(),c.jc(),c.hc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("color",e.notificationBannerColorEnum.NEUTRAL)("icon",e.notificationBannerInfoIcon),c.Mb(2),c.hd(c.yc(4,7,e.DICTIONARY.renewableTitle)),c.Mb(3),c.id(" ",c.zc(7,9,e.DICTIONARY.renewableWithThisCourseMessage,c.Jc(20,br,e.certificationName,c.Ac(8,12,e.expiringAt,e.timezone,e.dateFormat)))," "),c.Mb(4),c.Dc("label",c.yc(11,16,e.DICTIONARY.renewCertification))("ariaLabel",c.yc(12,18,e.DICTIONARY.renewCertification))("color",e.buttonColorEnum.DARK)}}function vr(e,t){if(1&e&&(c.ic(0),c.ed(1,fr,13,23,"ng-container",0),c.ed(2,_r,13,23,"ng-container",0),c.hc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",e.isExpired),c.Mb(1),c.Dc("ngIf",!e.isExpired)}}const yr=function(e){return{certification_name:e}};function wr(e,t){if(1&e){const e=c.lc();c.ic(0),c.kc(1,"ui-notification-banner",1),c.kc(2,"ui-notification-banner-title"),c.gd(3),c.xc(4,"t"),c.jc(),c.kc(5,"ui-notification-banner-subtitle"),c.gd(6),c.xc(7,"t"),c.jc(),c.kc(8,"ui-notification-banner-actions"),c.kc(9,"ui-button-text",2),c.sc("trigger",function(){return c.Vc(e),c.wc(2).goToCourses.emit()}),c.xc(10,"t"),c.xc(11,"t"),c.jc(),c.jc(),c.jc(),c.hc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("color",e.notificationBannerColorEnum.ERROR)("icon",e.notificationBannerInfoIcon),c.Mb(2),c.hd(c.yc(4,7,e.DICTIONARY.expiredTitle)),c.Mb(3),c.id(" ",c.zc(7,9,e.DICTIONARY.expiredNotRenewableWithThisCourseMessage,c.Ic(16,yr,e.certificationName))," "),c.Mb(3),c.Dc("label",c.yc(10,12,e.DICTIONARY.renewCertification))("ariaLabel",c.yc(11,14,e.DICTIONARY.renewCertification))("color",e.buttonColorEnum.PRIMARY)}}function Cr(e,t){if(1&e){const e=c.lc();c.ic(0),c.kc(1,"ui-notification-banner",1),c.kc(2,"ui-notification-banner-title"),c.gd(3),c.xc(4,"t"),c.jc(),c.kc(5,"ui-notification-banner-subtitle"),c.gd(6),c.xc(7,"t"),c.jc(),c.kc(8,"ui-notification-banner-actions"),c.kc(9,"ui-button-text",2),c.sc("trigger",function(){return c.Vc(e),c.wc(2).goToCourses.emit()}),c.xc(10,"t"),c.xc(11,"t"),c.jc(),c.jc(),c.jc(),c.hc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("color",e.notificationBannerColorEnum.NEUTRAL)("icon",e.notificationBannerInfoIcon),c.Mb(2),c.hd(c.yc(4,7,e.DICTIONARY.renewableTitle)),c.Mb(3),c.id(" ",c.zc(7,9,e.DICTIONARY.notRenewableWithThisCourseMessage,c.Ic(16,yr,e.certificationName))," "),c.Mb(3),c.Dc("label",c.yc(10,12,e.DICTIONARY.renewCertification))("ariaLabel",c.yc(11,14,e.DICTIONARY.renewCertification))("color",e.buttonColorEnum.DARK)}}function Sr(e,t){if(1&e&&(c.ic(0),c.ed(1,wr,12,18,"ng-container",0),c.ed(2,Cr,12,18,"ng-container",0),c.hc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",e.isExpired),c.Mb(1),c.Dc("ngIf",!e.isExpired)}}let kr=(()=>{class e extends or{}return e.\u0275fac=function(t){return Tr(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["learner-page-widget"]],features:[c.Jb],decls:2,vars:2,consts:[[4,"ngIf"],[3,"color","icon"],[3,"label","ariaLabel","color","trigger"]],template:function(e,t){1&e&&(c.ed(0,vr,3,2,"ng-container",0),c.ed(1,Sr,3,2,"ng-container",0)),2&e&&(c.Dc("ngIf",t.isRenewableFromThisResource),c.Mb(1),c.Dc("ngIf",!t.isRenewableFromThisResource))},directives:[m.p,b.Fd,b.Id,b.Hd,b.Dd,b.U],pipes:[M.b,f.c],styles:[""],changeDetection:0}),e})();const Tr=c.mc(kr),Ir=function(e,t){return{certification_name:e,date:t}};function xr(e,t){if(1&e){const e=c.lc();c.ic(0),c.kc(1,"ui-notification-banner",1),c.kc(2,"ui-notification-banner-title"),c.gd(3),c.xc(4,"t"),c.jc(),c.kc(5,"ui-notification-banner-subtitle"),c.gd(6),c.xc(7,"t"),c.xc(8,"dcbDate"),c.jc(),c.kc(9,"ui-notification-banner-actions"),c.kc(10,"ui-button-text",2),c.sc("trigger",function(){return c.Vc(e),c.wc(2).goToCourses.emit()}),c.xc(11,"t"),c.xc(12,"t"),c.jc(),c.jc(),c.jc(),c.hc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("color",e.notificationBannerColorEnum.ERROR)("icon",e.notificationBannerInfoIcon),c.Mb(2),c.hd(c.yc(4,7,e.DICTIONARY.expiredTitle)),c.Mb(3),c.id(" ",c.zc(7,9,e.DICTIONARY.expiredRenewableWithThisLPMessage,c.Jc(20,Ir,e.certificationName,c.Ac(8,12,e.expiringAt,e.timezone,e.dateFormat)))," "),c.Mb(4),c.Dc("label",c.yc(11,16,e.DICTIONARY.renewCertification))("ariaLabel",c.yc(12,18,e.DICTIONARY.renewCertification))("color",e.buttonColorEnum.PRIMARY)}}function Dr(e,t){if(1&e){const e=c.lc();c.ic(0),c.kc(1,"ui-notification-banner",1),c.kc(2,"ui-notification-banner-title"),c.gd(3),c.xc(4,"t"),c.jc(),c.kc(5,"ui-notification-banner-subtitle"),c.gd(6),c.xc(7,"t"),c.xc(8,"dcbDate"),c.jc(),c.kc(9,"ui-notification-banner-actions"),c.kc(10,"ui-button-text",2),c.sc("trigger",function(){return c.Vc(e),c.wc(2).goToCourses.emit()}),c.xc(11,"t"),c.xc(12,"t"),c.jc(),c.jc(),c.jc(),c.hc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("color",e.notificationBannerColorEnum.NEUTRAL)("icon",e.notificationBannerInfoIcon),c.Mb(2),c.hd(c.yc(4,7,e.DICTIONARY.renewableTitle)),c.Mb(3),c.id(" ",c.zc(7,9,e.DICTIONARY.renewableWithThisLPMessage,c.Jc(20,Ir,e.certificationName,c.Ac(8,12,e.expiringAt,e.timezone,e.dateFormat)))," "),c.Mb(4),c.Dc("label",c.yc(11,16,e.DICTIONARY.renewCertification))("ariaLabel",c.yc(12,18,e.DICTIONARY.renewCertification))("color",e.buttonColorEnum.DARK)}}function Or(e,t){if(1&e&&(c.ic(0),c.ed(1,xr,13,23,"ng-container",0),c.ed(2,Dr,13,23,"ng-container",0),c.hc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",e.isExpired),c.Mb(1),c.Dc("ngIf",!e.isExpired)}}function Er(e,t){if(1&e){const e=c.lc();c.ic(0),c.kc(1,"ui-notification-banner",1),c.kc(2,"ui-notification-banner-title"),c.gd(3),c.xc(4,"t"),c.jc(),c.kc(5,"ui-notification-banner-subtitle"),c.gd(6),c.xc(7,"t"),c.xc(8,"dcbDate"),c.jc(),c.kc(9,"ui-notification-banner-actions"),c.kc(10,"ui-button-text",2),c.sc("trigger",function(){return c.Vc(e),c.wc(2).goToCourses.emit()}),c.xc(11,"t"),c.xc(12,"t"),c.jc(),c.jc(),c.jc(),c.hc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("color",e.notificationBannerColorEnum.ERROR)("icon",e.notificationBannerInfoIcon),c.Mb(2),c.hd(c.yc(4,7,e.DICTIONARY.expiredTitle)),c.Mb(3),c.id(" ",c.zc(7,9,e.DICTIONARY.expiredNotRenewableWithThisLPMessage,c.Jc(20,Ir,e.certificationName,c.Ac(8,12,e.expiringAt,e.timezone,e.dateFormat)))," "),c.Mb(4),c.Dc("label",c.yc(11,16,e.DICTIONARY.renewCertification))("ariaLabel",c.yc(12,18,e.DICTIONARY.renewCertification))("color",e.buttonColorEnum.PRIMARY)}}function Ar(e,t){if(1&e){const e=c.lc();c.ic(0),c.kc(1,"ui-notification-banner",1),c.kc(2,"ui-notification-banner-title"),c.gd(3),c.xc(4,"t"),c.jc(),c.kc(5,"ui-notification-banner-subtitle"),c.gd(6),c.xc(7,"t"),c.xc(8,"dcbDate"),c.jc(),c.kc(9,"ui-notification-banner-actions"),c.kc(10,"ui-button-text",2),c.sc("trigger",function(){return c.Vc(e),c.wc(2).goToCourses.emit()}),c.xc(11,"t"),c.xc(12,"t"),c.jc(),c.jc(),c.jc(),c.hc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("color",e.notificationBannerColorEnum.NEUTRAL)("icon",e.notificationBannerInfoIcon),c.Mb(2),c.id(" ",c.yc(4,7,e.DICTIONARY.renewableTitle)," "),c.Mb(3),c.id(" ",c.zc(7,9,e.DICTIONARY.notRenewableWithThisLPMessage,c.Jc(20,Ir,e.certificationName,c.Ac(8,12,e.expiringAt,e.timezone,e.dateFormat)))," "),c.Mb(4),c.Dc("label",c.yc(11,16,e.DICTIONARY.renewCertification))("ariaLabel",c.yc(12,18,e.DICTIONARY.renewCertification))("color",e.buttonColorEnum.DARK)}}function Pr(e,t){if(1&e&&(c.ic(0),c.ed(1,Er,13,23,"ng-container",0),c.ed(2,Ar,13,23,"ng-container",0),c.hc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",e.isExpired),c.Mb(1),c.Dc("ngIf",!e.isExpired)}}let Mr=(()=>{class e extends or{}return e.\u0275fac=function(t){return Lr(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["learning-plan-widget"]],features:[c.Jb],decls:2,vars:2,consts:[[4,"ngIf"],[3,"color","icon"],[3,"label","ariaLabel","color","trigger"]],template:function(e,t){1&e&&(c.ed(0,Or,3,2,"ng-container",0),c.ed(1,Pr,3,2,"ng-container",0)),2&e&&(c.Dc("ngIf",t.isRenewableFromThisResource),c.Mb(1),c.Dc("ngIf",!t.isRenewableFromThisResource))},directives:[m.p,b.Fd,b.Id,b.Hd,b.Dd,b.U],pipes:[M.b,f.c],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),e})();const Lr=c.mc(Mr),jr=["renewDialog"];function Rr(e,t){if(1&e){const e=c.lc();c.kc(0,"course-player-widget",5),c.sc("goToCourses",function(){return c.Vc(e),c.wc(3).onGoToCourses()})("renewNow",function(){c.Vc(e),c.wc();const t=c.Sc(5),i=c.wc(2);return i.isSkipArchiveToggleEnabled?i.onGoToCourses():t.show()}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("certificationName",e.certificationData.name)("expiringAt",e.certificationAward.expiring_at)("isRenewableFromThisResource",e.isRenewableFromThisResource)("isExpired",e.isExpired)}}function Fr(e,t){if(1&e){const e=c.lc();c.kc(0,"learner-page-widget",5),c.sc("goToCourses",function(){return c.Vc(e),c.wc(3).onGoToCourses()})("renewNow",function(){c.Vc(e),c.wc();const t=c.Sc(5),i=c.wc(2);return i.isSkipArchiveToggleEnabled?i.onGoToCourses():t.show()}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("certificationName",e.certificationData.name)("expiringAt",e.certificationAward.expiring_at)("isRenewableFromThisResource",e.isRenewableFromThisResource)("isExpired",e.isExpired)}}function Nr(e,t){if(1&e){const e=c.lc();c.kc(0,"learning-plan-widget",6),c.sc("goToCourses",function(){return c.Vc(e),c.wc(3).onGoToCourses()}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("certificationName",e.certificationData.name)("expiringAt",e.certificationAward.expiring_at)("isRenewableFromThisResource",e.isRenewableFromThisResource)("isExpired",e.isExpired)}}function Ur(e,t){if(1&e){const e=c.lc();c.ic(0),c.ed(1,Rr,1,4,"course-player-widget",1),c.ed(2,Fr,1,4,"learner-page-widget",1),c.ed(3,Nr,1,4,"learning-plan-widget",2),c.kc(4,"renew-dialog",3,4),c.sc("renewNow",function(){return c.Vc(e),c.wc(2).onRenewNow()}),c.jc(),c.hc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngIf","course-player"===e.consumerPage),c.Mb(1),c.Dc("ngIf","learner-page"===e.consumerPage),c.Mb(1),c.Dc("ngIf","learning-plan"===e.consumerPage),c.Mb(1),c.Dc("dialogSize","course-player"===e.consumerPage?"sm":"md")("certificationName",e.certificationData.name)}}function zr(e,t){if(1&e&&(c.ic(0),c.ed(1,Ur,6,5,"ng-container",0),c.hc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",!e.isInRenew&&e.isRenewable)}}let qr=(()=>{class e{constructor(e,t,i,s){this.router=e,this.backendService=t,this.docLayoutService=i,this.toggleService=s,this.DICTIONARY=Qo}ngOnDestroy(){}ngOnInit(){this.certificationData&&this.certificationAward&&(this.isToggleEnabled=this.toggleService.isOn(u.f.TOGGLE_VILT)&&this.toggleService.isOn(u.f.TOGGLE_MULTIPLE_ENROLLMENT_COMPLETIONS)&&this.toggleService.isOn(u.f.MULTIPLE_ENROLLMENT_COMPLETIONS_PHASE_2),this.isSkipArchiveToggleEnabled=this.toggleService.isOn(u.f.TOGGLE_SKIP_ARCHIVE_ON_CERTIFICATION_RENEW),this.isInRenew=this.certificationAward.renewal.started,this.isExpired=this._isExpired(),this.isRenewable=this.certificationAward.renewal_options.this_resource||this.certificationAward.renewal_options.other_resources,this.isRenewableFromThisResource=this.certificationAward.renewal_options.this_resource)}onRenewNow(){this.backendService.request(`/certification/v1/awards/${this.certificationAward.id}/renew`,"POST",{resource:{type:"course",id:this.resourceId,enrollment_date:this.enrolledAt}}).subscribe(()=>{this.docLayoutService.toast.showToast({message:this.DICTIONARY.successCourseRenewNow,type:"success",onClose:()=>window.location.reload()}),this.renewDialog.hide()},e=>{let t=this.DICTIONARY.errorCourseRenewNow;e&&1009===e.code&&400===e.status&&(t=this.DICTIONARY.error1009),this.docLayoutService.toast.showToast({message:t,type:"error"}),this.renewDialog.hide()})}onGoToCourses(){this.router.navigate([`/legacy/lms/index.php?r=CertificationApp/certificationApp/renew&cu_id=${this.certificationAward.id}`])}_isExpired(){if(!this.certificationAward.expiring_at)return!1;const e=new f.a;return new f.a(this.certificationAward.expiring_at).isBefore(e)}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.h),c.ec(I.a),c.ec(j.a),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["certification-manager"]],viewQuery:function(e,t){if(1&e&&c.nd(jr,1),2&e){let e;c.Rc(e=c.tc())&&(t.renewDialog=e.first)}},inputs:{consumerPage:"consumerPage",certificationData:"certificationData",certificationAward:"certificationAward",resourceId:"resourceId",enrolledAt:"enrolledAt"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"certificationName","expiringAt","isRenewableFromThisResource","isExpired","goToCourses","renewNow",4,"ngIf"],[3,"certificationName","expiringAt","isRenewableFromThisResource","isExpired","goToCourses",4,"ngIf"],[3,"dialogSize","certificationName","renewNow"],["renewDialog",""],[3,"certificationName","expiringAt","isRenewableFromThisResource","isExpired","goToCourses","renewNow"],[3,"certificationName","expiringAt","isRenewableFromThisResource","isExpired","goToCourses"]],template:function(e,t){1&e&&c.ed(0,zr,2,1,"ng-container",0),2&e&&c.Dc("ngIf",t.isToggleEnabled&&t.certificationData&&t.certificationAward)},directives:[m.p,ar,gr,kr,Mr],styles:["[_nghost-%COMP%]{width:100%;display:block}[_nghost-%COMP%]  ui-notification-banner-title{font-size:var(--ui-typography-size-md);padding-bottom:4px}"],changeDetection:0}),e})();var Vr=i("rwK9");function Br(e,t){if(1&e&&c.fc(0,"session-enroller",10),2&e){const e=c.wc(2);c.Dc("course",e.course)("overview",e.overview)}}function Gr(e,t){if(1&e&&c.fc(0,"ilt-listing",11),2&e){const e=c.wc(2);c.Dc("course",e.course)("current_session",e.overview.current_session)("overview",e.overview)("iframeStatus$",e.iframeStatus$)}}function Hr(e,t){if(1&e&&c.fc(0,"webinar-listing",12),2&e){const e=c.wc(2);c.Dc("course_id",e.course.id)("current_session",e.current_session)("session_date",e.session_date)("course_status",e.course.status)("user_level",e.course.level)}}function $r(e,t){if(1&e&&(c.kc(0,"div"),c.ed(1,Br,1,2,"session-enroller",7),c.ed(2,Gr,1,4,"ilt-listing",8),c.ed(3,Hr,1,5,"webinar-listing",9),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",e.overview.enrolled_sessions.length<=0&&e.overview.available_sessions.length>0),c.Mb(1),c.Dc("ngIf","webinar"!==e.course.type&&e.enrolled_sessions&&e.enrolled_sessions.length>0&&e.overview.current_session),c.Mb(1),c.Dc("ngIf","webinar"===e.course.type&&e.enrolled_sessions&&e.enrolled_sessions.length>0)}}function Yr(e,t){if(1&e&&(c.kc(0,"span"),c.gd(1),c.jc()),2&e){const e=c.wc(4);c.Mb(1),c.id("/",e.current_session.score_base,"")}}const Wr=function(){return{category:"standard"}};function Qr(e,t){if(1&e&&(c.kc(0,"div"),c.gd(1),c.xc(2,"t"),c.kc(3,"span",30),c.gd(4),c.ed(5,Yr,2,1,"span",0),c.jc(),c.jc()),2&e){const e=c.wc(3);c.Mb(1),c.id(" ",c.zc(2,3,"_SCORE",c.Hc(6,Wr)),": "),c.Mb(3),c.id(" ",e.current_session.evaluation.score,""),c.Mb(1),c.Dc("ngIf","0"==e.current_session.evaluation_type)}}const Kr=function(){return{category:"classroom"}};function Jr(e,t){if(1&e&&(c.kc(0,"div",26),c.fc(1,"i",27),c.kc(2,"div",28),c.kc(3,"div",29),c.gd(4),c.xc(5,"t"),c.jc(),c.ed(6,Qr,6,7,"div",0),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(4),c.hd(c.zc(5,2,"Failed!",c.Hc(5,Kr))),c.Mb(2),c.Dc("ngIf","joined_webinar"!=e.current_session.evaluation_type)}}function Xr(e,t){if(1&e&&(c.kc(0,"span"),c.gd(1),c.jc()),2&e){const e=c.wc(4);c.Mb(1),c.id("/",e.current_session.score_base,"")}}function Zr(e,t){if(1&e&&(c.kc(0,"div"),c.gd(1),c.xc(2,"t"),c.kc(3,"span",34),c.gd(4),c.ed(5,Xr,2,1,"span",0),c.jc(),c.jc()),2&e){const e=c.wc(3);c.Mb(1),c.id(" ",c.zc(2,3,"_SCORE",c.Hc(6,Wr)),": "),c.Mb(3),c.id(" ",e.current_session.evaluation.score,""),c.Mb(1),c.Dc("ngIf","0"==e.current_session.evaluation_type)}}function ec(e,t){if(1&e&&(c.kc(0,"div",31),c.fc(1,"i",32),c.kc(2,"div",28),c.kc(3,"div",33),c.gd(4),c.xc(5,"t"),c.jc(),c.ed(6,Zr,6,7,"div",0),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(4),c.hd(c.zc(5,2,"Session Passed!",c.Hc(5,Kr))),c.Mb(2),c.Dc("ngIf","joined_webinar"!=e.current_session.evaluation_type)}}function tc(e,t){if(1&e&&c.fc(0,"img",37),2&e){const e=c.wc(3);c.Dc("alt",(null==e.current_session.evaluation.evaluator?null:e.current_session.evaluation.evaluator.firstname)+" "+(null==e.current_session.evaluation.evaluator?null:e.current_session.evaluation.evaluator.lastname))("src",null==e.current_session.evaluation.evaluator?null:e.current_session.evaluation.evaluator.avatar,c.Yc)}}function ic(e,t){if(1&e&&(c.kc(0,"div",35),c.ed(1,tc,1,2,"img",36),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngIf",null==e.current_session.evaluation.evaluator?null:e.current_session.evaluation.evaluator.avatar)}}const sc=function(){return{length:"short"}};function nc(e,t){if(1&e&&(c.kc(0,"div",38),c.gd(1),c.xc(2,"date"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.zc(2,1,e.current_session.evaluation.evaluation_date,c.Hc(4,sc))," ")}}const ac=function(){return{category:"levels"}};function oc(e,t){if(1&e&&(c.kc(0,"div",39),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.kd(" ",c.zc(2,3,"_LEVEL_6",c.Hc(6,ac)),": ",null==e.current_session.evaluation.evaluator?null:e.current_session.evaluation.evaluator.firstname," ",null==e.current_session.evaluation.evaluator?null:e.current_session.evaluation.evaluator.lastname," ")}}function rc(e,t){if(1&e&&c.fc(0,"div",40),2&e){const e=c.wc(2);c.Dc("innerHtml",e.current_session.evaluation.comment,c.Wc)}}function cc(e,t){if(1&e&&(c.kc(0,"a",44),c.gd(1),c.jc()),2&e){const e=c.wc(3);c.Dc("href",e.current_session.evaluation.evaluation_attachment.url,c.Yc),c.Mb(1),c.id(" ",e.current_session.evaluation.evaluation_attachment.name," ")}}function lc(e,t){if(1&e&&(c.kc(0,"a",44),c.gd(1),c.jc()),2&e){const e=c.wc(3);c.Dc("href",e.current_session.evaluation.evaluation_attachment.url,c.Yc),c.Mb(1),c.id(" ","Attachment"," ")}}function dc(e,t){if(1&e&&(c.kc(0,"div",41),c.fc(1,"i",42),c.ed(2,cc,2,2,"a",43),c.ed(3,lc,2,2,"a",43),c.jc()),2&e){const e=c.wc(2);c.Mb(2),c.Dc("ngIf",!e.isVilt),c.Mb(1),c.Dc("ngIf",e.isVilt)}}function uc(e,t){if(1&e&&(c.kc(0,"div",13),c.kc(1,"div",14),c.kc(2,"h4"),c.gd(3),c.xc(4,"t"),c.jc(),c.kc(5,"div",15),c.ed(6,Jr,7,6,"div",16),c.ed(7,ec,7,6,"div",17),c.jc(),c.kc(8,"div",18),c.kc(9,"div",19),c.kc(10,"h6"),c.gd(11),c.xc(12,"t"),c.jc(),c.kc(13,"div",20),c.ed(14,ic,2,1,"div",21),c.ed(15,nc,3,5,"div",22),c.ed(16,oc,3,7,"div",23),c.ed(17,rc,1,1,"div",24),c.ed(18,dc,4,2,"div",25),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(3),c.hd(c.zc(4,9,"Personal Performance Evaluation",c.Hc(15,Kr))),c.Mb(3),c.Dc("ngIf",!e.current_session.evaluation.evaluation_status),c.Mb(1),c.Dc("ngIf",e.current_session.evaluation.evaluation_status),c.Mb(4),c.hd(c.zc(12,12,"Student performance evaluation",c.Hc(16,Kr))),c.Mb(3),c.Dc("ngIf",e.current_session.evaluation.evaluator),c.Mb(1),c.Dc("ngIf",e.current_session.evaluation.evaluator),c.Mb(1),c.Dc("ngIf",e.current_session.evaluation.evaluator),c.Mb(1),c.Dc("ngIf",e.current_session.evaluation.comment),c.Mb(1),c.Dc("ngIf",e.current_session.evaluation.evaluation_attachment)}}function hc(e,t){if(1&e&&(c.kc(0,"div",45),c.fc(1,"partner-banner",46),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("course",e.course)}}function pc(e,t){if(1&e&&(c.kc(0,"div",47),c.fc(1,"certification-manager",48),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("certificationData",e.course.certification)("certificationAward",e.course.certification_award)("resourceId",e.course.id)("enrolledAt",e.course.enrolled.date_enrolled)}}function gc(e,t){if(1&e&&(c.kc(0,"div",49),c.fc(1,"collection-widgets",50),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("widgetsDataSource",e.courseWidgets)("defaultWidgets",e.defaultWidgets)}}let mc=(()=>{class e{constructor(e){this.toggleService=e,this.defaultWidgets=[],this.JOINED_WEBINAR="joined_webinar",this.JOINED_WEBINAR_ILT="2",this.isVilt=!1,this.mcc2IsEnabled=this.toggleService.isOn(u.f.MULTIPLE_ENROLLMENT_COMPLETIONS_PHASE_2)&&this.toggleService.isOn(u.f.TOGGLE_VILT)&&this.toggleService.isOn(u.f.TOGGLE_MULTIPLE_ENROLLMENT_COMPLETIONS)}ngOnInit(){this.current_session&&(this.session_date=this.current_session.dates,this.courseWidgets.params.current_session_id=this.current_session.id),this.isVilt=this.toggleService.isOn(u.f.TOGGLE_VILT)&&"classroom"===this.course.type,this.current_session&&this.courseWidgets&&this.isVilt&&(this.courseWidgets.params.session_id=this.current_session.id),this.defaultWidgets.push({id:0,title:null,content_type:"coursedesc",display_type:"learner",position:1,columns_span:12,params:`{ "course_id": ${this.course.id} }`})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["session-overview"]],inputs:{course:"course",current_session:"current_session",overview:"overview",courseWidgets:"courseWidgets",iframeStatus$:"iframeStatus$"},decls:7,vars:5,consts:[[4,"ngIf"],[1,"mdl-wrapper"],[1,"mdl-grid"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],["class","partner-wrapper mdl-cell mdl-cell--12-col",4,"ngIf"],["class","certification-manager-wrapper mdl-cell mdl-cell--12-col",4,"ngIf"],["class","widgets-area mdl-cell mdl-cell--12-col",4,"ngIf"],[3,"course","overview",4,"ngIf"],[3,"course","current_session","overview","iframeStatus$",4,"ngIf"],[3,"course_id","current_session","session_date","course_status","user_level",4,"ngIf"],[3,"course","overview"],[3,"course","current_session","overview","iframeStatus$"],[3,"course_id","current_session","session_date","course_status","user_level"],[1,"mdl-cell","mdl-cell--12-col"],[1,"evaluation-box","bg-white","mdl-grid"],[1,"mdl-cell--2-col","session-status-column"],["class","status-box status-failed",4,"ngIf"],["class","status-box status-passed",4,"ngIf"],[1,"mdl-cell--9-col","evaluation","border-grey-light"],[1,"evaluation-details-wrapper"],[1,"evaluation-details"],["class","avatar-box bg-grey-superlight",4,"ngIf"],["class","ev-date text-grey-mid",4,"ngIf"],["class","ev-instructor",4,"ngIf"],[3,"innerHtml",4,"ngIf"],["class","ev-attachment",4,"ngIf"],[1,"status-box","status-failed"],[1,"zmdi","zmdi-close-circle","text-error"],[1,"score-details"],[1,"bigger-text","text-error"],[1,"text-error"],[1,"status-box","status-passed"],[1,"zmdi","zmdi-check-circle","text-positive-green"],[1,"bigger-text","text-positive-green"],[1,"text-positive-green"],[1,"avatar-box","bg-grey-superlight"],[3,"alt","src",4,"ngIf"],[3,"alt","src"],[1,"ev-date","text-grey-mid"],[1,"ev-instructor"],[3,"innerHtml"],[1,"ev-attachment"],[1,"zmdi","zmdi-file","text-grey-mid"],["class","text-main",3,"href",4,"ngIf"],[1,"text-main",3,"href"],[1,"partner-wrapper","mdl-cell","mdl-cell--12-col"],[3,"course"],[1,"certification-manager-wrapper","mdl-cell","mdl-cell--12-col"],["consumerPage","learner-page",3,"certificationData","certificationAward","resourceId","enrolledAt"],[1,"widgets-area","mdl-cell","mdl-cell--12-col"],[3,"widgetsDataSource","defaultWidgets"]],template:function(e,t){1&e&&(c.ed(0,$r,4,3,"div",0),c.kc(1,"div",1),c.kc(2,"div",2),c.ed(3,uc,19,17,"div",3),c.ed(4,hc,2,1,"div",4),c.ed(5,pc,2,4,"div",5),c.ed(6,gc,2,2,"div",6),c.jc(),c.jc()),2&e&&(c.Dc("ngIf","elearning"!==t.course.type),c.Mb(3),c.Dc("ngIf",(null==t.current_session?null:t.current_session.evaluation)&&t.current_session.evaluation_type!=t.JOINED_WEBINAR&&t.current_session.evaluation_type!=t.JOINED_WEBINAR_ILT&&("classroom"==t.course.type||"webinar"==t.course.type&&2==t.current_session.system_status)),c.Mb(1),c.Dc("ngIf",t.course.partner_data&&t.course.partner_data.active&&t.course.partner_data.course_visible),c.Mb(1),c.Dc("ngIf","elearning"===t.course.type&&t.mcc2IsEnabled),c.Mb(1),c.Dc("ngIf",t.courseWidgets&&(t.overview.enrolled_sessions.length>0||"elearning"===t.course.type)))},directives:[m.p,xn,yo,Wo,bi,qr,Pi.a],pipes:[M.b,Vr.a],encapsulation:2}),e})();var bc=i("VdKp"),fc=i("920G"),_c=i("9crc"),vc=i("TrxT"),yc=i("EY2u");function wc(e,t){if(e&&t&&0!==t.length){if(-1===["completed","passed"].indexOf(e.status))return e;for(let i=0;i<t.length;i++){const s=t[i];if(s&&s.id&&s.id===e.id)return t[i+1]?wc(t[i+1],t):t[i]}}}var Cc=i("tk/3"),Sc=i("D6+O"),kc=i("9ls6"),Tc=i("zNDF"),Ic=i("A1Wd");let xc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Dc=(()=>{class e{constructor(e,t,i,s){this.src=e,this.lrnCachedCourseService=t,this.docLayoutService=i,this.translationService=s}getCourseInfo(e){let t=e.payload;return"object"==typeof t&&t.hasOwnProperty("id")&&(t=t.id),a.a.create(e=>{this.src.request(`/learn/v1/courses/${t}?get_all_sessions=1`,"GET").subscribe(t=>{if(t.data.hasOwnProperty("has_esignature_enabled")&&t.data.has_esignature_enabled&&(t.data.tree.length&&t.data.type===Tc.a.ELEARNING||t.data.type===Tc.a.CLASSROOM||t.data.type===Tc.a.WEBINAR)){const e=`sign_${t.data.id}`;t.data.tree=[...t.data.tree,{id:e,name:t.data.esignature_title?t.data.esignature_title:M.a.t("esignature","E-Signature"),slug_name:ne.a.SIGN.toString(),description:"",params:"",is_folder:!1,short_description:"",status:t.data.esignature_status===ne.h.PENDING?ne.l.NOT_STARTED:t.data.esignature_status===ne.h.SIGNED?ne.l.COMPLETED:ne.l.NOT_STARTED,type:ne.a.SIGN.toString()}],t.data.chapter_sequence=[...t.data.chapter_sequence,[e]]}this.lrnCachedCourseService.cachedCourseResponse=t,e.next(t)},t=>{e.error(t)})})}getLosTree(e){return this.src.request(`/learn/v1/courses/${e}/los/tree`,"GET")}getChapterLockStatus(e,t){return this.getLosTree(e).pipe(Object(di.a)(e=>{var i;return{chapters:e.data,locked:null===(i=Object(Ic.b)(e.data).find(e=>e.id===t))||void 0===i?void 0:i.locked}}))}showChapterLockedModal(e,t){if(e.locked){const i=this.getChapterLockedModalTitle(e,t),s=this.getChapterLockedModalContent(e,t);this.docLayoutService.dialog.showCommonDialog({title:i,content:s,closable:!0,actions:[{id:"confirm",type:"neutral",label:M.a.t("app7020","Got it"),slot:"end"}]}).subscribe(e=>{e.actionSuccess.next(!0)})}}getChapterLockedModalTitle(e,t){switch(e.locked){case ne.k.LOCKED:return M.a.t("subscribe","Prerequisites not met");case ne.k.MAX_NUMBER_VIEWS:return M.a.t("course","Max Number of Views Reached");default:return M.a.t("course","Max Number of Attempts Reached")}}getChapterLockedModalContent(e,t){switch(e.locked){case ne.k.LOCKED:return`${new M.b(this.translationService,t).transform("To unlock this lesson you must first complete the following:")}<br />\n                    <div style="font-weight: var(--ui-typography-weight-semibold)">${e.status_message}</div>`;case ne.k.MAX_NUMBER_VIEWS:return M.a.t("course","The lesson {name} is locked because you have reached the maximum number of views",{name:e.name});default:return M.a.t("course","The lesson {name} is locked because you have reached the maximum allowed number of {attempts} attempts",{name:e.name,attempts:e.failed_attempts_allowed})}}rateCourse(e){return this.src.request("/learn/v1/courses/"+e.payload.id_course+"/rating","POST",{rating:e.payload.rating})}getCourseRating(e){return this.src.request("/learn/v1/courses/"+e.payload.id_course+"/rating","GET")}getLoInfo(e,t,i){return this.src.request("/learn/v1/lo/"+e+"/play","GET",t,{},I.b,null,i)}trackLo(e){return this.src.request(`/learn/v1/lo/${e}/track`,"POST")}trackSurveyData(e){return e.is_dirty?this.src.request("/learn/v1/lo/"+e.idOrg+"/track","POST",JSON.stringify({track:{submitted:e.submitted,questions:e.user_answers}})):Object(Ei.a)(e)}trackQuizData(e){let t={track:{action:e.action}};return e.user_answers&&(t.track.questions=e.user_answers),this.src.request("/learn/v1/lo/"+e.idOrg+"/track","POST",JSON.stringify(t))}getOverviewInfo(e){let t={};return!1!==e.payload.sessionId&&(t={id_session:e.payload.sessionId}),this.src.request("/learn/v1/courses/"+e.payload.courseId+"/sessions","GET",t)}enrollUser(e){let t=o.a.getInstance().id;return a.a.create(i=>{this.src.request("/learn/v1/enrollment/"+e.payload.courseId+"/"+t,"POST",{session_id:e.payload.sessionId}).subscribe(t=>{var s=Object.assign({},t,{payload:e.payload});i.next(s)},e=>{i.error(e)})})}changeEnrollmentSession(e){return a.a.create(t=>{this.src.request("/learn/v1/courses/switch_sessions","PUT",e).subscribe(e=>{t.next(e)},e=>{t.error(e)})})}}return e.\u0275fac=function(t){return new(t||e)(c.oc(I.a),c.oc(xc),c.oc(j.a),c.oc(u.h))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})(),Oc=(()=>{class e{constructor(e){this._backendService=e}getLearningPlanInfo(e){return this._backendService.request("/learn/v1/lp/"+e.payload,"GET",{},{},I.b,null,e=>this._backendService.redirectWhenCode9000(e))}}return e.\u0275fac=function(t){return new(t||e)(c.oc(I.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var Ec=i("sWYD"),Ac=i("zbbA"),Pc=i("cnyc"),Mc=i("f0Wu");let Lc=(()=>{class e{constructor(e){this.src=e,this.dateFormatStandard="yyyy-MM-dd",this.sortAttr="start",this.sortDir="asc"}getEventsData(e){const t=e.payload.filters;let i="";const s=Object(Ec.a)(e.payload.startDate,this.dateFormatStandard),n=Object(Ec.a)(e.payload.endDate,this.dateFormatStandard);if(void 0!==t&&void 0!==t.search){i="&q="+t.search;const e=Object(Ec.a)(new Date,this.dateFormatStandard),s=Object(Ec.a)(Object(Ac.a)(new Date,4),this.dateFormatStandard);return this.src.request("/manage/v1/user/events?start_date="+e+"&end_date="+s+"&sort_attr="+this.sortAttr+"&sort_dir="+this.sortDir+i,"GET")}return this.src.request("/manage/v1/user/events?start_date="+s+"&end_date="+n+"&sort_attr="+this.sortAttr+"&sort_dir="+this.sortDir,"GET")}getMonthHasEventsData(e){const t=Object(Pc.a)(e.payload.updateParams.viewDate);return this.src.request("/manage/v1/user/events_in_year?year="+t,"GET")}filterMonthHasEvents(e,t){return void 0!==t&&void 0!==t.type?e.filter(e=>{let i=!1;return e.course_types.forEach(e=>{t.type.forEach(t=>{t===e&&(i=!0)})}),i}):e}formatEvents(e){const t=[];return e.forEach(e=>{const i={start:new Date(Mc(e.start,"YYYY/MM/DD HH:mm:ss").locale("en").tz(o.a.getInstance().timezone).format("YYYY/MM/DD HH:mm:ss")),end:new Date(Mc(e.end,"YYYY/MM/DD HH:mm:ss").locale("en").tz(o.a.getInstance().timezone).format("YYYY/MM/DD HH:mm:ss")),allDay:e.all_day,title:e.date_name||e.session_name||e.title,description:e.date_information||e.session_information||e.course_description,location:e.location,courseType:e.course_type,link:e.expired?null:"/learn/course/"+e.course_id+("webinar"===e.course_type||"classroom"===e.course_type?"/session/"+e.session_id:"")+"/"+e.slug_name,expired:e.expired};t.push(i)}),t}filterEvents(e,t){return void 0!==t&&void 0!==t.type?e.filter(e=>t.type.some(t=>t===e.courseType)):e}getAppliedFilters(e){return void 0!==e&&void 0!==e.type?e.type.length:0}}return e.\u0275fac=function(t){return new(t||e)(c.oc(I.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var jc=i("Vqln"),Rc=i("YbcG");let Fc=(()=>{class e{constructor(e){this.backendService=e}updateUserEmail(e){return this.backendService.request(`manage/v1/user/${o.a.getInstance().id}`,"PUT",e)}send2faTokenToEmail(){return this.backendService.request("/manage/v1/2fa/emails","POST")}validateAndSignCourse(e,t){return this.backendService.request(`/course/v1/courses/${e}/sign`,"POST",t)}}return e.\u0275fac=function(t){return new(t||e)(c.oc(I.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var Nc=i("0XDt"),Uc=i("l5mm"),zc=i("JX91");function qc(e,t){if(1&e&&(c.fc(0,"div",2),c.xc(1,"t")),2&e){const e=c.wc();c.Dc("innerHTML",c.yc(1,1,e.description),c.Wc)}}let Vc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["recovery-key-dialog"]],inputs:{description:"description",recoveryKey:"recoveryKey"},decls:3,vars:2,consts:[[3,"innerHTML",4,"ngIf"],[1,"recovery-key","text-grey-mid","bolded"],[3,"innerHTML"]],template:function(e,t){1&e&&(c.ed(0,qc,2,3,"div",0),c.kc(1,"div",1),c.gd(2),c.jc()),2&e&&(c.Dc("ngIf",t.description),c.Mb(2),c.hd(t.recoveryKey))},directives:[m.p],pipes:[M.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}  .confirmation-checkbox{margin-bottom:15px}.recovery-key[_ngcontent-%COMP%]{margin-top:30px;font-size:23px;text-align:center}"],changeDetection:0}),e})();const Bc=function(){return{category:"esignature"}};function Gc(e,t){1&e&&(c.ic(0),c.kc(1,"div",10),c.gd(2),c.xc(3,"t"),c.jc(),c.hc()),2&e&&(c.Mb(2),c.id(" ",c.zc(3,1,"Verify your Identity via Authenticator App",c.Hc(4,Bc))," "))}function Hc(e,t){1&e&&(c.ic(0),c.kc(1,"span",11),c.gd(2),c.xc(3,"t"),c.jc(),c.hc()),2&e&&(c.Mb(2),c.id(" ",c.zc(3,1,"To complete this course, please enter the 6-digit verification code that is shown in the app.",c.Hc(4,Bc))," "))}const $c=function(){return{category:"mobile"}};function Yc(e,t){1&e&&(c.ic(0),c.kc(1,"div",10),c.gd(2),c.xc(3,"t"),c.jc(),c.hc()),2&e&&(c.Mb(2),c.id(" ",c.zc(3,1,"Enter your recovery key",c.Hc(4,$c))," "))}function Wc(e,t){1&e&&(c.ic(0),c.kc(1,"span",11),c.gd(2),c.xc(3,"t"),c.jc(),c.fc(4,"br"),c.kc(5,"span",11),c.gd(6),c.xc(7,"t"),c.jc(),c.hc()),2&e&&(c.Mb(2),c.id(" ",c.zc(3,2,"We asked you to save your emergency recovery key when you enabled the authenticator app.",c.Hc(8,Bc))," "),c.Mb(4),c.id(" ",c.zc(7,5,"Please enter this key to continue with the course completion.",c.Hc(9,Bc))," "))}function Qc(e,t){1&e&&(c.ic(0),c.kc(1,"div",10),c.gd(2),c.xc(3,"t"),c.jc(),c.hc()),2&e&&(c.Mb(2),c.id(" ",c.zc(3,1,"Verify your Identity via Email",c.Hc(4,Bc))," "))}const Kc=function(e){return{category:"esignature",email:e}};function Jc(e,t){if(1&e&&(c.ic(0),c.gd(1),c.xc(2,"t"),c.hc()),2&e){const e=c.wc(3);c.Mb(1),c.id(" ",c.zc(2,1,"An email has been sent to {email}. Please enter the 6-digit verification code that has been sent to you at your email address.",c.Ic(4,Kc,e.userEmail))," ")}}const Xc=function(){return{category:"standard"}};function Zc(e,t){1&e&&(c.ic(0),c.gd(1),c.xc(2,"t"),c.hc()),2&e&&(c.Mb(1),c.id(" ",c.zc(2,1,"An email has been sent.Please enter the 6-digit verification code that has been sent to you at your email address.",c.Hc(4,Xc))," "))}function el(e,t){if(1&e&&(c.kc(0,"span",11),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(3);c.Mb(1),c.id(" ",c.zc(2,1,"An email has been sent.Please enter the 6-digit verification code that has been sent to you at your email address.",c.Ic(4,Kc,e.userEmail))," ")}}function tl(e,t){if(1&e&&(c.ic(0),c.kc(1,"span",11),c.ed(2,Jc,3,6,"ng-container",3),c.ed(3,Zc,3,5,"ng-container",3),c.jc(),c.ed(4,el,3,6,"span",12),c.hc()),2&e){const e=c.wc(2);c.Mb(2),c.Dc("ngIf",e.isEmailConfigured),c.Mb(1),c.Dc("ngIf",!e.isEmailConfigured),c.Mb(1),c.Dc("ngIf",!e.isEmailConfigured)}}function il(e,t){if(1&e){const e=c.lc();c.ic(0),c.kc(1,"span",13),c.sc("click",function(){c.Vc(e);const t=c.wc(2);return t.viewState=t.viewStateEnum.RECOVERYKEY}),c.gd(2),c.xc(3,"t"),c.jc(),c.hc()}2&e&&(c.Mb(2),c.id(" ",c.zc(3,1,"I do not have an OTP",c.Hc(4,$c))," "))}function sl(e,t){if(1&e){const e=c.lc();c.ic(0),c.kc(1,"span",13),c.sc("click",function(){return c.Vc(e),c.wc(2).contactYourAdministrator()}),c.gd(2),c.xc(3,"t"),c.jc(),c.hc()}2&e&&(c.Mb(2),c.id(" ",c.zc(3,1,"I cannot find my recovery key",c.Hc(4,$c))," "))}function nl(e,t){if(1&e&&(c.kc(0,"span"),c.gd(1),c.jc()),2&e){const e=c.wc(3);c.Mb(1),c.id(" (",e.resendPasswordRemainingSecondsFormatted,") ")}}const al=function(e){return{disabled:e}},ol=function(){return{category:"course"}};function rl(e,t){if(1&e){const e=c.lc();c.ic(0),c.kc(1,"span",14),c.sc("click",function(){return c.Vc(e),c.wc(2).resendOtpPassword()}),c.gd(2),c.xc(3,"t"),c.ed(4,nl,2,1,"span",3),c.jc(),c.hc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngClass",c.Ic(6,al,!e.resendPasswordEnabled)),c.Mb(1),c.id(" ",c.zc(3,3,"Resend the One Time Password",c.Hc(8,ol))," "),c.Mb(2),c.Dc("ngIf",e.resendPasswordRemainingSeconds>0)}}function cl(e,t){if(1&e){const e=c.lc();c.kc(0,"span",15),c.sc("click",function(){c.Vc(e);const t=c.wc(2);return t.viewState=t.viewStateEnum.AUTHENTICATORAPP}),c.gd(1),c.xc(2,"t"),c.jc()}2&e&&(c.Mb(1),c.id(" ",c.zc(2,1,"Use authenticator app",c.Hc(4,Bc))," "))}function ll(e,t){if(1&e){const e=c.lc();c.kc(0,"span",15),c.sc("click",function(){c.Vc(e);const t=c.wc(2);return t.viewState=t.viewStateEnum.EMAIL}),c.gd(1),c.xc(2,"t"),c.jc()}2&e&&(c.Mb(1),c.id(" ",c.zc(2,1,"Use email",c.Hc(4,Bc))," "))}function dl(e,t){if(1&e&&(c.kc(0,"div",1),c.kc(1,"div",2),c.ed(2,Gc,4,5,"ng-container",3),c.ed(3,Hc,4,5,"ng-container",3),c.ed(4,Yc,4,5,"ng-container",3),c.ed(5,Wc,8,10,"ng-container",3),c.ed(6,Qc,4,5,"ng-container",3),c.ed(7,tl,5,3,"ng-container",3),c.jc(),c.fc(8,"textfield",4),c.kc(9,"div",5),c.ed(10,il,4,5,"ng-container",3),c.ed(11,sl,4,5,"ng-container",3),c.ed(12,rl,5,9,"ng-container",3),c.jc(),c.kc(13,"div",6),c.ed(14,cl,3,5,"span",7),c.ed(15,ll,3,5,"span",7),c.kc(16,"div",8),c.fc(17,"rectangular-button",9),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.Dc("ngIf",e.isAuthenticatorAppEnabled&&e.currentViewState===e.viewStateEnum.AUTHENTICATORAPP),c.Mb(1),c.Dc("ngIf",e.isAuthenticatorAppEnabled&&e.currentViewState===e.viewStateEnum.AUTHENTICATORAPP),c.Mb(1),c.Dc("ngIf",e.isAuthenticatorAppEnabled&&e.currentViewState===e.viewStateEnum.RECOVERYKEY),c.Mb(1),c.Dc("ngIf",e.isAuthenticatorAppEnabled&&e.currentViewState===e.viewStateEnum.RECOVERYKEY),c.Mb(1),c.Dc("ngIf",e.isEmailAuthenticationEnabled&&e.currentViewState===e.viewStateEnum.EMAIL),c.Mb(1),c.Dc("ngIf",e.isEmailAuthenticationEnabled&&e.currentViewState===e.viewStateEnum.EMAIL),c.Mb(1),c.Dc("type",e.signContentInputs[e.currentViewState].type)("label",e.signContentInputs[e.currentViewState].label)("floating_label",e.signContentInputs[e.currentViewState].floating_label)("inputFormControl",e.signContentInputs[e.currentViewState].inputFormControl),c.Mb(2),c.Dc("ngIf",e.currentViewState===e.viewStateEnum.AUTHENTICATORAPP),c.Mb(1),c.Dc("ngIf",e.currentViewState===e.viewStateEnum.RECOVERYKEY),c.Mb(1),c.Dc("ngIf",e.currentViewState===e.viewStateEnum.EMAIL),c.Mb(2),c.Dc("ngIf",e.isAuthenticatorAppEnabled&&(e.currentViewState===e.viewStateEnum.RECOVERYKEY||e.currentViewState===e.viewStateEnum.EMAIL)),c.Mb(1),c.Dc("ngIf",e.isEmailAuthenticationEnabled&&e.isEmailConfigured&&e.currentViewState===e.viewStateEnum.AUTHENTICATORAPP),c.Mb(2),c.Dc("properties",e.signContentInputs[e.currentViewState].submitButton.properties)("formInstance",e.signContentInputs[e.currentViewState].inputFormControl)("click",e.signContentInputs[e.currentViewState].submitButton.onClick)}}var ul=function(e){return e.AUTHENTICATORAPP="authenticatorapp",e.RECOVERYKEY="recoverykey",e.EMAIL="email",e}({});let hl=(()=>{class e extends vc.a{constructor(e,t,i,s,n){super(),this.signViewerService=e,this.pageService=t,this.docLayoutService=i,this.store$=s,this.changeDetector=n,this.completed=new c.q,this.viewStateEnum=ul,this.localStorage=Di.a.getInstance(),this.resendPasswordEnabled=!0,this.resendPasswordRemainingSeconds=0,this.sessionInstance=o.a.getInstance(),this.eSignatureSettings=E.b.getInstance().getPluginSettings("EsignatureApp"),this.isAuthenticatorAppEnabled=this.eSignatureSettings&&!!this.eSignatureSettings.auth_types.filter(e=>e.type===String(this.viewStateEnum.AUTHENTICATORAPP)&&e.enabled).length,this.isEmailAuthenticationEnabled=this.eSignatureSettings&&!!this.eSignatureSettings.auth_types.filter(e=>e.type===String(this.viewStateEnum.EMAIL)&&e.enabled).length,this.isAuthenticatorAppConfigured=!!this.sessionInstance.authenticatorapp_pair_date,this.isEmailConfigured=!!this.sessionInstance.email,this.userEmail=this.sessionInstance.email,this.signContentInputs={[this.viewStateEnum.AUTHENTICATORAPP]:{type:et.a.NUMBER,label:M.a.t("two_factor_auth","One Time Password"),floating_label:!0,inputFormControl:new Ze.e("",Ze.x.compose([Ze.x.required,Ze.x.maxLength(6),Ze.x.minLength(6)])),submitButton:{properties:{text:M.a.t("esignature","Complete the course"),colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>this.validateAndSignCourse(this.signContentInputs[this.viewStateEnum.AUTHENTICATORAPP].inputFormControl.value,this.viewStateEnum.AUTHENTICATORAPP)}},[this.viewStateEnum.RECOVERYKEY]:{type:et.a.TEXT,label:M.a.t("esignature","Recovery Key"),floating_label:!0,inputFormControl:new Ze.e(null,[Ze.x.required,Nc.a.authenticatorappRecoveryKey(),Ze.x.minLength(16),Ze.x.maxLength(16)]),submitButton:{properties:{text:M.a.t("esignature","Validate recovery key"),colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>this.validateAndSignCourse(this.signContentInputs[this.viewStateEnum.RECOVERYKEY].inputFormControl.value,this.viewStateEnum.RECOVERYKEY)}},[this.viewStateEnum.EMAIL]:{type:et.a.NUMBER,label:M.a.t("two_factor_auth","One Time Password"),floating_label:!0,inputFormControl:new Ze.e("",Ze.x.compose([Ze.x.required,Ze.x.maxLength(6),Ze.x.minLength(6)])),submitButton:{properties:{text:M.a.t("esignature","Complete the course"),colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>this.validateAndSignCourse(this.signContentInputs[this.viewStateEnum.EMAIL].inputFormControl.value,this.viewStateEnum.EMAIL)}}}}ngOnInit(){this.viewState=this.defaultViewState;const e=this.localStorage.get("time",0);e&&(this.resendPasswordTimer=e,this.resendPasswordRemainingSeconds=this.remainingSeconds,this.checkResendPassword())}get remainingSeconds(){return Math.floor(this.resendPasswordTimer-(new Date).getTime()/1e3)}get remainingSeccondsFormatted(){return`00:${this.resendPasswordRemainingSeconds.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})}`}checkResendPassword(){this.resendPasswordEnabled=this.resendPasswordRemainingSeconds<=0,this.resendPasswordRemainingSecondsFormatted=this.remainingSeccondsFormatted,Object(Uc.a)(1e3).pipe(Object(zc.a)(1),Object(vt.a)(this.ngUnsubscribe),Object(la.a)(e=>this.resendPasswordRemainingSeconds>0)).subscribe(e=>{this.resendPasswordRemainingSeconds=Math.floor(this.resendPasswordTimer-(new Date).getTime()/1e3),this.resendPasswordEnabled=this.resendPasswordRemainingSeconds<=0,this.resendPasswordRemainingSecondsFormatted=this.remainingSeccondsFormatted,this.changeDetector.markForCheck()})}resendOtpPassword(){this.resendPasswordEnabled=!1,this.signViewerService.send2faTokenToEmail().subscribe(()=>{this.resendPasswordTimer=(new Date).getTime()/1e3+60,this.localStorage.set("time",this.resendPasswordTimer),this.resendPasswordRemainingSeconds=this.remainingSeconds,this.checkResendPassword()},e=>{this.docLayoutService.toast.showToast({message:e.error.message.join(" "),type:"error"})})}sendOtpPasswordToEmail(){this.signViewerService.send2faTokenToEmail().subscribe(()=>{this.currentViewState=ul.EMAIL,this.changeDetector.markForCheck()},e=>{this.docLayoutService.toast.showToast({message:e.error.message.join(" "),type:"error"})})}set viewState(e){this.currentViewState&&this.signContentInputs[this.currentViewState].inputFormControl.reset(),e===ul.EMAIL&&this.isEmailConfigured?this.sendOtpPasswordToEmail():this.currentViewState=e}get defaultViewState(){return this.isAuthenticatorAppEnabled?!this.isAuthenticatorAppEnabled&&this.isEmailAuthenticationEnabled&&this.isEmailConfigured?ul.EMAIL:ul.AUTHENTICATORAPP:ul.EMAIL}validateAndSignCourse(e,t){this.signViewerService.validateAndSignCourse(this.course.id,{[t===this.viewStateEnum.AUTHENTICATORAPP||t===this.viewStateEnum.EMAIL?"otp":"recovery_code"]:e,identifier:t===this.viewStateEnum.EMAIL?this.viewStateEnum.EMAIL:this.viewStateEnum.AUTHENTICATORAPP}).subscribe(e=>{this.store$.dispatch(Ts.a.reloadCoursePlayer(this.course.id,this.currentChapter.id)),this.completed.emit(this.currentChapter.id),t===this.viewStateEnum.RECOVERYKEY&&this.pageService.dialog.open(this.saveRecoveryKeyDialogParams(e.data.recovery_code))},e=>{1004===e.code?(t===this.viewStateEnum.AUTHENTICATORAPP||t===this.viewStateEnum.EMAIL?this.signContentInputs[t].inputFormControl.setErrors({remote:e.error.message.join(" ")}):this.signContentInputs[this.viewStateEnum.RECOVERYKEY].inputFormControl.setErrors({remote:M.a.t("mobile","This recovery Key is not valid")}),this.changeDetector.markForCheck()):this.docLayoutService.toast.showToast({message:e.error.message.join(" "),type:"error"})})}saveRecoveryKeyDialogParams(e){return{width:460,height:300,title:M.a.t("mobile","Save New Emergency Recovery Key",{boldStart:"<b>",boldEnd:"</b>"}),content:{component:Vc,params:{description:M.a.t("esignature","You have used your recovery key to complete this course. The recovery key can be used only once. Print, copy or write down this new recovery key without letting anyone see it."),recoveryKey:e}},type:"confirmation",show_confirmation_check:!0,confirmation_check_text:M.a.t("mobile","I saved the recovery key"),overlayClick:!1,top_padding_content:"0",actions:[{type:"normal",properties:{text:M.a.t("standard","Done")},handler:e=>{this.docLayoutService.toast.showToast({message:M.a.t("esignature","Recovery key created successfully"),type:"success"}),e.close()}}]}}get contactYourAdministratorDialogParams(){return{width:460,height:190,title:M.a.t("app7020","Contact your administrator",{boldStart:"<b>",boldEnd:"</b>"}),content:M.a.t("esignature","In order to proceed with the course completion, you must enter a valid One Time Password or a valid recovery key. If you are not able to find them, please contact your administrator."),type:"confirmation",show_confirmation_check:!1,overlayClick:!1,top_padding_content:"32px",actions:[{type:"cancel",properties:{text:M.a.t("standard","Close")},handler:e=>{e.close()}}]}}contactYourAdministrator(){this.pageService.dialog.open(this.contactYourAdministratorDialogParams)}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Fc),c.ec(P.a),c.ec(j.a),c.ec(w.e),c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["sign-content"]],inputs:{course:"course",currentChapter:"currentChapter"},outputs:{completed:"completed"},features:[c.Lb([M.b,Fc]),c.Jb],decls:1,vars:1,consts:[["class","sign-content-wrapper",4,"ngIf"],[1,"sign-content-wrapper"],[1,"sign-content-heading-wrapper"],[4,"ngIf"],[3,"type","label","floating_label","inputFormControl"],[1,"help-action-wrapper"],[1,"action-buttons-wrapper"],["class","button-text text-main",3,"click",4,"ngIf"],[1,"submit-button-wrapper"],[3,"properties","formInstance","click"],[1,"title-regular"],[1,"title-normal-regular"],["class","title-normal-regular",4,"ngIf"],[1,"help-action-label","subtitle-normal","text-main",3,"click"],[1,"help-action-label","subtitle-normal","text-main",3,"ngClass","click"],[1,"button-text","text-main",3,"click"]],template:function(e,t){1&e&&c.ed(0,dl,18,18,"div",0),2&e&&c.Dc("ngIf",t.currentViewState)},directives:[m.p,Ct.a,ts.a,m.n],pipes:[M.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}[_nghost-%COMP%]{text-align:left}  .submit-button-wrapper .docebo-button{margin:0}.sign-content-heading-wrapper[_ngcontent-%COMP%]{margin-bottom:32px}.sign-content-heading-wrapper[_ngcontent-%COMP%]   .title-regular[_ngcontent-%COMP%]{font-size:18px;margin-bottom:5px}.sign-content-wrapper[_ngcontent-%COMP%]{width:600px}.sign-content-wrapper[_ngcontent-%COMP%]   .help-action-wrapper[_ngcontent-%COMP%]{position:relative;text-align:right;margin-top:-15px;margin-bottom:60px;z-index:1}.sign-content-wrapper[_ngcontent-%COMP%]   .help-action-wrapper[_ngcontent-%COMP%]   .help-action-label[_ngcontent-%COMP%]{cursor:pointer}.sign-content-wrapper[_ngcontent-%COMP%]   .help-action-wrapper[_ngcontent-%COMP%]   .help-action-label.disabled[_ngcontent-%COMP%]{cursor:default;opacity:.5;pointer-events:none}.sign-content-wrapper[_ngcontent-%COMP%]   .action-buttons-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.sign-content-wrapper[_ngcontent-%COMP%]   .action-buttons-wrapper[_ngcontent-%COMP%]   .button-text[_ngcontent-%COMP%]{text-transform:uppercase;cursor:pointer}.router-outlet:not(.direction-rtl):not(.heracles-root)[_nghost-%COMP%]   .sign-content-wrapper[_ngcontent-%COMP%]   .action-buttons-wrapper[_ngcontent-%COMP%]   .submit-button-wrapper[_ngcontent-%COMP%], .router-outlet:not(.direction-rtl):not(.heracles-root)   [_nghost-%COMP%]   .sign-content-wrapper[_ngcontent-%COMP%]   .action-buttons-wrapper[_ngcontent-%COMP%]   .submit-button-wrapper[_ngcontent-%COMP%]{margin-left:auto}.router-outlet.direction-rtl:not(.heracles-root)[_nghost-%COMP%]   .sign-content-wrapper[_ngcontent-%COMP%]   .action-buttons-wrapper[_ngcontent-%COMP%]   .submit-button-wrapper[_ngcontent-%COMP%], .router-outlet.direction-rtl:not(.heracles-root)   [_nghost-%COMP%]   .sign-content-wrapper[_ngcontent-%COMP%]   .action-buttons-wrapper[_ngcontent-%COMP%]   .submit-button-wrapper[_ngcontent-%COMP%]{margin-right:auto}"],changeDetection:0}),e})();function pl(e,t){if(1&e&&(c.ic(0),c.kc(1,"div",3),c.fc(2,"em",4),c.kc(3,"p",5),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"p",6),c.gd(7),c.xc(8,"async"),c.xc(9,"async"),c.jc(),c.kc(10,"p",7),c.gd(11),c.xc(12,"t"),c.jc(),c.jc(),c.hc()),2&e){const e=c.wc(4);c.Mb(4),c.id(" ",c.yc(5,3,"You must complete")," "),c.Mb(3),c.id(" ",e.getChapterNamesToComplete(c.yc(8,5,e.chapterNamesToComplete),c.yc(9,7,e.endObjectChapters))," "),c.Mb(4),c.id(" ",c.yc(12,9,"in order to unlock this activity")," ")}}const gl=function(){return{category:"course"}};function ml(e,t){1&e&&(c.ic(0),c.kc(1,"div",3),c.fc(2,"em",8),c.kc(3,"p",9),c.gd(4),c.xc(5,"t"),c.jc(),c.jc(),c.hc()),2&e&&(c.Mb(4),c.id(" ",c.zc(5,1,"The Authentication via OTP is not required",c.Hc(4,gl))," "))}function bl(e,t){if(1&e&&(c.ic(0),c.ed(1,pl,13,11,"ng-container",2),c.xc(2,"async"),c.ed(3,ml,6,5,"ng-container",2),c.xc(4,"async"),c.hc()),2&e){const e=c.wc(3);c.Mb(1),c.Dc("ngIf",c.yc(2,2,e.chapterNamesToComplete).length),c.Mb(2),c.Dc("ngIf",!c.yc(4,4,e.chapterNamesToComplete).length)}}function fl(e,t){1&e&&(c.ic(0),c.kc(1,"div",3),c.fc(2,"em",8),c.kc(3,"p",9),c.gd(4),c.xc(5,"t"),c.jc(),c.jc(),c.hc()),2&e&&(c.Mb(4),c.id(" ",c.zc(5,1,"The authentication via OTP is not yet available",c.Hc(4,gl))," "))}function _l(e,t){if(1&e&&(c.ic(0),c.ed(1,bl,5,6,"ng-container",2),c.ed(2,fl,6,5,"ng-container",2),c.hc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngIf",e.isCourseElearning),c.Mb(1),c.Dc("ngIf",!e.isCourseElearning)}}function vl(e,t){if(1&e){const e=c.lc();c.ic(0),c.kc(1,"sign-content",10),c.sc("completed",function(t){return c.Vc(e),c.wc(2).onChapterComplete(t)}),c.jc(),c.hc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("course",e.course)("currentChapter",e.currentChapter)}}function yl(e,t){1&e&&(c.ic(0),c.kc(1,"div",3),c.fc(2,"em",8),c.kc(3,"p",9),c.gd(4),c.xc(5,"t"),c.jc(),c.jc(),c.hc()),2&e&&(c.Mb(4),c.id(" ",c.zc(5,1,"The Authentication via OTP is not required",c.Hc(4,gl))," "))}function wl(e,t){if(1&e&&(c.ic(0),c.ed(1,_l,3,2,"ng-container",2),c.ed(2,vl,2,2,"ng-container",2),c.ed(3,yl,6,5,"ng-container",2),c.hc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",e.course.esignature_status===e.eSignatureStatus.LOCKED),c.Mb(1),c.Dc("ngIf",e.course.esignature_status===e.eSignatureStatus.PENDING),c.Mb(1),c.Dc("ngIf",e.course.esignature_status===e.eSignatureStatus.SIGNED)}}function Cl(e,t){1&e&&(c.ic(0),c.kc(1,"div",3),c.fc(2,"em",8),c.kc(3,"p",9),c.gd(4),c.xc(5,"t"),c.jc(),c.jc(),c.hc()),2&e&&(c.Mb(4),c.id(" ",c.zc(5,1,"The Authentication via OTP is not required",c.Hc(4,gl))," "))}function Sl(e,t){if(1&e&&(c.ic(0),c.ed(1,Cl,6,5,"ng-container",2),c.hc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",e.course.esignature_status!==e.eSignatureStatus.SIGNED)}}let kl=(()=>{class e extends vc.a{constructor(e,t,i){super(),this.store$=e,this.router=t,this.translationPipe=i,this.completed=new c.q,this.eSignatureStatus=ne.h,this.courseStatusTypeCompleted=String(ne.d.COMPLETED)}ngOnInit(){this.chapterNamesToComplete=this.store$.pipe(Object(vt.a)(this.ngUnsubscribe),Object(w.q)(ae.a)),this.endObjectChapters=this.store$.pipe(Object(vt.a)(this.ngUnsubscribe),Object(w.q)(ae.g))}get isCourseElearning(){return this.course.type===String(ne.e.ELEARNING)}getChapterNamesToComplete(e,t){const i=t.length?` ${this.translationPipe.transform(M.a.t("standard","or"))} `:", ";return e.join(i)}onChapterComplete(e){this.completed.emit(e)}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(w.e),c.ec(s.h),c.ec(M.b))},e.\u0275cmp=c.Yb({type:e,selectors:[["sign-viewer"]],inputs:{currentChapter:"currentChapter",chapters:"chapters",completionDate:"completionDate",course:"course"},outputs:{completed:"completed"},features:[c.Lb([M.b,Fc]),c.Jb],decls:4,vars:2,consts:[[1,"course-state-ready"],[1,"mdl-grid","course-content-wrap"],[4,"ngIf"],[1,"mdl-cell","mdl-cell--12-col"],[1,"zmdi","zmdi-lock-outline","zmdi-hc-5x"],[1,"title-normal-regular","text-grey-mid","course-completed-text"],[1,"text-grey-dark","title-normal-regular"],[1,"title-normal-regular","text-grey-mid"],[1,"zmdi","zmdi-alert-circle-o","zmdi-hc-5x"],[1,"title-normal-regular","text-grey-dark","course-completed-text"],[3,"course","currentChapter","completed"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.ed(2,wl,4,3,"ng-container",2),c.ed(3,Sl,2,1,"ng-container",2),c.jc(),c.jc()),2&e&&(c.Mb(2),c.Dc("ngIf",t.course.status!==t.courseStatusTypeCompleted),c.Mb(1),c.Dc("ngIf",t.course.status===t.courseStatusTypeCompleted))},directives:[m.p,hl],pipes:[m.b,M.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}.sign-title[_ngcontent-%COMP%]{font-size:18px}.sign-description[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:24px}"],changeDetection:0}),e})();var Tl=i("yRWM");class Il{constructor(e,t,i,s){this.chapterTitle=e,this.launchParams=t,this.router=i,this.learningPlanId=s,this.platformInstance=D.b.getInstance(),this.launchParams=t,this.chapterTitle=e,this.learningPlanId=s}get contactYourAdministrator(){return{checklistTitle:tt.a.t("standard","Your training material cannot be created"),checklistSlateType:Tl.a.SAD004,checklistSubTitles:[tt.a.t("standard","This checklist is not available for you"),tt.a.t("mobile","If you need any help, please contact your Administrator")]}}get uponSendingSelf(){return{checklistTitle:tt.a.t("standard","Your training material has been completed"),checklistSlateType:Tl.a.HAPPY006,checklistSubTitles:[tt.a.t("standard","Manage your checklist"),tt.a.t("standard","Completed on {date}",{date:Object(ii.d)(new Zt.a(this.launchParams.assignment.start_date))})],checklistButton:{properties:{text:tt.a.t("standard","View Checklist"),colorScheme:"positive-green",typeStyle:"filled",click:()=>this.navigateToChecklist()}}}}get completedBySomeoneElseSelf(){return{checklistTitle:tt.a.t("standard","Your training material has been completed"),checklistSlateType:Tl.a.HAPPY006,checklistSubTitles:[tt.a.t("standard","Manage your checklist"),tt.a.t("standard","Completed on {date}",{date:Object(ii.d)(new Zt.a(this.launchParams.assignment.start_date))})],checklistButton:{properties:{text:tt.a.t("standard","View Checklist"),colorScheme:"positive-green",typeStyle:"filled",click:()=>this.navigateToChecklist()}}}}get completedBySomeoneElseCustomUserOrManager(){return{checklistTitle:tt.a.t("standard","Your training material has been completed"),checklistSlateType:Tl.a.HAPPY006,checklistSubTitles:[tt.a.t("standard","Completed on {date}",{date:Object(ii.d)(new Zt.a(this.launchParams.assignment.start_date))})]}}get uponSendingCustomUserOrManager(){return{checklistTitle:tt.a.t("standard","Your training material has been completed"),checklistSlateType:Tl.a.HAPPY006,checklistSubTitles:[tt.a.t("standard","Completed on {date}",{date:Object(ii.d)(new Zt.a(this.launchParams.assignment.start_date))})]}}get selfMustComplete(){return{checklistTitle:this.chapterTitle,checklistSubTitles:[tt.a.t("standard","You still have to complete this training material. To do so, please fill this observation checklist"),tt.a.t("mobilerebranding","Created on {time}",{time:Object(ii.d)(new Zt.a(this.launchParams.assignment.start_date))})],checklistButton:{properties:{text:tt.a.t("standard","Open the checklist"),colorScheme:"positive-green",typeStyle:"filled",click:()=>this.navigateToChecklist()}}}}get uponConclusionSelfNoApprovalCompleted(){return{checklistTitle:tt.a.t("standard","Your checklist has been completed"),checklistSubTitles:[tt.a.t("standard","Manage your checklist"),tt.a.t("standard","Completed on {date}",{date:Object(ii.d)(new Zt.a(this.launchParams.assignment.completion_date))})],checklistSlateType:Tl.a.HAPPY006,checklistButton:{properties:{text:tt.a.t("standard","View Checklist"),colorScheme:"positive-green",typeStyle:"filled",click:()=>this.navigateToChecklist()}}}}get uponConclusionSelfWaitingForApproval(){var e,t;return{checklistTitle:tt.a.t("standard","Your checklist has been sent to {fullname} for approval",{fullname:this.platformInstance.getFullName(this.launchParams.assignment.approval.approver,!0)}),checklistSlateType:Tl.a.HAPPY006,checklistSubTitles:[tt.a.t("standard","Manage your checklist"),tt.a.t("standard","Sent for approval on {date}",{date:Object(ii.d)(new Zt.a(null===(t=null===(e=this.launchParams.assignment.approval)||void 0===e?void 0:e.last_attempt)||void 0===t?void 0:t.submission_date))})],checklistButton:{properties:{text:tt.a.t("standard","View Checklist"),colorScheme:"positive-green",typeStyle:"filled",click:()=>this.navigateToChecklist()}}}}get uponConclusionSelfApproved(){return{checklistTitle:tt.a.t("standard","{approver} approved the observation checklist",{approver:this.platformInstance.getFullName(this.launchParams.assignment.approval.approver,!0)}),checklistSlateType:Tl.a.HAPPY006,checklistSubTitles:[tt.a.t("standard","Manage your checklist"),tt.a.t("standard","Approved on {date}",{date:Object(ii.d)(new Zt.a(this.launchParams.assignment.approval.last_attempt.approval_date))})],checklistButton:{properties:{text:tt.a.t("standard","View Checklist"),colorScheme:"positive-green",typeStyle:"filled",click:()=>this.navigateToChecklist()}}}}get uponConclusionSelfRejected(){return{checklistTitle:tt.a.t("standard","{approver} rejected the observation checklist",{approver:this.platformInstance.getFullName(this.launchParams.assignment.approval.approver,!0)}),checklistSlateType:Tl.a.SAD004,checklistSubTitles:[tt.a.t("standard","This checklist will still be available to you, allowing you to correct the responses you gave and read the notes that were added. Once corrected, you can submit again the checklist for approval."),tt.a.t("standard","Rejected on {date}",{date:Object(ii.d)(new Zt.a(this.launchParams.assignment.approval.last_attempt.approval_date))})],checklistButton:{properties:{text:tt.a.t("standard","Open the checklist"),colorScheme:"positive-green",typeStyle:"filled",click:()=>this.navigateToChecklist()}}}}get uponConclusionManagerCustomUserNotified(){return{checklistTitle:tt.a.t("standard","{evaluator} has been notified to complete your checklist",{evaluator:this.platformInstance.getFullName(this.launchParams.assignment.evaluator,!0)}),checklistSlateType:Tl.a.HAPPY001,checklistSubTitles:[tt.a.t("standard","Notified on {date}",{date:Object(ii.d)(new Zt.a(this.launchParams.assignment.start_date))})]}}get uponConclusionManagerCustomUserCompleted(){return{checklistTitle:tt.a.t("standard","Your checklist has been completed by {evaluator}",{evaluator:this.platformInstance.getFullName(this.launchParams.assignment.evaluator,!0)}),checklistSlateType:Tl.a.HAPPY006,checklistSubTitles:[tt.a.t("standard","Completed on {date}",{date:Object(ii.d)(new Zt.a(this.launchParams.assignment.start_date))})]}}get uponConclusionManagerCustomUserWaitingForApproval(){return{checklistTitle:tt.a.t("standard","Your checklist has been sent to {fullname} for approval",{fullname:this.platformInstance.getFullName(this.launchParams.assignment.approval.approver,!0)}),checklistSlateType:Tl.a.HAPPY006,checklistSubTitles:[tt.a.t("standard","The checklist was completed by {evaluator}",{evaluator:this.platformInstance.getFullName(this.launchParams.assignment.evaluator,!0)}),tt.a.t("standard","Sent for approval on {date}",{date:Object(ii.d)(new Zt.a(this.launchParams.assignment.approval.last_attempt.submission_date))})]}}get uponConclusionManagerCustomUserRejected(){return{checklistTitle:tt.a.t("standard","{approver} rejected the observation checklist",{approver:this.platformInstance.getFullName(this.launchParams.assignment.approval.approver,!0)}),checklistSlateType:Tl.a.SAD004,checklistSubTitles:[tt.a.t("standard","The checklist was completed by {evaluator}. This checklist will still be available to the observer, allowing to correct the responses given and read the notes that were added. Once corrected, the observer can submit again the checklist for approval",{evaluator:this.platformInstance.getFullName(this.launchParams.assignment.evaluator,!0)}),tt.a.t("standard","Rejected on {date}",{date:Object(ii.d)(new Zt.a(this.launchParams.assignment.approval.last_attempt.approval_date))})]}}get uponConclusionManagerCustomUserApproved(){return{checklistTitle:tt.a.t("standard","{approver} approved the observation checklist",{approver:this.platformInstance.getFullName(this.launchParams.assignment.approval.approver,!0)}),checklistSlateType:Tl.a.HAPPY006,checklistSubTitles:[tt.a.t("standard","The checklist was completed by {evaluator}",{evaluator:this.platformInstance.getFullName(this.launchParams.assignment.evaluator,!0)}),tt.a.t("standard","Approved on {date}",{date:Object(ii.d)(new Zt.a(this.launchParams.assignment.approval.last_attempt.approval_date))})]}}navigateToChecklist(){let e={context:"course"};this.learningPlanId&&(e=Object.assign(Object.assign({},e),{lp:this.learningPlanId})),this.router.navigate([`/otj/assignments/${this.launchParams.assignment.id}`,e]).then()}}var xl=function(e){return e.UPON_SENDING="assignment_created",e.UPON_CONCLUSION="assignment_completed",e}({}),Dl=function(e){return e.TODO="todo",e.IN_PROGRESS="in_progress",e.NEW="new",e.COMPLETED="completed",e.REJECTED="rejected",e.APPROVED="approved",e}({}),Ol=function(e){return e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.NOT_STARTED="not_started",e}({}),El=function(e){return e.SELF="self",e}({});function Al(e,t){if(1&e&&(c.ic(0),c.kc(1,"div",3),c.fc(2,"blankslate",4),c.jc(),c.hc()),2&e){const e=c.wc(2);c.Mb(2),c.Dc("isVisible",!0)("type",e.currentOtjChecklistViewState.checklistSlateType)}}const Pl=function(e){return{"title-size18":e}};function Ml(e,t){if(1&e&&(c.ic(0),c.kc(1,"div",5),c.gd(2),c.xc(3,"t"),c.jc(),c.hc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngClass",c.Ic(4,Pl,null==e.currentOtjChecklistViewState?null:e.currentOtjChecklistViewState.checklistSlateType)),c.Mb(1),c.id(" ",c.yc(3,2,e.currentOtjChecklistViewState.checklistTitle)," ")}}function Ll(e,t){if(1&e&&(c.kc(0,"div",8),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=t.$implicit;c.Mb(1),c.id(" ",c.yc(2,1,e)," ")}}const jl=function(e){return{"rejected-checklist-width":e}};function Rl(e,t){if(1&e&&(c.ic(0),c.kc(1,"div",6),c.ed(2,Ll,3,3,"div",7),c.jc(),c.hc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngClass",c.Ic(2,jl,(null==e.currentOtjChecklistViewState?null:e.currentOtjChecklistViewState.checklistSlateType)===e.blankSlateType.SAD004)),c.Mb(1),c.Dc("ngForOf",e.currentOtjChecklistViewState.checklistSubTitles)}}function Fl(e,t){if(1&e){const e=c.lc();c.ic(0),c.kc(1,"rectangular-button",9),c.sc("click",function(){return c.Vc(e),c.wc(2).currentOtjChecklistViewState.checklistButton.properties.click()}),c.jc(),c.hc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("properties",e.currentOtjChecklistViewState.checklistButton.properties)("state","normal")("buttonType","submit")}}function Nl(e,t){if(1&e&&(c.ic(0),c.kc(1,"div",1),c.kc(2,"div",2),c.ed(3,Al,3,2,"ng-container",0),c.ed(4,Ml,4,6,"ng-container",0),c.ed(5,Rl,3,4,"ng-container",0),c.ed(6,Fl,2,3,"ng-container",0),c.jc(),c.jc(),c.hc()),2&e){const e=c.wc();c.Mb(3),c.Dc("ngIf",null==e.currentOtjChecklistViewState?null:e.currentOtjChecklistViewState.checklistSlateType),c.Mb(1),c.Dc("ngIf",null==e.currentOtjChecklistViewState?null:e.currentOtjChecklistViewState.checklistTitle),c.Mb(1),c.Dc("ngIf",null==e.currentOtjChecklistViewState?null:e.currentOtjChecklistViewState.checklistSubTitles.length),c.Mb(1),c.Dc("ngIf",null==e.currentOtjChecklistViewState?null:e.currentOtjChecklistViewState.checklistButton)}}let Ul=(()=>{class e extends vc.a{constructor(e,t,i){super(),this.router=e,this.cdr=t,this.store$=i,this.completed=new c.q,this.blankSlateType=Tl.a}ngOnInit(){this.store$.pipe(Object(w.q)(ae.f),Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{var t,i;const s=new Il(e.current_chapter.name,this.launch_params,this.router,this.learning_plan_id),n=null===(i=null===(t=this.launch_params.assignment)||void 0===t?void 0:t.approval)||void 0===i?void 0:i.last_attempt;this.store$.pipe(Object(w.q)(ae.h),Object(vt.a)(this.ngUnsubscribe)).subscribe(t=>{var i,a,o,r;t?this.currentOtjChecklistViewState=s.contactYourAdministrator:(this.launch_params.lo_completion_type===xl.UPON_SENDING&&(e.current_chapter.status===Ol.COMPLETED&&(this.currentOtjChecklistViewState=this.launch_params.assignment.evaluation_type===El.SELF?s.uponSendingSelf:s.uponSendingCustomUserOrManager),e.current_chapter.status!==Ol.COMPLETED&&this.completed.emit(e.current_chapter.id)),this.launch_params.lo_completion_type===xl.UPON_CONCLUSION&&(this.launch_params.assignment.evaluation_type!==El.SELF&&((null===(i=this.launch_params.assignment)||void 0===i?void 0:i.approval)||(this.currentOtjChecklistViewState=e.current_chapter.status===Ol.COMPLETED&&this.launch_params.assignment.status!==Dl.COMPLETED?s.completedBySomeoneElseCustomUserOrManager:e.current_chapter.status===Ol.COMPLETED&&this.launch_params.assignment.status===Dl.COMPLETED?s.uponConclusionManagerCustomUserCompleted:s.uponConclusionManagerCustomUserNotified),(null===(a=this.launch_params.assignment)||void 0===a?void 0:a.approval)&&(e.current_chapter.status===Ol.COMPLETED&&(n.status===Dl.APPROVED&&(this.currentOtjChecklistViewState=s.uponConclusionManagerCustomUserApproved),n.status!==Dl.APPROVED&&(this.currentOtjChecklistViewState=s.completedBySomeoneElseCustomUserOrManager)),e.current_chapter.status!==Ol.COMPLETED&&(n.status===Dl.NEW&&(this.currentOtjChecklistViewState=s.uponConclusionManagerCustomUserWaitingForApproval),n.status===Dl.REJECTED&&(this.currentOtjChecklistViewState=s.uponConclusionManagerCustomUserRejected),this.launch_params.assignment.status===Dl.TODO&&(this.currentOtjChecklistViewState=s.uponConclusionManagerCustomUserNotified)))),this.launch_params.assignment.evaluation_type===El.SELF&&((null===(o=this.launch_params.assignment)||void 0===o?void 0:o.approval)||(this.currentOtjChecklistViewState=e.current_chapter.status===Ol.COMPLETED&&this.launch_params.assignment.status!==Dl.COMPLETED?s.completedBySomeoneElseSelf:e.current_chapter.status===Ol.COMPLETED&&this.launch_params.assignment.status===Dl.COMPLETED?s.uponConclusionSelfNoApprovalCompleted:s.selfMustComplete),(null===(r=this.launch_params.assignment)||void 0===r?void 0:r.approval)&&(e.current_chapter.status===Ol.COMPLETED&&(n.status===Dl.APPROVED&&(this.currentOtjChecklistViewState=s.uponConclusionSelfApproved),n.status!==Dl.APPROVED&&(this.currentOtjChecklistViewState=s.completedBySomeoneElseSelf)),e.current_chapter.status!==Ol.COMPLETED&&(this.currentOtjChecklistViewState=n.status===Dl.NEW?s.uponConclusionSelfWaitingForApproval:n.status===Dl.REJECTED?s.uponConclusionSelfRejected:s.selfMustComplete)))))}),this.cdr.markForCheck()})}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.h),c.ec(c.i),c.ec(w.e))},e.\u0275cmp=c.Yb({type:e,selectors:[["otj-viewer"]],inputs:{launch_params:"launch_params",course_id:"course_id",learning_plan_id:"learning_plan_id"},outputs:{completed:"completed"},features:[c.Jb],decls:1,vars:1,consts:[[4,"ngIf"],[1,"otj-wrapper"],[1,"otj-content"],["id","otj-blankslate"],[3,"isVisible","type"],[1,"checklist-title",3,"ngClass"],[1,"checklist-subtitle-wrapper",3,"ngClass"],["class","checklist-subtitle",4,"ngFor","ngForOf"],[1,"checklist-subtitle"],[1,"otj-button",3,"properties","state","buttonType","click"]],template:function(e,t){1&e&&c.ed(0,Nl,7,4,"ng-container",0),2&e&&c.Dc("ngIf",t.currentOtjChecklistViewState)},directives:[m.p,jc.a,m.n,m.o,ts.a],pipes:[M.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}  .blank-slate-image{padding-bottom:0!important}.otj-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;min-height:510px}.otj-wrapper[_ngcontent-%COMP%]   .otj-content[_ngcontent-%COMP%]{align-self:center;max-width:420px}.otj-wrapper[_ngcontent-%COMP%]   .otj-content[_ngcontent-%COMP%]   .checklist-title[_ngcontent-%COMP%]{margin-bottom:var(--hyd-spacing-sm);font-weight:var(--hyd-typography-weight-semibold);font-size:var(--hyd-typography-size-xl);line-height:var(--hyd-typography-lineheight-sm)}.otj-wrapper[_ngcontent-%COMP%]   .otj-content[_ngcontent-%COMP%]   .checklist-title.title-size18[_ngcontent-%COMP%]{font-size:var(--hyd-typography-size-lg)}.otj-wrapper[_ngcontent-%COMP%]   .otj-content[_ngcontent-%COMP%]   .checklist-subtitle-wrapper[_ngcontent-%COMP%]{max-width:282px;margin:0 auto}.otj-wrapper[_ngcontent-%COMP%]   .otj-content[_ngcontent-%COMP%]   .checklist-subtitle-wrapper.rejected-checklist-width[_ngcontent-%COMP%]{max-width:443px}.otj-wrapper[_ngcontent-%COMP%]   .otj-content[_ngcontent-%COMP%]   .checklist-subtitle[_ngcontent-%COMP%]{padding-bottom:var(--hyd-spacing-sm);color:var(--hyd-color-typography-secondary);font-weight:var(--hyd-typography-weight-semibold);font-size:var(--hyd-typography-size-xs)}.otj-wrapper[_ngcontent-%COMP%]   .otj-content[_ngcontent-%COMP%]   .otj-button[_ngcontent-%COMP%]{display:block;padding-top:var(--hyd-typography-size-xxs)}"],changeDetection:0}),e})();var zl=i("M6VA");const ql=["iframe"];let Vl=(()=>{class e{constructor(e,t,i){this.backendService=e,this.cd=t,this.userInteractionService=i,this.completed=new c.q,this.loaded=new c.q,this.baseStyle='\n        body{\n            font-family: "Open Sans", sans-serif;\n        }\n    '}ngOnInit(){this.wrapperSelector=document.querySelector(".chapter-viewer__wrapper"),this.current_chapter&&this.chapter_viewer&&this.chapter_viewer.launch_params.height?(this.iframeHeight=this.chapter_viewer.launch_params.height+"px",this.wrapperSelector.classList.add("no-min-height")):this.wrapperSelector&&(this.iframeHeight=this.wrapperSelector.clientHeight)}markAsCompleted(){this.current_chapter.status!==String($t.e.COMPLETED)&&this.completed.emit(this.current_chapter.id)}ngAfterViewChecked(){}ngAfterViewInit(){this.loaded.emit({height:this.iframeHeight}),this.iframe.nativeElement.addEventListener("load",()=>{this.iframeContentLoaded()})}iframeContentLoaded(){this.backendService.request("/learn/v1/lo/"+this.current_chapter.id+"/track","POST").subscribe(e=>{if(e&&e.data&&e.data.acknowledge&&e.data.acknowledge.contents){this.hasContent=!0,this.cd.markForCheck();const t=this.iframe.nativeElement.contentWindow;t&&t.postMessage({action:"setHtmlContent",payload:{content:e.data.acknowledge.contents,customCss:[this.baseStyle,this.custom_css].join("")}},"*"),this.markAsCompleted(),this.trackLoad()}})}ngOnDestroy(){this.observableData&&this.observableData.unsubscribe()}trackLoad(){this.userInteractionService.track(fc.a.HTML_LOAD,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.HTML})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a),c.ec(c.i),c.ec(fc.c))},e.\u0275cmp=c.Yb({type:e,selectors:[["html-viewer"]],viewQuery:function(e,t){if(1&e&&c.nd(ql,1),2&e){let e;c.Rc(e=c.tc())&&(t.iframe=e.first)}},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",custom_css:"custom_css",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded"},decls:3,vars:4,consts:[[1,"html-viewer-wrapper"],["src","/public/vendor/htmlViewerContent.html","width","100%","allowfullscreen","",3,"hidden","height"],["iframe",""]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.fc(1,"iframe",1,2),c.jc()),2&e&&(c.dd("height",t.iframeHeight),c.Mb(1),c.Ec("height",t.iframeHeight),c.Dc("hidden",!t.hasContent))},styles:[".html-viewer-wrapper[_ngcontent-%COMP%] {\n      overflow-y: auto;\n      -webkit-overflow-scrolling: touch;\n      -webkit-transform: translate3d(0,0,0);\n    }"]}),e})();var Bl=i("UQPH");let Gl=(()=>{class e{constructor(e,t){this.backendService=e,this.userInteractionService=t,this.completed=new c.q,this.loaded=new c.q}urlLoad(){const e=new _t.a;return this.trackDownload(),this.backendService.request("/learn/v1/lo/"+this.current_chapter.id+"/track","POST").subscribe(t=>{e.next(t.data.acknowledge.url),this.downloadViewerActive.next(!0),this.completed.emit(this.current_chapter.id)}),e.asObservable()}ngOnInit(){this.playerDownloadParams={config:{url:"",title:this.chapter_viewer.launch_params.filename,size:this.chapter_viewer.launch_params.filesize,description:this.current_chapter.description},download:()=>{const e=this.urlLoad();this.downloadableUrl=()=>e}}}ngAfterViewInit(){this.loaded.emit(!0)}trackDownload(){this.userInteractionService.track(fc.a.DOWNLOAD_DOWNLOAD,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.DOWNLOAD})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a),c.ec(fc.c))},e.\u0275cmp=c.Yb({type:e,selectors:[["download-viewer"]],inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",downloadViewerActive:"downloadViewerActive",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded"},decls:2,vars:7,consts:[[3,"active","filename","filesize","description","url","download"]],template:function(e,t){1&e&&(c.kc(0,"player-download",0),c.sc("download",function(){return t.playerDownloadParams.download()}),c.xc(1,"async"),c.jc()),2&e&&c.Dc("active",c.yc(1,5,t.downloadViewerActive))("filename",t.playerDownloadParams.config.title)("filesize",t.playerDownloadParams.config.size)("description",t.playerDownloadParams.config.description)("url",t.downloadableUrl)},directives:[Bl.a],pipes:[m.b],encapsulation:2}),e})();var Hl=i("ZW3K");let $l=(()=>{class e{constructor(e,t,i){this.element=e,this._backendService=t,this.userInteractionService=i,this.completed=new c.q,this.loaded=new c.q,this.isAreadyTracked=!1}ngOnInit(){this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.mode===_i.d.LIGHTBOX&&this.element.nativeElement.querySelector(".slides-player__wrap").classList.add("lightbox")}changeSlide(e){const t={track:{bookmark:e.slide}};this.userInteractionService.track(fc.a.SLIDES_CHANGE_SLIDE,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.SLIDES,slideNumber:e.slide}),this._backendService.request("/learn/v1/lo/"+this.current_chapter.id+"/track","POST",t).subscribe(t=>{e.completed&&this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.slides.length-1==e.slide&&"completed"!==this.current_chapter.status&&this.emitCompleted()})}emitCompleted(){"completed"!==this.current_chapter.status&&this.completed.emit(this.current_chapter.id)}ngAfterViewInit(){this.loaded.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.o),c.ec(I.a),c.ec(fc.c))},e.\u0275cmp=c.Yb({type:e,selectors:[["slides-view"]],inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded"},decls:1,vars:3,consts:[[3,"slides","bookmark","mode","changeSlide"]],template:function(e,t){1&e&&(c.kc(0,"slides-player",0),c.sc("changeSlide",function(e){return t.changeSlide(e)}),c.jc()),2&e&&c.Dc("slides",t.chapter_viewer.launch_params.slides)("bookmark",t.chapter_viewer.launch_params.bookmark)("mode",t.chapter_viewer.launch_params.mode)},directives:[Hl.a],encapsulation:2}),e})();const Yl=["iframe"];function Wl(e,t){if(1&e&&c.fc(0,"iframe",2,3),2&e){const e=c.wc();c.Ec("height",e.height),c.Dc("src",e.src,c.Xc)}}let Ql=(()=>{class e{constructor(e,t,i,s,n){this._sanitizer=e,this.router=t,this._store=i,this.courseActions=s,this.userInteractionService=n,this.courseHasAutoplay=!1,this.loaded=new c.q,this.completed=new c.q,this.showIframe=!1}ngOnInit(){if(this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.mode)if("fullscreen"==this.chapter_viewer.launch_params.mode)window.location.href=this.chapter_viewer.launch_params.url,this.showIframe=!1;else if(this.chapter_viewer.launch_params&&"popup"==this.chapter_viewer.launch_params.mode){let e=window.open(this.chapter_viewer.launch_params.url),t=setInterval(()=>{if((null==e?void 0:e.closed)||null===e){if(void 0!==this.course_id){const e={};this.learning_plan_id&&(e.lp=this.learning_plan_id),this.courseHasAutoplay&&(e.autoplay=0),this.router.navigate(["/learn/course/"+this.course_id+"/play/",e],fi.b)}else console.warn("No course ID was passed to the viewer, hence the redirect is not possible.");clearInterval(t)}},500);this.showIframe=!1}else this.src=this._sanitizer.bypassSecurityTrustResourceUrl(this.chapter_viewer.launch_params.url),this.showIframe=!0,window.addEventListener("message",e=>{this.callEventListener(e)});this.height=this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.height&&"lightbox"!=this.chapter_viewer.launch_params.mode?this.chapter_viewer.launch_params.height:"100%"}callEventListener(e){const t=e.data;t.target&&"dcd"===t.target&&t.status&&("completed"!==t.status&&"closed"!==t.status||(this.completed.emit(this.current_chapter.id),this.userInteractionService.track(fc.a.TINCAN_COMPLETE,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.TINCAN})))}ngAfterViewInit(){this.loaded.emit(!0),this.userInteractionService.track(fc.a.TINCAN_LOAD,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.TINCAN})}ngOnDestroy(){window.removeEventListener("message",e=>{this.callEventListener(e)}),this.chapter_viewer&&"fullscreen"!==this.chapter_viewer.launch_params.mode&&this._store.dispatch(Ts.a.reloadCoursePlayer(this.course_id,this.current_chapter.id))}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Li.b),c.ec(s.h),c.ec(w.e),c.ec(Ts.a),c.ec(fc.c))},e.\u0275cmp=c.Yb({type:e,selectors:[["tincan-viewer"]],viewQuery:function(e,t){if(1&e&&c.nd(Yl,1),2&e){let e;c.Rc(e=c.tc())&&(t.iframe=e.first)}},inputs:{current_chapter:"current_chapter",courseHasAutoplay:"courseHasAutoplay",chapter_viewer:"chapter_viewer",course_id:"course_id",learning_plan_id:"learning_plan_id"},outputs:{loaded:"loaded",completed:"completed"},decls:2,vars:1,consts:[["id","tincan-iframe-wrapper"],["width","100%","webkitallowfullscreen","","mozallowfullscreen","","allowfullscreen","","scrolling","auto",3,"height","src",4,"ngIf"],["width","100%","webkitallowfullscreen","","mozallowfullscreen","","allowfullscreen","","scrolling","auto",3,"height","src"],["iframe",""]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.ed(1,Wl,2,2,"iframe",1),c.jc()),2&e&&(c.Mb(1),c.Dc("ngIf",t.showIframe))},directives:[m.p],styles:["#tincan-iframe-wrapper[_ngcontent-%COMP%] {\n          width: 100%;\n          height: 100%;\n          position: relative;\n      }\n      #tincan-iframe-wrapper[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%] {\n        min-height: 510px;\n      }"]}),e})();const Kl=["iframe"];function Jl(e,t){if(1&e&&c.fc(0,"iframe",1,2),2&e){const e=c.wc();c.Ec("width",e.width),c.Ec("height",e.height),c.Dc("src",e.src,c.Xc)}}let Xl=(()=>{class e{constructor(e,t,i,s,n,a,o){this._sanitizer=e,this.router=t,this.activatedRoute=i,this._store=s,this.userInteractionService=n,this._backendService=a,this.http=o,this.width="100%",this.keepAliveInterval=null,this.courseHasAutoplay=!1,this.loaded=new c.q,this.completed=new c.q,this.showIframe=!1}ngOnInit(){if(this.chapter_viewer&&this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.mode)if("fullscreen"==this.chapter_viewer.launch_params.mode)window.location.href=this.chapter_viewer.launch_params.url,this.showIframe=!1;else if("popup"==this.chapter_viewer.launch_params.mode){let e=window.open(this.chapter_viewer.launch_params.url),t=setInterval(()=>{if(null===e||e.closed){if(void 0!==this.course_id){const e={},t=this.activatedRoute.snapshot.paramMap.get("lp");t&&(e.lp=t),this.courseHasAutoplay&&(e.autoplay=0),this.router.navigate(["/learn/course/"+this.course_id+"/play/",e],fi.b)}else console.warn("No course ID was passed to the viewer, hence the redirect is not possible.");clearInterval(t)}},500);this.showIframe=!1}else this.src=this._sanitizer.bypassSecurityTrustResourceUrl(this.chapter_viewer.launch_params.url),this.showIframe=!0;this.height=this.chapter_viewer&&this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.height&&"lighbox"!=this.chapter_viewer.launch_params.mode?this.chapter_viewer.launch_params.height:"100%"}ngAfterViewInit(){this.loaded.emit(!0),this.userInteractionService.track(fc.a.AICC_LOAD,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.AICC})}ngOnDestroy(){this.keepAliveInterval&&clearInterval(this.keepAliveInterval)}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Li.b),c.ec(s.h),c.ec(s.a),c.ec(w.e),c.ec(fc.c),c.ec(I.a),c.ec(Cc.b))},e.\u0275cmp=c.Yb({type:e,selectors:[["aicc-viewer"]],viewQuery:function(e,t){if(1&e&&c.nd(Kl,1),2&e){let e;c.Rc(e=c.tc())&&(t.iframe=e.first)}},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",courseHasAutoplay:"courseHasAutoplay",course_id:"course_id"},outputs:{loaded:"loaded",completed:"completed"},decls:1,vars:1,consts:[["id","aicc-iframe",3,"width","height","src",4,"ngIf"],["id","aicc-iframe",3,"width","height","src"],["iframe",""]],template:function(e,t){1&e&&c.ed(0,Jl,2,3,"iframe",0),2&e&&c.Dc("ngIf",t.showIframe)},directives:[m.p],styles:["#aicc-iframe[_ngcontent-%COMP%] {\n            min-height: 510px;\n        }"]}),e})();const Zl=["iframe"];function ed(e,t){if(1&e&&c.fc(0,"iframe",2,3),2&e){const e=c.wc();c.Ec("height",e.height),c.Dc("src",e.src,c.Xc)}}const td=function(){return{"padding-top":"25%"}};function id(e,t){1&e&&(c.kc(0,"div",4),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Dc("ngStyle",c.Hc(4,td)),c.Mb(1),c.id(" ",c.yc(2,2,"You have completed the SCORM.")," "))}let sd,nd=!0,ad=(()=>{class e{constructor(e,t,i,s,n){this._sanitizer=e,this.router=t,this.activatedRoute=i,this._store=s,this.userInteractionService=n,this.isCompleted=!1,this.showIframe=!1,this.courseHasAutoplay=!1,this.completed=new c.q,this.loaded=new c.q,this.next=new c.q}showScormIframe(){return!this.isCompleted&&this.showIframe}showScormMessage(){return this.isCompleted&&this.showIframe}openScormInNewWindow(){void 0===sd||!0===sd.closed?(sd=window.open(this.chapter_viewer.launch_params.url),sd.onload=()=>{sd.onunload=()=>{window.postMessage({target:"dcd",status:"closed"},"*")}}):(clearInterval(this.externalWindowInterval),sd.location.replace(this.chapter_viewer.launch_params.url)),this.externalWindowInterval=setInterval(()=>{if((null==sd?void 0:sd.closed)||null===sd){if(void 0!==this.course_id){clearInterval(this.externalWindowInterval);const e={},t=this.activatedRoute.snapshot.paramMap.get("lp");t&&(e.lp=t),this.courseHasAutoplay&&(e.autoplay=0),this.router.navigate(["/learn/course/"+this.course_id+"/play/",e],fi.b)}else clearInterval(this.externalWindowInterval),console.warn("No course ID was passed to the viewer, hence the redirect is not possible.");clearInterval(this.externalWindowInterval)}},500),this.showIframe=!1}setScormHeight(){this.height=this.chapter_viewer.launch_params&&"lightbox"!==this.chapter_viewer.launch_params.mode?"inline"!==this.chapter_viewer.launch_params.mode||this.chapter_viewer.launch_params.height?this.chapter_viewer.launch_params.height:"510":"100%"}ngOnInit(){if(this.chapter_viewer&&this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.mode)if("fullscreen"===this.chapter_viewer.launch_params.mode){for(let e=0;e<=5;e++)history.pushState({},"",window.location.href);window.location.href=this.chapter_viewer.launch_params.url,this.showIframe=!1}else"popup"===this.chapter_viewer.launch_params.mode?this.openScormInNewWindow():(this.src=this._sanitizer.bypassSecurityTrustResourceUrl(this.chapter_viewer.launch_params.url),this.showIframe=!0);this.setScormHeight()}checkForStoppingExecutionOfListener(e){return!e.target||"dcd"!==e.target&&!e.status||!nd&&(nd=!0,!0)}scormListenerCompleteClosed(){"inline"!==this.chapter_viewer.launch_params.mode&&(this.isCompleted=!0),this.userInteractionService.track(fc.a.SCORM_COMPLETE,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.SCORM}),this.completed.emit(this.current_chapter.id),sd&&(clearInterval(this.externalWindowInterval),sd.close(),sd=void 0)}scormListenerNext(e){if(e.hasOwnProperty("chapter_id")){if(String(e.chapter_id)!==String(this.current_chapter.id))return}else console.warn("The DCD did not send ID to identify the chapter we want to change");"popup"===this.chapter_viewer.launch_params.mode&&(nd=!1,sd&&clearInterval(this.externalWindowInterval)),this.next.emit("next")}listenForIframePostMessages(){Object(xi.i)(this.iframeElement).then(()=>{const e=this;this.scormListeningFunction=function(t){const i=t.data;e.checkForStoppingExecutionOfListener(i)||("completed"!==i.status&&"closed"!==i.status||e.scormListenerCompleteClosed(),"next"===i.status&&e.scormListenerNext(i))},window.addEventListener("message",this.scormListeningFunction)})}ngAfterViewInit(){this.userInteractionService.track(fc.a.SCORM_LOAD,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.SCORM}),this.loaded.emit(!0),this.listenForIframePostMessages()}ngOnDestroy(){void 0!==this.scormListeningFunction&&window.removeEventListener("message",this.scormListeningFunction),"inline"===this.chapter_viewer.launch_params.mode&&(this.userInteractionService.track(fc.a.SCORM_COMPLETE,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.SCORM}),this.completed.emit(this.current_chapter.id))}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Li.b),c.ec(s.h),c.ec(s.a),c.ec(w.e),c.ec(fc.c))},e.\u0275cmp=c.Yb({type:e,selectors:[["scorm-viewer"]],viewQuery:function(e,t){if(1&e&&(c.nd(Zl,1),c.nd(Zl,1)),2&e){let e;c.Rc(e=c.tc())&&(t.iframe=e.first),c.Rc(e=c.tc())&&(t.iframeElement=e)}},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",courseHasAutoplay:"courseHasAutoplay",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded",next:"next"},decls:2,vars:2,consts:[["id","scorm-iframe","width","100%","allow","autoplay",3,"src","height",4,"ngIf"],["class","text-main",3,"ngStyle",4,"ngIf"],["id","scorm-iframe","width","100%","allow","autoplay",3,"src","height"],["iframe",""],[1,"text-main",3,"ngStyle"]],template:function(e,t){1&e&&(c.ed(0,ed,2,2,"iframe",0),c.ed(1,id,3,5,"div",1)),2&e&&(c.Dc("ngIf",t.showScormIframe()),c.Mb(1),c.Dc("ngIf",t.showScormMessage()))},directives:[m.p,m.q],pipes:[M.b],styles:["#scorm-iframe[_ngcontent-%COMP%] {\n            min-height: 510px;\n        }"]}),e})();var od=i("QbTB"),rd=i("0V5H"),cd=i("VRNE"),ld=i("SOpw");const dd=["linkField"],ud=function(){return{category:"standard"}};function hd(e,t){if(1&e&&(c.kc(0,"div",4),c.kc(1,"div",5),c.kc(2,"div",6),c.kc(3,"span",7),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"span",8),c.fc(7,"line-limiter",9),c.jc(),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(4),c.hd(c.zc(5,7,"_INSTRUCTION",c.Hc(10,ud))),c.Mb(3),c.Dc("content",e.instructionsText)("lines",null==e.lineLimiterParams?null:e.lineLimiterParams.lines)("removeHtml",!1)("skipSanitization",!0)("more_label",null==e.lineLimiterParams?null:e.lineLimiterParams.more_label)("less_label",null==e.lineLimiterParams?null:e.lineLimiterParams.less_label)}}function pd(e,t){if(1&e){const e=c.lc();c.kc(0,"div",21),c.kc(1,"screen-recording",22),c.sc("launchSuccess",function(){return c.Vc(e),c.wc(3).startPolling()}),c.jc(),c.jc()}if(2&e){const e=c.wc(3);c.Mb(1),c.Dc("layout",e.screenRecordingParams.layout)("uploadRequestPath",e.screenRecordingParams.uploadRequestPath)("uploadSuccessPath",e.screenRecordingParams.uploadSuccessPath)}}function gd(e,t){1&e&&(c.kc(0,"div",23),c.gd(1),c.xc(2,"t"),c.kc(3,"span",24),c.gd(4),c.xc(5,"t"),c.jc(),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,2,"Alternatively,")," "),c.Mb(3),c.id(" ",c.yc(5,4,"you can submit a YouTube/Vimeo video link")," "))}function md(e,t){if(1&e&&c.fc(0,"basic-button",29),2&e){const e=c.wc(4);c.Dc("type",e.buttonConfirm.type)("text",e.buttonConfirm.text)("state",e.linkEmbeded.valid?e.buttonConfirm.state:"disabled")("click",e.confirmUrl)}}function bd(e,t){if(1&e&&c.fc(0,"basic-button",29),2&e){const e=c.wc(4);c.Dc("type",e.buttonCancel.type)("text",e.buttonCancel.text)("state",e.linkEmbeded.valid?e.buttonCancel.state:"disabled")("click",e.cancelURL)}}function fd(e,t){if(1&e&&(c.kc(0,"div"),c.fc(1,"textfield",25,26),c.kc(3,"div",27),c.ed(4,md,1,4,"basic-button",28),c.ed(5,bd,1,4,"basic-button",28),c.jc(),c.jc()),2&e){const e=c.wc(3);c.Rb("link-wrapper ",e.disabledField?"is-disabled":"",""),c.Mb(1),c.Dc("id",e.linkAssignment.id)("type",e.linkAssignment.type)("label",e.linkAssignment.label)("disabledField",e.disableLinkField)("link_types",e.linkAssignment.link_types)("inputFormControl",e.linkEmbeded.controls.linkAssignment),c.Mb(3),c.Dc("ngIf",e.linkEmbeded.value.linkAssignment&&e.linkEmbeded.value.linkAssignment.length>0),c.Mb(1),c.Dc("ngIf",e.linkEmbeded.value.linkAssignment&&e.linkEmbeded.value.linkAssignment.length>0)}}const _d=function(e){return{"full-width":e}};function vd(e,t){if(1&e){const e=c.lc();c.kc(0,"div",14),c.kc(1,"div",15),c.kc(2,"div",16),c.kc(3,"single-upload",17),c.sc("uploading",function(t){return c.Vc(e),c.wc(2).submitFile(t)})("uploaded",function(t){return c.Vc(e),c.wc(2).uploadComplete(t)})("failed",function(t){return c.Vc(e),c.wc(2).uploadFailed(t)}),c.jc(),c.jc(),c.ed(4,pd,2,3,"div",18),c.jc(),c.ed(5,gd,6,6,"div",19),c.ed(6,fd,6,11,"div",20),c.jc()}if(2&e){const e=c.wc(2);c.Mb(2),c.Dc("ngClass",c.Ic(12,_d,!e.screenRecordingApp)),c.Mb(1),c.bd(e.dropzoneUploader.style),c.Dc("disabled",e.linkEmbeded.touched)("placeholder",e.dropzoneUploader.placeholder)("allowed_extensions",e.dropzoneUploader.allowed_extensions)("max_file_size",e.dropzoneUploader.max_file_size)("collection",e.dropzoneUploader.collection)("disabledField",e.linkEmbeded.value.linkAssignment),c.Mb(1),c.Dc("ngIf",e.screenRecordingApp),c.Mb(1),c.Dc("ngIf",1==e.numberOfFiles),c.Mb(1),c.Dc("ngIf",1==e.numberOfFiles)}}function yd(e,t){if(1&e){const e=c.lc();c.kc(0,"div",38),c.kc(1,"div",39),c.kc(2,"div",40),c.gd(3),c.xc(4,"t"),c.kc(5,"a",41),c.sc("click",function(){return c.Vc(e),c.wc(3).buttonControls("reuploadVideo")}),c.gd(6),c.xc(7,"t"),c.jc(),c.jc(),c.jc(),c.kc(8,"div",42),c.fc(9,"player-iframe",43),c.jc(),c.jc()}if(2&e){const e=c.wc(3);c.Mb(3),c.id(" ",c.yc(4,4,"You have submitted the following video file. Do you want to proceed with this one or")," "),c.Mb(3),c.hd(c.yc(7,6,"link to another video?")),c.Mb(3),c.Dc("url",e.track.submission.video_url)("bookmark",0)}}function wd(e,t){if(1&e){const e=c.lc();c.kc(0,"div",39),c.kc(1,"a",46),c.sc("click",function(){return c.Vc(e),c.wc(4).deleteFiles()}),c.gd(2),c.xc(3,"t"),c.jc(),c.jc()}2&e&&(c.Mb(2),c.hd(c.yc(3,1,"Remove all")))}const Cd=function(e){return{number:e}};function Sd(e,t){if(1&e&&(c.kc(0,"div",38),c.kc(1,"div",44),c.gd(2),c.xc(3,"t"),c.jc(),c.ed(4,wd,4,3,"div",45),c.jc()),2&e){const e=c.wc(3);c.Mb(2),c.id("",c.zc(3,2,"You are submitting {number} items",c.Ic(5,Cd,e.numberOfFiles))," "),c.Mb(2),c.Dc("ngIf",e.multipleUploads)}}function kd(e,t){if(1&e){const e=c.lc();c.kc(0,"div",48),c.kc(1,"div",49),c.fc(2,"em",50),c.jc(),c.kc(3,"div",51),c.gd(4),c.jc(),c.kc(5,"div",52),c.kc(6,"em",53),c.sc("click",function(){c.Vc(e);const i=t.index;return c.wc(4).deleteFiles(i)}),c.jc(),c.jc(),c.jc()}if(2&e){const e=t.$implicit;c.Mb(4),c.id(" ",e.filename," ")}}function Td(e,t){if(1&e&&(c.kc(0,"div",38),c.ed(1,kd,7,1,"div",47),c.jc()),2&e){const e=c.wc(3);c.Mb(1),c.Dc("ngForOf",e.track.submission.files)}}function Id(e,t){if(1&e&&c.fc(0,"basic-button",29),2&e){const e=c.wc(3);c.Dc("type",e.uploadMoreButton.type)("text",e.uploadMoreButton.text)("state",e.uploadMoreButton.state)("click",e.uploadMore)}}function xd(e,t){if(1&e){const e=c.lc();c.kc(0,"div",30),c.ed(1,yd,10,8,"div",31),c.ed(2,Sd,5,7,"div",31),c.ed(3,Td,2,1,"div",31),c.kc(4,"div",32),c.kc(5,"div",33),c.ed(6,Id,1,4,"basic-button",28),c.jc(),c.kc(7,"div",34),c.kc(8,"form",35),c.sc("ngSubmit",function(){return c.Vc(e),c.wc(2).buttonControls("submitAssignment")}),c.fc(9,"textfield",36),c.fc(10,"textareaField",37),c.kc(11,"div",33),c.fc(12,"basic-button",29),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngIf",!e.showSubReviewItems),c.Mb(1),c.Dc("ngIf",e.showSubReviewItems),c.Mb(1),c.Dc("ngIf",e.showSubReviewItems),c.Mb(3),c.Dc("ngIf",e.numberOfFiles<10&&e.multipleUploads&&e.showSubReviewItems),c.Mb(2),c.Dc("formGroup",e.assignmentForm),c.Mb(1),c.Dc("id",e.assignmentName.id)("type",e.assignmentName.type)("label",e.assignmentName.label)("errors",e.assignmentName.errorMessages)("floating_label",e.assignmentName.floating_label)("inputFormControl",e.assignmentForm.controls.name),c.Mb(1),c.Dc("type",e.textareaDescription.type)("name",e.textareaDescription.name)("value",e.textareaDescription.value)("label",e.textareaDescription.label)("floating_label",e.textareaDescription.floating_label)("tinymce_options",e.textareaDescription.tinymce_options)("inputFormControl",e.assignmentForm.controls.description),c.Mb(2),c.Dc("type",e.submitAssignmentButton.type)("text",e.submitAssignmentButton.text)("state",e.assignmentForm.valid?e.submitAssignmentButton.state:"disabled")("click",e.submitAssignment)}}const Dd=function(){return{category:"classroom"}};function Od(e,t){1&e&&(c.fc(0,"div",63),c.xc(1,"t")),2&e&&c.Dc("innerHtml",c.zc(1,1,"Waiting for evaluation",c.Hc(4,Dd)),c.Wc)}function Ed(e,t){if(1&e){const e=c.lc();c.kc(0,"div",64),c.fc(1,"em",65),c.kc(2,"span",66),c.gd(3),c.jc(),c.kc(4,"span",67),c.gd(5,"/100"),c.jc(),c.kc(6,"em",68),c.sc("click",function(){c.Vc(e);const t=c.wc().index;return c.wc(3).buttonControls("reviewAssignment",t)}),c.jc(),c.jc()}if(2&e){const e=c.wc().$implicit;c.Mb(3),c.hd(e.score)}}function Ad(e,t){if(1&e){const e=c.lc();c.kc(0,"div",69),c.fc(1,"em",70),c.kc(2,"span",71),c.gd(3),c.jc(),c.kc(4,"span",67),c.gd(5,"/100"),c.jc(),c.kc(6,"em",68),c.sc("click",function(){c.Vc(e);const t=c.wc().index;return c.wc(3).buttonControls("reviewAssignment",t)}),c.jc(),c.jc()}if(2&e){const e=c.wc().$implicit;c.Mb(3),c.hd(e.score)}}function Pd(e,t){if(1&e&&(c.kc(0,"div",56),c.kc(1,"div",57),c.kc(2,"span",58),c.gd(3),c.xc(4,"t"),c.jc(),c.kc(5,"span",59),c.gd(6),c.xc(7,"t"),c.xc(8,"t"),c.jc(),c.jc(),c.ed(9,Od,2,5,"div",60),c.ed(10,Ed,7,1,"div",61),c.ed(11,Ad,7,1,"div",62),c.jc()),2&e){const e=t.$implicit,i=t.index,s=c.wc(3);c.Mb(3),c.hd(c.yc(4,7,e.name)),c.Mb(3),c.kd("",c.yc(7,9,"Submitted")," ",s.countTimeAgo(i)," ",c.yc(8,11,"days ago"),""),c.Mb(3),c.Dc("ngIf","waiting"==e.status),c.Mb(1),c.Dc("ngIf","failed"==e.status),c.Mb(1),c.Dc("ngIf","passed"==e.status)}}function Md(e,t){if(1&e&&c.fc(0,"basic-button",29),2&e){const e=c.wc(3);c.Dc("type",e.reSubmitAssignmentButton.type)("text",e.reSubmitAssignmentButton.text)("state",e.reSubmitAssignmentButton.state)("click",e.reSubmitAssignment)}}function Ld(e,t){if(1&e&&(c.kc(0,"div",54),c.ed(1,Pd,12,13,"div",55),c.kc(2,"div",33),c.ed(3,Md,1,4,"basic-button",28),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngForOf",e.assignemntSubmissions),c.Mb(2),c.Dc("ngIf",e.resubmissionAllowed&&e.assignemntSubmissions&&"passed"!=e.assignemntSubmissions[0].status&&"waiting"!=e.assignemntSubmissions[0].status)}}function jd(e,t){if(1&e&&(c.kc(0,"div",10),c.ed(1,vd,7,14,"div",11),c.ed(2,xd,13,22,"div",12),c.ed(3,Ld,4,2,"div",13),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",e.uploadAssignment),c.Mb(1),c.Dc("ngIf",e.submissionReview),c.Mb(1),c.Dc("ngIf",e.assignmentStatus||"activity_completed"==e.chapter_viewer.status)}}const Rd=function(){return{category:"deliverable"}};function Fd(e,t){if(1&e&&(c.ic(0),c.kc(1,"div",80),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"div",82),c.fc(5,"avatar",83),c.jc(),c.kc(6,"div",84),c.kc(7,"div",85),c.gd(8),c.jc(),c.kc(9,"a",86),c.gd(10),c.jc(),c.kc(11,"span",87),c.gd(12),c.xc(13,"t"),c.xc(14,"t"),c.xc(15,"dateTime"),c.jc(),c.jc(),c.hc()),2&e){const e=c.wc(2);c.Mb(2),c.id(" ",c.zc(3,10,"Evaluated by:",c.Hc(20,Rd)),""),c.Mb(3),c.Dc("image_url",e.evaluatorAvatarURL)("size",e.evaluatorAvatar.size)("properties",e.evaluatorAvatar.properties),c.Mb(3),c.hd(e.evaluatorName),c.Mb(1),c.Gc("href","mailto:",e.evaluatorEmail,"?Subject=Assignment%20from%20",e.evaluatedDate,"",c.Yc),c.Mb(1),c.hd(e.evaluatorEmail),c.Mb(2),c.jd(" ",c.zc(13,13,"Evaluated on",c.Hc(21,Dd)),": ",c.yc(14,16,c.yc(15,18,e.evaluatedDate))," ")}}const Nd=function(){return{category:"course"}};function Ud(e,t){if(1&e&&(c.kc(0,"div",88),c.fc(1,"em",65),c.kc(2,"span",89),c.kc(3,"span",90),c.gd(4),c.jc(),c.kc(5,"span",67),c.gd(6,"/100"),c.jc(),c.jc(),c.kc(7,"span",91),c.kc(8,"span",92),c.gd(9),c.xc(10,"t"),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(4),c.hd(e.pointsState),c.Mb(5),c.hd(c.zc(10,2,"_PROGRESS_FAILED",c.Hc(5,Nd)))}}const zd=function(){return{category:"coursereport"}};function qd(e,t){if(1&e&&(c.kc(0,"div",88),c.fc(1,"em",70),c.kc(2,"span",89),c.kc(3,"span",71),c.gd(4),c.jc(),c.kc(5,"span",67),c.gd(6,"/100"),c.jc(),c.jc(),c.kc(7,"span",91),c.kc(8,"span",93),c.gd(9),c.xc(10,"t"),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(4),c.hd(e.pointsState),c.Mb(5),c.hd(c.zc(10,2,"_PASSED",c.Hc(5,zd)))}}function Vd(e,t){if(1&e){const e=c.lc();c.kc(0,"div",72),c.kc(1,"div",73),c.kc(2,"div",74),c.kc(3,"div",75),c.kc(4,"em",76),c.sc("click",function(){return c.Vc(e),c.wc().buttonControls("viewAssignmentList")}),c.jc(),c.jc(),c.kc(5,"div",77),c.ed(6,Fd,16,22,"ng-container",78),c.jc(),c.kc(7,"div",79),c.kc(8,"div",80),c.gd(9),c.xc(10,"t"),c.jc(),c.kc(11,"div",34),c.ed(12,Ud,11,6,"div",81),c.ed(13,qd,11,6,"div",81),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(6),c.Dc("ngIf",e.evaluatorName),c.Mb(3),c.id(" ",c.yc(10,4,"Your score and status:"),""),c.Mb(3),c.Dc("ngIf","failed"==e.statusState),c.Mb(1),c.Dc("ngIf","passed"==e.statusState)}}function Bd(e,t){if(1&e&&(c.kc(0,"div",101),c.kc(1,"div",102),c.kc(2,"div",103),c.fc(3,"player-iframe",43),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(3),c.Dc("url",e.filesView)("bookmark",0)}}function Gd(e,t){1&e&&(c.kc(0,"div",80),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"Submitted files:"),""))}const Hd=function(e){return{category:"standard",index:e}};function $d(e,t){if(1&e&&(c.kc(0,"div",105),c.kc(1,"div",49),c.fc(2,"em",50),c.jc(),c.kc(3,"div",106),c.fc(4,"a",107),c.xc(5,"t"),c.jc(),c.jc()),2&e){const e=t.$implicit,i=t.index;c.Mb(4),c.Dc("href",e.url,c.Yc)("innerHtml",c.zc(5,2,"File {index}",c.Ic(5,Hd,i+1)),c.Wc)}}function Yd(e,t){if(1&e&&(c.kc(0,"div",101),c.ed(1,$d,6,7,"div",104),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngForOf",e.filesView)}}function Wd(e,t){if(1&e&&c.fc(0,"basic-button",29),2&e){const e=c.wc(2);c.Dc("type",e.reSubmitAssignmentButton.type)("text",e.reSubmitAssignmentButton.text)("state",e.reSubmitAssignmentButton.state)("click",e.reSubmitAssignment)}}function Qd(e,t){1&e&&(c.kc(0,"div",108),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"Instructor comments:")," "))}function Kd(e,t){if(1&e&&c.fc(0,"line-limiter",114),2&e){const e=c.wc(3);c.Dc("content",e.evaluatorComment)("more_label",null==e.lineLimiterParams?null:e.lineLimiterParams.more_label)("less_label",null==e.lineLimiterParams?null:e.lineLimiterParams.less_label)}}function Jd(e,t){if(1&e&&(c.kc(0,"div",109),c.kc(1,"div",110),c.fc(2,"avatar",83),c.jc(),c.kc(3,"div",111),c.kc(4,"div",80),c.gd(5),c.jc(),c.kc(6,"div",34),c.kc(7,"span",112),c.ed(8,Kd,1,3,"line-limiter",113),c.jc(),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(2),c.Dc("image_url",e.evaluatorAvatarURL)("size",e.evaluatorAvatar.size)("properties",e.evaluatorAvatar.properties),c.Mb(3),c.hd(e.evaluatorName),c.Mb(3),c.Dc("ngIf",e.evaluatorComment)}}function Xd(e,t){if(1&e&&(c.kc(0,"div",101),c.kc(1,"div",105),c.kc(2,"div",49),c.fc(3,"em",50),c.jc(),c.kc(4,"div",106),c.kc(5,"a",115),c.gd(6),c.jc(),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(5),c.Ec("href",e.evaluationAttachment.url,c.Yc),c.Mb(1),c.hd(e.evaluationAttachment.filename)}}function Zd(e,t){1&e&&(c.kc(0,"div",108),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"Leave a comment:")," "))}function eu(e,t){if(1&e&&c.fc(0,"basic-button",29),2&e){const e=c.wc(3);c.Dc("type",e.submitLearnerComment.type)("text",e.submitLearnerComment.text)("state",e.submitLearnerComment.state)("click",e.sendLearnerCommentToEvaluation)}}function tu(e,t){if(1&e){const e=c.lc();c.kc(0,"div",116),c.fc(1,"div",117),c.kc(2,"div",118),c.kc(3,"div",119),c.fc(4,"avatar",83),c.jc(),c.kc(5,"div",120),c.kc(6,"form",35),c.sc("ngSubmit",function(){return c.Vc(e),c.wc(2).buttonControls("sendLearnerCommentToEvaluation")}),c.fc(7,"textareaField",121),c.xc(8,"t"),c.jc(),c.jc(),c.kc(9,"div",122),c.ed(10,eu,1,4,"basic-button",28),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Mb(4),c.Dc("image_url",e.userAvatar)("size",e.smallAvatar.size)("properties",e.evaluatorAvatar.properties),c.Mb(2),c.Dc("formGroup",e.reviewForm),c.Mb(1),c.Dc("type",e.learnerReplyField.type)("name",e.learnerReplyField.name)("value",e.learnerReplyField.value)("label",c.yc(8,12,e.learnerReplyField.label))("floating_label",e.learnerReplyField.floating_label)("inputFormControl",e.reviewForm.controls.learner_reply)("tinymce_options",e.learnerReplyField.tinymce_options),c.Mb(3),c.Dc("ngIf",e.reviewForm.value.learner_reply.length>0)}}function iu(e,t){1&e&&(c.kc(0,"div",108),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"User comment to the evaluation:")," "))}function su(e,t){if(1&e&&c.fc(0,"line-limiter",114),2&e){const e=c.wc(3);c.Dc("content",e.learnerReply)("more_label",null==e.lineLimiterParams?null:e.lineLimiterParams.more_label)("less_label",null==e.lineLimiterParams?null:e.lineLimiterParams.less_label)}}function nu(e,t){if(1&e&&(c.kc(0,"div",109),c.kc(1,"div",110),c.fc(2,"avatar",83),c.jc(),c.kc(3,"div",111),c.kc(4,"div",80),c.gd(5),c.jc(),c.kc(6,"div",34),c.ed(7,su,1,3,"line-limiter",113),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(2),c.Dc("image_url",e.userAvatar)("size",e.evaluatorAvatar.size)("properties",e.evaluatorAvatar.properties),c.Mb(3),c.hd(e.userName),c.Mb(2),c.Dc("ngIf",e.learnerReply)}}function au(e,t){if(1&e&&(c.kc(0,"div",10),c.kc(1,"div",94),c.ed(2,Bd,4,2,"div",95),c.jc(),c.kc(3,"div",96),c.kc(4,"div",34),c.ed(5,Gd,3,3,"div",97),c.ed(6,Yd,2,1,"div",95),c.kc(7,"div",33),c.ed(8,Wd,1,4,"basic-button",28),c.jc(),c.jc(),c.kc(9,"div",34),c.ed(10,Qd,3,3,"div",98),c.ed(11,Jd,9,5,"div",99),c.ed(12,Xd,7,2,"div",95),c.ed(13,Zd,3,3,"div",98),c.ed(14,tu,11,14,"div",100),c.ed(15,iu,3,3,"div",98),c.ed(16,nu,8,5,"div",99),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.Dc("ngIf",!e.showFilesList),c.Mb(3),c.Dc("ngIf",e.showFilesList),c.Mb(1),c.Dc("ngIf",e.showFilesList),c.Mb(2),c.Dc("ngIf",e.resubmissionAllowed&&e.assignemntSubmissions&&"passed"!=e.assignemntSubmissions[0].status&&"waiting"!=e.assignemntSubmissions[0].status),c.Mb(2),c.Dc("ngIf",e.evaluatorComment||e.evaluationAttachment),c.Mb(1),c.Dc("ngIf",e.evaluatorComment),c.Mb(1),c.Dc("ngIf",e.evaluationAttachment),c.Mb(1),c.Dc("ngIf",!e.learnerReply),c.Mb(1),c.Dc("ngIf",!e.learnerReply),c.Mb(1),c.Dc("ngIf",e.learnerReply),c.Mb(1),c.Dc("ngIf",e.learnerReply)}}let ou=(()=>{class e{constructor(e,t,i,s,n,a,r,l,d){this.el=e,this.backendService=t,this.fb=i,this.sanitizer=s,this.formatter=n,this.changeDetector=a,this.toggleService=r,this.docLayoutService=l,this.userInteractionService=d,this.completed=new c.q,this.loaded=new c.q,this.track={type:"submission",submission:{id:null,learner_reply:"",name:"",description:"",files:[],video_url:""}},this.uploadAssignment=!0,this.submissionReview=!1,this.assignmentStatus=!1,this.assignmentReview=!1,this.trigger=new c.q,this.resubmissionAllowed=!1,this.disableLinkField=!1,this.disableUploadField=!1,this.linkTextfield=!0,this.showSubReviewItems=!0,this.assignemntSubmissions=[],this.numberOfFiles=1,this.showFilesList=!0,this.instructionsText="",this.userName=o.a.getInstance().firstname+" "+o.a.getInstance().lastname,this.userAvatar=o.a.getInstance().avatar_url,this.buttonConfirm={type:"normal",text:M.a.t("standard","Confirm")},this.buttonCancel={type:"cancel",text:M.a.t("standard","cancel")},this.uploadMoreButton={type:"mainColor",text:M.a.t("standard","upload more files")},this.submitAssignmentButton={type:"submit",text:M.a.t("standard","submit my assignment")},this.reSubmitAssignmentButton={type:"submit",text:M.a.t("standard","re-submit assignment")},this.submitLearnerComment={type:"submit",text:M.a.t("standard","send your comment")},this.dropzoneUploader={placeholder:M.a.t("standard","Drop your file here or browse"),allowed_extensions:["3gp","3gp2","avi","bmp","csv","doc","docx","epub","flv","gif","ico","jpeg","jpg","mkv","mov","mp3","mp4","mpeg","mpeg4","mpg","mpg2","ogg","ogm","pdf","png","ppsx","ppt","pptx","srt","txt","vtt","wmv","xls","xlsx","zip"],style:"dropzone",collection:"deliverable",max_file_size:40},this.linkAssignment={id:"assignemnt-link",type:"link",label:M.a.t("standard","Paste here your link"),link_types:["youtube","vimeo"]},this.textareaDescription={type:"mdl",name:"description-name",label:M.a.t("standard","Description/comments"),floating_label:!0,tinymce_options:{selector:"#description-assignemnt-textarea",menubar:!1,statusbar:!1,toolbar:!1,plugins:["autoresize"],autoresize_min_height:5}},this.assignmentName={type:"text",floating_label:!0,id:"assignment-name-field",label:M.a.t("standard","Assignment Name")},this.learnerReplyField={type:"mdl",name:"learner-reply-field",label:M.a.t("standard","Write your comment here"),floating_label:!0,tinymce_options:{selector:"#learner-reply-field",menubar:!1,statusbar:!1,toolbar:!1,plugins:["autoresize"],autoresize_min_height:18}},this.lineLimiterParams={content:null,lines:2,more_label:M.a.t("app7020","Show more"),less_label:M.a.t("standard","Show less")},this.evaluatorAvatar={size:40,properties:{bg_color_class:"bg-grey-mid",text_color_class:"text-white",icon_class:"zmdi zmdi-account"}},this.smallAvatar={size:30},this.ngUnsubscribe=new _t.a,this.localStorageInstance=Di.a.getInstance(),this.platformInstance=E.b.getInstance(),this.accessToken=this.localStorageInstance.get("access_token").access_token,this.screenRecordingFileName=Object(xi.o)()+".mp4",this.screenRecordingApp=this.platformInstance.isPluginActive("ScreenRecordingApp"),this.confirmUrl=()=>{this.buttonControls("confirmUrl")},this.cancelURL=()=>{this.buttonControls("cancelURL")},this.uploadMore=()=>{this.buttonControls("uploadMore")},this.submitAssignment=()=>{this.buttonControls("submitAssignment")},this.reSubmitAssignment=()=>{this.buttonControls("reSubmitAssignment")},this.sendLearnerCommentToEvaluation=()=>{this.buttonControls("sendLearnerCommentToEvaluation")},this.assignmentForm=i.group({description:[""],name:["",Ze.x.compose([Ze.x.required,Ze.x.maxLength(255)])]}),this.screenRecordingApp&&this.setScreenRecordingInitialParams(),this.linkEmbeded=i.group({linkAssignment:["",Nc.a.urlRegex(this.linkAssignment.link_types)]}),this.reviewForm=i.group({learner_reply:[""]})}setScreenRecordingInitialParams(){this.screenRecordingParams={layout:od.a.BIG,uploadRequestPath:Object(xi.d)(this.platformInstance.originalDomain,"/learn/v1/assignment/upload/presigned_url",{access_token:this.accessToken,filename:this.screenRecordingFileName}),uploadSuccessPath:""}}ngOnInit(){this.descriotionText=this.sanitizer.bypassSecurityTrustHtml(this.current_chapter.description),this.instructionsText=this.chapter_viewer.launch_params.instructions,this.multipleUploads=!!this.chapter_viewer.launch_params.allow_multiple_uploads,this.changeDetector.detectChanges(),this.chapter_viewer.launch_params.allow_resubmission&&(this.resubmissionAllowed=this.chapter_viewer.launch_params.allow_resubmission),this.chapter_viewer.launch_params.submissions&&(this.assignemntSubmissions=this.chapter_viewer.launch_params.submissions,this.assignmentStatus=!0,this.assignmentReview=!1,this.submissionReview=!1,this.uploadAssignment=!1),this.chapter_viewer.launch_params.allowed_max_file_size&&(this.dropzoneUploader.max_file_size=this.chapter_viewer.launch_params.allowed_max_file_size)}buttonControls(e,t){switch(e){case"confirmUrl":this.submissionReview=!0,this.uploadAssignment=!1,this.assignmentStatus=!1,this.assignmentReview=!1,this.showSubReviewItems=!1,this.track.submission.video_url=this.linkEmbeded.value.linkAssignment,this.changeDetector.detectChanges(),this.loaded.emit(!0);break;case"cancelURL":this.linkEmbeded.reset();break;case"uploadMore":this.numberOfFiles++,this.changeDetector.detectChanges(),this.uploadAssignment=!0,this.submissionReview=!1,this.assignmentStatus=!1,this.assignmentReview=!1,this.loaded.emit(!0);break;case"reuploadVideo":this.track.submission.video_url="",this.linkEmbeded.reset(),this.uploadAssignment=!0,this.showSubReviewItems=!0,this.submissionReview=!1,this.assignmentStatus=!1,this.assignmentReview=!1,this.linkTextfield=!1,this.loaded.emit(!0);break;case"submitAssignment":this.assignemntSubmissions.unshift({status:"waiting",name:this.assignmentForm.value.name,submission_date:this.formatter.currentUtcDateTime()}),this.assignmentStatus=!0,this.assignmentReview=!1,this.submissionReview=!1,this.uploadAssignment=!1,this.track.type="submission",this.assignmentForm.value.description&&(this.track.submission.description=this.assignmentForm.value.description),this.track.submission.name=this.assignmentForm.value.name,this.trackSubmit(),this.sendToTrackApi(),this.loaded.emit(!0);break;case"reviewAssignment":void 0!==t&&(this.assignemntSubmissions[t].evaluator&&(this.evaluatorName=this.platformInstance.getFullName(this.assignemntSubmissions[t].evaluator,!0),this.evaluatorEmail=this.assignemntSubmissions[t].evaluator.email,this.evaluatorAvatarURL=this.assignemntSubmissions[t].evaluator.avatar_url),this.evaluatedDate=this.assignemntSubmissions[t].evaluation_date,this.evaluationAttachment=this.assignemntSubmissions[t].evaluation_file?this.assignemntSubmissions[t].evaluation_file:null,this.statusState=this.assignemntSubmissions[t].status,this.pointsState=this.assignemntSubmissions[t].score,this.evaluatorComment=this.assignemntSubmissions[t].evaluator_comment,this.assignmentID=this.assignemntSubmissions[t].id,this.learnerReply=this.reviewForm.value.learner_reply?this.reviewForm.value.learner_reply:this.assignemntSubmissions[t].learner_reply,this.assignemntSubmissions[t].files?(this.filesView=this.assignemntSubmissions[t].files,this.showFilesList=!0):(this.filesView=this.assignemntSubmissions[t].video_url,this.showFilesList=!1)),this.assignmentReview=!0,this.assignmentStatus=!1,this.submissionReview=!1,this.uploadAssignment=!1,this.loaded.emit(!0);break;case"viewAssignmentList":this.assignmentStatus=!0,this.assignmentReview=!1,this.submissionReview=!1,this.uploadAssignment=!1,this.loaded.emit(!0);break;case"reSubmitAssignment":this.uploadAssignment=!0,this.assignmentStatus=!1,this.assignmentReview=!1,this.submissionReview=!1,this.changeDetector.detectChanges(),this.loaded.emit(!0);break;case"sendLearnerCommentToEvaluation":this.learnerReply=this.reviewForm.value.learner_reply,this.track.submission.id=this.assignmentID,this.track.type="comment_reply",this.track.submission.learner_reply=this.reviewForm.value.learner_reply,this.trackComment(),this.sendToTrackApi(),this.loaded.emit(!0)}}deleteFiles(e){if(void 0!==e){const t=this.track.submission.files.splice(e,1);this.backendService.request("/manage/v1/upload?filename="+t[0].url,"DELETE").pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{console.log("deleted",e)},e=>{console.log("deleted error",e)}),0===this.track.submission.files.length?(this.uploadAssignment=!0,this.submissionReview=!1,this.assignmentStatus=!1,this.assignmentReview=!1,this.numberOfFiles=1):this.numberOfFiles--}else this.numberOfFiles=1,this.disableLinkField=!1,this.track.submission.files=[],this.uploadAssignment=!0,this.submissionReview=!1;this.disableLinkField=!1}sendToTrackApi(){return this.backendService.request("/learn/v1/lo/"+this.current_chapter.id+"/track","POST",{track:this.track}).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{this.completed.emit(this.current_chapter.id)},e=>{this.docLayoutService.toast.showToast({message:M.a.t("standard",e.message[0]),type:"error"}),this.track=null,console.log("error",e),this.changeDetector.detectChanges()})}countTimeAgo(e){const t=this.assignemntSubmissions[e].submission_date,i=this.formatter.currentUtcDateTime();return this.formatter.diffDays(i,t)}submitFile(e){e&&(this.disableLinkField=!0,this.linkEmbeded.disable(),this.changeDetector.detectChanges())}uploadComplete(e){this.track.submission.files.push({url:e.new_filename,filename:e.original_filename}),this.showSubmissionReview()}uploadFailed(e){console.log("failed name: ",e.original_filename),console.log("failed link: ",e.new_filename)}startPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null),this.pollingInterval=setInterval(()=>{this.backendService.request("/learn/v1/assignment/upload/status","GET",{filename:this.screenRecordingFileName}).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{e.data.uploaded&&(clearInterval(this.pollingInterval),this.pollingInterval=null,this.track.submission.files.push({url:this.screenRecordingFileName,filename:this.screenRecordingFileName}),this.showSubmissionReview(),this.changeDetector.detectChanges())})},5e3)}showSubmissionReview(){this.submissionReview=!0,this.uploadAssignment=!1,this.assignmentStatus=!1,this.assignmentReview=!1,this.screenRecordingApp&&(this.screenRecordingFileName=Object(xi.o)()+".mp4",this.setScreenRecordingInitialParams())}ngAfterViewInit(){this.loaded.emit(!0)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}trackSubmit(){this.userInteractionService.track(fc.a.ASSIGNMENT_SUBMIT,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.ASSIGNMENT})}trackComment(){this.userInteractionService.track(fc.a.ASSIGNMENT_COMMENT,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.ASSIGNMENT})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.o),c.ec(I.a),c.ec(Ze.d),c.ec(Li.b),c.ec(ni.b),c.ec(c.i),c.ec(Sc.a),c.ec(j.a),c.ec(fc.c))},e.\u0275cmp=c.Yb({type:e,selectors:[["assignments-viewer"]],viewQuery:function(e,t){if(1&e&&c.nd(dd,1),2&e){let e;c.Rc(e=c.tc())&&(t.linkField=e.first)}},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded"},decls:5,vars:4,consts:[[1,"assignments__wraper","bg-white"],["class","assignments__header",4,"ngIf"],["class","assignments__body mdl-wrapper",4,"ngIf"],["class","assignments__header border-grey-light bg-grey-superlight",4,"ngIf"],[1,"assignments__header"],[1,"description","default-list-style","default-headings-styles","mdl-wrapper"],[1,"mdl-grid"],[1,"title","mdl-cell--12-col"],[1,"input-desc","mdl-cell--12-col"],[3,"content","lines","removeHtml","skipSanitization","more_label","less_label"],[1,"assignments__body","mdl-wrapper"],["class","upload-assignments",4,"ngIf"],["class","submission-review mdl-wrapper",4,"ngIf"],["class","assignment-status mdl-wrapper",4,"ngIf"],[1,"upload-assignments"],[1,"uploaders-wrapper"],[1,"single-uploader",3,"ngClass"],[3,"disabled","placeholder","allowed_extensions","max_file_size","collection","disabledField","uploading","uploaded","failed"],["class","screen-recording-uploader",4,"ngIf"],["class","additional-text title-regular text-grey-dark",4,"ngIf"],[3,"class",4,"ngIf"],[1,"screen-recording-uploader"],[3,"layout","uploadRequestPath","uploadSuccessPath","launchSuccess"],[1,"additional-text","title-regular","text-grey-dark"],[1,"snackbar","text-grey-mid"],[3,"id","type","label","disabledField","link_types","inputFormControl"],["linkField",""],[1,"control-buttons","button-cell"],[3,"type","text","state","click",4,"ngIf"],[3,"type","text","state","click"],[1,"submission-review","mdl-wrapper"],["class","mdl-grid file-view",4,"ngIf"],[1,"mdl-grid","file-view-controls"],[1,"mdl-cell","mdl-cell--12-col","button-cell"],[1,"mdl-cell","mdl-cell--12-col"],[3,"formGroup","ngSubmit"],[3,"id","type","label","errors","floating_label","inputFormControl"],[3,"type","name","value","label","floating_label","tinymce_options","inputFormControl"],[1,"mdl-grid","file-view"],[1,"mdl-cell","mdl-cell--6-col","text-main","button-cell"],[1,"video-submit-text","snackbar","text-grey-mid"],[3,"click"],[1,"mdl-cell","mdl-cell--6-col","text-grey-mid","lifeview-player"],[3,"url","bookmark"],[1,"mdl-cell","mdl-cell--6-col","text-grey-mid"],["class","mdl-cell mdl-cell--6-col text-main button-cell",4,"ngIf"],[1,"text-main",3,"click"],["class","cell-view border-grey-light mdl-cell--12-col",4,"ngFor","ngForOf"],[1,"cell-view","border-grey-light","mdl-cell--12-col"],[1,"cloud-icon"],[1,"zmdi","zmdi-cloud-done","text-grey-mid-permanent"],[1,"file-name-text","text-main"],[1,"delete-icon"],[1,"zmdi","zmdi-close","clickable","text-grey-mid-permanent",3,"click"],[1,"assignment-status","mdl-wrapper"],["class","status-box border-grey-light mdl-grid",4,"ngFor","ngForOf"],[1,"status-box","border-grey-light","mdl-grid"],[1,"mdl-cell--9-col"],[1,"title","text-main"],[1,"sub-title","text-grey-mid"],["class","status",3,"innerHtml",4,"ngIf"],["class","status-failed text-grey-mid",4,"ngIf"],["class","status-passed text-grey-mid",4,"ngIf"],[1,"status",3,"innerHtml"],[1,"status-failed","text-grey-mid"],[1,"zmdi","zmdi-assignment-alert","text-error","score-icon"],[1,"text-error","max-points"],[1,"max-points"],[1,"zmdi","zmdi-chevron-right","clickable","text-grey","see-more-arrow",3,"click"],[1,"status-passed","text-grey-mid"],[1,"zmdi","zmdi-assignment-check","text-positive-green","score-icon"],[1,"text-positive-green","received-points"],[1,"assignments__header","border-grey-light","bg-grey-superlight"],[1,"evaluator"],[1,"evaluation-info","mdl-grid"],[1,"mdl-cell","mdl-cell--1-col"],[1,"zmdi","zmdi-arrow-left","clickable","text-grey","back-to-assignments-list",3,"click"],[1,"mdl-cell","mdl-cell--5-col","mdl-grid"],[4,"ngIf"],[1,"mdl-cell","mdl-cell--6-col","mdl-grid"],[1,"mdl-cell","mdl-cell--12-col","title"],["class","status bg-white border-grey-light text-grey-mid",4,"ngIf"],[1,"avatar"],[3,"image_url","size","properties"],[1,"mdl-cell--9-col","evaluation-header"],[1,"evaluator-name"],["target","_top",1,"text-main",3,"href"],[1,"evaluated-on-information"],[1,"status","bg-white","border-grey-light","text-grey-mid"],[1,"points-text"],[1,"text-error","received-points"],[1,"state-text"],[1,"text-error"],[1,"text-positive-green"],[1,"assignments-review-video"],["class","mdl-cell--12-col",4,"ngIf"],[1,"assignment-review","mdl-grid"],["class","mdl-cell mdl-cell--12-col title",4,"ngIf"],["class","mdl-cell mdl-cell--12-col review-small-title",4,"ngIf"],["class","mdl-cell mdl-cell--12-col mdl-grid",4,"ngIf"],["class","mdl-cell--12-col mdl-grid",4,"ngIf"],[1,"mdl-cell--12-col"],[1,"iframe-assignment-wrap","bg-grey-dark"],[1,"iframe-assignment-body"],["class","cell-view border-grey-light mdl-cell mdl-cell--12-col mdl-grid",4,"ngFor","ngForOf"],[1,"cell-view","border-grey-light","mdl-cell","mdl-cell--12-col","mdl-grid"],[1,"cell-text","text-main"],["download","","target","_blank",1,"text-main",3,"href","innerHtml"],[1,"mdl-cell","mdl-cell--12-col","review-small-title"],[1,"mdl-cell","mdl-cell--12-col","mdl-grid"],[1,"mdl-cell","avatar","mdl-cell--1-col"],[1,"mdl-cell","mdl-cell--11-col","mdl-grid"],[1,"evaluator-comment-container"],[3,"content","more_label","less_label",4,"ngIf"],[3,"content","more_label","less_label"],["download","","target","_blank",1,"text-main",3,"href"],[1,"mdl-cell--12-col","mdl-grid"],[1,"avatar","mdl-cell--1-col"],[1,"mdl-cell--11-col","mdl-grid","user-comments"],[1,"mdl-cell","mdl-cell--1-col","avatar-small"],[1,"mdl-cell","mdl-cell--11-col"],[3,"type","name","value","label","floating_label","inputFormControl","tinymce_options"],[1,"mdl-cell","mdl-cell--12-col","button-cell","send-comment"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.ed(1,hd,8,11,"div",1),c.ed(2,jd,4,3,"div",2),c.ed(3,Vd,14,6,"div",3),c.ed(4,au,17,11,"div",2),c.jc()),2&e&&(c.Mb(1),c.Dc("ngIf",!t.assignmentReview),c.Mb(1),c.Dc("ngIf",!t.assignmentReview),c.Mb(1),c.Dc("ngIf",t.assignmentReview),c.Mb(1),c.Dc("ngIf",t.assignmentReview))},directives:[m.p,hi.a,m.n,ea.a,rd.a,Ct.a,Is.a,Ze.y,Ze.p,Ze.i,cd.a,ba.a,m.o,qi.a],pipes:[M.b,ld.a],encapsulation:2}),e})();var ru=i("Kf5b"),cu=i("2Rox"),lu=i("UIvz");let du=(()=>{class e{checkMandatoryQuestions(e,t){let i=this.generateTypeQuestionsObject(e,t),s=this.performValidations(i);return 0===s.length||(this.toggleRequiredLabelsColor(s),!1)}generateTypeQuestionsObject(e,t){let i={};for(let s=0;s<t.length;s++){let n=t[s];if(n.is_mandatory){let t=e[n.id_question];i.hasOwnProperty(n.type)||(i[n.type]=[]),i[n.type].push({question_id:Number(n.id_question),answer:t})}}return i}performValidations(e){let t=[];for(const i in e){let s=e[i];switch(i){case ne.q.CHOICE.toString():case ne.q.INLINE_CHOICE.toString():t=t.concat(this.validateSingleChoiceQuestions(s));break;case ne.q.EXTENDED_TEXT.toString():t=t.concat(this.validateExtendedTextQuestions(s));break;case ne.q.CHOICE_MULTIPLE.toString():t=t.concat(this.validateMultipleChoiceQuestions(s));break;case ne.q.LIKERT_SCALE.toString():t=t.concat(this.validateLikertQuestions(s))}}return t}validateSingleChoiceQuestions(e){let t=[];for(const i of e)i.answer||null===i.answer||t.push(i.question_id);return t}validateExtendedTextQuestions(e){let t=[];for(const i of e)null!==i.answer&&""!==String(i.answer).trim()||t.push(i.question_id);return t}validateMultipleChoiceQuestions(e){var t;let i=[];for(const s of e){let e=!1,n=null!==(t=s.answer)&&void 0!==t?t:{};for(const t in n)n.hasOwnProperty(t)&&null!==n[t]&&!1!==n[t]&&(e=!0);e||i.push(s.question_id)}return i}validateLikertQuestions(e){let t=[];for(const i of e){let e=!0,s=i.answer;for(const t in s)s.hasOwnProperty(t)&&!s[t]&&(e=!1);e||t.push(i.question_id)}return t}toggleRequiredLabelsColor(e){let t=document.getElementsByClassName("question-mandatory");for(let i=0;i<t.length;i++){let s=document.getElementsByClassName("question-mandatory")[i].getAttribute("data-question-id");e.includes(Number(s))?t[i].classList.add("question-mandatory-red"):t[i].classList.remove("question-mandatory-red")}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var uu=i("sVTu");function hu(e,t){if(1&e&&(c.kc(0,"div",4),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.hd(c.yc(2,1,e.type))}}function pu(e,t){if(1&e&&(c.kc(0,"span",5),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Nb("data-question-id",e.question_id),c.Mb(1),c.hd(c.yc(2,2,"(Required)"))}}function gu(e,t){if(1&e&&(c.fc(0,"div",6),c.xc(1,"sanitizeHtml")),2&e){const e=c.wc();c.Dc("innerHtml",c.yc(1,1,e.title),c.Wc)}}let mu=(()=>{class e{constructor(){this.is_mandatory=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["question-title"]],inputs:{title:"title",type:"type",is_mandatory:"is_mandatory",question_id:"question_id"},decls:5,vars:3,consts:[[1,"sub-question-title-block"],["class","type text-grey-mid type-right-shifted",4,"ngIf"],["class","text-grey-mid question-mandatory",4,"ngIf"],["class","question-title",3,"innerHtml",4,"ngIf"],[1,"type","text-grey-mid","type-right-shifted"],[1,"text-grey-mid","question-mandatory"],[1,"question-title",3,"innerHtml"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.ed(1,hu,3,3,"div",1),c.kc(2,"div"),c.ed(3,pu,3,4,"span",2),c.jc(),c.jc(),c.ed(4,gu,2,3,"div",3)),2&e&&(c.Mb(1),c.Dc("ngIf","title"!==t.type),c.Mb(2),c.Dc("ngIf",t.is_mandatory),c.Mb(1),c.Dc("ngIf",t.title))},directives:[m.p],pipes:[M.b,ji.a],encapsulation:2}),e})();const bu=function(e){return{"padding-bottom":e}},fu=function(e){return{expand:e}};function _u(e,t){if(1&e&&(c.kc(0,"div",6),c.fc(1,"div",7),c.xc(2,"sanitizeHtml"),c.kc(3,"div",8),c.fc(4,"dropdown",9),c.jc(),c.jc()),2&e){const e=t.$implicit,i=t.last,s=t.count,n=c.wc(2);c.Mb(1),c.Dc("innerHTML",c.yc(2,8,e.text),c.Wc),c.Mb(2),c.Dc("ngStyle",c.Ic(10,bu,n.isQuestionLast&&i&&n.getOpenedElementIndex()>=s-2?140:null))("ngClass",c.Ic(12,fu,n.isQuestionLast&&i&&n.getOpenedElementIndex()>0)),c.Mb(1),c.Dc("options",n.dropdownOptions)("name",e.id_answer)("enabled",n.enabled)("inputFormControl",n.basic_info.form_group.controls[n.basic_info.name].controls[e.id_answer])("value","")}}function vu(e,t){if(1&e&&(c.kc(0,"div",4),c.ed(1,_u,5,14,"div",5),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngForOf",e.additional_info.answers)}}function yu(e,t){if(1&e&&c.fc(0,"span",15),2&e){const e=c.wc().$implicit;c.Dc("innerHTML",e.title,c.Wc)}}function wu(e,t){if(1&e&&(c.kc(0,"div"),c.ed(1,yu,1,1,"span",18),c.jc()),2&e){const e=t.$implicit,i=c.wc().$implicit,s=c.wc(2);c.Mb(1),c.Dc("ngIf",s.user_status.id_answers&&e.id===s.user_status.id_answers[i.id_answer])}}function Cu(e,t){if(1&e&&(c.kc(0,"div",19),c.kc(1,"span",20),c.gd(2),c.xc(3,"t"),c.jc(),c.fc(4,"span",15),c.jc()),2&e){const e=c.wc().$implicit,t=c.wc(2);c.Mb(2),c.id("",c.yc(3,2,"_COMMENTS"),": "),c.Mb(2),c.Dc("innerHTML",t.feedback.comments[e.id_answer],c.Wc)}}const Su=function(e,t){return{"zmdi-check-circle text-positive-green":e,"zmdi-close-circle text-error":t}};function ku(e,t){if(1&e&&(c.kc(0,"div",12),c.kc(1,"div",13),c.fc(2,"i",14),c.fc(3,"span",15),c.jc(),c.kc(4,"div",13),c.ed(5,wu,2,1,"div",16),c.jc(),c.ed(6,Cu,5,4,"div",17),c.jc()),2&e){const e=t.$implicit,i=c.wc(2);c.Mb(2),c.Dc("ngClass",c.Jc(4,Su,i.user_status.id_answers&&i.user_status.id_answers[e.id_answer]&&i.user_status.is_correct[e.id_answer],i.user_status.id_answers&&i.user_status.id_answers[e.id_answer]&&!i.user_status.is_correct[e.id_answer])),c.Mb(1),c.Dc("innerHTML",e.text+" -",c.Wc),c.Mb(2),c.Dc("ngForOf",i.additional_info.associations),c.Mb(1),c.Dc("ngIf",i.feedback.comments&&i.feedback.comments[e.id_answer])}}function Tu(e,t){if(1&e&&(c.kc(0,"div",10),c.ed(1,ku,7,7,"div",11),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngForOf",e.additional_info.answers)}}function Iu(e,t){if(1&e&&c.fc(0,"span",15),2&e){const e=c.wc().$implicit;c.Dc("innerHTML",e.title,c.Wc)}}function xu(e,t){if(1&e&&(c.kc(0,"div"),c.ed(1,Iu,1,1,"span",18),c.jc()),2&e){const e=t.$implicit,i=c.wc().$implicit,s=c.wc(3);c.Mb(1),c.Dc("ngIf",e.id===s.feedback.correct_answers[i.id_answer])}}function Du(e,t){if(1&e&&(c.kc(0,"div",12),c.fc(1,"div",24),c.kc(2,"div",13),c.ed(3,xu,2,1,"div",16),c.jc(),c.jc()),2&e){const e=t.$implicit,i=c.wc(3);c.Mb(1),c.Dc("innerHTML",e.text+" -",c.Wc),c.Mb(2),c.Dc("ngForOf",i.additional_info.associations)}}const Ou=function(){return{category:"player"}};function Eu(e,t){if(1&e&&(c.kc(0,"div",23),c.gd(1),c.xc(2,"t"),c.ed(3,Du,4,2,"div",11),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.zc(2,2,"Correct answers:",c.Hc(5,Ou))," "),c.Mb(2),c.Dc("ngForOf",e.additional_info.answers)}}function Au(e,t){if(1&e&&(c.kc(0,"div",21),c.gd(1),c.xc(2,"t"),c.ed(3,Eu,4,6,"div",22),c.jc()),2&e){const e=c.wc();c.Mb(1),c.jd(" ",c.yc(2,3,"_SCORE"),": ",e.feedback.user_score," "),c.Mb(2),c.Dc("ngIf",e.feedback.correct_answers)}}let Pu=(()=>{class e{constructor(){this.isQuestionLast=!1,this.dropDownComponents=[],this.enabled=!0,this.type=M.a.t("standard","Associate")}getOpenedElementIndex(){for(let e=0;e<this.dropDownComponents.length;e++)if(this.dropDownComponents[e].isOpened)return e;return 0}ngOnInit(){this.dropdownOptions=[];for(let e=0;e<this.additional_info.associations.length;e++)this.dropdownOptions.push({label:this.additional_info.associations[e].title,value:this.additional_info.associations[e].id});this.basic_info.mode===uu.a.READONLY&&(this.enabled=!1)}ngAfterViewInit(){this.isQuestionLast&&Object(Ei.a)(this.associateWrapper.changes).pipe(Object(se.a)(1)).subscribe(()=>{this.dropDownComponents=this.associateWrapper.toArray()})}ngOnChanges(){const e={};for(let t=0;t<this.additional_info.answers.length;t++){const i=this.additional_info.answers[t].id_answer;e[i]=new Ze.e(this.user_status&&this.user_status.id_answers?this.user_status.id_answers[i]:"")}this.basic_info.form_group.addControl(this.basic_info.name,new Ze.h(e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["associate"]],viewQuery:function(e,t){if(1&e&&c.nd(ai.a,1),2&e){let e;c.Rc(e=c.tc())&&(t.associateWrapper=e)}},inputs:{additional_info:"additional_info",user_status:"user_status",feedback:"feedback",basic_info:"basic_info",isQuestionLast:"isQuestionLast"},features:[c.Kb],decls:4,vars:7,consts:[[3,"title","type","is_mandatory","question_id"],["class","associate-wrap",4,"ngIf"],["class","review-answers",4,"ngIf"],["class","review-block",4,"ngIf"],[1,"associate-wrap"],["class","row mdl-grid",4,"ngFor","ngForOf"],[1,"row","mdl-grid"],[1,"mdl-cell","mdl-cell--8-col","text-for-association",3,"innerHTML"],[1,"mdl-cell","mdl-cell--4-col","dropdown-choices",3,"ngStyle","ngClass"],[3,"options","name","enabled","inputFormControl","value"],[1,"review-answers"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"part-wrap"],[1,"zmdi",3,"ngClass"],[3,"innerHTML"],[4,"ngFor","ngForOf"],["class","comments",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"comments"],[1,"text-grey-mid"],[1,"review-block"],["class","correct-answers single-choice review-mode",4,"ngIf"],[1,"correct-answers","single-choice","review-mode"],[1,"part-wrap",3,"innerHTML"]],template:function(e,t){1&e&&(c.fc(0,"question-title",0),c.ed(1,vu,2,1,"div",1),c.ed(2,Tu,2,1,"div",2),c.ed(3,Au,4,5,"div",3)),2&e&&(c.Dc("title",t.basic_info.title)("type",t.type)("is_mandatory",t.basic_info.is_mandatory)("question_id",t.basic_info.name),c.Mb(1),c.Dc("ngIf","review"!==t.basic_info.mode),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode&&t.user_status.show_user_answers),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode))},directives:[mu,m.p,m.o,m.q,m.n,ai.a],pipes:[ji.a,M.b],styles:["[_nghost-%COMP%]     .dropdown-body {\n            max-height: 140px !important;\n        }"]}),e})();function Mu(e,t){if(1&e&&c.fc(0,"textfield",4),2&e){const e=c.wc();c.Ec("value",null==e.user_status?null:e.user_status.answer),c.Dc("floating_label","true")("disabledField",e.disabled)("inputFormControl",e.basic_info.form_group.controls[e.basic_info.name])}}function Lu(e,t){if(1&e&&(c.kc(0,"div",9),c.kc(1,"span",10),c.gd(2),c.xc(3,"t"),c.jc(),c.fc(4,"span",7),c.jc()),2&e){const e=c.wc(2);c.Mb(2),c.id("",c.yc(3,2,"_COMMENTS"),": "),c.Mb(2),c.Dc("innerHTML",e.feedback.comment,c.Wc)}}const ju=function(e,t){return{"zmdi-check-circle text-positive-green":e,"zmdi-close-circle text-error":t}};function Ru(e,t){if(1&e&&(c.kc(0,"div",5),c.fc(1,"i",6),c.fc(2,"span",7),c.ed(3,Lu,5,4,"div",8),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngClass",c.Jc(3,ju,e.user_answer&&e.user_status.is_correct,e.user_answer&&!e.user_status.is_correct)),c.Mb(1),c.Dc("innerHTML",e.user_status.answer,c.Wc),c.Mb(1),c.Dc("ngIf",e.feedback.comment)}}const Fu=function(){return{category:"player"}};function Nu(e,t){if(1&e&&(c.kc(0,"div",13),c.gd(1),c.xc(2,"t"),c.kc(3,"span"),c.gd(4),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.zc(2,2,"Correct answers:",c.Hc(5,Fu))," "),c.Mb(3),c.hd(e.feedback.correct_answer)}}function Uu(e,t){if(1&e&&(c.kc(0,"div",11),c.gd(1),c.xc(2,"t"),c.ed(3,Nu,5,6,"div",12),c.jc()),2&e){const e=c.wc();c.Mb(1),c.jd(" ",c.yc(2,3,"_SCORE"),": ",e.feedback.user_score," "),c.Mb(2),c.Dc("ngIf",e.feedback.correct_answer&&!e.user_status.is_correct)}}let zu=(()=>{class e{constructor(){this.disabled=!1}ngOnInit(){"readonly"===this.basic_info.mode&&(this.disabled=!0),!rt.a.isEmpty(this.user_status)&&this.user_status.answer&&(this.user_answer=this.user_status.answer.toLowerCase()),!rt.a.isEmpty(this.feedback)&&this.feedback.correct_answer&&(this.feedback_answer=this.feedback.correct_answer.toLowerCase())}ngOnChanges(){this.type=M.a.t("test","_QUEST_TEXT_ENTRY");let e=!rt.a.isEmpty(this.user_status)&&this.user_status.answer?this.user_status.answer:"";this.basic_info.form_group.addControl(this.basic_info.name,new Ze.e(e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["text-entry"]],inputs:{additional_info:"additional_info",user_status:"user_status",feedback:"feedback",basic_info:"basic_info"},features:[c.Kb],decls:4,vars:7,consts:[[3,"title","type","is_mandatory","question_id"],[3,"value","floating_label","disabledField","inputFormControl",4,"ngIf"],["class","review-content",4,"ngIf"],["class","review-block",4,"ngIf"],[3,"value","floating_label","disabledField","inputFormControl"],[1,"review-content"],[1,"zmdi",3,"ngClass"],[3,"innerHTML"],["class","comments",4,"ngIf"],[1,"comments"],[1,"text-grey-mid"],[1,"review-block"],["class","correct-answers single-choice review-mode",4,"ngIf"],[1,"correct-answers","single-choice","review-mode"]],template:function(e,t){1&e&&(c.fc(0,"question-title",0),c.ed(1,Mu,1,4,"textfield",1),c.ed(2,Ru,4,6,"div",2),c.ed(3,Uu,4,5,"div",3)),2&e&&(c.Dc("title",t.basic_info.title)("type",t.type)("is_mandatory",t.basic_info.is_mandatory)("question_id",t.basic_info.name),c.Mb(1),c.Dc("ngIf","review"!==t.basic_info.mode),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode&&t.user_status.show_user_answers),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode))},directives:[mu,m.p,Ct.a,m.n],pipes:[M.b],encapsulation:2}),e})();function qu(e,t){if(1&e&&c.fc(0,"radio",6),2&e){const e=t.$implicit,i=c.wc(2);c.Ec("id",e.id_answer),c.Dc("label",e.text)("enabled",i.enabled)("inputFormControl",i.form_control)("name",i.groupName)("value",e.id_answer)}}function Vu(e,t){if(1&e&&(c.kc(0,"div",4),c.ed(1,qu,1,6,"radio",5),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngForOf",e.additional_info.answers)}}function Bu(e,t){if(1&e&&(c.kc(0,"div",13),c.kc(1,"span",14),c.gd(2),c.xc(3,"t"),c.jc(),c.fc(4,"span",15),c.jc()),2&e){const e=c.wc().$implicit,t=c.wc(2);c.Mb(2),c.id("",c.yc(3,2,"_COMMENTS"),": "),c.Mb(2),c.Dc("innerHTML",t.feedback.comments[e.id_answer],c.Wc)}}const Gu=function(e,t){return{"correct text-positive-green":e,"wrong text-error":t}},Hu=function(e,t){return{"zmdi-check-circle":e,"zmdi-close-circle":t}};function $u(e,t){if(1&e&&(c.kc(0,"li"),c.kc(1,"span",9),c.fc(2,"i",10),c.jc(),c.fc(3,"span",11),c.xc(4,"sanitizeHtml"),c.ed(5,Bu,5,4,"div",12),c.jc()),2&e){const e=t.$implicit,i=c.wc(2);c.Mb(1),c.Dc("ngClass",c.Jc(6,Gu,e.id_answer===i.user_status.id_answer&&i.user_status.is_correct,e.id_answer===i.user_status.id_answer&&!i.user_status.is_correct)),c.Mb(1),c.Dc("ngClass",c.Jc(9,Hu,e.id_answer===i.user_status.id_answer&&i.user_status.is_correct,e.id_answer===i.user_status.id_answer&&!i.user_status.is_correct)),c.Mb(1),c.Dc("innerHtml",c.yc(4,4,e.text),c.Wc),c.Mb(2),c.Dc("ngIf",i.feedback.comments&&i.feedback.comments[e.id_answer]&&i.user_status.id_answer&&i.user_status.id_answer==e.id_answer)}}function Yu(e,t){if(1&e&&(c.kc(0,"div",7),c.kc(1,"ul"),c.ed(2,$u,6,12,"li",8),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.Dc("ngForOf",e.additional_info.answers)}}const Wu=function(e){return{"correct text-positive-green":e}},Qu=function(e){return{"zmdi-check-circle":e}};function Ku(e,t){if(1&e&&(c.kc(0,"li"),c.kc(1,"span",9),c.fc(2,"i",10),c.jc(),c.fc(3,"span",11),c.xc(4,"sanitizeHtml"),c.jc()),2&e){const e=t.$implicit,i=c.wc(3);c.Mb(1),c.Dc("ngClass",c.Ic(5,Wu,e.id_answer===i.feedback.correct_answer)),c.Mb(1),c.Dc("ngClass",c.Ic(7,Qu,e.id_answer===i.feedback.correct_answer)),c.Mb(1),c.Dc("innerHtml",c.yc(4,3,e.text),c.Wc)}}const Ju=function(){return{category:"player"}};function Xu(e,t){if(1&e&&(c.kc(0,"div",18),c.gd(1),c.xc(2,"t"),c.kc(3,"ul"),c.ed(4,Ku,5,9,"li",8),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.zc(2,2,"Correct answers:",c.Hc(5,Ju))," "),c.Mb(3),c.Dc("ngForOf",e.additional_info.answers)}}function Zu(e,t){if(1&e&&(c.kc(0,"div",16),c.gd(1),c.xc(2,"t"),c.ed(3,Xu,5,6,"div",17),c.jc()),2&e){const e=c.wc();c.Mb(1),c.jd(" ",c.yc(2,3,"_SCORE"),": ",e.feedback.user_score," "),c.Mb(2),c.Dc("ngIf",e.feedback.correct_answer&&!e.user_status.is_correct)}}let eh=0,th=(()=>{class e{constructor(){this.enabled=!1,eh++,this.groupName="group-"+eh,this.type=M.a.t("poll","_QUEST_CHOICE")}ngOnChanges(){this.basic_info.mode===uu.a.ANSWER&&(this.enabled=!0);const e=new Ze.e(!(rt.a.isEmpty(this.user_status)||!this.user_status.id_answer)&&this.user_status.id_answer);this.basic_info.form_group.addControl(this.basic_info.name,e),this.form_control=this.basic_info.form_group.controls[this.basic_info.name]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["single-choice"]],inputs:{additional_info:"additional_info",user_status:"user_status",feedback:"feedback",basic_info:"basic_info"},features:[c.Kb],decls:4,vars:7,consts:[[3,"title","type","is_mandatory","question_id"],["class","single-choice",4,"ngIf"],["class","single-choice review-mode",4,"ngIf"],["class","review-block",4,"ngIf"],[1,"single-choice"],[3,"id","label","enabled","inputFormControl","name","value",4,"ngFor","ngForOf"],[3,"id","label","enabled","inputFormControl","name","value"],[1,"single-choice","review-mode"],[4,"ngFor","ngForOf"],[1,"circle-icon",3,"ngClass"],[1,"zmdi",3,"ngClass"],[1,"title",3,"innerHtml"],["class","comments",4,"ngIf"],[1,"comments"],[1,"text-grey-mid"],[3,"innerHTML"],[1,"review-block"],["class","correct-answers single-choice review-mode",4,"ngIf"],[1,"correct-answers","single-choice","review-mode"]],template:function(e,t){1&e&&(c.fc(0,"question-title",0),c.ed(1,Vu,2,1,"div",1),c.ed(2,Yu,3,1,"div",2),c.ed(3,Zu,4,5,"div",3)),2&e&&(c.Dc("title",t.basic_info.title)("type",t.type)("is_mandatory",t.basic_info.is_mandatory)("question_id",t.basic_info.name),c.Mb(1),c.Dc("ngIf","review"!=t.basic_info.mode),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode&&t.user_status.show_user_answers),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode))},directives:[mu,m.p,m.o,Zn.a,m.n],pipes:[ji.a,M.b],encapsulation:2}),e})();var ih=i("ySfU");function sh(e,t){if(1&e&&c.fc(0,"checkbox",6),2&e){const e=t.$implicit,i=c.wc(2);c.Ec("id",e.id_answer),c.Dc("label",e.text)("inputFormControl",i.basicInfo.form_group.controls[i.basicInfo.name].controls[e.id_answer])("name",e.text)("value",e.id_answer)("enabled",i.enabled)("checked",!!i.userStatus.id_answers&&i.userStatus.id_answers.indexOf(e.id_answer+"")>-1)}}function nh(e,t){if(1&e&&(c.kc(0,"div",4),c.ed(1,sh,1,7,"checkbox",5),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngForOf",e.additionalInfo.answers)("ngForTrackBy",e.answersTrackByFunction)}}function ah(e,t){if(1&e&&(c.kc(0,"div",13),c.kc(1,"span",14),c.gd(2),c.xc(3,"t"),c.jc(),c.fc(4,"span",15),c.jc()),2&e){const e=c.wc().$implicit,t=c.wc(2);c.Mb(2),c.id("",c.yc(3,2,"_COMMENTS"),": "),c.Mb(2),c.Dc("innerHTML",t.feedback.comments[e.id_answer],c.Wc)}}const oh=function(e,t){return{"correct text-positive-green":e,"wrong text-error":t}},rh=function(e,t){return{"zmdi-check-circle":e,"zmdi-close-circle":t}};function ch(e,t){if(1&e&&(c.kc(0,"li"),c.kc(1,"span",9),c.fc(2,"i",10),c.jc(),c.fc(3,"span",11),c.ed(4,ah,5,4,"div",12),c.jc()),2&e){const e=t.$implicit,i=c.wc(2);c.Mb(1),c.Dc("ngClass",c.Jc(4,oh,i.userStatus.id_answers&&i.userStatus.id_answers.indexOf(e.id_answer)>-1&&i.userStatus.is_correct[e.id_answer],i.userStatus.id_answers&&i.userStatus.id_answers.indexOf(e.id_answer)>-1&&!i.userStatus.is_correct[e.id_answer])),c.Mb(1),c.Dc("ngClass",c.Jc(7,rh,i.userStatus.id_answers&&i.userStatus.id_answers.indexOf(e.id_answer)>-1&&i.userStatus.is_correct[e.id_answer],i.userStatus.id_answers&&i.userStatus.id_answers.indexOf(e.id_answer)>-1&&!i.userStatus.is_correct[e.id_answer])),c.Mb(1),c.Dc("innerHtml",e.text,c.Wc),c.Mb(1),c.Dc("ngIf",i.feedback.comments&&i.feedback.comments[e.id_answer]&&i.userStatus.id_answers&&i.userStatus.id_answers.indexOf(e.id_answer)>-1)}}function lh(e,t){if(1&e&&(c.kc(0,"div",7),c.kc(1,"ul"),c.ed(2,ch,5,10,"li",8),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.Dc("ngForOf",e.additionalInfo.answers)("ngForTrackBy",e.answersTrackByFunction)}}const dh=function(e){return{"correct text-positive-green":e}},uh=function(e){return{"zmdi-check-circle":e}};function hh(e,t){if(1&e&&(c.kc(0,"li"),c.kc(1,"span",9),c.fc(2,"i",10),c.jc(),c.fc(3,"span",11),c.xc(4,"sanitizeHtml"),c.jc()),2&e){const e=t.$implicit,i=c.wc(3);c.Mb(1),c.Dc("ngClass",c.Ic(5,dh,i.feedback.correct_answers.indexOf(e.id_answer)>-1)),c.Mb(1),c.Dc("ngClass",c.Ic(7,uh,i.feedback.correct_answers.indexOf(e.id_answer)>-1)),c.Mb(1),c.Dc("innerHtml",c.yc(4,3,e.text),c.Wc)}}const ph=function(){return{category:"player"}};function gh(e,t){if(1&e&&(c.kc(0,"div",18),c.gd(1),c.xc(2,"t"),c.kc(3,"ul"),c.ed(4,hh,5,9,"li",8),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.zc(2,3,"Correct answers:",c.Hc(6,ph))," "),c.Mb(3),c.Dc("ngForOf",e.additionalInfo.answers)("ngForTrackBy",e.answersTrackByFunction)}}function mh(e,t){if(1&e&&(c.kc(0,"div",16),c.gd(1),c.xc(2,"t"),c.ed(3,gh,5,7,"div",17),c.jc()),2&e){const e=c.wc();c.Mb(1),c.jd(" ",c.yc(2,3,"_SCORE"),": ",e.feedback.user_score," "),c.Mb(2),c.Dc("ngIf",e.feedback.correct_answers&&e.showCorrectAnswersOnReview)}}let bh=(()=>{class e{constructor(){this.type=M.a.t("test","_QUEST_CHOICE_MULTIPLE"),this.enabled=!1,this.showCorrectAnswersOnReview=!0}ngOnChanges(){this.userStatus.id_answers&&this.userStatus.id_answers.length&&(this.userStatus.id_answers=this.userStatus.id_answers.map(e=>String(e))),this.additionalInfo.answers&&this.additionalInfo.answers.length&&(this.additionalInfo.answers=this.additionalInfo.answers.map(e=>Object.assign(Object.assign({},e),{id_answer:String(e.id_answer)}))),this.feedback&&this.feedback.correct_answers&&this.feedback.correct_answers.length&&(this.feedback.correct_answers=this.feedback.correct_answers.map(e=>String(e)));const e={};for(const t of this.additionalInfo.answers){const i=t.id_answer,s=!!(this.userStatus.id_answers&&this.userStatus.id_answers.length>0)&&-1!==this.userStatus.id_answers.indexOf(String(i));e[i]=new Ze.e(s)}this.showCorrectAnswersOnReview=this.canShowCorrectAnswers(),this.basicInfo.form_group.addControl(this.basicInfo.name,new Ze.h(e))}ngOnInit(){this.basicInfo.mode===uu.a.ANSWER&&(this.enabled=!0)}canShowCorrectAnswers(){if(this.userStatus.is_correct){let e=0;for(const t in this.userStatus.is_correct)this.userStatus.is_correct[t]&&e++;if(this.feedback.correct_answers)return this.feedback.correct_answers.length!==e}return!0}answersTrackByFunction(e,t){return t.id_answer}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["multiple-choice"]],inputs:{additionalInfo:"additionalInfo",userStatus:"userStatus",feedback:"feedback",basicInfo:"basicInfo"},features:[c.Kb],decls:4,vars:7,consts:[[3,"title","type","is_mandatory","question_id"],["class","single-choice",4,"ngIf"],["class","multiple-choice review-mode",4,"ngIf"],["class","review-block multiple",4,"ngIf"],[1,"single-choice"],[3,"id","label","inputFormControl","name","value","enabled","checked",4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","label","inputFormControl","name","value","enabled","checked"],[1,"multiple-choice","review-mode"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"circle-icon",3,"ngClass"],[1,"zmdi",3,"ngClass"],[1,"title",3,"innerHtml"],["class","comments",4,"ngIf"],[1,"comments"],[1,"text-grey-mid"],[3,"innerHTML"],[1,"review-block","multiple"],["class","correct-answers single-choice review-mode",4,"ngIf"],[1,"correct-answers","single-choice","review-mode"]],template:function(e,t){1&e&&(c.fc(0,"question-title",0),c.ed(1,nh,2,2,"div",1),c.ed(2,lh,3,2,"div",2),c.ed(3,mh,4,5,"div",3)),2&e&&(c.Dc("title",t.basicInfo.title)("type",t.type)("is_mandatory",t.basicInfo.is_mandatory)("question_id",t.basicInfo.name),c.Mb(1),c.Dc("ngIf","review"!==t.basicInfo.mode),c.Mb(1),c.Dc("ngIf","review"===t.basicInfo.mode&&t.userStatus.show_user_answers),c.Mb(1),c.Dc("ngIf","review"===t.basicInfo.mode))},directives:[mu,m.p,m.o,ih.a,m.n],pipes:[M.b,ji.a],encapsulation:2}),e})();function fh(e,t){if(1&e&&c.fc(0,"textareaField",4),2&e){const e=c.wc();c.Wb("invisible",!e.isEditorReady),c.Dc("type","boxed")("label",e.label)("name",e.basic_info.name)("floating_label",e.floating_label)("inputFormControl",e.control)("disabledField",e.disabled)("focus_on_load",!0)("tinymce_options",e.tinymce_options)}}function _h(e,t){if(1&e&&c.fc(0,"textareaField",5),2&e){const e=c.wc();c.Dc("type","mdl")("label","")("name",e.basic_info.name)("value",e.user_status.answer)("floating_label",e.floating_label)("inputFormControl",e.control)("disabledField",!0)("tinymce_options",e.tinymce_options)}}function vh(e,t){if(1&e&&(c.kc(0,"div",6),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.jd(" ",c.yc(2,2,"_SCORE"),": ",e.feedback.user_score," ")}}var yh=0;let wh=(()=>{class e{constructor(e){this.cdr=e,this.isEditorReady=!1,this.floating_label=!0,this.disabled=!1,yh++;const t=E.b.getInstance().getLangByShortCode(o.a.getInstance().language).is_rtl;this.tinymce_options={directionality:t?"rtl":"ltr",selector:"#textarea-boxed"+yh,menubar:!1,statusbar:!1,toolbar:!1,plugins:["autoresize"],autoresize_min_height:70,init_instance_callback:e=>{this.isEditorReady=!0,this.cdr.detectChanges()}},this.type=M.a.t("poll","_QUEST_EXTENDED_TEXT")}ngOnInit(){this.basic_info.mode===uu.a.READONLY&&(this.disabled=!0)}ngOnChanges(){let e=null;if(!rt.a.isEmpty(this.user_status))if(this.user_status.answer){const t=document.createElement("textarea");t.innerHTML=this.user_status.answer,this.user_status.answer=t.value,e=this.user_status.answer}else this.user_status.text&&(e=this.user_status.text);this.basic_info.form_group.addControl(this.basic_info.name,new Ze.e(e)),this.control=this.basic_info.form_group.controls[this.basic_info.name],this.label=M.a.t("standard","Answer here")}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["extended-text"]],inputs:{additional_info:"additional_info",user_status:"user_status",feedback:"feedback",basic_info:"basic_info"},features:[c.Kb],decls:4,vars:7,consts:[[3,"title","type","is_mandatory","question_id"],[3,"invisible","type","label","name","floating_label","inputFormControl","disabledField","focus_on_load","tinymce_options",4,"ngIf"],[3,"type","label","name","value","floating_label","inputFormControl","disabledField","tinymce_options",4,"ngIf"],["class","review-block",4,"ngIf"],[3,"type","label","name","floating_label","inputFormControl","disabledField","focus_on_load","tinymce_options"],[3,"type","label","name","value","floating_label","inputFormControl","disabledField","tinymce_options"],[1,"review-block"]],template:function(e,t){1&e&&(c.fc(0,"question-title",0),c.ed(1,fh,1,10,"textareaField",1),c.ed(2,_h,1,8,"textareaField",2),c.ed(3,vh,3,4,"div",3)),2&e&&(c.Dc("title",t.basic_info.title)("type",t.type)("is_mandatory",t.basic_info.is_mandatory)("question_id",t.basic_info.name),c.Mb(1),c.Dc("ngIf","review"!==t.basic_info.mode),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode&&t.user_status.show_user_answers),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode))},directives:[mu,m.p,cd.a],pipes:[M.b],encapsulation:2}),e})();const Ch=["inlineDropDownElementWrapper"];function Sh(e,t){if(1&e&&(c.fc(0,"div",6,7),c.xc(2,"sanitizeHtml")),2&e){const e=c.wc();c.Sb("question-with-token",e.hasEnoughSpaceToOpenDownwards()?"":" open-dropdown-up","","review"!==e.basic_info.mode&&e.enabled?"":" review-question-with-token",""),c.Dc("innerHtml",c.yc(2,5,e.concatenatedHTMLElements),c.Wc)}}function kh(e,t){if(1&e&&c.fc(0,"dropdown",8,9),2&e){const e=c.wc();c.Dc("options",e.dropdownOptions)("floating_label",!0)("label",e.label)("name",e.basic_info.name)("enabled",e.enabled)("inputFormControl",e.basic_info.form_group.controls[e.basic_info.name])}}function Th(e,t){if(1&e&&(c.kc(0,"div",16),c.kc(1,"span",17),c.gd(2),c.xc(3,"t"),c.jc(),c.fc(4,"span",18),c.jc()),2&e){const e=c.wc().$implicit,t=c.wc(2);c.Mb(2),c.id("",c.yc(3,2,"_COMMENTS"),": "),c.Mb(2),c.Dc("innerHTML",t.feedback.comments[e.id_answer],c.Wc)}}const Ih=function(e,t,i){return{"correct text-positive-green":e,neutral:t,"wrong text-error":i}},xh=function(e,t){return{"zmdi-check-circle":e,"zmdi-close-circle":t}};function Dh(e,t){if(1&e&&(c.kc(0,"li"),c.kc(1,"span",12),c.fc(2,"i",13),c.jc(),c.fc(3,"span",14),c.xc(4,"sanitizeHtml"),c.ed(5,Th,5,4,"div",15),c.jc()),2&e){const e=t.$implicit,i=c.wc(2);c.Mb(1),c.Dc("ngClass",c.Kc(6,Ih,i.isAnswerCorrect(e),!i.feedback.correct_answer&&i.user_status&&e.id_answer===i.user_status.id_answer,i.isAnswerWrong(e))),c.Mb(1),c.Dc("ngClass",c.Jc(10,xh,i.isAnswerCorrect(e),i.isAnswerWrong(e))),c.Mb(1),c.Dc("innerHTML",c.yc(4,4,e.text),c.Wc),c.Mb(2),c.Dc("ngIf",i.feedback.correct_answer&&i.feedback.comments&&i.feedback.comments[e.id_answer])}}function Oh(e,t){if(1&e&&(c.kc(0,"div",10),c.kc(1,"ul"),c.ed(2,Dh,6,13,"li",11),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.Dc("ngForOf",e.additional_info.answers)}}const Eh=function(e){return{"correct text-positive-green":e}},Ah=function(e){return{"zmdi-check-circle":e}};function Ph(e,t){if(1&e&&(c.kc(0,"li"),c.kc(1,"span",12),c.fc(2,"i",13),c.jc(),c.fc(3,"span",22),c.xc(4,"sanitizeHtml"),c.jc()),2&e){const e=t.$implicit,i=c.wc(3);c.Mb(1),c.Dc("ngClass",c.Ic(5,Eh,e.id_answer===i.feedback.correct_answer)),c.Mb(1),c.Dc("ngClass",c.Ic(7,Ah,e.id_answer===i.feedback.correct_answer)),c.Mb(1),c.Dc("innerHtml",c.yc(4,3,e.text),c.Wc)}}const Mh=function(){return{category:"player"}};function Lh(e,t){if(1&e&&(c.kc(0,"div",21),c.gd(1),c.xc(2,"t"),c.kc(3,"ul"),c.ed(4,Ph,5,9,"li",11),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.zc(2,2,"Correct answers:",c.Hc(5,Mh))," "),c.Mb(3),c.Dc("ngForOf",e.additional_info.answers)}}function jh(e,t){if(1&e&&(c.kc(0,"div",19),c.gd(1),c.xc(2,"t"),c.ed(3,Lh,5,6,"div",20),c.jc()),2&e){const e=c.wc();c.Mb(1),c.jd(" ",c.yc(2,3,"_SCORE"),": ",e.feedback.user_score," "),c.Mb(2),c.Dc("ngIf",e.feedback.correct_answer&&!e.user_status.is_correct)}}const Rh=function(e,t){return{expand:e,"last-question":t}};let Fh=(()=>{class e{constructor(){this.isQuestionLast=!1,this.dropDownComponents=[],this.dropdownOptions=[],this.enabled=!0,this.concatenatedHTMLElements="",this.openDropdownUpwards=!1,this.disposableListeners=[],this.label=M.a.t("standard","Choose something..."),this.type=M.a.t("standard","Inline choice")}ngOnChanges(){const e=!(rt.a.isEmpty(this.user_status)||!this.user_status.id_answer)&&this.user_status.id_answer;if(this.basic_info.form_group.addControl(this.basic_info.name,new Ze.e(e)),this.additional_info.answers.length>0)for(let t=0;t<this.additional_info.answers.length;t++)this.dropdownOptions.push({label:this.additional_info.answers[t].text,value:this.additional_info.answers[t].id_answer})}ngOnInit(){this.basic_info.mode===ne.p.READONLY&&(this.enabled=!1);const e=this.basic_info.title.split("[answer]");e.length>1&&this.createDropdownHTMLForShortcode(e)}ngAfterViewInit(){this.isQuestionLast&&Object(Ei.a)(this.associateWrapper.changes).pipe(Object(se.a)(1)).subscribe(()=>{this.dropDownComponents=this.associateWrapper.toArray()}),this.concatenatedHTMLElements.length>0&&this.attachEventListenersToCustomDropDown()}createDropdownHTMLForShortcode(e){for(let t=0;t<e.length;t++)this.concatenatedHTMLElements+=e[t],0===t&&(this.concatenatedHTMLElements+="review"!==this.basic_info.mode||this.user_status.show_user_answers?this.fakeDropDownUIComponentForInlineAnswer():"<span>*****</span>")}fakeDropDownUIComponentForInlineAnswer(){const e=document,t=e.createElement("ul");t.className="list-options";for(let c=0;c<this.dropdownOptions.length;c++){const i=e.createElement("li");i.className="bg-hover-main text-hover-white text-grey-dark",0!==c||"review"===this.basic_info.mode||this.user_status?("review"!==this.basic_info.mode&&this.user_status&&this.dropdownOptions[c].value===this.user_status.id_answer||"review"===this.basic_info.mode&&this.basic_info.form_group.controls[this.basic_info.name].value===this.dropdownOptions[c].value)&&(i.className+=" is-selected"):i.className+=" is-selected",i.innerHTML=this.dropdownOptions[c].label,i.setAttribute("rel",this.dropdownOptions[c].value),t.innerHTML+=i.outerHTML}const i=e.createElement("div");i.className="dropdown-items",i.innerHTML=t.outerHTML;const s=e.createElement("div");s.className="dropdown-body",s.innerHTML=i.outerHTML;const n=e.createElement("div");n.className="dropdown-head text-grey-dark border-grey";const a=e.createElement("span");if(a.className="dropdown-title text-grey-dark","review"!==this.basic_info.mode)if(this.user_status&&this.user_status.hasOwnProperty("id_answer")){const e=this.dropdownOptions.filter(e=>e.value===this.user_status.id_answer)[0];a.innerHTML=e.label,this.basic_info.form_group.controls[this.basic_info.name].setValue(e.value)}else a.innerHTML=this.dropdownOptions[0].label,this.basic_info.form_group.controls[this.basic_info.name].setValue(this.dropdownOptions[0].value);else a.innerHTML=this.returnOptionLabel(this.basic_info.form_group.controls[this.basic_info.name].value);n.innerHTML=a.outerHTML;const o=e.createElement("div");o.className="dropdown",o.innerHTML=n.outerHTML,o.innerHTML+=s.outerHTML;const r=e.createElement("div");return r.className="dropdown-wrapper",r.innerHTML+=o.outerHTML,r.outerHTML}handleDropDownToggle(e,t,i){i&&i.stopPropagation(),e.nativeElement.querySelector(".dropdown").classList[t]("dropdown-opened"),e.nativeElement.querySelector(".dropdown-head").classList[t]("border-main")}hasEnoughSpaceToOpenDownwards(){return 0===this.concatenatedHTMLElements.length||!this.inlineElement||!this.inlineElement.nativeElement.classList.contains("open-dropdown-up")&&window.outerHeight>this.inlineElement.nativeElement.querySelector(".dropdown-items").getBoundingClientRect().bottom+100}attachEventListenersToCustomDropDown(){"review"===this.basic_info.mode&&this.user_status.show_user_answers||Object(Ei.a)(this.inlineDropDownElementWrapper.changes).pipe(Object(se.a)(1)).subscribe(()=>{this.inlineDropDownElementWrapper.toArray().forEach(e=>{this.disposableListeners.push({element:e.nativeElement.querySelector(".dropdown"),listener:this.handleDropDownToggle.bind(this,e,"toggle")}),this.disposableListeners.push({element:document,listener:this.handleDropDownToggle.bind(this,e,"remove")});const t=e.nativeElement.querySelectorAll("ul.list-options li");for(const i of t)this.disposableListeners.push({element:i,listener:this.chooseDropDownOption.bind(this,e)});this.handleEventListeners("addEventListener")})})}returnOptionLabel(e){const t=rt.a.head(this.dropdownOptions.filter(t=>t.value===e));return t?t.label:""}getDropDownTitleElement(e){return e.classList.contains("dropdown-wrapper")?e.querySelector(".dropdown-title"):e.parentElement?this.getDropDownTitleElement(e.parentElement):null}handleEventListeners(e){if(0!==this.disposableListeners.length)for(const t of this.disposableListeners)t.element[e]("click",t.listener)}chooseDropDownOption(e,t){var i;t.stopPropagation();const s=Number(t.currentTarget.getAttribute("rel")),n=this.getDropDownTitleElement(t.srcElement.parentElement);n&&(n.innerHTML=this.returnOptionLabel(s));const a=(null===(i=t.currentTarget.parentElement)||void 0===i?void 0:i.children)||[],o=a.length;for(let r=0;r<o;r++)a[r].classList.remove("is-selected");t.currentTarget.classList.add("is-selected"),this.basic_info.form_group.controls[this.basic_info.name].setValue(s),this.handleDropDownToggle(e,"remove",t)}isAnswerCorrect(e){return e.id_answer===this.user_status.id_answer&&this.user_status.is_correct}isAnswerWrong(e){return e.id_answer===this.user_status.id_answer&&!this.user_status.is_correct}ngOnDestroy(){this.handleEventListeners("removeEventListener")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["inline-choice"]],viewQuery:function(e,t){if(1&e&&(c.nd(Ch,1),c.nd(ai.a,1),c.nd(Ch,1)),2&e){let e;c.Rc(e=c.tc())&&(t.inlineElement=e.first),c.Rc(e=c.tc())&&(t.associateWrapper=e),c.Rc(e=c.tc())&&(t.inlineDropDownElementWrapper=e)}},inputs:{additional_info:"additional_info",user_status:"user_status",feedback:"feedback",basic_info:"basic_info",isQuestionLast:"isQuestionLast"},features:[c.Kb],decls:6,vars:12,consts:[[3,"title","type","is_mandatory","question_id"],[1,"inline-dropdown-item",3,"ngClass"],[3,"class","innerHtml",4,"ngIf"],[3,"options","floating_label","label","name","enabled","inputFormControl",4,"ngIf"],["class","single-choice review-mode",4,"ngIf"],["class","review-block",4,"ngIf"],[3,"innerHtml"],["inlineDropDownElementWrapper",""],[3,"options","floating_label","label","name","enabled","inputFormControl"],["inlineElement",""],[1,"single-choice","review-mode"],[4,"ngFor","ngForOf"],[1,"circle-icon",3,"ngClass"],[1,"zmdi",3,"ngClass"],[1,"title",3,"innerHTML"],["class","comments",4,"ngIf"],[1,"comments"],[1,"text-grey-mid"],[3,"innerHTML"],[1,"review-block"],["class","correct-answers single-choice review-mode",4,"ngIf"],[1,"correct-answers","single-choice","review-mode"],[1,"title",3,"innerHtml"]],template:function(e,t){1&e&&(c.fc(0,"question-title",0),c.kc(1,"div",1),c.ed(2,Sh,3,7,"div",2),c.ed(3,kh,2,6,"dropdown",3),c.jc(),c.ed(4,Oh,3,1,"div",4),c.ed(5,jh,4,5,"div",5)),2&e&&(c.Dc("title",0!==(null==t.concatenatedHTMLElements?null:t.concatenatedHTMLElements.length)?null:t.basic_info.title)("type",t.type)("is_mandatory",t.basic_info.is_mandatory)("question_id",t.basic_info.name),c.Mb(1),c.Dc("ngClass",c.Jc(9,Rh,t.isQuestionLast&&(null==t.dropDownComponents[0]?null:t.dropDownComponents[0].isOpened),t.isQuestionLast)),c.Mb(1),c.Dc("ngIf",0!==(null==t.concatenatedHTMLElements?null:t.concatenatedHTMLElements.length)),c.Mb(1),c.Dc("ngIf","review"!==t.basic_info.mode&&0===(null==t.concatenatedHTMLElements?null:t.concatenatedHTMLElements.length)),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode&&t.user_status.show_user_answers),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode))},directives:[mu,m.n,m.p,ai.a,m.o],pipes:[ji.a,M.b],encapsulation:2}),e})();const Nh=["fibQuestionContainer"];function Uh(e,t){1&e&&(c.kc(0,"th"),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.hd(c.yc(2,1,"Answers")))}const zh=function(){return{category:"test"}};function qh(e,t){1&e&&(c.kc(0,"th"),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.hd(c.zc(2,1,"Correct answers",c.Hc(4,zh))))}const Vh=function(e,t){return{"text-positive-green":e,"text-error":t}};function Bh(e,t){if(1&e&&(c.kc(0,"td",11),c.gd(1),c.jc()),2&e){const e=c.wc().$implicit,t=c.wc(2);c.Dc("ngClass",c.Jc(2,Vh,t.user_status.is_correct&&t.user_status.is_correct[e.id],!(t.user_status.is_correct&&t.user_status.is_correct[e.id]))),c.Mb(1),c.id(" ",e.id&&t.user_status.id_answers&&t.user_status.id_answers[e.id]?t.user_status.id_answers[e.id]:""," ")}}function Gh(e,t){if(1&e&&c.fc(0,"td",1),2&e){const e=c.wc().$implicit,t=c.wc(2);c.Dc("innerHTML",t.feedback.correct_answers[e.id],c.Wc)}}function Hh(e,t){if(1&e&&c.fc(0,"td",1),2&e){const e=c.wc().$implicit,t=c.wc(2);c.Dc("innerHTML",t.feedback.comments[e.id],c.Wc)}}function $h(e,t){if(1&e&&(c.kc(0,"tr"),c.ed(1,Bh,2,5,"td",9),c.ed(2,Gh,1,1,"td",10),c.ed(3,Hh,1,1,"td",10),c.jc()),2&e){const e=t.$implicit,i=c.wc(2);c.Mb(1),c.Dc("ngIf",i.user_status.show_user_answers),c.Mb(1),c.Dc("ngIf",i.feedback.correct_answers&&e.id&&i.feedback.correct_answers[e.id]),c.Mb(1),c.Dc("ngIf",i.feedback.comments&&e.id&&i.feedback.comments[e.id])}}function Yh(e,t){if(1&e&&(c.kc(0,"div",4),c.gd(1),c.xc(2,"t"),c.kc(3,"div",5),c.kc(4,"table"),c.kc(5,"tr",6),c.ed(6,Uh,3,3,"th",7),c.ed(7,qh,3,5,"th",7),c.kc(8,"th"),c.gd(9),c.xc(10,"t"),c.jc(),c.jc(),c.ed(11,$h,4,3,"tr",8),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(1),c.jd(" ",c.yc(2,6,"_SCORE"),": ",e.feedback.user_score," "),c.Mb(5),c.Dc("ngIf",e.user_status.show_user_answers),c.Mb(1),c.Dc("ngIf",e.feedback.correct_answers),c.Mb(2),c.hd(c.yc(10,8,"_COMMENTS")),c.Mb(2),c.Dc("ngForOf",e.slices)}}let Wh=(()=>{class e{constructor(){this.disabled=!1,this.slices=[],this.concatenatedHTMLElements="",this.controls={},this.type=M.a.t("test","_QUEST_FILL_IN_THE_BLANK")}ngOnChanges(){this.slices=this.findMatch(this.basic_info.title),this.createStringHTMLForQuestion(),this.basic_info.form_group.addControl(this.basic_info.name,new Ze.h(this.controls))}createStringHTMLForQuestion(){for(let e=0;e<this.slices.length;e++)switch(this.slices[e].type){case"string":this.concatenatedHTMLElements+=this.slices[e].text;break;case"placeholder":const t=document.createElement("span");t.id=this.slices[e].id,t.className="mdl-textfield mdl-js-textfield bg-after-main docebo-textfield text-grey-dark border-grey fill-the-blank";const i=document.createElement("input");if(i.id=this.slices[e].id,i.name=this.slices[e].id,i.type="text",i.setAttribute("value","text"),i.className="mdl-textfield__input docebo-input-text text-grey-dark",t.innerHTML=i.outerHTML,this.concatenatedHTMLElements+=t.outerHTML,"review"===this.basic_info.mode&&!this.user_status.show_user_answers){const t=document.createElement("span");t.id=this.slices[e].id,t.innerHTML="*****",this.concatenatedHTMLElements+=t.outerHTML}}}findMatch(e){let t=[];if(0===e.length)return t;const i=e.match(/(\[answ\s\d+\])/g);let s,n,a,o;if(null!==i){s=e.substr(0,e.indexOf(i[0])),n=i[0],a=e.substr(e.indexOf(i[0])+i[0].length,e.length);const r=rt.a.isEmpty(this.user_status.id_answers)?"":this.user_status.id_answers[i[0]];this.controls[n]=new Ze.e(r),t.push({type:"string",text:s}),t.push({type:"placeholder",text:n,id:i[0]}),o=this.findMatch(a),o.length>0&&(t=t.concat(o))}else t=t.concat({type:"string",text:e});return t}ngOnInit(){this.basic_info.mode!==uu.a.READONLY&&this.basic_info.mode!==uu.a.REVIEW||(this.disabled=!0)}ngAfterViewInit(){this.childrenDetector=Object(Ei.a)(this.fibQuestionContainer.changes),this.childrenDetector.pipe(Object(se.a)(1)).subscribe(()=>{this.fibQuestionContainer.toArray().forEach(e=>{const t=e.nativeElement.getElementsByTagName("input");for(let i=0;i<t.length;i++)t[i].value=this.basic_info.form_group.controls[this.basic_info.name].controls[t[i].id].value,t[i].disabled=!!this.user_status.show_user_answers||this.disabled,t[i].disabled&&(t[i].style.color="rgba(0, 0, 0, 0.26)"),t[i].addEventListener("blur",this.onBlur.bind(this)),t[i].addEventListener("focus",this.onFocus.bind(this)),t[i].addEventListener("change",this.onInputChange.bind(this))})})}onFocus(e){e.target.classList.add("text-main"),e.target.classList.add("border-main")}onBlur(e){e.target.classList.contains("border-main")&&e.target.classList.remove("border-main"),e.target.classList.contains("text-main")&&e.target.classList.remove("text-main")}onInputChange(e){this.basic_info.form_group.controls[this.basic_info.name].controls[e.target.id].setValue(e.target.value)}ngOnDestroy(){this.fibQuestionContainer.toArray().forEach(e=>{const t=e.nativeElement.getElementsByTagName("input");for(let i=0;i<t.length;i++)t[i]&&(t[i].removeEventListener("blur",this.onBlur.bind(this)),t[i].removeEventListener("focus",this.onFocus.bind(this)),t[i].addEventListener("change",this.onInputChange.bind(this)))})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["fill-in-the-blank"]],viewQuery:function(e,t){if(1&e&&c.nd(Nh,1),2&e){let e;c.Rc(e=c.tc())&&(t.fibQuestionContainer=e)}},inputs:{additional_info:"additional_info",user_status:"user_status",feedback:"feedback",basic_info:"basic_info"},features:[c.Kb],decls:5,vars:8,consts:[[3,"title","type","is_mandatory","question_id"],[3,"innerHTML"],["fibQuestionContainer",""],["class","review-block",4,"ngIf"],[1,"review-block"],[1,"correct-answers","review-mode"],[1,"head"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngClass"]],template:function(e,t){1&e&&(c.fc(0,"question-title",0),c.fc(1,"div",1,2),c.xc(3,"sanitizeHtml"),c.ed(4,Yh,12,10,"div",3)),2&e&&(c.Dc("title","\xa0")("type",t.type)("is_mandatory",t.basic_info.is_mandatory)("question_id",t.basic_info.name),c.Mb(1),c.Dc("innerHTML",c.yc(3,6,t.concatenatedHTMLElements),c.Wc),c.Mb(3),c.Dc("ngIf","review"===t.basic_info.mode))},directives:[mu,m.p,m.o,m.n],pipes:[ji.a,M.b],encapsulation:2}),e})();function Qh(e,t){if(1&e){const e=c.lc();c.kc(0,"single-upload",4),c.sc("uploaded",function(){return c.Vc(e),c.wc().fileUploaded()}),c.jc()}if(2&e){const e=c.wc();c.bd("form"),c.Dc("placeholder",e.placeholder)("inputFormControl",e.basic_info.form_group.controls[e.basic_info.name])("allowed_extensions",e.allowed_extensions)("collection","test")("disabledField",e.disabled)("disabledDelete",e.disabledDelete)("keepOriginalFilename",!0)("validateFileName",!0)}}function Kh(e,t){if(1&e&&(c.kc(0,"div",5),c.gd(1),c.jc()),2&e){const e=c.wc();c.Mb(1),c.hd(null==e.user_status?null:e.user_status.answer)}}function Jh(e,t){if(1&e&&(c.kc(0,"div",6),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.jd(" ",c.yc(2,2,"_SCORE"),": ",e.feedback.user_score," ")}}let Xh=(()=>{class e{constructor(){this.additional_info=null,this.disabledDelete=!1,this.allowed_extensions=["3gp","3gp2","avi","bmp","csv","doc","docx","epub","flv","gif","ico","jpeg","jpg","mkv","mov","mp3","mp4","mpeg","mpeg4","mpg","mpg2","ogg","ogm","pdf","png","ppsx","ppt","pptx","srt","txt","vtt","wmv","xls","xlsx","zip"],this.disabled=!1,this.placeholder=M.a.t("standard","Upload your file..."),this.type=M.a.t("standard","File upload")}ngOnInit(){this.user_status.answer&&(this.placeholder=this.user_status.answer),this.basic_info.mode===uu.a.READONLY&&(this.disabled=!0,this.disabledDelete=!0)}fileUploaded(){this.addFormGroupControl()}ngOnChanges(){this.addFormGroupControl()}addFormGroupControl(){const e=!(rt.a.isEmpty(this.user_status)||!this.user_status.answer)&&this.user_status.answer;this.basic_info.form_group.addControl(this.basic_info.name,new Ze.e(e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["file-upload"]],inputs:{additional_info:"additional_info",user_status:"user_status",feedback:"feedback",basic_info:"basic_info",disabledDelete:"disabledDelete"},features:[c.Kb],decls:4,vars:7,consts:[[3,"title","type","is_mandatory","question_id"],[3,"placeholder","inputFormControl","allowed_extensions","collection","disabledField","disabledDelete","keepOriginalFilename","validateFileName","style","uploaded",4,"ngIf"],["class","review-mode text-main",4,"ngIf"],["class","review-block",4,"ngIf"],[3,"placeholder","inputFormControl","allowed_extensions","collection","disabledField","disabledDelete","keepOriginalFilename","validateFileName","uploaded"],[1,"review-mode","text-main"],[1,"review-block"]],template:function(e,t){1&e&&(c.fc(0,"question-title",0),c.ed(1,Qh,1,10,"single-upload",1),c.ed(2,Kh,2,1,"div",2),c.ed(3,Jh,3,4,"div",3)),2&e&&(c.Dc("title",t.basic_info.title)("type",t.type)("is_mandatory",t.basic_info.is_mandatory)("question_id",t.basic_info.name),c.Mb(1),c.Dc("ngIf","review"!==t.basic_info.mode),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode&&t.user_status.show_user_answers),c.Mb(1),c.Dc("ngIf","review"===t.basic_info.mode))},directives:[mu,m.p,ea.a],pipes:[M.b],encapsulation:2}),e})();function Zh(e,t){if(1&e&&(c.kc(0,"th",4),c.gd(1),c.jc()),2&e){const e=t.$implicit;c.Mb(1),c.hd(e.title)}}function ep(e,t){if(1&e&&(c.kc(0,"td",6),c.fc(1,"radio",7),c.jc()),2&e){const e=t.$implicit,i=c.wc(),s=i.index,n=i.$implicit,a=c.wc();c.Mb(1),c.Gc("name","",s,"-",n.id_scale_item,""),c.Dc("label","")("inputFormControl",a.basic_info.form_group.controls[a.basic_info.name].controls[n.id_scale_item])("value",e.id_scale_item)("enabled",a.enabled)}}function tp(e,t){if(1&e&&(c.kc(0,"tr"),c.kc(1,"td"),c.gd(2),c.jc(),c.ed(3,ep,2,6,"td",5),c.jc()),2&e){const e=t.$implicit,i=c.wc();c.Mb(2),c.hd(e.label),c.Mb(1),c.Dc("ngForOf",i.additional_info.scale)}}let ip=(()=>{class e{constructor(e){this.fb=e,this.feedback=null,this.enabled=!0,this.type=M.a.t("standard","Likert scale")}ngOnChanges(){"review"===this.basic_info.mode&&(this.enabled=!1);var e={};for(let t=0;t<this.additional_info.questions.length;t++){let i=this.additional_info.questions[t].id_scale_item,s=!(rt.a.isEmpty(this.user_status.answers)||!this.user_status.answers[i])&&this.user_status.answers[i];e[i]=new Ze.e(s)}this.basic_info.form_group.addControl(this.basic_info.name,new Ze.h(e))}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Ze.d))},e.\u0275cmp=c.Yb({type:e,selectors:[["likert-scale"]],inputs:{additional_info:"additional_info",user_status:"user_status",feedback:"feedback",basic_info:"basic_info"},features:[c.Kb],decls:8,vars:6,consts:[[3,"title","type","is_mandatory","question_id"],[1,"playLikertScale"],["class","scaleCheckboxHeader",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"scaleCheckboxHeader"],["class","scaleCheckBox",4,"ngFor","ngForOf"],[1,"scaleCheckBox"],[3,"name","label","inputFormControl","value","enabled"]],template:function(e,t){1&e&&(c.fc(0,"question-title",0),c.kc(1,"table",1),c.kc(2,"thead"),c.kc(3,"tr"),c.fc(4,"th"),c.ed(5,Zh,2,1,"th",2),c.jc(),c.jc(),c.kc(6,"tbody"),c.ed(7,tp,4,2,"tr",3),c.jc(),c.jc()),2&e&&(c.Dc("title",t.basic_info.title)("type",t.type)("is_mandatory",t.basic_info.is_mandatory)("question_id",t.basic_info.name),c.Mb(5),c.Dc("ngForOf",t.additional_info.scale),c.Mb(2),c.Dc("ngForOf",t.additional_info.questions))},directives:[mu,m.o,Zn.a],encapsulation:2}),e})();function sp(e,t){if(1&e&&c.fc(0,"question-title",6),2&e){const e=c.wc();c.Dc("type",e.type)("title",e.title)}}function np(e,t){if(1&e&&c.fc(0,"associate",7),2&e){const e=c.wc();c.Dc("basic_info",e.basic_info)("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)("isQuestionLast",e.isQuestionLast)}}function ap(e,t){if(1&e&&c.fc(0,"text-entry",8),2&e){const e=c.wc();c.Dc("basic_info",e.basic_info)("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)}}function op(e,t){if(1&e&&c.fc(0,"single-choice",8),2&e){const e=c.wc();c.Dc("basic_info",e.basic_info)("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)}}function rp(e,t){if(1&e&&c.fc(0,"multiple-choice",9),2&e){const e=c.wc();c.Dc("basicInfo",e.basic_info)("additionalInfo",e.additional_info)("userStatus",e.user_status)("feedback",e.feedback)}}function cp(e,t){if(1&e&&c.fc(0,"extended-text",8),2&e){const e=c.wc();c.Dc("basic_info",e.basic_info)("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)}}function lp(e,t){if(1&e&&c.fc(0,"inline-choice",7),2&e){const e=c.wc();c.Dc("basic_info",e.basic_info)("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)("isQuestionLast",e.isQuestionLast)}}function dp(e,t){if(1&e&&c.fc(0,"fill-in-the-blank",8),2&e){const e=c.wc();c.Dc("basic_info",e.basic_info)("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)}}function up(e,t){if(1&e&&c.fc(0,"file-upload",8),2&e){const e=c.wc();c.Dc("basic_info",e.basic_info)("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)}}function hp(e,t){if(1&e&&c.fc(0,"likert-scale",10),2&e){const e=c.wc();c.Dc("basic_info",e.basic_info)("form_group",e.form_control)("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)}}let pp=(()=>{class e{constructor(e){this.toggleService=e,this.is_mandatory=!1,this.mode=uu.a.ANSWER,this.type="associate",this.additional_info=null,this.user_status=null,this.feedback=null,this.isQuestionLast=!1,this.isQuestionFirst=!1}ngOnChanges(){this.basic_info={type:this.type,title:this.title,is_mandatory:this.is_mandatory,name:this.id_question,mode:this.mode,form_group:this.form_control}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["questions-render"]],inputs:{id_question:"id_question",title:"title",is_mandatory:"is_mandatory",mode:"mode",type:"type",additional_info:"additional_info",user_status:"user_status",feedback:"feedback",form_control:"form_control",isQuestionLast:"isQuestionLast",isQuestionFirst:"isQuestionFirst"},features:[c.Kb],decls:11,vars:11,consts:[[1,"question-block","default-headings-styles",3,"id"],[3,"type","title",4,"ngIf"],[3,"basic_info","additional_info","user_status","feedback","isQuestionLast",4,"ngIf"],[3,"basic_info","additional_info","user_status","feedback",4,"ngIf"],[3,"basicInfo","additionalInfo","userStatus","feedback",4,"ngIf"],[3,"basic_info","form_group","additional_info","user_status","feedback",4,"ngIf"],[3,"type","title"],[3,"basic_info","additional_info","user_status","feedback","isQuestionLast"],[3,"basic_info","additional_info","user_status","feedback"],[3,"basicInfo","additionalInfo","userStatus","feedback"],[3,"basic_info","form_group","additional_info","user_status","feedback"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.ed(1,sp,1,2,"question-title",1),c.ed(2,np,1,5,"associate",2),c.ed(3,ap,1,4,"text-entry",3),c.ed(4,op,1,4,"single-choice",3),c.ed(5,rp,1,4,"multiple-choice",4),c.ed(6,cp,1,4,"extended-text",3),c.ed(7,lp,1,5,"inline-choice",2),c.ed(8,dp,1,4,"fill-in-the-blank",3),c.ed(9,up,1,4,"file-upload",3),c.ed(10,hp,1,5,"likert-scale",5),c.jc()),2&e&&(c.Ec("id",t.id_question),c.Mb(1),c.Dc("ngIf","title"===t.type),c.Mb(1),c.Dc("ngIf","associate"===t.type),c.Mb(1),c.Dc("ngIf","text_entry"===t.type),c.Mb(1),c.Dc("ngIf","choice"===t.type),c.Mb(1),c.Dc("ngIf","choice_multiple"===t.type),c.Mb(1),c.Dc("ngIf","extended_text"===t.type),c.Mb(1),c.Dc("ngIf","inline_choice"===t.type),c.Mb(1),c.Dc("ngIf","fill_in_the_blank"===t.type),c.Mb(1),c.Dc("ngIf","upload"===t.type),c.Mb(1),c.Dc("ngIf","likert_scale"===t.type))},directives:[m.p,mu,Pu,zu,th,bh,wh,Fh,Wh,Xh,ip],encapsulation:2}),e})();function gp(e,t){if(1&e){const e=c.lc();c.kc(0,"div",3),c.kc(1,"div",4),c.kc(2,"div",5),c.gd(3),c.jc(),c.kc(4,"rectangular-button",6),c.sc("click",function(t){return c.Vc(e),c.wc().begin(t)}),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(3),c.hd(e.current_chapter.name),c.Mb(1),c.Dc("properties",e.startButtonParams)("state","normal")("buttonType","submit")}}const mp=function(e){return{"not-title":e}};function bp(e,t){if(1&e&&(c.kc(0,"div",16),c.fc(1,"questions-render",17),c.jc()),2&e){const e=t.$implicit,i=c.wc(2);c.Dc("ngClass",c.Ic(9,mp,"title"!==e.type)),c.Mb(1),c.Dc("id_question",e.id_question)("title",e.title)("score",0)("type",e.type)("is_mandatory",e.is_mandatory)("form_control",i.surveyForm.controls[i.curPage])("additional_info",e.additional_info)("user_status",e.user_status)}}function fp(e,t){if(1&e){const e=c.lc();c.kc(0,"rectangular-button",18),c.sc("click",function(){c.Vc(e);const t=c.wc(2);return t.moveToPage(t.curPage-1,"prev")}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("properties",e.prevButtonParams)("state","normal")("buttonType","button")}}function _p(e,t){if(1&e){const e=c.lc();c.kc(0,"rectangular-button",19),c.sc("click",function(){c.Vc(e);const t=c.wc(2);return t.moveToPage(t.curPage+1,"next")}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("properties",e.nextButtonParams)("state","normal")("buttonType","button")}}function vp(e,t){if(1&e&&c.fc(0,"rectangular-button",20),2&e){const e=c.wc(2);c.Dc("properties",e.submitButtonParams)("state",e.submitButtonState)("buttonType","submit")}}function yp(e,t){if(1&e){const e=c.lc();c.kc(0,"form",7),c.sc("ngSubmit",function(t){return c.Vc(e),c.wc().submitSurvey(t)}),c.ed(1,bp,2,11,"div",8),c.kc(2,"div",9),c.kc(3,"div",10),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"div",11),c.kc(7,"rectangular-button",12),c.sc("click",function(t){return c.Vc(e),c.wc().leave(t)}),c.jc(),c.ed(8,fp,1,3,"rectangular-button",13),c.ed(9,_p,1,3,"rectangular-button",14),c.ed(10,vp,1,3,"rectangular-button",15),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Dc("formGroup",e.surveyForm),c.Mb(1),c.Dc("ngForOf",e.pages[e.curPage].questions),c.Mb(3),c.hd(c.yc(5,9,e.paginationTitle)),c.Mb(3),c.Dc("properties",e.leaveButtonParams)("state","normal")("buttonType","button"),c.Mb(1),c.Dc("ngIf",e.pages[e.curPage].hasPrev),c.Mb(1),c.Dc("ngIf",e.pages[e.curPage].hasNext),c.Mb(1),c.Dc("ngIf",!e.pages[e.curPage].hasNext)}}const wp=function(){return{category:"poll"}};function Cp(e,t){if(1&e&&(c.kc(0,"div",21),c.kc(1,"div",22),c.kc(2,"div",23),c.gd(3),c.jc(),c.fc(4,"div",24),c.xc(5,"sanitizeHtml"),c.jc(),c.kc(6,"div",25),c.fc(7,"em",26),c.kc(8,"div",27),c.gd(9),c.xc(10,"t"),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(3),c.hd(e.current_chapter.name),c.Mb(1),c.Dc("innerHTML",c.yc(5,3,e.current_chapter.description),c.Wc),c.Mb(5),c.hd(c.zc(10,5,"_POLL_COMPLETED",c.Hc(8,wp)))}}let Sp=(()=>{class e{constructor(e,t,i){this.toggleService=t,this.mandatoryQuestionsUtils=i,this.startPlaying=new c.q,this.leaveSurvey=new c.q,this.goToPage=new c.q,this.surveyCompleted=new c.q,this.survey_statuses=cu.a,this.startButtonParams={text:M.a.t("poll","_POLL_BEGIN"),colorScheme:"positive-green",typeStyle:"filled"},this.leaveButtonParams={text:M.a.t("test","Leave Survey"),colorScheme:"grey-light",typeStyle:"filled"},this.submitButtonParams={text:M.a.t("standard","Submit"),colorScheme:"positive-green",typeStyle:"filled"},this.submitButtonState="normal",this.prevButtonParams={text:M.a.t("standard","Prev page"),colorScheme:"main",typeStyle:"filled"},this.nextButtonParams={text:M.a.t("standard","Next page"),colorScheme:"main",typeStyle:"filled"}}ngOnInit(){}begin(){this.startPlaying.emit(!0)}leave(){this.leaveSurvey.emit()}moveToPage(e,t){(this.mandatoryQuestionsUtils.checkMandatoryQuestions(this.surveyForm.getRawValue()[this.curPage],this.pages[this.curPage].questions)||"prev"===t)&&this.goToPage.emit({id:e,is_dirty:this.surveyForm.dirty,user_answers:this.surveyForm.getRawValue()[this.curPage]})}submitSurvey(e){e.preventDefault(),this.mandatoryQuestionsUtils.checkMandatoryQuestions(this.surveyForm.getRawValue()[this.curPage],this.pages[this.curPage].questions)&&(this.submitButtonState="disabled",this.surveyCompleted.emit({is_dirty:!0,user_answers:this.surveyForm.getRawValue()[this.curPage]}))}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Ze.d),c.ec(u.g),c.ec(du))},e.\u0275cmp=c.Yb({type:e,selectors:[["survey-viewer"]],inputs:{current_chapter:"current_chapter",survey_status:"survey_status",curPage:"curPage",pages:"pages",paginationTitle:"paginationTitle",surveyForm:"surveyForm"},outputs:{startPlaying:"startPlaying",leaveSurvey:"leaveSurvey",goToPage:"goToPage",surveyCompleted:"surveyCompleted"},decls:3,vars:3,consts:[["class","begin-wrap",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","submitted-wrap",4,"ngIf"],[1,"begin-wrap"],[1,"begin-survey"],[1,"title"],[1,"navigate","next",3,"properties","state","buttonType","click"],[3,"formGroup","ngSubmit"],["class","question-block",3,"ngClass",4,"ngFor","ngForOf"],[1,"survey-footer"],[1,"pagination-info"],[1,"pagination-nav"],[1,"leave_survey",3,"properties","state","buttonType","click"],["class","prev_page",3,"properties","state","buttonType","click",4,"ngIf"],["class","next_page",3,"properties","state","buttonType","click",4,"ngIf"],["class","submit",3,"properties","state","buttonType",4,"ngIf"],[1,"question-block",3,"ngClass"],["feedback","question.feedback",3,"id_question","title","score","type","is_mandatory","form_control","additional_info","user_status"],[1,"prev_page",3,"properties","state","buttonType","click"],[1,"next_page",3,"properties","state","buttonType","click"],[1,"submit",3,"properties","state","buttonType"],[1,"submitted-wrap"],[1,"submitted-wrap__info"],[1,"title","text-main","text-bigger-icons"],[1,"description",3,"innerHTML"],[1,"submitted-wrap__thanks","bg-grey-superlight"],[1,"zmdi","zmdi-check-circle","text-positive-green"],[1,"text","text-bigger-icons"]],template:function(e,t){1&e&&(c.ed(0,gp,5,4,"div",0),c.ed(1,yp,11,11,"form",1),c.ed(2,Cp,11,9,"div",2)),2&e&&(c.Dc("ngIf",t.survey_status==t.survey_statuses.TO_BE_STARTED),c.Mb(1),c.Dc("ngIf",t.survey_status==t.survey_statuses.STARTED&&t.pages[t.curPage]),c.Mb(1),c.Dc("ngIf",t.survey_status==t.survey_statuses.SUBMITTED))},directives:[m.p,ts.a,Ze.y,Ze.p,Ze.i,m.o,m.n,pp],pipes:[M.b,ji.a],encapsulation:2}),e})(),kp=(()=>{class e{constructor(e,t,i,s,n){this._store=e,this.surveyPlayerActions=t,this.ref=i,this.fb=s,this.userInteractionService=n,this.completed=new c.q,this.loaded=new c.q,this.is_submitted=!1,this._store.select(ae.p).subscribe(e=>{if(void 0!==e)if(e.status==cu.a.SUBMITTED)this.is_submitted=!0,this.survey_status=e.status,this.current_chapter&&this.completed.emit(this.current_chapter.id);else{this.survey_status=e.status,this.curPage=e.curPage,this.pages=e.pages;let t={};for(let e in this.pages)t[e]=s.group({});this.surveyForm=s.group(t),this.pages[this.curPage]&&(this.paginationTitle=M.a.t("standard","Page {cur} of {all}",{cur:this.pages[this.curPage].index,all:this.pages.length}))}})}ngOnInit(){this.current_chapter.status==String($t.e.COMPLETED)?this.survey_status=cu.a.SUBMITTED:this._store.dispatch(this.surveyPlayerActions.loadLaunchParams(this.chapter_viewer.launch_params))}startPlaying(e){this._store.dispatch(this.surveyPlayerActions.beginSurvey({idOrg:this.current_chapter.id,is_dirty:!0,submitted:!1,user_answers:[]})),setTimeout(()=>{this.loaded.emit(!0),this.userInteractionService.track(fc.a.SURVEY_START,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.SURVEY})},300)}leaveSurvey(e){this._store.dispatch(this.surveyPlayerActions.leaveSurvey()),this.userInteractionService.track(fc.a.SURVEY_LEAVE,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.SURVEY})}goToPage(e){e=rt.a.assign({},e,{idOrg:this.current_chapter.id,submitted:!1,user_answers:lu.a.formatUserEntry(e.user_answers)}),this._store.dispatch(this.surveyPlayerActions.goToPage(e)),this.userInteractionService.track(fc.a.SURVEY_GO_TO_PAGE,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.SURVEY,pageNumber:e.id}),ru.a.scrollTo(0,0)}surveyCompleted(e){e=rt.a.assign({},e,{idOrg:this.current_chapter.id,submitted:!0,user_answers:lu.a.formatUserEntry(e.user_answers)}),this._store.dispatch(this.surveyPlayerActions.surveyCompleted(e)),this.userInteractionService.track(fc.a.SURVEY_SUBMIT,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.SURVEY})}ngAfterViewInit(){this.loaded.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)(c.ec(w.e),c.ec(Ts.g),c.ec(c.i),c.ec(Ze.d),c.ec(fc.c))},e.\u0275cmp=c.Yb({type:e,selectors:[["survey-player"]],inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded"},decls:1,vars:6,consts:[[3,"current_chapter","survey_status","curPage","pages","paginationTitle","surveyForm","startPlaying","leaveSurvey","goToPage","surveyCompleted"]],template:function(e,t){1&e&&(c.kc(0,"survey-viewer",0),c.sc("startPlaying",function(e){return t.startPlaying(e)})("leaveSurvey",function(e){return t.leaveSurvey(e)})("goToPage",function(e){return t.goToPage(e)})("surveyCompleted",function(e){return t.surveyCompleted(e)}),c.jc()),2&e&&c.Dc("current_chapter",t.current_chapter)("survey_status",t.survey_status)("curPage",t.curPage)("pages",t.pages)("paginationTitle",t.paginationTitle)("surveyForm",t.surveyForm)},directives:[Sp],encapsulation:2}),e})();var Tp=i("3E0/"),Ip=i("wqqH"),xp=i("Ozuj"),Dp=i("+K5A");const Op=["bottomRow"],Ep=["pushBottomRow"],Ap=["formContainer"],Pp=["dialog"],Mp=function(e,t,i){return{"not-title":e,"bg-grey-superlight":t,"bg-white":i}};function Lp(e,t){if(1&e&&(c.kc(0,"div",6),c.fc(1,"questions-render",7),c.jc()),2&e){const e=t.$implicit,i=t.index,s=t.odd,n=t.even,a=t.last,o=c.wc();c.Dc("ngClass",c.Kc(10,Mp,"title"!==e.type,s,n)),c.Mb(1),c.Dc("id_question",e.id_question)("title",e.title)("mode",e.mode)("type",e.type)("form_control",o.quizForm.controls[i])("additional_info",e.additional_info)("user_status",e.user_status)("feedback",e.feedback)("isQuestionLast",a)}}function jp(e,t){1&e&&c.fc(0,"div",8,9)}function Rp(e,t){if(1&e&&c.fc(0,"rectangular-button",21),2&e){const e=c.wc(2);c.Dc("properties",e.saveAndLeaveButtonParams)("state",e.clicked?"disabled":"normal")("buttonType","button")("click",e.saveAndLeave.bind(e))}}function Fp(e,t){if(1&e&&c.fc(0,"rectangular-button",22),2&e){const e=c.wc(2);c.Dc("properties",e.leaveButtonParams)("state","normal")("buttonType","button")("click",e.openModal.bind(e))}}function Np(e,t){if(1&e&&c.fc(0,"rectangular-button",23),2&e){const e=c.wc(2);c.Dc("properties",e.prevButtonParams)("state",e.clicked?"disabled":"normal")("buttonType","button")("click",e.prevPage.bind(e))}}function Up(e,t){if(1&e&&c.fc(0,"rectangular-button",24),2&e){const e=c.wc(2);c.Dc("properties",e.nextButtonParams)("state",e.clicked?"disabled":"normal")("buttonType","button")("click",e.nextPage.bind(e))}}function zp(e,t){if(1&e&&c.fc(0,"rectangular-button",25),2&e){const e=c.wc(2);c.Dc("properties",e.submitButtonParams)("state",e.clicked?"disabled":"normal")("buttonType","submit")("click",e.submit.bind(e))}}function qp(e,t){if(1&e&&(c.kc(0,"div",10,11),c.kc(2,"div",12),c.gd(3),c.xc(4,"t"),c.jc(),c.kc(5,"div",13),c.ed(6,Rp,1,4,"rectangular-button",14),c.ed(7,Fp,1,4,"rectangular-button",15),c.fc(8,"dialog-component",16,17),c.ed(10,Np,1,4,"rectangular-button",18),c.ed(11,Up,1,4,"rectangular-button",19),c.ed(12,zp,1,4,"rectangular-button",20),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(3),c.hd(c.yc(4,13,e.paginationTitle)),c.Mb(3),c.Dc("ngIf",e.settings.allow_partial_submission),c.Mb(1),c.Dc("ngIf",1==e.current_page),c.Mb(1),c.Dc("id",e.dialogParams.id)("width",e.dialogParams.width)("height",e.dialogParams.height)("title",e.dialogParams.title)("content",e.dialogParams.content)("type",e.dialogParams.type)("actions",e.dialogParams.actions),c.Mb(2),c.Dc("ngIf",e.hasPrevPage),c.Mb(1),c.Dc("ngIf",e.hasNextPage),c.Mb(1),c.Dc("ngIf",!e.hasNextPage)}}function Vp(e,t){if(1&e){const e=c.lc();c.kc(0,"div",26,11),c.kc(2,"rectangular-button",22),c.sc("click",function(t){return c.Vc(e),c.wc().leaveReview(t)}),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(2),c.Dc("properties",e.backToResultsButtonParams)("state","normal")("buttonType",e.clicked?"disabled":"button")}}let Bp=(()=>{class e{constructor(){this.processing=!1,this.saveAndExit=new c.q,this.leavePlayMode=new c.q,this.leaveReviewMode=new c.q,this.movePrevPage=new c.q,this.moveNextPage=new c.q,this.submitQuiz=new c.q,this.loaded=new c.q,this.quizStatuses=ne.u,this.clicked=!1,this.saveAndLeaveButtonParams={text:M.a.t("test","_TEST_SAVE_KEEP"),colorScheme:"positive-green",typeStyle:"filled"},this.leaveButtonParams={text:M.a.t("test","Leave Test"),colorScheme:"grey-mid",typeStyle:"filled"},this.dialogParams={id:"leave_quiz",width:450,height:200,title:M.a.t("test","Leave Test?"),content:this.leaveDialogContentMessage,type:"confirmation",actions:[{type:"delete",properties:{text:M.a.t("standard","Leave")},handler:e=>{this.leavePlayMode.emit(this.quizForm.getRawValue()),e.close()}},{type:"cancel",properties:{text:M.a.t("standard","Cancel")},handler:e=>{e.close()}}]},this.submitButtonParams={text:M.a.t("standard","Submit (Test Completed)"),colorScheme:"positive-green",typeStyle:"filled"},this.prevButtonParams={text:M.a.t("standard","Prev page"),colorScheme:"main",typeStyle:"filled"},this.nextButtonParams={text:M.a.t("test","_TEST_NEXT_PAGE"),colorScheme:"main",typeStyle:"filled"},this.backToResultsButtonParams={text:M.a.t("test","Back To Results"),colorScheme:"main",typeStyle:"filled"},this.element=document.getElementById("scrollableContent")}ngOnChanges(e){this.clicked=this.processing,e.leaveDialogContentMessage&&(this.dialogParams.content=this.leaveDialogContentMessage)}ngAfterViewInit(){this.loaded.emit(!0),this.dialogParams.content=this.leaveDialogContentMessage;const e=document.querySelector(".chapter-viewer__wrapper.standalone");e.scrollHeight>e.clientHeight&&e.classList.add("scrolable"),this.pushBottomRow&&this.bottomRow&&(this.pushBottomRow.nativeElement.style.height=`${this.bottomRow.nativeElement.offsetHeight}px`)}leaveReview(){this.clicked=!0,this.leaveReviewMode.emit(!0)}saveAndLeave(){this.clicked=!0,this.saveAndExit.emit(this.quizForm.getRawValue())}openModal(){this.dialog.open()}prevPage(){this.clicked=!0,this.movePrevPage.emit(this.quizForm.getRawValue()),Object(Tc.i)(this.element,this.element.offsetTop,300)}nextPage(){this.clicked=!0,this.moveNextPage.emit(this.quizForm.getRawValue()),Object(Tc.i)(this.element,this.element.offsetTop,300)}submit(){this.clicked=!0,this.submitQuiz.emit(this.quizForm.getRawValue())}trackByQuestion(e,t){return t.id_question}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["quiz-viewer"]],viewQuery:function(e,t){if(1&e&&(c.nd(Op,1),c.nd(Ep,1),c.nd(Ap,3),c.nd(Pp,1)),2&e){let e;c.Rc(e=c.tc())&&(t.bottomRow=e.first),c.Rc(e=c.tc())&&(t.pushBottomRow=e.first),c.Rc(e=c.tc())&&(t.formContainer=e.first),c.Rc(e=c.tc())&&(t.dialog=e.first)}},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",questions:"questions",quizForm:"quizForm",hasPrevPage:"hasPrevPage",hasNextPage:"hasNextPage",processing:"processing",paginationTitle:"paginationTitle",status:"status",current_page:"current_page",settings:"settings",leaveDialogContentMessage:"leaveDialogContentMessage"},outputs:{saveAndExit:"saveAndExit",leavePlayMode:"leavePlayMode",leaveReviewMode:"leaveReviewMode",movePrevPage:"movePrevPage",moveNextPage:"moveNextPage",submitQuiz:"submitQuiz",loaded:"loaded"},features:[c.Kb],decls:6,vars:6,consts:[[1,"boxes-shadow",3,"formGroup"],["formContainer",""],["class","question-block",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["class","push-quiz-bottom-row",4,"ngIf"],["class","bottom-row bg-white",4,"ngIf"],["class","bottom-row bg-white boxes-shadow",4,"ngIf"],[1,"question-block",3,"ngClass"],[3,"id_question","title","mode","type","form_control","additional_info","user_status","feedback","isQuestionLast"],[1,"push-quiz-bottom-row"],["pushBottomRow",""],[1,"bottom-row","bg-white"],["bottomRow",""],[1,"pagination-info"],[1,"pagination-nav"],["class","save_n_leave",3,"properties","state","buttonType","click",4,"ngIf"],["class","leave_quiz",3,"properties","state","buttonType","click",4,"ngIf"],[3,"id","width","height","title","content","type","actions"],["dialog",""],["class","prev_page",3,"properties","state","buttonType","click",4,"ngIf"],["class","next_page",3,"properties","state","buttonType","click",4,"ngIf"],["class","submit",3,"properties","state","buttonType","click",4,"ngIf"],[1,"save_n_leave",3,"properties","state","buttonType","click"],[1,"leave_quiz",3,"properties","state","buttonType","click"],[1,"prev_page",3,"properties","state","buttonType","click"],[1,"next_page",3,"properties","state","buttonType","click"],[1,"submit",3,"properties","state","buttonType","click"],[1,"bottom-row","bg-white","boxes-shadow"]],template:function(e,t){1&e&&(c.kc(0,"form",0,1),c.ed(2,Lp,2,14,"div",2),c.ed(3,jp,2,0,"div",3),c.ed(4,qp,13,15,"div",4),c.ed(5,Vp,3,3,"div",5),c.jc()),2&e&&(c.Dc("formGroup",t.quizForm),c.Mb(2),c.Dc("ngForOf",t.questions)("ngForTrackBy",t.trackByQuestion),c.Mb(1),c.Dc("ngIf",t.status==t.quizStatuses.STARTED),c.Mb(1),c.Dc("ngIf",t.status==t.quizStatuses.STARTED),c.Mb(1),c.Dc("ngIf",t.status==t.quizStatuses.REVIEW))},directives:[Ze.y,Ze.p,Ze.i,m.o,m.p,m.n,pp,Dp.a,ts.a],pipes:[M.b],encapsulation:2}),e})();const Gp=function(){return{category:"course"}};function Hp(e,t){1&e&&(c.kc(0,"div",5),c.kc(1,"div",6),c.kc(2,"div",7),c.kc(3,"div",8),c.fc(4,"em",9),c.kc(5,"p",10),c.gd(6),c.xc(7,"t"),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(6),c.id(" ",c.zc(7,1,"You have reached the maximum number of views",c.Hc(4,Gp))," "))}function $p(e,t){if(1&e&&(c.kc(0,"div",24),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc().$implicit;c.Mb(1),c.id(" ",c.yc(2,1,e.value)," ")}}function Yp(e,t){if(1&e&&(c.kc(0,"div",20),c.kc(1,"div",21),c.fc(2,"em"),c.jc(),c.ed(3,$p,3,3,"div",22),c.kc(4,"div",23),c.gd(5),c.xc(6,"t"),c.jc(),c.jc()),2&e){const e=t.$implicit;c.Mb(2),c.Rb("zmdi ",e.icon,""),c.Mb(1),c.Dc("ngIf",!1!==e.value),c.Mb(2),c.hd(c.yc(6,5,e.name))}}function Wp(e,t){if(1&e&&(c.kc(0,"div",18),c.fc(1,"br"),c.ed(2,Yp,7,7,"div",19),c.fc(3,"br"),c.jc()),2&e){const e=c.wc(3);c.Mb(2),c.Dc("ngForOf",e.quizInfo)}}const Qp=function(){return{right:"300px",width:"200px"}},Kp=function(e){return{text:e,colorScheme:"positive-green",typeStyle:"filled"}};function Jp(e,t){if(1&e){const e=c.lc();c.kc(0,"rectangular-button",17),c.sc("click",function(t){return c.Vc(e),c.wc(3).triggerContinuePlaying(t)}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("ngStyle",c.Hc(4,Qp))("properties",c.Ic(5,Kp,e.buttonTranslations.resumeTest))("state","normal")("buttonType","submit")}}const Xp=function(e,t){return{right:e,width:t}};function Zp(e,t){if(1&e){const e=c.lc();c.kc(0,"div",11),c.kc(1,"div",12),c.gd(2),c.jc(),c.fc(3,"div",13),c.xc(4,"sanitizeHtml"),c.ed(5,Wp,4,1,"div",14),c.kc(6,"div",15),c.ed(7,Jp,1,7,"rectangular-button",16),c.kc(8,"rectangular-button",17),c.sc("click",function(t){return c.Vc(e),c.wc(2).triggerStartPlaying(t)}),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Mb(2),c.hd(e.current_chapter.name),c.Mb(1),c.Dc("innerHTML",c.yc(4,8,e.current_chapter.description),c.Wc),c.Mb(2),c.Dc("ngIf",!e.settings.hide_user_info),c.Mb(2),c.Dc("ngIf",e.showResumeButton&&"in_progress"==e.current_chapter.status),c.Mb(1),c.Dc("ngStyle",c.Jc(10,Xp,e.showResumeButton&&"in_progress"==e.current_chapter.status?"-200px":"0px",e.showResumeButton&&"in_progress"==e.current_chapter.status?"300px":"100%"))("properties",c.Ic(13,Kp,e.buttonTranslations.beginTest))("state",e.beginTestButtonState)("buttonType","submit")}}function eg(e,t){if(1&e&&(c.kc(0,"div"),c.ed(1,Hp,8,5,"div",3),c.ed(2,Zp,9,15,"div",4),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",e.hasLockedMessage),c.Mb(1),c.Dc("ngIf",!e.hasLockedMessage)}}function tg(e,t){1&e&&(c.kc(0,"div",25),c.fc(1,"ui-spinner"),c.jc())}function ig(e,t){if(1&e&&(c.kc(0,"div",31),c.kc(1,"span",32),c.fc(2,"em",33),c.jc(),c.gd(3),c.xc(4,"t"),c.jc()),2&e){const e=c.wc(3);c.Mb(3),c.id(" ",c.yc(4,1,e.timer)," ")}}function sg(e,t){1&e&&(c.kc(0,"div",34),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"You must answer all questions to proceed with the test")," "))}function ng(e,t){if(1&e&&(c.kc(0,"div",28),c.ed(1,ig,5,3,"div",29),c.ed(2,sg,3,3,"div",30),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngIf","none"!=e.settings.time_option),c.Mb(1),c.Dc("ngIf",e.settings.request_all_answers)}}function ag(e,t){if(1&e){const e=c.lc();c.kc(0,"div"),c.ed(1,ng,3,2,"div",26),c.kc(2,"quiz-viewer",27),c.sc("leavePlayMode",function(t){return c.Vc(e),c.wc().triggerLeavePlayMode(t)})("saveAndExit",function(t){return c.Vc(e),c.wc().triggerSaveAndExit(t)})("movePrevPage",function(t){return c.Vc(e),c.wc().triggerShowPrevPage(t)})("moveNextPage",function(t){return c.Vc(e),c.wc().triggerShowNextPage(t)})("submitQuiz",function(t){return c.Vc(e),c.wc().triggerSubmitQuiz(t)})("loaded",function(t){return c.Vc(e),c.wc().triggerLoaded(t)}),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf","none"!=e.settings.time_option||e.settings.request_all_answers),c.Mb(1),c.Dc("questions",e.questions)("quizForm",e.quizForm)("status",e.status)("hasPrevPage",e.hasPrevPage)("hasNextPage",e.hasNextPage)("processing",e.processing)("paginationTitle",e.paginationTitle)("current_page",e.current_page)("settings",e.settings)("leaveDialogContentMessage",e.leaveDialogContentMessage)}}function og(e,t){1&e&&(c.kc(0,"h4",53),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"Passed!")," "))}function rg(e,t){1&e&&(c.kc(0,"h4",54),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"Not passed")," "))}function cg(e,t){if(1&e&&(c.kc(0,"div"),c.ed(1,og,3,3,"h4",51),c.ed(2,rg,3,3,"h4",52),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngIf","completed"==e.user_status.completion_status),c.Mb(1),c.Dc("ngIf","failed"==e.user_status.completion_status)}}function lg(e,t){1&e&&(c.kc(0,"div"),c.kc(1,"h4",32),c.gd(2),c.xc(3,"t"),c.jc(),c.jc()),2&e&&(c.Mb(2),c.id(" ",c.yc(3,1,"Waiting for final grade...")," "))}const dg=function(e,t){return{"text-positive-green":e,"text-error":t}};function ug(e,t){if(1&e&&(c.kc(0,"span",58),c.gd(1),c.jc()),2&e){const e=c.wc(3);c.Dc("ngClass",c.Jc(2,dg,"failed"!==e.user_status.completion_status,"failed"===e.user_status.completion_status)),c.Mb(1),c.id(" ",e.user_status.score," % ")}}function hg(e,t){if(1&e&&(c.kc(0,"span",59),c.gd(1),c.jc()),2&e){const e=c.wc(3);c.Dc("ngClass",c.Jc(3,dg,"failed"!==e.user_status.completion_status,"failed"===e.user_status.completion_status)),c.Mb(1),c.jd(" ",e.user_status.score,"/",e.user_status.max_score," ")}}function pg(e,t){if(1&e&&(c.kc(0,"div",55),c.gd(1),c.xc(2,"t"),c.ed(3,ug,2,5,"span",56),c.ed(4,hg,2,6,"span",57),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,3,"Total score"),": "),c.Mb(2),c.Dc("ngIf",e.settings.score_type==e.quizPlayerScoreType.PERCENTAGE),c.Mb(1),c.Dc("ngIf",e.settings.score_type!=e.quizPlayerScoreType.PERCENTAGE)}}function gg(e,t){if(1&e&&c.fc(0,"div",60),2&e){const e=c.wc(2);c.Dc("innerHtml",e.couldIncreaseByScoreLabel+" <span class=bolded>"+e.maxManualScore+" "+e.pointsLabel+"</span>",c.Wc)}}function mg(e,t){if(1&e&&c.fc(0,"div",60),2&e){const e=c.wc(2);c.Dc("innerHtml",e.couldIncreaseByScoreLabel+" <span class=bolded>"+e.maxManualScore+" %</span>",c.Wc)}}function bg(e,t){if(1&e&&(c.fc(0,"div",60),c.xc(1,"sanitizeHtml")),2&e){const e=c.wc(2);c.Dc("innerHtml",c.yc(1,1,null==e.user_status?null:e.user_status.feedback_message),c.Wc)}}function fg(e,t){if(1&e&&(c.kc(0,"span",58),c.gd(1),c.jc()),2&e){const e=c.wc(3);c.Dc("ngClass",c.Jc(2,dg,"failed"!==e.user_status.completion_status,"failed"===e.user_status.completion_status)),c.Mb(1),c.id(" ",e.user_status.average_user_score," % ")}}function _g(e,t){if(1&e&&(c.kc(0,"span",59),c.gd(1),c.jc()),2&e){const e=c.wc(3);c.Dc("ngClass",c.Jc(3,dg,"failed"!==e.user_status.completion_status,"failed"===e.user_status.completion_status)),c.Mb(1),c.jd(" ",e.user_status.average_user_score,"/",e.user_status.max_score," ")}}const vg=function(){return{category:"test"}};function yg(e,t){1&e&&(c.kc(0,"div"),c.kc(1,"p"),c.gd(2),c.xc(3,"t"),c.jc(),c.jc()),2&e&&(c.Mb(2),c.hd(c.zc(3,1,"You are the first one that completed the test",c.Hc(4,vg))))}const wg=function(e){return{category:"test",completed_cnt:e}};function Cg(e,t){if(1&e&&(c.kc(0,"p"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(4);c.Mb(1),c.id(" ",c.zc(2,1,"Right now {completed_cnt} user(s) have already completed the test and you are above the average!",c.Ic(4,wg,e.settings.completion_counts))," ")}}function Sg(e,t){if(1&e&&(c.kc(0,"p"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(4);c.Mb(1),c.id(" ",c.zc(2,1,"Right now {completed_cnt} user(s) have already completed the test and you are below the average!",c.Ic(4,wg,e.settings.completion_counts))," ")}}function kg(e,t){if(1&e&&(c.kc(0,"div"),c.ed(1,Cg,3,6,"p",0),c.ed(2,Sg,3,6,"p",0),c.jc()),2&e){const e=c.wc(3);c.Mb(1),c.Dc("ngIf",e.user_status.score>=e.user_status.average_user_score),c.Mb(1),c.Dc("ngIf",e.user_status.score<e.user_status.average_user_score)}}function Tg(e,t){if(1&e&&(c.kc(0,"div",61),c.kc(1,"div",62),c.gd(2),c.xc(3,"t"),c.ed(4,fg,2,5,"span",56),c.ed(5,_g,2,6,"span",57),c.jc(),c.ed(6,yg,4,5,"div",0),c.ed(7,kg,3,2,"div",0),c.jc()),2&e){const e=c.wc(2);c.Mb(2),c.id(" ",c.yc(3,5,"Average score:")," "),c.Mb(2),c.Dc("ngIf",e.settings.score_type==e.quizPlayerScoreType.PERCENTAGE),c.Mb(1),c.Dc("ngIf",e.settings.score_type!=e.quizPlayerScoreType.PERCENTAGE),c.Mb(1),c.Dc("ngIf",0==e.settings.completion_counts),c.Mb(1),c.Dc("ngIf",e.settings.completion_counts>0)}}const Ig=function(e){return{category:"test",time:e}};function xg(e,t){if(1&e&&(c.kc(0,"span",63),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.zc(2,1,"Your test is suspended. You will be able to retake your test in {time}.",c.Ic(4,Ig,e.displaySuspensionTime(null==e.user_status?null:e.user_status.suspension_time)))," ")}}function Dg(e,t){1&e&&(c.kc(0,"span"),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"Maximum number of attempts reached!")," "))}const Og=function(e){return{text:e,colorScheme:"main",typeStyle:"filled"}};function Eg(e,t){if(1&e){const e=c.lc();c.kc(0,"rectangular-button",64),c.sc("click",function(t){return c.Vc(e),c.wc(2).triggerShowReviewMode(t)}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("properties",c.Ic(3,Og,e.buttonTranslations.showAnswers))("state","normal")("buttonType","button")}}function Ag(e,t){if(1&e){const e=c.lc();c.kc(0,"rectangular-button",65),c.sc("click",function(t){return c.Vc(e),c.wc(2).triggerRetakeTheTest(t)}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("properties",c.Ic(3,Kp,e.buttonTranslations.retakeTest))("state","normal")("buttonType","button")}}function Pg(e,t){if(1&e&&(c.kc(0,"div",24),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc().$implicit;c.Mb(1),c.id(" ",c.yc(2,1,e.value)," ")}}function Mg(e,t){if(1&e&&(c.kc(0,"div",20),c.kc(1,"div",21),c.fc(2,"em"),c.jc(),c.ed(3,Pg,3,3,"div",22),c.kc(4,"div",23),c.gd(5),c.xc(6,"t"),c.jc(),c.jc()),2&e){const e=t.$implicit;c.Mb(2),c.Rb("zmdi ",e.icon,""),c.Mb(1),c.Dc("ngIf",!1!==e.value),c.Mb(2),c.hd(c.yc(6,5,e.name))}}function Lg(e,t){if(1&e&&(c.kc(0,"div",18),c.fc(1,"br"),c.ed(2,Mg,7,7,"div",19),c.fc(3,"br"),c.jc()),2&e){const e=c.wc(2);c.Mb(2),c.Dc("ngForOf",e.quizInfo)}}function jg(e,t){if(1&e&&(c.kc(0,"tr"),c.kc(1,"td"),c.gd(2),c.jc(),c.kc(3,"td"),c.gd(4),c.jc(),c.kc(5,"td"),c.gd(6),c.jc(),c.jc()),2&e){const e=t.$implicit;c.Mb(2),c.hd(e.category_name),c.Mb(2),c.hd(e.questions_count),c.Mb(2),c.hd(e.score)}}const Rg=function(){return{category:"menu"}},Fg=function(){return{category:"coursereport"}};function Ng(e,t){if(1&e&&(c.kc(0,"div",66),c.kc(1,"table"),c.kc(2,"tr",67),c.kc(3,"th",68),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"th",68),c.gd(7),c.xc(8,"t"),c.jc(),c.kc(9,"th",68),c.gd(10),c.xc(11,"t"),c.jc(),c.jc(),c.ed(12,jg,7,3,"tr",69),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(4),c.hd(c.zc(5,4,"_QUESTCATEGORY",c.Hc(12,Rg))),c.Mb(3),c.hd(c.zc(8,7,"_TOT_QUESTION",c.Hc(13,Fg))),c.Mb(3),c.hd(c.yc(11,10,"Total score")),c.Mb(2),c.Dc("ngForOf",e.user_status.score_per_category)}}function Ug(e,t){if(1&e&&(c.kc(0,"div",70),c.kc(1,"div",71),c.fc(2,"p",72),c.xc(3,"t"),c.kc(4,"div",73),c.fc(5,"em",74),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(2),c.Dc("innerHTML",c.yc(3,1,e.activityCompletedMessage),c.Wc)}}function zg(e,t){if(1&e){const e=c.lc();c.kc(0,"rectangular-button",65),c.sc("click",function(t){return c.Vc(e),c.wc(3).triggerNextChapter(t)}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("properties",c.Ic(3,Og,e.buttonTranslations.nextActivity))("state","normal")("buttonType","button")}}const qg=function(e){return{text:e,colorScheme:"grey-mid",typeStyle:"filled"}};function Vg(e,t){if(1&e){const e=c.lc();c.kc(0,"div",75),c.kc(1,"rectangular-button",64),c.sc("click",function(t){return c.Vc(e),c.wc(2).triggerBackToCourse(t)}),c.jc(),c.ed(2,zg,1,5,"rectangular-button",47),c.jc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("properties",c.Ic(4,qg,e.buttonTranslations.backToCourse))("state","normal")("buttonType","button"),c.Mb(1),c.Dc("ngIf",e.next_chapter.id)}}const Bg=function(e,t){return{"zmdi-check-circle text-positive-green":e,"zmdi-close-circle text-error":t}};function Gg(e,t){if(1&e&&(c.kc(0,"div",35),c.kc(1,"div",36),c.kc(2,"div",37),c.fc(3,"em",38),c.jc(),c.kc(4,"div",39),c.ed(5,cg,3,2,"div",0),c.ed(6,lg,4,3,"div",0),c.ed(7,pg,5,5,"div",40),c.kc(8,"div",41),c.ed(9,gg,1,1,"div",42),c.ed(10,mg,1,1,"div",42),c.ed(11,bg,2,3,"div",42),c.jc(),c.ed(12,Tg,8,7,"div",43),c.kc(13,"div",44),c.ed(14,xg,3,6,"span",45),c.ed(15,Dg,3,3,"span",0),c.ed(16,Eg,1,5,"rectangular-button",46),c.ed(17,Ag,1,5,"rectangular-button",47),c.jc(),c.jc(),c.ed(18,Lg,4,1,"div",14),c.jc(),c.ed(19,Ng,13,14,"div",48),c.ed(20,Ug,6,3,"div",49),c.ed(21,Vg,3,6,"div",50),c.jc()),2&e){const e=c.wc();c.Mb(3),c.Dc("ngClass",c.Jc(16,Bg,"completed"==e.user_status.completion_status,"completed"!=e.user_status.completion_status)),c.Mb(2),c.Dc("ngIf","evaluated"==e.user_status.evaluation_status),c.Mb(1),c.Dc("ngIf","waiting_evaluation"==e.user_status.evaluation_status),c.Mb(1),c.Dc("ngIf",e.settings.show_final_score),c.Mb(2),c.Dc("ngIf",e.showIncreaseScoreMessage()&&e.settings.score_type!=e.quizPlayerScoreType.PERCENTAGE),c.Mb(1),c.Dc("ngIf",e.showIncreaseScoreMessage()&&e.settings.score_type==e.quizPlayerScoreType.PERCENTAGE),c.Mb(1),c.Dc("ngIf",null==e.user_status?null:e.user_status.feedback_message),c.Mb(1),c.Dc("ngIf",e.settings.show_average_score),c.Mb(2),c.Dc("ngIf",e.user_status.suspension_time),c.Mb(1),c.Dc("ngIf",e.settings.max_attempts==e.user_status.attempts_consumed&&"failed"===e.user_status.completion_status),c.Mb(1),c.Dc("ngIf",e.showResultsButton),c.Mb(1),c.Dc("ngIf",e.handleRetakeTestVisibility()),c.Mb(1),c.Dc("ngIf",e.showInfoOnSubmit),c.Mb(1),c.Dc("ngIf",e.showScorePerCategory),c.Mb(1),c.Dc("ngIf","not_started"===e.current_chapter.status&&"completed"===e.user_status.completion_status),c.Mb(1),c.Dc("ngIf","standalone"===e.current_mode)}}function Hg(e,t){if(1&e&&(c.kc(0,"span",58),c.gd(1),c.jc()),2&e){const e=c.wc(3);c.Dc("ngClass",c.Jc(2,dg,"failed"!==e.user_status.completion_status,"failed"===e.user_status.completion_status)),c.Mb(1),c.id(" ",e.user_status.score," % ")}}function $g(e,t){if(1&e&&(c.kc(0,"span",59),c.gd(1),c.jc()),2&e){const e=c.wc(3);c.Dc("ngClass",c.Jc(3,dg,"failed"!==e.user_status.completion_status,"failed"===e.user_status.completion_status)),c.Mb(1),c.jd(" ",e.user_status.score,"/",e.user_status.max_score," ")}}const Yg=function(){return{category:"standard"}};function Wg(e,t){if(1&e&&(c.kc(0,"div",55),c.gd(1),c.xc(2,"t"),c.ed(3,Hg,2,5,"span",56),c.ed(4,$g,2,6,"span",57),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.zc(2,3,"Final Score:",c.Hc(6,Yg))," "),c.Mb(2),c.Dc("ngIf",e.settings.score_type==e.quizPlayerScoreType.PERCENTAGE),c.Mb(1),c.Dc("ngIf",e.settings.score_type!=e.quizPlayerScoreType.PERCENTAGE)}}function Qg(e,t){if(1&e&&c.fc(0,"div",60),2&e){const e=c.wc(2);c.Dc("innerHtml",e.couldIncreaseByScoreLabel+" <span class=bolded>"+e.maxManualScore+" "+e.pointsLabel+"</span>",c.Wc)}}function Kg(e,t){if(1&e){const e=c.lc();c.kc(0,"div"),c.kc(1,"div",76),c.kc(2,"div",37),c.fc(3,"em",38),c.jc(),c.ed(4,Wg,5,7,"div",40),c.ed(5,Qg,1,1,"div",42),c.jc(),c.kc(6,"quiz-viewer",77),c.sc("leaveReviewMode",function(t){return c.Vc(e),c.wc().triggerLeaveReviewMode(t)})("loaded",function(t){return c.Vc(e),c.wc().triggerLoaded(t)}),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(3),c.Dc("ngClass",c.Jc(6,Bg,"completed"==e.user_status.completion_status,"completed"!=e.user_status.completion_status)),c.Mb(1),c.Dc("ngIf",e.settings.show_final_score),c.Mb(1),c.Dc("ngIf","waiting_evaluation"==e.user_status.evaluation_status&&"absolute"==e.settings.score_type),c.Mb(1),c.Dc("questions",e.questions)("quizForm",e.quizForm)("status",e.status)}}let Jg=(()=>{class e{constructor(e,t,i,s){this._sanitizer=e,this.formatter=t,this.translate=i,this._ref=s,this.startPlaying=new c.q,this.retakeTheTest=new c.q,this.continuePlaying=new c.q,this.backToCourse=new c.q,this.leavePlayMode=new c.q,this.leaveReviewMode=new c.q,this.saveAndExit=new c.q,this.showPrevPage=new c.q,this.showNextPage=new c.q,this.submitQuiz=new c.q,this.loaded=new c.q,this.showReviewMode=new c.q,this.nextChapter=new c.q,this.quizStatuses=ne.u,this.buttonTranslations={beginTest:M.a.t("test","BEGIN THE TEST"),retakeTest:M.a.t("test","RETAKE THE TEST"),showAnswers:M.a.t("test","_TEST_REVIEW_ANSWER"),resumeTest:M.a.t("test","_TEST_CONTINUE"),backToCourse:M.a.t("test","_TEST_SAVEKEEP_BACK"),nextActivity:M.a.t("test","Next Activity")},this.quizPlayerScoreType=ne.t,this.beginTestButtonState="normal"}ngOnInit(){this.feedback_message=this._sanitizer.bypassSecurityTrustHtml(this.user_status.feedback_message),this.translate.get("_TEST_MANUAL_SCORE",{category:"test"}).subscribe(e=>{this.couldIncreaseByScoreLabel=e}),this.translate.get("_TEST_SCORES",{category:"test"}).subscribe(e=>{this.pointsLabel=e})}displaySuspensionTime(e){const t=this.formatter.currentUtcDateTime();void 0===e&&(e=t),e=this.formatter.addMinutes(t,e);const i=this.formatter.getFormattedDurationJSON(e,5),s=[];for(const n in i){if(0===i[n])continue;const e=this.translate.instant(n,{category:"webapp"});s.push(i[n]+" "+e)}if(s.length>1){const e=new M.b(this.translate,this._ref).transform(M.a.t("webapp","and"));s.splice(s.length-1,0,e)}return s.join(" ")}triggerStartPlaying(){this.beginTestButtonState="disabled",this.startPlaying.emit(!0)}triggerRetakeTheTest(){this.retakeTheTest.emit(!0)}triggerContinuePlaying(){this.continuePlaying.emit(!0)}triggerBackToCourse(){this.backToCourse.emit(!0)}triggerLeavePlayMode(e){this.leavePlayMode.emit(e)}triggerLeaveReviewMode(){this.leaveReviewMode.emit(!0)}triggerSaveAndExit(e){this.saveAndExit.emit(e)}triggerShowPrevPage(e){this.showPrevPage.emit(e)}triggerShowNextPage(e){this.showNextPage.emit(e)}triggerSubmitQuiz(e){this.submitQuiz.emit(e)}triggerLoaded(){this.loaded.emit(!0)}triggerShowReviewMode(){this.showReviewMode.emit(!0)}triggerNextChapter(){this.next_chapter.id&&this.nextChapter.emit({chapter:this.next_chapter})}showIncreaseScoreMessage(){return this.user_status.evaluation_status===ne.s.WAITING_EVALUATION&&this.maxManualScore>0}get maxManualScore(){return Number(this.settings.max_manual_score)||Number(this.user_status.max_manual_score)}handleRetakeTestVisibility(){return!("NULL"===this.settings.self_prerequisite&&this.user_status.attempts_consumed||"incomplete"===this.settings.self_prerequisite&&"completed"===this.user_status.completion_status||this.user_status.suspension_time||!(0==this.settings.max_attempts||this.settings.max_attempts>this.user_status.attempts_consumed)||this.courseMaxAttempts&&!(this.courseMaxAttempts>this.user_status.attempts_consumed))}get hasLockedMessage(){return"max_number_views"===this.current_chapter.locked}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Li.b),c.ec(ni.b),c.ec(rn.a),c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["quiz-player-dummy"]],inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",next_chapter:"next_chapter",status:"status",settings:"settings",user_status:"user_status",questions:"questions",quizInfo:"quizInfo",quizForm:"quizForm",paginationTitle:"paginationTitle",hasPrevPage:"hasPrevPage",hasNextPage:"hasNextPage",processing:"processing",current_mode:"current_mode",current_page:"current_page",showScorePerCategory:"showScorePerCategory",showInfoOnSubmit:"showInfoOnSubmit",showResumeButton:"showResumeButton",showResultsButton:"showResultsButton",activityCompletedMessage:"activityCompletedMessage",is_submitted:"is_submitted",leaveDialogContentMessage:"leaveDialogContentMessage",timer:"timer",courseMaxAttempts:"courseMaxAttempts"},outputs:{startPlaying:"startPlaying",retakeTheTest:"retakeTheTest",continuePlaying:"continuePlaying",backToCourse:"backToCourse",leavePlayMode:"leavePlayMode",leaveReviewMode:"leaveReviewMode",saveAndExit:"saveAndExit",showPrevPage:"showPrevPage",showNextPage:"showNextPage",submitQuiz:"submitQuiz",loaded:"loaded",showReviewMode:"showReviewMode",nextChapter:"nextChapter"},decls:5,vars:5,consts:[[4,"ngIf"],["class","play-spinner",4,"ngIf"],["class","quiz-submitted",4,"ngIf"],["class","chapter-play-rejected-wrapper",4,"ngIf"],["class","begin-quiz",4,"ngIf"],[1,"chapter-play-rejected-wrapper"],[1,"course-completed-rejected"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--12-col"],[1,"zmdi","zmdi-lock-outline","zmdi-hc-5x"],[1,"text-basic-size","text-grey-mid","course-completed-text"],[1,"begin-quiz"],[1,"title","text-main"],[1,"description","default-list-style",3,"innerHTML"],["class","quizBaseInformation mdl-grid bg-grey-superlight",4,"ngIf"],[1,"start-playing-buttons"],["class","navigate next",3,"ngStyle","properties","state","buttonType","click",4,"ngIf"],[1,"navigate","next",3,"ngStyle","properties","state","buttonType","click"],[1,"quizBaseInformation","mdl-grid","bg-grey-superlight"],["class","quizInfo mdl-cell mdl-cell--2-col",4,"ngFor","ngForOf"],[1,"quizInfo","mdl-cell","mdl-cell--2-col"],[1,"icon","text-main"],["class","value bolded",4,"ngIf"],[1,"text-grey-mid","additional-info"],[1,"value","bolded"],[1,"play-spinner"],["class","quizTopInfo",4,"ngIf"],[3,"questions","quizForm","status","hasPrevPage","hasNextPage","processing","paginationTitle","current_page","settings","leaveDialogContentMessage","leavePlayMode","saveAndExit","movePrevPage","moveNextPage","submitQuiz","loaded"],[1,"quizTopInfo"],["class","leftSideShowingTheTiming",4,"ngIf"],["class","rightSideShowingMandatoryAnswers text-error",4,"ngIf"],[1,"leftSideShowingTheTiming"],[1,"text-grey-mid"],[1,"zmdi","zmdi-timer"],[1,"rightSideShowingMandatoryAnswers","text-error"],[1,"quiz-submitted"],[1,"upper-part","bg-grey-superlight"],[1,"icon-check"],[1,"zmdi",3,"ngClass"],[1,"wrap-right"],["class","showFinalScore bolded",4,"ngIf"],[1,"infoQuestionsEvaluation","default-list-style"],[3,"innerHtml",4,"ngIf"],["class","averageUserScore",4,"ngIf"],[1,"showResultsOrRetake"],["class","suspension-text",4,"ngIf"],["class","navigate prev",3,"properties","state","buttonType","click",4,"ngIf"],["class","navigate next",3,"properties","state","buttonType","click",4,"ngIf"],["class","showCategory",4,"ngIf"],["class","intime-completed quiz-completed",4,"ngIf"],["class","bottomButtons",4,"ngIf"],["class","text-positive-green",4,"ngIf"],["class","text-error",4,"ngIf"],[1,"text-positive-green"],[1,"text-error"],[1,"showFinalScore","bolded"],["class","percentage",3,"ngClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"percentage",3,"ngClass"],[3,"ngClass"],[3,"innerHtml"],[1,"averageUserScore"],[1,"bolded"],[1,"suspension-text"],[1,"navigate","prev",3,"properties","state","buttonType","click"],[1,"navigate","next",3,"properties","state","buttonType","click"],[1,"showCategory"],[1,"head"],["scope","col"],[4,"ngFor","ngForOf"],[1,"intime-completed","quiz-completed"],[1,"activity-completed","bg-main"],[1,"activity-completed-message","text-white",3,"innerHTML"],[1,"activity-icon","bg-white"],[1,"zmdi","zmdi-hc-2x","zmdi-check-all","text-positive-green"],[1,"bottomButtons"],[1,"review-info"],[3,"questions","quizForm","status","leaveReviewMode","loaded"]],template:function(e,t){1&e&&(c.ed(0,eg,3,2,"div",0),c.ed(1,tg,2,0,"div",1),c.ed(2,ag,3,11,"div",0),c.ed(3,Gg,22,19,"div",2),c.ed(4,Kg,7,9,"div",0)),2&e&&(c.Dc("ngIf",t.status==t.quizStatuses.TO_BE_STARTED),c.Mb(1),c.Dc("ngIf",t.status==t.quizStatuses.REQUEST_FOR_PLAY),c.Mb(1),c.Dc("ngIf",t.status==t.quizStatuses.STARTED),c.Mb(1),c.Dc("ngIf",t.status==t.quizStatuses.SUBMITTED),c.Mb(1),c.Dc("ngIf",t.status==t.quizStatuses.REVIEW))},directives:[m.p,ts.a,m.q,m.o,b.Be,Bp,m.n],pipes:[M.b,ji.a],encapsulation:2}),e})(),Xg=(()=>{class e{constructor(e,t,i,s,n,a,o){this._store=e,this.quizPlayerActions=t,this.ref=i,this.fb=s,this.docLayoutService=n,this.router=a,this.userInteractionService=o,this.completed=new c.q,this.loaded=new c.q,this.changeMode=new c.q,this.loadChapter=new c.q,this.timer_enabled=!1,this.timeElapsedForPrevPage={},this.expirationSnackbarShown=!1,this.quizInfo=[],this.processing=!1,this.current_mode=Ip.a.INLINE,this.can_view_prev_page=!1,this.showScorePerCategory=!1,this.showInfoOnSubmit=!1,this.showResumeButton=!1,this.showResultsButton=!1,this.leaveDialogContentMessage=M.a.t("test","Are you sure you want to leave the test? You'll be able to resume it later"),this.reloadQuiz=!1,this.quizSubscriber=this._store.select(ae.n).subscribe(e=>{if(e.has_error&&(this.errorWhilePlayingTest(e.error_message,e.error_code),setTimeout(()=>this.ref.markForCheck(),1e3)),!1===e.has_error)switch(this.fillLocalVariables(e),this.showResultsButton=this.user_status.show_results,this.manageTestInfo(),this.status===Ip.d.STARTED?(this.handleTimeLimit(),this.reloadQuiz=!1):this.timeElapsedForPrevPage={},this.handleDisplayMode(),this.is_submitted&&this.status===Ip.d.SUBMITTED&&!this.reloadQuiz&&(this.user_status.time_consumed=0,setTimeout(()=>this.ref.markForCheck()),this.reloadQuiz=!0),this.handleLeaveDialogMessage(),this.trackingAction){case Ip.g.SUBMIT:case Ip.g.SUBMIT_PARTIAL:case Ip.g.TIME_ENABLED_FORCE_EXIT:case Ip.g.TIME_ELAPSED_SUBMIT:this.destroyTimingCounter()}})}destroyTimingCounter(){this.timer_enabled&&(this.timer_enabled=!1,this.startTime=null,this.trackingAction=Ip.g.NO_ACTION,this.timeObservable&&this.timeObservable.unsubscribe())}errorWhilePlayingTest(e,t){if(1004!==t){const t=e||M.a.t("standard","Something went wrong. Please, try again later!");this.docLayoutService.toast.showToast({message:t,type:"error"})}t&&1015!==t&&1004!==t?this.leavePlayMode(this.quizForm.getRawValue()):this.processing=!1}fillLocalVariables(e){this.current_page!==e.current_page&&(this.processing=!1),this.status=e.status,this.mode=e.mode,this.settings=e.settings,this.pages_count=e.pages_count,this.can_view_prev_page=e.can_view_prev_page,this.questions_count=e.questions_count,this.user_status=e.user_status,this.questions=e.questions,this.is_submitted=e.is_submitted,this.current_page=e.current_page,this.paginationTitle=M.a.t("standard","Page {cur} of {all}",{cur:e.current_page,all:this.pages_count}),this.hasPrevPage=e.current_page>1&&e.settings.allow_backtracking&&this.can_view_prev_page,this.timeElapsedForPrevPage[String(e.current_page-1)]&&!0===this.timeElapsedForPrevPage[String(e.current_page-1)]&&(this.hasPrevPage=!1),this.hasNextPage=e.current_page<e.pages_count;const t={};for(const i in this.questions)this.questions[i]&&(t[i]=this.fb.group({}));this.quizForm=this.fb.group(t),this.showScorePerCategory=this.settings.show_score_by_category&&!rt.a.isEmpty(this.user_status)&&this.user_status.score_per_category,this.showResumeButton=this.settings.allow_partial_submission&&this.user_status.status===Ip.e.NOT_SUBMITTED}manageTestInfo(){this.showInfoOnSubmit=this.current_mode===Ip.a.INLINE&&this.settings.allow_partial_submission&&this.settings.max_attempts>this.user_status.attempts_consumed&&!this.settings.hide_user_info;const e="percentage"===this.settings.score_type?this.settings.pass_mark+" %":this.settings.pass_mark;this.quizInfo=[{icon:"zmdi-check-circle-u",name:M.a.t("test","Pass Mark"),value:""+e},{icon:"zmdi-timer",name:M.a.t("test","Time limit"),value:this.getTimeLimitValue()}],this.settings.order_type<2&&this.quizInfo.push({icon:"zmdi-check-circle",name:M.a.t("standard","_MAX_SCORE"),value:""+Math.round(100*this.settings.max_score)/100}),this.quizInfo.push({icon:"zmdi-help-outline",name:M.a.t("test","No. of questions"),value:""+this.questions_count},{icon:"zmdi-plus-circle-o",name:M.a.t("test","No. of attempts"),value:0===this.settings.max_attempts?M.a.t("test","Unlimited"):String(this.settings.max_attempts-this.user_status.attempts_consumed)},{icon:"zmdi-refresh-sync-off",name:M.a.t("test",this.showResumeButton?"Test can be resumed later":"Test cannot be resumed later"),value:M.a.t("standard",this.showResumeButton?"Yes":"No")})}getTimeLimitValue(){switch(this.settings.time_option){case"none":return M.a.t("standard","No");case"per_question":return M.a.t("standard","Yes");case"per_test":{const e=this.parseTimeLeft(this.settings.time_limit-this.user_status.time_consumed);let t="";return t+=e.hours?"{hours} h ":"",t+=e.minutes||e.hours&&e.seconds?"{minutes} min ":"",t+=e.seconds?"{seconds} sec":"",M.a.t("standard",t,{hours:e.hours,minutes:e.minutes,seconds:e.seconds})}}}parseTimeLeft(e){const t=Mc.duration(e,"seconds"),i=Math.floor(t.asHours()),s=Math.floor(t.asMinutes())-60*i;return{hours:i,minutes:s,seconds:e-60*i*60-60*s}}handleDisplayMode(){let e=!0;this.status!==Ip.d.TO_BE_STARTED&&(e=this.status===Ip.d.SUBMITTED&&!this.is_submitted),this.current_mode=e?Ip.a.INLINE:Ip.a.STAND_ALONE,this.changeMode.emit({mode:this.current_mode})}handleLeaveDialogMessage(){if("NULL"===this.settings.self_prerequisite)return void(this.leaveDialogContentMessage=M.a.t("test","Are you sure you want to leave the test? Note that you may not be able to resume it later or to access it anymore, and it could be marked as failed."));if(0===this.settings.max_attempts||!1!==this.settings.allow_partial_submission)return;const e=this.settings.max_attempts-this.user_status.attempts_consumed;this.leaveDialogContentMessage=1!==e?M.a.t("test","Are you sure you want to leave the test? You'll have {number} attempts remaining to complete it",{number:e}):M.a.t("test","Are you sure you want to leave the test?")}handleTimeLimit(){if("none"!==this.settings.time_option&&(this.expirationSnackbarShown=!1,this.timeObservable&&this.timeObservable.unsubscribe(),"per_test"===this.settings.time_option||this.current_page)){let e=this.getCurrentTimeLimitInSeconds();const t=Mc().add(String(e),"s").unix();this.handleTimeExpiration(t),e*=1e3,this.timeElapsedForPrevPage[this.current_page]||!0===this.timeElapsedForPrevPage[this.current_page]||(this.timer=this.generateTimeLeftMessage(e/1e3)),e||(this.processing=!0,this.ref.markForCheck()),this.timeObservable=Object(Yn.a)(1e3,1e3).pipe(Object(vt.a)(Object(Yn.a)().pipe(Object(Tp.a)(e)))).subscribe(i=>{this.handleTimeExpiration(t),e=t-Mc().unix()<=0?0:t-Mc().unix(),this.timer=this.generateTimeLeftMessage(e),this.ref.markForCheck(),0===e&&this.timeHasElapsed()},e=>this.errorWhilePlayingTest(e),()=>this.timeHasElapsed()),this.timer_enabled=!0}}generateTimeLeftMessage(e){const t=this.parseTimeLeft(e);return t.hours?M.a.t("standard","Time left: {hours}h {minutes}m {seconds}s",{hours:t.hours,minutes:t.minutes,seconds:t.seconds}):M.a.t("standard","Time left: {min}m {sec}s",{min:t.minutes,sec:t.seconds})}handleTimeExpiration(e){e-Mc().unix()<=5&&!this.expirationSnackbarShown&&(this.timeElapsedForPrevPage[String(this.current_page)]=!0,this.hasPrevPage=!1,this.docLayoutService.toast.showToast({message:M.a.t("standard","Your time is expiring soon"),type:"error"}),this.expirationSnackbarShown=!0)}getCurrentTimeLimitInSeconds(){const e=this.settings,t=this.user_status,i=rt.a.head(this.questions),s=Mc().unix()-this.startTime;let n=Number(e&&"per_test"===e.time_option?e.time_limit:i?i.time_limit:0);const a=e.time_option,o=Number(rt.a.cloneDeep(t.time_consumed))+s;return o&&"per_test"===a&&(n-=Number(o)),n}timeHasElapsed(){const e=this.quizForm.getRawValue();"per_test"===this.settings.time_option?this.current_page===this.pages_count?this.submitQuiz(e):this.timeElapsedSubmit(e):this.hasNextPage?(this.showNextPage(e),this.timeElapsedForPrevPage[String(this.current_page)]=!0):this.submitQuiz(e)}ngOnInit(){this._store.dispatch(this.quizPlayerActions.loadLaunchParams(this.chapter_viewer.launch_params)),this.activityCompletedMessage=this.next_chapter.id?M.a.t("course","{open_one}This activity is completed{close_one}, you can now proceed using {open_two}Back to Course buttons{close_two}",{open_one:'<span class="bolded">',close_one:"</span>",open_two:'<span class="bolded">',close_two:"</span>"}):M.a.t("course","The activity is completed. You can now proceed using the navigation buttons")}ngAfterViewInit(){this.loaded.emit(!0)}startPlaying(){this.userInteractionService.track(fc.a.QUIZ_START,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.QUIZ}),this._store.dispatch(this.quizPlayerActions.startPlaying({idOrg:this.current_chapter.id,action:Ip.g.START})),this.processing=!1,this.startTime=Mc().unix()}retakeTheTest(){this.userInteractionService.track(fc.a.QUIZ_RETAKE,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.QUIZ}),this._store.dispatch(this.quizPlayerActions.retakeTheTest({idOrg:this.current_chapter.id,action:Ip.g.START})),this.processing=!1,this.startTime=Mc().unix()}continuePlaying(){this.userInteractionService.track(fc.a.QUIZ_CONTINUE,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.QUIZ}),this._store.dispatch(this.quizPlayerActions.continuePlaying({idOrg:this.current_chapter.id,action:Ip.g.CONTINUE})),this.processing=!1,this.startTime=Mc().unix()}saveAndExit(e){this.userInteractionService.track(fc.a.QUIZ_SUBMIT_PARTIAL,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.QUIZ}),this.trackingAction=Ip.g.SUBMIT_PARTIAL,this._store.dispatch(this.quizPlayerActions.submitQuizPartial({idOrg:this.current_chapter.id,action:Ip.g.SUBMIT_PARTIAL,user_answers:xp.a.formatUserEntry(e)})),this.completed.emit(this.current_chapter.id)}leaveReviewMode(){this._store.dispatch(this.quizPlayerActions.leaveReviewMode()),this.current_mode=Ip.a.STAND_ALONE,this.changeMode.emit({mode:this.current_mode})}leavePlayMode(e){this.timer_enabled&&(this.userInteractionService.track(fc.a.QUIZ_FORCE_SUBMIT,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.QUIZ}),this.trackingAction=Ip.g.TIME_ENABLED_FORCE_EXIT,this._store.dispatch(this.quizPlayerActions.submitQuizPartial({idOrg:this.current_chapter.id,action:Ip.g.TIME_ENABLED_FORCE_EXIT,user_answers:xp.a.formatUserEntry(e)})));const t=this.status===Ip.d.REVIEW?Ip.d.SUBMITTED:Ip.d.TO_BE_STARTED;this._store.dispatch(Ts.b.setCoursePlayerChapterLoading(!0)),this._store.dispatch(this.quizPlayerActions.leavePlayMode({courseId:this.course_id,status:t}))}showPrevPage(e){this.processing||(this.userInteractionService.track(fc.a.QUIZ_GO_TO_PAGE,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.QUIZ,pageNumber:this.current_page-1}),this._store.dispatch(this.quizPlayerActions.goToPrevPage({idOrg:this.current_chapter.id,action:Ip.g.PREV,user_answers:xp.a.formatUserEntry(e)})),this.processing=!0)}showNextPage(e){this.processing||(this.userInteractionService.track(fc.a.QUIZ_GO_TO_PAGE,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.QUIZ,pageNumber:this.current_page+1}),this.trackingAction=Ip.g.NEXT,this._store.dispatch(this.quizPlayerActions.goToNextPage({idOrg:this.current_chapter.id,action:Ip.g.NEXT,user_answers:xp.a.formatUserEntry(e)})),"per_question"!==this.settings.time_option||this.storeSubscriber||(this.storeSubscriber=this._store.select(ae.n).subscribe(e=>{e.has_error||this.current_page===e.current_page||(this.destroyTimingCounter(),this.storeSubscriber.unsubscribe())})),this.ref.detectChanges(),this.processing=!0)}timeEnabledForceExit(e){this._store.dispatch(this.quizPlayerActions.timeEnabledForceExit({idOrg:this.current_chapter.id,action:Ip.g.TIME_ENABLED_FORCE_EXIT,user_answers:xp.a.formatUserEntry(e)}))}timeElapsedSubmit(e){this.userInteractionService.track(fc.a.QUIZ_SUBMIT_TIME_ELAPSED,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.QUIZ}),this.trackingAction=Ip.g.TIME_ELAPSED_SUBMIT,this._store.dispatch(this.quizPlayerActions.timeElapsedSubmit({idOrg:this.current_chapter.id,action:Ip.g.TIME_ELAPSED_SUBMIT,user_answers:xp.a.formatUserEntry(e)}))}submitQuiz(e){this.processing||(this._store.select(ae.d).subscribe(e=>{this.courseMaxAttempts=void 0===e.max_attempts||"0"===e.max_attempts?0:e.max_attempts}),this.userInteractionService.track(fc.a.QUIZ_SUBMIT,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.QUIZ}),this.trackingAction=Ip.g.SUBMIT,this._store.dispatch(this.quizPlayerActions.submitQuiz({idOrg:this.current_chapter.id,action:Ip.g.SUBMIT,user_answers:xp.a.formatUserEntry(e)})),this.processing=!0,this.ref.detectChanges())}showReviewMode(){this._store.dispatch(this.quizPlayerActions.showReview({idOrg:this.current_chapter.id,action:Ip.g.REVIEW}))}isLoaded(){}backToCourse(){this.manageTestInfo(),this.is_submitted&&this.completed.emit(this.current_chapter.id),this.current_mode=Ip.a.INLINE,this.changeMode.emit({mode:this.current_mode})}autoSubmitWithEnabledForceExit(){if("none"!==this.settings.time_option&&!0===this.timer_enabled){const e={track:{action:"time_enabled_force_exit",questions:xp.a.formatUserEntry(this.quizForm.getRawValue())}},t=Di.a.getInstance().get("access_token").access_token,i=`/learn/v1/lo/${this.current_chapter.id}/track`;if(window.fetch){const s=new Headers({"Content-Type":"application/json; charset=UTF-8",Authorization:`Bearer ${t}`});fetch(i,{method:"POST",headers:s,body:JSON.stringify(e),mode:"same-origin",keepalive:!0})}else{const s=new XMLHttpRequest;s.open("POST",i,!1),s.setRequestHeader("Content-Type","application/json; charset=UTF-8"),s.setRequestHeader("Authorization","Bearer "+t),s.send(JSON.stringify(e))}}}beforeUnloadHander(e){this.autoSubmitWithEnabledForceExit()}onBrowserBack(e){this.autoSubmitWithEnabledForceExit()}loadNextChapter(){this.router.navigate(this.learning_plan_id?["/learn/course/"+this.course_id+"/play/"+this.next_chapter.id+"/"+this.next_chapter.slug_name,{lp:this.learning_plan_id}]:["learn/course/"+this.course_id+"/play/"+this.next_chapter.id+"/"+this.next_chapter.slug_name]),this.completed.emit(this.current_chapter.id),this.loadChapter.emit({chapter:this.next_chapter}),this.current_mode=Ip.a.INLINE,this.changeMode.emit({mode:this.current_mode})}ngOnDestroy(){this._store.dispatch(this.quizPlayerActions.setInitialState()),this.quizSubscriber&&this.quizSubscriber.unsubscribe(),this.destroyTimingCounter()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(w.e),c.ec(Ts.f),c.ec(c.i),c.ec(Ze.d),c.ec(j.a),c.ec(s.h),c.ec(fc.c))},e.\u0275cmp=c.Yb({type:e,selectors:[["quiz-player"]],hostBindings:function(e,t){1&e&&c.sc("beforeunload",function(e){return t.beforeUnloadHander(e)},!1,c.Uc)("popstate",function(e){return t.onBrowserBack(e)},!1,c.Uc)},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",next_chapter:"next_chapter",learning_plan_id:"learning_plan_id",course_id:"course_id",course:"course"},outputs:{completed:"completed",loaded:"loaded",changeMode:"changeMode",loadChapter:"loadChapter"},decls:1,vars:24,consts:[[3,"current_chapter","chapter_viewer","next_chapter","status","settings","user_status","questions","quizInfo","quizForm","paginationTitle","hasPrevPage","hasNextPage","processing","current_mode","current_page","showScorePerCategory","showInfoOnSubmit","showResumeButton","showResultsButton","activityCompletedMessage","is_submitted","leaveDialogContentMessage","timer","courseMaxAttempts","startPlaying","retakeTheTest","continuePlaying","backToCourse","leavePlayMode","leaveReviewMode","saveAndExit","showPrevPage","showNextPage","submitQuiz","loaded","showReviewMode","nextChapter"]],template:function(e,t){1&e&&(c.kc(0,"quiz-player-dummy",0),c.sc("startPlaying",function(){return t.startPlaying()})("retakeTheTest",function(){return t.retakeTheTest()})("continuePlaying",function(){return t.continuePlaying()})("backToCourse",function(){return t.backToCourse()})("leavePlayMode",function(e){return t.leavePlayMode(e)})("leaveReviewMode",function(){return t.leaveReviewMode()})("saveAndExit",function(e){return t.saveAndExit(e)})("showPrevPage",function(e){return t.showPrevPage(e)})("showNextPage",function(e){return t.showNextPage(e)})("submitQuiz",function(e){return t.submitQuiz(e)})("loaded",function(){return t.isLoaded()})("showReviewMode",function(){return t.showReviewMode()})("nextChapter",function(){return t.loadNextChapter()}),c.jc()),2&e&&c.Dc("current_chapter",t.current_chapter)("chapter_viewer",t.chapter_viewer)("next_chapter",t.next_chapter)("status",t.status)("settings",t.settings)("user_status",t.user_status)("questions",t.questions)("quizInfo",t.quizInfo)("quizForm",t.quizForm)("paginationTitle",t.paginationTitle)("hasPrevPage",t.hasPrevPage)("hasNextPage",t.hasNextPage)("processing",t.processing)("current_mode",t.current_mode)("current_page",t.current_page)("showScorePerCategory",t.showScorePerCategory)("showInfoOnSubmit",t.showInfoOnSubmit)("showResumeButton",t.showResumeButton)("showResultsButton",t.showResultsButton)("activityCompletedMessage",t.activityCompletedMessage)("is_submitted",t.is_submitted)("leaveDialogContentMessage",t.leaveDialogContentMessage)("timer",t.timer)("courseMaxAttempts",t.courseMaxAttempts)},directives:[Jg],encapsulation:2}),e})();var Zg=i("384c");const em=["iframe"];let tm,im=(()=>{class e{constructor(e,t,i,s){this.backendService=e,this.userInteractionService=t,this.activatedRoute=i,this.router=s,this.completed=new c.q,this.loaded=new c.q,this.submitFormScript='<script type="text/javascript">\n        document.addEventListener("DOMContentLoaded", function(event) {\n            document.getElementById("submitFakeButton").click();\n        });\n        <\/script>'}ngOnInit(){var e;if(this.wrapperSelector=document.querySelector(".chapter-viewer__wrapper"),this.current_chapter&&this.chapter_viewer&&this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.height&&"lightbox"!=this.chapter_viewer.launch_params.mode?(this.iframeHeight=this.chapter_viewer.launch_params.height+"px",this.wrapperSelector.classList.add("no-min-height")):this.iframeHeight="100vh",this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.url){let t=this.chapter_viewer.launch_params;this.launchMode=t.mode,this.completionMode=t.completion_mode,t=this.stripNotSighedOauthParams(Object.assign({},t));const i=document.createElement("form");Object.assign(i,{action:this.chapter_viewer.launch_params.url,method:"post",hidden:"true",id:"lti-fake-form",name:"ltiFakeForm",enctype:"application/x-www-form-urlencoded"});const s=document.createElement("input");Object.assign(s,{type:"submit",id:"submitFakeButton",name:"basiclti_submit",value:this.chapter_viewer.launch_params.basiclti_submit,style:Object.assign(Object.assign({},s.style),{display:"none"})});for(const e in t)if(t.hasOwnProperty(e)){const s=t[e],n=document.createElement("input");Object.assign(n,{type:"hidden",name:e,value:s}),i.appendChild(n)}i.appendChild(s);const n=i.outerHTML+this.submitFormScript;if("fullscreen"==this.launchMode)return this.markAsCompleted(),null===(e=document.querySelector(".lti-wrapper"))||void 0===e||e.appendChild(i),void document.querySelector("#lti-fake-form").submit();if("lightbox"==this.launchMode||"inline"==this.launchMode){let e=this.iframe.nativeElement;e=e.contentDocument.document||e.contentWindow.document,e.open(),e.write(n),e.close(),e.onload=this.markAsCompleted()}else this.markAsCompleted(),tm=window.open(),tm.document.body.innerHTML=n,tm.document.getElementById("submitFakeButton").click(),this.externalWindowInterval=setInterval(()=>{((null==tm?void 0:tm.closed)||null===tm)&&(this.redirectUserToCoursePlayer(),clearInterval(this.externalWindowInterval),tm=null)},500)}}listenForIframePostMessages(){Object(Zg.g)(this.iframeElement).then(()=>{const e=this;this.ltiListeningFunction=t=>{const i=t.data;switch(i.action){case"legacy.closeLtiObject":"close"===i.message.state&&(window.removeEventListener("message",this.ltiListeningFunction),e.redirectUserToCoursePlayer())}},window.addEventListener("message",this.ltiListeningFunction)})}redirectUserToCoursePlayer(){if(void 0!==this.course_id){const e={autoplay:0},t=this.activatedRoute.snapshot.paramMap.get("lp");t&&(e.lp=t),this.router.navigate(["/learn/course/"+this.course_id+"/play/",e])}else console.warn("No course ID was passed to the viewer, hence the redirect is not possible.")}stripNotSighedOauthParams(e){if(e.oauth_skipped_params){let t=e.oauth_skipped_params;delete e.oauth_skipped_params,delete e.basiclti_submit;for(let i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(t[i])&&delete e[t[i]]}return e}ngAfterViewInit(){this.loaded.emit({height:this.iframeHeight}),this.trackLoad(),this.listenForIframePostMessages()}markAsCompleted(){this.chapter_viewer.launch_params&&"on_open"==this.completionMode&&(this.trackComplete(),this.backendService.request("/learn/v1/lo/"+this.current_chapter.id+"/track","POST").subscribe(e=>{"inline"!==this.launchMode&&"popup"!==this.launchMode||this.completed.emit(this.current_chapter.id)}))}trackComplete(){this.userInteractionService.track(fc.a.LTI_COMPLETE,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.LTI})}trackLoad(){this.userInteractionService.track(fc.a.LTI_LOAD,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.LTI})}ngOnDestroy(){void 0!==this.ltiListeningFunction&&window.removeEventListener("message",this.ltiListeningFunction)}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a),c.ec(fc.c),c.ec(s.a),c.ec(s.h))},e.\u0275cmp=c.Yb({type:e,selectors:[["lti-viewer"]],viewQuery:function(e,t){if(1&e&&(c.nd(em,3),c.nd(em,1)),2&e){let e;c.Rc(e=c.tc())&&(t.iframe=e.first),c.Rc(e=c.tc())&&(t.iframeElement=e)}},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded"},decls:3,vars:2,consts:[[1,"lti-wrapper"],["iframe",""]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.fc(1,"iframe",null,1),c.jc()),2&e&&c.Wb("lightbox","lightbox"===t.launchMode)},styles:[".lti-wrapper[_ngcontent-%COMP%] {\n            -webkit-overflow-scrolling: touch;\n            overflow-y: scroll;\n            width: 100%;\n            height: 510px;\n        }\n\n        .lightbox[_ngcontent-%COMP%] {\n            height: 100%;\n        }\n\n        .lti-wrapper[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%] {\n            height: 100%;\n            width: 100%;\n        }"]}),e})();var sm=i("jcE0");let nm=(()=>{class e{constructor(e,t){this.backendService=e,this.userInteractionService=t,this.completed=new c.q,this.loaded=new c.q,this.height="100%"}urlLoad(){let e,t=new a.a(t=>{e=t});return this.backendService.request("/learn/v1/lo/"+this.current_chapter.id+"/track","POST").subscribe(t=>{e&&e.next(t.data.acknowledge.url)}),t}ngOnInit(){}ngAfterViewInit(){this.trackLoad(),this.loaded.emit(!0)}ngAfterViewChecked(){}markAsCompleted(){this.trackComplete(),this.completed.emit(this.current_chapter.id)}trackComplete(){this.userInteractionService.track(fc.a.GDRIVE_COMPLETE,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.GOOGLE_DRIVE})}trackLoad(){this.userInteractionService.track(fc.a.GDRIVE_LOAD,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.GOOGLE_DRIVE})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a),c.ec(fc.c))},e.\u0275cmp=c.Yb({type:e,selectors:[["gdrive-viewer"]],inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded"},decls:1,vars:2,consts:[[3,"url","max_height","complete"]],template:function(e,t){1&e&&(c.kc(0,"iframe-gdrive",0),c.sc("complete",function(){return t.markAsCompleted()}),c.jc()),2&e&&c.Dc("url",t.urlLoad.bind(t))("max_height",t.height)},directives:[sm.a],encapsulation:2}),e})();const am=["iframe"];function om(e,t){if(1&e&&c.fc(0,"iframe",1,2),2&e){const e=c.wc();c.Ec("height",e.height),c.Dc("src",e.src,c.Xc)}}let rm=(()=>{class e{constructor(e,t,i){this._sanitizer=e,this._router=t,this.userInteractionService=i,this.completed=new c.q,this.loaded=new c.q,this.showIframe=!1}ngOnInit(){this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.mode&&("fullscreen"==this.chapter_viewer.launch_params.mode?(window.location.href=this.chapter_viewer.launch_params.url,this.showIframe=!1):"popup"==this.chapter_viewer.launch_params.mode?this.openElucidatInNewWindow():(this.src=this._sanitizer.bypassSecurityTrustResourceUrl(this.chapter_viewer.launch_params.url),this.showIframe=!0)),this.height="100%",this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.height&&"lightbox"!=this.chapter_viewer.launch_params.mode&&(this.height=this.chapter_viewer.launch_params.height)}ngAfterViewInit(){this.loaded.emit(!0),this.userInteractionService.track(fc.a.ELUCIDAT_LOAD,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.ELUCIDAT})}ngOnDestroy(){this.completed.emit(this.current_chapter.id),this.userInteractionService.track(fc.a.ELUCIDAT_COMPLETE,fc.b.COURSE_PLAYER,{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.ELUCIDAT})}openElucidatInNewWindow(){const e=window.open(this.chapter_viewer.launch_params.url);if(null==e)return;const t=setInterval(()=>{console.log(e),(e.closed||null==e)&&(void 0!==this.course_id&&this.course_id?(clearInterval(t),this._router.navigate(["/learn/course/"+this.course_id+"/play/"])):(clearInterval(t),console.warn("No course ID was passed to the viewer, hence the redirect is not possible.")),clearInterval(t))},600);this.showIframe=!1}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Li.b),c.ec(s.h),c.ec(fc.c))},e.\u0275cmp=c.Yb({type:e,selectors:[["elucidat-viewer"]],viewQuery:function(e,t){if(1&e&&c.nd(am,1),2&e){let e;c.Rc(e=c.tc())&&(t.iframe=e.first)}},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",course_id:"course_id"},outputs:{completed:"completed",loaded:"loaded"},decls:1,vars:1,consts:[["id","elucidat-iframe","width","100%",3,"height","src",4,"ngIf"],["id","elucidat-iframe","width","100%",3,"height","src"],["iframe",""]],template:function(e,t){1&e&&c.ed(0,om,2,2,"iframe",0),2&e&&c.Dc("ngIf",t.showIframe)},directives:[m.p],styles:["#elucidat-iframe[_ngcontent-%COMP%] {\n            min-height: 510px;\n        }"]}),e})();const cm=["playerFlowPlayer"];let lm=(()=>{class e{constructor(e,t,i,s,n){this._backendService=e,this.router=t,this._store$=i,this.userInteractionService=s,this.store=n,this.isFirstTrack=!0,this.isCompleted=!1,this.flowPlayerParams={disable_hls:!0,flowplayer_key:null,mp4_url:null,hls_url:null,bookmark:0,is_seekable:!0,seekable_status:1,subtitles:[],track_interval:1,allow_change_speed:!1,progress:()=>{}},this.autoStart=!0,this.completed=new c.q,this.loaded=new c.q,this.ready=new c.q}beforeWindowClose(){this.track(this.currentPlayerDuration,this.currentPlayerDuration===this.totalVideoDuration,!0)}ngOnInit(){this.chapter_viewer.launch_params&&(this.currentPlayerDuration=this.chapter_viewer.launch_params.bookmark,this.flowPlayerParams.disable_hls=!this.chapter_viewer.launch_params.hasOwnProperty("disable_hls")||this.chapter_viewer.launch_params.disable_hls,this.flowPlayerParams.flowplayer_key=this.chapter_viewer.launch_params.flowplayer_key||null,this.flowPlayerParams.mp4_url=this.chapter_viewer.launch_params.mp4_url||null,this.flowPlayerParams.hls_url=this.chapter_viewer.launch_params.hls_url||null,this.flowPlayerParams.bookmark=this.chapter_viewer.launch_params.bookmark||0,this.flowPlayerParams.allow_change_speed=this.chapter_viewer.launch_params.allow_change_speed||!1,this.flowPlayerParams.track_interval=5,this.flowPlayerParams.progress=e=>{this.currentPlayerDuration=e.current,this.totalVideoDuration=e.duration,this.totalVideoDuration=this.totalVideoDuration>150?e.duration-15:.9*e.duration;const t=this.current_chapter.status!==String(ne.d.COMPLETED);this.isCompleted=Math.round(this.currentPlayerDuration)>=Math.round(this.totalVideoDuration)&&t,this.isFirstTrack&&0===Math.round(e.current)?this.isFirstTrack=!1:(this.track(Math.round(this.currentPlayerDuration),this.isCompleted),this.isCompleted||this.trackProgress(e.current),this.isCompleted&&2===Number(this.chapter_viewer.launch_params.seekable_status)&&(this.flowPlayerParams.is_seekable=!0))},this.chapter_viewer.launch_params.is_seekable||(this.flowPlayerParams.is_seekable=!1),this.flowPlayerParams.subtitles=this.chapter_viewer.launch_params.subtitles||[])}ngOnDestroy(){const e=this.currentPlayerDuration>=this.totalVideoDuration;this.chapter_must_be_tracked&&this.track(this.currentPlayerDuration,e),e||this.completed.emit(this.current_chapter.id)}track(e,t=!1,i=!1){if(o.a.getInstance().isValid()){const s={track:{bookmark:e,complete:t}},n=Di.a.getInstance().get("access_token").access_token,a=`/learn/v1/lo/${this.current_chapter.id}/track`;if(i&&window.fetch){const e=new Headers({"Content-Type":"application/json; charset=UTF-8",Authorization:`Bearer ${n}`});fetch(a,{method:"POST",headers:e,body:JSON.stringify(s),mode:"same-origin",keepalive:!0}).then(()=>{this.trackSuccess(t)}).catch(e=>this.trackError(e))}else this._backendService.request(a,"POST",s,{},"",void 0,e=>this.trackError(e)).subscribe(()=>{this.trackSuccess(t)})}}trackSuccess(e){e&&this.completed.emit(this.current_chapter.id)}trackError(e){return 403===e.status?(this.router.navigate(["/learn/mycourses"],fi.b),Object(Ei.a)(null)):this._backendService.handleApiErrors(e)}ngAfterViewInit(){this.loaded.emit(!0)}onPlay(e){this.currentUserInteraction=fc.a.UPLOADED_VIDEO_PLAY,this.userInteractionService.track(fc.a.UPLOADED_VIDEO_PLAY,fc.b.COURSE_PLAYER,{courseId:this.course.id,loId:this.current_chapter.id,loType:zl.a.UPLOADED_VIDEO,progress:e.current})}onStop(e){this.currentUserInteraction=fc.a.UPLOADED_VIDEO_PAUSE,this.userInteractionService.track(fc.a.UPLOADED_VIDEO_PAUSE,fc.b.COURSE_PLAYER,{courseId:this.course.id,loId:this.current_chapter.id,loType:zl.a.UPLOADED_VIDEO,progress:e.current})}onResume(e){this.currentUserInteraction=fc.a.UPLOADED_VIDEO_PLAY,this.userInteractionService.track(fc.a.UPLOADED_VIDEO_PLAY,fc.b.COURSE_PLAYER,{courseId:this.course.id,loId:this.current_chapter.id,loType:zl.a.UPLOADED_VIDEO,progress:e.current})}onComplete(e){this.isCompleted||this.flowPlayerParams.progress({current:e,duration:e}),this.store.dispatch(Ts.b.videoCompleted()),this.currentUserInteraction=fc.a.UPLOADED_VIDEO_END,this.userInteractionService.track(fc.a.UPLOADED_VIDEO_END,fc.b.COURSE_PLAYER,{courseId:this.course.id,loId:this.current_chapter.id,loType:zl.a.UPLOADED_VIDEO})}onReady(){this.ready.emit()}trackProgress(e){this.currentUserInteraction=fc.a.UPLOADED_VIDEO_PROGRESS,this.userInteractionService.track(fc.a.UPLOADED_VIDEO_PROGRESS,fc.b.COURSE_PLAYER,{courseId:this.course.id,loId:this.current_chapter.id,loType:zl.a.UPLOADED_VIDEO,progress:e})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a),c.ec(s.h),c.ec(w.e),c.ec(fc.c),c.ec(w.e))},e.\u0275cmp=c.Yb({type:e,selectors:[["video-upload-viewer"]],viewQuery:function(e,t){if(1&e&&c.nd(cm,1),2&e){let e;c.Rc(e=c.tc())&&(t.playerFlowPlayer=e.first)}},hostBindings:function(e,t){1&e&&c.sc("beforeunload",function(){return t.beforeWindowClose()},!1,c.Uc)},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",course:"course",autoStart:"autoStart",chapter_must_be_tracked:"chapter_must_be_tracked"},outputs:{completed:"completed",loaded:"loaded",ready:"ready"},decls:3,vars:9,consts:[[1,"player-wrapper"],[3,"disable_hls","mp4_url","hls_url","bookmark","is_seekable","subtitles","track_interval","autostart","speedControlEnabled","progress","play","stop","resume","complete","ready"],["playerFlowPlayer",""]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"player-flowplayer",1,2),c.sc("progress",function(e){return t.flowPlayerParams.progress(e)})("play",function(e){return t.onPlay(e)})("stop",function(e){return t.onStop(e)})("resume",function(e){return t.onResume(e)})("complete",function(e){return t.onComplete(e)})("ready",function(){return t.onReady()}),c.jc(),c.jc()),2&e&&(c.Mb(1),c.Dc("disable_hls",t.flowPlayerParams.disable_hls)("mp4_url",t.flowPlayerParams.mp4_url)("hls_url",t.flowPlayerParams.hls_url)("bookmark",t.flowPlayerParams.bookmark)("is_seekable",t.flowPlayerParams.is_seekable)("subtitles",t.flowPlayerParams.subtitles)("track_interval",t.flowPlayerParams.track_interval)("autostart",t.autoStart)("speedControlEnabled",t.flowPlayerParams.allow_change_speed))},directives:[fa.a],styles:[".player-wrapper[_ngcontent-%COMP%] {\n            direction: ltr;\n        }"]}),e})();const dm=["playerIframe"];let um=(()=>{class e{constructor(e,t,i,s){this._backendService=e,this.router=t,this.userInteractionService=i,this.store=s,this.playerParams={url:null,bookmark:0,track_interval:1,progress:()=>{}},this.currentPlayerDuration=0,this.isFirstTrack=!0,this.isCompleted=!1,this.autoStart=!0,this.completed=new c.q,this.loaded=new c.q,this.ready=new c.q}beforeWindowClose(){this.track(this.currentPlayerDuration,this.currentPlayerDuration>=this.totalVideoDuration,!0)}ngOnInit(){this.chapter_viewer.launch_params&&(this.currentPlayerDuration=this.chapter_viewer.launch_params.bookmark,this.playerParams.url=this.chapter_viewer.launch_params.url||null,this.playerParams.bookmark=this.chapter_viewer.launch_params.bookmark||0,this.playerParams.track_interval=5,this.playerParams.progress=e=>{this.currentPlayerDuration=e.current,this.totalVideoDuration=e.duration,this.totalVideoDuration=this.totalVideoDuration>150?e.duration-15:.9*e.duration;const t=this.current_chapter.status!==String(ne.d.COMPLETED);this.isCompleted=Math.round(this.currentPlayerDuration)>=Math.round(this.totalVideoDuration)&&t,this.isFirstTrack&&0===Math.round(e.current)?this.isFirstTrack=!1:this.track(Math.round(this.currentPlayerDuration),this.isCompleted)})}ngOnDestroy(){const e=Math.round(this.currentPlayerDuration)>=Math.round(this.totalVideoDuration);this.chapter_must_be_tracked&&this.track(this.currentPlayerDuration,e),e||this.completed.emit(this.current_chapter.id)}ngAfterViewInit(){this.loaded.emit(!0)}onUserInteraction(e){const t=e&&e.payload?e.payload:{},i=Object.assign(Object.assign({},{courseId:this.course_id,loId:this.current_chapter.id,loType:zl.a.EMBEDDED_VIDEO}),t);e&&(this.currentUserInteraction=e.action),this.userInteractionService.track(e.action,fc.b.COURSE_PLAYER,i)}track(e,t=!1,i=!1){if(o.a.getInstance().isValid()){const s={track:{bookmark:e,complete:t}},n=Di.a.getInstance().get("access_token").access_token,a=`/learn/v1/lo/${this.current_chapter.id}/track`;if(i&&window.fetch){const e=new Headers({"Content-Type":"application/json; charset=UTF-8",Authorization:`Bearer ${n}`});fetch(a,{method:"POST",headers:e,body:JSON.stringify(s),mode:"same-origin",keepalive:!0}).then(()=>{this.trackSuccess(t)}).catch(e=>this.trackError(e))}else this._backendService.request(a,"POST",s,{},"",void 0,e=>this.trackError(e)).subscribe(()=>{this.trackSuccess(t)})}}trackSuccess(e){e&&this.completed.emit(this.current_chapter.id)}trackError(e){return 403===e.status?(this.router.navigate(["/learn/mycourses"],fi.b),Object(Ei.a)(null)):this._backendService.handleApiErrors(e)}onReady(){this.ready.emit()}onEmbedCompleted(e){this.isCompleted||this.playerParams.progress(e),this.store.dispatch(Ts.b.videoCompleted())}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a),c.ec(s.h),c.ec(fc.c),c.ec(w.e))},e.\u0275cmp=c.Yb({type:e,selectors:[["embeded-video-viewer"]],viewQuery:function(e,t){if(1&e&&c.nd(dm,1),2&e){let e;c.Rc(e=c.tc())&&(t.playerIframe=e.first)}},hostBindings:function(e,t){1&e&&c.sc("beforeunload",function(){return t.beforeWindowClose()},!1,c.Uc)},inputs:{current_chapter:"current_chapter",chapter_viewer:"chapter_viewer",course:"course",course_id:"course_id",autoStart:"autoStart",chapter_must_be_tracked:"chapter_must_be_tracked"},outputs:{completed:"completed",loaded:"loaded",ready:"ready"},decls:2,vars:4,consts:[[3,"url","bookmark","track_interval","autostart","progress","userInteraction","ready","complete"],["playerIframe",""]],template:function(e,t){1&e&&(c.kc(0,"player-iframe",0,1),c.sc("progress",function(e){return t.playerParams.progress(e)})("userInteraction",function(e){return t.onUserInteraction(e)})("ready",function(){return t.onReady()})("complete",function(e){return t.onEmbedCompleted(e)}),c.jc()),2&e&&c.Dc("url",t.playerParams.url)("bookmark",t.playerParams.bookmark)("track_interval",t.playerParams.track_interval)("autostart",t.autoStart)},directives:[ba.a],encapsulation:2}),e})();var hm=i("1vPS");const pm=["chapterPlayingWrapper"],gm=["chapterViewerWrapper"],mm=["chapterViewerContainer"],bm=["videoUploadViewer"],fm=["embededVideoViewer"];function _m(e,t){if(1&e&&(c.kc(0,"div",21),c.kc(1,"div",22),c.fc(2,"h3",23),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.Dc("innerHTML",null==e.current_chapter?null:e.current_chapter.name,c.Wc)}}function vm(e,t){1&e&&(c.kc(0,"div",24),c.fc(1,"ui-spinner"),c.jc())}function ym(e,t){if(1&e&&(c.fc(0,"p",31),c.xc(1,"t")),2&e){const e=c.wc(2);c.Dc("innerHTML",c.yc(1,1,e.lockedMessage),c.Wc)}}function wm(e,t){if(1&e&&(c.kc(0,"div",25),c.kc(1,"div",26),c.kc(2,"div",27),c.kc(3,"div",28),c.fc(4,"em",29),c.ed(5,ym,2,3,"p",30),c.jc(),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(5),c.Dc("ngIf",null==e.current_chapter?null:e.current_chapter.locked)}}function Cm(e,t){if(1&e){const e=c.lc();c.kc(0,"rectangular-button",35),c.sc("click",function(){return c.Vc(e),c.wc(2).goToProfile()}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("properties",e.goToProfileButton.properties)("buttonType","submit")}}const Sm=function(){return{category:"marketplace"}};function km(e,t){if(1&e&&(c.kc(0,"div",32),c.fc(1,"blankslate",33),c.xc(2,"t"),c.xc(3,"t"),c.fc(4,"blankslate",33),c.xc(5,"t"),c.xc(6,"t"),c.ed(7,Cm,1,2,"rectangular-button",34),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("title",c.yc(2,9,e.accessDeniedMessage))("subtitle",c.zc(3,11,"You cannot play this learning object because some details are missing in your profile: First Name, Last Name and/or Email. Fill them out in your My Profile area.",c.Hc(19,Sm)))("isVisible",!e.userAllowOnlyPasswordChange)("type","sad001"),c.Mb(3),c.Dc("title",c.yc(5,14,e.accessDeniedMessage))("subtitle",c.zc(6,16,"You cannot play this learning object because some details are missing in your profile. Please contact your Administrator.",c.Hc(20,Sm)))("isVisible",e.userAllowOnlyPasswordChange)("type","sad002"),c.Mb(3),c.Dc("ngIf",!e.userAllowOnlyPasswordChange)}}function Tm(e,t){1&e&&(c.kc(0,"span",40),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id("",c.yc(2,1,"Here's where you left off"),": "))}function Im(e,t){if(1&e){const e=c.lc();c.kc(0,"rectangular-button",41),c.sc("click",function(){c.Vc(e);const t=c.wc(2);return t.startPlaying(t.last_played_chapter,!0)}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("properties",e.resumeButton.properties)("state",e.isCourseStarted?"normal":"disabled")("buttonType","submit")}}function xm(e,t){if(1&e){const e=c.lc();c.kc(0,"rectangular-button",41),c.sc("click",function(){return c.Vc(e),c.wc(2).startPlaying()}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("properties",e.startButton.properties)("state",e.isCourseStarted?"normal":"disabled")("buttonType","submit")}}function Dm(e,t){if(1&e&&(c.kc(0,"div",36),c.kc(1,"div",27),c.kc(2,"div",28),c.ed(3,Tm,3,3,"span",37),c.xc(4,"json"),c.fc(5,"span",38),c.xc(6,"t"),c.xc(7,"t"),c.jc(),c.kc(8,"div",28),c.ed(9,Im,1,3,"rectangular-button",39),c.ed(10,xm,1,3,"rectangular-button",39),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();let t=null;c.Mb(3),c.Dc("ngIf","{}"!=c.yc(4,4,e.last_played_chapter)),c.Mb(2),c.Dc("innerHTML",c.yc(6,6,null==(t=e.whereYouLeftOfChapter(e.last_played_chapter))?null:t.name)?c.yc(7,8,null==(t=e.whereYouLeftOfChapter(e.last_played_chapter))?null:t.name):"",c.Wc),c.Mb(4),c.Dc("ngIf",e.resumeButton.properties.display),c.Mb(1),c.Dc("ngIf",e.startButton.properties.display)}}const Om=function(){return{category:"course"}};function Em(e,t){1&e&&(c.kc(0,"p",40),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.zc(2,1,"How would you rate this course?",c.Hc(4,Om))," "))}function Am(e,t){1&e&&(c.kc(0,"p",40),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"Thanks for rating!")," "))}function Pm(e,t){if(1&e){const e=c.lc();c.kc(0,"div",28),c.ed(1,Em,3,5,"p",37),c.ed(2,Am,3,3,"p",37),c.kc(3,"rating",51),c.sc("rate",function(t){return c.Vc(e),c.wc(2).rateChange(t)}),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngIf",!(null!=e.course&&null!=e.course.course_status&&e.course.course_status.is_rated)),c.Mb(1),c.Dc("ngIf",null==e.course||null==e.course.course_status?null:e.course.course_status.is_rated),c.Mb(1),c.Dc("value",e.raterParams.value)("mode",null==e.raterParams?null:e.raterParams.mode)("show_value",!0)("enable_voting",e.raterParams.enable_voting)("value_position",e.raterParams.value_position)("size",e.raterParams.size)("color",e.raterParams.color)}}function Mm(e,t){if(1&e&&(c.kc(0,"div",42),c.kc(1,"div",43),c.kc(2,"div",28),c.kc(3,"div",44),c.fc(4,"em",45),c.fc(5,"em",46),c.jc(),c.kc(6,"div",47),c.gd(7),c.xc(8,"t"),c.xc(9,"date"),c.jc(),c.jc(),c.kc(10,"div",48),c.kc(11,"h1",49),c.gd(12),c.xc(13,"cut"),c.jc(),c.jc(),c.ed(14,Pm,4,9,"div",50),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(7),c.jd(" ",c.yc(8,4,e.courseCompletedOnText)," ",c.yc(9,6,e.courseCompletionDate)," "),c.Mb(5),c.hd(c.zc(13,8,null==e.course?null:e.course.name,130)),c.Mb(2),c.Dc("ngIf",(null==e.course?null:e.course.rating_option)==e.ratingStatus.ALWAYS||(null==e.course?null:e.course.rating_option)==e.ratingStatus.ONLY_ENROLLED||(null==e.course_status?null:e.course_status.status)==e.courseStatusType.COMPLETED&&(null==e.course?null:e.course.rating_option)==e.ratingStatus.ONLY_COMPLETED)}}function Lm(e,t){if(1&e){const e=c.lc();c.kc(0,"sign-viewer",67),c.sc("completed",function(t){return c.Vc(e),c.wc(3).chapterCompleted(t)}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("currentChapter",e.current_chapter)("chapters",e.chapters)("completionDate",e.completionDate)("course",e.course)}}function jm(e,t){if(1&e){const e=c.lc();c.kc(0,"otj-viewer",68),c.sc("completed",function(t){return c.Vc(e),c.wc(3).chapterCompleted(t)}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("launch_params",e.chapter_viewer.launch_params)("course_id",null==e.course?null:e.course.id)("learning_plan_id",e.learning_plan_id)}}function Rm(e,t){if(1&e){const e=c.lc();c.kc(0,"html-viewer",69),c.sc("completed",function(t){return c.Vc(e),c.wc(3).chapterCompleted(t)})("loaded",function(t){return c.Vc(e),c.wc(3).chapterLoaded(t)}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("custom_css",null==e.course?null:e.course.html_page_css)("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function Fm(e,t){if(1&e){const e=c.lc();c.kc(0,"download-viewer",70),c.sc("completed",function(t){return c.Vc(e),c.wc(3).chapterCompleted(t)})("loaded",function(t){return c.Vc(e),c.wc(3).chapterLoaded(t)}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("downloadViewerActive",e.downloadViewerActive)("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function Nm(e,t){if(1&e){const e=c.lc();c.kc(0,"slides-view",71),c.sc("completed",function(t){return c.Vc(e),c.wc(3).chapterCompleted(t)})("loaded",function(t){return c.Vc(e),c.wc(3).chapterLoaded(t)}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function Um(e,t){if(1&e){const e=c.lc();c.kc(0,"tincan-viewer",72),c.sc("loaded",function(t){return c.Vc(e),c.wc(3).chapterLoaded(t)})("completed",function(t){return c.Vc(e),c.wc(3).chapterCompleted(t)}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("current_chapter",e.current_chapter)("courseHasAutoplay",null==e.course?null:e.course.has_autoplay)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)("learning_plan_id",e.learning_plan_id)}}function zm(e,t){if(1&e){const e=c.lc();c.kc(0,"aicc-viewer",73),c.sc("loaded",function(t){return c.Vc(e),c.wc(3).chapterLoaded(t)})("completed",function(t){return c.Vc(e),c.wc(3).chapterCompleted(t)}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("current_chapter",e.current_chapter)("courseHasAutoplay",null==e.course?null:e.course.has_autoplay)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function qm(e,t){if(1&e){const e=c.lc();c.kc(0,"scorm-viewer",74),c.sc("completed",function(t){return c.Vc(e),c.wc(3).chapterCompleted(t)})("loaded",function(t){return c.Vc(e),c.wc(3).chapterLoaded(t)})("next",function(t){return c.Vc(e),c.wc(3).changeChapter(t)}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("courseHasAutoplay",null==e.course?null:e.course.has_autoplay)("course_id",null==e.course?null:e.course.id)}}function Vm(e,t){if(1&e){const e=c.lc();c.kc(0,"assignments-viewer",75),c.sc("loaded",function(t){return c.Vc(e),c.wc(3).chapterLoaded(t)})("completed",function(t){return c.Vc(e),c.wc(3).chapterCompleted(t)}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function Bm(e,t){if(1&e){const e=c.lc();c.kc(0,"survey-player",71),c.sc("completed",function(t){return c.Vc(e),c.wc(3).chapterCompleted(t)})("loaded",function(t){return c.Vc(e),c.wc(3).chapterLoaded(t)}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function Gm(e,t){if(1&e){const e=c.lc();c.kc(0,"quiz-player",76),c.sc("completed",function(t){return c.Vc(e),c.wc(3).chapterCompleted(t)})("loaded",function(t){return c.Vc(e),c.wc(3).chapterLoaded(t)})("changeMode",function(t){return c.Vc(e),c.wc(3).switchMode(t)})("loadChapter",function(t){return c.Vc(e),c.wc(3).loadChapter(t)}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("next_chapter",e.next_chapter)("learning_plan_id",e.learning_plan_id)("course_id",null==e.course?null:e.course.id)("course",e.course)}}function Hm(e,t){if(1&e){const e=c.lc();c.kc(0,"lti-viewer",71),c.sc("completed",function(t){return c.Vc(e),c.wc(3).chapterCompleted(t)})("loaded",function(t){return c.Vc(e),c.wc(3).chapterLoaded(t)}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function $m(e,t){if(1&e){const e=c.lc();c.kc(0,"gdrive-viewer",71),c.sc("completed",function(t){return c.Vc(e),c.wc(3).chapterCompleted(t)})("loaded",function(t){return c.Vc(e),c.wc(3).chapterLoaded(t)}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function Ym(e,t){if(1&e){const e=c.lc();c.kc(0,"elucidat-viewer",77),c.sc("loaded",function(t){return c.Vc(e),c.wc(3).chapterLoaded(t)}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)}}function Wm(e,t){if(1&e){const e=c.lc();c.kc(0,"video-upload-viewer",78,79),c.sc("completed",function(t){return c.Vc(e),c.wc(3).chapterCompleted(t)})("loaded",function(t){return c.Vc(e),c.wc(3).chapterLoaded(t)})("ready",function(){return c.Vc(e),c.wc(3).setPlayerStatus()}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course",e.course)("autoStart",e.playerAutoStart)("chapter_must_be_tracked",e.chapter_must_be_tracked)}}function Qm(e,t){if(1&e){const e=c.lc();c.kc(0,"embeded-video-viewer",80,81),c.sc("completed",function(t){return c.Vc(e),c.wc(3).chapterCompleted(t)})("loaded",function(t){return c.Vc(e),c.wc(3).chapterLoaded(t)})("ready",function(){return c.Vc(e),c.wc(3).setPlayerStatus()}),c.jc()}if(2&e){const e=c.wc(3);c.Dc("current_chapter",e.current_chapter)("chapter_viewer",e.chapter_viewer)("course_id",null==e.course?null:e.course.id)("chapter_must_be_tracked",e.chapter_must_be_tracked)("autoStart",e.playerAutoStart)}}function Km(e,t){if(1&e&&(c.ic(0),c.ed(1,Lm,1,4,"sign-viewer",54),c.ed(2,jm,1,3,"otj-viewer",55),c.ed(3,Rm,1,4,"html-viewer",56),c.ed(4,Fm,1,4,"download-viewer",57),c.ed(5,Nm,1,3,"slides-view",58),c.ed(6,Um,1,5,"tincan-viewer",59),c.ed(7,zm,1,4,"aicc-viewer",60),c.ed(8,qm,1,4,"scorm-viewer",61),c.ed(9,Vm,1,3,"assignments-viewer",62),c.ed(10,Bm,1,3,"survey-player",58),c.ed(11,Gm,1,6,"quiz-player",63),c.ed(12,Hm,1,3,"lti-viewer",58),c.ed(13,$m,1,3,"gdrive-viewer",58),c.ed(14,Ym,1,3,"elucidat-viewer",64),c.ed(15,Wm,2,5,"video-upload-viewer",65),c.ed(16,Qm,2,5,"embeded-video-viewer",66),c.hc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngIf",(null==e.current_chapter?null:e.current_chapter.type)===e.chapterTypeSign),c.Mb(1),c.Dc("ngIf","otj"===(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","htmlpage"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","file"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","authoring"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","tincan"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","aicc"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","scormorg"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","deliverable"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","poll"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","test"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","lti"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","googledrive"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","elucidat"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","video"==(null==e.current_chapter?null:e.current_chapter.type)),c.Mb(1),c.Dc("ngIf","youtube"==(null==e.current_chapter?null:e.current_chapter.type)||"wistia"==(null==e.current_chapter?null:e.current_chapter.type)||"vimeo"==(null==e.current_chapter?null:e.current_chapter.type))}}function Jm(e,t){if(1&e&&(c.kc(0,"div",null,52),c.ed(2,Km,17,16,"ng-container",53),c.jc()),2&e){const e=c.wc();c.Rb("chapter-playing ",e.chapter_viewer&&null!=e.chapter_viewer&&e.chapter_viewer.launch_params&&"popup"!=(null==e.chapter_viewer||null==e.chapter_viewer.launch_params?null:e.chapter_viewer.launch_params.mode)||(null==e.current_chapter?null:e.current_chapter.type)===e.chapterTypeSign?"bg-white":"",""),c.Mb(2),c.Dc("ngIf",!e.showCompletedInfo)}}function Xm(e,t){1&e&&(c.kc(0,"span",90),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.zc(2,1,"How would you rate this course?",c.Hc(4,Om))," "))}function Zm(e,t){1&e&&(c.kc(0,"span",90),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"Thanks for rating!")," "))}function eb(e,t){if(1&e){const e=c.lc();c.kc(0,"div",88),c.kc(1,"div",27),c.kc(2,"div",28),c.ed(3,Xm,3,5,"span",89),c.ed(4,Zm,3,3,"span",89),c.kc(5,"rating",51),c.sc("rate",function(t){return c.Vc(e),c.wc(2).rateChange(t)}),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Mb(3),c.Dc("ngIf",!(null!=e.course&&null!=e.course.course_status&&e.course.course_status.is_rated)),c.Mb(1),c.Dc("ngIf",null==e.course||null==e.course.course_status?null:e.course.course_status.is_rated),c.Mb(1),c.Dc("value",e.raterParams.value)("mode",null==e.raterParams?null:e.raterParams.mode)("show_value",!0)("enable_voting",e.raterParams.enable_voting)("value_position",e.raterParams.value_position)("size",e.raterParams.size)("color",e.raterParams.color)}}const tb=function(e,t){return{shown:e,"with-rating":t}},ib=function(e,t,i){return{"bg-main":e,"bg-grey-mid":t,"bg-positive-green":i}},sb=function(e,t){return{"zmdi-check-all text-positive-green":e,"zmdi-time text-grey-mid":t}};function nb(e,t){if(1&e&&(c.kc(0,"div",82),c.kc(1,"div",83),c.fc(2,"p",84),c.xc(3,"t"),c.kc(4,"div",85),c.fc(5,"em",86),c.jc(),c.jc(),c.ed(6,eb,6,9,"div",87),c.jc()),2&e){const e=c.wc();c.Dc("ngClass",c.Jc(7,tb,e.showCompletionBar,(null==e.course?null:e.course.rating_option)==e.ratingStatus.ALWAYS||(null==e.course?null:e.course.rating_option)==e.ratingStatus.ONLY_ENROLLED||(null==e.course_status?null:e.course_status.status)==e.courseStatusType.COMPLETED&&(null==e.course?null:e.course.rating_option)==e.ratingStatus.ONLY_ENROLLED)),c.Mb(1),c.Dc("ngClass",c.Kc(10,ib,"deliverable"!=(null==e.current_chapter?null:e.current_chapter.type)&&(null==e.chapter_viewer?null:e.chapter_viewer.status)!=e.courseViewerStatus.COURSE_COMPLETED&&(null==e.chapter_viewer?null:e.chapter_viewer.status)==e.courseViewerStatus.ACTIVITY_COMPLETED,"deliverable"==(null==e.current_chapter?null:e.current_chapter.type)&&(null==e.chapter_viewer?null:e.chapter_viewer.status)!=e.courseViewerStatus.COURSE_COMPLETED&&(null==e.chapter_viewer?null:e.chapter_viewer.status)==e.courseViewerStatus.ACTIVITY_COMPLETED,(null==e.chapter_viewer?null:e.chapter_viewer.status)!=e.courseViewerStatus.ACTIVITY_COMPLETED&&(null==e.course_status?null:e.course_status.status)==e.courseStatusType.COMPLETED)),c.Mb(1),c.Dc("innerHTML",c.yc(3,5,e.activityCompletedMessage),c.Wc),c.Mb(3),c.Dc("ngClass",c.Jc(14,sb,(null==e.current_chapter?null:e.current_chapter.status)==e.courseStatusType.COMPLETED&&"deliverable"!=(null==e.current_chapter?null:e.current_chapter.type)||(null==e.course_status?null:e.course_status.status)==e.courseStatusType.COMPLETED,(null==e.current_chapter?null:e.current_chapter.status)==e.courseStatusType.COMPLETED&&"deliverable"==(null==e.current_chapter?null:e.current_chapter.type))),c.Mb(1),c.Dc("ngIf",(null==e.course?null:e.course.rating_option)==e.ratingStatus.ALWAYS||(null==e.course?null:e.course.rating_option)==e.ratingStatus.ONLY_ENROLLED||(null==e.course_status?null:e.course_status.status)==e.courseStatusType.COMPLETED&&(null==e.course?null:e.course.rating_option)==e.ratingStatus.ONLY_COMPLETED)}}function ab(e,t){if(1&e&&c.fc(0,"rectangular-button",100),2&e){const e=c.wc(3);c.Dc("properties",e.prevButtonParams.properties)("state",e.lockedNavigationButtons(e.prev_chapter,e.prevButtonParams.properties))("displayText",!0)("click",e.prevButtonParams.onClick)}}function ob(e,t){if(1&e&&c.fc(0,"span",101),2&e){const e=c.wc(3);c.Dc("innerHTML",null==e.prev_chapter?null:e.prev_chapter.name,c.Wc)}}function rb(e,t){if(1&e&&(c.kc(0,"div",95),c.kc(1,"div",96),c.ed(2,ab,1,4,"rectangular-button",97),c.jc(),c.kc(3,"div",98),c.ed(4,ob,1,1,"span",99),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(2),c.Dc("ngIf",e.hasPreviousNavigationButton),c.Mb(2),c.Dc("ngIf",e.hasPreviousNavigationButton)}}function cb(e,t){if(1&e&&c.fc(0,"span",104),2&e){const e=c.wc(3);c.Dc("innerHTML",null==e.next_chapter?null:e.next_chapter.name,c.Wc)}}function lb(e,t){if(1&e&&c.fc(0,"rectangular-button",100),2&e){const e=c.wc(3);c.Dc("properties",e.nextButtonParams.properties)("state",e.lockedNavigationButtons(e.next_chapter,e.nextButtonParams.properties))("displayText",!0)("click",e.nextButtonParams.onClick)}}function db(e,t){if(1&e&&(c.kc(0,"div",102),c.kc(1,"div",98),c.ed(2,cb,1,1,"span",103),c.jc(),c.kc(3,"div",96),c.ed(4,lb,1,4,"rectangular-button",97),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(2),c.Dc("ngIf",e.hasNextNavigationButton),c.Mb(2),c.Dc("ngIf",e.hasNextNavigationButton)}}function ub(e,t){if(1&e&&(c.kc(0,"div",91),c.kc(1,"div",92),c.ed(2,rb,5,2,"div",93),c.ed(3,db,5,2,"div",94),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.Dc("ngIf",e.showNavigation),c.Mb(1),c.Dc("ngIf",e.showNavigation)}}const hb=function(e){return{"bg-grey-superlight":e}},pb=function(e){return{"background-image":e}},gb=function(){return{category:"app7020"}},mb=function(){return{"":""}};let bb;function fb(){setInterval(()=>{postMessage("track")},3e5)}let _b=(()=>{class e extends vc.a{constructor(e,t,i,s,n,a,o,r,l,d,u,h,p,g,m){super(),this._el=e,this._renderer=t,this.cd=i,this.router=s,this._store=n,this._coursePlayerAction=a,this._backendService=o,this.http=r,this.formatterService=l,this.route=d,this.toggleService=u,this.userInteractionService=h,this.windowService=p,this.svc=g,this._docLayoutService=m,this.preserve_lightbox=null,this.device=null,this.isCourseStarted=!0,this.rate=new c.q,this.play=new c.q,this.completed=new c.q,this.loaded=new c.q,this.nextChapter=new c.q,this.raterParams={},this.downloadViewerActive=new _t.a,this.showCompletedInfo=!1,this.ratingStatus=bc.a,this.courseViewerStatus=$t.h,this.chapterTypeSign=$t.a.SIGN.toString(),this.eSignatureStatus=$t.i,this.courseStatusType=$t.e,this.showCompletionBar=!1,this.showNavigation=!0,this.hasWindowFocus=!0,this.hasLightboxView=!1,this.docLayoutConfig=this._docLayoutService.getDocLayoutConfig(),this.hideTitleBar=!1,this.disableLightbox=!1,this.keepAliveInterval=null,this.platform=E.b.getInstance(),this.playerAutoStart=!0,this.routeSubscriber=this.route.params.subscribe(e=>{this.activeLpFromRoute=e.lp?e.lp:void 0})}get lastPlayedChapter(){return this.last_played_chapter}set lastPlayedChapter(e){this.last_played_chapter=e,this.manageChapterButtons()}eventHandler(e){var t,i,s;(null===(t=this.current_chapter)||void 0===t?void 0:t.id)&&"sign"!==(null===(i=this.current_chapter)||void 0===i?void 0:i.type)&&"locked"!==(null===(s=this.current_chapter)||void 0===s?void 0:s.locked)&&fetch(`/learn/v1/lo/${this.current_chapter.id}/session`,{method:"POST",body:JSON.stringify({context:"lms"}),keepalive:!0,cache:"no-cache",headers:{Authorization:"Bearer "+Di.a.getInstance().get("access_token").access_token,"Content-Type":"application/json"}})}ngAfterViewInit(){Boolean(this.platform.disable_simultaneous_access)&&this.windowService.focus().pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{void 0!==this.current_chapter&&this.isCurrentChapterVideo()&&(this.hasWindowFocus=e,this.setPlayerStatus())})}onCloseButtonClick(){const e=this.chapterViewerWrapper.nativeElement,t=this.chapterViewerWrapper.nativeElement.querySelector(".chapter-viewer__body");e.classList.contains("lightbox")&&(e.classList.toggle("lightbox"),e.classList.add("inline"),this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.height&&(this._renderer.setStyle(t,"height",this.chapter_viewer.launch_params.height),e.classList.add("no-min-height")),document.body.classList.contains("hide-overflow")&&document.body.classList.remove("hide-overflow"),this.loaded.emit(!0)),this.chapterViewerWrapper.nativeElement.querySelector(".slides-player__wrap")&&this.chapterViewerWrapper.nativeElement.querySelector(".slides-player__wrap").classList.contains("lightbox")&&(this.chapterViewerWrapper.nativeElement.querySelector(".slides-player__wrap").classList.remove("lightbox"),document.body.classList.contains("hide-overflow")&&document.body.classList.remove("hide-overflow"));const i=`/learn/course/${this.course.id}/play/`,s=fi.b;s.lp&&delete s.lp,this.course.has_autoplay&&(s.autoplay=0),this.activeLpFromRoute&&(s.lp=this.activeLpFromRoute);const n="authoring"===this.current_chapter.type;"scormorg"===this.current_chapter.type||"tincan"===this.current_chapter.type||"aicc"===this.current_chapter.type||"elucidat"===this.current_chapter.type||n?new Promise((e,t)=>{var i,s,a,o,r;const c=null!==(r=null!==(o=null!==(a=null!==(s=null!==(i=document.getElementById("scorm-iframe"))&&void 0!==i?i:document.querySelector("#tincan-iframe-wrapper iframe"))&&void 0!==s?s:document.getElementById("aicc-iframe"))&&void 0!==a?a:document.querySelector(".slides-player__wrap"))&&void 0!==o?o:document.getElementById("elucidat-iframe"))&&void 0!==r?r:document.querySelector(".chapter-viewer__body");c?n?(c.remove(),e(!0)):(c.addEventListener("load",t=>{c.parentNode&&c.parentNode.removeChild(c),e(!0)}),c.setAttribute("src","about:blank")):e(!1)}).then(e=>{if(e){const e=Object.assign(Object.assign({},fi.b),{autoplay:0});this.activeLpFromRoute&&(e.lp=this.activeLpFromRoute),this.router.navigate([`/learn/course/${this.course.id}/play`,e],fi.b),this._store.dispatch(Ts.b.onLightboxWindowClose(this.course.id,this.current_chapter.id,[`/learn/course/${this.course.id}/play`,e]))}else this.router.navigate([i,s]),this._store.dispatch(Ts.b.onLightboxWindowClose(this.course.id,this.current_chapter.id,[i,s]))}):this.router.navigate([i,s])}ngOnChanges(e){var t;const i=this._el.nativeElement.querySelector(".chapter-viewer__wrapper"),s=this._el.nativeElement.querySelector(".chapter-viewer__body");if(e.current_chapter&&this.current_chapter){e.current_chapter.previousValue&&e.current_chapter.previousValue.id&&this.userInteractionService.track(fc.a.LEARNING_OBJECT_CLOSE,fc.b.COURSE_PLAYER,{courseId:this.course.id,loId:e.current_chapter.previousValue.id,loType:Object(_c.a)(e.current_chapter.previousValue.type||"")});try{const e=["aicc","scormorg","tincan","authoring"],i=JSON.parse(this.current_chapter.params);this.hasLightboxView=i&&i.desktop_openmode&&"lightbox"===i.desktop_openmode&&-1!==e.indexOf(this.current_chapter.type)||"lightbox"===(null===(t=this.current_chapter)||void 0===t?void 0:t.mode)}catch(n){}this.userInteractionService.track(fc.a.LEARNING_OBJECT_OPEN,fc.b.COURSE_PLAYER,{courseId:this.course.id,loId:this.current_chapter.id,loType:Object(_c.a)(this.current_chapter.type||"")})}if(this.current_chapter&&bb!==this.current_chapter.id&&i&&(this._renderer.setStyle(s,"height",""),i.classList.contains("auto-height-player")&&i.classList.remove("auto-height-player"),i.classList.contains("no-min-height")&&i.classList.remove("no-min-height"),document.body.classList.contains("hide-overflow")&&!this.preserve_lightbox&&document.body.classList.remove("hide-overflow"),i.classList.contains("inline")&&i.classList.remove("inline"),i.classList.contains("lightbox")&&!this.preserve_lightbox&&(i.classList.remove("lightbox"),i.classList.contains("inline")||i.classList.add("inline"))),this.chapter_viewer){if(bb=this.current_chapter?this.current_chapter.id:null,this.chapter_viewer.launch_params)if(this.hideTitleBar=this.chapter_viewer.launch_params.hide_title_bar,this.chapter_viewer.status==$t.h.PLAYING&&this.chapter_viewer.launch_params.mode)switch(this.chapter_viewer.launch_params.mode){case"lightbox":i&&(i.classList.contains("inline")&&i.classList.remove("inline"),this.disableLightbox||i.classList.add("lightbox"),this.disableLightbox=!1,document.body.classList.add("hide-overflow"),this._renderer.setStyle(i,"height",""));break;case"fullscreen":case"popup":this._renderer.setStyle(s,"height",""),i.classList.contains("no-min-height")&&i.classList.remove("no-min-height");break;case"inline":i&&(i.classList.contains("lightbox")&&i.classList.remove("lightbox"),i.classList.add("inline"),document.body.classList.contains("hide-overflow")&&document.body.classList.remove("hide-overflow"),this.chapter_viewer.launch_params.height&&this.chapter_viewer.launch_params.height>100&&"video"!=this.current_chapter.type&&"wistia"!=this.current_chapter.type&&"vimeo"!=this.current_chapter.type&&"youtube"!=this.current_chapter.type&&"googledrive"!=this.current_chapter.type&&(this._renderer.setStyle(s,"height",this.chapter_viewer.launch_params.height),i.classList.add("no-min-height")));break;default:i&&this.chapter_viewer.launch_params.height?(this._renderer.setStyle(s,"height",this.chapter_viewer.launch_params.height),i.classList.add("no-min-height")):i&&!this.chapter_viewer.launch_params.height&&(this._renderer.setStyle(s,"height",""),i.classList.contains("no-min-height")&&i.classList.remove("no-min-height"))}else rt.a.isEmpty(this.chapter_viewer.launch_params.mode)&&i&&(i.classList.contains("lightbox")&&!this.prev_chapter&&i.classList.remove("lightbox"),document.body.classList.contains("hide-overflow")&&!this.preserve_lightbox&&document.body.classList.remove("hide-overflow"),this.chapter_viewer.launch_params.height&&this.chapter_viewer.launch_params.height>100&&"video"!=this.current_chapter.type&&"wistia"!=this.current_chapter.type&&"vimeo"!=this.current_chapter.type&&"youtube"!=this.current_chapter.type&&"googledrive"!=this.current_chapter.type&&(this._renderer.setStyle(s,"height",this.chapter_viewer.launch_params.height),i.classList.add("no-min-height")));this.current_chapter&&this.oldChapter&&this.current_chapter.id===this.oldChapter.id&&this.oldChapter.status!==this.current_chapter.status&&this.current_chapter.status==String(this.courseStatusType.COMPLETED)&&("deliverable"===this.current_chapter.type?this.activityCompletedMessage=M.a.t("course",'<span class="bolded">This activity requires instructor\'s evaluation.</span> In the meantime, you can proceed using <span class="bolded">next</span> or <span class="bolded">previous</span> buttons'):(this.activityCompletedMessage=M.a.t("course",this.chapters.length>1?'<span class="bolded">This activity is completed</span>, you can now proceed using <span class="bolded">next</span> or <span class="bolded">previous</span> buttons':'<span class="bolded">You have completed the course</span>.'),this.completionBarAnimation("up"),this.completionBarAnimation("down"))),this.course_status.status_changed&&this.chapter_viewer.status==this.courseViewerStatus.COURSE_COMPLETED&&(this.activityCompletedMessage=M.a.t("course",this.course.certificate_url?'<span class="bolded">You have completed the course</span>, you can now <span class="bolded">download your certificate.</span>':'<span class="bolded">You have completed the course</span>.'),this.completionBarAnimation("up"),this.completionBarAnimation("down")),this.chapter_viewer.status===this.courseViewerStatus.PLAY_REJECT_USERFIELDS&&(this.userAllowOnlyPasswordChange=E.b.getInstance().settings.allow_only_password_change)}this.course_status.status===$t.e.COMPLETED&&this.course_status.hasOwnProperty("completion_date")&&(!this.current_chapter||rt.a.isEmpty(this.current_chapter))||this.course.esignature_status===$t.i.SIGNED&&this.course_status.status===$t.e.COMPLETED&&this.current_chapter.type===$t.a.SIGN.toString()?(this.showCompletedInfo=!0,this.completionDate=this.formatterService.getTimezonedDate(this.course_status.completion_date,o.a.getInstance().timezone),this.courseCompletedOnText=M.a.t("course","Course completed on")):this.showCompletedInfo=!1,this.raterParams.hasOwnProperty("value")&&this.course.hasOwnProperty("current_rating")&&(this.raterParams.value=this.course.current_rating,this.raterParams.enable_voting=!this.course_status.is_rated)}ngOnInit(){var e,t,i;this.raterParams={value:this.course.hasOwnProperty("current_rating")?this.course.current_rating:0,enable_voting:!this.course_status.is_rated,show_value:!0,mode:"five_stars",value_position:"left",size:30,color:"rgb(255,215,0)",title:M.a.t("standard","How would you rate this course?")},this.showNavigation=this.course.hasOwnProperty("show_lightbox_nav")&&this.course.show_lightbox_nav,this.nextButtonParams={properties:{text:M.a.t("standard","_NEXT"),colorScheme:"main",typeStyle:"filled"},onClick:()=>{this.changeChapter("next")}},this.prevButtonParams={properties:{text:M.a.t("standard","_PREV"),colorScheme:"main",typeStyle:"filled"},onClick:()=>{this.changeChapter("prev")}},this.manageChapterButtons(),this.accessDeniedMessage=M.a.t("course","_NOENTER");let s=!1;if("scormorg"===(null===(e=this.current_chapter)||void 0===e?void 0:e.type)&&(null===(t=this.current_chapter)||void 0===t?void 0:t.params)){const e=JSON.parse(this.current_chapter.params);e.hasOwnProperty("openmode")&&(s="lightbox"===e.openmode||"inline"===e.openmode)}if(!s&&this.current_chapter&&"locked"!==(null===(i=this.current_chapter)||void 0===i?void 0:i.locked))if("undefined"!=typeof Worker){const e=this.fn2workerURL(fb);this.trackSessionWorker=new Worker(e),this.trackSessionWorker.onmessage=({})=>{this.trackSessionRequest()}}else this.keepAliveInterval=setInterval(()=>{this.trackSessionRequest()},3e5);this.course_status&&"completion_date"in this.course_status&&this.course_status.completion_date&&(this.completionDate=this.formatterService.getTimezonedDate(this.course_status.completion_date,o.a.getInstance().timezone))}fn2workerURL(e){const t=new Blob(["("+e.toString()+")()"],{type:"text/javascript"});return URL.createObjectURL(t)}ngOnDestroy(){var e;super.ngOnDestroy(),this.current_chapter&&this.current_chapter.id&&(this.userInteractionService.track(fc.a.LEARNING_OBJECT_CLOSE,fc.b.COURSE_PLAYER,{courseId:this.course.id,loId:this.current_chapter?this.current_chapter.id:void 0,loType:Object(_c.a)(this.current_chapter.type||"")}),"locked"!==(null===(e=this.current_chapter)||void 0===e?void 0:e.locked)&&this.chapter_must_be_tracked&&this.trackSessionRequest()),this.keepAliveInterval&&clearInterval(this.keepAliveInterval),this.trackSessionWorker&&this.trackSessionWorker.terminate(),this.routeSubscriber&&this.routeSubscriber.unsubscribe(),document.body.classList.remove("hide-overflow")}getChapterMode(e){let t={},i="lightbox";if(e.params?t=JSON.parse(e.params):e.params_inherited&&(t=JSON.parse(e.params_inherited)),["aicc","authoring","elucidat","lti","scormorg","tincan"].indexOf(e.type)>-1)if("authoring"==e.type||"tincan"==e.type){let s=t.hasOwnProperty("openmode")?t.openmode:"lightbox";"authoring"==e.type&&"popup"==s&&(s="lightbox"),i=s}else i=t.hasOwnProperty("desktop_openmode")?t.desktop_openmode:"lightbox";else i="inline";return i}isChapterLightbox(e){return"lightbox"===e&&!(!this.chapter_viewer||void 0===this.chapter_viewer)&&this.chapter_viewer.launch_params&&this.chapter_viewer.launch_params.mode==e}changeChapter(e="next"){var t;const i="next"===e?this.next_chapter:this.prev_chapter;i&&((null==i?void 0:i.locked)?this.svc.getChapterLockStatus((null===(t=this.course)||void 0===t?void 0:t.id)||-1,i.id).subscribe(({chapters:t,locked:s})=>{s?this.svc.showChapterLockedModal(i,this.cd):(this._store.dispatch(Ts.a.reloadChapters(t)),this.playChapter(i,e))}):this.playChapter(i,e))}playChapter(e,t="next"){new Promise((e,t)=>{const i=document.getElementById("scorm-iframe");i?(i.addEventListener("load",t=>{i.parentNode&&i.parentNode.removeChild(i),e(!0)}),i.setAttribute("src","about:blank")):e(!1)}).then(()=>{const e={};if(this.device&&(e.device=this.device),"next"===t){const t=this.getChapterMode(this.next_chapter);this.isChapterLightbox(t)?this._store.dispatch(Ts.b.startPlaying({id:this.next_chapter.id,preserve_lightbox:"lightbox"===t,chapters:this.chapters,params:e})):(this._store.dispatch(Ts.a.reloadCoursePlayer(this.course.id,this.current_chapter.id)),this.router.navigate([`learn/course/${this.course.id}/play/${this.next_chapter.id}/${this.next_chapter.slug_name}`]))}else{const t=this.getChapterMode(this.prev_chapter);this.isChapterLightbox(t)?this._store.dispatch(Ts.b.startPlaying({id:this.prev_chapter.id,preserve_lightbox:"lightbox"===t,navigating_back:!0,chapters:this.chapters,params:e})):(this._store.dispatch(Ts.a.reloadCoursePlayer(this.course.id,this.current_chapter.id)),this.router.navigate([`learn/course/${this.course.id}/play/${this.prev_chapter.id}/${this.prev_chapter.slug_name}`]))}})}rateChange(e){this.rate.emit(e)}playCourse(){this.play.emit(!0),(this.current_chapter&&this.current_chapter.status==String(this.courseStatusType.COMPLETED)||this.chapter_viewer.status==this.courseViewerStatus.COURSE_COMPLETED)&&(this.completionBarAnimation("up"),this.completionBarAnimation("down"))}startPlaying(e,t=!1){rt.a.isEmpty(e)&&(e=this.current_chapter);const i={};if(this.learning_plan_id&&(i.lp=this.learning_plan_id),rt.a.isEmpty(e))this.play.emit();else{if(t){const t=this.whereYouLeftOfChapter(e);return void this.router.navigate([`learn/course/${this.course.id}/play/${t.id}/${t.slug_name}`,i])}this.router.navigate([`learn/course/${this.course.id}/play/${e.id}/${e.slug_name}`,i])}}chapterCompleted(e){if(this.current_chapter.id==e&&"scormorg"===this.current_chapter.type){this.switchMode({mode:"inline"},!0),this.disableLightbox=!0;const e={};this.course.has_autoplay&&(e.autoplay=0),this.learning_plan_id&&(e.lp=this.learning_plan_id),this.router.navigate([`learn/course/${this.course.id}/play`,e],fi.b),this._store.dispatch(Ts.b.onLightboxWindowClose(this.course.id,this.current_chapter.id,[`/learn/course/${this.course.id}/play`,e]))}this.completed.emit(e),this.current_chapter&&this.current_chapter.status!==String(this.courseStatusType.COMPLETED)&&(this.oldChapter=this.current_chapter)}chapterLoaded(e){"authoring"!=this.current_chapter.type&&"video"!=this.current_chapter.type&&"youtube"!=this.current_chapter.type&&"vimeo"!=this.current_chapter.type&&"sign"!=this.current_chapter.type&&"wistia"!=this.current_chapter.type&&"file"!=this.current_chapter.type&&"googledrive"!=this.current_chapter.type||this.chapterViewerWrapper.nativeElement.classList.add("auto-height-player"),setTimeout(()=>{this.downloadViewerActive.next("file"==this.current_chapter.type),this.loaded.emit(!0)},30),this.oldChapter=this.current_chapter,this.manageChapterButtons()}switchMode(e,t){e.mode||(e.mode="lightbox");const i=e.mode;this.changedMode=this.current_chapter.mode=i;const s=this.chapterViewerWrapper.nativeElement;"standalone"===i&&(s.classList.add("standalone"),s.classList.add("bg-grey-superlight"),document.querySelector("body").classList.add("standalone-mode")),"inline"===i&&(s.className.indexOf("standalone")>-1&&s.classList.remove("standalone"),s.className.indexOf("bg-grey-superlight")>-1&&s.classList.remove("bg-grey-superlight"),document.querySelector("body").className.indexOf("standalone-mode")>-1&&document.querySelector("body").classList.remove("standalone-mode")),"lightbox"===i&&s.classList.add("lightbox"),"inline"==i&&((s.className.indexOf("lightbox")&&!this.preserve_lightbox||t)&&s.classList.remove("lightbox"),s.classList.add("inline"))}completionBarAnimation(e){let t,i;"up"===e?(i=!0,t=800):(i=!1,t=5e3),setTimeout(()=>{this.showCompletionBar=i,this.downloadViewerActive.next(!i),this.cd.markForCheck()},t)}loadChapter(e){this.nextChapter.emit(e.chapter.id)}lockedNavigationButtons(e,t){return t.icon="",e.hasOwnProperty("locked")||e.hasOwnProperty("status")?"normal":"disabled"}whereYouLeftOfChapter(e){return wc(e,this.chapters)}isInLightboxMode(){return this.chapterViewerWrapper&&this.chapterViewerWrapper.nativeElement&&this.chapterViewerWrapper.nativeElement.classList.contains("lightbox")}getLightboxPosition(e){return this.isInLightboxMode()?document.body.getBoundingClientRect()[e]-this.chapterViewerContainer.nativeElement.getBoundingClientRect()[e]+"px":"0px"}detectChanges(){this.cd.detectChanges()}setPlayerStatus(){this.videoUploadViewer&&this.videoUploadViewer.playerFlowPlayer&&this.videoUploadViewer.playerFlowPlayer.player?this.setFlowPlayerStatus():this.embededVideoViewer&&this.embededVideoViewer.playerIframe&&this.embededVideoViewer.playerIframe.dclComponent&&this.embededVideoViewer.playerIframe.dclComponent.player&&this.setIframePlayerStatus()}goToProfile(){this.router.navigate(["/learn/my-profile"])}get lockedMessage(){switch(this.current_chapter.locked){case"max_number_views":return M.a.t("course","You have reached the maximum number of views");case"locked_maxattempts":return this.current_chapter.status_message;default:return M.a.t("course","You must complete {message} in order to unlock this activity",{message:`\n                <div class="mdl-cell--12-col">\n                    <h1 class=" text-grey-dark">${this.current_chapter.status_message}</h1>\n                </div>\n                `})}}get courseCompletionDate(){if(this.course_status&&"completion_date"in this.course_status&&this.course_status.completion_date)return this.formatterService.getTimezonedDate(this.course_status.completion_date,o.a.getInstance().timezone)}isCurrentChapterVideo(){return"video"===this.current_chapter.type||"youtube"===this.current_chapter.type||"vimeo"===this.current_chapter.type||"wistia"===this.current_chapter.type}manageChapterButtons(){const e=!rt.a.isEmpty(this.last_played_chapter)&&this.course_status.status!=$t.e.COMPLETED&&("elearning"==this.course.type||"classroom"==this.course.type&&this.toggleService.isOn(u.f.TOGGLE_VILT)),t=this.chapters&&this.chapters.length>0&&(!this.current_chapter||rt.a.isEmpty(this.current_chapter)&&!e)&&this.course_status.status!=$t.e.COMPLETED;this.resumeButton={properties:{text:M.a.t("standard","Resume where you left off"),colorScheme:"main",typeStyle:"filled",display:e}},this.startButton={properties:{text:M.a.t("standard","Start learning now"),colorScheme:"positive-green",typeStyle:"filled",display:t}},this.goToProfileButton={properties:{text:M.a.t("course","Go to my profile"),colorScheme:"positive-green",typeStyle:"filled",display:t}}}setFlowPlayerStatus(){if((this.videoUploadViewer.currentUserInteraction!==fc.a.UPLOADED_VIDEO_PAUSE||this.playerFocusStatus===$t.b.PAUSE)&&this.videoUploadViewer.currentUserInteraction!==fc.a.UPLOADED_VIDEO_END)try{this.hasWindowFocus?(this.playerFocusStatus=$t.b.PLAY,this.videoUploadViewer.playerFlowPlayer.player.play()):(this.playerFocusStatus=$t.b.PAUSE,this.videoUploadViewer.playerFlowPlayer.player.pause())}catch(e){console.warn("Couldn't set the player status automatically")}}setIframePlayerStatus(){if((this.embededVideoViewer.currentUserInteraction!==fc.a.EMBEDDED_VIDEO_PAUSE||this.playerFocusStatus===$t.b.PAUSE)&&this.embededVideoViewer.currentUserInteraction!==fc.a.EMBEDDED_VIDEO_END)try{this.hasWindowFocus?(this.playerFocusStatus=$t.b.PLAY,"youtube"===this.current_chapter.type?this.embededVideoViewer.playerIframe.dclComponent.player.playVideo():this.embededVideoViewer.playerIframe.dclComponent.player.play()):(this.playerFocusStatus=$t.b.PAUSE,"youtube"===this.current_chapter.type?this.embededVideoViewer.playerIframe.dclComponent.player.pauseVideo():this.embededVideoViewer.playerIframe.dclComponent.player.pause())}catch(e){console.warn("Couldn't set the player status automatically")}}trackSessionRequest(){var e,t;(null===(e=this.current_chapter)||void 0===e?void 0:e.id)&&"sign"!==(null===(t=this.current_chapter)||void 0===t?void 0:t.type)&&this._backendService.request(`/learn/v1/lo/${this.current_chapter.id}/session`,"POST",{context:"lms"},{},I.b,null,()=>yc.a).subscribe()}get hasPreviousNavigationButton(){return!rt.a.isEmpty(this.prev_chapter)}get hasNextNavigationButton(){return!rt.a.isEmpty(this.next_chapter)}get hasNavigationButtons(){return this.hasPreviousNavigationButton||this.hasNextNavigationButton}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.o),c.ec(c.M),c.ec(c.i),c.ec(s.h),c.ec(w.e),c.ec(Ts.b),c.ec(I.a),c.ec(Cc.b),c.ec(ni.b),c.ec(s.a),c.ec(Sc.a),c.ec(fc.c),c.ec(kc.a),c.ec(Dc),c.ec(j.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["chapter-viewer"]],viewQuery:function(e,t){if(1&e&&(c.nd(pm,1),c.nd(gm,3),c.nd(mm,3),c.nd(bm,1),c.nd(fm,1)),2&e){let e;c.Rc(e=c.tc())&&(t.chapterPlayingWrapper=e.first),c.Rc(e=c.tc())&&(t.chapterViewerWrapper=e.first),c.Rc(e=c.tc())&&(t.chapterViewerContainer=e.first),c.Rc(e=c.tc())&&(t.videoUploadViewer=e.first),c.Rc(e=c.tc())&&(t.embededVideoViewer=e.first)}},hostBindings:function(e,t){1&e&&c.sc("unload",function(e){return t.eventHandler(e)},!1,c.Uc)},inputs:{course:"course",course_status:"course_status",current_chapter:"current_chapter",chapters:"chapters",chapter_viewer:"chapter_viewer",prev_chapter:"prev_chapter",next_chapter:"next_chapter",chapter_must_be_tracked:"chapter_must_be_tracked",lastPlayedChapter:"lastPlayedChapter",preserve_lightbox:"preserve_lightbox",device:"device",learning_plan_id:"learning_plan_id",isCourseStarted:"isCourseStarted"},outputs:{rate:"rate",play:"play",completed:"completed",loaded:"loaded",nextChapter:"nextChapter"},features:[c.Jb,c.Kb],decls:24,vars:37,consts:[["chapterViewerContainer",""],[3,"active"],["id","scrollableContent",3,"ngClass","ngStyle","resize"],["chapterViewerWrapper",""],[1,"chapter-viewer__overlay","bg-grey-dark"],[1,"chapter-viewer__header","bg-grey-dark",3,"hidden"],[1,"title"],[1,"text-white","text-normal",3,"innerHTML"],[1,"close-button",3,"uiKeyboardFocusable","click","keydown.enter"],[1,"text-white"],[1,"zmdi","zmdi-close","zmdi-hc-2x","text-white"],["class","standalone-header bg-main",4,"ngIf"],[3,"ngStyle"],["class","play-spinner",4,"ngIf"],["class","chapter-play-rejected-wrapper",4,"ngIf"],["class","chapter-play-reject-userfields bg-white",4,"ngIf"],["class","course-state-ready",4,"ngIf"],["class","course-completed-ready",4,"ngIf"],[3,"class",4,"ngIf"],["class","intime-completed",3,"ngClass",4,"ngIf"],["class","chapter-viewer__footer bg-white",4,"ngIf"],[1,"standalone-header","bg-main"],[1,"wrapper","text-white"],[3,"innerHTML"],[1,"play-spinner"],[1,"chapter-play-rejected-wrapper"],[1,"course-completed-rejected"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--12-col"],[1,"zmdi","zmdi-lock-outline","zmdi-hc-5x"],["class","text-basic-size text-grey-mid course-completed-text rejection-reason-text",3,"innerHTML",4,"ngIf"],[1,"text-basic-size","text-grey-mid","course-completed-text","rejection-reason-text",3,"innerHTML"],[1,"chapter-play-reject-userfields","bg-white"],[3,"title","subtitle","isVisible","type"],["class","go-to-profile-btn",3,"properties","buttonType","click",4,"ngIf"],[1,"go-to-profile-btn",3,"properties","buttonType","click"],[1,"course-state-ready"],["class","text-grey-mid title-regular",4,"ngIf"],[1,"title-regular","text-main",3,"innerHTML"],["class","start-now",3,"properties","state","buttonType","click",4,"ngIf"],[1,"text-grey-mid","title-regular"],[1,"start-now",3,"properties","state","buttonType","click"],[1,"course-completed-ready"],[1,"mdl-grid","course-content-wrap"],[1,"complete-course-icons"],[1,"fa","fa-trophy","gm-yellow"],[1,"zmdi","zmdi-check-circle","check"],[1,"title-regular","text-grey-mid","course-completed-text"],[1,"mdl-cell","mdl-cell--11-col"],[1,"title-section","text-grey-dark","description-two-line-12fs-white"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],[3,"value","mode","show_value","enable_voting","value_position","size","color","rate"],["chapterPlayingWrapper",""],[4,"ngIf"],[3,"currentChapter","chapters","completionDate","course","completed",4,"ngIf"],[3,"launch_params","course_id","learning_plan_id","completed",4,"ngIf"],[3,"custom_css","current_chapter","chapter_viewer","course_id","completed","loaded",4,"ngIf"],[3,"downloadViewerActive","current_chapter","chapter_viewer","course_id","completed","loaded",4,"ngIf"],[3,"current_chapter","chapter_viewer","course_id","completed","loaded",4,"ngIf"],[3,"current_chapter","courseHasAutoplay","chapter_viewer","course_id","learning_plan_id","loaded","completed",4,"ngIf"],[3,"current_chapter","courseHasAutoplay","chapter_viewer","course_id","loaded","completed",4,"ngIf"],[3,"current_chapter","chapter_viewer","courseHasAutoplay","course_id","completed","loaded","next",4,"ngIf"],[3,"current_chapter","chapter_viewer","course_id","loaded","completed",4,"ngIf"],[3,"current_chapter","chapter_viewer","next_chapter","learning_plan_id","course_id","course","completed","loaded","changeMode","loadChapter",4,"ngIf"],[3,"current_chapter","chapter_viewer","course_id","loaded",4,"ngIf"],[3,"current_chapter","chapter_viewer","course","autoStart","chapter_must_be_tracked","completed","loaded","ready",4,"ngIf"],[3,"current_chapter","chapter_viewer","course_id","chapter_must_be_tracked","autoStart","completed","loaded","ready",4,"ngIf"],[3,"currentChapter","chapters","completionDate","course","completed"],[3,"launch_params","course_id","learning_plan_id","completed"],[3,"custom_css","current_chapter","chapter_viewer","course_id","completed","loaded"],[3,"downloadViewerActive","current_chapter","chapter_viewer","course_id","completed","loaded"],[3,"current_chapter","chapter_viewer","course_id","completed","loaded"],[3,"current_chapter","courseHasAutoplay","chapter_viewer","course_id","learning_plan_id","loaded","completed"],[3,"current_chapter","courseHasAutoplay","chapter_viewer","course_id","loaded","completed"],[3,"current_chapter","chapter_viewer","courseHasAutoplay","course_id","completed","loaded","next"],[3,"current_chapter","chapter_viewer","course_id","loaded","completed"],[3,"current_chapter","chapter_viewer","next_chapter","learning_plan_id","course_id","course","completed","loaded","changeMode","loadChapter"],[3,"current_chapter","chapter_viewer","course_id","loaded"],[3,"current_chapter","chapter_viewer","course","autoStart","chapter_must_be_tracked","completed","loaded","ready"],["videoUploadViewer",""],[3,"current_chapter","chapter_viewer","course_id","chapter_must_be_tracked","autoStart","completed","loaded","ready"],["embededVideoViewer",""],[1,"intime-completed",3,"ngClass"],[1,"activity-completed",3,"ngClass"],[1,"activity-completed-message","text-white",3,"innerHTML"],[1,"activity-icon","bg-white"],[1,"zmdi","zmdi-hc-2x",3,"ngClass"],["class","rate-chapter bg-grey-superlight",4,"ngIf"],[1,"rate-chapter","bg-grey-superlight"],["class","text-grey-mid text-basic-size",4,"ngIf"],[1,"text-grey-mid","text-basic-size"],[1,"chapter-viewer__footer","bg-white"],[1,"mdl-grid","mdl-grid--no-spacing","lightbox-controls"],["class","prev-chapter mdl-grid mdl-cell mdl-cell--6-col mdl-cell--6-col-tablet mdl-cell--middle",4,"ngIf"],["class","next-chapter mdl-grid mdl-cell mdl-cell--6-col mdl-cell--6-col-tablet mdl-cell--middle ",4,"ngIf"],[1,"prev-chapter","mdl-grid","mdl-cell","mdl-cell--6-col","mdl-cell--6-col-tablet","mdl-cell--middle"],[1,"button-wrap","mdl-cell--middle"],[3,"properties","state","displayText","click",4,"ngIf"],[1,"neighbour-title","mdl-cell--middle"],["class","text-grey-dark text-basic-size description-two-line-13fs-white prev-chapter-title",3,"innerHTML",4,"ngIf"],[3,"properties","state","displayText","click"],[1,"text-grey-dark","text-basic-size","description-two-line-13fs-white","prev-chapter-title",3,"innerHTML"],[1,"next-chapter","mdl-grid","mdl-cell","mdl-cell--6-col","mdl-cell--6-col-tablet","mdl-cell--middle"],["class","text-grey-dark text-basic-size description-two-line-13fs-white next-chapter-title",3,"innerHTML",4,"ngIf"],[1,"text-grey-dark","text-basic-size","description-two-line-13fs-white","next-chapter-title",3,"innerHTML"]],template:function(e,t){1&e&&(c.kc(0,"div",null,0),c.kc(2,"ui-trap",1),c.kc(3,"div",2,3),c.sc("resize",function(){return t.detectChanges()},!1,c.Uc),c.fc(5,"div",4),c.kc(6,"div",5),c.kc(7,"div",6),c.fc(8,"h1",7),c.jc(),c.kc(9,"div",8),c.sc("click",function(){return t.onCloseButtonClick()})("keydown.enter",function(){return t.onCloseButtonClick()}),c.kc(10,"span",9),c.gd(11),c.xc(12,"t"),c.jc(),c.fc(13,"em",10),c.jc(),c.jc(),c.ed(14,_m,3,1,"div",11),c.kc(15,"div",12),c.ed(16,vm,2,0,"div",13),c.ed(17,wm,6,1,"div",14),c.ed(18,km,8,21,"div",15),c.ed(19,Dm,11,10,"div",16),c.ed(20,Mm,15,11,"div",17),c.ed(21,Jm,3,4,"div",18),c.ed(22,nb,7,17,"div",19),c.jc(),c.ed(23,ub,4,2,"div",20),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(2),c.Dc("active",t.hasLightboxView&&!t.docLayoutConfig.page.dialogs.length&&!t.docLayoutConfig.page.commonDialogs.length),c.Mb(1),c.Rb("bg-white chapter-viewer__wrapper mdl-shadow--2dp ",null!=t.course&&null!=t.course.background_image&&t.course.background_image.url?"fill"==(null==t.course||null==t.course.background_image?null:t.course.background_image.aspect_ratio)?"fill-background":"tile-background":"",""),c.dd("top",t.getLightboxPosition("top"))("left",t.getLightboxPosition("left")),c.Dc("ngClass",c.Ic(29,hb,"standalone"===(null==t.current_chapter?null:t.current_chapter.mode)||"standalone"===t.changedMode))("ngStyle",c.Ic(31,pb,null!=t.course&&null!=t.course.background_image&&t.course.background_image.url&&"poll"!==(null==t.current_chapter?null:t.current_chapter.type)&&(null!=t.current_chapter&&t.current_chapter.mode&&"standalone"!=(null==t.current_chapter?null:t.current_chapter.mode)||"standalone"!=t.changedMode)&&(null==t.chapter_viewer?null:t.chapter_viewer.status)!=t.courseViewerStatus.PLAY_REJECT_USERFIELDS?"url("+(null==t.course||null==t.course.background_image?null:t.course.background_image.url)+")":"")),c.Mb(3),c.Dc("hidden",t.hideTitleBar),c.Mb(2),c.Dc("innerHTML",null==t.current_chapter?null:t.current_chapter.name,c.Wc),c.Mb(3),c.hd(c.zc(12,26,"Close",c.Hc(33,gb))),c.Mb(3),c.Dc("ngIf",(null==t.current_chapter?null:t.current_chapter.mode)&&"standalone"===(null==t.current_chapter?null:t.current_chapter.mode)||"standalone"===t.changedMode),c.Mb(1),c.Rb("chapter-viewer__body bg-white ","fill"==(null==t.course||null==t.course.background_image?null:t.course.background_image.aspect_ratio)?"fill-background":"tile-background",""),c.Dc("ngStyle",null!=t.course&&null!=t.course.background_image&&t.course.background_image.url&&"poll"!==(null==t.current_chapter?null:t.current_chapter.type)?c.Ic(34,pb,"url("+(null==t.course||null==t.course.background_image?null:t.course.background_image.url)+")"):c.Hc(36,mb)),c.Mb(1),c.Dc("ngIf",(null==t.chapter_viewer?null:t.chapter_viewer.status)==t.courseViewerStatus.REQUEST_FOR_PLAY||(null==t.chapter_viewer?null:t.chapter_viewer.isLoading)),c.Mb(1),c.Dc("ngIf",(null==t.chapter_viewer?null:t.chapter_viewer.status)==t.courseViewerStatus.PLAY_REJECTED),c.Mb(1),c.Dc("ngIf",(null==t.chapter_viewer?null:t.chapter_viewer.status)==t.courseViewerStatus.PLAY_REJECT_USERFIELDS),c.Mb(1),c.Dc("ngIf",!t.showCompletedInfo&&(null==t.chapter_viewer?null:t.chapter_viewer.status)==t.courseViewerStatus.READY&&(t.startButton.properties.display||t.resumeButton.properties.display)),c.Mb(1),c.Dc("ngIf",((null==t.chapter_viewer?null:t.chapter_viewer.status)==t.courseViewerStatus.READY||(null==t.chapter_viewer?null:t.chapter_viewer.status)==t.courseViewerStatus.PLAYING||(null==t.chapter_viewer?null:t.chapter_viewer.status)==t.courseViewerStatus.COURSE_COMPLETED)&&t.showCompletedInfo),c.Mb(1),c.Dc("ngIf",!((null==t.chapter_viewer?null:t.chapter_viewer.status)!=t.courseViewerStatus.PLAYING&&(null==t.chapter_viewer?null:t.chapter_viewer.status)!=t.courseViewerStatus.ACTIVITY_COMPLETED&&(null==t.chapter_viewer?null:t.chapter_viewer.status)!=t.courseViewerStatus.COURSE_COMPLETED||t.showCompletedInfo||null!=t.chapter_viewer&&t.chapter_viewer.isLoading)),c.Mb(1),c.Dc("ngIf",t.activityCompletedMessage&&((null==t.course_status?null:t.course_status.status)==t.courseStatusType.COMPLETED||(null==t.chapter_viewer?null:t.chapter_viewer.status)==t.courseViewerStatus.ACTIVITY_COMPLETED)),c.Mb(1),c.Dc("ngIf",t.hasNavigationButtons))},directives:[b.kf,m.n,m.q,b.Xc,m.p,b.Be,jc.a,ts.a,Rc.a,kl,Ul,Vl,Gl,$l,Ql,Xl,ad,ou,kp,Xg,im,nm,rm,lm,um],pipes:[M.b,m.h,Vr.a,hm.a],encapsulation:2,changeDetection:0}),e})();var vb=i("kG7x"),yb=i("ahFQ"),wb=i("3D7D"),Cb=i("QXP6");function Sb(e,t){if(1&e&&(c.fc(0,"span",21),c.xc(1,"sanitizeHtml")),2&e){const e=c.wc(2).$implicit;c.Dc("innerHtml",c.yc(1,1,e.short_description),c.Wc)}}const kb=function(e){return{display:e}};function Tb(e,t){if(1&e){const e=c.lc();c.kc(0,"tree-view",22),c.sc("toggleFolders",function(){return c.Vc(e),c.wc(3).emitToggleFolderOutput()}),c.jc()}if(2&e){const e=c.wc(2).$implicit,t=c.wc();c.Dc("current_tree",e.children)("mode",t.mode)("level",t.level)("current_chapter",t.current_chapter)("course",t.course)("treeListStatic",t.treeListStatic)("courseStatus",t.courseStatus)("chapters",t.chapters)("isCourseStarted",t.isCourseStarted)("ngStyle",c.Ic(10,kb,t.isFolderExpanded(e.id)?"flex":"none"))}}const Ib=function(e){return{"first-folder":e}},xb=function(e,t){return{"text-main":e,"text-grey-mid-permanent":t}},Db=function(e,t){return{"text-white":e,"text-grey-dark":t}},Ob=function(e,t){return{"zmdi-chevron-up":e,"zmdi-chevron-down":t}};function Eb(e,t){if(1&e){const e=c.lc();c.kc(0,"div",5),c.kc(1,"div",6),c.kc(2,"div",7),c.sc("click",function(){c.Vc(e);const t=c.wc().$implicit;return c.wc().toggleFolder(t.id)})("keydown.enter",function(){c.Vc(e);const t=c.wc().$implicit;return c.wc().toggleFolder(t.id)}),c.kc(3,"div",8),c.kc(4,"div",9),c.fc(5,"em",10),c.jc(),c.jc(),c.kc(6,"div",11),c.kc(7,"div",12),c.fc(8,"div",13),c.xc(9,"stripTags"),c.kc(10,"div",14),c.ed(11,Sb,2,3,"span",15),c.jc(),c.jc(),c.jc(),c.kc(12,"div",16),c.kc(13,"span",17),c.gd(14),c.jc(),c.jc(),c.kc(15,"div",18),c.fc(16,"em",19),c.jc(),c.jc(),c.ed(17,Tb,1,12,"tree-view",20),c.jc(),c.jc()}if(2&e){const e=c.wc(),t=e.$implicit,i=e.index,s=c.wc();c.Mb(2),c.Rb("mdl-grid folder bg-grey-superlight border-grey-light level_",s.level,""),c.Ec("id",t.id),c.Dc("ngClass",c.Ic(16,Ib,0===i)),c.Nb("expanded",s.isFolderExpanded(t.id).toString()),c.Mb(3),c.Dc("ngClass",c.Jc(18,xb,s.isFolderExpanded(t.id),!s.isFolderExpanded(t.id))),c.Mb(3),c.Dc("innerHTML",c.yc(9,14,t.name),c.Wc),c.Mb(2),c.Dc("ngClass",c.Jc(21,Db,s.loIsSelected(t.id),!s.loIsSelected(t.id))),c.Mb(1),c.Dc("ngIf",t.short_description),c.Mb(3),c.jd(" ",t.completed," / ",t.all," "),c.Mb(2),c.Dc("ngClass",c.Jc(24,Ob,s.isFolderExpanded(t.id),!s.isFolderExpanded(t.id))),c.Mb(1),c.Dc("ngIf",t.children.length>0)}}function Ab(e,t){if(1&e&&c.fc(0,"em"),2&e){const e=c.wc(2).$implicit,t=c.wc();c.Sb("file-type ",t.loIsSelected(e.id)?"text-white":"text-grey-mid-permanent"," ",t.getLOIcon(e.type),"")}}function Pb(e,t){if(1&e&&c.fc(0,"img",31),2&e){const e=c.wc(2).$implicit,t=c.wc();c.Qb(t.loIsSelected(e.id)?"border-main":"border-grey-light"),c.Ec("src",e.thumbnail,c.Yc)}}function Mb(e,t){if(1&e&&c.fc(0,"div"),2&e){const e=c.wc(2).$implicit,t=c.wc();c.Rb("overlay-status ",t.getThumbnailBackground(e),"")}}function Lb(e,t){if(1&e&&(c.kc(0,"div",32),c.fc(1,"em"),c.jc()),2&e){const e=c.wc(2).$implicit,t=c.wc();c.Mb(1),c.Rb("zmdi ",t.getThumbnailStatusIcon(e),"")}}function jb(e,t){if(1&e&&(c.kc(0,"div"),c.fc(1,"em"),c.jc()),2&e){const e=c.wc(2).$implicit,t=c.wc();c.Rb("chapter-status ",t.getStatusTextColor(e),""),c.Mb(1),c.Rb("zmdi ",t.getStatusIcon(e),"")}}function Rb(e,t){if(1&e&&(c.kc(0,"span"),c.gd(1),c.jc()),2&e){const e=c.wc(3).$implicit;c.Mb(1),c.id(" | ",e.duration,"")}}function Fb(e,t){if(1&e&&(c.fc(0,"span",21),c.xc(1,"sanitizeHtml")),2&e){const e=c.wc(3).$implicit;c.Dc("innerHtml",c.yc(1,1,e.short_description),c.Wc)}}const Nb=function(e,t){return{"text-white":e,"text-main":t}},Ub=function(e,t,i){return{"text-white":e,"text-main":t,"text-grey-mid":i}};function zb(e,t){if(1&e&&(c.kc(0,"div",33),c.fc(1,"div",34),c.xc(2,"stripTags"),c.kc(3,"div",35),c.gd(4),c.xc(5,"t"),c.ed(6,Rb,2,1,"span",36),c.jc(),c.kc(7,"div",37),c.ed(8,Fb,2,3,"span",15),c.jc(),c.jc()),2&e){const e=c.wc(2).$implicit,t=c.wc();c.Mb(1),c.Dc("ngClass",c.Jc(11,Nb,t.loIsSelected(e.id)&&t.isCourseStarted,!t.loIsSelected(e.id)&&t.isCourseStarted))("innerHTML",c.yc(2,7,e.name),c.Wc),c.Mb(2),c.Dc("ngClass",c.Kc(14,Ub,t.loIsSelected(e.id)&&t.isCourseStarted,!t.loIsSelected(e.id)&&e.type!==t.eSignatureType&&t.isCourseStarted,!t.loIsSelected(e.id)&&e.type===t.eSignatureType&&t.isCourseStarted)),c.Mb(1),c.id(" ",c.yc(5,9,t.getLOTitle(e.type))," "),c.Mb(2),c.Dc("ngIf",e.duration),c.Mb(1),c.Dc("ngClass",c.Jc(18,Db,t.loIsSelected(e.id),!t.loIsSelected(e.id))),c.Mb(1),c.Dc("ngIf",e.short_description)}}const qb=function(e,t){return{"selected bg-main":e,disabled:t}};function Vb(e,t){if(1&e){const e=c.lc();c.kc(0,"div",23,24),c.sc("click",function(t){c.Vc(e);const i=c.wc().$implicit,s=c.wc();return s.isCourseStarted?s.startPlaying(i,t):null})("keydown.enter",function(t){c.Vc(e);const i=c.wc().$implicit,s=c.wc();return s.isCourseStarted?s.startPlaying(i,t):null}),c.kc(2,"div",25),c.kc(3,"div",26),c.xc(4,"t"),c.ed(5,Ab,1,4,"em",27),c.ed(6,Pb,1,4,"img",28),c.ed(7,Mb,1,3,"div",27),c.ed(8,Lb,2,3,"div",29),c.ed(9,jb,2,6,"div",27),c.jc(),c.jc(),c.ed(10,zb,9,21,"div",30),c.jc()}if(2&e){const e=c.Sc(1),t=c.wc().$implicit,i=c.wc();c.Rb("item mdl-grid chapter level_",i.level,""),c.Ec("id",t.id),c.Dc("level",i.level)("ngClass",c.Jc(16,qb,i.loIsSelected(t.id),!i.isCourseStarted)),c.Mb(3),c.Dc("tooltip",c.yc(4,14,i.getLOTooltipContent(t)))("tooltipTrigger",e),c.Mb(2),c.Dc("ngIf",!t.thumbnail),c.Mb(1),c.Dc("ngIf",t.thumbnail),c.Mb(1),c.Dc("ngIf",t.thumbnail&&t.status),c.Mb(1),c.Dc("ngIf",t.thumbnail&&t.status),c.Mb(1),c.Dc("ngIf",!t.thumbnail&&t.status),c.Mb(1),c.Dc("ngIf","full"==i.mode)}}function Bb(e,t){1&e&&(c.kc(0,"div",38),c.gd(1,"|"),c.jc())}const Gb=function(e){return{"folder-item":e}};function Hb(e,t){if(1&e&&(c.kc(0,"div",1),c.ed(1,Eb,18,27,"div",2),c.ed(2,Vb,11,19,"div",3),c.ed(3,Bb,2,0,"div",4),c.jc()),2&e){const e=t.$implicit,i=t.index,s=c.wc();c.Dc("ngClass",c.Ic(4,Gb,1==e.is_folder)),c.Mb(1),c.Dc("ngIf",1==e.is_folder),c.Mb(1),c.Dc("ngIf",0==e.is_folder),c.Mb(1),c.Dc("ngIf","compact"==s.mode&&i<s.childMaterialsCount-1)}}let $b=(()=>{class e extends vc.a{constructor(e,t,i,s,n,a){super(),this.router=e,this.translationPipe=t,this.route=i,this.store$=s,this.svc=n,this.ref=a,this.current_tree=[],this.level=0,this.mode=ne.o.FULL,this.treeListStatic=[],this.isCourseStarted=!0,this.toggleFolders=new c.q,this.eSignatureType=ne.a.SIGN.toString(),this.chapterCountWithoutESignature=0,this.eSignatureChapterLocked=!1,this.childMaterialsCount=0,this.loTypes=yb.d,this.loStatus={in_progress:M.a.t("course","Activity in progress"),incomplete:M.a.t("course","Activity in progress"),"ab-initio":M.a.t("course","Activity to begin"),completed:M.a.t("course","Activity completed"),passed:M.a.t("course","Activity completed"),attempted:M.a.t("course","Attempted activity"),not_started:M.a.t("course","Activity to begin"),failed:M.a.t("course","Failed activity"),locked:M.a.t("course","Activity is locked"),locked_maxattempts:M.a.t("course","Maximum attempts reached")}}ngOnInit(){this.level++,this.level>3&&(this.level=3),this.chapterCountWithoutESignature=this.current_tree.filter(e=>e.type!==yb.c.sign).length,this.store$.pipe(Object(w.q)(ae.i),Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{this.eSignatureChapterLocked=e})}ngAfterViewInit(){this.course&&(this.whereYouLeftOfChapter=wc(this.course.last_played_chapter,this.chapters)),this.getFolderItems(this.current_tree),this.openFirstLOFolder()}ngOnChanges(){this.openCurrentPlayingLOFolder()}toggleFolder(e){const t=document.getElementById(e),i=!("true"==t.getAttribute("expanded"));t.setAttribute("expanded",String(i)),i?ne.i.folders.push(e):ne.i.folders=rt.a.difference(ne.i.folders,[e]),this.emitToggleFolderOutput()}emitToggleFolderOutput(){this.toggleFolders.emit("toggled")}isFolderExpanded(e){return-1!=rt.a.indexOf(ne.i.folders,e)}getFolderItems(e){let t=!1;for(let i=0;i<e.length;i++){const s=e[i];!0===s.is_folder?void 0!==s.children&&s.children.length>0&&this.getFolderItems(s.children)&&(t=!0,document.getElementById(s.id).setAttribute("expanded",String(t)),ne.i.folders.push(s.id)):(this.childMaterialsCount++,this.current_chapter&&this.current_chapter.id===s.id&&(t=!0))}return t}getLOTooltipContent(e){if(this.mode!==ne.o.COMPACT){if(!e.locked)return this.loStatus[e.status];switch(e.locked){case ne.k.LOCKED:return M.a.t("course","You must complete {message} in order to unlock this activity",{message:`${e.status_message}`});case ne.k.MAX_NUMBER_VIEWS:return M.a.t("course","You have reached the maximum number of views");case ne.k.MAX_ATTEMPTS:return this.translationPipe.transform(e.status_message);default:return null}}if(""===e.status)return"";let t=`${this.translationPipe.transform(this.loStatus[e.status])} | ${e.name} | ${this.translationPipe.transform(this.getLOTitleToTranslate(e.type))}`;return e.duration&&(t+=" | "+e.duration),t}getLOTitleToTranslate(e){return this.loTypes[e]?this.loTypes[e].title:this.loTypes[void 0].title}getLOTitle(e){return e===this.eSignatureType&&this.course&&this.course.esignature_description?this.course.esignature_description:this.translationPipe.transform(this.loTypes[e]&&this.loTypes[e].title?this.loTypes[e].title:this.loTypes[void 0].title)}getLOIcon(e){return this.loTypes[e]?this.loTypes[e].icon:this.loTypes[void 0].icon}startPlaying(e,t){var i;t&&t.preventDefault(),this.current_chapter&&e.id===this.current_chapter.id||e&&((null==e?void 0:e.locked)?this.svc.getChapterLockStatus((null===(i=this.course)||void 0===i?void 0:i.id)||-1,e.id).subscribe(({chapters:t,locked:i})=>{i?this.svc.showChapterLockedModal(e,this.ref):(this.store$.dispatch(Ts.a.reloadChapters(t)),this.playChapter(e))}):this.playChapter(e))}playChapter(e){const t=document.querySelector(".course-player-elements__main");t&&t.focus(),this.route.params.subscribe(e=>{const t=e.lp;t&&(this.learning_plan_id=t)}),new Promise((e,t)=>{const i=document.getElementById("scorm-iframe");i?(i.addEventListener("load",t=>{i.parentNode&&i.parentNode.removeChild(i),e(!0)}),i.setAttribute("src","about:blank")):e(!1)}).then(()=>{this.router.navigate(this.learning_plan_id?["/learn/course/"+this.course.id+"/play/"+e.id+"/"+e.slug_name,{lp:this.learning_plan_id}]:["/learn/course/"+this.course.id+"/play/"+e.id+"/"+e.slug_name],fi.b)})}getStatusTextColor(e){if(e.locked||e.type===String(ne.a.SIGN)&&this.eSignatureChapterLocked)return"text-black";switch(e.status){case ne.l.IN_PROGRESS:case ne.l.INCOMPLETE:return"text-warning";case ne.l.COMPLETED:case ne.l.PASSED:return"text-positive-green";case ne.l.FAILED:return"text-error"}}getStatusIcon(e){if(e.locked||e.type===String(ne.a.SIGN)&&this.eSignatureChapterLocked)return"zmdi-lock";switch(e.status){case ne.l.IN_PROGRESS:case ne.l.COMPLETED:case ne.l.INCOMPLETE:case ne.l.PASSED:return"zmdi-check-circle";case ne.l.FAILED:return"zmdi-close-circle"}}getThumbnailBackground(e){if(e.locked||e.type===String(ne.a.SIGN)&&this.eSignatureChapterLocked)return"bg-black";switch(e.status){case ne.l.IN_PROGRESS:case ne.l.INCOMPLETE:return"bg-warning";case ne.l.COMPLETED:case ne.l.PASSED:return"bg-positive-green";case ne.l.FAILED:return"bg-error"}}getThumbnailStatusIcon(e){if(e.locked||e.type===String(ne.a.SIGN)&&this.eSignatureChapterLocked)return"zmdi-lock";switch(e.status){case ne.l.IN_PROGRESS:case ne.l.INCOMPLETE:case ne.l.COMPLETED:case ne.l.PASSED:return"zmdi-check";case ne.l.FAILED:return"zmdi-close"}}courseResumingIsEnabled(){return!(!this.course||!this.courseStatus||rt.a.isEmpty(this.course.last_played_chapter)||this.courseStatus.status===$t.e.COMPLETED)}openFirstLOFolder(){this.treeListStatic&&!this.current_chapter&&rt.a.isEmpty(this.course.last_played_chapter)&&!rt.a.isEmpty(this.treeListStatic)&&this.treeListStatic[0].is_folder&&ne.i.folders.push(this.treeListStatic[0].id)}openCurrentPlayingLOFolder(e=null){null===e&&(ne.i.folders=[],e=this.treeListStatic);let t=!1;const i=wc(this.course.last_played_chapter,this.chapters);for(const s of e)if(s.is_folder&&s.children&&s.children.length>0)for(const e of s.children)e.is_folder&&e.children&&e.children.length>0?this.openCurrentPlayingLOFolder([e])&&(ne.i.folders.push(s.id),t=!0):(this.current_chapter&&e.id===this.current_chapter.id&&(ne.i.folders.push(s.id),t=!0),i&&!this.current_chapter&&this.courseResumingIsEnabled()&&i.id===e.id&&(ne.i.folders.push(s.id),t=!0));return t}loIsSelected(e){return this.current_chapter?this.current_chapter.id===e:this.courseResumingIsEnabled()?!!this.whereYouLeftOfChapter&&this.whereYouLeftOfChapter.id===e:void 0}get isFullMode(){return this.mode===ne.o.FULL}get hasEsignatureEnabled(){return!!this.course&&!!this.course.has_esignature_enabled}get hasContentLabelShown(){return!(this.level>1||!this.hasEsignatureEnabled||!this.isFullMode)&&this.current_tree.filter(e=>e.type!==yb.c.sign).length>0}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.h),c.ec(M.b),c.ec(s.a),c.ec(w.e),c.ec(Dc),c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["tree-view"]],inputs:{current_chapter:"current_chapter",current_tree:"current_tree",level:"level",mode:"mode",course:"course",learning_plan_id:"learning_plan_id",treeListStatic:"treeListStatic",courseStatus:"courseStatus",chapters:"chapters",isCourseStarted:"isCourseStarted"},outputs:{toggleFolders:"toggleFolders"},features:[c.Lb([M.b]),c.Jb,c.Kb],decls:1,vars:1,consts:[["class","mdl-cell--12-col tree-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"mdl-cell--12-col","tree-item",3,"ngClass"],["class","item mdl-grid folderContainer",4,"ngIf"],["tabindex","0",3,"class","level","id","ngClass","click","keydown.enter",4,"ngIf"],["class","delimeter text-grey-mid-permanent",4,"ngIf"],[1,"item","mdl-grid","folderContainer"],[1,"mdl-cell","mdl-cell--12-col","folder-cell"],["tabindex","0",3,"ngClass","id","click","keydown.enter"],[1,"mdl-cell--2-col"],[1,"icon"],[1,"file-type","zmdi","zmdi-folder-outline",3,"ngClass"],[1,"information","mdl-cell","mdl-cell--7-col"],[1,"title","text-main"],[3,"innerHTML"],[1,"short-description",2,"padding","3px 0 0","font-weight","normal","font-size","12px",3,"ngClass"],[3,"innerHtml",4,"ngIf"],[1,"information","mdl-cell","mdl-cell--2-col",2,"text-align","right"],[1,"info"],[1,"information","mdl-cell","mdl-cell--1-col","text-grey-mid"],[1,"zmdi","chevron",3,"ngClass"],["class","mdl-grid border-grey-light",3,"current_tree","mode","level","current_chapter","course","treeListStatic","courseStatus","chapters","isCourseStarted","ngStyle","toggleFolders",4,"ngIf"],[3,"innerHtml"],[1,"mdl-grid","border-grey-light",3,"current_tree","mode","level","current_chapter","course","treeListStatic","courseStatus","chapters","isCourseStarted","ngStyle","toggleFolders"],["tabindex","0",3,"level","id","ngClass","click","keydown.enter"],["chapterElement",""],[1,"mdl-cell","mdl-cell--2-col","icon-wrap"],["position","top",1,"icon",3,"tooltip","tooltipTrigger"],[3,"class",4,"ngIf"],["alt","","width","30",3,"src","class",4,"ngIf"],["class","overlay-status-icon text-white",4,"ngIf"],["class","information mdl-cell mdl-cell--10-col",4,"ngIf"],["alt","","width","30",3,"src"],[1,"overlay-status-icon","text-white"],[1,"information","mdl-cell","mdl-cell--10-col"],[1,"title",3,"ngClass","innerHTML"],[1,"info",3,"ngClass"],[4,"ngIf"],[1,"info","short-description",3,"ngClass"],[1,"delimeter","text-grey-mid-permanent"]],template:function(e,t){1&e&&c.ed(0,Hb,4,6,"div",0),2&e&&c.Dc("ngForOf",t.current_tree)},directives:[m.o,m.n,m.p,e,m.q,wb.a],pipes:[Cb.a,ji.a,M.b],encapsulation:2}),e})(),Yb=(()=>{class e{constructor(){this.level=0,this.isCourseStarted=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["overview-navigation"]],inputs:{current_chapter:"current_chapter",chapter:"chapter",level:"level",course:"course",learning_plan_id:"learning_plan_id",isCourseStarted:"isCourseStarted"},decls:3,vars:6,consts:[[1,"mdl-wrapper","overview-navigation__wrapper"],[1,"overview-navigation","full-mode","bg-white"],[1,"mdl-grid","border-grey-light","tree-view","tree-wrapper","bg-white",3,"learning_plan_id","mode","current_tree","course","current_chapter","isCourseStarted"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.fc(2,"tree-view",2),c.jc(),c.jc()),2&e&&(c.Mb(2),c.Dc("learning_plan_id",t.learning_plan_id)("mode","full")("current_tree",t.chapter)("course",t.course)("current_chapter",t.current_chapter)("isCourseStarted",t.isCourseStarted))},directives:[$b],encapsulation:2}),e})();var Wb=i("fY+D");function Qb(e,t){if(1&e&&c.fc(0,"radio",8),2&e){const e=c.wc(2);c.Dc("inputFormControl",e.form_control)("label",e.course_label)("name","enrollment_type")("value","course_unenrollment")("subtitle",e.course.name)("checked",e.course.can_self_unenroll&&!(null!=e.current_session&&e.current_session.can_self_unenroll))}}function Kb(e,t){if(1&e&&c.fc(0,"radio",8),2&e){const e=c.wc(2);c.Dc("inputFormControl",e.form_control)("label",e.session_label)("name","enrollment_type")("value","session_unenrollment")("subtitle",null==e.current_session?null:e.current_session.name)("checked",e.current_session&&e.course.session_self_unenrollment_enabled)}}const Jb=function(){return{category:"course"}};function Xb(e,t){if(1&e&&(c.kc(0,"div",5),c.kc(1,"h4"),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"form",6),c.kc(5,"div"),c.ed(6,Qb,1,6,"radio",7),c.jc(),c.kc(7,"div"),c.ed(8,Kb,1,6,"radio",7),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.hd(c.zc(3,3,"Please select where you want to be unenrolled from",c.Hc(6,Jb))),c.Mb(4),c.Dc("ngIf",e.course.can_self_unenroll),c.Mb(2),c.Dc("ngIf",e.course.session_self_unenrollment_enabled)}}function Zb(e,t){1&e&&(c.kc(0,"div",9),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"Please, confirm that you want to unsubscribe from this course")," "))}function ef(e,t){1&e&&(c.kc(0,"div",10),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"Please, confirm that you want to unsubscribe from the current session")," "))}function tf(e,t){if(1&e){const e=c.lc();c.kc(0,"ui-input-checkbox",11),c.sc("trigger",function(t){return c.Vc(e),c.wc().onConfirmCheckboxToggle(t)}),c.kc(1,"ui-input-label"),c.gd(2),c.xc(3,"t"),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Dc("formControl",e.confirmation_form_control),c.Mb(2),c.id(" ",c.yc(3,2,e.confirmationLabel)," ")}}let sf=(()=>{class e{constructor(e,t,i){this.backendService=e,this.router=t,this.docLayoutService=i,this.showCheckbox=!1,this.confirmationToggle=new c.q,this.showCourseOrSesionSelection=!1,this.confirmation_form_control=new Ze.e(!1),this.confirmationLabel=M.a.t("standard","Yes, I want to proceed")}ngOnInit(){this.current_session&&this.current_session.is_enrolled&&this.course.session_self_unenrollment_enabled?this.unenrollment_type="session_unenrollment":this.course.can_self_unenroll&&(this.unenrollment_type="course_unenrollment"),this.form_control.setValue(this.unenrollment_type),this.course_label=M.a.t("course","This course"),this.session_label=M.a.t("course","Current session"),this.current_session&&0===this.course.learningplans.length&&this.course.session_self_unenrollment_enabled&&this.course.can_self_unenroll&&this.current_session.is_enrolled&&(this.showCourseOrSesionSelection=!0)}onConfirmCheckboxToggle(e){this.confirmationToggle.emit(e.target.checked)}onSelfUnenrollConfirm(e){let t;t=this.form_control?this.form_control.value:this.unenrollment_type;let i=D.c.getInstance().id;"session_unenrollment"===t?this.backendService.request("/learn/v1/enrollment/"+this.course.id+"/"+i+"/session/"+this.current_session.id,"DELETE").subscribe(t=>{e.hide(),new RegExp("^/learn/course/\\d+$").test(this.router.url)?this.router.navigate(["/learn/course/"+this.course.id+"/"+this.course.slug_name],fi.b):this.router.navigate(["/learn/course/"+this.course.id],fi.b)},e=>{this.docLayoutService.toast.showToast({message:e.error_message[0],type:"error"})}):this.backendService.request("/learn/v1/enrollments/"+this.course.id+"/"+i,"DELETE").subscribe(t=>{e.hide(),this.router.navigate(["/learn/mycourses"],fi.b)})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a),c.ec(s.h),c.ec(j.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["self-unenroll-dialog"]],inputs:{course:"course",course_state:"course_state",form_control:"form_control",current_session:"current_session",showCheckbox:"showCheckbox"},outputs:{confirmationToggle:"confirmationToggle"},decls:5,vars:4,consts:[[1,"unenroll-dialog_wrapper"],["class","session-course-enrollment",4,"ngIf"],["class","course-enrollment",4,"ngIf"],["class","session-enrollment",4,"ngIf"],[3,"formControl","trigger",4,"ngIf"],[1,"session-course-enrollment"],[1,"enrollment-form"],[3,"inputFormControl","label","name","value","subtitle","checked",4,"ngIf"],[3,"inputFormControl","label","name","value","subtitle","checked"],[1,"course-enrollment"],[1,"session-enrollment"],[3,"formControl","trigger"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.ed(1,Xb,9,7,"div",1),c.ed(2,Zb,3,3,"div",2),c.ed(3,ef,3,3,"div",3),c.ed(4,tf,4,4,"ui-input-checkbox",4),c.jc()),2&e&&(c.Mb(1),c.Dc("ngIf",t.showCourseOrSesionSelection),c.Mb(1),c.Dc("ngIf","course_unenrollment"===t.unenrollment_type&&!t.showCourseOrSesionSelection),c.Mb(1),c.Dc("ngIf","session_unenrollment"===t.unenrollment_type&&!t.showCourseOrSesionSelection),c.Mb(1),c.Dc("ngIf",t.showCheckbox))},directives:[m.p,Ze.y,Ze.p,Ze.q,Zn.a,b.sc,Ze.o,Ze.f,b.Cc],pipes:[M.b],encapsulation:2}),e})(),nf=(()=>{class e{constructor(e,t,i,s){this.router=e,this.pageService=t,this.backendService=i,this.docLayoutService=s,this.chapterMustBeTracked=!0,this._buttonAdded=!1}get buttonAdded(){return this._buttonAdded}set buttonAdded(e){this._buttonAdded=e}initDependencies(e,t,i){this.course=e,this.selfUnenrollForm=i,this.chapterMustBeTracked=t}getSelfUnenrollmentActionButton(){if(void 0===this.course)return;let e=M.a.t("course","_SELF_UNSUBSCRIBE");return this.current_session&&this.current_session.is_enrolled&&this.course.session_self_unenrollment_enabled&&(e=M.a.t("standard","Unenroll from this session")),{properties:{icons:["account","block-alt"],tooltipText:e},onClick:()=>{this.openSelfUnenrollmentDialog()},key:"unenrollment"}}addSelfUnenrollmentButton(){if(this.buttonAdded)return;const e=this.getSelfUnenrollmentActionButton();if(!e)return;let t=[];t.push(e),t=[...t,...this.docLayoutService.getDocLayoutConfig().actionButtons.actionButtons],this.docLayoutService.actionButtons.setActionButtons(t),this._buttonAdded=!0}removeSelfUnenrollmentButton(){const e=this.docLayoutService.getDocLayoutConfig().actionButtons.actionButtons,t=e.map(e=>e.key).indexOf("unenrollment");-1!==t&&(e.splice(t,1),this.docLayoutService.actionButtons.setActionButtons(e),this._buttonAdded=!1)}setCurrentSession(e){this.current_session=e}openSelfUnenrollmentDialog(){let e;this.pageService.dialog.open({width:435,height:this.course.can_self_unenroll&&this.current_session&&this.current_session.is_enrolled?320:250,title:M.a.t("course","Unenrollment"),content:{params:{course:this.course,form_control:this.selfUnenrollForm.controls.enrollment_type,current_session:this.current_session},component:sf},type:"confirmation",show_confirmation_check:!0,confirmation_check_text:M.a.t("standard","Yes, I want to proceed"),overlayClick:!0,actions:[{type:"cancel",properties:{text:M.a.t("standard","_CANCEL"),handler:e=>{e.close()}}},{type:"normal",properties:{text:M.a.t("standard","Confirm")},handler:t=>{e=t.dynamicComponents.form_control?t.dynamicComponents.form_control.value:t.dynamicComponents.unenrollment_type,t.content="<ui-spinner></ui-spinner>",t.actions=[],t.show_confirmation_check=!1,this.chapterMustBeTracked=!1;let i=o.a.getInstance().id;"session_unenrollment"===e?this.backendService.request("/learn/v1/enrollment/"+this.course.id+"/"+i+"/session/"+this.current_session.id,"DELETE").subscribe(e=>{t.close(),new RegExp("^/learn/course/\\d+$").test(this.router.url)?this.router.navigate(["/learn/course/"+this.course.id+"/"+this.course.slug_name],fi.b):this.router.navigate(["/learn/course/"+this.course.id],fi.b)},e=>{this.docLayoutService.toast.showToast({message:e.error_message[0],type:"error"})}):this.backendService.request("/learn/v1/enrollments/"+this.course.id+"/"+i,"DELETE").subscribe(e=>{t.close(),this.router.navigate(["/learn/mycourses"],fi.b)})}}]})}}return e.\u0275fac=function(t){return new(t||e)(c.oc(s.h),c.oc(P.a),c.oc(I.a),c.oc(j.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var af=i("/kCD"),of=i("4P8L"),rf=i("ZOB2"),cf=i("iw5W"),lf=i("M9jS"),df=i("jg0+"),uf=i("aEIV"),hf=i("ajSx"),pf=i("3QLk");function gf(e,t){1&e&&(c.kc(0,"span"),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.hd(c.yc(2,1,"Instructor:")))}const mf=function(){return{category:"course"}};function bf(e,t){1&e&&(c.kc(0,"span"),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id("",c.zc(2,1,"_THEACER_LIST",c.Hc(4,mf)),":"))}function ff(e,t){1&e&&(c.kc(0,"span"),c.gd(1,","),c.jc())}function _f(e,t){if(1&e&&(c.kc(0,"p"),c.kc(1,"span",12),c.gd(2),c.jc(),c.ed(3,ff,2,0,"span",9),c.jc()),2&e){const e=t.$implicit,i=t.index,s=c.wc(2);c.Mb(2),c.hd(e.name),c.Mb(1),c.Dc("ngIf",i<s.course.instructors.length-1)}}function vf(e,t){if(1&e&&(c.kc(0,"li"),c.ed(1,gf,3,3,"span",9),c.ed(2,bf,3,5,"span",9),c.ed(3,_f,4,2,"p",11),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",1==e.course_instructors.length),c.Mb(1),c.Dc("ngIf",e.course_instructors.length>1),c.Mb(1),c.Dc("ngForOf",e.course_instructors)}}function yf(e,t){if(1&e&&(c.kc(0,"li"),c.kc(1,"p"),c.gd(2),c.xc(3,"t"),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.jd(" ",c.yc(3,2,"Language:")," ",e.course_language," ")}}function wf(e,t){if(1&e&&(c.kc(0,"li"),c.kc(1,"p"),c.gd(2),c.xc(3,"t"),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.jd("",c.yc(3,2,"Duration:")," ",e.course_duration,"")}}function Cf(e,t){if(1&e){const e=c.lc();c.kc(0,"li"),c.kc(1,"rating",13),c.sc("rate",function(t){c.Vc(e);const i=c.wc();return i.rateChange(t,i.course.id)}),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(1),c.Dc("enable_voting",e.courseRating.enable_voting)("voter",e.courseRating.voter)("value",e.courseRating.value)("mode",e.courseRating.mode)("show_value",!0)("size",e.courseRating.size)("color",e.courseRating.color)}}function Sf(e,t){if(1&e){const e=c.lc();c.kc(0,"div",14),c.kc(1,"div",1),c.kc(2,"div",2),c.kc(3,"div",3),c.kc(4,"tabs",15),c.sc("onChange",function(t){return c.Vc(e),c.wc().tabChange(t)}),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(4),c.bd(e.tabsParams.stlye),c.Dc("panels",e.tabsParams.panels)("content_background","bg-white")("innerContentBackground",e.innerContentBackground)}}const kf=function(e){return{"background-image":e}},Tf=function(e){return{hidden:e}};let If=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this._backendService=e,this.el=t,this._formatServ=i,this.router=s,this.route=n,this.pageService=a,this.changeDetector=o,this.location=r,this.visible_sessions=[],this.innerContentBackground="bg-white"}ngOnInit(){this.sortData(),this.courseRating={enable_voting:this.course.can_rate,value:this.course_rating,mode:"five_stars",show_value:!0,size:15,color:"rgb(244,196,0)"},this.tabsParams&&this.tabsParams.panels.filter(e=>e.content.component==uf.a).length&&(this.innerContentBackground="bg-grey-superlight"),this.course_duration=this._formatServ.getDurationHours(+this.course_duration,"seconds"),this.course_instructors&&(this.course_instructors=this.course_instructors.map(e=>({instructor_id:e.instructor_id,avatar_url:e.avatar_url,name:this.parseName(e.firstname,e.lastname)})))}rateChange(e,t){this.courseRating.enable_voting=!1,this._backendService.request("/learn/v1/courses/"+t+"/rating","POST",{rating:e}).subscribe()}ngOnChanges(e){e&&(this.sortData(),this.initTabs())}sortData(){this.course&&(this.thumbnailImage=Object(Zg.i)(this.course.thumbnail)||"",this.course_type=this.course.type,this.course_name=this.course.name,this.course_rating=this.course.current_rating,this.course_instructors=this.course.instructors,this.course_language=this.course.lang_code,this.course_duration=this.course.duration,this.course_description=this.course.description,this.course_training_materials=this.course.flat_los,this.course_additional_information=this.course.additional_fields,this.course_sessions=this.course.sessions)}tabChange(e){e.content.component&&e.content.component==uf.a?(e.tabsCmp.innerContentBackground="bg-grey-superlight",this.changeDetector.detectChanges()):(e.tabsCmp.innerContentBackground="bg-white",this.changeDetector.detectChanges())}parseName(e,t){return t?e.charAt(0)+"."+t:e}initTabs(){this.visible_sessions=[],this.course_sessions&&this.course_sessions.forEach(e=>{e.enrolled.is_enrolled&&this.visible_sessions.push(e)});let e,t=0;if(this.course_additional_information.forEach(e=>{void 0!==e.value&&""!==e.value&&null!==e.value&&t++}),e="elearning"==this.course_type?[{tab:{title:M.a.t("standard","About this course"),content:`<div class="tabs-description"> ${this.course_description} </div>`},field:this.course_description},{tab:{title:M.a.t("course","Content"),content:{params:{panels:Object(pf.c)(this.course_training_materials,this.course_type)},component:uf.a}},field:this.course_training_materials}]:"webinar"==this.course_type?[{tab:{title:M.a.t("dashboard","Sessions"),content:{params:{panels:Object(pf.d)(this.visible_sessions,this.course_type)},component:uf.a}},field:this.visible_sessions},{tab:{title:M.a.t("standard","About this webinar"),content:`<div class="tabs-description"> ${this.course_description} </div>`},field:this.course_description},{tab:{title:M.a.t("course","Content"),content:{params:{panels:Object(pf.c)(this.course_training_materials,this.course_type)},component:uf.a}},field:this.course_training_materials}]:[{tab:{title:M.a.t("dashboard","Sessions"),content:{params:{panels:Object(pf.d)(this.visible_sessions,this.course_type)},component:uf.a}},field:this.visible_sessions},{tab:{title:M.a.t("course","About this classroom"),content:`<div class="tabs-description"> ${this.course_description} </div>`},field:this.course_description},{tab:{title:M.a.t("course","Content"),content:{params:{panels:Object(pf.c)(this.course_training_materials,this.course_type)},component:uf.a}},field:this.course_training_materials}],0!==t){const t={tab:{title:M.a.t("webinar","Additional information"),content:{params:{additional_information:this.course_additional_information,removeEmpty:!0,instructors:this.course.instructors,courseData:this.course},component:hf.a}},field:this.course_additional_information};e.push(t)}this.tabsParams={panels:Object(pf.e)(e),style:""}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a),c.ec(c.o),c.ec(ni.b),c.ec(s.h),c.ec(s.a),c.ec(P.a),c.ec(c.i),c.ec(m.k))},e.\u0275cmp=c.Yb({type:e,selectors:[["course-waiting-list"]],inputs:{course:"course",tabsParams:"tabsParams"},features:[c.Kb],decls:16,vars:12,consts:[[1,"course-head","bg-white"],[1,"mdl-wrapper"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--12-col"],[1,"course-head-image",3,"ngStyle"],[1,"zmdi","zmdi-image-alt","text-white",3,"ngClass"],[1,"course-head-content"],[1,"title"],[1,"course-info"],[4,"ngIf"],["class","course-tabs",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"instructor-title","text-main"],[3,"enable_voting","voter","value","mode","show_value","size","color","rate"],[1,"course-tabs"],[3,"panels","content_background","innerContentBackground","onChange"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.kc(2,"div",2),c.kc(3,"div",3),c.kc(4,"div",4),c.fc(5,"i",5),c.jc(),c.kc(6,"div",6),c.kc(7,"h2",7),c.gd(8),c.jc(),c.kc(9,"div",8),c.kc(10,"ul"),c.ed(11,vf,4,3,"li",9),c.ed(12,yf,4,4,"li",9),c.ed(13,wf,4,4,"li",9),c.ed(14,Cf,2,7,"li",9),c.jc(),c.jc(),c.jc(),c.jc(),c.jc(),c.jc(),c.jc(),c.ed(15,Sf,5,5,"div",10)),2&e&&(c.Mb(4),c.Dc("ngStyle",c.Ic(8,kf,"url("+t.thumbnailImage+")")),c.Mb(1),c.Dc("ngClass",c.Ic(10,Tf,null==t.thumbnailImage?null:t.thumbnailImage.length)),c.Mb(3),c.hd(t.course_name),c.Mb(3),c.Dc("ngIf",t.course_instructors&&0!=t.course_instructors.length),c.Mb(1),c.Dc("ngIf",t.course_language),c.Mb(1),c.Dc("ngIf",t.course_duration),c.Mb(1),c.Dc("ngIf",void 0!==t.course_rating),c.Mb(1),c.Dc("ngIf",t.tabsParams))},directives:[m.q,m.n,m.p,m.o,Rc.a,gs.a],pipes:[M.b],encapsulation:2}),e})();var xf=i("5Wgn"),Df=i("t/UT");function Of(e,t){1&e&&c.fc(0,"em",7)}const Ef=function(){return{category:"course"}};function Af(e,t){if(1&e&&(c.kc(0,"div",8),c.gd(1),c.xc(2,"t"),c.xc(3,"date"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.jd(" ",c.zc(2,2,"Course completed on",c.Hc(7,Ef))," ",c.yc(3,5,e.completionDate)," ")}}function Pf(e,t){if(1&e&&(c.kc(0,"div",8),c.gd(1),c.xc(2,"t"),c.xc(3,"HDate"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.jd(" ",c.zc(2,2,"Course completed on",c.Hc(7,Ef))," ",c.yc(3,5,e.completionDate)," ")}}function Mf(e,t){if(1&e&&(c.kc(0,"div"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Rb("title-regular text-grey-mid course-status-text ",e.displayClass,""),c.Mb(1),c.id(" ",c.zc(2,4,"This course is not yet completed.",c.Hc(7,Ef))," ")}}const Lf=function(e){return{n:e}};function jf(e,t){if(1&e&&(c.kc(0,"div"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Rb("title-regular text-grey-mid course-status-text ",e.displayClass,""),c.Mb(1),c.id(" ",c.zc(2,4,"You must complete {n} more sessions to complete this course.",c.Ic(7,Lf,e.viltNumberToSessionForCompleted))," ")}}function Rf(e,t){if(1&e&&(c.kc(0,"div"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Rb("title-regular text-grey-mid auth-required-text ",e.displayClass,""),c.Mb(1),c.id(" ",c.yc(2,4,"OTP Authenticator Required")," ")}}function Ff(e,t){1&e&&(c.kc(0,"div",12),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.zc(2,1,"How would you rate this course?",c.Hc(4,Ef))," "))}function Nf(e,t){1&e&&(c.kc(0,"div",12),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,"Thanks for rating!")," "))}function Uf(e,t){if(1&e){const e=c.lc();c.ic(0),c.ed(1,Ff,3,5,"div",9),c.ed(2,Nf,3,3,"div",9),c.kc(3,"div",10),c.kc(4,"rating",11),c.sc("rate",function(t){return c.Vc(e),c.wc().rateChange(t)}),c.jc(),c.jc(),c.hc()}if(2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",!e.isRated),c.Mb(1),c.Dc("ngIf",e.isRated),c.Mb(2),c.Dc("enable_voting",e.fiveStarsParams.enable_voting)("value",e.currentRating)("mode",e.fiveStarsParams.mode)("show_value",!0)("size",e.fiveStarsParams.size)("color",e.fiveStarsParams.color)}}const zf=function(e,t){return{"gm-yellow":e,"text-grey":t}};let qf=(()=>{class e{constructor(e,t){this.changeDetector=e,this.toggleService=t,this.displayMode="",this.displayType="",this.mode="",this.completedLessonsPercentage=0,this.rate=new c.q,this.showOtpAuthLabel=!1,this.hasCompletedSessions=!1}get isVilt(){return this.toggleService.isOn(u.f.TOGGLE_VILT)&&"classroom"==this.course.type}get viltNumberToSessionForCompleted(){return this.isVilt&&this.course.has_session_completion_rule&&null!=this.course.max_session_to_pass&&null!=this.course.min_session_to_pass?this.course.max_session_to_pass-=this.course.min_session_to_pass:null}ngOnInit(){this.fiveStarsParams={enable_voting:!this.isRated,show_value:!1,mode:"five_stars",size:15,color:"#f6cf46"},this.hasCompletedSessions=!(void 0===this.course.sessions||!this.course.sessions.length)&&this.course.sessions.filter(e=>void 0!==e.enrolled&&!0===e.enrolled.is_enrolled&&e.enrolled.status===ne.v.COMPLETED).length>0,this.showOtpAuthLabel=this.course.has_esignature_enabled&&this.course.esignature_status!==ne.h.SIGNED&&this.hasCompletedSessions}get showRatingOnOverviewView(){return this.displayType&&"navigation"!==this.displayMode&&(100===this.completedLessonsPercentage&&"elearning"===this.course.type||"elearning"!==this.course.type)}get showRatingOnNavigationView(){return this.displayType&&this.mode!==String(ne.o.COMPACT)&&(100!==this.completedLessonsPercentage&&"elearning"===this.course.type||"navigation"===this.displayMode&&this.displayType&&this.mode!==String(ne.o.COMPACT))}ngOnChanges(){this.isRated&&this.fiveStarsParams&&(this.fiveStarsParams.enable_voting=!this.isRated,this.changeDetector.markForCheck())}rateChange(e){this.rate.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["course-rating-control"]],inputs:{isRated:"isRated",course:"course",completionDate:"completionDate",currentRating:"currentRating",displayClass:"displayClass",displayMode:"displayMode",displayType:"displayType",mode:"mode",completedLessonsPercentage:"completedLessonsPercentage"},outputs:{rate:"rate"},features:[c.Kb],decls:12,vars:17,consts:[[1,"course-rating-control__wrapper","border-grey-light"],[1,"course-rating-control__body"],[1,"fa","fa-trophy",3,"ngClass"],["class","fa fa-check-circle check text-white",4,"ngIf"],["class","title-regular text-grey-mid course-status-text",4,"ngIf"],[3,"class",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-check-circle","check","text-white"],[1,"title-regular","text-grey-mid","course-status-text"],["class","rating-text",4,"ngIf"],[1,"rating-component"],[3,"enable_voting","value","mode","show_value","size","color","rate"],[1,"rating-text"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.kc(2,"div"),c.fc(3,"em",2),c.ed(4,Of,1,0,"em",3),c.jc(),c.kc(5,"div"),c.ed(6,Af,4,8,"div",4),c.ed(7,Pf,4,8,"div",4),c.ed(8,Mf,3,8,"div",5),c.ed(9,jf,3,9,"div",5),c.ed(10,Rf,3,6,"div",5),c.ed(11,Uf,5,8,"ng-container",6),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(2),c.Rb("complete-course-icons ",t.displayClass,""),c.Mb(1),c.Dc("ngClass",c.Jc(14,zf,t.completionDate,!t.completionDate)),c.Mb(1),c.Dc("ngIf",t.completionDate),c.Mb(1),c.Rb("course-rating-information ",t.displayClass,""),c.Mb(1),c.Dc("ngIf",t.completionDate&&"overview"==t.displayClass&&!t.isVilt),c.Mb(1),c.Dc("ngIf",t.completionDate&&"overview"==t.displayClass&&t.isVilt),c.Mb(1),c.Dc("ngIf",!t.completionDate&&"overview"===t.displayClass&&(!t.isVilt||!t.course.has_session_completion_rule&&t.isVilt)),c.Mb(1),c.Dc("ngIf",!t.completionDate&&"overview"===t.displayClass&&t.isVilt&&t.course.has_session_completion_rule),c.Mb(1),c.Dc("ngIf",!t.completionDate&&t.showOtpAuthLabel&&"overview"===t.displayClass),c.Mb(1),c.Dc("ngIf",t.showRatingOnOverviewView||t.showRatingOnNavigationView))},directives:[m.n,m.p,Rc.a],pipes:[M.b,Vr.a,Ge.a],styles:["[_nghost-%COMP%] {\n        display: block;\n        overflow: hidden;\n      }"],changeDetection:0}),e})();var Vf=i("UFo5");function Bf(e,t){if(1&e){const e=c.lc();c.kc(0,"course-rating-control",4),c.sc("rate",function(t){return c.Vc(e),c.wc().rateChange(t)}),c.jc()}if(2&e){const e=c.wc();c.Dc("course",e.course)("completedLessonsPercentage",e.completedLessonsPercentage)("isRated",e.course_status.is_rated)("completionDate",e.course_status.completion_date)("currentRating",e.course.current_rating)("displayClass",e.displayRating.mode)("displayType",null==e.displayRating?null:e.displayRating.display)("displayMode",e.displayRating.mode)}}function Gf(e,t){if(1&e&&c.fc(0,"progress-bar",13),2&e){const e=c.wc(3);c.Dc("percentage",e.progressParams.percentage)("is_animated",e.progressParams.is_animated)("text_blocks",e.progressParams.text_blocks)("uid",e.course.uidCourse)}}function Hf(e,t){if(1&e&&c.fc(0,"em"),2&e){const e=c.wc(3);c.Rb("trophy-cell fa fa-trophy icon-type ","completed"==e.course_status.status?"text-positive-green":"text-grey-mid-permanent","")}}const $f=function(e,t){return{"mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-phone":e,"mdl-cell--6-col mdl-cell--6-col-tablet mdl-cell--6-col-phone":t}};function Yf(e,t){if(1&e&&(c.kc(0,"div",10),c.kc(1,"div",11),c.ed(2,Gf,1,4,"progress-bar",12),c.ed(3,Hf,1,3,"em",3),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Dc("ngClass",c.Jc(3,$f,e.mode==e.playerMode.FULL,e.mode==e.playerMode.FLAT)),c.Mb(2),c.Dc("ngIf",e.showProgressBar),c.Mb(1),c.Dc("ngIf","navigation"==e.displayRating.mode||!(null!=e.displayRating&&e.displayRating.display)&&"elearning"==e.course.type||(null==e.displayRating?null:e.displayRating.display)&&100!=e.completedLessonsPercentage&&"elearning"==e.course.type)}}function Wf(e,t){if(1&e){const e=c.lc();c.kc(0,"rectangular-button",14),c.sc("click",function(){return c.Vc(e),c.wc(2).startPlaying()}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("properties",e.startNowButton.properties)("state",e.isCourseStarted?"normal":"disabled")("buttonType","submit")}}function Qf(e,t){if(1&e){const e=c.lc();c.kc(0,"rectangular-button",14),c.sc("click",function(){c.Vc(e);const t=c.wc(2);return t.startPlaying(t.lastPlayedChapter,!0)}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("properties",e.startWhereYouLeftButton.properties)("state",e.isCourseStarted?"normal":"disabled")("buttonType","submit")}}function Kf(e,t){if(1&e){const e=c.lc();c.kc(0,"rectangular-button",14),c.sc("click",function(){return c.Vc(e),c.wc(2).downloadCertificate()}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("properties",e.certificateButton.properties)("state",e.isCourseStarted?"normal":"disabled")("buttonType","submit")}}const Jf=function(e,t){return{"mdl-cell--6-col-tablet mdl-cell--6-col-phone":e,"mdl-cell--12-col-tablet mdl-cell--12-col-phone":t}};function Xf(e,t){if(1&e){const e=c.lc();c.kc(0,"div",15),c.kc(1,"rectangular-button",16),c.sc("onClick",function(){c.Vc(e);const t=c.wc(2);return t.startPlaying(t.prev_chapter)}),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Dc("ngClass",c.Jc(4,Jf,e.mode==e.playerMode.FLAT,e.mode!=e.playerMode.FLAT)),c.Mb(1),c.Dc("properties",e.showPrevNextButtons.prev.properties)("buttonType",e.showPrevNextButtons.prev.buttonType)("state",e.lockedNavigationButtons(e.prev_chapter,e.showPrevNextButtons.prev.properties))}}function Zf(e,t){if(1&e){const e=c.lc();c.kc(0,"div",15),c.kc(1,"rectangular-button",17),c.sc("onClick",function(){c.Vc(e);const t=c.wc(2);return t.startPlaying(t.next_chapter)}),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Dc("ngClass",c.Jc(4,Jf,e.mode==e.playerMode.FLAT,e.mode!=e.playerMode.FLAT)),c.Mb(1),c.Dc("properties",e.showPrevNextButtons.next.properties)("state",e.lockedNavigationButtons(e.next_chapter,e.showPrevNextButtons.next.properties))("buttonType",e.showPrevNextButtons.next.buttonType)}}const e_=function(e){return{"border-grey-light in-navigation":e}},t_=function(e,t){return{"full-navigation-mode mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-phone":e,"flat-navigation-mode mdl-cell mdl-cell--6-col mdl-cell--6-col-tablet mdl-cell--6-col-phone":t}};function i_(e,t){if(1&e&&(c.kc(0,"div",5),c.ed(1,Yf,4,6,"div",6),c.kc(2,"div",5),c.kc(3,"div",7),c.ed(4,Wf,1,3,"rectangular-button",8),c.ed(5,Qf,1,3,"rectangular-button",8),c.ed(6,Kf,1,3,"rectangular-button",8),c.ed(7,Xf,2,7,"div",9),c.ed(8,Zf,2,7,"div",9),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Rb("controls mdl-grid ",e.mode,"-mode"),c.Dc("ngClass",c.Ic(11,e_,"navigation"==e.displayRating.mode)),c.Mb(1),c.Dc("ngIf","navigation"==e.displayRating.mode||!(null!=e.displayRating&&e.displayRating.display)&&"elearning"==e.course.type&&"navigation"!=(null==e.displayRating?null:e.displayRating.mode)||(null==e.displayRating?null:e.displayRating.display)&&100!=e.completedLessonsPercentage&&"elearning"==e.course.type),c.Mb(1),c.Dc("ngClass",c.Jc(13,t_,e.mode==e.playerMode.FULL,e.mode==e.playerMode.FLAT)),c.Mb(2),c.Dc("ngIf",e.startNowButton.properties.display),c.Mb(1),c.Dc("ngIf",e.startWhereYouLeftButton.properties.display),c.Mb(1),c.Dc("ngIf",e.certificateButton.properties.display),c.Mb(1),c.Dc("ngIf",e.showPrevNext),c.Mb(1),c.Dc("ngIf",e.showPrevNext)}}function s_(e,t){if(1&e){const e=c.lc();c.kc(0,"course-rating-control",18),c.sc("rate",function(t){return c.Vc(e),c.wc().rateChange(t)}),c.jc()}if(2&e){const e=c.wc();c.Dc("isRated",e.course_status.is_rated)("completionDate",e.course_status.completion_date)("currentRating",e.course.current_rating)("displayClass","navigation")("displayType",null==e.displayRating?null:e.displayRating.display)("displayMode",e.displayRating.mode)("course",e.course)("mode",e.mode)("completedLessonsPercentage",e.completedLessonsPercentage)}}function n_(e,t){if(1&e){const e=c.lc();c.kc(0,"rectangular-button",24),c.sc("click",function(){return c.Vc(e),c.wc(2).startPlaying()}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("properties",e.startNowButton.properties)("state","normal")("buttonType","submit")}}const a_=function(){return{colorScheme:"positive-green",typeStyle:"filled",icon:"fa-trophy"}};function o_(e,t){if(1&e){const e=c.lc();c.kc(0,"rectangular-button",24),c.sc("click",function(){return c.Vc(e),c.wc(2).downloadCertificate()}),c.jc()}2&e&&c.Dc("properties",c.Hc(3,a_))("state","normal")("buttonType","submit")}const r_=function(){return{colorScheme:"main",typeStyle:"filled",icon:"fa-play-circle"}};function c_(e,t){if(1&e){const e=c.lc();c.kc(0,"rectangular-button",24),c.sc("click",function(){c.Vc(e);const t=c.wc(2);return t.startPlaying(t.lastPlayedChapter)}),c.jc()}2&e&&c.Dc("properties",c.Hc(3,r_))("state","normal")("buttonType","submit")}const l_=function(){return{adminButton:!0,text:"",colorScheme:"main",typeStyle:"filled",icon:"zmdi-arrow-left"}},d_=function(){return{adminButton:!0,text:"",colorScheme:"main",typeStyle:"filled",icon:"zmdi-arrow-right"}};function u_(e,t){if(1&e){const e=c.lc();c.kc(0,"div",25),c.kc(1,"div",26),c.kc(2,"rectangular-button",27),c.sc("click",function(){c.Vc(e);const t=c.wc(2);return t.startPlaying(t.prev_chapter)}),c.jc(),c.jc(),c.kc(3,"div",26),c.kc(4,"rectangular-button",28),c.sc("click",function(){c.Vc(e);const t=c.wc(2);return t.startPlaying(t.next_chapter)}),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Mb(2),c.Dc("properties",c.Hc(8,l_))("state",e.lockedNavigationButtons(e.prev_chapter,e.showPrevNextButtons.next.properties))("displayText",!1)("buttonType","submit"),c.Mb(2),c.Dc("properties",c.Hc(9,d_))("state",e.lockedNavigationButtons(e.next_chapter,e.showPrevNextButtons.next.properties))("displayText",!1)("buttonType","submit")}}function h_(e,t){if(1&e&&c.fc(0,"progress-bar",31),2&e){const e=c.wc(3);c.Dc("percentage",e.progressParams.percentage)("mode",e.progressParamsCircle.mode)("color","completed"==e.course_status.status?"text-positive-green":e.progressParamsCircle.color)("uid",e.course.uidCourse)("text_blocks",e.progressParamsCircle.text_blocks)}}function p_(e,t){if(1&e&&(c.kc(0,"div",29),c.ed(1,h_,1,5,"progress-bar",30),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngIf",e.showProgressBar)}}function g_(e,t){if(1&e&&(c.kc(0,"div"),c.kc(1,"div",19),c.ed(2,n_,1,3,"rectangular-button",20),c.ed(3,o_,1,4,"rectangular-button",20),c.ed(4,c_,1,4,"rectangular-button",20),c.jc(),c.ed(5,u_,5,10,"div",21),c.ed(6,p_,2,1,"div",22),c.kc(7,"div",23),c.gd(8),c.jc(),c.jc()),2&e){const e=c.wc();c.Rb("controls mdl-grid mdl-cell--12-col ",e.mode,"-mode course-navigation-controls"),c.Mb(2),c.Dc("ngIf",e.startNowButton.properties.display),c.Mb(1),c.Dc("ngIf",e.certificateButton.properties.display),c.Mb(1),c.Dc("ngIf",e.startWhereYouLeftButton.properties.display),c.Mb(1),c.Dc("ngIf",e.showPrevNext),c.Mb(1),c.Dc("ngIf",!e.certificateButton.properties.display),c.Mb(2),c.jd(" ",e.course_status.competed_lessons," / ",e.allChaptersCount," ")}}let m_=(()=>{class e{constructor(e,t,i,s,n){this.router=e,this.changeDetector=t,this.store$=i,this.toggleService=s,this.svc=n,this.isCourseStarted=!0,this.play=new c.q,this.playNext=new c.q,this.playPrev=new c.q,this.rate=new c.q,this.showRating=new c.q,this.showPrevNext=!1,this.showProgressBar=!1,this.playerMode=ne.o,this.gamificationIcon={type:"icon",title:"fa fa-trophy"},this.startNowButton={properties:{text:M.a.t("standard","Start learning now"),colorScheme:"positive-green",typeStyle:"filled",display:!1}},this.startWhereYouLeftButton={properties:{text:M.a.t("standard","Resume where you left off"),colorScheme:"main",typeStyle:"filled",display:!1}},this.certificateButton={properties:{text:M.a.t("standard","Download your certificate"),icon:null,colorScheme:"positive-green",typeStyle:"filled",display:!1}},this.progressParams={percentage:0,color:"bg-main",is_animated:!1,text_blocks:{"top-left":"","bottom-left":""}},this.progressParamsCircle={percentage:0,color:"border-positive-green",mode:"circle",text_blocks:{innerHtml:'<div class="fa fa-trophy header-icons border-grey-light icon-type"></div>',backgroundClass:"bg-white",fontClass:"text-grey-mid"}},this.showPrevNextButtons={prev:{properties:{text:M.a.t("standard","_PREV"),colorScheme:"main",typeStyle:"filled"},buttonType:"submit"},next:{properties:{text:M.a.t("standard","_NEXT"),colorScheme:"main",typeStyle:"filled"},buttonType:"submit"}}}ngOnInit(){this.updateCourseNavigationView()}ngOnChanges(){this.calculatePercentOfCourse(),this.displayRatingLogic()}updateCourseNavigationView(){this.calculatePercentOfCourse(),this.updateResumeButton(),this.displayRatingLogic()}updateResumeButton(){this.lastPlayedChapter=this.course.last_played_chapter?{id:this.course.last_played_chapter.id,slug_name:this.course.last_played_chapter.slug_name,status:this.course.last_played_chapter.status}:rt.a.head(this.chapters.filter((e,t,i)=>i[t-1]&&-1!==["completed","passed"].indexOf(i[t-1].status)).map(e=>({id:e.id,slug_name:e.slug_name,status:e.status}))),this.startWhereYouLeftButton.properties.display=this.lastPlayedChapter&&this.lastPlayedChapter.id&&!this.showPrevNext&&!this.certificateButton.properties.display&&this.course_status.status!==ne.d.COMPLETED&&("elearning"===this.course.type||"classroom"===this.course.type&&this.toggleService.isOn(u.f.TOGGLE_VILT)&&"navigation"==this.displayRating.mode),this.changeDetector.markForCheck()}displayRatingLogic(){this.progressParams.text_blocks["top-left"]=(new Cb.a).transform(this.course.name);const e=M.a.t("course","{completed} / {all} lessons completed",{completed:this.course_status.competed_lessons,all:this.allChaptersCount}),t=M.a.t("course","{completed} / {all} lessons completed (with OTP Authentication)",{completed:this.course_status.competed_lessons,all:this.allChaptersCount});this.progressParams.text_blocks["bottom-left"]=this.course.has_esignature_enabled?t:e,this.changeDetector.detectChanges(),this.changeProperties(),this.course.rating_option!=bc.a.DISABLED&&(this.course.rating_option==bc.a.ALWAYS||this.course.rating_option==bc.a.ONLY_ENROLLED||this.course_status.status==ne.d.COMPLETED&&this.course.rating_option==bc.a.ONLY_COMPLETED)&&"overview"!=this.displayRating.mode&&(this.displayRating.display=!0),this.course_status.status==ne.d.COMPLETED&&this.course.rating_option==bc.a.ONLY_COMPLETED&&this.showRating.emit(!0)}startPlaying(e,t=!1){var i;rt.a.isEmpty(e)&&(e=this.current_chapter),e&&(null==e?void 0:e.locked)?this.svc.getChapterLockStatus((null===(i=this.course)||void 0===i?void 0:i.id)||-1,e.id).subscribe(({chapters:i,locked:s})=>{s?this.svc.showChapterLockedModal(e,this.changeDetector):(this.store$.dispatch(Ts.a.reloadChapters(i)),this.playChapter(e,t))}):this.playChapter(e,t)}playChapter(e,t=!1){new Promise((e,t)=>{const i=document.getElementById("scorm-iframe");i?(i.addEventListener("load",t=>{i.parentNode&&i.parentNode.removeChild(i),e(!0)}),i.setAttribute("src","about:blank")):e(!1)}).then(()=>{if(rt.a.isEmpty(e))this.play.emit();else{const i={};this.learning_plan_id&&(i.lp=this.learning_plan_id),t&&(e=this.whereYouLeftOfChapter(e)),this.router.navigate([`learn/course/${this.course.id}/play/${null==e?void 0:e.id}/${null==e?void 0:e.slug_name}`,i]).then(),this.showPrevNext=!0,this.updateResumeButton(),this.startWhereYouLeftButton.properties.display=!1}})}whereYouLeftOfChapter(e){return wc(e,this.chapters)||null}downloadCertificate(){window.open(this.course.certificate_url)}calculatePercentOfCourse(){this.completedLessonsPercentage=Math.trunc(100*(this.course_status.competed_lessons?this.course_status.competed_lessons:0)/this.chapters.length),this.progressParams.percentage=this.completedLessonsPercentage,this.showProgressBar=!0,this.changeDetector.detectChanges()}rateChange(e){this.rate.emit(e)}changeProperties(){var e;if(this.courseState==ne.c.OVERVIEW||this.chapter_viewer){let t=this.chapters&&this.chapters.length>0&&(!this.current_chapter||rt.a.isEmpty(this.current_chapter)&&!this.startWhereYouLeftButton.properties.display)&&(this.course_status.status!=ne.d.COMPLETED||this.course_status.status==ne.d.COMPLETED&&""==this.course.certificate_url),i=(this.courseState==ne.c.OVERVIEW||this.courseState===ne.c.PLAYER||(null===(e=this.chapter_viewer)||void 0===e?void 0:e.status)===ne.g.READY)&&this.course_status.status===ne.d.COMPLETED&&""!==this.course.certificate_url;this.courseState==ne.c.OVERVIEW?(this.showPrevNext=!1,!this.startWhereYouLeftButton.properties.display&&!i&&this.chapters&&this.chapters.length>0&&(t=!0)):this.showPrevNext=this.chapters&&this.chapters.length>0&&!i&&!t&&!this.startWhereYouLeftButton.properties.display,t=t&&("elearning"==this.course.type||"classroom"===this.course.type&&this.toggleService.isOn(u.f.TOGGLE_VILT)&&"navigation"==this.displayRating.mode),this.certificateButton.properties.text=this.mode==ne.o.COMPACT?"":M.a.t("standard","Download your certificate"),this.certificateButton.properties.icon=this.mode==ne.o.COMPACT?"fa-arrow-circle-o-down":null,this.certificateButton.properties.display=i,this.startNowButton.properties.text=this.mode==ne.o.COMPACT?"":M.a.t("standard","Start learning now"),this.startNowButton.properties.icon=this.mode==ne.o.COMPACT?"fa-play-circle":null,this.startNowButton.properties.display=t,this.updateResumeButton()}}lockedNavigationButtons(e,t){return t.icon="",(e.hasOwnProperty("locked")||e.type===ne.a.SIGN.toString())&&this.isCourseStarted?"normal":!e.hasOwnProperty("locked")&&this.isCourseStarted?e.hasOwnProperty("status")?"normal":"disabled":(t.icon="zmdi-lock-outline text-mid-icons",t.adminButton=!0,t.hideText=!1,"disabled")}get allChaptersCount(){return this.chapters.length}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.h),c.ec(c.i),c.ec(w.e),c.ec(u.g),c.ec(Dc))},e.\u0275cmp=c.Yb({type:e,selectors:[["course-navigation-control"]],inputs:{mode:"mode",current_chapter:"current_chapter",prev_chapter:"prev_chapter",next_chapter:"next_chapter",course:"course",course_status:"course_status",chapters:"chapters",chapter_viewer:"chapter_viewer",displayRating:"displayRating",learning_plan_id:"learning_plan_id",isCourseStarted:"isCourseStarted",courseState:"courseState"},outputs:{play:"play",playNext:"playNext",playPrev:"playPrev",rate:"rate",showRating:"showRating"},features:[c.Kb],decls:5,vars:7,consts:[[3,"course","completedLessonsPercentage","isRated","completionDate","currentRating","displayClass","displayType","displayMode","rate",4,"ngIf"],[3,"class","ngClass",4,"ngIf"],[3,"isRated","completionDate","currentRating","displayClass","displayType","displayMode","course","mode","completedLessonsPercentage","rate",4,"ngIf"],[3,"class",4,"ngIf"],[3,"course","completedLessonsPercentage","isRated","completionDate","currentRating","displayClass","displayType","displayMode","rate"],[3,"ngClass"],["class","mdl-cell",3,"ngClass",4,"ngIf"],[1,"mdl-grid","center-buttons"],["class","start-now mdl-cell mdl-cell--12-col",3,"properties","state","buttonType","click",4,"ngIf"],["class","mdl-cell mdl-cell--6-col navigation-buttons",3,"ngClass",4,"ngIf"],[1,"mdl-cell",3,"ngClass"],[1,"mdl-grid","progress-grid"],["class","mdl-cell mdl-cell--10-col mdl-cell--11-col-tablet mdl-cell--11-col-phone progress-bar",3,"percentage","is_animated","text_blocks","uid",4,"ngIf"],[1,"mdl-cell","mdl-cell--10-col","mdl-cell--11-col-tablet","mdl-cell--11-col-phone","progress-bar",3,"percentage","is_animated","text_blocks","uid"],[1,"start-now","mdl-cell","mdl-cell--12-col",3,"properties","state","buttonType","click"],[1,"mdl-cell","mdl-cell--6-col","navigation-buttons",3,"ngClass"],[1,"navigate","prev",3,"properties","buttonType","state","onClick"],[1,"navigate","next",3,"properties","state","buttonType","onClick"],[3,"isRated","completionDate","currentRating","displayClass","displayType","displayMode","course","mode","completedLessonsPercentage","rate"],[1,"mdl-cell","mdl-cell--12-col"],["class","start-now",3,"properties","state","buttonType","click",4,"ngIf"],["class","mdl-cell--12-col course-navigation-button__wrapper",4,"ngIf"],["class","circle-progress-bar-course-navigation",4,"ngIf"],[1,"mdl-cell","mdl-cell--12-col","text-grey-mid","border-grey-light","compact-course-info"],[1,"start-now",3,"properties","state","buttonType","click"],[1,"mdl-cell--12-col","course-navigation-button__wrapper"],[1,"course-navigation-button"],[1,"navigate","prev",3,"properties","state","displayText","buttonType","click"],[1,"navigate","next",3,"properties","state","displayText","buttonType","click"],[1,"circle-progress-bar-course-navigation"],[3,"percentage","mode","color","uid","text_blocks",4,"ngIf"],[3,"percentage","mode","color","uid","text_blocks"]],template:function(e,t){1&e&&(c.kc(0,"div"),c.ed(1,Bf,1,8,"course-rating-control",0),c.ed(2,i_,9,16,"div",1),c.ed(3,s_,1,9,"course-rating-control",2),c.ed(4,g_,9,10,"div",3),c.jc()),2&e&&(c.Rb("wrap-controls course-navigation-controls ",t.mode,"-mode"),c.Mb(1),c.Dc("ngIf","navigation"!=t.displayRating.mode),c.Mb(1),c.Dc("ngIf",(t.mode==t.playerMode.FULL||t.mode==t.playerMode.FLAT)&&(t.startNowButton.properties.display||t.startWhereYouLeftButton.properties.display||t.certificateButton.properties.display||t.showPrevNext)),c.Mb(1),c.Dc("ngIf","navigation"==t.displayRating.mode&&(null==t.displayRating?null:t.displayRating.display)&&t.mode!=t.playerMode.COMPACT),c.Mb(1),c.Dc("ngIf",t.mode==t.playerMode.COMPACT))},directives:[m.p,qf,m.n,Vf.a,ts.a],encapsulation:2,changeDetection:0}),e})();const b_=["navigationTree"],f_=["navigationControls"],__=["navigationWrapper"],v_=function(e){return{"chapters border-grey-light":e}};function y_(e,t){if(1&e){const e=c.lc();c.kc(0,"div",6,7),c.sc("resize",function(){return c.Vc(e),c.wc().calculateElementHeight()},!1,c.Uc),c.kc(2,"tree-view",8),c.sc("toggleFolders",function(){return c.Vc(e),c.wc().updateScroll()}),c.jc(),c.jc()}if(2&e){const e=c.wc();c.dd("height",e.treeViewHeight,"%"),c.Dc("ngClass",c.Ic(12,v_,e.mode==e.playerModes.FULL)),c.Mb(2),c.Dc("current_tree",e.course.tree)("current_chapter",e.current_chapter)("mode",e.mode)("course",e.course)("learning_plan_id",e.learning_plan_id)("treeListStatic",e.course.tree)("courseStatus",e.course_status)("chapters",e.chapters)("isCourseStarted",e.isCourseStarted)}}let w_=(()=>{class e{constructor(e,t){this.changeDetector=e,this.router=t,this.isCourseStarted=!0,this.play=new c.q,this.playNext=new c.q,this.playPrev=new c.q,this.rate=new c.q,this.playerModes=$t.o,this.displayRatingComponent={display:!1,mode:"navigation"},this.treeViewHeight=100,this.tooltips=[{title:"What a view!",text:"Switch your course player`s size for a customized learning experiance!",style:"blue"},{title:"Take Control!",text:"Use this table of content to check your progress, navigate and move throught your course`s activities",style:"blue"}]}ngAfterViewInit(){this.navigationTree&&(this.perfectScrollbar=new Df.a(this.navigationTree.nativeElement,{suppressScrollX:!0})),this.calculateHeightAndUpdateScroll()}calculateHeightAndUpdateScroll(){this.navigationTableOfContent&&Object(xi.i)(this.navigationTableOfContent).then(e=>{Object(xi.i)(this.navigationControlsContent).then(e=>{this.calculateElementHeight(),this.updateScroll()})})}calculateElementHeight(){const e=this.navigationWrapper&&this.navigationWrapper.hasOwnProperty("nativeElement"),t=this.navigationControls&&this.navigationControls.hasOwnProperty("nativeElement");e&&t?(this.treeViewHeight=(this.navigationWrapper.nativeElement.offsetHeight-this.navigationControls.nativeElement.offsetHeight)/this.navigationWrapper.nativeElement.offsetHeight*100,this.treeViewHeight=this.treeViewHeight.toFixed(2),this.changeDetector.markForCheck()):this.treeViewHeight=100}rateChange(e){this.rate.emit(e)}startPlaying(e){this.play.emit(e)}updateScroll(){this.navigationTree&&this.mode!=$t.o.FLAT&&setTimeout(()=>{this.perfectScrollbar.update()},500)}ngOnDestroy(){this.navigationTree&&this.perfectScrollbar.destroy()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i),c.ec(s.h))},e.\u0275cmp=c.Yb({type:e,selectors:[["course-navigation"]],viewQuery:function(e,t){if(1&e&&(c.nd(b_,1),c.nd(f_,3),c.nd(__,3),c.nd(b_,1),c.nd(f_,1)),2&e){let e;c.Rc(e=c.tc())&&(t.navigationTree=e.first),c.Rc(e=c.tc())&&(t.navigationControls=e.first),c.Rc(e=c.tc())&&(t.navigationWrapper=e.first),c.Rc(e=c.tc())&&(t.navigationTableOfContent=e),c.Rc(e=c.tc())&&(t.navigationControlsContent=e)}},inputs:{mode:"mode",current_chapter:"current_chapter",prev_chapter:"prev_chapter",next_chapter:"next_chapter",chapter_viewer:"chapter_viewer",course:"course",course_status:"course_status",chapters:"chapters",folders:"folders",learning_plan_id:"learning_plan_id",courseState:"courseState",navigationHeight:"navigationHeight",isCourseStarted:"isCourseStarted"},outputs:{play:"play",playNext:"playNext",playPrev:"playPrev",rate:"rate"},decls:8,vars:23,consts:[["navigationWrapper",""],[1,"course-navigation__flex-wrapper"],["navigationControls",""],["consumerPage","course-player",3,"certificationData","certificationAward","resourceId","enrolledAt"],[3,"mode","current_chapter","next_chapter","prev_chapter","course_status","course","chapters","chapter_viewer","courseState","displayRating","learning_plan_id","isCourseStarted","rate","play","showRating"],["class","mdl-cell--hide-phone mdl-cell--hide-tablet",3,"height","ngClass","resize",4,"ngIf"],[1,"mdl-cell--hide-phone","mdl-cell--hide-tablet",3,"ngClass","resize"],["navigationTree",""],[1,"mdl-grid","border-grey-light","tree-view","tree-wrapper","bg-white",3,"current_tree","current_chapter","mode","course","learning_plan_id","treeListStatic","courseStatus","chapters","isCourseStarted","toggleFolders"]],template:function(e,t){1&e&&(c.kc(0,"div",null,0),c.kc(2,"div",1),c.kc(3,"div",null,2),c.fc(5,"certification-manager",3),c.kc(6,"course-navigation-control",4),c.sc("rate",function(e){return t.rateChange(e)})("play",function(e){return t.startPlaying(e)})("showRating",function(){return t.calculateHeightAndUpdateScroll()}),c.jc(),c.jc(),c.ed(7,y_,3,14,"div",5),c.jc(),c.jc()),2&e&&(c.Rb("course-navigation__wrapper bg-white mdl-shadow--2dp ",t.mode,"-mode"),c.Mb(3),c.Rb("control-wrapper mdl-grid mdl-cell--",t.mode==t.playerModes.FLAT?"7":"12","-col"),c.Mb(2),c.Dc("certificationData",t.course.certification)("certificationAward",t.course.certification_award)("resourceId",t.course.id)("enrolledAt",t.course.enrolled.date_enrolled),c.Mb(1),c.Dc("mode",t.mode)("current_chapter",t.current_chapter)("next_chapter",t.next_chapter)("prev_chapter",t.prev_chapter)("course_status",t.course_status)("course",t.course)("chapters",t.chapters)("chapter_viewer",t.chapter_viewer)("courseState",t.courseState)("displayRating",t.displayRatingComponent)("learning_plan_id",t.learning_plan_id)("isCourseStarted",t.isCourseStarted),c.Mb(1),c.Dc("ngIf",t.mode!=t.playerModes.FLAT&&t.treeViewHeight))},directives:[qr,m_,m.p,m.n,$b],encapsulation:2,changeDetection:0}),e})();var C_=i("29ye");function S_(e,t){if(1&e){const e=c.lc();c.kc(0,"div",7),c.sc("click",function(){c.Vc(e);const t=c.wc();return t.isCourseStarted?t.play.emit():null}),c.xc(1,"t"),c.jc()}if(2&e){const e=c.wc();c.Dc("innerHTML",c.yc(1,1,e.startMessage),c.Wc)}}function k_(e,t){if(1&e&&(c.fc(0,"div",8),c.xc(1,"sanitizeHtml")),2&e){const e=c.wc();c.Dc("innerHTML",c.yc(1,1,null==e.current_chapter?null:e.current_chapter.name),c.Wc)}}function T_(e,t){if(1&e&&(c.kc(0,"div",9),c.fc(1,"metadata-bar",10),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("items",e.metadataBarParams.items)}}function I_(e,t){if(1&e&&c.fc(0,"line-limiter",14),2&e){const e=c.wc(2);c.Dc("content",null==e.lineLimiterParams?null:e.lineLimiterParams.content)("lines",null==e.lineLimiterParams?null:e.lineLimiterParams.lines)("removeHtml",!1)("more_label",null==e.lineLimiterParams?null:e.lineLimiterParams.more_label)("less_label",null==e.lineLimiterParams?null:e.lineLimiterParams.less_label)}}function x_(e,t){if(1&e&&(c.kc(0,"div",11),c.kc(1,"div",12),c.gd(2),c.xc(3,"t"),c.jc(),c.ed(4,I_,1,5,"line-limiter",13),c.jc()),2&e){const e=c.wc();c.Mb(2),c.hd(c.yc(3,2,e.subTitle)),c.Mb(2),c.Dc("ngIf",e.showLimiter)}}function D_(e,t){if(1&e&&c.fc(0,"div",15),2&e){const e=c.wc();c.Dc("innerHtml",e.descriptionText,c.Wc)}}let O_=(()=>{class e{constructor(e,t,i,s,n){this.router=e,this._el=t,this.sanitizer=i,this.translate=s,this.changeDetector=n,this.isCourseStarted=!0,this.rate=new c.q,this.play=new c.q,this.metadataBarParams={items:[]},this.startMessage=M.a.t("course","Click {openTag}Start Learning Now{closeTag} to begin your course",{openTag:"<span class='text-main'>",closeTag:"</span>"}),this.showLimiter=!1,this.descriptionText=null,this.tags=[],this.subTitle=M.a.t("course","About this lesson"),this.tagsTitle=new M.b(this.translate,this.changeDetector).transform(M.a.t("app7020","Tags")),this.instructor_avatar=[],this.instructor_name=[],this.instructor_id=[]}ngOnInit(){this.current_chapter&&this.current_chapter.id&&this.currentChapterId!==Number(this.current_chapter.id)&&(this.currentChapterId=Number(this.current_chapter.id),this.initializeChapterInformationData())}ngAfterViewInit(){this.isCourseStarted||(this.startMessage=M.a.t("course","Click {openTag}Start Learning Now{closeTag} to begin your course",{openTag:"<span>",closeTag:"</span>"}))}ngOnChanges(){this.course&&this.current_chapter&&this.current_chapter.id&&this.currentChapterId!==Number(this.current_chapter.id)&&(this.currentChapterId=Number(this.current_chapter.id),this.initializeChapterInformationData())}initializeChapterInformationData(){let e;if(this.metadataBarParams={items:[]},this.instructor_avatar=[],this.instructor_name=[],this.instructor_id=[],this.tags=[],this.descriptionText="",this.course.instructors&&0!==this.course.instructors.length){const t=[];for(const i of this.course.instructors)this.instructor_avatar.push((null==i?void 0:i.avatar_url)||null),e=E.b.getInstance().getFullName(i,!0),t.push(this.getUserInitials(i)),this.instructor_name.push(e),this.instructor_id.push(i.instructor_id);1===this.instructor_avatar.length&&null===this.instructor_avatar[0]&&(this.instructor_avatar=[]),this.metadataBarParams.items=[{component:qi.a,params:{image_url:this.instructor_avatar.length?this.instructor_avatar:null,initials:t,size:30,stacked:this.instructor_avatar.length>1,extra_text:{visible:this.instructor_name.length>0,position:"right",prefix:new M.b(this.translate,this.changeDetector).transform(M.a.t("standard","Instructor:")),suffix:" ",content:this.instructor_name,class:"text-main"},has_border:{class:"border-white"},properties:{bg_color_class:"bg-grey-mid",text_color_class:"text-white",icon_class:"zmdi zmdi-account"}}}]}if(this.course_status.status===$t.e.COMPLETED&&(this.startMessage=M.a.t("course","Want to re-play the course? {openTag}Select a lesson{closeTag} from the navigation panel.",{openTag:"<span class='text-main'>",closeTag:"</span>"})),this.current_chapter.tags)this.populateTags(this.current_chapter.tags);else{let e=null;if(this.current_chapter.id&&!Number(this.current_chapter.id)&&this.current_chapter.id.indexOf(":")&&(e=this.current_chapter.id.split(":")[0]),e){const t=this.course.tree.filter(t=>Number(t.id)===Number(e))[0];void 0!==t&&void 0!==this.course.tags&&this.populateTags(t.tags)}}this.tags.length&&-1===this.current_chapter.description.indexOf("tags-title")&&(this.current_chapter.description+=`<br id="tags-line-break">\n                <div class="chapter-tags-wrapper">\n                    <div class="text-grey-mid sub-title" id="tags-title">${this.tagsTitle}</div>\n                    ${this.tags.join("")}\n                </div>`),this.onlyTagsInDescription=8===this.current_chapter.description.indexOf("tags-line-break"),this.current_chapter&&this.current_chapter.description&&(this.descriptionText=this.sanitizer.bypassSecurityTrustHtml(this.current_chapter.description)),this.current_chapter&&this.current_chapter.description&&(this.showLimiter=!0,this.lineLimiterParams={content:this.descriptionText,lines:3,more_label:M.a.t("app7020","Show more"),less_label:M.a.t("standard","Show less")}),this.changeDetector.detectChanges()}populateTags(e){for(const t in e)e.hasOwnProperty(t)&&this.tags.indexOf(e[t])<0&&this.tags.push(`<span class="lo-tag bg-grey-light text-grey-dark border-grey-light">${e[t]}</span>`)}getUserInitials(e){return e.hasOwnProperty("firstname")&&e.hasOwnProperty("lastname")?""!==e.firstname&&""!==e.lastname?E.b.getInstance().settings.show_first_name_first?e.firstname.slice(0,1)+e.lastname.slice(0,1):e.lastname.slice(0,1)+e.firstname.slice(0,1):e.username.slice(0,1).toUpperCase():null}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.h),c.ec(c.o),c.ec(Li.b),c.ec(rn.a),c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["chapter-information"]],inputs:{course:"course",course_status:"course_status",current_chapter:"current_chapter",isCourseStarted:"isCourseStarted"},outputs:{rate:"rate",play:"play"},features:[c.Kb],decls:11,vars:13,consts:[[1,"chapter-info__wrapper","mdl-shadow--2dp","bg-white"],[1,"chapter-info__body","bg-white","text-grey-dark"],["class","info-start title-regular",3,"innerHTML","click",4,"ngIf"],["class","chapter-title text-grey-dark",3,"innerHTML",4,"ngIf"],["class","chapter-section",4,"ngIf"],["class","chapter-section default-list-style default-headings-styles",4,"ngIf"],[3,"innerHtml",4,"ngIf"],[1,"info-start","title-regular",3,"innerHTML","click"],[1,"chapter-title","text-grey-dark",3,"innerHTML"],[1,"chapter-section"],[3,"items"],[1,"chapter-section","default-list-style","default-headings-styles"],[1,"text-grey-mid","sub-title"],[3,"content","lines","removeHtml","more_label","less_label",4,"ngIf"],[3,"content","lines","removeHtml","more_label","less_label"],[3,"innerHtml"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.ed(2,S_,2,3,"div",2),c.xc(3,"json"),c.ed(4,k_,2,3,"div",3),c.xc(5,"json"),c.ed(6,T_,2,1,"div",4),c.xc(7,"json"),c.ed(8,x_,5,4,"div",5),c.xc(9,"json"),c.ed(10,D_,1,1,"div",6),c.jc(),c.jc()),2&e&&(c.Mb(2),c.Dc("ngIf",!t.current_chapter||"{}"==c.yc(3,5,t.current_chapter)),c.Mb(2),c.Dc("ngIf",t.current_chapter&&"{}"!=c.yc(5,7,t.current_chapter)),c.Mb(2),c.Dc("ngIf",t.current_chapter&&"{}"!=c.yc(7,9,t.current_chapter)&&0!=t.metadataBarParams.items.length),c.Mb(2),c.Dc("ngIf",t.current_chapter&&"{}"!=c.yc(9,11,t.current_chapter)&&t.descriptionText&&!t.onlyTagsInDescription),c.Mb(2),c.Dc("ngIf",t.onlyTagsInDescription))},directives:[m.p,C_.a,hi.a],pipes:[m.h,M.b,ji.a],encapsulation:2}),e})();var E_=i("GuO3"),A_=i("wd/R"),P_=i.n(A_),M_=i("2YCl");function L_(e,t){if(1&e){const e=c.lc();c.kc(0,"rectangular-button",12),c.sc("click",function(){return c.Vc(e),c.wc().downloadLpCertificate()}),c.jc()}if(2&e){const e=c.wc();c.Dc("properties",e.learningPlanCertificateButton.properties)("state","normal")("buttonType","submit")}}const j_=function(){return{category:"course"}};function R_(e,t){if(1&e&&(c.kc(0,"div",13),c.kc(1,"span",14),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"div",15),c.fc(5,"btn-ellipsis",16),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.hd(c.zc(3,5,"Current course",c.Hc(8,j_))),c.Mb(3),c.Dc("orientation",e.ellipsisParams.orientation)("ellipsisType",e.ellipsisParams.ellipsisType)("treeBody",e.ellipsisParams.treeBody)("actions",e.ellipsisParams.actions)}}function F_(e,t){if(1&e&&(c.kc(0,"div",17),c.fc(1,"rectangular-button",18),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("properties",e.resumeButtonParams.properties)("click",e.resumeButtonParams.onClick)}}let N_=(()=>{class e{constructor(e,t,i){this.router=e,this._store=t,this._changeDetector=i,this.name=M.a.t("learning_plan","Learning Plan progress"),this.courses=[],this.lp_courses=[],this.show_course_ellipsis=!0,this.lp_complete_percent=0,this.lp_certificate_url="",this.learningPlanTimeSpent=0,this.learningPlanTotalTime=0,this.timeSeparator="|",this.lastCourseInProgress=null,this._learningPlanStoreSubscriber=null,this.learningPlanCertificateButton={properties:{text:M.a.t("standard","Download your certificate"),icon:null,colorScheme:"positive-green",typeStyle:"filled",display:!1}},this.resumeButtonParams={properties:{text:M.a.t("learning_plan","Resume where you left off"),colorScheme:"main",typeStyle:"filled"},onClick:()=>{this.lastCourseInProgress&&this.router.navigate(["/learn/course/"+this.lastCourseInProgress.idCourse+"/"+this.lastCourseInProgress.slug_name,{lp:this.lp_id}])}}}downloadLpCertificate(){window.open(this.lp_certificate_url)}buildEllipsisMenu(e){this.ellipsisParams={orientation:"bottom-left",ellipsisType:"inline",treeBody:this.container_wrap,actions:[]};for(let t=0;t<e.length;t++){let i=e[t],s="",n="",a=!0;this.learningPlanTimeSpent+=i.duration,this.learningPlanTotalTime+=i.time_spent,i.percentage=Math.round(i.competed_lessons/i.all_lessons*100);let o=!1;void 0!==this.course&&void 0!==this.course.type&&"elearning"==this.course.type&&(o=!0),i.status==$t.e.COMPLETED?(s='<i class="zmdi zmdi-check-circle check-complete"></i>',n="text-green",a=!1):(i.percentage>=100&&1==o||i.status==$t.e.IN_PROGRESS)&&(s='<i class="zmdi zmdi-check-circle check-complete"></i>',n="text-warning",a=!1),this.ellipsisParams.actions.push({title:i.name,active:!!this.course&&this.course.id==i.idCourse,action:()=>this.router.navigate(["/learn/course/"+i.idCourse+"/"+i.slug_name,{lp:this.lp_id}]),subtitle:this.translateCourseType(i.course_type,i.competed_lessons,i.all_lessons),beforeTitle:{component:Vf.a,params:{percentage:i.percentage,color:"border-positive-green",mode:"circle",text_blocks:{no_caption:a,innerHtml:s,backgroundClass:"bg-white",fontClass:n}}},maxChars:42})}}ngOnInit(){for(let e=0;e<this.courses.length;e++){let t=this.courses[e];if(t.status==$t.e.IN_PROGRESS){this.lastCourseInProgress=t;break}}this.circularProgressbarParams={mode:"circle",color:"border-positive-green"},this.trophyColor=100===this.lp_complete_percent?"text-positive-green":"text-grey",this.buildEllipsisMenu(this.courses),this.learningPlanSpentTime=this.calculateLearningPlanTimes(this.learningPlanTimeSpent,this.learningPlanTotalTime),this._learningPlanStoreSubscriber=this._store.select(ae.k).subscribe(e=>{e.state==$t.l.VIEWING&&this.buildEllipsisMenu(e.courses)}),this.learningPlanCertificateButton.properties.display=""!==this.lp_certificate_url&&void 0!==this.lp_certificate_url}static calculateTime(e=0){let t=Math.floor(e/3600);return{hours:t,minutes:Math.floor((e-3600*t)/60)}}calculateLearningPlanTimes(t=0,i=0){let s=0,n=0,a=0,o=0,r=e.calculateTime(t),c=e.calculateTime(i);return s=r.hours,n=r.minutes,a=c.hours,o=c.minutes,{timeSpentHours:M.a.t("standard","{hours}h",{hours:s}),timeSpentMinutes:M.a.t("standard","{minutes}m",{minutes:n}),totalTimeSpentHours:M.a.t("standard","{hours}h",{hours:a}),totalTimeSpentMinutes:M.a.t("standard","{minutes}m",{minutes:o})}}translateCourseType(e,t,i){let s="";switch(e){case $t.f.ELEARNING:s="E-Learning";break;case $t.f.CLASSROOM:s="Classroom";break;case $t.f.WEBINAR:s="Webinar";break;case $t.f.LEARNING_PLAN:s="Learning plan"}return M.a.t("standard",'{courseTypeTxt} <span class="separator">|</span> {completed}/{all} lessons completed',{courseTypeTxt:s,all:i,completed:t})}ngOnDestroy(){this._learningPlanStoreSubscriber&&this._learningPlanStoreSubscriber.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.h),c.ec(w.e),c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["lp-progress"]],inputs:{mode:"mode",name:"name",course:"course",courses:"courses",lp_courses:"lp_courses",lp_id:"lp_id",show_course_ellipsis:"show_course_ellipsis",lp_complete_percent:"lp_complete_percent",container_wrap:"container_wrap",lp_certificate_url:"lp_certificate_url"},decls:22,vars:31,consts:[[1,"mdl-cell--3-col","lp-progress-circle"],[1,"lp-circular-progressbar-holder"],[3,"percentage","mode","color"],[1,"mdl-cell--2-col","lp-icons-holder"],[1,"zmdi","zmdi-arrow-right","header-icons","icon-type","text-grey","lp-arrow-right-icon"],[1,"mdl-cell--7-col","lp-title-holder"],[1,"lp-title","text-gray-dark"],[1,"lp-time","text-grey-mid"],[1,"mdl-grid","center-buttons"],["class","start-now mdl-cell mdl-cell--12-col lp-certificate-btn",3,"properties","state","buttonType","click",4,"ngIf"],["class","mdl-cell--12-col lp-dropdown-container",4,"ngIf"],["class","lp-resume-button-holder",4,"ngIf"],[1,"start-now","mdl-cell","mdl-cell--12-col","lp-certificate-btn",3,"properties","state","buttonType","click"],[1,"mdl-cell--12-col","lp-dropdown-container"],[1,"lp-course-title","text-grey-mid"],[1,"lp-dropdown-holder"],[3,"orientation","ellipsisType","treeBody","actions"],[1,"lp-resume-button-holder"],[3,"properties","click"]],template:function(e,t){1&e&&(c.kc(0,"div"),c.kc(1,"div",0),c.kc(2,"div",1),c.fc(3,"progress-bar",2),c.jc(),c.jc(),c.kc(4,"div",3),c.fc(5,"em",4),c.fc(6,"div"),c.jc(),c.kc(7,"div",5),c.kc(8,"div",6),c.gd(9),c.xc(10,"cut"),c.xc(11,"t"),c.jc(),c.kc(12,"span",7),c.gd(13),c.xc(14,"t"),c.xc(15,"t"),c.xc(16,"t"),c.xc(17,"t"),c.jc(),c.jc(),c.jc(),c.kc(18,"div",8),c.ed(19,L_,1,3,"rectangular-button",9),c.jc(),c.ed(20,R_,6,9,"div",10),c.ed(21,F_,2,2,"div",11)),2&e&&(c.Rb("lp-progress-container mdl-grid ",t.mode,""),c.Mb(3),c.Dc("percentage",t.lp_complete_percent)("mode",t.circularProgressbarParams.mode)("color",t.circularProgressbarParams.color),c.Mb(3),c.Rb("fa fa-trophy header-icons icon-type ",t.trophyColor," lp-trophy-icon"),c.Mb(3),c.hd(c.zc(10,18,c.yc(11,21,t.name),60)),c.Mb(4),c.md(" ",c.yc(14,23,t.learningPlanSpentTime.totalTimeSpentHours)," ",c.yc(15,25,t.learningPlanSpentTime.totalTimeSpentMinutes)," ",t.timeSeparator," ",c.yc(16,27,t.learningPlanSpentTime.timeSpentHours)," ",c.yc(17,29,t.learningPlanSpentTime.timeSpentMinutes)," "),c.Mb(6),c.Dc("ngIf",t.learningPlanCertificateButton.properties.display),c.Mb(1),c.Dc("ngIf",t.show_course_ellipsis),c.Mb(1),c.Dc("ngIf",t.lastCourseInProgress&&!t.show_course_ellipsis))},directives:[Vf.a,m.p,ts.a,M_.a],pipes:[hm.a,M.b],encapsulation:2}),e})();const U_=["sessionDropdown"];function z_(e,t){if(1&e&&(c.kc(0,"div",12),c.kc(1,"div",13),c.fc(2,"img",14),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.Dc("src",e.thumbnailPicture,c.Yc)}}const q_=function(e){return{category:"course",days:e}};function V_(e,t){if(1&e&&(c.fc(0,"span",17),c.xc(1,"t")),2&e){const e=c.wc(3);c.Dc("innerHTML",c.zc(1,1,"DEADLINE: the course expires in {days} days",c.Ic(4,q_,e.deadlineTimeLeft.days)),c.Wc)}}const B_=function(e){return{category:"standard",hours:e}};function G_(e,t){if(1&e&&(c.fc(0,"span",17),c.xc(1,"t")),2&e){const e=c.wc(3);c.Dc("innerHTML",c.zc(1,1," and {hours} hours",c.Ic(4,B_,e.deadlineTimeLeft.hours)),c.Wc)}}const H_=function(e){return{category:"course",hours:e}};function $_(e,t){if(1&e&&(c.fc(0,"span",17),c.xc(1,"t")),2&e){const e=c.wc(3);c.Dc("innerHTML",c.zc(1,1,"DEADLINE: the course expires in {hours} hours",c.Ic(4,H_,e.deadlineTimeLeft.hours)),c.Wc)}}function Y_(e,t){if(1&e&&(c.kc(0,"div",5),c.kc(1,"span",15),c.ed(2,V_,2,6,"span",16),c.ed(3,G_,2,6,"span",16),c.ed(4,$_,2,6,"span",16),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(2),c.Dc("ngIf",e.deadlineTimeLeft.days>0),c.Mb(1),c.Dc("ngIf",e.deadlineTimeLeft.hours>0&&e.deadlineTimeLeft.days>0),c.Mb(1),c.Dc("ngIf",e.deadlineTimeLeft.hours>0&&0==e.deadlineTimeLeft.days)}}function W_(e,t){if(1&e&&(c.kc(0,"div"),c.ed(1,Y_,5,3,"div",8),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",e.deadlineTimeLeft.days>0||e.deadlineTimeLeft.hours>0)}}const Q_=function(){return{category:"esignature"}};function K_(e,t){1&e&&(c.kc(0,"div",18),c.gd(1),c.xc(2,"uppercase"),c.xc(3,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.yc(2,1,c.zc(3,3,"E-Signature",c.Hc(6,Q_)))," "))}const J_=function(e){return{category:"standard",x:e}};function X_(e,t){if(1&e&&(c.kc(0,"div",5),c.kc(1,"span",19),c.gd(2),c.xc(3,"t"),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.id(" ",c.zc(3,1,"{x} courses",c.Ic(4,J_,e.lpCoursesCount))," ")}}function Z_(e,t){if(1&e&&(c.kc(0,"span",25),c.gd(1),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",e.sessionMenu.actions[0].title," ")}}function ev(e,t){if(1&e&&c.fc(0,"btn-ellipsis",26,27),2&e){const e=c.wc(2);c.Dc("ellipsisType",e.sessionMenu.ellipsisType)("actions",e.sessionMenu.actions)}}const tv=function(){return{category:"classroom"}};function iv(e,t){if(1&e&&(c.kc(0,"div",20),c.kc(1,"span",21),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"div",22),c.ed(5,Z_,2,1,"span",23),c.ed(6,ev,2,2,"btn-ellipsis",24),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Wb("session-label-single",1===e.sessionMenu.actions.length),c.Mb(1),c.id(" ",c.zc(3,5,"Session",c.Hc(8,tv)),": "),c.Mb(3),c.Dc("ngIf",1===e.sessionMenu.actions.length),c.Mb(1),c.Dc("ngIf",e.sessionMenu.actions.length>1)}}function sv(e,t){if(1&e&&(c.kc(0,"div",28),c.fc(1,"line-limiter",29),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("content",null==e.lineLimiter?null:e.lineLimiter.content)("lines",e.lineLimiter.lines)("removeHtml",e.lineLimiter.removeHtml)("more_label",null==e.lineLimiter?null:e.lineLimiter.more_label)("less_label",null==e.lineLimiter?null:e.lineLimiter.less_label)("skipSanitization",!e.lineLimiter.sanitize)}}function nv(e,t){if(1&e&&(c.kc(0,"div",5),c.fc(1,"metadata-bar",30),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("items",e.courseMetabar.items)}}function av(e,t){if(1&e&&(c.kc(0,"div",31),c.kc(1,"div",32),c.fc(2,"lp-progress",33),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.Dc("course",e.course)("courses",e.learning_plan.courses)("lp_id",e.learning_plan.id)("lp_complete_percent",e.learning_plan.complete_percent)("show_course_ellipsis",e.showCourseEllipsis)("lp_certificate_url",e.learning_plan.certificate_url)}}function ov(e,t){if(1&e){const e=c.lc();c.kc(0,"div",31),c.kc(1,"course-navigation-control",34),c.sc("rate",function(t){return c.Vc(e),c.wc().rateChange(t)})("play",function(t){return c.Vc(e),c.wc().startPlaying(t)}),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(1),c.Dc("mode",e.mode)("current_chapter",e.current_chapter)("next_chapter",e.next_chapter)("prev_chapter",e.prev_chapter)("course_status",e.course_status)("course",e.course)("chapters",e.chapters)("courseState",e.courseState)("displayRating",e.displayRatingComponent)("isCourseStarted",e.isCourseStarted)}}let rv=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this.el=e,this._formatServ=t,this.router=i,this.route=s,this.docLayoutService=n,this.changeDetector=a,this.translationPipe=o,this.toggleService=r,this.enrolled_sessions=[],this.isCourseStarted=!0,this.changeSession=new c.q,this.play=new c.q,this.playNext=new c.q,this.playPrev=new c.q,this.rate=new c.q,this.courseMetabar={items:[]},this.showEllipsis=!1,this.showDescription=!1,this.displayRatingComponent={display:!1,mode:"overview"},this.overviewStyle=!1,this.showCourseEllipsis=!1,this.instructor_avatar=[],this.instructor_name=[],this.instructor_id=[],this.sessionMenuOptions=[],this.lineLimiter={content:null,more_label:M.a.t("app7020","Show more"),less_label:M.a.t("standard","Show less"),lines:2,removeHtml:!1,sanitize:!0},this.learningPlanStyle=!1}onResize(e){this.recalculateWidthOfSessionDropdown()}ngOnInit(){if(this.showDescription=!1,this.sortDataBasedOnTypeOfOverview(),this.deadlineTimeLeft){const e=new Date(this.course.deadline),t=new Date(this._formatServ.currentUtcDateTime()),i=Math.abs(t.getTime()-e.getTime());this.deadlineTimeLeft=this._formatServ.millisToDaysHoursMinutes(i)}this.loadMetaBarInstructors(),this.loadSessionDatesIntoEllipsis()}ngOnChanges(e){e&&this.sortDataBasedOnTypeOfOverview()}sortDataBasedOnTypeOfOverview(){this.course?(this.displayRatingLogic(),this.overviewStyle=!0,this.thumbnailPicture=Object(Zg.i)(this.course.thumbnail)||"",this.displayName=this.course.name,this.deadlineTimeLeft=this.course.deadline,this.current_session?(this.showDescription=!1,this.changeDetector.detectChanges(),this.lineLimiter.content=this.courseDescription(),this.showDescription=!0):this.showDescription=!1,this.changeDetector.detectChanges(),this.course_status&&(this.navigationStatus=this.course_status,this.certificateUrl=this.course_status.certificate_url)):this.learning_plan&&(this.learningPlanStyle=!0,this.thumbnailPicture=this.learning_plan.image,this.displayName=this.learning_plan.name,this.learning_plan.deadline&&(this.deadlineTimeLeft=this.learning_plan.deadline),this.navigationStatus=this.learning_plan,this.certificateUrl=this.learning_plan.certificate_url,this.lpCoursesCount=this.learning_plan.courses.length)}getUserInitials(e){return""!==e.firstname&&""!==e.lastname?E.b.getInstance().settings.show_first_name_first?e.firstname.slice(0,1)+e.lastname.slice(0,1):e.lastname.slice(0,1)+e.firstname.slice(0,1):null}loadMetaBarInstructors(){let e;const t=[];if(this.course&&this.course.instructors&&this.course.instructors.length>0){for(let i=0;i<this.course.instructors.length;i++)this.instructor_avatar.push(this.course.instructors[i].avatar_url),e=E.b.getInstance().getFullName(this.course.instructors[i],!0),t.push(this.getUserInitials(this.course.instructors[i])),this.instructor_name.push(e),this.course.instructors[i].instructor_id&&this.instructor_id.push(this.course.instructors[i].instructor_id);this.courseMetabar.items=[{component:qi.a,params:{image_url:this.instructor_avatar,initials:t,size:30,stacked:!!(this.instructor_avatar&&this.instructor_avatar.length>1),extra_text:{visible:!!(this.instructor_name&&this.instructor_name.length>0),position:"right",prefix:this.translationPipe.transform(M.a.t("classroom","Instructor")),suffix:" ",content:this.instructor_name,class:"text-main"},has_border:{class:"border-white"},properties:{bg_color_class:"bg-grey-mid",text_color_class:"text-white",icon_class:"zmdi zmdi-account"}}}]}}loadSessionDatesIntoEllipsis(){let e,t,i;if(this.course&&"elearning"!==this.course.type&&this.enrolled_sessions&&this.enrolled_sessions.length>0){for(let s=0;s<this.enrolled_sessions.length;s++){if(i=this.enrolled_sessions[s],this.current_session&&this.enrolled_sessions[s].id===this.current_session.id){this.route.params.subscribe(e=>{if(e&&e.errorMessage){let t=e.errorMessage;t=decodeURIComponent((t.replace("percent_sign","%")+"").replace(/\+/g,"%20")),this.docLayoutService.toast.showToast({message:M.a.t("standard",t),type:"error"})}});const e=Object.keys(this.route.snapshot.params).filter(e=>!["id","slug","id_session"].includes(e)).reduce((e,t)=>(e[t]=this.route.snapshot.params[t],e),{});this.router.navigate([`learn/course/${this.course.id}/session/${this.current_session.id}/${this.current_session.slug_name?this.current_session.slug_name:this.current_session.id}`,e],fi.b)}const n="webinar"===this.course.type,a="classroom"===this.course.type,r=o.a.getInstance().timezone;if("begin_day"in i){const s=`${i.begin_day} ${i.begin_time}`,o=`${i.end_day} ${i.end_time}`;n?(e=(new Ge.a).transform(s,r),t=(new Ge.a).transform(o,r)):a&&this.toggleService.isOn(u.f.TOGGLE_VILT)?(e=(new Ge.a).transform(P_.a.tz(s,i.begin_timezone)),t=(new Ge.a).transform(P_.a.tz(o,i.end_timezone))):(e=(new Ge.a).transform(s),t=(new Ge.a).transform(o))}else"start_date"in i&&(n?(e=(new Ge.a).transform(i.start_date,r),t=(new Ge.a).transform(i.end_date,r)):(e=(new Ge.a).transform(i.start_date),t=(new Ge.a).transform(i.end_date)));const c=a?`<span class="session-classroom-info">\n                        (${this.translationPipe.transform(M.a.t("standard","location's time"))})\n                    </span>`:"",l={id:this.enrolled_sessions[s].id,title:this.enrolled_sessions[s].name,afterTitle:{actionHTML:`\n                            <i class="zmdi zmdi-calendar text-grey-mid-permanent"></i>\n                            <span class="session-date">\n                                ${e}\n                            </span>\n                            <i class="zmdi zmdi-long-arrow-right text-grey-mid-permanent"></i>\n                            <span class="session-date">\n                                ${t} ${c}\n                            </span>`},action:e=>{this.sessionAction(this.enrolled_sessions[s].id,this.enrolled_sessions[s].slug_name)},active:!!this.current_session&&this.enrolled_sessions[s].id===this.current_session.id},d=Object(ii.l)(Object(ii.j)(),ii.a),h=this._formatServ.getContextTimezone();e=new Zt.a(i.start_date).formatTimezoned(d,h),t=new Zt.a(i.end_date).formatTimezoned(d,h),l.afterTitle.actionHTML=`\n                            <i class="zmdi zmdi-calendar text-grey-mid-permanent"></i>\n                            <span class="session-date">\n                                ${e}\n                            </span>\n                            <i class="zmdi zmdi-long-arrow-right text-grey-mid-permanent"></i>\n                            <i class="zmdi zmdi-calendar text-grey-mid-permanent"></i>\n                            <span class="session-date">\n                                ${t}\n                            </span>\n                            <div class="timezone">\n                                ${this._formatServ.getFormattedTimezone(this._formatServ.getContextTimezone())}\n                            </div>`,this.sessionMenuOptions.push(l)}this.sessionMenu={ellipsisType:"inline",orientation:"bottom-left",actions:this.sessionMenuOptions},this.recalculateWidthOfSessionDropdown(),this.showEllipsis=!0}}recalculateWidthOfSessionDropdown(){for(let e=0;e<this.sessionMenuOptions.length;e++)this.sessionMenuOptions[e].title.length>.35*window.innerWidth/8&&(this.sessionMenuOptions[e].maxChars=Math.ceil((window.innerWidth-600)/8));this.sessionMenu&&(this.sessionMenu.actions=this.sessionMenuOptions),this.sessionDropdown&&this.sessionDropdown.resetMdlStyles(!0,!0)}displayRatingLogic(){this.course.rating_option===bc.a.DISABLED?this.displayRatingComponent.display=!1:this.course_status.status===ne.d.COMPLETED&&this.course.rating_option===bc.a.ONLY_COMPLETED?this.displayRatingComponent.display=!0:this.course_status.status!==ne.d.SUBSCRIBED&&this.course_status.status!==ne.d.IN_PROGRESS&&this.course_status.status!==ne.d.COMPLETED||this.course.rating_option!==bc.a.ONLY_ENROLLED?this.course.rating_option===bc.a.ALWAYS&&(this.displayRatingComponent.display=!0):this.displayRatingComponent.display=!0}sessionAction(e,t){this.router.navigate(["learn/course/"+this.course.id+"/session/"+e+"/"+t],Object.assign({replaceUrl:!0},fi.b)),this.changeDetector.detectChanges()}startPlaying(e){this.play.emit(e)}rateChange(e){this.rate.emit(e)}isLearningPlanWithCourses(){return!(!this.learning_plan||!this.learning_plan.courses)}isElearningWithChapters(){return!!(this.chapters&&this.chapters.length>0&&this.overviewStyle&&this.course&&"elearning"===this.course.type)}isCourseWithSessions(){return!!(!this.learning_plan&&this.enrolled_sessions&&this.enrolled_sessions.length>0)}isCourseClassroomOrWebinarCompleted(){return!(this.learning_plan||this.course_status.status!==ne.d.COMPLETED||this.course.type!==Tc.a.CLASSROOM&&this.course.type!==Tc.a.WEBINAR)}setGridClasses(){return this.isElearningWithChapters()||this.isCourseWithSessions()||this.isLearningPlanWithCourses()||this.isCourseClassroomOrWebinarCompleted()?"mdl-cell--8-col":"mdl-cell--12-col"}renderSessionDescription(e){let t=0;if(e.additional_fields)for(;t<e.additional_fields.length;)e.additional_fields[t].value&&""!=e.additional_fields[t].value?t++:e.additional_fields.splice(t,1);const i=e.description?e.description:"",s=e.additional_fields?e.additional_fields:Array();let n="";return n+=i,void 0!==s&&(n+='<ul class="session-additional-fields-list">',s.forEach(e=>{switch(e.type){case E_.a.DATE:const t=Object(ui.a)(this._formatServ,e.value);n+='<li><div class="ui-row"><div class="ui-col-12"><strong>'+e.title+'</strong></div><div class="ui-col-12">'+t+"</div></div></li>";break;case E_.a.TEXTAREA:this.lineLimiter.sanitize=!1;default:let i="";null!==e.value&&(i=e.value),n+='<li><div class="ui-row"><div class="ui-col-12"><strong>'+e.title+'</strong></div><div class="ui-col-12">'+i+"</div></div></li>"}}),n+="</ul>",n+="<br/>"),n}courseDescription(){const e=/\/learn\/course\/[0-9+\-.]*\/session\/[0-9+\-.]*\/./.test(this.router.url);return this.course.description&&!e?this.course.description:this.current_session.additional_fields.length>0?this.renderSessionDescription(this.current_session):this.current_session.description}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.o),c.ec(ni.b),c.ec(s.h),c.ec(s.a),c.ec(j.a),c.ec(c.i),c.ec(M.b),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["overview-header"]],viewQuery:function(e,t){if(1&e&&c.nd(U_,1),2&e){let e;c.Rc(e=c.tc())&&(t.sessionDropdown=e.first)}},hostBindings:function(e,t){1&e&&c.sc("resize",function(e){return t.onResize(e)},!1,c.Uc)},inputs:{course:"course",learning_plan:"learning_plan",current_session:"current_session",enrolled_sessions:"enrolled_sessions",course_status:"course_status",mode:"mode",current_chapter:"current_chapter",prev_chapter:"prev_chapter",next_chapter:"next_chapter",chapters:"chapters",courseState:"courseState",isCourseStarted:"isCourseStarted"},outputs:{changeSession:"changeSession",play:"play",playNext:"playNext",playPrev:"playPrev",rate:"rate"},features:[c.Lb([M.b]),c.Kb],decls:16,vars:15,consts:[[1,"overview-course-header__wrapper","text-grey-dark","bg-white"],[1,"overview-course-header__body","mdl-grid","mdl-wrapper"],["class","mdl-cell course-thumbnail rectangular",4,"ngIf"],[1,"mdl-cell","course-content"],[4,"ngIf"],[1,"mdl-cell","mdl-cell--12-col"],["class","course-tag text-white",4,"ngIf"],["tabindex","-1",1,"title-popup",3,"docLayoutSkipLinkTarget","docLayoutSkipLinkTargetMain","innerHTML"],["class","mdl-cell mdl-cell--12-col",4,"ngIf"],["class","mdl-cell mdl-cell--12-col session-wrapper",4,"ngIf"],["class","mdl-cell mdl-cell--12-col description",4,"ngIf"],["class","mdl-cell mdl-cell--4-col",4,"ngIf"],[1,"mdl-cell","course-thumbnail","rectangular"],[1,"thumbnail-wrapper"],[3,"src"],[1,"deadline-message","bg-error","text-white"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],[1,"course-tag","text-white"],[1,"text-grey-mid"],[1,"mdl-cell","mdl-cell--12-col","session-wrapper"],[1,"session-label","title-section","text-grey-mid"],[1,"session-menu","title-section","text-main"],["class","session-title-single",4,"ngIf"],[3,"ellipsisType","actions",4,"ngIf"],[1,"session-title-single"],[3,"ellipsisType","actions"],["sessionDropdown",""],[1,"mdl-cell","mdl-cell--12-col","description"],[3,"content","lines","removeHtml","more_label","less_label","skipSanitization"],[3,"items"],[1,"mdl-cell","mdl-cell--4-col"],[1,"lp-progress__wrapper","no-padding","bg-white"],[1,"learnin-plan-progress",3,"course","courses","lp_id","lp_complete_percent","show_course_ellipsis","lp_certificate_url"],[3,"mode","current_chapter","next_chapter","prev_chapter","course_status","course","chapters","courseState","displayRating","isCourseStarted","rate","play"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.kc(2,"div"),c.ed(3,z_,3,1,"div",2),c.kc(4,"div",3),c.ed(5,W_,2,1,"div",4),c.kc(6,"div",5),c.ed(7,K_,4,7,"div",6),c.jc(),c.kc(8,"div",5),c.fc(9,"span",7),c.jc(),c.ed(10,X_,4,6,"div",8),c.ed(11,iv,7,9,"div",9),c.ed(12,sv,2,6,"div",10),c.ed(13,nv,2,1,"div",8),c.jc(),c.jc(),c.ed(14,av,3,6,"div",11),c.ed(15,ov,2,10,"div",11),c.jc(),c.jc()),2&e&&(c.Mb(2),c.Rb("mdl-cell ",t.setGridClasses()," mdl-grid header-body"),c.Mb(1),c.Dc("ngIf",t.thumbnailPicture),c.Mb(2),c.Dc("ngIf",t.deadlineTimeLeft),c.Mb(2),c.Dc("ngIf",t.course&&t.course.has_esignature_enabled),c.Mb(2),c.Dc("docLayoutSkipLinkTarget","")("docLayoutSkipLinkTargetMain",!0)("innerHTML",t.displayName,c.Wc),c.Mb(1),c.Dc("ngIf",t.isLearningPlanWithCourses()),c.Mb(1),c.Dc("ngIf",t.showEllipsis&&t.overviewStyle),c.Mb(1),c.Dc("ngIf",t.showDescription),c.Mb(1),c.Dc("ngIf",t.overviewStyle&&(null==t.course?null:t.course.instructors)&&"elearning"==(null==t.course?null:t.course.type)),c.Mb(1),c.Dc("ngIf",t.isLearningPlanWithCourses()),c.Mb(1),c.Dc("ngIf",t.isElearningWithChapters()||t.isCourseWithSessions()||t.isCourseClassroomOrWebinarCompleted()))},directives:[m.p,xf.a,M_.a,hi.a,C_.a,N_,m_],pipes:[M.b,m.z],styles:["[_nghost-%COMP%]  .session-wrapper btn-ellipsis .mdl-menu__container{z-index:10000}[_nghost-%COMP%]  .session-wrapper btn-ellipsis .btn-ellipsis.with-after-titles .mdl-menu, [_nghost-%COMP%]  .session-wrapper btn-ellipsis .btn-ellipsis.with-after-titles .mdl-menu__container, [_nghost-%COMP%]  .session-wrapper btn-ellipsis .btn-ellipsis.with-after-titles .mdl-menu__outline{min-width:800px}.course-thumbnail[_ngcontent-%COMP%]   .thumbnail-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;align-items:center;justify-content:center}.course-thumbnail[_ngcontent-%COMP%]   .thumbnail-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%}"]}),e})(),cv=(()=>{class e{constructor(){this.lp_courses=[],this.lp_complete_percent=0,this.lp_title="",this.learningPlanTimeSpent=0,this.learningPlanTotalTime=0}ngOnInit(){for(let e=0;e<this.lp_courses.length;e++){const t=this.lp_courses[e];this.learningPlanTimeSpent+=t.duration,this.learningPlanTotalTime+=t.time_spent}this.learningPlanSpentTime=this.calculateLearningPlanTimes(this.learningPlanTimeSpent,this.learningPlanTotalTime),this.updateParams()}ngOnChanges(e){this.updateParams()}calculateLearningPlanTimes(e=0,t=0){let i=0,s=0,n=0,a=0;const o=N_.calculateTime(e),r=N_.calculateTime(t);return i=o.hours,s=o.minutes,n=r.hours,a=r.minutes,M.a.t("standard","{hours}h {minutes}m / {total_hours}h {total_minutes}m",{hours:n,minutes:a,total_hours:i,total_minutes:s})}updateParams(){this.progressParams={percentage:this.lp_complete_percent,color:"bg-positive-green",is_animated:!1,text_blocks:{"bottom-left":M.a.t("course","{progress}% progress",{progress:this.lp_complete_percent}),"bottom-right":this.learningPlanSpentTime}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["slideup-header"]],inputs:{lp_courses:"lp_courses",lp_id:"lp_id",lp_complete_percent:"lp_complete_percent",lp_title:"lp_title"},features:[c.Kb],decls:13,vars:14,consts:[[1,"slideup-header__wrapper","text-white"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--7-col"],[1,"descriptions"],[1,"mdl-cell","mdl-cell--4-col","right-align"],[3,"percentage","mode","color","text_blocks"],[1,"trophy-cell","mdl-cell--1-col"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.kc(2,"div",2),c.kc(3,"p",3),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"h3"),c.gd(7),c.xc(8,"cut"),c.jc(),c.jc(),c.kc(9,"div",4),c.fc(10,"progress-bar",5),c.jc(),c.kc(11,"div",6),c.fc(12,"div"),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(4),c.hd(c.yc(5,9,"Learning plan")),c.Mb(3),c.hd(c.zc(8,11,t.lp_title,100)),c.Mb(3),c.Dc("percentage",t.progressParams.percentage)("mode",t.progressParams.mode)("color",t.progressParams.color)("text_blocks",t.progressParams.text_blocks),c.Mb(2),c.Rb("fa fa-trophy header-icons icon-type ",100==t.progressParams.percentage?"text-positive-green":"text-white",""))},directives:[Vf.a],pipes:[M.b,hm.a],encapsulation:2}),e})();var lv=i("AytR"),dv=i("crwO"),uv=function(e){return e[e.COMPLETED=0]="COMPLETED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.LOCKED_BY_COURSES=2]="LOCKED_BY_COURSES",e[e.LOCKED_BY_COURSES_SOFT=3]="LOCKED_BY_COURSES_SOFT",e[e.LOCKED_BY_COURSES_NUMBER=4]="LOCKED_BY_COURSES_NUMBER",e[e.LOCKED_BY_TIME=5]="LOCKED_BY_TIME",e[e.LOCKED_BY_WAITING=6]="LOCKED_BY_WAITING",e[e.NOT_STARTED=7]="NOT_STARTED",e[e.LOCKED=8]="LOCKED",e}({});function hv(e){return e.status===$t.e.COMPLETED?uv.COMPLETED:e.status===$t.e.IN_PROGRESS?uv.IN_PROGRESS:!e.can_enter&&e.unlocking_datetime?uv.LOCKED_BY_TIME:e.can_enter?e.status===$t.e.WAITING&&e.can_enter?uv.LOCKED_BY_WAITING:uv.NOT_STARTED:uv.LOCKED}function pv(e,t){const i=["",""];switch(hv(e)){case uv.COMPLETED:return M.a.t("course","_T_USER_STATUS_END");case uv.IN_PROGRESS:return M.a.t("standard","_USER_STATUS_BEGIN");case uv.LOCKED_BY_COURSES:return M.a.t("curricula","Please complete the following courses to unlock this course:");case uv.LOCKED_BY_COURSES_SOFT:return M.a.t("curricula","Please complete at least {n} of the following courses to unlock this course:",{n:i.length});case uv.LOCKED_BY_COURSES_NUMBER:return M.a.t("curricula","Require at least {n} courses to be completed",{n:["",""].length});case uv.LOCKED_BY_TIME:return M.a.t("curricula","The course will be available from {datetime}",{datetime:gv(e,t)});case uv.LOCKED:return M.a.t("standard","Subscription not active");case uv.LOCKED_BY_WAITING:return M.a.t("standard","in waiting list");case uv.NOT_STARTED:default:return M.a.t("standard","To start")}}function gv(e,t){return new ld.a(t.formatterService,t.changeDetectorRef).transform(e.unlocking_datetime,{disableRelativeTime:!0,length:"short"})}var mv=i("dHR3");function bv(e,t){1&e&&(c.kc(0,"div",3),c.kc(1,"div",4),c.fc(2,"ui-spinner"),c.kc(3,"div",5),c.gd(4),c.xc(5,"t"),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(4),c.hd(c.yc(5,1,"Loading the Learning Plan...")))}function fv(e,t){if(1&e){const e=c.lc();c.kc(0,"div",15),c.kc(1,"flat-vertical-list",16),c.sc("onClick",function(t){return c.Vc(e),c.wc(2).redirectToCourse(t)}),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("items",e.learningPlanCourses)}}function _v(e,t){if(1&e&&(c.kc(0,"div",6),c.kc(1,"div"),c.fc(2,"overview-header",7),c.jc(),c.kc(3,"div",8),c.fc(4,"certification-manager",9),c.kc(5,"div",10),c.kc(6,"div",11),c.kc(7,"div",12),c.gd(8),c.xc(9,"t"),c.jc(),c.fc(10,"div",13),c.xc(11,"sanitizeHtml"),c.jc(),c.jc(),c.ed(12,fv,2,1,"div",14),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.Dc("learning_plan",e.learningPlanModel),c.Mb(2),c.Dc("certificationData",e.learningPlanModel.certification)("certificationAward",e.learningPlanModel.certification_award)("resourceId",e.learningPlanModel.id),c.Mb(4),c.hd(c.yc(9,7,"About this Learning Plan")),c.Mb(2),c.Dc("innerHtml",c.yc(11,9,e.learningPlanModel.description),c.Wc),c.Mb(2),c.Dc("ngIf",e.learningPlanModel.courses.length>0)}}const vv=function(e){return{initializing:e}};let yv=(()=>{class e{constructor(e,t,i,s,n,a,o,r,c,l,d){this._store=e,this._learningPlanActions=t,this._router=i,this._route=s,this._el=n,this.route=a,this.router=o,this._backendService=r,this.formatterService=c,this.changeDetectorRef=l,this.docLayoutService=d,this.LearningPlanStates=$t.l,this.lineLimiter={content:null,lines:12,more_label:M.a.t("app7020","Show more"),less_label:M.a.t("standard","Show less")},this.learningPlanCourses=[],this.disposableSubscriptions=[],this.idLP=null}ngOnInit(){const e=this.getLPId().subscribe(e=>{console.log("Navigated to learning plan "+e);const t=this.validateDeeplink().subscribe(()=>{this.attachLPSubscription(),this._store.dispatch(this._learningPlanActions.loadLearningPlanInfo(this.idLP))});this.disposableSubscriptions.push(t)});this.disposableSubscriptions.push(e)}getLPId(){return a.a.create(e=>{this.route.params.subscribe(t=>{if(void 0!==t.id){const i=t.id;this.idLP!==i&&(this.idLP=i,e.next(i))}else e.error()})})}deeplinkActionButton(){if(this.learningPlanModel.deeplink&&""!==this.learningPlanModel.deeplink){const e=o.a.getInstance();let t="";void 0!==lv.a.subfolder&&(t="/"+lv.a.subfolder+"/");const i={singleLink:document.location.origin+t+"lms/index.php?r=coursepath/deeplink&id_path="+this.idLP+"&hash="+this.learningPlanModel.deeplink+"&generated_by="+e.id};this.docLayoutService.actionButtons.setActionButtons([{properties:{icons:["zmdi zmdi-link"],baloon:{width:520,title:"",style:"white",position:"bottom-left",component:{params:i,component:dv.a}}}}])}}validateDeeplink(){return a.a.create(e=>{const t=this.route.queryParams.subscribe(t=>{const i=void 0!==t.hash?t.hash:null,s=void 0!==t.generated_by?t.generated_by:null;if(i&&s&&null!==i&&null!==s){console.log("Detected deeplink related param changes in URL. Validating deeplink");const t=this._backendService.request("/learn/v1/lp/"+this.idLP+"/deeplink","POST",{hash:i,generated_by:s}).subscribe(i=>{t&&t.unsubscribe(),console.log("Deeplink valid"),i.data.message&&""!==i.data.message&&this.docLayoutService.toast.showToast({message:i.data.message,type:i.data.success?"success":"error"}),i.data.success?(e.next(!0),this.router.navigate([i.data.redirectUrl])):(this.router.navigate([i.data.redirectUrl]),e.error("Deeplink not valid. Rejecting access"))})}else e.next(!0)});this.disposableSubscriptions.push(t)})}redirectToCourse(e){return this._router.navigate(["learn/course/"+e.id+"/"+e.payload.slug,{lp:e.payload.id_learningplan}])}attachLPSubscription(){const t=this._store.select(ae.k).subscribe(t=>{this.learningPlanModel=t,t.state===$t.l.VIEWING&&(this.learningPlanModel.state===$t.l.UNAUTHORIZED||this.learningPlanModel.status===$t.m.NOT_ENROLLED&&!this.learningPlanModel.settings.show_in_catalog?this._router.navigate(["/unauthorized"],fi.b):this.learningPlanModel&&this.learningPlanModel.status===$t.m.NOT_ENROLLED&&this.learningPlanModel.settings.show_in_catalog&&!this.learningPlanModel.is_assigned&&this.router.navigate(["/learn/learning_plan/view/"+this.learningPlanModel.id+"/"+this.learningPlanModel.slug_name],fi.b),this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:Ii.a.myCoursesAndLearningPlans,href:"/learn/mycourses"},{label:this.learningPlanModel.name,href:this.router.url}]),this.learningPlanCourses=e.formatLPCourses(this.learningPlanModel,{changeDetectorRef:this.changeDetectorRef,formatterService:this.formatterService}),this.deeplinkActionButton())});this.disposableSubscriptions.push(t)}static formatLPCourses(e,t){const i=e.id,s=[];for(let n=0;n<e.courses.length;n++){e.courses[n].percentage=Math.round(e.courses[n].competed_lessons/e.courses[n].all_lessons*100),isNaN(e.courses[n].percentage)&&(e.courses[n].percentage="completed"===e.courses[n].status?100:0);const a=e.courses[n];let o="",r="",c=!0,l=!1;switch(void 0!==a.course_type&&"elearning"===a.course_type&&(l=!0),l||a.status!==$t.e.COMPLETED||(a.percentage=100),hv(a)){case uv.COMPLETED:o='<i class="zmdi zmdi-check-circle check-complete"></i>',r="text-positive-green",c=!1;break;case uv.IN_PROGRESS:o='<i class="zmdi zmdi-check-circle check-complete"></i>',r="text-warning",c=!1;break;case uv.NOT_STARTED:default:o='<i class="zmdi zmdi-check-circle check-complete text-grey-mid"></i>',r="text-grey-mid-permanent",c=!1}s.push({id:a.idCourse,title:a.name,description:a.short_description,type:a.course_type,image_url:a.image,duration:a.duration,payload:{slug:a.slug_name,id_learningplan:i},prefix:{component:Vf.a,params:{percentage:a.percentage,color:"border-positive-green",mode:"circle",text_blocks:{innerHtml:o,backgroundClass:"bg-white",fontClass:r}}},tooltip:{position:"top",text:pv(a,t)},can_enter:"elearning"===a.course_type?"waiting"!==a.status&&a.can_enter:a.can_enter,can_enter_reason:(()=>{switch(hv(a)){case uv.LOCKED_BY_TIME:case uv.LOCKED_BY_WAITING:return pv(a,t);default:return a.status_message||a.can_enter_reason}})()})}return s}ngOnDestroy(){this.learningPlanCourses=[];for(const t in this.disposableSubscriptions){const i=this.disposableSubscriptions[t];if(i)try{i.unsubscribe()}catch(e){console.log("The subscriber is already unsubscribed")}}this._store.dispatch(this._learningPlanActions.cleanLearningPlanStoreData()),this.docLayoutService.actionButtons.clearActionButtons()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(w.e),c.ec(Ts.c),c.ec(s.h),c.ec(s.a),c.ec(c.o),c.ec(s.a),c.ec(s.h),c.ec(I.a),c.ec(ni.b),c.ec(c.i),c.ec(j.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],decls:3,vars:5,consts:[[1,"learning-plan-lp",3,"ngClass"],["class","learning-plan-lp__loader",4,"ngIf"],["class","learning-plan-lp__viewing",4,"ngIf"],[1,"learning-plan-lp__loader"],[1,"loader"],[1,"message","text-grey-mid"],[1,"learning-plan-lp__viewing"],[3,"learning_plan"],[1,"mdl-wrapper","learning-plan-lp__wrapper"],["consumerPage","learning-plan",3,"certificationData","certificationAward","resourceId"],[1,"overview-description__wrapper","text-grey-dark","bg-white"],[1,"overview-description__body"],[1,"description-title"],[1,"description-content","default-list-style","default-headings-styles",3,"innerHtml"],["class","learning-plan-courses-list rectangular",4,"ngIf"],[1,"learning-plan-courses-list","rectangular"],[3,"items","onClick"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.ed(1,bv,6,3,"div",1),c.ed(2,_v,13,11,"div",2),c.jc()),2&e&&(c.Dc("ngClass",c.Ic(3,vv,(null==t.learningPlanModel?null:t.learningPlanModel.state)==t.LearningPlanStates.INITIALIZING)),c.Mb(1),c.Dc("ngIf",(null==t.learningPlanModel?null:t.learningPlanModel.state)==t.LearningPlanStates.INITIALIZING),c.Mb(1),c.Dc("ngIf",(null==t.learningPlanModel?null:t.learningPlanModel.state)==t.LearningPlanStates.VIEWING))},directives:[m.n,m.p,b.Be,rv,qr,mv.a],pipes:[M.b,ji.a],styles:['.description-content[_ngcontent-%COMP%]:after{content:"";display:block;clear:both}[_nghost-%COMP%]     certification-manager .ui-notification-banner{margin-bottom:var(--ui-spacing-xl)}']}),e})();function wv(e,t){if(1&e){const e=c.lc();c.kc(0,"div",3),c.kc(1,"flat-vertical-list",4),c.sc("onClick",function(t){return c.Vc(e),c.wc().redirectToCourse(t)}),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(1),c.Dc("items",e.learningPlanCourses)}}let Cv=(()=>{class e{constructor(e,t,i,s){this._router=e,this._store=t,this.formatterService=i,this.changeDetectorRef=s,this.learningPlanCourses=[]}ngOnInit(){this.lpSubscriber=this._store.select(ae.k).subscribe(e=>{e&&(this.lp_model=e,this.learningPlanCourses=yv.formatLPCourses(this.lp_model,{changeDetectorRef:this.changeDetectorRef,formatterService:this.formatterService}))})}redirectToCourse(e){return this._router.navigate(["learn/course/"+e.id+"/"+e.payload.slug,{lp:e.payload.id_learningplan}])}ngOnDestroy(){this.lpSubscriber&&this.lpSubscriber.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.h),c.ec(w.e),c.ec(ni.b),c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["slideup-content"]],decls:3,vars:2,consts:[[1,"learning-plan-lp__wrapper"],[3,"description"],["class","learning-plan-courses-list",4,"ngIf"],[1,"learning-plan-courses-list"],[3,"items","onClick"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.fc(1,"overview-description",1),c.ed(2,wv,2,1,"div",2),c.jc()),2&e&&(c.Mb(1),c.Dc("description",null==t.lp_model?null:t.lp_model.description),c.Mb(1),c.Dc("ngIf",(null==t.lp_model?null:t.lp_model.courses.length)>0))},directives:[m.p,mv.a],encapsulation:2}),e})();const Sv=["overlay"],kv=["slideupPanel"];function Tv(e,t){1&e&&(c.kc(0,"div",12),c.kc(1,"div",13),c.fc(2,"slideup-content"),c.jc(),c.jc())}const Iv=function(e){return{slided:e}},xv=function(e,t){return{"zmdi-chevron-down":e,"zmdi-chevron-up":t}};let Dv=(()=>{class e{constructor(e){this.docLayoutService=e,this.docLayoutConfig=this.docLayoutService.getDocLayoutConfig(),this.showPanel=!1}toggleSlideupPanel(){this.showPanel=!this.showPanel,this.overlay.nativeElement.classList.toggle("showed"),this.showPanel&&setTimeout(()=>{this.maxContentPanelHeight=60!==this.slideupPanel.nativeElement.offsetHeight||0!==this.slideupPanel.nativeElement.offsetHeight?this.slideupPanel.nativeElement.offsetHeight:300},300),this.showPanel?this.docLayoutService.page.hidePageOverflow():this.docLayoutService.page.showPageOverflow()}ngOnDestroy(){this.docLayoutService.page.showPageOverflow()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(j.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["slideup-panel"]],viewQuery:function(e,t){if(1&e&&(c.nd(Sv,1),c.nd(kv,1)),2&e){let e;c.Rc(e=c.tc())&&(t.overlay=e.first),c.Rc(e=c.tc())&&(t.slideupPanel=e.first)}},inputs:{learningPlanCourses:"learningPlanCourses",learningPlanID:"learningPlanID",learningPlanCompletePercent:"learningPlanCompletePercent",learningPlanTitle:"learningPlanTitle"},decls:12,vars:13,consts:[[3,"active"],[1,"slideup-panel__wrapper","bg-grey-superlight",3,"ngClass"],["slideupPanel",""],[1,"slideup-panel__header","bg-main",3,"uiKeyboardFocusable","click","keydown.enter"],[1,"mdl-wrapper"],[1,"header-component_wrapper"],[3,"lp_courses","lp_id","lp_complete_percent","lp_title"],[1,"toggle-panel"],[1,"text-white","zmdi",3,"ngClass"],["class","slideup-panel__content bg-grey-superlight",4,"ngIf"],[1,"slideup-panel-overlay"],["overlay",""],[1,"slideup-panel__content","bg-grey-superlight"],[1,"content-component_wrapper","mdl-wrapper"]],template:function(e,t){1&e&&(c.kc(0,"ui-trap",0),c.kc(1,"div",1,2),c.kc(3,"div",3),c.sc("click",function(){return t.toggleSlideupPanel()})("keydown.enter",function(){return t.toggleSlideupPanel()}),c.kc(4,"div",4),c.kc(5,"div",5),c.fc(6,"slideup-header",6),c.kc(7,"div",7),c.fc(8,"i",8),c.jc(),c.jc(),c.jc(),c.jc(),c.ed(9,Tv,3,0,"div",9),c.jc(),c.jc(),c.fc(10,"div",10,11)),2&e&&(c.Dc("active",t.showPanel),c.Mb(1),c.Dc("ngClass",c.Ic(8,Iv,t.showPanel)),c.Mb(5),c.Dc("lp_courses",t.learningPlanCourses)("lp_id",t.learningPlanID)("lp_complete_percent",t.learningPlanCompletePercent)("lp_title",t.learningPlanTitle),c.Mb(2),c.Dc("ngClass",c.Jc(10,xv,t.showPanel,!t.showPanel)),c.Mb(1),c.Dc("ngIf",t.showPanel))},directives:[b.kf,m.n,b.Xc,cv,m.p,Cv],styles:['.color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}slideup-panel .slideup-panel__wrapper{position:fixed;left:0;right:0;bottom:0;margin:auto;min-height:55px;z-index:3;transition-duration:.3s;transition-timing-function:cubic-bezier(0,1,.5,1);max-height:70px}slideup-panel .slideup-panel__wrapper.slided{max-height:87%;min-height:86%}slideup-panel .slideup-panel__header{position:relative;padding:5px 0 0;min-height:60px;cursor:pointer}slideup-panel .slideup-panel__header:after{content:" ";position:absolute;top:var(--ui-spacing-micro);left:var(--ui-spacing-micro);width:calc(100% - var(--ui-spacing-tiny));height:calc(100% - var(--ui-spacing-tiny));box-sizing:border-box;opacity:var(--ui-opacity-transparent);border:solid var(--ui-size-border-xs) var(--ui-color-border-accessibility-negative);border-radius:var(--ui-radius-default);transition:opacity var(--ui-motion-duration-short) var(--ui-motion-easing-entering)}.ui-keyboard-navigation slideup-panel .slideup-panel__header:focus:after{opacity:var(--ui-opacity-full)}slideup-panel .slideup-panel__header .mdl-wrapper .header-component_wrapper{position:relative;padding-right:20px;min-height:50px}slideup-panel .slideup-panel__header .mdl-wrapper .header-component_wrapper .toggle-panel{padding-left:30px;position:absolute;right:0;top:0;bottom:0;margin:auto;height:25px;cursor:pointer}slideup-panel .slideup-panel__header .mdl-wrapper .header-component_wrapper .toggle-panel i{font-size:26px}slideup-panel .slideup-panel__content{max-height:78vh;overflow:auto;padding:35px 0;box-sizing:border-box}slideup-panel .slideup-panel-overlay{position:fixed;top:0;left:0;right:0;bottom:0;opacity:0;visibility:hidden;z-index:2;transition-property:all;transition-duration:.5s;transition-timing-function:cubic-bezier(0,1,.5,1);background:rgba(0,0,0,.5)}slideup-panel .slideup-panel-overlay.showed{opacity:1;visibility:visible}@media (max-width:1024px){slideup-panel .slideup-panel__wrapper{max-height:inherit}}'],encapsulation:2}),e})();const Ov=["additionalFieldsDialog"],Ev=["courseNavigation"],Av=["coursePlayerContainer"],Pv=["changeSessionDialog"],Mv=["changeSession"],Lv=["selfUnenrollDialog"],jv=["selfUnenrollDialogComponent"],Rv=["selfUnenrollDialogConfirmButton"];function Fv(e,t){if(1&e&&(c.kc(0,"div",4),c.kc(1,"div",5),c.fc(2,"iframe",6),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(2),c.Dc("src",e.iframeUrl,c.Xc)}}function Nv(e,t){if(1&e&&(c.kc(0,"div",14),c.fc(1,"course-waiting-list",15),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("course",e.course)}}function Uv(e,t){1&e&&(c.kc(0,"div",18),c.kc(1,"div",19),c.kc(2,"div",20),c.kc(3,"div",21),c.kc(4,"div",22),c.fc(5,"div",23),c.kc(6,"div",24),c.gd(7),c.xc(8,"t"),c.jc(),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(7),c.id(" ",c.yc(8,1,"This course has no sessions available at this time. Please, check back later.")," "))}function zv(e,t){if(1&e&&(c.kc(0,"div",19),c.fc(1,"div",31),c.kc(2,"div",32),c.fc(3,"em",33),c.gd(4),c.jc(),c.fc(5,"div",31),c.jc()),2&e){const e=c.wc(4);c.Mb(4),c.id("",e.softDeadlineText," ")}}function qv(e,t){1&e&&(c.kc(0,"div"),c.kc(1,"div",21),c.kc(2,"div",22),c.fc(3,"div",23),c.kc(4,"div",24),c.gd(5),c.xc(6,"t"),c.jc(),c.kc(7,"div",34),c.gd(8),c.xc(9,"t"),c.jc(),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(5),c.id(" ",c.yc(6,2,"Ops, no Training Materials found for this course")," "),c.Mb(3),c.id(" ",c.yc(9,4,"You may want to contact your administrator or instructor to fix this problem")," "))}function Vv(e,t){if(1&e){const e=c.lc();c.kc(0,"div",43),c.kc(1,"course-navigation",44),c.sc("rate",function(t){return c.Vc(e),c.wc(5).rateChange(t)})("play",function(t){return c.Vc(e),c.wc(5).startPlaying(t)}),c.jc(),c.jc()}if(2&e){const e=c.wc(5);c.Mb(1),c.Dc("mode",e.navigationMode)("current_chapter",e.currentChapter)("next_chapter",e.nextChapter)("prev_chapter",e.prevChapter)("course_status",e.courseStatus)("chapter_viewer",e.chapterViewer)("course",e.course)("chapters",e.chapters)("folders",e.folders)("courseState",e.courseState)("learning_plan_id",e.learningPlanId)("isCourseStarted",e.isCourseStarted)}}function Bv(e,t){if(1&e){const e=c.lc();c.kc(0,"chapter-information",46),c.sc("rate",function(t){return c.Vc(e),c.wc(6).rateChange(t)})("play",function(t){return c.Vc(e),c.wc(6).startPlaying(t)}),c.xc(1,"json"),c.jc()}if(2&e){const e=c.wc(6);c.Dc("course",e.course)("current_chapter","{}"!=c.yc(1,4,e.currentChapter)?e.currentChapter:e.lastPlayedChapter)("course_status",e.courseStatus)("isCourseStarted",e.isCourseStarted)}}function Gv(e,t){if(1&e&&(c.kc(0,"div",43),c.ed(1,Bv,2,6,"chapter-information",45),c.jc()),2&e){const e=c.wc(5);c.Mb(1),c.Dc("ngIf",e.currentChapter||e.lastPlayedChapter)}}const Hv=function(e,t){return{"mdl-cell--4-col":e,"mdl-cell--1-col":t}};function $v(e,t){if(1&e){const e=c.lc();c.kc(0,"div",47),c.kc(1,"course-navigation",44,48),c.sc("rate",function(t){return c.Vc(e),c.wc(5).rateChange(t)})("play",function(t){return c.Vc(e),c.wc(5).startPlaying(t)}),c.jc(),c.jc()}if(2&e){const e=c.wc(5);c.Dc("ngClass",c.Jc(13,Hv,"full"==e.mode,"compact"==e.mode)),c.Mb(1),c.Dc("mode",e.navigationMode)("current_chapter",e.currentChapter)("next_chapter",e.nextChapter)("prev_chapter",e.prevChapter)("course_status",e.courseStatus)("chapter_viewer",e.chapterViewer)("course",e.course)("chapters",e.chapters)("folders",e.folders)("courseState",e.courseState)("learning_plan_id",e.learningPlanId)("isCourseStarted",e.isCourseStarted)}}const Yv=function(e,t,i){return{"mdl-cell--11-col":e,"mdl-cell--8-col":t,"mdl-cell--12-col":i}};function Wv(e,t){if(1&e){const e=c.lc();c.kc(0,"div",35,36),c.kc(2,"div",37),c.kc(3,"div",38),c.kc(4,"chapter-viewer",39,40),c.sc("rate",function(t){return c.Vc(e),c.wc(4).rateChange(t)})("play",function(t){return c.Vc(e),c.wc(4).startPlaying(t)})("completed",function(t){return c.Vc(e),c.wc(4).chapterCompleted(t)})("loaded",function(t){return c.Vc(e),c.wc(4).chapterLoaded(t)})("closeLightbox",function(){return c.Vc(e),c.wc(4).exitLightboxMode}),c.jc(),c.jc(),c.ed(6,Vv,2,12,"div",41),c.ed(7,Gv,2,1,"div",41),c.jc(),c.ed(8,$v,3,16,"div",42),c.jc()}if(2&e){const e=c.wc(4);c.Mb(2),c.Dc("ngClass",c.Kc(19,Yv,"compact"==e.mode,"full"==e.mode,"flat"==e.mode)),c.Mb(2),c.Dc("docLayoutSkipLinkTarget","")("docLayoutSkipLinkTargetMain",!0)("current_chapter",e.currentChapter)("course_status",e.courseStatus)("course",e.course)("chapter_viewer",e.chapterViewer)("next_chapter",e.nextChapter)("prev_chapter",e.prevChapter)("chapter_must_be_tracked",e.chapterMustBeTracked)("lastPlayedChapter",e.lastPlayedChapter)("chapters",e.chapters)("preserve_lightbox",e.preserveLightbox)("device",e.device)("learning_plan_id",e.learningPlanId)("isCourseStarted",e.isCourseStarted),c.Mb(2),c.Dc("ngIf",e.showNavigationUnderChapterViewer),c.Mb(1),c.Dc("ngIf",(null==e.currentChapter?null:e.currentChapter.type)!=e.ChapterType.QUIZ),c.Mb(1),c.Dc("ngIf","flat"!=e.navigationMode)}}function Qv(e,t){if(1&e&&(c.kc(0,"div",49),c.fc(1,"partner-banner",15),c.jc()),2&e){const e=c.wc(4);c.Mb(1),c.Dc("course",e.course)}}const Kv=function(){return{wrapper:"no-side-padding"}};function Jv(e,t){if(1&e&&c.fc(0,"collection-widgets",50),2&e){const e=c.wc(4);c.bd(c.Hc(3,Kv)),c.Dc("widgetsDataSource",e.courseWidgets)}}function Xv(e,t){if(1&e&&(c.kc(0,"div",18),c.ed(1,zv,6,1,"div",25),c.kc(2,"div",26),c.kc(3,"div",27),c.ed(4,qv,10,6,"div",9),c.ed(5,Wv,9,23,"div",28),c.jc(),c.jc(),c.ed(6,Qv,2,1,"div",29),c.ed(7,Jv,1,4,"collection-widgets",30),c.jc()),2&e){const e=c.wc(3);c.Mb(1),c.Dc("ngIf",e.inSoftDeadline),c.Mb(3),c.Dc("ngIf",e.status==e.playerStatus.EMPTY),c.Mb(1),c.Dc("ngIf",e.status!=e.playerStatus.INITIALIZING&&e.status!=e.playerStatus.EMPTY),c.Mb(1),c.Dc("ngIf",e.course.partner_data&&e.course.partner_data.active&&e.course.partner_data.course_visible),c.Mb(1),c.Dc("ngIf",!e.course.has_overview&&e.courseWidgets&&!e.isLightBoxChapter)}}function Zv(e,t){if(1&e&&(c.kc(0,"div",56),c.kc(1,"div",19),c.fc(2,"div",31),c.kc(3,"div",32),c.fc(4,"em",33),c.gd(5),c.jc(),c.fc(6,"div",31),c.jc(),c.jc()),2&e){const e=c.wc(4);c.Mb(5),c.id("",e.softDeadlineText," ")}}function ey(e,t){if(1&e&&(c.kc(0,"div",57),c.kc(1,"div",56),c.kc(2,"div",19),c.fc(3,"certification-manager",58),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc(4);c.Mb(3),c.Dc("certificationData",e.course.certification)("certificationAward",e.course.certification_award)("resourceId",e.course.id)("enrolledAt",e.course.enrolled.date_enrolled)}}function ty(e,t){if(1&e&&c.fc(0,"tabs",61),2&e){const e=c.wc(5);c.bd(null==e.tabsParams?null:e.tabsParams.style),c.Dc("panels",null==e.tabsParams?null:e.tabsParams.panels)("reInitTabsOnChange",!0)}}function iy(e,t){if(1&e&&(c.kc(0,"div",59),c.ed(1,ty,1,4,"tabs",60),c.jc()),2&e){const e=c.wc(4);c.Mb(1),c.Dc("ngIf",e.tabsParams)}}function sy(e,t){if(1&e&&(c.kc(0,"div"),c.fc(1,"session-overview",62),c.jc()),2&e){const e=c.wc(4);c.Mb(1),c.Dc("course",e.course)("overview",e.overview)("available_sessions",e.overview.available_sessions.length>0?e.overview.available_sessions:e.overview.managed_sessions)}}function ny(e,t){if(1&e){const e=c.lc();c.kc(0,"div",51),c.ed(1,Zv,7,1,"div",52),c.kc(2,"overview-header",53),c.sc("rate",function(t){return c.Vc(e),c.wc(3).rateChange(t)})("play",function(t){return c.Vc(e),c.wc(3).startPlaying(t)})("changeSession",function(t){return c.Vc(e),c.wc(3).changeSession(t)}),c.jc(),c.ed(3,ey,4,4,"div",54),c.ed(4,iy,2,1,"div",55),c.ed(5,sy,2,3,"div",9),c.jc()}if(2&e){const e=c.wc(3);c.Mb(1),c.Dc("ngIf",1==e.inSoftDeadline),c.Mb(1),c.Dc("course",e.course)("course_status",e.courseStatus)("current_session",e.overview.current_session)("enrolled_sessions",e.overview.enrolled_sessions.length>0?e.overview.enrolled_sessions:e.overview.managed_sessions)("mode",e.mode)("current_chapter",e.currentChapter)("next_chapter",e.nextChapter)("prev_chapter",e.prevChapter)("chapters",e.chapters)("courseState",e.courseState)("isCourseStarted",e.isCourseStarted),c.Mb(1),c.Dc("ngIf","classroom"==e.course.type&&e.mcc2IsEnabled),c.Mb(1),c.Dc("ngIf",e.overview.enrolled_sessions&&e.overview.enrolled_sessions.length>0||e.overview.managed_sessions.length>0||"elearning"===e.course.type),c.Mb(1),c.Dc("ngIf",e.overview.enrolled_sessions.length<=0&&e.overview.managed_sessions.length<=0&&"elearning"!==e.course.type)}}function ay(e,t){if(1&e&&(c.kc(0,"div"),c.ed(1,Uv,9,3,"div",16),c.ed(2,Xv,8,5,"div",16),c.ed(3,ny,6,15,"div",17),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngIf",e.courseState==e.courseStates.OVERVIEW&&(null==e.overview?null:e.overview.status)==e.overviewStatuses.NO_SESSION&&(null==e.course?null:e.course.type)!=e.CourseType.ELEARNING),c.Mb(1),c.Dc("ngIf",e.courseState==e.courseStates.PLAYER),c.Mb(1),c.Dc("ngIf",e.courseState==e.courseStates.OVERVIEW&&(null==e.overview?null:e.overview.status)==e.overviewStatuses.READY)}}function oy(e,t){if(1&e&&c.fc(0,"change-session",65,66),2&e){const e=c.wc(3);c.Dc("sessions",e.changeSessionParameters.sessions)("available_enroll",e.changeSessionParameters.available_enroll)("idCourse",e.changeSessionParameters.idCourse)("useLocationTimezone",e.changeSessionParameters.useLocationTimezone)}}function ry(e,t){if(1&e){const e=c.lc();c.kc(0,"doc-shared-dialog-body"),c.kc(1,"doc-shared-dialog-title"),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"doc-shared-dialog-content"),c.ed(5,oy,2,4,"change-session",63),c.jc(),c.jc(),c.kc(6,"doc-shared-dialog-actions"),c.kc(7,"doc-shared-dialog-action",64),c.sc("trigger",function(){return c.Vc(e),c.wc(),c.Sc(5).hide()}),c.xc(8,"t"),c.jc(),c.kc(9,"doc-shared-dialog-action",64),c.sc("trigger",function(){return c.Vc(e),c.wc(2).onChangeSessionConfirm()}),c.xc(10,"t"),c.jc(),c.jc()}if(2&e){c.wc();const e=c.Sc(5),t=c.wc();c.Mb(2),c.id(" ",c.yc(3,4,t.changeSessionTitle)," "),c.Mb(3),c.Dc("ngIf",e.open),c.Mb(2),c.Dc("label",c.yc(8,6,t.cancelLabel)),c.Mb(2),c.Dc("label",c.yc(10,8,t.confirmLabel))}}function cy(e,t){if(1&e){const e=c.lc();c.kc(0,"doc-shared-dialog-body"),c.kc(1,"doc-shared-dialog-title"),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"doc-shared-dialog-content"),c.kc(5,"self-unenroll-dialog",67,68),c.sc("confirmationToggle",function(t){return c.Vc(e),c.Sc(11).disabled=!t}),c.jc(),c.jc(),c.jc(),c.kc(7,"doc-shared-dialog-actions"),c.kc(8,"doc-shared-dialog-action",64),c.sc("trigger",function(){return c.Vc(e),c.wc(),c.Sc(8).hide()}),c.xc(9,"t"),c.jc(),c.kc(10,"doc-shared-dialog-action",69,70),c.sc("trigger",function(){return c.Vc(e),c.wc(2).onSelfUnenrollConfirm()}),c.xc(12,"t"),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Mb(2),c.id(" ",c.yc(3,8,e.selfUnenrollTitle)," "),c.Mb(3),c.Dc("course",e.selfUnenrollParameters.course)("form_control",null==e.selfUnenrollParameters.selfUnenrollForm?null:e.selfUnenrollParameters.selfUnenrollForm.controls.enrollment_type)("current_session",e.selfUnenrollParameters.currentSession)("showCheckbox",!0),c.Mb(3),c.Dc("label",c.yc(9,10,e.cancelLabel)),c.Mb(2),c.Dc("type","positive")("label",c.yc(12,12,e.confirmLabel))}}const ly=function(e,t){return{initializing:e,"with-lp":t}};function dy(e,t){if(1&e&&(c.kc(0,"div",7),c.ed(1,Nv,2,1,"div",8),c.ed(2,ay,4,3,"div",9),c.kc(3,"div",10),c.kc(4,"doc-shared-dialog",null,11),c.ed(6,ry,11,10,"ng-template"),c.jc(),c.kc(7,"doc-shared-dialog",12,13),c.ed(9,cy,13,14,"ng-template"),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Dc("ngClass",c.Jc(4,ly,e.courseState==e.courseStates.INITIALIZING&&e.courseState!=e.courseStates.PLAYER,e.showSlideUpPanel)),c.Mb(1),c.Dc("ngIf",1==e.waitingList),c.Mb(1),c.Dc("ngIf",!e.waitingList),c.Mb(5),c.Dc("size","sm")}}function uy(e,t){if(1&e&&c.fc(0,"slideup-panel",71),2&e){const e=c.wc();c.Dc("learningPlanID",e.slideUpPanelConfig.learningPlanID)("learningPlanCourses",e.slideUpPanelConfig.learningPlanCourses)("learningPlanTitle",e.slideUpPanelConfig.learningPlanTitle)("learningPlanCompletePercent",e.slideUpPanelConfig.learningPlanCompletePercent)}}function hy(e,t){if(1&e&&c.fc(0,"dialog-component",72,73),2&e){const e=c.wc();c.Dc("id",e.additionalFieldsDialogParams.id)("width",e.additionalFieldsDialogParams.width)("height",e.additionalFieldsDialogParams.height)("title",e.additionalFieldsDialogParams.title)("content",e.additionalFieldsDialogParams.content)("type",e.additionalFieldsDialogParams.type)("actions",e.additionalFieldsDialogParams.actions)("confirmation_check_text",e.additionalFieldsDialogParams.confirmation_check_text)("show_confirmation_check",e.additionalFieldsDialogParams.show_confirmation_check)}}let py,gy,my,by=(()=>{class e extends vc.a{constructor(e,t,i,s,n,a,r,c,l,d,h,p,g,m,b,f,_,v,y,w,C,S){super(),this.store=e,this.learningPlanActions=t,this.overviewActions=i,this.router=s,this.route=n,this.pageService=a,this.backendService=r,this.changeDetector=c,this.loader=l,this.fb=d,this.unenrollmentButtonService=h,this.deeplinkService=p,this.browserDetection=g,this.formatter=m,this.userInteractionService=b,this.dispatcher=f,this.coursePlayerCalendarService=_,this.docLayoutService=v,this.toggleService=y,this.embeddedService=w,this.storeActions$=C,this.lrnCachedCourseService=S,this.changeSessionParameters={sessions:[],available_enroll:[],idCourse:-1,useLocationTimezone:!0},this.changeSessionTitle=M.a.t("standard","Change Session"),this.selfUnenrollParameters={},this.selfUnenrollTitle=M.a.t("course","Unenrollment"),this.cancelLabel=M.a.t("standard","Cancel"),this.confirmLabel=M.a.t("standard","Confirm"),this.sessionInstance=o.a.getInstance(),this.playerStatus=ne.b,this.courseStates=ne.c,this.overviewStatuses=ne.n,this.CourseType=ne.e,this.ChapterType=ne.a,this.iframeStatus$=new je.a({isInit:!1,url:"",name:""}),this.idCourse=null,this.showIframe=!1,this.iframeUrl="",this.chapterMustBeTracked=!0,this.videoCompleted=!1,this.curriculaRedirectToLearningPlan=!1,this.listenToRouteParamsChanges=!0,this.breadcrumbs=[],this.waitingList=!1,this.mode=ne.o.FULL,this.modeNextState={full:ne.o.COMPACT,compact:ne.o.FLAT,flat:ne.o.FULL},this.modeNextStateWithFolders={full:ne.o.FLAT,flat:ne.o.FULL},this.questionWidget={active:!1,type:"questions"},this.hasLearningPlan=!1,this.disposableSubscriptions=[],this.preserveLightbox=null,this.device=null,this.sessionDialogParams={width:500,height:240},this.inSoftDeadline=!1,this.autoPlayForcefullyDisabled=!1,this.isSuperAdmin=o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN),this.showSlideUpPanel=!1,this.slideUpPanelConfig={learningPlanCourses:[],learningPlanID:0,learningPlanCompletePercent:0,learningPlanTitle:""},this._additionalFieldsDialogParams=new je.a(null),this.fabCoursePlayerCalendar="CoursePlayerCalendarBalloon",this.fabCoursePlayerDeeplink="CoursePlayerDeeplinkBalloon",this.listenForSessionIDChanges=!0,this.eSignatureSettings=E.b.getInstance().getPluginSettings("EsignatureApp"),this.isAuthenticatorAppEnabled=this.eSignatureSettings&&!!this.eSignatureSettings.auth_types.filter(e=>"authenticatorapp"===e.type&&e.enabled).length,this.isEmailAuthenticationEnabled=this.eSignatureSettings&&!!this.eSignatureSettings.auth_types.filter(e=>"email"===e.type&&e.enabled).length,this.isAuthenticatorAppConfigured=!!this.sessionInstance.authenticatorapp_pair_date,this.isEmailConfigured=!!this.sessionInstance.email,this.isCourseStarted=!1,this.mcc2IsEnabled=this.toggleService.isOn(u.f.MULTIPLE_ENROLLMENT_COMPLETIONS_PHASE_2)&&this.toggleService.isOn(u.f.TOGGLE_VILT)&&this.toggleService.isOn(u.f.TOGGLE_MULTIPLE_ENROLLMENT_COMPLETIONS),this.showEnrollmentFieldsDialog=e=>{e.valid?this.loadCourse(String(this.currentCourseId)):this._additionalFieldsDialogParams.next(new Wb.a(e.fields,e=>{if(!e.dynamicComponents.enrollForm.valid)return void this.docLayoutService.toast.showToast({message:M.a.t("standard","Please fill in the required fields correctly to proceed"),type:"error"});const t={enrollment_fields:e.dynamicComponents.enrollForm.value.enrollment_fields};this.backendService.request(`/learn/v1/enrollments/${this.course.id}/${o.a.getInstance().id}`,"PUT",t).pipe(Object(se.a)(1)).subscribe(e=>{this.loadCourse(this.course.id),this.startPlaying()},t=>{console.error(t),e.close()},()=>{e.close()})},e=>{this.docLayoutService.toast.showToast({message:"Cannot access course if enrollment fields are incomplete",type:"error"}),e.close(),this.router.navigate(["/learn","mycourses"],fi.b)}))},this.enrollmentFields={fields:[],valid:!1}}get additionalFieldsDialogParams(){return this._additionalFieldsDialogParams.getValue()}ngOnInit(){this.store.dispatch(Ts.a.destroy()),this.isOEM=this.embeddedService.isEmbedded(),this.routeMode=this.route.snapshot.data.mode,this.checkUrlFragment(),this.courseChangeSubscription=this.getCourseId().subscribe(e=>{this.checkPlayerMode(),ne.i.folders=[];const t=this.validateDeeplink().subscribe(()=>{const t=()=>{this.userInteractionService.track(fc.a.COURSE_OPEN,fc.b.COURSE_PLAYER,{courseId:e}),!this.course.on_sale||this.course.enrolled.enrollment_fields_completed||"classroom"===this.course.type&&this.toggleService.isOn(u.f.TOGGLE_VILT)&&o.a.getInstance().isInstructor()?this.loadCourse(this.course.id):this.loadEnrollmentAdditionalFields(Number(this.course.id)).subscribe(this.showEnrollmentFieldsDialog)};let{cachedCourse:i,cachedCourseResponse:s}=this.lrnCachedCourseService;void 0!==i&&i.id&&e==Number.parseInt(i.id.toString())&&null!=this.route.snapshot.paramMap.get("id_session")?(this.course=i,Object.keys(this.course).forEach(e=>{null==s.data[e]&&(s.data[e]=this.course[e])}),t(),this.store.dispatch(Ts.a.loadCourseInfoSuccess(s)),setTimeout(()=>{this.lrnCachedCourseService.cachedCourse=void 0,this.lrnCachedCourseService.cachedCourseResponse=void 0},2e3)):(this.subscriptionForLoadCourseInfo=this.loadCourseInfo().subscribe(()=>{t()}),this.disposableSubscriptions.push(this.subscriptionForLoadCourseInfo))});this.disposableSubscriptions.push(t),this.courseWidgets=new ks(this.backendService,{user_id:o.a.getInstance().id,course_id:e})}),this.device=this.browserDetection.getDevice(),this.clearUpBreadcrumbItems(),this.iframeStatus$.pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{e.isInit&&(this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([...this.breadcrumbs,{label:e.name,href:this.router.url}]),this.docLayoutService.actionButtons.clearActionButtons()),this.showIframe=e.isInit,this.iframeUrl=e.url,this.changeDetector.markForCheck(),this.changeDetector.detectChanges()}),this._additionalFieldsDialogParams.subscribe(e=>{e&&setTimeout(()=>this.additionalFieldsDialog.open())}),this.storeActions$.pipe(Object(y.h)(Ts.b.VIDEO_COMPLETED),Object(vt.a)(this.ngUnsubscribe)).subscribe(()=>{this.videoCompleted=!0,this.redirectToLpPage&&this.redirectToLPPage()})}get showNavigationUnderChapterViewer(){return this.mode===ne.o.FLAT||window.matchMedia("(max-width: 839px)").matches}get navigationMode(){return this.mode!==ne.o.FLAT&&window.matchMedia("(max-width: 839px)").matches?ne.o.FULL:this.mode}get isLightBoxChapter(){return this.chapterViewer&&this.chapterViewer.status&&this.chapterViewer.status===ne.g.PLAYING&&this.chapterViewer.launch_params&&this.chapterViewer.launch_params.mode===_i.d.LIGHTBOX}get shouldConfigureAuthenticatorApp(){return!(!this.isAuthenticatorAppEnabled||this.isAuthenticatorAppConfigured||this.isEmailAuthenticationEnabled&&(!this.isEmailAuthenticationEnabled||this.isEmailConfigured))}get shouldConfigureEmailAuthentication(){return!(this.isAuthenticatorAppEnabled||!this.isEmailAuthenticationEnabled||this.isEmailConfigured)}get shouldConfigure2fa(){return this.shouldConfigureAuthenticatorApp||this.shouldConfigureEmailAuthentication}configure2faDialogParams(e){const t={actions:[{id:"cancel",type:"neutral",label:M.a.t("course","Leave course"),slot:"end"}]};switch(e){case"authenticatorapp":t.title=M.a.t("mobile","Configure your Authenticator App"),t.content=M.a.t("mobile","You cannot access Electronic Signature courses because your profile is not associated with the Authenticator App, Go to your \u201cMy Profile\u201d page to configure the association"),t.actions.push({id:"configure-auth-app",type:"positive",label:M.a.t("esignature","CONFIGURE AUTHENTICATOR APP"),slot:"end"});break;case"email":t.title=M.a.t("mobile","Associate an email address with your profile"),t.content=M.a.t("mobile","You cannot access Electronic Signature courses because your profile is not associated with an email address, Go to your \u201cMy Profile\u201d page to configure the association"),t.actions.push({id:"associate-email",type:"positive",label:M.a.t("esignature","ASSOCIATE YOUR EMAIL"),slot:"end"})}return t}checkPlayerMode(){this.idCourse!==my?(my=this.idCourse,py=ne.o.FULL):py&&py!==ne.o.FULL&&(this.mode=py)}checkUrlFragment(){this.route.params.subscribe(e=>{this.currentCourseId=+e.id;const t=e.lp;t&&(this.hasLearningPlan=!0,this.learningPlanId=t,this.store.dispatch(this.learningPlanActions.loadLearningPlanInfo(t)))})}getCourseId(){return new a.a(e=>{this.route.params.subscribe(t=>{if(void 0===t.id)return console.error("Called without course ID in route"),void e.error();const i=Number(t.id);this.idCourse!==i&&(this.hasLearningPlan&&this.hideLearningPlanPanel(),this.idCourse=i,e.next(i))})})}validateDeeplink(){return new a.a(e=>{let t=this.route.queryParams.subscribe(t=>{let i=void 0!==t.hash?t.hash:null,s=void 0!==t.generated_by?t.generated_by:null;if(i&&s&&null!==i&&null!=s){console.log("Detected deeplink related param changes in URL. Validating deeplink");let t=this.backendService.request("/learn/v1/courses/"+this.idCourse+"/deeplink","POST",{hash:i,generated_by:s}).subscribe(i=>{t&&t.unsubscribe(),console.log("Deeplink valid"),i.data.message&&""!=i.data.message&&this.docLayoutService.toast.showToast({message:i.data.message,type:i.data.success?"success":"error"}),i.data.success&&i.data.redirectUrl.indexOf("learn/course")>-1?(console.log("Validated a deeplink. Allowing access to the course"),e.next(!0)):(this.router.navigate([i.data.redirectUrl],fi.b),console.error("Deeplink not valid. Rejecting access"),e.error("Deeplink not valid. Rejecting access"))})}else e.next(!0)});this.disposableSubscriptions.push(t)})}courseCompletionObservable(){return this.store.select(ae.d).pipe(Object(Jt.a)(e=>!!e.course_status),yi(e=>e.course_status.status===ne.d.COMPLETED),yi(e=>e.course_status.status!==ne.d.COMPLETED),Object(se.a)(1),Object(di.a)(()=>{}))}attachCourseStoreSubscriber(e=!1,t){let i=null;return i=this.store.select(ae.d).subscribe(s=>{if(this.currentCourse=s,s.id&&parseInt(s.id,10)!=this.idCourse)console.log("Received cached information from the store. Ignoring...");else if(this.courseState=s.state,s.state==ne.c.PLAYER||s.state==ne.c.OVERVIEW||s.state==ne.c.READY){this.course=s,this.lrnCachedCourseService.cachedCourse=s;const n=o.a.getInstance();let a,r,c,l;this.course.has_esignature_enabled&&n.is_impersonated&&e&&this.showImpersonateBlockDialog(),this.course.has_esignature_enabled&&this.course.course_status.status!==ne.d.COMPLETED&&this.course.esignature_status!==ne.h.SIGNED&&this.shouldConfigure2fa&&!n.is_impersonated&&0===this.docLayoutService.getDocLayoutConfig().page.commonDialogs.length&&this.docLayoutService.dialog.showCommonDialog(this.configure2faDialogParams(this.shouldConfigureAuthenticatorApp?"authenticatorapp":"email")).subscribe(e=>{switch(e.actionSuccess.next(!0),e.actionID){case"configure-auth-app":this.router.navigate(["/learn/my-profile",{authenticatorApp:!0}]);break;case"associate-email":this.router.navigate(["/learn/my-profile",{user_details:!0}]);break;case"cancel":this.router.navigate(["/learn/mycourses"])}}),this.setHierarchicalBreadcrumbs(),this.courseStatus=s.course_status;let d=0,h=0;if(this.course.sessions){const e=this.formatter.currentUtcDateTime().toString();a=this.course.sessions.filter(e=>!0===e.enrolled.is_enrolled&&!0===e.enrolled.waiting_list).length,r=this.course.sessions.filter(e=>!0===e.enrolled.is_enrolled).length,h=this.course.sessions.filter(t=>2!==this.formatter.compareDates(t.end_date,e)).length,d=this.course.sessions.length}if(c=this.toggleService.isOn(u.f.TOGGLE_VILT)&&this.course.type===Tc.a.CLASSROOM?d>0&&this.courseStatus&&["waiting","subscription_to_confirm"].includes(this.courseStatus.status):(d>0||"elearning"===this.course.type)&&this.course.enrolled.waiting_list&&this.course.enrolled.is_enrolled,l=a===r&&r>0,this.waitingList=c||l,this.mode=gy||(s.show_toc||s.state===ne.c.OVERVIEW?ne.o.FULL:ne.o.FLAT),this.chapters=s.chapters,this.folders=s.folders,this._breadcrumbsActionButtons(this.courseState),this.course.can_enter||this.waitingList||this.router.navigate(["unauthorized"],fi.b),this.courseStatus){o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN)||o.a.getInstance().isCurrentUserA(o.a.LEVEL_POWERUSER)?o.a.getInstance().isCurrentUserA(o.a.LEVEL_POWERUSER)&&this.courseStatus.permissions&&this.courseStatus.permissions.indexOf("course/manage")<0&&this.router.navigate(["unauthorized"],fi.b):(this.courseStatus.status&&"non_subscribed"===this.courseStatus.status&&this.router.navigate(["unauthorized"],fi.b),this.courseStatus.status&&"waiting"==this.courseStatus.status&&(this.waitingList=!0));let e=0;for(let t=0;t<this.chapters.length;t++)-1!==["completed","passed"].indexOf(this.chapters[t].status)&&e++;this.courseStatus.competed_lessons=e}s.payload&&!rt.a.isEqual(s.payload,this.currentPayload)&&(this.currentPayload=s.payload,this.store.dispatch(Ts.b.loadCourseInfoSuccess(s.payload,s.isReloading,s.reloadSource))),t&&!t.closed&&t.next(!0),e&&i&&i.unsubscribe(),this.switchBreadcrumbs(this.courseState),this.checkCourseStarted()}else s.state===ne.c.UNAUTHORIZED&&(console.log("Not authorized to see this course"),this.router.navigate(["unauthorized"],fi.b))}),i}loadCourseInfo(){return new a.a(e=>{this.disposableSubscriptions.push(this.attachCourseStoreSubscriber(!0,e)),this.store.dispatch(Ts.a.loadCourseInfo(this.idCourse))})}switchToOverviewModeIfNeeded(){return new a.a(e=>{var t,i;let s=!1,n=!1;if(this.route.params.forEach(e=>{e.id_lo&&(s=!0),e.id_session&&(n=e.id_session)}),this.course.hasOwnProperty("has_overview")&&this.course.has_overview&&!s&&"player"!=this.routeMode){let s=!1;const a=this.tabsParams.panels.length<=1,r=this.course.hasOwnProperty("has_esignature_enabled")&&!!this.course.has_esignature_enabled,c=this.course.chapters.length>0;if(a)if(r){const e=this.course.type===Tc.a.CLASSROOM||this.course.type===Tc.a.WEBINAR;s=c&&this.course.type===Tc.a.ELEARNING||e}else s=c;if(s){this.checkCourseStarted();let e=M.a.t("course","Content");r&&(e=this.course.chapters.filter(e=>e.type!==yb.c.sign).length>0?M.a.t("course","Content & Authentication"):M.a.t("standard","Authentication")),this.tabsParams.panels.push({title:e,content:{params:{chapter:this.course.tree,course:this.course,current_chapter:this.currentChapter,learning_plan_id:this.learningPlanId,isCourseStarted:this.isCourseStarted},component:Yb}})}E.b.getInstance().isPluginActive("Share7020App")&&this.course.chapters.length>0&&this.questionWidget.active&&this.tabsParams.panels.push({title:M.a.t("standard","Questions & Answers"),content:{params:{overview:!0,widget:this.widget},component:"questions"===this.questionWidget.type?Zi.a:vb.a}});let l=this.store.select(ae.m).subscribe(t=>{t.status===ne.n.READY&&(console.log("Switched to overview mode"),e.next(!0),e.complete(),l&&(l.unsubscribe(),l=null))});if(this.disposableSubscriptions.push(l),"elearning"!=this.course.type){const e=null===(t=this.course.sessions)||void 0===t?void 0:t.some(e=>e.enrolled.can_enroll_session||e.enrolled.is_enrolled);if("webinar"!==this.course.type&&!1===n&&e){this.store.dispatch(this.overviewActions.loadOverviewInfo(this.course.id,n));let e=o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN),t=o.a.getInstance().isCurrentUserA(o.a.LEVEL_POWERUSER),s=[];const a=null===(i=this.course.sessions)||void 0===i?void 0:i.map(i=>(s.push(...i.locations),Object.assign(Object.assign({},i),{id:i.id_session,is_enrolled:i.enrolled.is_enrolled,can_manage:e||t&&this.courseStatus.permissions&&(this.courseStatus.permissions.includes(u.e.ILT_SESSION_VIEW)||this.courseStatus.permissions.includes("webinar-sessions/view")),current_location:1===i.locations.length?i.locations[0].id_location:"-1",dates:i.dates.map(e=>Object.assign(Object.assign({},e),{day:e.date,time_begin:e.start_hour,time_end:e.end_hour}))})));this.store.dispatch(this.overviewActions.loadOvervewInfoSuccess({courseId:this.course.id,sessionId:!1,data:{sessions:a,skippedSessions:[],locations:s,classrooms:[]}}))}else this.store.dispatch(this.overviewActions.loadOverviewInfo(this.course.id,n))}else this.store.dispatch(this.overviewActions.loadOvervewInfoSuccess({}))}else e.next(!0),e.complete(),"player"===this.routeMode&&this.store.dispatch(Ts.a.switchMode(this.courseStates.OVERVIEW))})}handleSessionSelect(){this.route.params.subscribe(e=>{if(this.listenForSessionIDChanges){let t=e.id_session;const i=this.overview.available_sessions;if(!t&&i){const e=this.firstEnrolledSession(i);e[0]&&(t=e[0])}if(!t)return this.listenForSessionIDChanges=!1,!1;this.course.state===ne.c.OVERVIEW&&i&&this.store.dispatch(this.overviewActions.changeSession(t))}})}firstEnrolledSession(e){const t=[];return e.forEach(e=>{e.is_enrolled&&t.push(e.id)}),t}handleChapterPlay(){return new a.a(e=>{let t;const i=this.route.queryParams.subscribe(e=>{e&&void 0!==e.autoplay&&(this.autoPlayForcefullyDisabled=0===Number(e.autoplay))});this.route.params.pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(i=>{if(this.listenToRouteParamsChanges){let s=i.id_lo;if(i.type===ne.a.SIGN.toString()&&(this.currentChapter=this.chapters[this.chapters.length-1],this.chapters.length&&this.currentChapter&&this.currentChapter.id&&(this.store.dispatch(Ts.b.startPlayingSuccess(this.currentChapter.id,{chapters:this.chapters})),this.store.dispatch(Ts.b.setCurrentChapter({id:this.currentChapter.id,chapters:this.chapters})))),this.autoPlayForcefullyDisabled=0===Number(i.autoplay),s=this.checkForLandingFromGlobalSearchOnSCORM(s),!s&&!this.autoPlayForcefullyDisabled){if(this.course.id.toString()===this.idCourse.toString()&&this.course.has_autoplay&&this.course.state===ne.c.PLAYER){let t=null;if(this.course.chapters.forEach(e=>{null==t&&-1===["completed","passed"].indexOf(e.status)&&(t=e)}),null!==t){const i="/learn/course/"+this.idCourse+"/play/"+t.id+"/"+t.slug_name;return e.next(!0),void this.router.navigate(this.learningPlanId?[i,{lp:this.learningPlanId}]:[i],fi.b)}}e.next(!0),this.listenToRouteParamsChanges=!1}const n=s&&!t;(s!==t||n)&&(t=s,this.coursePlayerContainer&&this.coursePlayerContainer.nativeElement.querySelector(".chapter-viewer__wrapper")&&this.chapterLoaded(),this.startPlayingObserver(s).subscribe(()=>{e.next(!0),e.complete()}))}}),i&&i.unsubscribe()})}checkForLandingFromGlobalSearchOnSCORM(e){const t=e+":";for(let i=0;i<this.course.chapters.length;i++){const s=this.course.chapters[i],n=s.id.toString(),a="completed"!==s.status&&"passed"!==s.status&&"failed"!==s.status&&"attempted"!==s.status,o=!!n.match(`^${t}`);if(s.id==e)return s.id;if(null!=e&&a&&o)return this.router.navigate(["/learn/course/"+this.idCourse+"/play/"+s.id+"/"+s.slug_name],fi.b),s.id;if(o)return s.id;if(this.course.chapters.length-1===i)return e}}setHierarchicalBreadcrumbs(){const e=this.course?{label:this.course.name,href:this.router.url}:null,t=this.hasLearningPlan&&this.learningPlanModel&&this.learningPlanModel.name?{label:this.learningPlanModel.name,href:`/learn/lp/${this.learningPlanId}/${this.learningPlanModel.slug_name}`}:null,i={label:Ii.a.myCoursesAndLearningPlans,href:"/learn/mycourses"},s=[];if(i&&s.push(i),t&&s.push(t),"classroom"==this.course.type&&this.toggleService.isOn(u.f.TOGGLE_VILT)&&this.route.snapshot.data.mode==ne.c.PLAYER){let e={label:this.course.name,href:`/learn/course/${this.course.id}`};null!=this.learningPlanId&&(e.href=`/learn/course/${this.course.id}/${this.course.name}`,e.routeParameters={lp:this.learningPlanId});const t=[e,{label:M.a.t("standard","Lessons"),href:this.router.url}];s.push(...t)}else e&&s.push(e);this.breadcrumbs=s,this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs(s)}redirectToLPPage(){this.router.navigate(["learn/lp/"+this.learningPlanId+"/"+this.learningPlanModel.slug_name],fi.b)}attachGenericReduxListeners(){let e;this.tabsParams={panels:[{title:M.a.t("app7020","Overview"),content:"Loading ..."}]};const t=this.store.select(ae.k).subscribe(t=>{var i,s;this.learningPlanModel=t,e!==t.state&&(e=t.state,e===ne.m.VIEWING&&this.courseState!==ne.c.INITIALIZING&&(this.hasLearningPlan&&this.learningPlanModel.courses&&this.learningPlanModel.courses.length>0&&!this.showSlideUpPanel&&(this.loadLearningPlanPanel(this.learningPlanModel),this.curriculaRedirectToLearningPlan=this.learningPlanModel.curricula_redirect_to_learning_plan),(null===(i=this.learningPlanModel)||void 0===i?void 0:i.complete_percent)&&(this.slideUpPanelConfig.learningPlanCompletePercent=null===(s=this.learningPlanModel)||void 0===s?void 0:s.complete_percent),this.switchBreadcrumbs(this.courseState)),this.setHierarchicalBreadcrumbs())}),i=this.store.select(ae.m).subscribe(e=>{e.status==ne.n.REQUEST_REJECTED&&(console.log("Overview mode rejected"),this.router.navigate(["unauthorized"],fi.b)),this.overview=e,this.overview.current_session&&(this.unenrollmentButtonService.setCurrentSession(this.overview.current_session),this.selfUnenrollParameters.currentSession=this.overview.current_session,this.shouldAddSelfUnenrollButton()?this.unenrollmentButtonService.addSelfUnenrollmentButton():this.unenrollmentButtonService.removeSelfUnenrollmentButton()),e.status==ne.n.READY&&(this.tabsParams.panels[0].content={params:{course:this.course,overview:this.overview,current_session:this.overview.current_session,available_sessions:this.overview.available_sessions,enrolled_sessions:this.overview.enrolled_sessions,courseWidgets:this.courseWidgets,iframeStatus$:this.iframeStatus$},component:mc}),this.changeCourseDetails(e)}),s=this.courseCompletionObservable().subscribe(()=>{this.userInteractionService.track(fc.a.COURSE_COMPLETE,fc.b.COURSE_PLAYER,{courseId:this.idCourse})}),n=this.store.pipe(Object(w.q)(ae.e),Object(Si.a)(this.store.select(ae.k))).subscribe(([e,t])=>{var i,s,n;e&&(this.redirectToLpPage=this.hasLearningPlan&&this.learningPlanId&&t.curricula_redirect_to_learning_plan&&"completed"===e.status&&e.status_changed,this.redirectToLpPage&&"youtube"!==(null===(i=this.currentChapter)||void 0===i?void 0:i.type)&&"video"!==(null===(s=this.currentChapter)||void 0===s?void 0:s.type)?setTimeout(()=>{this.redirectToLPPage()},2e3):this.redirectToLpPage&&"video"===(null===(n=this.currentChapter)||void 0===n?void 0:n.type)&&this.videoCompleted&&this.redirectToLPPage())});this.store.pipe(Object(w.q)(ae.b),Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{this.chapters=e,this.checkNextPrevButtons(),this.changeDetector.markForCheck()}),this.disposableSubscriptions.push(s),this.disposableSubscriptions.push(i),this.disposableSubscriptions.push(this.attachCourseStoreSubscriber(!1,null)),this.disposableSubscriptions.push(t),this.disposableSubscriptions.push(n)}attachCoursePlayerSubscription(){const e=this.store.select(ae.c).subscribe(e=>{null!=e.status&&(rt.a.isEmpty(e.current_chapter)||void 0===e.current_chapter||(rt.a.isEmpty(this.currentChapter)||this.currentChapter.id===e.current_chapter.id||(clearInterval(this.chapterNavigationAvailabilityInterval),this.chapterNavigationAvailabilityInterval=null),this.currentChapter=e.current_chapter,e.hasOwnProperty("preserve_lightbox")&&(console.log("Chapter preserving lightbox: ",e.preserve_lightbox),this.preserveLightbox=e.preserve_lightbox),this.store.dispatch(Ts.b.loadCourseChapters(this.currentCourseId)),"authoring"===this.currentChapter.type&&(this.preserveLightbox=!0)),e.last_played_chapter&&!rt.a.isEqual(this.lastPlayedChapter,e.last_played_chapter)&&(this.lastPlayedChapter=e.last_played_chapter),e.status==ne.b.UNAUTHORIZED&&(console.error("Not authorized to play chapter "),this.router.navigate(["unauthorized"],fi.b)),this.status=e.status,this.chapterViewer=e.chapter_viewer,this.navigatingBack=e.navigating_back,this.checkNextPrevButtons(),e.status==ne.b.PLAY_REJECTED&&1004!=this.chapterViewer.launch_params.code&&(this.docLayoutService.toast.showToast({message:M.a.t("standard","Something went wrong. Please, try again later!"),type:"error"}),this.router.navigate(["unauthorized"],fi.b)))});this.disposableSubscriptions.push(e)}checkNextPrevButtons(){if(this.nextChapter={},this.prevChapter={},!rt.a.isEmpty(this.currentChapter))for(let e=0;e<this.chapters.length;e++)if(this.chapters[e].id==this.currentChapter.id){this.prevChapter=rt.a.isEmpty(this.chapters[e-1])?{}:this.chapters[e-1],this.nextChapter=rt.a.isEmpty(this.chapters[e+1])?{}:this.chapters[e+1],this.navigatingBack&&this.preserveLightbox&&this.nextChapter.hasOwnProperty("locked")&&delete this.nextChapter.locked;break}}changeSession(e){void 0!==e&&this.store.dispatch(this.overviewActions.changeSession(e))}switchBreadcrumbs(e){let t=null,i=()=>{this.store.dispatch(Ts.a.switchMode(e)),this.router.navigate(["learn/course/"+this.course.id+"/"+this.course.slug_name])},s="course_"+this.course.id;if(!this.course.has_overview)return t=M.a.t("standard","Back to My Courses"),i=()=>{this.router.navigate(["learn/mycourses"])},s="my_courses",this.hasLearningPlan&&this.learningPlanModel.name.length>0&&(t=M.a.t("standard","Back to {name}",{name:this.learningPlanModel.name}),i=()=>{this.router.navigate(["learn/lp/"+this.learningPlanId+"/"+this.learningPlanModel.slug_name])},s="lp_"+this.learningPlanId),!1;e===ne.c.PLAYER?(t=M.a.t("standard","Back to course overview"),s="overview_"+this.course.id):e===ne.c.OVERVIEW&&(this.hasLearningPlan&&this.learningPlanModel.name.length>0?(t=M.a.t("standard","Back to {name}",{name:this.learningPlanModel.name}),i=()=>{this.router.navigate(["learn/lp/"+this.learningPlanId+"/"+this.learningPlanModel.slug_name])},s="lp_"+this.learningPlanId):(t=M.a.t("standard","Back to My Courses"),i=()=>{this.router.navigate(["learn/mycourses"])},s="my_courses"))}rateChange(e){this.store.dispatch(Ts.a.rateCourse(this.course.id,e))}loadEnrollmentAdditionalFields(e){const t=o.a.getInstance().id,i=this.backendService.request("/manage/v1/enrollment_fields","GET",{course_id:e,visible_to_user:!0}).pipe(Object(di.a)(e=>e.data.items)),s=this.backendService.request(`/learn/v1/enrollments/${e}/${t}`,"GET").pipe(Object(di.a)(e=>e.data.records.enrollment_fields));return Object(Ai.a)(i,s).pipe(Object(ki.a)(([e,t])=>{const i=e.filter(e=>"1"===e.mandatory),s=0===i.map(e=>t.hasOwnProperty(e.id)&&""!==t[e.id]).filter(e=>!e).length;return Object(Ei.a)({fields:e,valid:!(0===t.length&&i.length>0||!s)})}),Object(Ti.a)(e=>{this.enrollmentFields=e}))}startPlaying(e){if(!this.currentChapter||rt.a.isEmpty(this.currentChapter)){let e=rt.a.head(this.chapters);e&&(this.learningPlanId?this.router.navigate(["/learn/course/"+this.idCourse+"/play/"+e.id+"/"+e.slug_name,{lp:this.learningPlanId}],fi.b):(!this.toggleService.isOn(u.f.TOGGLE_VILT)&&"classroom"!==this.course.type||this.toggleService.isOn(u.f.TOGGLE_VILT))&&this.router.navigate(["/learn/course/"+this.idCourse+"/play/"+e.id+"/"+e.slug_name],fi.b))}else{let t=this.startPlayingObserver(e).subscribe();this.disposableSubscriptions.push(t)}}startPlayingObserver(e){return new a.a(t=>{this.subscriptionCurrentPlayingChapter&&this.subscriptionCurrentPlayingChapter.unsubscribe(),this.subscriptionCurrentPlayingChapter=this.store.select(ae.c).subscribe(i=>{!rt.a.isEmpty(e)&&i.current_chapter&&String(i.current_chapter.id)!==e||(i.status!=ne.b.REQUEST_FOR_PLAY&&i.status!=ne.b.READY||(this.currentChapter=i.current_chapter),i.current_chapter&&(i.status===ne.b.READY||i.status===ne.b.PLAYING)&&(console.log("Chapter information for chapter "+i.current_chapter.id+" loaded from API"),this.checkPlayerMode(),Object(xi.i)(this.courseNavigationChildren).then(e=>{void 0!==this.courseNavigation&&this.updateScroll()}),t.next(!0)),e||(e=i.current_chapter&&i.current_chapter.hasOwnProperty("id")?i.current_chapter.id:rt.a.head(this.course.chapters).id))}),this.courseState==ne.c.OVERVIEW&&(console.log("Switching to Player mode"),this.store.dispatch(Ts.a.switchMode(ne.c.OVERVIEW)));let i=this.currentChapter&&String(e)===String(this.currentChapter.id);if(this.course.hasOwnProperty("isReloading")&&!0===this.course.isReloading&&this.chapterViewer&&this.chapterViewer.status!==ne.g.ACTIVITY_COMPLETED&&this.chapterViewer.status!==ne.g.COURSE_COMPLETED&&i)this.course.isReloading=!1,this.store.dispatch(Ts.b.startPlayingSuccess(e,this.chapters));else{const t={};this.hasLearningPlan&&this.learningPlanId&&(t.learning_plan_id=this.learningPlanId),this.device&&(t.device=this.device),this.store.dispatch(Ts.b.startPlaying({id:e,params:t,chapters:this.chapters,preserve_lightbox:!1,course_id:this.course.id}))}this.docLayoutService.actionButtons.clearActionButtons(),this._breadcrumbsActionButtons(this.courseState),this.switchBreadcrumbs(this.courseState)})}chapterCompleted(e){this.store.dispatch(Ts.a.reloadCoursePlayer(this.course.id,e)),this.learningPlanId&&this.store.dispatch(this.learningPlanActions.loadLearningPlanInfo(this.learningPlanId))}chapterLoaded(e){this.coursePlayerContainer&&this.coursePlayerContainer.nativeElement.querySelector(".chapter-viewer__wrapper")&&(this.coursePlayerContainer.nativeElement.querySelector(".chapter-viewer__wrapper").style.minHeight=e&&e.height?e.height:"",this.courseNavigation&&this.updateScroll())}updateScroll(){this.courseNavigation.calculateElementHeight(),this.courseNavigation.updateScroll()}shouldAddSelfUnenrollButton(){let e=!1;return(this.course.can_self_unenroll&&0===this.course.learningplans.length||this.overview&&this.overview.current_session&&this.overview.current_session.is_enrolled&&this.course.can_session_self_unenroll)&&(e=!0),e}loadCourse(e){this.backendService.request(`/learn/v1/courses/${e}/widgets`,"GET").pipe(Object(di.a)(e=>e.data)).subscribe(e=>{for(let t=0;t<e.widgets.length;t++){const i=e.widgets[t];"questions"!==i.content_type&&"questions-new"!==i.content_type||(E.b.getInstance().isPluginActive("Share7020App")&&this.course.chapters.length>0&&this.tabsParams.panels.push({title:M.a.t("standard","Questions & Answers"),content:{params:{overview:!0,widget:i},component:"questions"===i.content_type?Zi.a:vb.a}}),this.questionWidget.active=!0,this.questionWidget.type=i.content_type,this.widget=i)}}),this.courseWidgets=new ks(this.backendService,{user_id:o.a.getInstance().id,course_id:e}),this.unsubScribeDisposableSubscriptions(),this.disposableSubscriptions=[],this.attachCoursePlayerSubscription(),this.attachGenericReduxListeners(),this.switchToOverviewModeIfNeeded().subscribe(()=>{let e;this.handleSessionSelect();const t=o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN),i=o.a.getInstance().isCurrentUserA(o.a.LEVEL_POWERUSER),s="instructor"===this.courseStatus.level,n="classroom"===this.course.type||"webinar"===this.course.type,a=this.courseStatus.permissions&&this.courseStatus.permissions.indexOf("course/manage")>=0;if(e=!(!s||!n)||(t||i&&a?[ne.d.WAITING,ne.d.TO_CONFIRM].indexOf(this.courseStatus.status)<0:[ne.d.SUBSCRIBED,ne.d.IN_PROGRESS,ne.d.COMPLETED].indexOf(this.courseStatus.status)>=0),e){const e=this.handleChapterPlay().subscribe(()=>{});this.disposableSubscriptions.push(e)}this.loader.hideWiseLoader()})}_breadcrumbsActionButtons(e){if(!this.course)return;const t="classroom"===this.course.type||"webinar"===this.course.type,i=this.folders&&this.folders.length>0?this.modeNextStateWithFolders:this.modeNextState;let s=[];const n=this.course.can_session_change;if(e===ne.c.PLAYER&&this.chapters.length>0){const e=this;s.push({properties:{icons:["mode-"+i[this.mode]+" bg-accent bg-circle-button"],tooltipText:M.a.t("course","Table of Contents"),textClass:"mdl-cell--hide-tablet mdl-cell--hide-phone"},onClick:t=>{e.mode=i[this.mode],py=this.mode,gy=this.mode,this.changeDetector.detectChanges(),t.properties.icons=["mode-"+i[this.mode]+" bg-accent bg-circle-button"],this.chapterLoaded()}})}const a=this.coursePlayerCalendarService.getCalendarButtonForCourse(this.course,this.fabCoursePlayerCalendar);a&&(a.onClick=e=>this.closeFabBalloons(e),s.push(a));const o=this.deeplinkService.getDeeplinkButtonForCourse(this.course,this.fabCoursePlayerDeeplink,this.currentChapter?{id:this.currentChapter.id,slug:this.currentChapter.slug_name}:null);if(o&&(o.onClick=e=>this.closeFabBalloons(e),s.push(o)),t&&n&&s.push({properties:{icons:["account","swap"],tooltipText:M.a.t("standard","Change Session")},onClick:()=>{this.changeSessionParameters={sessions:this.course.sessions,available_enroll:this.course.available_seats,idCourse:Number(this.course.id),useLocationTimezone:"classroom"===this.course.type},this.changeSessionDialog.show()}}),this.courseStatus.status&&"non_subscribed"!==this.courseStatus.status&&(this.course.can_session_self_unenroll||this.course.can_self_unenroll)&&(this.selfUnenrollForm=this.fb.group({enrollment_type:[""]}),this.unenrollmentButtonService.initDependencies(this.course,this.chapterMustBeTracked,this.selfUnenrollForm),this.selfUnenrollParameters=Object.assign(Object.assign({},this.selfUnenrollParameters),{course:this.course,chapterMustBeTracked:this.chapterMustBeTracked,selfUnenrollForm:this.selfUnenrollForm}),this.shouldAddSelfUnenrollButton())){let e;this.overview&&this.overview.current_session&&(this.unenrollmentButtonService.setCurrentSession(this.overview.current_session),this.selfUnenrollParameters.currentSession=this.overview.current_session),void 0!==this.selfUnenrollParameters.course&&(e={properties:{icons:["account","block-alt"],tooltipText:M.a.t("course","_SELF_UNSUBSCRIBE")},onClick:()=>{this.selfUnenrollDialog.show(),setTimeout(()=>{this.selfUnenrollDialogConfirmButton.disabled=!0})},key:"unenrollment"}),e&&(s.push(e),this.unenrollmentButtonService.buttonAdded=!0)}E.b.getInstance().isPluginActive("Share7020App")&&s.push({properties:{icons:["playlist-plus"],tooltipText:"Add to playlist"},onClick:()=>{const e=M.a.t("standard","Add course to playlist");this.pageService.rightPanel.setWidth(500).setTitle(e).setContent({params:{idContent:this.currentCourse.id,typeContent:ke.a.COURSE,itemTitle:this.currentCourse.name,itemLanguage:this.currentCourse.lang_code,itemPreview:this.currentCourse.thumbnail,addingCourse:!0},component:Oi.a}).open()}}),this.getAdminActions().forEach(e=>{s.push(e)}),this.docLayoutService.actionButtons.setActionButtons(s),void 0!==typeof this.course.social_settings&&this.course.social_settings.networks&&this.docLayoutService.actionButtons.setSocialButtons(this.course.social_settings.networks)}onChangeSessionConfirm(){this.changeSessionRef.changeSessionRequest().then(()=>{this.changeSessionDialog.hide()})}onSelfUnenrollConfirm(){var e;this.currentChapter&&"locked"!==(null===(e=this.currentChapter)||void 0===e?void 0:e.locked)&&this.chapterViewerRef&&(this.chapterMustBeTracked=!1,this.chapterViewerRef.trackSessionRequest(),this.changeDetector.markForCheck(),this.changeDetector.detectChanges()),this.selfUnenrollDialogComponent.onSelfUnenrollConfirm(this.selfUnenrollDialog)}getAdminActions(){let e=[],t=o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN),i=o.a.getInstance().isCurrentUserA(o.a.LEVEL_POWERUSER),s="instructor"==this.courseStatus.level,n=this.course.on_sale,a=this.courseStatus.permissions&&this.courseStatus.permissions.indexOf("course/view")>=0,r=this.courseStatus.permissions&&this.courseStatus.permissions.indexOf("course/update")>=0,c=this.courseStatus.permissions&&this.courseStatus.permissions.indexOf("course/manage")>=0,l=this.courseStatus.permissions&&this.courseStatus.permissions.indexOf("classroom-sessions/view")>=0,d=this.courseStatus.permissions&&this.courseStatus.permissions.indexOf("enrollment/view")>=0,h=this.courseStatus.permissions&&this.courseStatus.permissions.indexOf("course-management/beta")>=0,p=!1,g=!1,m=!1,b=t||s||c,f=t||r,_=t&&n,v=!1;const y=h&&this.toggleService.isOn(u.f.TOGGLE_NEW_COURSE_ADVANCED_SETTINGS);if("elearning"==this.course.type?(p=t||s||r,g=t||s||i&&c&&d&&a):(v=s||t||c&&a,p=r&&(!i||l)||s,m=s||t||a),f&&y&&e.push(this.setAdminButtonProperties()),"elearning"==this.course.type)p&&e.push(this.setAdminButtonTrainingMaterials(h)),g&&e.push(this.setAdminButtonElearningEnrollment(h)),b&&e.push(this.setAdminButtonReports(h));else if("classroom"==this.course.type||"webinar"==this.course.type)if(this.toggleService.isOn(u.f.TOGGLE_VILT)&&"instructor"==this.courseStatus.level&&"classroom"==this.course.type){let s=!!this.course.sessions&&this.course.sessions.some(e=>e.is_session_instructor),n=!!this.course.sessions&&this.course.sessions.some(e=>e.is_event_instructor);if(v=v&&(s||n),p=p&&s,m=m&&s,b=b&&s,v){(t||i&&d)&&e.push(this.setAdminButtonIltEnrollment());const s={queryParams:{[af.b]:af.a.sessions}};e.push({tooltipText:M.a.t("standard","Sessions"),onClick:()=>{this.router.navigate(["learn","instructor","course",this.course.id],s)},icons:["calendar-note"]})}if(p){const t={queryParams:{[af.b]:af.a.trainingMaterial}};e.push({tooltipText:M.a.t("standard","Training materials"),onClick:()=>{this.router.navigate(["learn","instructor","course",this.course.id],t)},icons:["view-list-alt"]})}if(m){const t={queryParams:{[af.b]:af.a.statistic}};e.push({tooltipText:M.a.t("stats","Session statistics"),onClick:()=>{this.router.navigate(["learn","instructor","course",this.course.id],t)},icons:["chart-donut"]})}if(b){const t={queryParams:{[af.b]:af.a.reports}};e.push({tooltipText:M.a.t("standard","_REPORTS"),onClick:()=>{this.router.navigate(["learn","instructor","course",this.course.id],t)},icons:["chart"]})}}else(!this.toggleService.isOn(u.f.TOGGLE_VILT)&&v||v&&this.toggleService.isOn(u.f.TOGGLE_VILT)&&"webinar"==this.course.type)&&e.push(this.setAdminButtonIltWebinarSessionEnrollment(h)),this.toggleService.isOn(u.f.TOGGLE_VILT)&&v&&"classroom"==this.course.type&&e.push(this.setAdminButtonIltEnrollment(),this.setAdminButtonIltSession()),p&&e.push(this.setAdminButtonTrainingMaterials(h)),m&&e.push(this.setAdminButtonSessionReports(h)),b&&e.push(this.setAdminButtonReports(h));f&&!y&&e.push(this.setAdminButtonAdvancedProperties(h)),_&&e.push(this.setAdminButtonManageSeats(h)),f&&!y&&(Di.a.getInstance().set("course_edit_redirect_to",this.router.url),e.push(this.setAdminButtonCourseProperties(h)));let w=[];return e.length>0&&(w=[{properties:{icons:["more"],tooltipText:M.a.t("standard","Related Sections")},subitems:e}]),w}loadLearningPlanPanel(e){e&&(this.showSlideUpPanel=!0,this.slideUpPanelConfig={learningPlanCourses:e.courses,learningPlanID:e.id,learningPlanCompletePercent:e.complete_percent,learningPlanTitle:e.name})}hideLearningPlanPanel(){this.showSlideUpPanel=!1,this.slideUpPanelConfig={learningPlanCourses:[],learningPlanID:0,learningPlanCompletePercent:0,learningPlanTitle:""}}unsubScribeDisposableSubscriptions(){for(const t of this.disposableSubscriptions)try{t.unsubscribe()}catch(e){}}changeCourseDetails(e){if(void 0===e.course_details_changed||!e.course_details_changed.course_id)return;const t=e.course_details_changed.course_id;this.store.dispatch(Ts.a.loadCourseInfo(t)),this.store.dispatch(this.overviewActions.loadOverviewInfo(t))}clearUpBreadcrumbItems(){this.router.events.pipe(Object(vt.a)(this.ngUnsubscribe),Object(Jt.a)(e=>e instanceof s.e)).subscribe(e=>{const t=this.router.url.split("/").filter(e=>Boolean(e)),i=e.url.split("/").filter(e=>Boolean(e)),s=["learn","course",String(this.currentCourseId)];s.every((e,i)=>e===t[i])&&s.every((e,t)=>e===i[t])||this.docLayoutService.actionButtons.clearActionButtons()})}showImpersonateBlockDialog(){this.docLayoutService.dialog.showCommonDialog({title:M.a.t("standard","You Cannot Access E-Signature Courses"),content:M.a.t("standard","For security reasons, you cannot access E-Signature courses while impersonating another user"),actions:[{id:"cancel",type:"neutral",label:M.a.t("course","Leave course"),slot:"end"}]}).subscribe(e=>{e.actionSuccess.next(!0),this.router.navigate(["/learn/mycourses"])})}setAdminButtonElearningEnrollment(e){return{tooltipText:M.a.t("standard","Enrollments"),onClick:()=>{let t=[];t=this.isOEM||"instructor"!=this.courseStatus.level||this.isSuperAdmin?e?this.getAdminNewCourseManagementRoute("enrollments"):["/legacy/admin/index.php?r=courseManagement/enrollment&id="+this.course.id+"&course_id="+this.course.id]:this.getInstructorOverviewRoute("enrollments"),this.router.navigate(t)},icons:["accounts"]}}setAdminButtonTrainingMaterials(e){return{tooltipText:M.a.t("standard","Training materials"),onClick:()=>{let t=[];t=this.isOEM?e?this.getAdminNewCourseManagementRoute("training_materials"):"elearning"==this.course.type?["/legacy/lms/index.php?r=player/training&course_id="+this.course.id+"&ref_src=admin"]:["/legacy/lms/index.php?r="+("classroom"==this.course.type?"ClassroomApp":"webinar")+"/session/manageLearningObjects&course_id="+this.course.id]:"instructor"!=this.courseStatus.level||this.isSuperAdmin||"elearning"!==this.course.type?e?this.getAdminNewCourseManagementRoute("training_materials"):["/legacy/lms/index.php?r="+("classroom"==this.course.type?"ClassroomApp":"webinar")+"/session/manageLearningObjects&course_id="+this.course.id]:this.getInstructorOverviewRoute("training_materials"),this.router.navigate(t)},icons:["view-list-alt"]}}setAdminButtonReports(e){return{tooltipText:M.a.t("standard","_REPORTS"),onClick:()=>{let t=[];t=this.isOEM||"instructor"!=this.courseStatus.level||this.isSuperAdmin||"elearning"!==this.course.type?e?this.getAdminNewCourseManagementRoute("reports"):["/legacy/lms/index.php?r=player/report&course_id="+this.course.id]:this.getInstructorOverviewRoute("reports"),this.router.navigate(t)},icons:["chart"]}}setAdminButtonAdvancedProperties(e){return{tooltipText:M.a.t("standard","Settings"),onClick:()=>{const t=e?this.getAdminNewCourseManagementRoute("advanced_settings"):["/legacy/lms/index.php?r=player/coursesettings&course_id="+this.course.id];this.router.navigate(t)},icons:["settings"]}}setAdminButtonProperties(){return{tooltipText:M.a.t("standard","Properties"),onClick:()=>{const e=this.getAdminNewCourseManagementRoute("properties");this.router.navigate(e)},icons:["settings"]}}setAdminButtonManageSeats(e){return{tooltipText:M.a.t("course","Manage Seats"),onClick:()=>{const t=e?this.getAdminNewCourseManagementRoute("seats"):["/legacy/admin/index.php?r=courseManagement/manageSeats&id="+this.course.id];this.router.navigate(t)},icons:["seat"]}}setAdminButtonSessionReports(e){return{tooltipText:M.a.t("stats","Session statistics"),onClick:()=>{const t=e?this.getAdminNewCourseManagementRoute("session_statistics"):["/legacy/admin/index.php?r=reportManagement/"+("classroom"==this.course.type?"classroomCourseReport":"webinarCourseReport")+"&course_id="+this.course.id];this.router.navigate(t)},icons:["chart-donut"]}}setAdminButtonIltWebinarSessionEnrollment(e){return{tooltipText:M.a.t("classroom","Sessions and Enrollments"),onClick:()=>{const t=e?this.getAdminNewCourseManagementRoute("sessions"):["/legacy/lms/index.php?r=player/training/"+("classroom"==this.course.type?"session":"webinarSession")+"&course_id="+this.course.id];this.router.navigate(t)},icons:["accounts"]}}setAdminButtonIltSession(){return{tooltipText:M.a.t("standard","Sessions"),onClick:()=>{const e=this.getAdminNewCourseManagementRoute("sessions");this.router.navigate(e)},icons:["calendar-note"]}}setAdminButtonIltEnrollment(){return{tooltipText:M.a.t("standard","Enrollments"),onClick:()=>{const e=this.getAdminNewCourseManagementRoute("enrollments");this.router.navigate(e)},icons:["accounts"]}}setAdminButtonCourseProperties(e){return{tooltipText:M.a.t("course","Course properties"),onClick:()=>{const t=e?this.getAdminNewCourseManagementRoute("properties"):["legacy/admin/index.php?r=courseManagement/index&id="+this.course.id+"&open_modal=edit"];this.router.navigate(t)},icons:["edit"]}}getAdminNewCourseManagementRoute(e){return["/course/edit/"+this.course.id,{tab:e}]}getInstructorOverviewRoute(e){return["/learn/course/"+this.course.id+"/instructor-overview",{tab:e}]}closeFabBalloons(e){const t=[this.fabCoursePlayerCalendar,this.fabCoursePlayerDeeplink];this.pageService.balloons.filter(e=>t.includes(e.cache_prefix)).map(t=>{t.instance.balloonCacheItem.prefix!==e.baloon.balloonCacheItem.prefix&&t.instance.onCloseBalloonClick.emit(!0)})}ngOnDestroy(){this.userInteractionService.track(fc.a.COURSE_CLOSE,fc.b.COURSE_PLAYER,{courseId:this.idCourse}),this.subscriberCourse&&this.subscriberCourse.unsubscribe(),this.courseChangeSubscription&&this.courseChangeSubscription.unsubscribe(),this.subscriptionCurrentPlayingChapter&&this.subscriptionCurrentPlayingChapter.unsubscribe(),this.unsubScribeDisposableSubscriptions(),this.store.dispatch(Ts.a.destroy()),this.ngUnsubscribe.next(!0),this.ngUnsubscribe.complete(),this.hasLearningPlan&&this.hideLearningPlanPanel(),this.chapterNavigationAvailabilityInterval&&clearInterval(this.chapterNavigationAvailabilityInterval),super.ngOnDestroy()}checkCourseStarted(){if(this.course.course_date_start&&"0000-00-00 00:00:00"!==this.course.course_date_start){const e=new Zt.a(this.course.course_date_start).formatTimezoned("YYYY-MM-DD",Object(ii.k)()),t=(new Zt.a).formatTimezoned("YYYY-MM-DD",Object(ii.k)());this.isCourseStarted=e<=t}else this.isCourseStarted=!0}}return e.\u0275fac=function(t){return new(t||e)(c.ec(w.e),c.ec(Ts.c),c.ec(Ts.e),c.ec(s.h),c.ec(s.a),c.ec(P.a),c.ec(I.a),c.ec(c.i),c.ec(of.a),c.ec(Ze.d),c.ec(nf),c.ec(rf.a),c.ec(cf.a),c.ec(ni.b),c.ec(fc.c),c.ec(w.a),c.ec(lf.a),c.ec(j.a),c.ec(u.g),c.ec(df.a),c.ec(y.a),c.ec(xc))},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(c.nd(_b,1),c.nd(Ov,1),c.nd(Ev,1),c.nd(Av,1),c.nd(Pv,1),c.nd(Mv,1),c.nd(Lv,1),c.nd(jv,1),c.nd(Rv,1),c.nd(Ev,1)),2&e){let e;c.Rc(e=c.tc())&&(t.chapterViewerRef=e.first),c.Rc(e=c.tc())&&(t.additionalFieldsDialog=e.first),c.Rc(e=c.tc())&&(t.courseNavigation=e.first),c.Rc(e=c.tc())&&(t.coursePlayerContainer=e.first),c.Rc(e=c.tc())&&(t.changeSessionDialog=e.first),c.Rc(e=c.tc())&&(t.changeSessionRef=e.first),c.Rc(e=c.tc())&&(t.selfUnenrollDialog=e.first),c.Rc(e=c.tc())&&(t.selfUnenrollDialogComponent=e.first),c.Rc(e=c.tc())&&(t.selfUnenrollDialogConfirmButton=e.first),c.Rc(e=c.tc())&&(t.courseNavigationChildren=e)}},features:[c.Lb([nf]),c.Jb],decls:4,vars:4,consts:[["class","player-wrapper",4,"ngIf"],["class","player-wrapper",3,"ngClass",4,"ngIf"],[3,"learningPlanID","learningPlanCourses","learningPlanTitle","learningPlanCompletePercent",4,"ngIf"],[3,"id","width","height","title","content","type","actions","confirmation_check_text","show_confirmation_check",4,"ngIf"],[1,"player-wrapper"],["id","iframe-container-com"],["title","community","allow","microphone *;camera *;fullscreen *",1,"course-player-iframe",3,"src"],[1,"player-wrapper",3,"ngClass"],["class","course course-waiting-list",4,"ngIf"],[4,"ngIf"],[1,"dialog-waiting-list"],["changeSessionDialog",""],[3,"size"],["selfUnenrollDialog",""],[1,"course","course-waiting-list"],[3,"course"],["class","course-player mdl-wrapper",4,"ngIf"],["class","course-overview",4,"ngIf"],[1,"course-player","mdl-wrapper"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--12-col"],[1,"chapter-info__wrapper","bg-white"],[1,"chapter-info__body","bg-white","content-index","empty-course-dialog"],[1,"empty-course-icon"],[1,"no-chapters-message"],["class","mdl-grid",4,"ngIf"],[1,"mdl-grid","course-player-grid"],[1,"mdl-cell--12-col"],["class","mdl-grid course-player-elements__wrapper mdl-cell--12-col",4,"ngIf"],["class","partner-wrapper",4,"ngIf"],[3,"widgetsDataSource","style",4,"ngIf"],[1,"mdl-layout-spacer"],[1,"text-white","bg-warning","mdl-cell","mdl-cell--12-col","soft-deadline-container"],[1,"fa","fa-exclamation-triangle"],[1,"contact-administrator","text-grey-mid"],[1,"mdl-grid","course-player-elements__wrapper","mdl-cell--12-col"],["coursePlayerContainer",""],[1,"mdl-grid","course-player-elements__main","mdl-cell",3,"ngClass"],[1,"mdl-cell--12-col","course-player-elements__chapter-block"],[3,"docLayoutSkipLinkTarget","docLayoutSkipLinkTargetMain","current_chapter","course_status","course","chapter_viewer","next_chapter","prev_chapter","chapter_must_be_tracked","lastPlayedChapter","chapters","preserve_lightbox","device","learning_plan_id","isCourseStarted","rate","play","completed","loaded","closeLightbox"],["chapterViewerRef",""],["class","mdl-cell--12-col course-player-elements__small-block",4,"ngIf"],["class","mdl-cell course-player-elements__navigation mdl-cell--hide-tablet mdl-cell--hide-phone",3,"ngClass",4,"ngIf"],[1,"mdl-cell--12-col","course-player-elements__small-block"],[1,"course-navigation",3,"mode","current_chapter","next_chapter","prev_chapter","course_status","chapter_viewer","course","chapters","folders","courseState","learning_plan_id","isCourseStarted","rate","play"],[3,"course","current_chapter","course_status","isCourseStarted","rate","play",4,"ngIf"],[3,"course","current_chapter","course_status","isCourseStarted","rate","play"],[1,"mdl-cell","course-player-elements__navigation","mdl-cell--hide-tablet","mdl-cell--hide-phone",3,"ngClass"],["courseNavigation",""],[1,"partner-wrapper"],[3,"widgetsDataSource"],[1,"course-overview"],["class","mdl-wrapper",4,"ngIf"],[3,"course","course_status","current_session","enrolled_sessions","mode","current_chapter","next_chapter","prev_chapter","chapters","courseState","isCourseStarted","rate","play","changeSession"],["class","bg-white",4,"ngIf"],["class","overview-tabs-wrapper bg-white",4,"ngIf"],[1,"mdl-wrapper"],[1,"bg-white"],["consumerPage","learner-page",3,"certificationData","certificationAward","resourceId","enrolledAt"],[1,"overview-tabs-wrapper","bg-white"],[3,"panels","style","reInitTabsOnChange",4,"ngIf"],[3,"panels","reInitTabsOnChange"],[3,"course","overview","available_sessions"],[3,"sessions","available_enroll","idCourse","useLocationTimezone",4,"ngIf"],[3,"label","trigger"],[3,"sessions","available_enroll","idCourse","useLocationTimezone"],["changeSession",""],[3,"course","form_control","current_session","showCheckbox","confirmationToggle"],["selfUnenrollDialogComponent",""],[3,"type","label","trigger"],["selfUnenrollDialogConfirmButton",""],[3,"learningPlanID","learningPlanCourses","learningPlanTitle","learningPlanCompletePercent"],[3,"id","width","height","title","content","type","actions","confirmation_check_text","show_confirmation_check"],["additionalFieldsDialog",""]],template:function(e,t){1&e&&(c.ed(0,Fv,3,1,"div",0),c.ed(1,dy,10,7,"div",1),c.ed(2,uy,1,4,"slideup-panel",2),c.ed(3,hy,2,9,"dialog-component",3)),2&e&&(c.Dc("ngIf",t.showIframe),c.Mb(1),c.Dc("ngIf",!t.showIframe),c.Mb(1),c.Dc("ngIf",t.showSlideUpPanel),c.Mb(1),c.Dc("ngIf",t.additionalFieldsDialogParams))},directives:[m.p,m.n,Ko.a,If,_b,xf.a,w_,O_,bi,Pi.a,rv,qr,gs.a,mc,Jo.a,Xo.a,Zo.a,er.a,tr.a,li,sf,Dv,Dp.a],pipes:[M.b,m.h],styles:["#iframe-container-com[_ngcontent-%COMP%]   .course-player-iframe[_ngcontent-%COMP%]{width:100%;height:86vh}  .baloon-titled-clipboard-copy.docebo-balloon.position-right .triangle{margin-top:-90px;border-color:transparent #fff transparent transparent}"]}),e})();i("R9jb"),i("TMRp"),i("+H5O"),i("IOwI"),i("l/Ve"),i("uNvY");var fy=i("9cLA"),_y=i("3bdg"),vy=i("DaW2"),yy=i("Nu4O"),wy=i("Up5I"),Cy=i("no3L");class Sy{constructor(e,t,i){this.backend=e,this.endPointUrl=t,this.vars=i,this.pageSize=24,this.from=0,this.endOfResults=!1,this.tileDirection=yy.d.VERTICAL_CARD,this.keepDataStructure=!1,this.catalogView=!1}fetchData(e={}){return e.criteria=this.vars.criteria,e.g=this.vars.g,e.adv=this.vars.adv,e.page_size=this.pageSize,e.from=this.from,this.backend.request(this.endPointUrl,"GET",e).pipe(Object(di.a)(e=>{const{data:t}=e,i=this.vars.g;switch(this.total=t.grand_total,this.from=!1!==t.next_from?t.next_from:this.from,this.endOfResults=t.end_of_results,i){case wy.a.ALL_RESULTS:this.tileDirection=yy.d.HORIZONTAL_CARD_PLAIN;break;case wy.a.COURSES_CONTENT:this.tileDirection=yy.d.HORIZONTAL_CARD;break;case wy.a.COURSES_CATALOG:this.catalogView=!0;break;case wy.a.QUESTIONS_AND_ANSWERS:this.keepDataStructure=!0}return t.results.map(i===wy.a.ALL_RESULTS?e=>Object(vy.b)(e):e=>function(e,t=yy.d.VERTICAL_CARD,i=!1,s){var n,a;if(i)return e;const o={},r={};let c=[];null!=e.actions&&(c=[...e.actions]);const l={visual_style:t,id:e.id,type_id:e.type_id,type:e.type,uri:e.uri||"",image_url:e.image_url,title:e.title,duration:e.duration?Object(Cy.g)(e.duration):null,rating:e.rating,rating_mode:"five_stars",is_new:e.is_new,actions:c.map(e=>({text:M.a.t("standard",e.label),type:e.type,action:e.action}))};switch(e.type_id){case vy.a.ASSET:case vy.a.PLAYLIST:o.author=e.owner.full_name,o.author_link=`/share/personalChannel/${e.owner.uuid}`,e.inviter&&(r.inviter_avatar=e.inviter.avatar,r.inviter_initials=e.inviter.short_name),l.other_fields={[e.type_id]:Object.assign({},e.other_fields,o,r)},l.channels=e.channels||[];break;case vy.a.COURSE:if(e.other_fields||(e.other_fields={}),e.other_fields.can_enter||1===e.waiting||(l.uri=""),l.show_waiting=1===e.waiting,l.is_user_enrolled=e.is_user_enrolled,l.is_user_subscribed=e.is_user_subscribed,l.other_fields={[e.type_id]:Object.assign({},e.other_fields)},s){const t={can_enter:e.other_fields.can_enter,can_enter_reason:e.other_fields.can_enter_reason,language:e.other_fields.language,language_label:e.other_fields.language_label,price:e.item_price,currencySymbol:null!==(n=null==e?void 0:e.ecommerce.currencySymbol)&&void 0!==n?n:null,currency:null!==(a=null==e?void 0:e.ecommerce.currency)&&void 0!==a?a:null};l.on_sale=e.is_selling,l.type_id="catalog-course",l.other_fields={[l.type_id]:Object.assign({},t)}}l.other_fields[l.type_id].type=e.course_type;break;case vy.a.LEARNING_PLAN:if(e.other_fields||(e.other_fields={}),e.other_fields.can_enter||1===e.waiting||(l.uri=""),l.show_waiting=1===e.waiting,l.is_user_enrolled=e.is_user_enrolled,l.is_user_subscribed=e.is_user_subscribed,l.other_fields={[e.type_id]:Object.assign({},e.other_fields)},s){const t={price:e.item_price,courses_count:e.courses_count?e.courses_count:0};l.on_sale=e.is_selling,l.type_id="catalog-lp",l.other_fields={[l.type_id]:Object.assign({},t)}}l.other_fields[l.type_id].type=e.course_type;break;case vy.a.LEARNING_OBJECT:l.other_fields={[e.type_id]:Object.assign({},e.other_fields)};break;case vy.a.QUESTION:l.owner=e.owner||{},l.metadata=e.metadata||{},l.related=e.related||null,l.es_document=e.document||{},l.other_fields={[e.type_id]:Object.assign({},e.other_fields)};break;default:l.other_fields={[e.type_id]:Object.assign({},e.other_fields)}}return Object.assign({},l)}(e,this.tileDirection,this.keepDataStructure,this.catalogView))}))}getTotal(){return this.total}resetPagination(){this.from=0,this.endOfResults=!1}hideLazyLoading(){return this.endOfResults}}var ky=i("fqXP"),Ty=i("Fm60"),Iy=i("Gnvh"),xy=i("4VH+"),Dy=i("RdQI"),Oy=i("49CU");function Ey(e,t){if(1&e&&c.fc(0,"tile",12),2&e){const e=c.wc().$implicit;c.Dc("data",e)("skipTileWrapperLink",!1)}}function Ay(e,t){if(1&e&&c.fc(0,"coachTile",13),2&e){const e=c.wc().$implicit;c.Dc("data",e)("open_mode",0)}}function Py(e,t){if(1&e&&c.fc(0,"doc-layout-global-search-result",14),2&e){const e=c.wc().$implicit;c.Dc("status",e.status)("variant",e.variant)("subtype",e.subtype)("imageUrl",e.imageUrl)("owner",e.owner)("expirationDate",e.expirationDate)("title",e.title)("uri",e.uri)("matchingTags",e.matchingTags)("matchingDescription",e.matchingDescription)("matchingTranscript",e.matchingTranscript)("published",e.published)("watched",e.watched)("private",e.private)("canEnter",e.canEnter)("canEnterReason",e.canEnterReason)}}const My=function(e){return{last:e}};function Ly(e,t){if(1&e&&(c.kc(0,"div",8),c.ed(1,Ey,1,2,"tile",9),c.ed(2,Ay,1,2,"coachTile",10),c.ed(3,Py,1,16,"doc-layout-global-search-result",11),c.jc()),2&e){const e=t.last,i=c.wc();c.Dc("ngClass",c.Ic(4,My,e)),c.Mb(1),c.Dc("ngIf",i.isTypeDataSourceTile()),c.Mb(1),c.Dc("ngIf",i.isTypeDataSourceCoach()),c.Mb(1),c.Dc("ngIf",i.isTypeDataSourceAllResults())}}function jy(e,t){if(1&e&&c.fc(0,"blankslate",15),2&e){const e=c.wc();c.Dc("isVisible",e.dataBlankslate.isVisible)("title",e.dataBlankslate.title)("tip",e.dataBlankslate.tip)("type",e.dataBlankslate.type)("headerButtons",e.dataBlankslate.headerButtons)}}function Ry(e,t){if(1&e&&(c.kc(0,"div"),c.fc(1,"lazy-loader",16),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("handler",e.lazyLoad.handler)("placeholder",e.lazyLoad.placeholder)("loading_style",e.lazyLoad.loading_style)}}const Fy=function(e,t){return{"src-type-coach":e,"src-type-tile":t}};let Ny=(()=>{class e{constructor(e,t,i,s,n,a){this.backend=e,this.filtersApiService=t,this.queryStringManagerService=i,this.pageService=s,this.docLayoutService=n,this.router=a,this.queryUrlParams=null,this.asyncFilters=[],this.noItems=!1,this.dataBrowserSource={mode:null,viewOptionLabel:null,filters:new je.a(null),appliedFiltersNumber:new je.a(null),displayedItemsNumber:new je.a(null),viewOptions:new je.a(null),disableViewOptions:!1,preselectedViewOption:new Ze.e,elementLabels:{singular:M.a.t("standard","item"),plural:M.a.t("standard","items")}},this.lazyLoad={trigger:"show",placeholder:{component:_y.a,params:{items:new Array(6)}},loading_style:"placeholder"},this.hideLazyLoader=!1,this.dataBlankslate={isVisible:!0,headerButtons:[],type:"no-results",title:M.a.t("standard","Our bots can't find what you are looking for."),tip:M.a.t("calendar","Changing some filters or search terms may help them")},this.activeSort={sort_attr:"_score",sort_dir:"desc"},this.defaultSort={sort_attr:"_score",sort_dir:"desc"},this.dataBrowserModes=Me.a,this.typeDataSource=wy.b.TILE,this.queryParams={},this.activeFilters={},this.queryKeyMapper={type:"t",is_paid:"p",search:"se",duration:"du",language:"l",content_partners:"cp"},this.transformCatalogFilters=e=>{for(const t of Object.keys(e))t.indexOf("field_")>-1&&t.indexOf("_$")>-1&&"free_search_filter"===e[t].type&&(e.hasOwnProperty("search_text")||(e.search_text=Object.assign(Object.assign({},e[t]),{code:"search_text"})),delete e[t]);return e}}extendBreadcrumbs(e){this.docLayoutService.actionButtons.setActionButtons(e)}ngOnInit(){this.lazyLoad&&(this.lazyLoad.loading_style="placeholder",this.group!==wy.a.COURSES_CONTENT&&this.group!==wy.a.QUESTIONS_AND_ANSWERS&&this.group!==wy.a.ALL_RESULTS||(this.lazyLoad.loading_style="spinner"),this.lazyLoad.handler=this.loadMore.bind(this)),this.dataBrowserSource.mode=this.dataBrowserModes.push,this.dataBrowserSource.viewOptionLabel=M.a.t("social","Sort by"),this.view="_score desc",this.activeSort=this.defaultSort,this.queryParams=Object.assign(Object.assign({},this.queryParams),this.activeSort),this.model=new Sy(this.backend,this.url,{criteria:this.search,adv:1,g:this.group}),this.fromQueryStringToParamsRequest(),this.fetchCollectionData(!0)}initDataBrowserDataSource(){this.initTabFilters(),this.initTabSorting()}initTabFilters(){this.dataBrowserSource.filters.next(this.asyncFilters),this.dataBrowserSource.appliedFiltersNumber.next(this.countActiveFilters())}fromQueryStringToParamsRequest(){if(this.group===wy.a.COURSES_CATALOG){const e=this.transformCatalogFilters(Object.assign({},this.filters));if(this.asyncFilters=this.filtersApiService.transformObjectFiltersGS(e),this.queryKeyMapper=this.filtersApiService.updateQueryKeyMapper(this.queryKeyMapper,this.asyncFilters),this.activeFilters=this.filtersApiService.convertQueryObjectToActiveFilters(this.queryUrlParams.ctl,this.queryKeyMapper,this.asyncFilters),this.asyncFilters=this.filtersApiService.setPreselectedValueFiltersFromActiveFilters(this.asyncFilters,this.activeFilters),this.activeFilters=this.filtersApiService.prepareDataDataBrowser(this.activeFilters,this.asyncFilters),this.queryUrlParams.ctl.v){const e=this.queryUrlParams.ctl.v.values.split(" ");this.activeSort={sort_attr:e[0],sort_dir:e[1]}}this.queryParams=Object.assign(Object.assign(Object.assign({},this.queryParams),this.activeFilters),this.activeSort)}}fromFiltersToQueryString(e){if(this.group===wy.a.COURSES_CATALOG){this.activeFilters=e;let t=this.filtersApiService.convertFiltersToQueryObject(this.activeFilters,this.queryKeyMapper);t=this.encodeSortInQueryObjects(t),this.queryStringManagerService.updateQueryStringParams("ctl",t)}}encodeSortInQueryObjects(e){return delete e.sort_attr,delete e.sort_dir,this.activeSort.sort_dir===this.defaultSort.sort_dir&&this.activeSort.sort_attr===this.defaultSort.sort_attr||(e.v={values:`${this.activeSort.sort_attr} ${this.activeSort.sort_dir}`}),e}onFiltersUpdate(e){const t=this.filtersApiService.prepareDataDataBrowser(e,this.asyncFilters),i=this.filtersApiService.getActiveFilters(this.asyncFilters,t);return this.activeFilters=t,t.sort_attr=this.queryParams.sort_attr,t.sort_dir=this.queryParams.sort_dir,this.queryParams=Object.assign(Object.assign({},t),this.activeSort),this.dataBrowserSource.appliedFiltersNumber.next(i),this.model.resetPagination(),this.fromFiltersToQueryString(e),this.fetchCollectionData(!1)}onViewChange(e){this.view=e;const t=this.view.split(" ");return this.activeSort={sort_attr:t[0],sort_dir:t[1]},this.queryParams=Object.assign(Object.assign({},this.queryParams),this.activeSort),this.model.resetPagination(),this.fromFiltersToQueryString(this.activeFilters),this.fetchCollectionData(!1)}loadMore(){return this.updateCollectionData()}fetchCollectionData(e){if(this.group===wy.a.COURSES_CATALOG){const e={singleLink:document.location},t=E.b.getInstance();if(t.settings.share_this_view_button&&1==t.settings.share_this_view_button){let t=[Object(fy.b)(this.pageService,this.backend,this.router,e)];this.extendBreadcrumbs(t)}}else this.extendBreadcrumbs([]);this.group===wy.a.QUESTIONS_AND_ANSWERS?(this.typeDataSource=wy.b.COACH,this.tileDataType=this.model.fetchData(this.queryParams)):this.group===wy.a.ALL_RESULTS?(this.typeDataSource=wy.b.ALL_RESULTS,this.tileDataType=this.model.fetchData(this.queryParams)):this.tileDataType=this.model.fetchData(this.queryParams),this.subscription=this.tileDataType.subscribe(t=>{this.tilesData=t,this.dataBrowserSource.displayedItemsNumber.next(this.model.getTotal()),this.hideLazyLoader=this.model.hideLazyLoading(),e&&this.initDataBrowserDataSource(),this.noItems=this.model.getTotal()<=0})}updateCollectionData(){let e;const t=new a.a(t=>{e=t});return this.tileDataType=this.model.fetchData(this.queryParams),this.subscription=this.tileDataType.subscribe(t=>{e.next(!0),this.tilesData=[...this.tilesData,...t],this.dataBrowserSource.displayedItemsNumber.next(this.model.getTotal()),this.hideLazyLoader=this.model.hideLazyLoading()}),t}isTypeDataSourceTile(){return this.typeDataSource===wy.b.TILE}isTypeDataSourceCoach(){return this.typeDataSource===wy.b.COACH}isTypeDataSourceAllResults(){return this.typeDataSource===wy.b.ALL_RESULTS}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}initTabSorting(){let e=[];e=this.group===wy.a.COURSES_CONTENT?[{label:M.a.t("standard","Best Match"),value:"_score desc"},{label:M.a.t("standard","A - Z"),value:"titlesort asc"},{label:M.a.t("standard","Z - A"),value:"titlesort desc"}]:this.group===wy.a.QUESTIONS_AND_ANSWERS?[{label:M.a.t("standard","Best Match"),value:"_score desc"},{label:M.a.t("standard","Newest To Oldest"),value:"created desc"},{label:M.a.t("standard","Oldest To Newest"),value:"created asc"}]:this.group===wy.a.COURSES_CATALOG?[{label:M.a.t("standard","Best Match"),value:"_score desc"},{label:M.a.t("standard","A - Z"),value:"titlesort asc"},{label:M.a.t("standard","Z - A"),value:"titlesort desc"},{label:M.a.t("standard","lowest first"),value:"price asc"},{label:M.a.t("standard","highest first"),value:"price desc"}]:[{label:M.a.t("standard","Best Match"),value:"_score desc"},{label:M.a.t("standard","A - Z"),value:"titlesort asc"},{label:M.a.t("standard","Z - A"),value:"titlesort desc"},{label:M.a.t("standard","Newest To Oldest"),value:"created desc"},{label:M.a.t("standard","Oldest To Newest"),value:"created asc"}],this.dataBrowserSource.viewOptions.next(e),this.dataBrowserSource.preselectedViewOption.setValue(`${this.activeSort.sort_attr} ${this.activeSort.sort_dir}`)}countActiveFilters(){let e=0;return this.activeFilters&&Object.keys(this.activeFilters).map(t=>{const i=this.activeFilters[t],s=this.filtersApiService.getFilterFromName(t,this.asyncFilters);i instanceof Array&&s.type!==Me.d.duration_filter&&s.type!==Me.d.timeframe?e+=i.length:i&&(e+=1)}),e}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a),c.ec(ky.a),c.ec(Ty.a),c.ec(P.a),c.ec(j.a),c.ec(s.h))},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],inputs:{url:"url",filters:"filters",search:"search",group:"group",queryUrlParams:"queryUrlParams"},decls:8,vars:8,consts:[[1,"mdl-wrapper","global-search-collection-browser","data-browser-top-offset"],[3,"dataBrowserSource","onFiltersUpdate","onViewChange"],["id","collection-container",3,"ngClass"],["id","collection-content"],[1,"tile-items"],["class","tile-item",3,"ngClass",4,"ngFor","ngForOf"],[3,"isVisible","title","tip","type","headerButtons",4,"ngIf"],[4,"ngIf"],[1,"tile-item",3,"ngClass"],[3,"data","skipTileWrapperLink",4,"ngIf"],[3,"data","open_mode",4,"ngIf"],[3,"status","variant","subtype","imageUrl","owner","expirationDate","title","uri","matchingTags","matchingDescription","matchingTranscript","published","watched","private","canEnter","canEnterReason",4,"ngIf"],[3,"data","skipTileWrapperLink"],[3,"data","open_mode"],[3,"status","variant","subtype","imageUrl","owner","expirationDate","title","uri","matchingTags","matchingDescription","matchingTranscript","published","watched","private","canEnter","canEnterReason"],[3,"isVisible","title","tip","type","headerButtons"],[3,"handler","placeholder","loading_style"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"data-browser",1),c.sc("onFiltersUpdate",function(e){return t.onFiltersUpdate(e)})("onViewChange",function(e){return t.onViewChange(e)}),c.kc(2,"div",2),c.kc(3,"div",3),c.kc(4,"div",4),c.ed(5,Ly,4,6,"div",5),c.jc(),c.ed(6,jy,1,5,"blankslate",6),c.jc(),c.jc(),c.ed(7,Ry,2,3,"div",7),c.jc(),c.jc()),2&e&&(c.Mb(1),c.Dc("dataBrowserSource",t.dataBrowserSource),c.Mb(1),c.Dc("ngClass",c.Jc(5,Fy,t.isTypeDataSourceCoach(),t.isTypeDataSourceTile())),c.Mb(3),c.Dc("ngForOf",t.tilesData),c.Mb(1),c.Dc("ngIf",t.noItems),c.Mb(1),c.Dc("ngIf",t.lazyLoad&&!t.hideLazyLoader))},directives:[Fe.a,m.n,m.o,m.p,Iy.b,xy.a,Dy.a,jc.a,Oy.a],encapsulation:2}),e})();var Uy=function(e){return e.DATE_RANGE="date-range",e.DURATION="duration",e.SINGLE_SELECTION="single-selection",e.MULTIPLE_SELECTION="multiple-selection",e.RATING="rating",e}({});function zy(e){e.params&&e.params.radio_type&&"date"===e.params.radio_type&&(e.type="date");const t=function(e){let t=null;switch(e){case"Type.checkbox_filter":case"checkbox_filter":t=Uy.MULTIPLE_SELECTION;break;case"radio_filter":case"Type.radio_filter":t=Uy.SINGLE_SELECTION;break;case"Type.rating_filter":t=Uy.RATING;break;case"duration_filter":t=Uy.DURATION;break;case"date":t=Uy.DATE_RANGE}return t}(e.type),i=e.params&&e.params.options&&(e.params.options.min||0===e.params.options.min)&&e.params.options.min!==e.params.options.max?{min:e.params.options.min,max:e.params.options.max}:null;return t&&(t!==Uy.DURATION||i)?{title:e.title,code:e.code,type:t,options:e.params&&e.params.options&&!i?e.params.options.map(e=>({value:e.key,label:e.label})):[],durationRange:i,allOptionLabel:e.allOptionLabel||tt.a.t("standard","All")}:null}function qy(e){const t=[];if(e.filters&&Object.keys(e.filters).length)for(let i in e.filters){const s=zy(e.filters[i]);s&&t.push(s)}return t}function Vy(e){const t=[];if(e.classroom_filters&&Object.keys(e.classroom_filters).length)for(let i in e.classroom_filters){const s=zy(e.classroom_filters[i]);s&&t.push(s)}return t}function By(e){const t=[];if(e.webinar_filters&&Object.keys(e.webinar_filters).length)for(let i in e.webinar_filters){const s=zy(e.webinar_filters[i]);s&&t.push(s)}return t}var Gy=function(e){return e.ALL_RESULTS="all-results",e.ASSETS="assets",e.COURSE_CATALOG="course-catalog",e.MY_COURSES_AND_LEARNING_PLANS="my-courses",e.QUESTIONS_AND_ANSWERS="questions-answers",e.TRAINING_MATERIAL="training-material",e}({});const Hy={1:Gy.MY_COURSES_AND_LEARNING_PLANS,2:Gy.TRAINING_MATERIAL,3:Gy.COURSE_CATALOG,4:Gy.ASSETS,5:Gy.QUESTIONS_AND_ANSWERS,6:Gy.ALL_RESULTS};function $y(e){return+Object.keys(Hy).find(t=>Hy[+t]===e)}const Yy={type:"t",is_paid:"p",duration:"du",language:"l",content_partners:"cp"},Wy={classroomFilters:tt.a.t("standard","Classroom Filters"),webinarFilters:tt.a.t("standard","Webinar Filters"),itemsCountSingular:tt.a.t("standard","{itemsCount} item"),itemsCountPlural:tt.a.t("standard","{itemsCount} items"),blankSlateTitle:tt.a.t("standard","Our bots can't find what you are looking for."),blankSlateDescription:tt.a.t("calendar","Changing some filters or search terms may help them"),filtersLabel:tt.a.t("standard","Filters"),clearFiltersLabel:tt.a.t("standard","Clear filters"),closeFiltersLabel:tt.a.t("standard","Close"),activeFiltersCountLabelSingular:tt.a.t("standard","Active Filter"),activeFiltersCountLabelPlural:tt.a.t("standard","Active Filters"),showMoreLabel:tt.a.t("widgets","See other options"),durationFilterTitle:tt.a.t("standard","Duration"),allDuration:tt.a.t("standard","All durations"),customDuration:tt.a.t("standard","Custom duration"),sortBestMatch:tt.a.t("standard","Best Match"),sortNameAsc:tt.a.t("player","Name A-Z"),sortNameDesc:tt.a.t("player","Name Z-A"),sortNewestToOldest:tt.a.t("standard","Newest To Oldest"),sortOldestToNewest:tt.a.t("standard","Oldest To Newest"),sortLowestPriceFirst:tt.a.t("standard","lowest first"),sortHighestPriceFirst:tt.a.t("standard","highest first"),resultsCount:tt.a.t("standard","{resultsCount} results"),lockedItem:tt.a.t("mobile","The Course Is Now Locked"),answered:tt.a.t("standard","answered"),asked:tt.a.t("standard","asked"),follow:tt.a.t("standard","Follow"),unfollow:tt.a.t("standard","Unfollow"),edit:tt.a.t("standard","Edit"),delete:tt.a.t("standard","Delete"),relatedTo:tt.a.t("standard","Related to"),saveChanges:tt.a.t("standard","Save Changes"),cancel:tt.a.t("standard","Cancel"),moreAnswers:tt.a.t("standard","{moreAnswersCount} more answers in the Q&A page"),messageActions:tt.a.t("standard","Actions"),changesSavedSuccessfully:tt.a.t("app7020","Your changes have been saved successfully"),questionDeleted:tt.a.t("standard","This question has been deleted successfully"),answerDeleted:tt.a.t("standard","This answer has been deleted successfully"),changesNotSaved:tt.a.t("standard","Something went wrong. Please, try again later!"),deleteQuestion:tt.a.t("test","Delete question"),deleteQuestionConfirmation:tt.a.t("standard","Are you sure you want to delete this question?"),confirm:tt.a.t("standard","Confirm"),following:tt.a.t("mobile","You are following this discussion"),followSuccessful:tt.a.t("standard","You are now following this discussion."),unfollowSuccessful:tt.a.t("standard","You are not following this discussion anymore."),userAsked:tt.a.t("standard","{user} asked {timeAgo}"),userAnswered:tt.a.t("standard","{user} answered {timeAgo}"),like:tt.a.t("app7020","like"),dislike:tt.a.t("app7020","dislike"),liked:tt.a.t("standard","You liked this answer"),disliked:tt.a.t("standard","You disliked this answer"),likesCount:tt.a.t("standard","{likesCount} likes"),dislikesCount:tt.a.t("standard","{dislikesCount} dislikes"),likesDislikesCount:tt.a.t("standard","{likesCount} likes and {dislikesCount} dislikes"),notAssignedChannel:{category:"standard",key:"Not assigned"}};var Qy=i("lsP1"),Ky=i("MjwL"),Jy=i("3axs"),Xy=i("2MH3"),Zy=i("IUM9"),ew=function(e){return e.COURSE_USER_WAITING_LIST="-2",e.COURSE_USER_CONFIRMED="-1",e.COURSE_USER_SUBSCRIBED="0",e.COURSE_USER_BEGIN="1",e.COURSE_USER_END="2",e.COURSE_USER_SUSPEND="3",e.COURSE_USER_OVERBOOKING="4",e}({});function tw(e,t){let i=Gy.MY_COURSES_AND_LEARNING_PLANS;switch(e.type){case"EsAgentLo":i=Gy.TRAINING_MATERIAL;break;case"EsAgentCourse":""!==e.is_user_enrolled&&t!==Gy.COURSE_CATALOG||(i=Gy.COURSE_CATALOG);break;case"EsAgentKnowledgeAsset":i=Gy.ASSETS;break;case"EsAgentQandA":i=Gy.QUESTIONS_AND_ANSWERS;break;case"EsAgentPlan":""!==e.is_user_enrolled&&t!==Gy.COURSE_CATALOG||(i=Gy.COURSE_CATALOG)}return i}function iw(e,t,i,s){const n=[];return e&&!i&&n.push(t?{value:"unfollow",label:s.instant(Wy.unfollow.query,{category:Wy.unfollow.category})}:{value:"follow",label:s.instant(Wy.follow.query,{category:Wy.follow.category})}),i&&n.push({value:"edit",label:s.instant(Wy.edit.query,{category:Wy.edit.category})}),(i||D.c.getInstance().isCurrentUserA(D.c.LEVEL_SUPERADMIN))&&n.push({value:"delete",label:s.instant(Wy.delete.query,{category:Wy.delete.category})}),n}var sw=i("k+4P");let nw=(()=>{class e{constructor(e,t,i){this._backendService=e,this._translationService=t,this._discoverMentionConfigService=i}getGlobalSearchTabsSummary(e){return this._backendService.request("/manage/v1/globalsearch","GET",{criteria:e,g:[1,2,4,5],adv:1}).pipe(Object(di.a)(e=>e.data.tabs.map(e=>function(e){const t=Hy[e.group];return t?{id:t,title:e.title,group:e.group,resultsCount:e.count,filters:qy(e),classroomFilters:Vy(e),webinarFilters:By(e)}:null}(e)).filter(e=>!!e)))}getTabData(e,t,i,s){return this._backendService.request("/manage/v1/globalsearch/search","GET",function(e,t,i,s){var n;return(n=i.filters).duration&&Array.isArray(n.duration)&&(n.duration_from_seconds=n.duration[0],n.duration_to_seconds=n.duration[1],delete n.duration),Object.assign({adv:1,g:$y(t),sort_attr:i.sort.split(" ")[0],sort_dir:i.sort.split(" ")[1],criteria:e,page_size:24,from:s},i.filters)}(e,t,i,s)).pipe(Object(di.a)(e=>({otherResultsAvailable:!e.data.end_of_results,itemsCount:e.data.grand_total,nextResultIndex:e.data.end_of_results?0:e.data.next_from,results:e.data.results.map(e=>function(e,t,i){var s,n,a,o,r,c,l,d,u,h,p,g,m,b,f,_,v;const y={resultType:tw(e,t)};switch(y.resultType){case Gy.MY_COURSES_AND_LEARNING_PLANS:y.resultDetailsMyCoursesAndLearningPlans=Object(Jy.b)({id:e.id,type:e.course_type,name:e.title,slug:"",imageUrl:e.item_thumbnail,level:e.other_fields.level,status:e.other_fields.status_label?e.other_fields.status_label.toLowerCase():e.other_fields.status_id===ew.COURSE_USER_WAITING_LIST||e.other_fields.status_id===ew.COURSE_USER_CONFIRMED?"waiting":"",hidden:e.hidden,outdated:e.outdated&&e.outdated.total_users,canEnter:e.other_fields.can_enter,canEnterReason:e.other_fields.can_enter_reason,url:e.uri,languageCode:e.other_fields.language,rating:"disabled"!==e.rating_option?e.rating:null,actions:[],enrollBeginDate:"",enrollEndDate:e.other_fields.expiration_date,courseBeginDate:"",courseEndDate:"",softDeadline:!1,deeplinkingHash:"",deeplinkingGeneratedBy:0,duration:e.duration,itemsCount:e.other_fields.courses_count||e.number_of_courses,highlight:{title:(null===(s=e.highlight)||void 0===s?void 0:s.title)?e.highlight.title[0]:"",content:(null===(n=e.highlight)||void 0===n?void 0:n.description)?e.highlight.description[0]:"",tags:(null===(a=e.highlight)||void 0===a?void 0:a.tags)?e.highlight.tags:"",shortDescription:(null===(o=e.highlight)||void 0===o?void 0:o.short_description)?e.highlight.short_description[0]:""}},!1,i);break;case Gy.COURSE_CATALOG:y.resultDetailsCatalog=Object(Ky.a)({id:e.external_course_id||+e.item_id,price:e.is_selling&&e.item_price?e.item_price:"0",ecommerce:null!==(r=null==e?void 0:e.ecommerce)&&void 0!==r?r:null,discountedPrice:e.is_affiliate&&e.item_price>0?e.affiliate_price:"",title:e.title||e.item_name,description:e.subtitle||e.item_description,canEnter:e.other_fields.can_enter,url:e.uri,language:e.other_fields.language_label,languageCode:e.other_fields.language,type:e.course_type||"elearning",rating:e.item_rating_option&&e.item_rating_option===bc.a.DISABLED?0:e.item_rating,totalDuration:e.total_duration,duration:e.duration,new:e.provider_id?"subscribed"===e.enrollment_status:!!+e.is_new,itemsCount:e.number_of_courses,imageUrl:e.thumbnail||e.item_thumbnail,moderated:1==+e.item_can_enroll&&!+e.item_price,enrolled:e.provider_id?"not enrolled"!==e.enrollment_status:!!+e.is_user_enrolled,subscribed:!!+e.is_user_subscribed,external:!!e.external_course_id,externalProviderID:0,slug:e.provider_id?e.slug_name:e.item_slug,highlight:{title:(null===(c=e.highlight)||void 0===c?void 0:c.title)?e.highlight.title[0]:"",content:(null===(l=e.highlight)||void 0===l?void 0:l.description)?e.highlight.description[0]:"",tags:(null===(d=e.highlight)||void 0===d?void 0:d.tags)?e.highlight.tags:"",shortDescription:(null===(u=e.highlight)||void 0===u?void 0:u.short_description)?e.highlight.short_description[0]:""}},i);break;case Gy.TRAINING_MATERIAL:const t=new yb.b(e.other_fields.lo_type,new yb.a(e.uri,e.title));y.resultDetailsTrainingMaterial=Object(Zy.b)({id:e.id,title:e.title,type:t.variant.title,url:e.uri,imageUrl:e.image_url,courseName:e.other_fields.course_title,courseUrl:e.other_fields.course_url,canEnter:e.other_fields.can_enter,highlight:{title:(null===(h=e.highlight)||void 0===h?void 0:h.title)?e.highlight.title[0]:"",content:(null===(p=e.highlight)||void 0===p?void 0:p.description)?e.highlight.description[0]:"",tags:(null===(g=e.highlight)||void 0===g?void 0:g.tags)?e.highlight.tags:"",shortDescription:(null===(m=e.highlight)||void 0===m?void 0:m.short_description)?e.highlight.short_description[0]:""},lo_type:Zy.a[e.other_fields.lo_type]||Zy.a.file});break;case Gy.ASSETS:const w=new Zt.a(e.created),C=(new Zt.a).getDifference(w,"h"),S=e.is_error||e.is_loading&&C>=12;y.resultDetailsAsset=Object(Xy.a)({id:e.id,title:e.title,type:e.other_fields.type,url:e.uri,imageUrl:e.image_url,author:e.owner?e.owner.full_name:"",publishDate:e.other_fields.publish_date,created:e.created?e.created:null,views:e.other_fields.views,rating:"disabled"!==e.rating_option?e.rating:null,hidden:e.hidden,outdated:e.outdated&&e.outdated.total_users,authorID:e.owner?e.owner.id:"",authorUUID:e.owner?e.owner.uuid||e.owner.id:"",authorInitials:e.owner?e.owner.short_name:"",authorAvatarUrl:e.owner?e.owner.avatar:"",new:e.is_new,loading:e.is_loading,loadingError:S,watched:e.other_fields.is_watched,status:e.other_fields.status,itemsCount:e.other_fields.assets_count,actions:[],duration:e.duration,highlight:{title:(null===(b=e.highlight)||void 0===b?void 0:b.title)?e.highlight.title[0]:"",content:(null===(f=e.highlight)||void 0===f?void 0:f.description)?e.highlight.description[0]:"",tags:(null===(_=e.highlight)||void 0===_?void 0:_.tags)?e.highlight.tags:"",shortDescription:(null===(v=e.highlight)||void 0===v?void 0:v.short_description)?e.highlight.short_description[0]:""}});break;case Gy.QUESTIONS_AND_ANSWERS:y.resultDetailsQuestion={hasRelatedContent:e.metadata.is_related,totalAnswersCount:e.metadata.total_items,following:e.metadata.is_follow,relatedContent:{id:e.related?e.related.id:0,url:e.related?e.related.url:"",title:e.related?e.related.name||e.related.title:"",channelID:e.related?e.related.channel_id:0,type:e.metadata.related_kind},url:e.uri,question:{id:e.id,author:{id:e.owner.id,shortName:e.owner.short_name.slice(0,2),avatarURL:e.owner.avatar,isExpert:!1,fullName:e.owner.full_name},message:e.title,creationTimeRaw:e.metadata.created_at,creationTime:new Qy.a(new Zt.a(e.metadata.created_at).getDifference(new Zt.a)).toWordsPast(),actionButtonTooltip:tt.a.t("standard","Actions"),actionButtonOptions:iw(!0,e.metadata.is_follow,e.owner.id===D.c.getInstance().id,i)}},e.metadata.have_best?y.resultDetailsQuestion.bestAnswer={id:e.best.id,author:{id:e.best.owner.id,shortName:e.best.owner.short_name.slice(0,2),avatarURL:e.best.owner.avatar,isExpert:!1,fullName:e.best.owner.full_name},message:e.best.title,reactions:{likes:e.best.rating.likes,dislikes:e.best.rating.dislikes,liked:!1,disliked:!1,likeEnabled:e.best.owner.id!==D.c.getInstance().id,dislikeEnabled:e.best.owner.id!==D.c.getInstance().id},creationTimeRaw:e.best.created_at,creationTime:new Qy.a(new Zt.a(e.best.created_at).getDifference(new Zt.a)).toWordsPast(),actionButtonTooltip:tt.a.t("standard","Actions"),actionButtonOptions:iw(!1,!1,e.best.owner.id===D.c.getInstance().id,i)}:e.metadata.have_last&&(y.resultDetailsQuestion.lastAnswer={id:e.last.id,author:{id:e.last.owner.id,shortName:e.last.owner.short_name.slice(0,2),avatarURL:e.last.owner.avatar,isExpert:!1,fullName:e.last.owner.full_name},message:e.last.title,reactions:{likes:e.last.rating.likes,dislikes:e.last.rating.dislikes,liked:!1,disliked:!1,likeEnabled:e.last.owner.id!==D.c.getInstance().id,dislikeEnabled:e.last.owner.id!==D.c.getInstance().id},creationTimeRaw:e.last.created_at,creationTime:new Qy.a(new Zt.a(e.last.created_at).getDifference(new Zt.a)).toWordsPast(),actionButtonTooltip:tt.a.t("standard","Actions"),actionButtonOptions:iw(!1,!1,e.last.owner.id===D.c.getInstance().id,i)})}return y}(e,t,this._translationService))})))}toggleQuestionFollowingStatus(e){return new a.a(t=>{this._backendService.request(`/share/v1/questions/${e.question.id}/follow`,e.following?"DELETE":"POST").subscribe(()=>{e.following=!e.following,e.question.actionButtonOptions=iw(!0,e.following,e.question.author.id===D.c.getInstance().id,this._translationService),t.next(!0),t.complete()},()=>{t.next(!1),t.complete()})})}likeAnswer(e){return new a.a(t=>{e.reactions&&!e.reactions.liked&&this._backendService.request(`/share/v1/answers/${e.id}/evaluate`,"PUT").subscribe(i=>{e.reactions&&(e.reactions.liked=!0,e.reactions.disliked=!1,e.reactions.likeEnabled=!1,e.reactions.dislikeEnabled=!0,i.data&&(e.reactions.likes=i.data.likes,e.reactions.dislikes=i.data.dislikes)),t.next(!0),t.complete()},()=>{e.reactions&&(e.reactions.liked=!0,e.reactions.disliked=!1,e.reactions.likeEnabled=!1,e.reactions.dislikeEnabled=!0),t.next(!1),t.complete()})})}dislikeAnswer(e){return new a.a(t=>{e.reactions&&!e.reactions.disliked&&this._backendService.request(`/share/v1/answers/${e.id}/evaluate`,"DELETE").subscribe(i=>{e.reactions&&(e.reactions.liked=!1,e.reactions.disliked=!0,e.reactions.likeEnabled=!0,e.reactions.dislikeEnabled=!1,i.data&&(e.reactions.likes=i.data.likes,e.reactions.dislikes=i.data.dislikes)),t.next(!0),t.complete()},()=>{e.reactions&&(e.reactions.liked=!1,e.reactions.disliked=!0,e.reactions.likeEnabled=!0,e.reactions.dislikeEnabled=!1),t.next(!1),t.complete()})})}editMessage(e,t,i){return new a.a(s=>{var n;const a=this._discoverMentionConfigService.convertMessageForSaving(i);this._backendService.request("question"===e?`/share/v1/questions/${t.id}`:`/share/v1/answers/${t.id}`,"PUT",Object.assign(Object.assign(Object.assign({},"question"===e&&{title:a.message}),"answer"===e&&{content:a.message}),(null===(n=a.payload)||void 0===n?void 0:n.length)&&{mentions:a.payload})).subscribe(()=>{t.message=a.message,s.next(!0),s.complete()},()=>{s.next(!1),s.complete()})})}deleteMessage(e,t){return new a.a(i=>{this._backendService.request("question"===e?`/share/v1/questions/${t}`:`/share/v1/answers/${t}`,"DELETE").subscribe(()=>{i.next(!0),i.complete()},()=>{i.next(!1),i.complete()})})}}return e.\u0275fac=function(t){return new(t||e)(c.oc(I.a),c.oc(u.h),c.oc(sw.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var aw=i("dpW2"),ow=i("juNq"),rw=i("WCat"),cw=i("L24Q"),lw=i("a4yA"),dw=i("knll"),uw=i("rnoZ");function hw(e,t){if(1&e){const e=c.lc();c.kc(0,"div",3),c.gd(1),c.xc(2,"t"),c.kc(3,"dcb-ui-button-link",4),c.sc("trigger",function(){c.Vc(e);const t=c.wc();return t.goToQuestionPage(t.question.relatedContent.url)}),c.gd(4),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(1),c.id(" ",c.yc(2,3,e.dictionary.relatedTo),": "),c.Mb(2),c.Dc("role","link"),c.Mb(1),c.hd(e.question.relatedContent.title)}}function pw(e,t){if(1&e&&(c.kc(0,"div",12),c.xc(1,"t"),c.xc(2,"t"),c.fc(3,"dcb-ui-icon",13),c.jc()),2&e){const e=c.wc(2);c.Dc("uiTooltip",c.yc(1,2,e.dictionary.following))("uiAriaLabel",c.yc(2,4,e.dictionary.following))}}function gw(e,t){if(1&e&&(c.kc(0,"dcb-ui-button-dropdown-option",14),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=t.$implicit;c.Dc("value",e.value),c.Mb(1),c.id(" ",c.yc(2,2,e.label)," ")}}function mw(e,t){if(1&e&&(c.kc(0,"dcb-ui-button-dropdown-option",14),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=t.$implicit;c.Dc("value",e.value),c.Mb(1),c.id(" ",c.yc(2,2,e.label)," ")}}const bw=function(e,t){return{user:e,timeAgo:t}},fw=function(e,t){return{likesCount:e,dislikesCount:t}},_w=function(e){return{likesCount:e}},vw=function(e){return{dislikesCount:e}};function yw(e,t){if(1&e){const e=c.lc();c.kc(0,"dcb-ui-thread-leaf"),c.kc(1,"dcb-ui-message",15),c.sc("like",function(){c.Vc(e);const t=c.wc(2);return t.onLikeAnswer(t.question.bestAnswer)})("dislike",function(){c.Vc(e);const t=c.wc(2);return t.onDislikeAnswer(t.question.bestAnswer)}),c.xc(2,"discoverMention"),c.xc(3,"t"),c.xc(4,"HDateTime"),c.xc(5,"t"),c.xc(6,"t"),c.xc(7,"t"),c.xc(8,"t"),c.xc(9,"t"),c.xc(10,"t"),c.xc(11,"t"),c.xc(12,"t"),c.kc(13,"dcb-ui-message-aside"),c.kc(14,"dcb-ui-button-dropdown",8),c.sc("selectOption",function(t){c.Vc(e);const i=c.wc(2);return i.onMessageAction(t,i.question.bestAnswer,!1)}),c.xc(15,"t"),c.ed(16,mw,3,4,"dcb-ui-button-dropdown-option",9),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("message",c.zc(2,27,e.question.bestAnswer.message,e.question.question.mentions))("title",e.question.bestAnswer.author.fullName)("titleActionText",c.yc(3,30,e.dictionary.answered))("time",e.question.bestAnswer.creationTime)("date",c.yc(4,32,e.question.bestAnswer.creationTimeRaw))("showLikeButton",!0)("showDislikeButton",!0)("likes",e.question.bestAnswer.reactions.likes)("dislikes",e.question.bestAnswer.reactions.dislikes)("likeActive",e.question.bestAnswer.reactions.liked)("dislikeActive",e.question.bestAnswer.reactions.disliked)("likeEnabled",e.question.bestAnswer.reactions.likeEnabled)("dislikeEnabled",e.question.bestAnswer.reactions.dislikeEnabled)("avatarImageUrl",e.question.bestAnswer.author.avatarURL)("avatarText",e.question.bestAnswer.author.avatarURL?"":e.question.bestAnswer.author.shortName)("avatarIcon",e.question.bestAnswer.author.avatarURL||e.question.bestAnswer.author.shortName?"":"user")("ariaLabelHeaderMessage",c.zc(5,34,e.dictionary.userAnswered,c.Jc(56,bw,e.question.bestAnswer.author.fullName,e.question.bestAnswer.creationTime)))("ariaLabelLikeNotActive",c.yc(6,37,e.dictionary.like))("ariaLabelLikeActive",c.yc(7,39,e.dictionary.liked))("ariaLabelDislikeNotActive",c.yc(8,41,e.dictionary.dislike))("ariaLabelDislikeActive",c.yc(9,43,e.dictionary.disliked))("ariaLabelNumberOfLikeAndDislikeActive",c.zc(10,45,e.dictionary.likesDislikesCount,c.Jc(59,fw,e.question.bestAnswer.reactions.likes,e.question.bestAnswer.reactions.dislikes)))("ariaLabelNumberOfLikes",c.zc(11,48,e.dictionary.likesCount,c.Ic(62,_w,e.question.bestAnswer.reactions.likes)))("ariaLabelNumberOfDislikes",c.zc(12,51,e.dictionary.dislikesCount,c.Ic(64,vw,e.question.bestAnswer.reactions.dislikes))),c.Mb(13),c.Dc("selectable",!1)("tooltipLabel",c.yc(15,54,e.dictionary.messageActions)),c.Mb(2),c.Dc("ngForOf",e.question.bestAnswer.actionButtonOptions)}}function ww(e,t){if(1&e&&(c.kc(0,"dcb-ui-button-dropdown-option",14),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=t.$implicit;c.Dc("value",e.value),c.Mb(1),c.id(" ",c.yc(2,2,e.label)," ")}}function Cw(e,t){if(1&e){const e=c.lc();c.kc(0,"dcb-ui-thread-leaf"),c.kc(1,"dcb-ui-message",15),c.sc("like",function(){c.Vc(e);const t=c.wc(2);return t.onLikeAnswer(t.question.lastAnswer)})("dislike",function(){c.Vc(e);const t=c.wc(2);return t.onDislikeAnswer(t.question.lastAnswer)}),c.xc(2,"discoverMention"),c.xc(3,"t"),c.xc(4,"HDateTime"),c.xc(5,"t"),c.xc(6,"t"),c.xc(7,"t"),c.xc(8,"t"),c.xc(9,"t"),c.xc(10,"t"),c.xc(11,"t"),c.xc(12,"t"),c.kc(13,"dcb-ui-message-aside"),c.kc(14,"dcb-ui-button-dropdown",8),c.sc("selectOption",function(t){c.Vc(e);const i=c.wc(2);return i.onMessageAction(t,i.question.lastAnswer,!1)}),c.xc(15,"t"),c.ed(16,ww,3,4,"dcb-ui-button-dropdown-option",9),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("message",c.zc(2,27,e.question.lastAnswer.message,e.question.question.mentions))("title",e.question.lastAnswer.author.fullName)("titleActionText",c.yc(3,30,e.dictionary.answered))("time",e.question.lastAnswer.creationTime)("date",c.yc(4,32,e.question.lastAnswer.creationTimeRaw))("showLikeButton",!0)("showDislikeButton",!0)("likes",e.question.lastAnswer.reactions.likes)("dislikes",e.question.lastAnswer.reactions.dislikes)("likeActive",e.question.lastAnswer.reactions.liked)("dislikeActive",e.question.lastAnswer.reactions.disliked)("likeEnabled",e.question.lastAnswer.reactions.likeEnabled)("dislikeEnabled",e.question.lastAnswer.reactions.dislikeEnabled)("avatarImageUrl",e.question.lastAnswer.author.avatarURL)("avatarText",e.question.lastAnswer.author.avatarURL?"":e.question.lastAnswer.author.shortName)("avatarIcon",e.question.lastAnswer.author.avatarURL||e.question.lastAnswer.author.shortName?"":"user")("ariaLabelHeaderMessage",c.zc(5,34,e.dictionary.userAnswered,c.Jc(56,bw,e.question.lastAnswer.author.fullName,e.question.lastAnswer.creationTime)))("ariaLabelLikeNotActive",c.yc(6,37,e.dictionary.like))("ariaLabelLikeActive",c.yc(7,39,e.dictionary.liked))("ariaLabelDislikeNotActive",c.yc(8,41,e.dictionary.dislike))("ariaLabelDislikeActive",c.yc(9,43,e.dictionary.disliked))("ariaLabelNumberOfLikeAndDislikeActive",c.zc(10,45,e.dictionary.likesDislikesCount,c.Jc(59,fw,e.question.lastAnswer.reactions.likes,e.question.lastAnswer.reactions.dislikes)))("ariaLabelNumberOfLikes",c.zc(11,48,e.dictionary.likesCount,c.Ic(62,_w,e.question.lastAnswer.reactions.likes)))("ariaLabelNumberOfDislikes",c.zc(12,51,e.dictionary.dislikesCount,c.Ic(64,vw,e.question.lastAnswer.reactions.dislikes))),c.Mb(13),c.Dc("selectable",!1)("tooltipLabel",c.yc(15,54,e.dictionary.messageActions)),c.Mb(2),c.Dc("ngForOf",e.question.lastAnswer.actionButtonOptions)}}const Sw=function(e){return{moreAnswersCount:e}};function kw(e,t){if(1&e){const e=c.lc();c.kc(0,"div",16),c.kc(1,"dcb-ui-button-text",17),c.sc("trigger",function(){c.Vc(e);const t=c.wc(2);return t.goToQuestionPage(t.question.url)}),c.xc(2,"t"),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Mb(1),c.Dc("label",c.zc(2,2,e.dictionary.moreAnswers,c.Ic(5,Sw,e.question.totalAnswersCount-1)))("role","link")}}function Tw(e,t){if(1&e){const e=c.lc();c.kc(0,"div",5),c.kc(1,"dcb-ui-thread"),c.kc(2,"dcb-ui-thread-root"),c.kc(3,"dcb-ui-message",6),c.xc(4,"discoverMention"),c.xc(5,"t"),c.xc(6,"t"),c.xc(7,"HDateTime"),c.kc(8,"dcb-ui-message-title"),c.ed(9,pw,4,6,"div",7),c.gd(10),c.jc(),c.kc(11,"dcb-ui-message-aside"),c.kc(12,"dcb-ui-button-dropdown",8),c.sc("selectOption",function(t){c.Vc(e);const i=c.wc();return i.onMessageAction(t,i.question.question,!0)}),c.xc(13,"t"),c.ed(14,gw,3,4,"dcb-ui-button-dropdown-option",9),c.jc(),c.jc(),c.jc(),c.jc(),c.ed(15,yw,17,66,"dcb-ui-thread-leaf",10),c.ed(16,Cw,17,66,"dcb-ui-thread-leaf",10),c.jc(),c.ed(17,kw,3,7,"div",11),c.jc()}if(2&e){const e=c.wc();c.Mb(3),c.Dc("message",c.zc(4,16,e.question.question.message,e.question.question.mentions))("avatarImageUrl",e.question.question.author.avatarURL)("avatarText",e.question.question.author.avatarURL?"":e.question.question.author.shortName)("avatarIcon",e.question.question.author.avatarURL||e.question.question.author.shortName?"":"user")("titleActionText",c.yc(5,19,e.dictionary.asked))("ariaLabelHeaderMessage",c.zc(6,21,e.dictionary.userAsked,c.Jc(28,bw,e.question.question.author.fullName,e.question.question.creationTime)))("time",e.question.question.creationTime)("date",c.yc(7,24,e.question.question.creationTimeRaw)),c.Mb(6),c.Dc("ngIf",e.question.following),c.Mb(1),c.id(" ",e.question.question.author.fullName," "),c.Mb(2),c.Dc("selectable",!1)("tooltipLabel",c.yc(13,26,e.dictionary.messageActions)),c.Mb(2),c.Dc("ngForOf",e.question.question.actionButtonOptions),c.Mb(1),c.Dc("ngIf",e.question.bestAnswer),c.Mb(1),c.Dc("ngIf",!e.question.bestAnswer&&e.question.lastAnswer),c.Mb(1),c.Dc("ngIf",e.question.totalAnswersCount>1)}}function Iw(e,t){if(1&e&&c.fc(0,"rich-textarea",26),2&e){const e=c.wc(2);c.Dc("preset",e.richTextareaPreset.BASE)("inputFormControl",e.richTextareaFormControl)("tributeCollection",null==e.discoverMentionConfigService||null==e.discoverMentionConfigService.config?null:e.discoverMentionConfigService.config.options)}}function xw(e,t){if(1&e){const e=c.lc();c.kc(0,"div",18),c.kc(1,"div",19),c.fc(2,"dcb-ui-avatar",20),c.kc(3,"span",21),c.gd(4),c.jc(),c.jc(),c.ed(5,Iw,1,3,"rich-textarea",22),c.kc(6,"div",23),c.kc(7,"dcb-ui-button-text",24),c.sc("trigger",function(){return c.Vc(e),c.wc().onSaveMessageChanges()}),c.xc(8,"t"),c.jc(),c.kc(9,"dcb-ui-button-text",25),c.sc("trigger",function(){return c.Vc(e),c.wc().onCancelEditMessage()}),c.xc(10,"t"),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(2),c.Dc("imageUrl",e.currentUser.avatarURL)("text",e.currentUser.avatarURL?"":e.currentUser.initials),c.Mb(2),c.id(" ",e.currentUser.fullName," "),c.Mb(1),c.Dc("ngIf",null==e.discoverMentionConfigService?null:e.discoverMentionConfigService.isConfigured),c.Mb(2),c.Dc("label",c.yc(8,6,e.dictionary.saveChanges)),c.Mb(2),c.Dc("label",c.yc(10,8,e.dictionary.cancel))}}let Dw=(()=>{class e{constructor(e,t,i,s,n){this._router=e,this._changeDetectorRef=t,this._docLayoutService=i,this.discoverMentionConfigService=s,this._lrnGlobalSearchService=n,this.deleteQuestion=new c.q,this.dictionary=Wy,this.editMode=!1,this.editModeContentType="question",this.richTextareaPreset=lw.c,this.richTextareaFormControl=new Ze.e("",[Ze.x.required]),this.currentUser={fullName:D.c.getInstance().getFullName(),initials:D.c.getInstance().user_initials,avatarURL:D.c.getInstance().avatar_url}}ngOnInit(){this.discoverMentionConfigService.setConfig(Object.assign(Object.assign(Object.assign({},!!this.question.relatedContent.id&&{asset_id:this.question.relatedContent.id}),"coach_share"===this.question.relatedContent.type&&{asset_id:this.question.relatedContent.id}),"channel"===this.question.relatedContent.type&&{channel_id:this.question.relatedContent.channelID}))}onMessageAction(e,t,i){switch(e){case"edit":this._editMessage(t,i);break;case"delete":this._deleteMessage(t,i);break;case"follow":case"unfollow":this._toggleFollowingStatus()}}onCancelEditMessage(){this.editMode=!1,this.editModeContent=null,this.richTextareaFormControl.setValue(""),this._changeDetectorRef.detectChanges()}onSaveMessageChanges(){this._lrnGlobalSearchService.editMessage(this.editModeContentType,this.editModeContent,this.richTextareaFormControl.value).subscribe(e=>{e?(this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.changesSavedSuccessfully}),this.onCancelEditMessage()):this._docLayoutService.toast.showToast({type:"error",message:this.dictionary.changesNotSaved})})}onLikeAnswer(e){this._lrnGlobalSearchService.likeAnswer(e).subscribe(()=>{this._changeDetectorRef.detectChanges()})}onDislikeAnswer(e){this._lrnGlobalSearchService.dislikeAnswer(e).subscribe(()=>{this._changeDetectorRef.detectChanges()})}goToQuestionPage(e){this._router.navigate([e])}_editMessage(e,t){this.richTextareaFormControl.setValue((new dw.a).transform(e.message,e.mentions||[])),this.editMode=!0,this.editModeContentType=t?"question":"answer",this.editModeContent=e,this._changeDetectorRef.detectChanges()}_deleteMessage(e,t){this._docLayoutService.dialog.showCommonDialog({title:this.dictionary.deleteQuestion,content:this.dictionary.deleteQuestionConfirmation,actions:[{id:"cancel",slot:"end",label:this.dictionary.cancel,type:"neutral"},{id:"confirm",slot:"end",label:this.dictionary.confirm,type:"negative"}]}).subscribe(i=>{"cancel"===i.actionID?i.actionSuccess.next(!0):this._lrnGlobalSearchService.deleteMessage(t?"question":"answer",e.id).subscribe(s=>{var n,a;s?(t?(this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.questionDeleted}),this.deleteQuestion.emit(e.id)):(this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.answerDeleted}),e.id===(null===(n=this.question.lastAnswer)||void 0===n?void 0:n.id)&&delete this.question.lastAnswer,e.id===(null===(a=this.question.bestAnswer)||void 0===a?void 0:a.id)&&delete this.question.bestAnswer,this._changeDetectorRef.detectChanges()),i.actionSuccess.next(!0)):(this._docLayoutService.toast.showToast({type:"error",message:this.dictionary.changesNotSaved}),i.actionSuccess.next(!1))})})}_toggleFollowingStatus(){this._lrnGlobalSearchService.toggleQuestionFollowingStatus(this.question).subscribe(e=>{this._docLayoutService.toast.showToast(e?this.question.following?{type:"success",message:this.dictionary.followSuccessful}:{type:"success",message:this.dictionary.unfollowSuccessful}:{type:"error",message:this.dictionary.changesNotSaved}),this._changeDetectorRef.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.h),c.ec(c.i),c.ec(j.a),c.ec(sw.a),c.ec(nw))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-global-search-question"]],inputs:{question:"question"},outputs:{deleteQuestion:"deleteQuestion"},decls:3,vars:3,consts:[["class","global-search-question-related ui-typography-subtitle ui-color-typography-secondary",4,"ngIf"],["class","global-search-question-view",4,"ngIf"],["class","global-search-question-edit",4,"ngIf"],[1,"global-search-question-related","ui-typography-subtitle","ui-color-typography-secondary"],[3,"role","trigger"],[1,"global-search-question-view"],[3,"message","avatarImageUrl","avatarText","avatarIcon","titleActionText","ariaLabelHeaderMessage","time","date"],["class","global-search-question-follow-icon","role","presentation",3,"uiTooltip","uiAriaLabel",4,"ngIf"],["triggerType","icon","iconName","more-horizontal","tooltipPosition","above","menuHorizontalAlignment","before","menuVerticalAlignment","below",3,"selectable","tooltipLabel","selectOption"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","global-search-question-actions",4,"ngIf"],["role","presentation",1,"global-search-question-follow-icon",3,"uiTooltip","uiAriaLabel"],["name","eye","size","xs"],[3,"value"],[3,"message","title","titleActionText","time","date","showLikeButton","showDislikeButton","likes","dislikes","likeActive","dislikeActive","likeEnabled","dislikeEnabled","avatarImageUrl","avatarText","avatarIcon","ariaLabelHeaderMessage","ariaLabelLikeNotActive","ariaLabelLikeActive","ariaLabelDislikeNotActive","ariaLabelDislikeActive","ariaLabelNumberOfLikeAndDislikeActive","ariaLabelNumberOfLikes","ariaLabelNumberOfDislikes","like","dislike"],[1,"global-search-question-actions"],["color","accent",3,"label","role","trigger"],[1,"global-search-question-edit"],[1,"question-edit-author"],["size","sm",3,"uiAriaHidden","imageUrl","text"],[1,"question-edit-author-name","ui-typography-heading-5"],[3,"preset","inputFormControl","tributeCollection",4,"ngIf"],[1,"global-search-question-actions","global-search-question-edit-actions"],["color","accent",3,"label","trigger"],["color","neutral",3,"label","trigger"],[3,"preset","inputFormControl","tributeCollection"]],template:function(e,t){1&e&&(c.ed(0,hw,5,5,"div",0),c.ed(1,Tw,18,31,"div",1),c.ed(2,xw,11,10,"div",2)),2&e&&(c.Dc("ngIf",t.question.hasRelatedContent),c.Mb(1),c.Dc("ngIf",!t.editMode),c.Mb(1),c.Dc("ngIf",t.editMode))},directives:[m.p,b.M,b.df,b.gf,b.zd,b.Bd,b.zf,b.E,m.o,b.hf,b.k,b.lc,b.H,b.ef,b.U,b.o,b.j,uw.a],pipes:[M.b,dw.a,ei.a],styles:["lrn-global-search-question{display:block;padding:var(--ui-spacing-sm);box-sizing:border-box;background-color:var(--ui-color-layout-surface)}lrn-global-search-question .global-search-question-related{margin-bottom:var(--ui-spacing-sm)}lrn-global-search-question .global-search-question-follow-icon{-webkit-margin-end:var(--ui-spacing-tiny);margin-inline-end:var(--ui-spacing-tiny)}lrn-global-search-question .global-search-question-actions{margin-top:var(--ui-spacing-sm)}lrn-global-search-question .global-search-question-edit-actions{display:flex;flex-direction:row-reverse}lrn-global-search-question .question-edit-author{display:flex;flex-direction:row;align-items:center;margin-bottom:var(--ui-spacing-xs)}lrn-global-search-question .question-edit-author span{margin:0 var(--ui-spacing-xxs)}"],encapsulation:2,changeDetection:0}),e})();const Ow=["filtersPanel"],Ew=["globalSearchTab"];function Aw(e,t){if(1&e&&c.fc(0,"doc-data-browser-filter-datetime",20),2&e){const e=c.wc().$implicit,t=c.wc(3);c.Dc("label",e.title)("key",e.code)("value",t.defaultFiltersValues[e.code]||"")}}function Pw(e,t){if(1&e&&c.fc(0,"ui-data-browser-filter-single-selection",21),2&e){const e=c.wc().$implicit,t=c.wc(3);c.Dc("options",e.options)("label",e.title)("key",e.code)("value",t.defaultFiltersValues[e.code]||"")}}const Mw=function(){return{category:"widgets"}},Lw=function(){return[]};function jw(e,t){if(1&e&&(c.fc(0,"ui-data-browser-filter-multiple-selection",22),c.xc(1,"t"),c.xc(2,"t")),2&e){const e=c.wc().$implicit,t=c.wc(3);c.Dc("options",e.options)("label",e.title)("searchPlaceholder",c.zc(1,6,"Search for...",c.Hc(11,Mw)))("key",e.code)("value",t.defaultFiltersValues[e.code]||c.Hc(12,Lw))("showMoreLabel",c.yc(2,9,t.dictionary.showMoreLabel)+" ({optionsCount})")}}function Rw(e,t){if(1&e&&(c.fc(0,"ui-data-browser-filter-duration",23),c.xc(1,"t"),c.xc(2,"t"),c.xc(3,"t")),2&e){const e=c.wc().$implicit,t=c.wc(3);c.Dc("key",e.code)("label",c.yc(1,10,t.dictionary.durationFilterTitle))("value",t.defaultFiltersValues[e.code]||"all")("allDurationsLabel",c.yc(2,12,t.dictionary.allDuration))("customDurationLabel",c.yc(3,14,t.dictionary.customDuration))("minDuration",null==e.durationRange?null:e.durationRange.min)("maxDuration",null==e.durationRange?null:e.durationRange.max)("minSelectedDuration",t.defaultFiltersValues[e.code]?t.defaultFiltersValues[e.code][0]:null)("maxSelectedDuration",t.defaultFiltersValues[e.code]?t.defaultFiltersValues[e.code][1]:null)("step",60)}}function Fw(e,t){if(1&e&&(c.ic(0),c.ed(1,Aw,1,3,"doc-data-browser-filter-datetime",16),c.ed(2,Pw,1,4,"ui-data-browser-filter-single-selection",17),c.ed(3,jw,3,13,"ui-data-browser-filter-multiple-selection",18),c.ed(4,Rw,4,16,"ui-data-browser-filter-duration",19),c.hc()),2&e){const e=t.$implicit;c.Mb(1),c.Dc("ngIf","timeframe"===e.type),c.Mb(1),c.Dc("ngIf","single-selection"===e.type),c.Mb(1),c.Dc("ngIf","multiple-selection"===e.type),c.Mb(1),c.Dc("ngIf","duration"===e.type&&(null==e.durationRange?null:e.durationRange.max)>0)}}function Nw(e,t){if(1&e&&c.fc(0,"doc-data-browser-filter-datetime",20),2&e){const e=c.wc().$implicit,t=c.wc(4);c.Dc("label",e.title)("key",e.code)("value",t.defaultFiltersValues[e.code]||"")}}function Uw(e,t){if(1&e&&c.fc(0,"ui-data-browser-filter-single-selection",21),2&e){const e=c.wc().$implicit,t=c.wc(4);c.Dc("options",e.options)("label",e.title)("key",e.code)("value",t.defaultFiltersValues[e.code]||"")}}function zw(e,t){if(1&e&&(c.fc(0,"ui-data-browser-filter-multiple-selection",22),c.xc(1,"t"),c.xc(2,"t")),2&e){const e=c.wc().$implicit,t=c.wc(4);c.Dc("options",e.options)("label",e.title)("searchPlaceholder",c.zc(1,6,"Search for...",c.Hc(11,Mw)))("key",e.code)("value",t.defaultFiltersValues[e.code]||c.Hc(12,Lw))("showMoreLabel",c.yc(2,9,t.dictionary.showMoreLabel)+" ({optionsCount})")}}function qw(e,t){if(1&e&&(c.fc(0,"ui-data-browser-filter-duration",23),c.xc(1,"t"),c.xc(2,"t"),c.xc(3,"t")),2&e){const e=c.wc().$implicit,t=c.wc(4);c.Dc("key",e.code)("label",c.yc(1,10,t.dictionary.durationFilterTitle))("value",t.defaultFiltersValues[e.code]||"all")("allDurationsLabel",c.yc(2,12,t.dictionary.allDuration))("customDurationLabel",c.yc(3,14,t.dictionary.customDuration))("minDuration",null==e.durationRange?null:e.durationRange.min)("maxDuration",null==e.durationRange?null:e.durationRange.max)("minSelectedDuration",t.defaultFiltersValues[e.code]?t.defaultFiltersValues[e.code][0]:null)("maxSelectedDuration",t.defaultFiltersValues[e.code]?t.defaultFiltersValues[e.code][1]:null)("step",60)}}function Vw(e,t){if(1&e&&(c.ic(0),c.ed(1,Nw,1,3,"doc-data-browser-filter-datetime",16),c.ed(2,Uw,1,4,"ui-data-browser-filter-single-selection",17),c.ed(3,zw,3,13,"ui-data-browser-filter-multiple-selection",18),c.ed(4,qw,4,16,"ui-data-browser-filter-duration",19),c.hc()),2&e){const e=t.$implicit;c.Mb(1),c.Dc("ngIf","timeframe"===e.type),c.Mb(1),c.Dc("ngIf","single-selection"===e.type),c.Mb(1),c.Dc("ngIf","multiple-selection"===e.type),c.Mb(1),c.Dc("ngIf","duration"===e.type&&(null==e.durationRange?null:e.durationRange.max)>0)}}function Bw(e,t){if(1&e&&(c.kc(0,"ui-data-browser-filters-group",24),c.xc(1,"t"),c.ed(2,Vw,5,4,"ng-container",13),c.jc()),2&e){const e=c.wc(3);c.Dc("showHeader",!0)("title",c.yc(1,3,e.dictionary.classroomFilters)),c.Mb(2),c.Dc("ngForOf",e.tabSummary.classroomFilters)}}function Gw(e,t){if(1&e&&c.fc(0,"doc-data-browser-filter-datetime",20),2&e){const e=c.wc().$implicit,t=c.wc(4);c.Dc("label",e.title)("key",e.code)("value",t.defaultFiltersValues[e.code]||"")}}function Hw(e,t){if(1&e&&c.fc(0,"ui-data-browser-filter-single-selection",21),2&e){const e=c.wc().$implicit,t=c.wc(4);c.Dc("options",e.options)("label",e.title)("key",e.code)("value",t.defaultFiltersValues[e.code]||"")}}function $w(e,t){if(1&e&&(c.fc(0,"ui-data-browser-filter-multiple-selection",22),c.xc(1,"t"),c.xc(2,"t")),2&e){const e=c.wc().$implicit,t=c.wc(4);c.Dc("options",e.options)("label",e.title)("searchPlaceholder",c.zc(1,6,"Search for...",c.Hc(11,Mw)))("key",e.code)("value",t.defaultFiltersValues[e.code]||c.Hc(12,Lw))("showMoreLabel",c.yc(2,9,t.dictionary.showMoreLabel)+" ({optionsCount})")}}function Yw(e,t){if(1&e&&(c.fc(0,"ui-data-browser-filter-duration",23),c.xc(1,"t"),c.xc(2,"t"),c.xc(3,"t")),2&e){const e=c.wc().$implicit,t=c.wc(4);c.Dc("key",e.code)("label",c.yc(1,10,t.dictionary.durationFilterTitle))("value",t.defaultFiltersValues[e.code]||"all")("allDurationsLabel",c.yc(2,12,t.dictionary.allDuration))("customDurationLabel",c.yc(3,14,t.dictionary.customDuration))("minDuration",null==e.durationRange?null:e.durationRange.min)("maxDuration",null==e.durationRange?null:e.durationRange.max)("minSelectedDuration",t.defaultFiltersValues[e.code]?t.defaultFiltersValues[e.code][0]:null)("maxSelectedDuration",t.defaultFiltersValues[e.code]?t.defaultFiltersValues[e.code][1]:null)("step",60)}}function Ww(e,t){if(1&e&&(c.ic(0),c.ed(1,Gw,1,3,"doc-data-browser-filter-datetime",16),c.ed(2,Hw,1,4,"ui-data-browser-filter-single-selection",17),c.ed(3,$w,3,13,"ui-data-browser-filter-multiple-selection",18),c.ed(4,Yw,4,16,"ui-data-browser-filter-duration",19),c.hc()),2&e){const e=t.$implicit;c.Mb(1),c.Dc("ngIf","timeframe"===e.type),c.Mb(1),c.Dc("ngIf","single-selection"===e.type),c.Mb(1),c.Dc("ngIf","multiple-selection"===e.type),c.Mb(1),c.Dc("ngIf","duration"===e.type&&(null==e.durationRange?null:e.durationRange.max)>0)}}function Qw(e,t){if(1&e&&(c.kc(0,"ui-data-browser-filters-group",25),c.xc(1,"t"),c.ed(2,Ww,5,4,"ng-container",13),c.jc()),2&e){const e=c.wc(3);c.Dc("showHeader",!0)("title",c.yc(1,3,e.dictionary.webinarFilters)),c.Mb(2),c.Dc("ngForOf",e.tabSummary.webinarFilters)}}function Kw(e,t){if(1&e){const e=c.lc();c.kc(0,"ui-data-browser-panel-filters",11,12),c.sc("filtersChange",function(){return c.Vc(e),c.wc(2).onFiltersChange()}),c.xc(2,"t"),c.xc(3,"t"),c.xc(4,"t"),c.xc(5,"t"),c.xc(6,"t"),c.ed(7,Fw,5,4,"ng-container",13),c.ed(8,Bw,3,5,"ui-data-browser-filters-group",14),c.ed(9,Qw,3,5,"ui-data-browser-filters-group",15),c.jc()}if(2&e){const e=c.wc(2);c.Dc("filtersLabel",c.yc(2,8,e.dictionary.filtersLabel))("clearFiltersLabel",c.yc(3,10,e.dictionary.clearFiltersLabel))("closeFiltersLabel",c.yc(4,12,e.dictionary.closeFiltersLabel))("activeFiltersCountLabelSingular","{activeFiltersCount} "+c.yc(5,14,e.dictionary.activeFiltersCountLabelSingular))("activeFiltersCountLabelPlural","{activeFiltersCount} "+c.yc(6,16,e.dictionary.activeFiltersCountLabelPlural)),c.Mb(7),c.Dc("ngForOf",e.tabSummary.filters),c.Mb(1),c.Dc("ngIf",e.tabSummary.classroomFilters.length),c.Mb(1),c.Dc("ngIf",e.tabSummary.webinarFilters.length)}}const Jw=function(e){return{activeSortingOption:e}};function Xw(e,t){if(1&e){const e=c.lc();c.kc(0,"ui-data-browser-control-dropdown",26),c.sc("selectOption",function(t){return c.Vc(e),c.wc(2).onSelectSortingOption(t)}),c.xc(1,"t"),c.jc()}if(2&e){const e=c.wc(2);c.Dc("options",e.sortingOptions)("defaultValue",e.viewConfiguration.sort)("ariaLabel",c.zc(1,3,"Sort by: {activeSortingOption}",c.Ic(6,Jw,e.currentSortingLabel)))}}const Zw=function(e){return{contentStatus:e}};function eC(e,t){if(1&e&&(c.fc(0,"ui-list-item-formal-content",35),c.xc(1,"t"),c.xc(2,"t"),c.xc(3,"t"),c.xc(4,"t"),c.xc(5,"t"),c.xc(6,"t"),c.xc(7,"t"),c.xc(8,"t"),c.xc(9,"t"),c.xc(10,"t"),c.xc(11,"t"),c.xc(12,"t"),c.xc(13,"t"),c.xc(14,"t"),c.xc(15,"t")),2&e){const e=c.wc().$implicit,t=c.wc(3);c.Dc("imageUrl",e.resultDetailsMyCoursesAndLearningPlans.imageUrl)("title",e.resultDetailsMyCoursesAndLearningPlans.title)("rating",e.resultDetailsMyCoursesAndLearningPlans.rating)("itemTypeLabel",c.yc(1,24,e.resultDetailsMyCoursesAndLearningPlans.itemTypeLabel))("statusDetails",c.yc(2,26,e.resultDetailsMyCoursesAndLearningPlans.statusDetails))("statusDetailsColor",e.resultDetailsMyCoursesAndLearningPlans.statusDetailsColor)("language",c.yc(3,28,e.resultDetailsMyCoursesAndLearningPlans.language))("duration",e.resultDetailsMyCoursesAndLearningPlans.duration)("primaryStatusType",e.resultDetailsMyCoursesAndLearningPlans.primaryStatusType)("primaryStatusLabel",c.yc(4,30,e.resultDetailsMyCoursesAndLearningPlans.primaryStatusLabel))("locked",e.resultDetailsMyCoursesAndLearningPlans.locked)("route",e.resultDetailsMyCoursesAndLearningPlans.route)("itemsCountLabel",c.yc(5,32,e.resultDetailsMyCoursesAndLearningPlans.itemsCountLabel))("highlight",null==e.resultDetailsMyCoursesAndLearningPlans.highlight?null:e.resultDetailsMyCoursesAndLearningPlans.highlight.highlight)("highlightType",null==e.resultDetailsMyCoursesAndLearningPlans.highlight?null:e.resultDetailsMyCoursesAndLearningPlans.highlight.highlightType)("highlightTypeLabel",c.yc(6,34,null==e.resultDetailsMyCoursesAndLearningPlans.highlight?null:e.resultDetailsMyCoursesAndLearningPlans.highlight.highlightTypeLabel)+":")("highlightExtended",c.yc(7,36,null==e.resultDetailsMyCoursesAndLearningPlans.highlight?null:e.resultDetailsMyCoursesAndLearningPlans.highlight.highlightExtended))("ratingExtended",c.yc(8,38,e.resultDetailsMyCoursesAndLearningPlans.ratingExtended))("languageExtended",c.yc(9,40,e.resultDetailsMyCoursesAndLearningPlans.languageExtended))("lockedLabelExtended",c.yc(10,42,t.dictionary.lockedItem))("itemTypeLabelExtended",c.yc(11,44,e.resultDetailsMyCoursesAndLearningPlans.itemTypeLabelExtended))("durationExtended",c.yc(12,46,e.resultDetailsMyCoursesAndLearningPlans.durationExtended))("itemsCountLabelExtended",c.yc(13,48,e.resultDetailsMyCoursesAndLearningPlans.itemsCountLabelExtended))("primaryStatusLabelExtended",c.zc(14,50,e.resultDetailsMyCoursesAndLearningPlans.primaryStatusLabelExtended,c.Ic(55,Zw,c.yc(15,53,e.resultDetailsMyCoursesAndLearningPlans.primaryStatusLabel))))}}function tC(e,t){if(1&e&&(c.fc(0,"ui-list-item-informal-content",36),c.xc(1,"t"),c.xc(2,"t"),c.xc(3,"t"),c.xc(4,"t"),c.xc(5,"t"),c.xc(6,"t"),c.xc(7,"t"),c.xc(8,"t"),c.xc(9,"t"),c.xc(10,"t"),c.xc(11,"t")),2&e){const e=c.wc().$implicit,t=c.wc(3);c.Dc("rating",e.resultDetailsAsset.rating)("imageUrl",e.resultDetailsAsset.imageUrl)("title",e.resultDetailsAsset.title)("locked",e.resultDetailsAsset.loading)("route",e.resultDetailsAsset.route)("primaryStatusType",e.resultDetailsAsset.primaryStatusType)("primaryStatusLabel",c.yc(1,21,e.resultDetailsAsset.primaryStatusLabel))("author",e.resultDetailsAsset.author)("authorRoute",e.resultDetailsAsset.authorRoute)("itemTypeLabel",c.yc(2,23,e.resultDetailsAsset.itemTypeLabel))("itemsCountLabel",c.yc(3,25,e.resultDetailsAsset.itemsCountLabel))("highlight",null==e.resultDetailsAsset.highlight?null:e.resultDetailsAsset.highlight.highlight)("highlightType",null==e.resultDetailsAsset.highlight?null:e.resultDetailsAsset.highlight.highlightType)("highlightTypeLabel",c.yc(4,27,null==e.resultDetailsAsset.highlight?null:e.resultDetailsAsset.highlight.highlightTypeLabel)+":")("highlightExtended",c.yc(5,29,null==e.resultDetailsAsset.highlight?null:e.resultDetailsAsset.highlight.highlightExtended))("authorExtended",c.yc(6,31,e.resultDetailsAsset.authorExtended))("itemTypeLabelExtended",c.yc(7,33,e.resultDetailsAsset.itemTypeLabelExtended))("itemsCountLabelExtended",c.yc(8,35,e.resultDetailsAsset.itemsCountLabelExtended))("lockedLabelExtended",c.yc(9,37,t.dictionary.lockedItem))("ratingExtended",c.yc(10,39,e.resultDetailsAsset.ratingExtended))("primaryStatusLabelExtended",c.yc(11,41,e.resultDetailsAsset.primaryStatusLabelExtended))}}function iC(e,t){if(1&e&&(c.fc(0,"ui-list-item-catalog-content",37),c.xc(1,"t"),c.xc(2,"t"),c.xc(3,"t"),c.xc(4,"t"),c.xc(5,"t"),c.xc(6,"t"),c.xc(7,"t"),c.xc(8,"t"),c.xc(9,"t"),c.xc(10,"t"),c.xc(11,"t"),c.xc(12,"t"),c.xc(13,"t"),c.xc(14,"t"),c.xc(15,"t"),c.xc(16,"t"),c.xc(17,"t"),c.xc(18,"t"),c.xc(19,"t")),2&e){const e=c.wc().$implicit,t=c.wc(3);c.Dc("imageUrl",e.resultDetailsCatalog.imageUrl)("primaryStatusType",e.resultDetailsCatalog.primaryStatusType)("primaryStatusLabel",c.yc(1,29,e.resultDetailsCatalog.primaryStatusLabel))("locked",e.resultDetailsCatalog.locked)("route",e.resultDetailsCatalog.route)("title",e.resultDetailsCatalog.title)("statusDetails",c.yc(2,31,e.resultDetailsCatalog.statusDetails))("statusDetailsColor",e.resultDetailsCatalog.statusDetailsColor)("language",c.yc(3,33,e.resultDetailsCatalog.language))("itemsCountLabel",c.yc(4,35,e.resultDetailsCatalog.itemsCountLabel))("duration",e.resultDetailsCatalog.duration)("enrollmentStatus",c.yc(5,37,e.resultDetailsCatalog.enrollmentStatus))("discountedPrice",c.yc(6,39,e.resultDetailsCatalog.discountedPrice))("price",c.yc(7,41,t.ecommerceAppIsActive?e.resultDetailsCatalog.price:""))("rating",e.resultDetailsCatalog.rating)("itemTypeLabel",c.yc(8,43,e.resultDetailsCatalog.itemTypeLabel))("enrollmentStatusExtended",c.yc(9,45,e.resultDetailsCatalog.enrollmentStatusExtended))("priceExtended",c.yc(10,47,e.resultDetailsCatalog.priceExtended))("languageExtended",c.yc(11,49,e.resultDetailsCatalog.languageExtended))("itemsCountLabelExtended",c.yc(12,51,e.resultDetailsCatalog.itemsCountLabelExtended))("durationExtended",c.yc(13,53,e.resultDetailsCatalog.durationExtended))("ratingExtended",c.yc(14,55,e.resultDetailsCatalog.ratingExtended))("itemTypeLabelExtended",c.yc(15,57,e.resultDetailsCatalog.itemTypeLabelExtended))("lockedLabelExtended",c.yc(16,59,t.dictionary.lockedItem))("highlight",null==e.resultDetailsCatalog.highlight?null:e.resultDetailsCatalog.highlight.highlight)("highlightType",null==e.resultDetailsCatalog.highlight?null:e.resultDetailsCatalog.highlight.highlightType)("highlightTypeLabel",c.yc(17,61,null==e.resultDetailsCatalog.highlight?null:e.resultDetailsCatalog.highlight.highlightTypeLabel)+":")("highlightExtended",c.yc(18,63,null==e.resultDetailsCatalog.highlight?null:e.resultDetailsCatalog.highlight.highlightExtended))("primaryStatusLabelExtended",c.yc(19,65,e.resultDetailsCatalog.primaryStatusLabelExtended))}}function sC(e,t){if(1&e&&(c.fc(0,"dcb-ui-list-item-training-material-content",38),c.xc(1,"t"),c.xc(2,"t"),c.xc(3,"t"),c.xc(4,"t"),c.xc(5,"t"),c.xc(6,"t"),c.xc(7,"t")),2&e){const e=c.wc().$implicit,t=c.wc(3);c.Dc("imageUrl",e.resultDetailsTrainingMaterial.imageUrl)("locked",e.resultDetailsTrainingMaterial.locked)("route",e.resultDetailsTrainingMaterial.route)("title",e.resultDetailsTrainingMaterial.title)("itemTypeLabel",c.yc(1,16,e.resultDetailsTrainingMaterial.itemTypeLabel))("itemTypeLabelExtended",c.yc(2,18,e.resultDetailsTrainingMaterial.itemTypeLabelExtended))("courseName",e.resultDetailsTrainingMaterial.courseName)("courseRoute",e.resultDetailsTrainingMaterial.courseRoute)("courseOptionName",c.yc(3,20,e.resultDetailsTrainingMaterial.courseOptionName))("highlight",null==e.resultDetailsTrainingMaterial.highlight?null:e.resultDetailsTrainingMaterial.highlight.highlight)("highlightType",null==e.resultDetailsTrainingMaterial.highlight?null:e.resultDetailsTrainingMaterial.highlight.highlightType)("highlightTypeLabel",c.yc(4,22,null==e.resultDetailsTrainingMaterial.highlight?null:e.resultDetailsTrainingMaterial.highlight.highlightTypeLabel)+":")("highlightExtended",c.yc(5,24,null==e.resultDetailsTrainingMaterial.highlight?null:e.resultDetailsTrainingMaterial.highlight.highlightExtended))("courseExtended",c.yc(6,26,e.resultDetailsTrainingMaterial.courseLabelExtended))("lockedLabelExtended",c.yc(7,28,t.dictionary.lockedItem))("itemType",e.resultDetailsTrainingMaterial.lo_type)}}function nC(e,t){if(1&e){const e=c.lc();c.kc(0,"lrn-global-search-question",39),c.sc("deleteQuestion",function(t){return c.Vc(e),c.wc(4).onDeleteQuestion(t)}),c.jc()}if(2&e){const e=c.wc().$implicit;c.Dc("question",e.resultDetailsQuestion)}}function aC(e,t){if(1&e&&(c.kc(0,"div",29),c.ed(1,eC,16,57,"ui-list-item-formal-content",30),c.ed(2,tC,12,43,"ui-list-item-informal-content",31),c.ed(3,iC,20,67,"ui-list-item-catalog-content",32),c.ed(4,sC,8,30,"dcb-ui-list-item-training-material-content",33),c.ed(5,nC,1,1,"lrn-global-search-question",34),c.jc()),2&e){const e=t.$implicit,i=t.index,s=c.wc(3);c.Nb("aria-setsize",s.tabData.itemsCount)("aria-posinset",i+1),c.Mb(1),c.Dc("ngIf","my-courses"===e.resultType),c.Mb(1),c.Dc("ngIf","assets"===e.resultType),c.Mb(1),c.Dc("ngIf","course-catalog"===e.resultType),c.Mb(1),c.Dc("ngIf","training-material"===e.resultType),c.Mb(1),c.Dc("ngIf","questions-answers"===e.resultType)}}function oC(e,t){if(1&e&&(c.kc(0,"div",27),c.ed(1,aC,6,7,"div",28),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("ngForOf",e.tabData.results)}}function rC(e,t){1&e&&(c.kc(0,"div",40),c.fc(1,"ui-spinner",41),c.jc()),2&e&&(c.Mb(1),c.Dc("size","md"))}const cC=function(e){return{itemsCount:e}};function lC(e,t){if(1&e&&(c.kc(0,"ui-data-browser",4),c.ed(1,Kw,10,18,"ui-data-browser-panel-filters",5),c.ed(2,Xw,2,8,"ui-data-browser-control-dropdown",6),c.kc(3,"ui-data-browser-content"),c.kc(4,"div",7),c.kc(5,"div",8),c.gd(6),c.xc(7,"t"),c.jc(),c.ed(8,oC,2,1,"div",9),c.ed(9,rC,2,1,"div",10),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Dc("sticky",!1)("controlsShrinkBreakpoint","xs"),c.Mb(1),c.Dc("ngIf","all-results"!==e.tabSummary.id&&e.tabSummary.filters.length),c.Mb(1),c.Dc("ngIf","all-results"!==e.tabSummary.id),c.Mb(4),c.id(" ",c.zc(7,7,1===e.tabData.itemsCount?e.dictionary.itemsCountSingular:e.dictionary.itemsCountPlural,c.Ic(10,cC,e.tabData.itemsCount))," "),c.Mb(2),c.Dc("ngIf",e.tabData.results.length),c.Mb(1),c.Dc("ngIf",e.loadingData)}}function dC(e,t){if(1&e&&(c.kc(0,"div",42),c.fc(1,"dcb-ui-blank-slate",43),c.xc(2,"t"),c.xc(3,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("title",c.yc(2,2,e.dictionary.blankSlateTitle))("description",c.yc(3,4,e.dictionary.blankSlateDescription))}}let uC=(()=>{class e{constructor(e,t,i,s){this._changeDetectorRef=e,this._translationService=t,this._viewportMonitorService=i,this._lrnGlobalSearchService=s,this.active=!1,this.viewConfigurationUpdate=new c.q,this.dictionary=Wy,this.loadingData=!0,this.sortingOptions=[],this.defaultFiltersValues={},this.activeFiltersCount=0,this._initTabData()}ngOnChanges(e){e.viewConfiguration&&e.viewConfiguration.firstChange&&this.viewConfiguration&&(this.defaultFiltersValues=this.viewConfiguration.filters),e.tabSummary&&this.tabSummary&&this._initSortingDropdown(),e.active&&this.active&&!this.tabData.results.length&&this.tabSummary.resultsCount&&this._getTabData()}ngAfterViewInit(){this.ecommerceAppIsActive=D.b.getInstance().isPluginActive("EcommerceApp"),this._viewportMonitorService.registerContainer("global-search-tab-"+this.tabSummary.id).subscribe(e=>{e.elementInfo.isInViewport.isBottomInViewport&&this._loadNextChunk()}),this._viewportMonitorService.addElements("global-search-tab-"+this.tabSummary.id,[this.globalSearchTab],{events:[ow.b.ElementBottomEntersViewport]})}ngOnDestroy(){this._viewportMonitorService.unregisterContainer("global-search-tab-"+this.tabSummary.id),this._getTabDataSubscription&&this._getTabDataSubscription.unsubscribe()}onFiltersChange(){this.activeFiltersCount=this.filtersPanel.activeFiltersCount,this.viewConfiguration.filters=this.filtersPanel.getActiveFiltersValues(!0),this.viewConfigurationUpdate.emit(),this._initTabData(),this._getTabData()}onSelectSortingOption(e){this.viewConfiguration.sort=e,this.viewConfigurationUpdate.emit(),this._initTabData(),this._getTabData()}onDeleteQuestion(e){const t=this.tabData.results.findIndex(t=>{var i;return t.resultType===Gy.QUESTIONS_AND_ANSWERS&&(null===(i=t.resultDetailsQuestion)||void 0===i?void 0:i.question.id)===e});-1!==t&&(this.tabData.results.splice(t,1),this.tabData.itemsCount--),this._changeDetectorRef.detectChanges()}_initSortingDropdown(){this.sortingOptions=function(e,t){let i=[];return e!==Gy.ALL_RESULTS&&(i.push({label:t.instant(Wy.sortBestMatch.query,{category:Wy.sortBestMatch.category}),value:"_score desc"}),e!==Gy.QUESTIONS_AND_ANSWERS&&i.push({label:t.instant(Wy.sortNameAsc.query,{category:Wy.sortNameAsc.category}),value:"titlesort asc"},{label:t.instant(Wy.sortNameDesc.query,{category:Wy.sortNameDesc.category}),value:"titlesort desc"}),e!==Gy.TRAINING_MATERIAL&&e!==Gy.COURSE_CATALOG&&i.push({label:t.instant(Wy.sortNewestToOldest.query,{category:Wy.sortNewestToOldest.category}),value:"created desc"},{label:t.instant(Wy.sortOldestToNewest.query,{category:Wy.sortOldestToNewest.category}),value:"created asc"}),e===Gy.COURSE_CATALOG&&i.push({label:t.instant(Wy.sortLowestPriceFirst.query,{category:Wy.sortLowestPriceFirst.category}),value:"price asc"},{label:t.instant(Wy.sortHighestPriceFirst.query,{category:Wy.sortHighestPriceFirst.category}),value:"price desc"})),i}(this.tabSummary.id,this._translationService),this.currentSortingLabel=function(e,t){let i="";switch(e){case"_score desc":i=t.instant(Wy.sortBestMatch.query,{category:Wy.sortBestMatch.category});break;case"titlesort asc":i=t.instant(Wy.sortNameAsc.query,{category:Wy.sortNameAsc.category});break;case"titlesort desc":i=t.instant(Wy.sortNameDesc.query,{category:Wy.sortNameDesc.category});break;case"created desc":i=t.instant(Wy.sortNewestToOldest.query,{category:Wy.sortNewestToOldest.category});break;case"created asc":i=t.instant(Wy.sortOldestToNewest.query,{category:Wy.sortOldestToNewest.category});break;case"price asc":i=t.instant(Wy.sortLowestPriceFirst.query,{category:Wy.sortLowestPriceFirst.category});break;case"price desc":i=t.instant(Wy.sortHighestPriceFirst.query,{category:Wy.sortHighestPriceFirst.category})}return i}(this.viewConfiguration.sort,this._translationService)}_getTabData(){this._getTabDataSubscription&&this._getTabDataSubscription.unsubscribe(),this.loadingData=!0,this._changeDetectorRef.detectChanges(),this._getTabDataSubscription=this._lrnGlobalSearchService.getTabData(this.searchCriteria,this.tabSummary.id,this.viewConfiguration,this.tabData.nextResultIndex).subscribe(e=>{this.tabData.nextResultIndex=e.nextResultIndex,this.tabData.otherResultsAvailable=e.otherResultsAvailable,this.tabData.itemsCount=e.itemsCount,this.tabData.results.push(...e.results),this.loadingData=!1,this._changeDetectorRef.detectChanges();const t=this._viewportMonitorService.getElementsPositionInfo("global-search",[this.globalSearchTab])[0];t&&t.isInViewport.isBottomInViewport&&this._loadNextChunk()})}_loadNextChunk(){!this.loadingData&&this.tabData.otherResultsAvailable&&this.tabData.itemsCount!==this.tabData.nextResultIndex&&this._getTabData()}_initTabData(){this.tabData={itemsCount:0,otherResultsAvailable:!0,nextResultIndex:0,results:[]}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i),c.ec(u.h),c.ec(rw.a),c.ec(nw))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-global-search-tab"]],viewQuery:function(e,t){if(1&e&&(c.nd(Ow,1),c.nd(Ew,1)),2&e){let e;c.Rc(e=c.tc())&&(t.filtersPanel=e.first),c.Rc(e=c.tc())&&(t.globalSearchTab=e.first)}},inputs:{active:"active",searchCriteria:"searchCriteria",tabSummary:"tabSummary",viewConfiguration:"viewConfiguration"},outputs:{viewConfigurationUpdate:"viewConfigurationUpdate"},features:[c.Kb],decls:4,vars:2,consts:[[1,"global-search-tab-wrapper"],["globalSearchTab",""],[3,"sticky","controlsShrinkBreakpoint",4,"ngIf"],["class","global-search-tab-blank-slate",4,"ngIf"],[3,"sticky","controlsShrinkBreakpoint"],[3,"filtersLabel","clearFiltersLabel","closeFiltersLabel","activeFiltersCountLabelSingular","activeFiltersCountLabelPlural","filtersChange",4,"ngIf"],["position","end","triggerIcon","sort-top",3,"options","defaultValue","ariaLabel","selectOption",4,"ngIf"],[1,"global-search-tab-content-wrapper"],[1,"global-search-tab-items-count","ui-typography-subtitle"],["class","global-search-tab-list-items ui-shadow-md","role","list",4,"ngIf"],["class","global-search-tab-spinner",4,"ngIf"],[3,"filtersLabel","clearFiltersLabel","closeFiltersLabel","activeFiltersCountLabelSingular","activeFiltersCountLabelPlural","filtersChange"],["filtersPanel",""],[4,"ngFor","ngForOf"],["groupName","classroom","iconName","classroom",3,"showHeader","title",4,"ngIf"],["groupName","webinar","iconName","webinar",3,"showHeader","title",4,"ngIf"],[3,"label","key","value",4,"ngIf"],[3,"options","label","key","value",4,"ngIf"],[3,"options","label","searchPlaceholder","key","value","showMoreLabel",4,"ngIf"],["defaultValue","all",3,"key","label","value","allDurationsLabel","customDurationLabel","minDuration","maxDuration","minSelectedDuration","maxSelectedDuration","step",4,"ngIf"],[3,"label","key","value"],[3,"options","label","key","value"],[3,"options","label","searchPlaceholder","key","value","showMoreLabel"],["defaultValue","all",3,"key","label","value","allDurationsLabel","customDurationLabel","minDuration","maxDuration","minSelectedDuration","maxSelectedDuration","step"],["groupName","classroom","iconName","classroom",3,"showHeader","title"],["groupName","webinar","iconName","webinar",3,"showHeader","title"],["position","end","triggerIcon","sort-top",3,"options","defaultValue","ariaLabel","selectOption"],["role","list",1,"global-search-tab-list-items","ui-shadow-md"],["role","listitem",4,"ngFor","ngForOf"],["role","listitem"],[3,"imageUrl","title","rating","itemTypeLabel","statusDetails","statusDetailsColor","language","duration","primaryStatusType","primaryStatusLabel","locked","route","itemsCountLabel","highlight","highlightType","highlightTypeLabel","highlightExtended","ratingExtended","languageExtended","lockedLabelExtended","itemTypeLabelExtended","durationExtended","itemsCountLabelExtended","primaryStatusLabelExtended",4,"ngIf"],[3,"rating","imageUrl","title","locked","route","primaryStatusType","primaryStatusLabel","author","authorRoute","itemTypeLabel","itemsCountLabel","highlight","highlightType","highlightTypeLabel","highlightExtended","authorExtended","itemTypeLabelExtended","itemsCountLabelExtended","lockedLabelExtended","ratingExtended","primaryStatusLabelExtended",4,"ngIf"],[3,"imageUrl","primaryStatusType","primaryStatusLabel","locked","route","title","statusDetails","statusDetailsColor","language","itemsCountLabel","duration","enrollmentStatus","discountedPrice","price","rating","itemTypeLabel","enrollmentStatusExtended","priceExtended","languageExtended","itemsCountLabelExtended","durationExtended","ratingExtended","itemTypeLabelExtended","lockedLabelExtended","highlight","highlightType","highlightTypeLabel","highlightExtended","primaryStatusLabelExtended",4,"ngIf"],[3,"imageUrl","locked","route","title","itemTypeLabel","itemTypeLabelExtended","courseName","courseRoute","courseOptionName","highlight","highlightType","highlightTypeLabel","highlightExtended","courseExtended","lockedLabelExtended","itemType",4,"ngIf"],[3,"question","deleteQuestion",4,"ngIf"],[3,"imageUrl","title","rating","itemTypeLabel","statusDetails","statusDetailsColor","language","duration","primaryStatusType","primaryStatusLabel","locked","route","itemsCountLabel","highlight","highlightType","highlightTypeLabel","highlightExtended","ratingExtended","languageExtended","lockedLabelExtended","itemTypeLabelExtended","durationExtended","itemsCountLabelExtended","primaryStatusLabelExtended"],[3,"rating","imageUrl","title","locked","route","primaryStatusType","primaryStatusLabel","author","authorRoute","itemTypeLabel","itemsCountLabel","highlight","highlightType","highlightTypeLabel","highlightExtended","authorExtended","itemTypeLabelExtended","itemsCountLabelExtended","lockedLabelExtended","ratingExtended","primaryStatusLabelExtended"],[3,"imageUrl","primaryStatusType","primaryStatusLabel","locked","route","title","statusDetails","statusDetailsColor","language","itemsCountLabel","duration","enrollmentStatus","discountedPrice","price","rating","itemTypeLabel","enrollmentStatusExtended","priceExtended","languageExtended","itemsCountLabelExtended","durationExtended","ratingExtended","itemTypeLabelExtended","lockedLabelExtended","highlight","highlightType","highlightTypeLabel","highlightExtended","primaryStatusLabelExtended"],[3,"imageUrl","locked","route","title","itemTypeLabel","itemTypeLabelExtended","courseName","courseRoute","courseOptionName","highlight","highlightType","highlightTypeLabel","highlightExtended","courseExtended","lockedLabelExtended","itemType"],[3,"question","deleteQuestion"],[1,"global-search-tab-spinner"],[3,"size"],[1,"global-search-tab-blank-slate"],["illustrationName","no-result-found","illustrationSize","md",3,"title","description"]],template:function(e,t){1&e&&(c.kc(0,"div",0,1),c.ed(2,lC,10,12,"ui-data-browser",2),c.ed(3,dC,4,6,"div",3),c.jc()),2&e&&(c.Mb(2),c.Dc("ngIf",t.tabSummary.resultsCount),c.Mb(1),c.Dc("ngIf",0===t.tabSummary.resultsCount||!t.loadingData&&!t.tabData.results.length))},directives:[m.p,b.Ib,b.Jb,b.Wb,m.o,cw.a,b.Rb,b.Pb,b.Ob,b.Sb,b.Lb,b.jd,b.ld,b.fd,b.td,Dw,b.Be,b.B],pipes:[M.b],styles:["lrn-global-search-tab .global-search-tab-spinner{padding:var(--ui-spacing-md) 0;display:flex;justify-content:center;align-items:center}lrn-global-search-tab .global-search-tab-items-count{margin-bottom:var(--ui-spacing-sm)}lrn-global-search-tab .global-search-tab-list-items>*{display:block;border-bottom:solid var(--ui-size-border-xs) var(--ui-color-border-neutral)}lrn-global-search-tab .global-search-tab-list-items>:last-child{border-bottom:none}lrn-global-search-tab .ui-data-browser-controls-bar{margin-bottom:var(--ui-spacing-sm)}[lang=zh-Hant] lrn-global-search-tab b,[lang=zh] lrn-global-search-tab b{color:red}"],encapsulation:2,changeDetection:0}),e})();const hC=["tabs"],pC=function(e){return{resultsCount:e}};function gC(e,t){if(1&e){const e=c.lc();c.kc(0,"dcb-ui-tab-horizontal",3),c.xc(1,"t"),c.kc(2,"div",4),c.kc(3,"div",5),c.kc(4,"div",6),c.kc(5,"lrn-global-search-tab",7),c.sc("viewConfigurationUpdate",function(){return c.Vc(e),c.wc().onViewConfigurationUpdate()}),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=t.$implicit,i=c.wc();c.Dc("title",e.title+" ("+e.resultsCount+")")("ariaLabel",e.title+c.zc(1,7,i.dictionary.resultsCount,c.Ic(10,pC,e.resultsCount)))("tabName",e.id),c.Mb(5),c.Dc("active",i.viewConfiguration.tab===e.id)("searchCriteria",i.searchCriteria)("tabSummary",e)("viewConfiguration",i.viewConfiguration)}}let mC=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this._route=e,this._router=t,this._changeDetectorRef=i,this._docLayoutService=s,this._queryStringManagerService=n,this._lrnGlobalSearchService=a,this._docWidgetMyCoursesAndLearningPlansService=o,this._translationService=r,this.viewConfiguration={tab:Gy.ALL_RESULTS,sort:"best-match",filters:{}},this.dictionary=Wy,this._ngUnsubscribe$=new _t.a}ngOnInit(){this._subscribeToQueryStringParamsChange(),this._subscribeToRouteParamsChange()}ngOnDestroy(){this._ngUnsubscribe$.next(),this._ngUnsubscribe$.complete(),this._queryStringManagerService.unregisterComponent("search"),this._queryStringManagerService.unregisterComponent("ctl")}onChangeTab(e){e.next(!0),this.viewConfiguration.tab!==this.tabs.activeTab&&(this.viewConfiguration.tab=this.tabs.activeTab,this.viewConfiguration.sort="best-match",this.viewConfiguration.filters={}),this._updateQueryParams(),this._changeDetectorRef.detectChanges()}onViewConfigurationUpdate(){this._updateQueryParams()}_setBreadcrumbs(){this._docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:tt.a.t("standard",'Results for "{searchCriteria}"',{searchCriteria:this.searchCriteria}),href:this._router.url}])}_setPageTitle(){this._docLayoutService.header.showTitleBar({title:tt.a.t("standard",'Results for "{searchCriteria}"',{searchCriteria:this.searchCriteria}),fullWidth:!0,mode:"seamless"})}_setSearchCriteria(e){this.searchCriteria=e.search.replace(/<\/?[^>]+(>|$)/g,"")}_subscribeToQueryStringParamsChange(){this._queryStringManagerService.registerComponent("search").pipe(Object(vt.a)(this._ngUnsubscribe$)).subscribe(e=>{this.viewConfiguration=function(e){const t={tab:e.tab?e.tab.values:Gy.ALL_RESULTS,sort:e.v?e.v.values:"best-match",filters:{}};return Object.keys(e).forEach(i=>{var s;"tab"!==i&&"v"!==i&&(t.filters[(s=i,Object.keys(Yy).find(e=>Yy[e]===s)||s)]=e[i].values)}),t}(e.queryStringObject)}),this._queryStringManagerService.registerComponent("ctl").pipe(Object(vt.a)(this._ngUnsubscribe$)).subscribe(e=>{if(Object.keys(e.queryStringObject).length){const i=((t=e.queryStringObject).tab={values:Gy.COURSE_CATALOG},t);this._queryStringManagerService.updateQueryStringParams("ctl",{}).subscribe(()=>{this._queryStringManagerService.updateQueryStringParams("search",i),this._queryStringManagerService.unregisterComponent("ctl")})}var t})}_subscribeToRouteParamsChange(){this._route.params.subscribe(e=>{this._setSearchCriteria(e),this._setPageTitle(),this._setBreadcrumbs(),this.tabsSummary&&(this.viewConfiguration.tab=Gy.ALL_RESULTS,this.viewConfiguration.sort="best-match",this.viewConfiguration.filters={},this.tabsSummary=[],this._changeDetectorRef.detectChanges()),this._lrnGlobalSearchService.getGlobalSearchTabsSummary(this.searchCriteria).subscribe(e=>{this.tabsSummary=e,this._changeDetectorRef.detectChanges(),this._docWidgetMyCoursesAndLearningPlansService.fetchAvailableChannels().then(e=>{const t=[{value:"0",label:this._translationService.instant(this.dictionary.notAssignedChannel.key,this.dictionary.notAssignedChannel.category)}];t.push(...e);const i=this.tabsSummary.findIndex(e=>"my-courses"===e.id),s=this.tabsSummary[i].filters.findIndex(e=>"ch"===e.code);i>-1&&s>-1&&(this.tabsSummary[i].filters[s].options=[...t]);const n=this.tabsSummary.findIndex(e=>"questions-answers"===e.id),a=this.tabsSummary[n].filters.findIndex(e=>"ch"===e.code);n>-1&&a>-1&&(this.tabsSummary[n].filters[a].options=[...t])})})})}_updateQueryParams(){this._queryStringManagerService.updateQueryStringParams("search",function(e){const t={};return e.tab!==Gy.ALL_RESULTS&&(t.tab={values:e.tab},"best-match"!==e.sort&&(t.v={values:e.sort}),Object.keys(e.filters).forEach(i=>{var s;t[(s=i,Yy[s]||s)]={values:e.filters[i]}})),t}(this.viewConfiguration)),setTimeout(()=>{this._setPageTitle()})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.a),c.ec(s.h),c.ec(c.i),c.ec(j.a),c.ec(Ty.a),c.ec(nw),c.ec(aw.a),c.ec(u.h))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-global-search"]],viewQuery:function(e,t){if(1&e&&c.nd(hC,1),2&e){let e;c.Rc(e=c.tc())&&(t.tabs=e.first)}},decls:3,vars:2,consts:[[3,"activeTab","changeTab"],["tabs",""],[3,"title","ariaLabel","tabName",4,"ngFor","ngForOf"],[3,"title","ariaLabel","tabName"],[1,"global-search-tab"],[1,"ui-row-narrow"],[1,"ui-col-24"],[3,"active","searchCriteria","tabSummary","viewConfiguration","viewConfigurationUpdate"]],template:function(e,t){1&e&&(c.kc(0,"dcb-ui-tabs-horizontal",0,1),c.sc("changeTab",function(e){return t.onChangeTab(e)}),c.ed(2,gC,6,12,"dcb-ui-tab-horizontal",2),c.jc()),2&e&&(c.Dc("activeTab",t.viewConfiguration.tab),c.Mb(2),c.Dc("ngForOf",t.tabsSummary))},directives:[b.We,m.o,b.Ke,uC],pipes:[M.b],styles:["lrn-global-search .global-search-tab{min-height:calc(100vh - 250px);box-sizing:border-box;padding:var(--ui-spacing-xl) 0 var(--ui-spacing-huge) 0}"],encapsulation:2,changeDetection:0}),e})();function bC(e,t){1&e&&c.fc(0,"lrn-global-search")}function fC(e,t){if(1&e&&c.fc(0,"tabs",4),2&e){const e=c.wc(2);c.bd(e.tabsParams.style),c.Dc("panels",e.tabsParams.panels)("reInitTabsOnChange",!1)("initialTab",e.tabsParams.initialTab)("initOnlyActiveTab",!0)("materialWrapper",!0)}}function _C(e,t){if(1&e&&(c.kc(0,"div",2),c.ed(1,fC,1,7,"tabs",3),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",e.showTabs)}}let vC=(()=>{class e{constructor(e,t,i,s,n,a,o,r){if(this.location=e,this.router=t,this.route=i,this.pageService=s,this.backend=n,this.docLayoutService=a,this.queryStringManagerService=o,this.toggleService=r,this.newGlobalSearchAvailable=!0,this.showTabs=!1,this.queryUrlParams={ctl:null},this.getTabTitle=e=>`${e.title}${void 0!==e.count?` (${e.count})`:""}`,!this.newGlobalSearchAvailable){this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:Ii.a.allResults,href:this.router.url}]);const e=this.queryStringManagerService.registerComponent("ctl");this.queryStringManagerSubscriber=e.subscribe(e=>{this.queryUrlParams.ctl=e.queryStringObject,Object.entries(this.queryUrlParams.ctl).length>0&&(this.tabActive=ne.j.COURSES_CATALOG)}),this.route.params.subscribe(e=>{this.showTabs=!1,this.searchCriteria=e.search.replace(/<\/?[^>]+(>|$)/g,""),this.tabsParams={panels:[],style:""},this.docLayoutService.header.showTitleBar({title:M.a.t("standard","All Results"),subtitle:M.a.t("standard",'You searched for "{0}"',{0:this.searchCriteria})}),this.backend.request("/manage/v1/globalsearch","GET",{criteria:this.searchCriteria,adv:1,g:[1,2,4,5]}).subscribe(t=>{const i=t.data;for(let e=0;e<i.tabs.length;e++)this.tabsParams.panels[e]={title:this.getTabTitle(i.tabs[e]),content:{params:{url:"/manage/v1/globalsearch/search",filters:i.tabs[e].filters,search:this.searchCriteria,group:i.tabs[e].group,useFakeData:!0,queryUrlParams:this.queryUrlParams},component:Ny}};this.setActiveTab(i,e),this.tabsParams.reInitTabsOnChange=!1,this.showTabs=!0},e=>{this.docLayoutService.toast.showToast({message:e.message,type:"error"})})})}}ngOnInit(){this.newGlobalSearchAvailable||this.docLayoutService.header.showTitleBar({title:M.a.t("standard","All Results"),subtitle:M.a.t("standard",'You searched for "{0}"',{0:this.searchCriteria})})}setActiveTab(e,t){this.tabActive&&(e.active=this.tabActive);let i=this.tabsParams.panels[e.active];const s=t.activeTab;if(s)if(e.tabs[s-1].count>0)i=this.tabsParams.panels[s-1];else{const e=this.router.createUrlTree([{}],{relativeTo:this.route}).toString();this.location.replaceState(e)}this.tabsParams.initialTab=i}ngOnDestroy(){this.queryStringManagerSubscriber&&this.queryStringManagerSubscriber.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(m.k),c.ec(s.h),c.ec(s.a),c.ec(P.a),c.ec(I.a),c.ec(j.a),c.ec(Ty.a),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","advanced-global-search-wrapper",4,"ngIf"],[1,"advanced-global-search-wrapper"],[3,"panels","reInitTabsOnChange","initialTab","initOnlyActiveTab","style","materialWrapper",4,"ngIf"],[3,"panels","reInitTabsOnChange","initialTab","initOnlyActiveTab","materialWrapper"]],template:function(e,t){1&e&&(c.ed(0,bC,1,0,"lrn-global-search",0),c.ed(1,_C,2,1,"div",1)),2&e&&(c.Dc("ngIf",t.newGlobalSearchAvailable),c.Mb(1),c.Dc("ngIf",!t.newGlobalSearchAvailable))},directives:[m.p,mC,gs.a],encapsulation:2}),e})(),yC=(()=>{class e{constructor(e){this.router=e;let t=Di.a.getInstance(),i=t.get("original_url",null);if(i&&"/learn/home"!=i)t.remove("original_url"),i.startsWith("http")?window.location.href=i:i.indexOf("?hash=")>-1?this.router.navigateByUrl(i):this.router.navigate([i]);else{let t=o.a.getInstance().home_route;const i=e.routerState.snapshot.url.split("/learn/home;msg=");e.navigate(i.length>1&&void 0!==t[0]&&void 0!==i[1]?[t[0],{msg:i[1]}]:t)}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.h))},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var wC=i("AC4d");function CC(e,t){if(1&e&&c.fc(0,"img",12),2&e){const e=c.wc().$implicit;c.Ec("src",e.logo_url,c.Yc)}}function SC(e,t){1&e&&c.fc(0,"i",13)}const kC=function(e){return{"no-image":e}};function TC(e,t){if(1&e&&(c.kc(0,"a",5),c.xc(1,"sanitizeUrl"),c.kc(2,"div",6),c.ed(3,CC,1,1,"img",7),c.ed(4,SC,1,0,"i",8),c.jc(),c.kc(5,"div",9),c.kc(6,"ul"),c.kc(7,"li"),c.kc(8,"h4",10),c.gd(9),c.jc(),c.jc(),c.kc(10,"li"),c.kc(11,"span",11),c.gd(12),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()),2&e){const e=t.$implicit,i=c.wc();c.Dc("href",c.yc(1,7,i.multidomainUrl(e.domain_url)),c.Yc),c.Mb(2),c.Dc("ngClass",c.Ic(9,kC,!i.isStringValid(e.logo_url))),c.Mb(1),c.Dc("ngIf",i.isStringValid(e.logo_url)),c.Mb(1),c.Dc("ngIf",!i.isStringValid(e.logo_url)),c.Mb(5),c.jd("",e.name," ",i.prettyBranch(e.branch_path),""),c.Mb(3),c.id(" ",e.domain_url," ")}}const IC=function(e){return{category:"multidomain",domain:e}};let xC=(()=>{class e{constructor(e,t,i){this.backendService=e,this.docLayoutService=t,this.router=i,this.localStorage=Di.a.getInstance(),this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:Ii.a.selectMultidomain,href:this.router.url}])}ngOnInit(){this.init()}init(){this.sessionInstance=o.a.getInstance(),this.platformInstance=E.b.getInstance(),this.currentDomain=this.backendService.getBaseUrl(!1),this.defaultDomain={id:null,name:null,logo:null,domain:null,domain_type:null,org_chart:null,logo_url:this.platformInstance.branding_elements_root_domain.logo_url,domain_url:this.platformInstance.getPlatformBaseUrl(),branch_path:[]};const e=JSON.parse(localStorage.getItem("access_token"));this.accessToken=e?`/learn/home;type=oauth2_response;access_token=${e.access_token}`:"",this.backendService.getAvailableMultidomains({client_ids:this.sessionInstance.available_multidomains},this.sessionInstance.id).subscribe(e=>{var t,i;(null!==(i=null===(t=e.data.items)||void 0===t?void 0:t.length)&&void 0!==i?i:0)>0?this.availableDomains=e.data.items:(e.data.logos&&(this.defaultDomain.logo_url=e.data.logos.logo_url),this.availableDomains=[this.defaultDomain])},()=>{this.availableDomains=[this.defaultDomain]})}isStringValid(e){return e&&e.length>0}prettyBranch(e){return 0===e.length?"":`(${e.join("/")})`}multidomainUrl(e){let t="";return e.startsWith("http")||(t=`${window.location.protocol}//`),t+(e=e.replace("/lms/",""))+this.accessToken}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a),c.ec(j.a),c.ec(s.h))},e.\u0275cmp=c.Yb({type:e,selectors:[["multidomain-selector"]],decls:7,vars:7,consts:[[1,"multidomain-selector-wrapper"],[1,"multidomain-warning-message","bg-warning","text-white"],[1,"warning-sign","zmdi","zmdi-alert-triangle"],[1,"inner-text"],["target","_blank","class","mdl-grid bg-white border-grey domain-wrapper",3,"href",4,"ngFor","ngForOf"],["target","_blank",1,"mdl-grid","bg-white","border-grey","domain-wrapper",3,"href"],[1,"image-holder","mdl-cell","mdl-cell--2-col",3,"ngClass"],["style","max-width: 100%",3,"src",4,"ngIf"],["class","zmdi zmdi-image-alt text-white zmdi-hc-3x",4,"ngIf"],[1,"mdl-cell","mdl-cell--9-col"],[1,"bolded","text-blue","multidomain-title"],[1,"bolded","text-grey-mid","multidomain-url"],[2,"max-width","100%",3,"src"],[1,"zmdi","zmdi-image-alt","text-white","zmdi-hc-3x"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.fc(2,"i",2),c.kc(3,"span",3),c.gd(4),c.xc(5,"t"),c.jc(),c.jc(),c.ed(6,TC,13,11,"a",4),c.jc()),2&e&&(c.Mb(4),c.hd(c.zc(5,2,"You\u2019re NOT authorized to access {domain}. Please select a platform to which you can access from the following list.",c.Ic(5,IC,t.currentDomain))),c.Mb(2),c.Dc("ngForOf",t.availableDomains))},directives:[m.o,m.n,m.p],pipes:[M.b,wC.a],encapsulation:2}),e})();var DC=i("9ig3"),OC=i("EhJz"),EC=i("phiu"),AC=i("dndX"),PC=i("dLU1"),MC=i("IYaI"),LC=i("kJyz"),jC=i("aFRn");let RC=(()=>{class e{constructor(e,t,i,s,n,a){this._store=e,this.myCalendarActions=t,this.pageService=i,this.docLayoutService=s,this.router=n,this._toggleService=a,this.monthsDelta=3,this.refreshTimestamp=new Date,this.calendarData={events:new _t.a,colors:new _t.a,view:new _t.a,export:new _t.a,locale:new _t.a,dateTimeLocale:new _t.a,monthHasEvents:new _t.a},this.dataBrowserModes=Me.a,this.dataBrowserSource={mode:null,viewOptionLabel:null,filters:new je.a(null),appliedFiltersNumber:new je.a(null),displayedItemsNumber:new je.a(null),viewOptions:new je.a(null),disableViewOptions:!1,elementLabels:{singular:M.a.t("standard","_EVENT"),plural:M.a.t("menu","_EVENTS")}},this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:Ii.a.myCalendar,href:this.router.url}]),this.docLayoutService.header.showTitleBar({title:M.a.t("calendar","My Calendar"),subtitle:M.a.t("calendar","All your scheduled events are visible here"),icon:"zmdi-calendar",fullWidth:!1}),this.view="month",this.viewDate=new Date,this.startDate=this.getPrevMonthsFromDate(this.viewDate,this.monthsDelta),this.endDate=this.getNextMonthsFromDate(this.viewDate,this.monthsDelta)}onCalendarUpdate(e){const{view:t,viewDate:i,startDate:s,endDate:n,filters:a,forceRefreshData:o}=e;e={view:void 0!==t?t:this.view,viewDate:i,startDate:void 0!==s?Object(DC.a)(s):this.getPrevMonthsFromDate(i,this.monthsDelta),endDate:void 0!==n?Object(DC.a)(n):this.getNextMonthsFromDate(i,this.monthsDelta),filters:void 0!==a?a:this.activeFilters},this.updateViewOptionIfSearch(e.view),o&&(delete e.filters.search,this.activeFilters=e.filters),this.switchView(e.view,!1),this.view!==this.lastView&&this.dataBrowserSource.preselectedViewOption.setValue(this.view),(o||Object(OC.a)(e.viewDate,Object(EC.a)(this.endDate,1))||Object(AC.a)(e.viewDate,Object(PC.a)(this.startDate,1))||Object(OC.a)(new Date,Object(MC.a)(this.refreshTimestamp,10))||!Object(LC.a)(e.viewDate,this.viewDate))&&(this.refreshTimestamp=new Date,this.viewDate=e.viewDate,this.startDate=e.startDate,this.endDate=e.endDate,this._store.dispatch(this.myCalendarActions.updateMyCalendar(e)))}onEventsDisplayedChange(e){this.dataBrowserSource.displayedItemsNumber.next(e)}onFiltersUpdate(e){this.activeFilters=e,this._store.dispatch(this.myCalendarActions.updateMyCalendar({view:this.view,viewDate:this.viewDate,startDate:this.startDate,endDate:this.endDate,filters:this.activeFilters}))}onViewChange(e){this.switchView(e,!1)}switchView(e,t=!1){t?(this.view=this.lastView,this.dataBrowserSource.disableViewOptions=!1):("search"!==this.view&&(this.lastView=this.view),this.view=e,this.updateViewOptionIfSearch(e))}updateViewOptionIfSearch(e){this.dataBrowserSource.disableViewOptions="search"===e}getNextMonthsFromDate(e,t){return Object(PC.a)(Object(DC.a)(e),t)}getPrevMonthsFromDate(e,t){return Object(EC.a)(Object(DC.a)(e),t)}myCalendarReduxListener(){this.myCalendarSubscriber=this._store.select(ae.l).subscribe(e=>{e&&(this.currentState=e,"EVENTS_LOADED"===this.currentState.status&&(this.calendarData.events.next(this.currentState.events),this.calendarData.export.next(this.currentState.export),this.dataBrowserSource.appliedFiltersNumber.next(this.currentState.appliedFilters),this.currentState.filters&&void 0!==this.currentState.filters.search?this.switchView("search",!1):"search"===this.view&&this.switchView(this.lastView,!0)),"EVENTS_IN_YEAR_LOADED"===this.currentState.status&&this.calendarData.monthHasEvents.next(this.currentState.monthHasEvents),"EMPTY_EVENTS"===this.currentState.status&&(this.calendarData.events.next([]),this.calendarData.export.next("")))})}initDataBrowserDataSource(){this.dataBrowserSource.preselectedViewOption=new Ze.e;const e=[{title:M.a.t("standard","Refine"),code:"search",type:Me.d.free_search_filter,params:{placeholder:M.a.t("standard","Search within results...")}},{title:M.a.t("course","Course Type"),code:"type",type:Me.d.checkbox_with_dot_filter,params:{options:[{key:"elearning",label:M.a.t("standard","_ELEARNING"),labelColor:"blue",extraLabelInfo:M.a.t("standard","deadline")},{key:"classroom",label:M.a.t("standard","_CLASSROOM"),labelColor:"purple"},...this._toggleService.isOn(u.f.TOGGLE_WEBINARS_ENABLE_CREATION)?[{key:"webinar",label:M.a.t("standard","Webinar"),labelColor:"orange"}]:[]]},values:""}];this.dataBrowserSource.filters.next(e);const t=[{label:M.a.t("classroom","Monthly"),value:"month"},{label:M.a.t("classroom","Weekly"),value:"week"},{label:M.a.t("calendar","Agenda"),value:"agenda"}];this.dataBrowserSource.viewOptions.next(t)}ngOnInit(){this.myCalendarReduxListener(),this._store.dispatch(this.myCalendarActions.initMyCalendar({view:this.view,viewDate:this.viewDate,startDate:this.startDate,endDate:this.endDate,filters:this.activeFilters})),this.dataBrowserSource.mode=this.dataBrowserModes.over,this.dataBrowserSource.viewOptionLabel=M.a.t("standard","Display view")}ngAfterViewInit(){this.initDataBrowserDataSource(),this.calendarData.locale.next(o.a.getInstance().language),this.calendarData.dateTimeLocale.next(o.a.getInstance().datetime_format)}ngOnDestroy(){this.myCalendarSubscriber.unsubscribe(),this.docLayoutService.header.hideTitleBar()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(w.e),c.ec(Ts.d),c.ec(P.a),c.ec(j.a),c.ec(s.h),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["my-calendar"]],hostAttrs:["id","doc-page-my-calendar"],decls:3,vars:4,consts:[[1,"mdl-wrapper","data-browser-top-offset","my-calendar"],[3,"dataBrowserSource","onFiltersUpdate","onViewChange"],[3,"view","viewDate","calendarData","calendarUpdate","eventsDisplayed"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"data-browser",1),c.sc("onFiltersUpdate",function(e){return t.onFiltersUpdate(e)})("onViewChange",function(e){return t.onViewChange(e)}),c.kc(2,"docebo-calendar",2),c.sc("calendarUpdate",function(e){return t.onCalendarUpdate(e)})("eventsDisplayed",function(e){return t.onEventsDisplayedChange(e)}),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(1),c.Dc("dataBrowserSource",t.dataBrowserSource),c.Mb(1),c.Dc("view",t.view)("viewDate",t.viewDate)("calendarData",t.calendarData))},directives:[Fe.a,jC.a],styles:["dropdown .dropdown-body{width:auto!important}"],encapsulation:2}),e})();var FC=i("Wsbo"),NC=i("itXk"),UC=i("tJOn");function zC(e,t){if(1&e&&(c.fc(0,"div",2),c.xc(1,"t")),2&e){const e=c.wc();c.Dc("innerHTML",c.yc(1,1,e.description),c.Wc)}}let qC=(()=>{class e{ngOnInit(){e.dialogFormControl.setErrors({invalid:!0})}}return e.dialogFormControl=new Ze.e,e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["generate-recovery-key-dialog"]],inputs:{description:"description",otpFormControl:"otpFormControl",otpFieldParams:"otpFieldParams"},decls:2,vars:8,consts:[[3,"innerHTML",4,"ngIf"],[3,"label","value","type","floating_label","show_counter","showRequiredFieldIndicator","inputFormControl"],[3,"innerHTML"]],template:function(e,t){1&e&&(c.ed(0,zC,2,3,"div",0),c.fc(1,"textfield",1)),2&e&&(c.Dc("ngIf",t.description),c.Mb(1),c.Dc("label",t.otpFieldParams.label)("value",t.otpFieldParams.value)("type",t.otpFieldParams.type)("floating_label",t.otpFieldParams.floating_label)("show_counter",t.otpFieldParams.show_counter)("showRequiredFieldIndicator",t.otpFieldParams.showRequiredFieldIndicator)("inputFormControl",t.otpFieldParams.inputFormControl))},directives:[m.p,Ct.a],pipes:[M.b],encapsulation:2,changeDetection:0}),e})();var VC=i("jtHE");function BC(e,t){if(1&e&&(c.fc(0,"div",2),c.xc(1,"t")),2&e){const e=c.wc();c.Dc("innerHTML",c.yc(1,1,e.description),c.Wc)}}let GC=(()=>{class e extends vc.a{constructor(e){super(),this.changeDetector=e,this.toggleDetectChanges=new VC.a}ngOnInit(){e.dialogFormControl.setErrors({invalid:!0}),this.toggleDetectChanges.pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{this.changeDetector.markForCheck()})}ngOnDestroy(){super.ngOnDestroy()}}return e.dialogFormControl=new Ze.e,e.\u0275fac=function(t){return new(t||e)(c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["unpair-dialog"]],inputs:{description:"description",recoveryKeyFormControl:"recoveryKeyFormControl",recoveryKeyFieldParams:"recoveryKeyFieldParams"},features:[c.Jb],decls:2,vars:8,consts:[[3,"innerHTML",4,"ngIf"],[3,"label","value","type","floating_label","show_counter","showRequiredFieldIndicator","inputFormControl"],[3,"innerHTML"]],template:function(e,t){1&e&&(c.ed(0,BC,2,3,"div",0),c.fc(1,"textfield",1)),2&e&&(c.Dc("ngIf",t.description),c.Mb(1),c.Dc("label",t.recoveryKeyFieldParams.label)("value",t.recoveryKeyFieldParams.value)("type",t.recoveryKeyFieldParams.type)("floating_label",t.recoveryKeyFieldParams.floating_label)("show_counter",t.recoveryKeyFieldParams.show_counter)("showRequiredFieldIndicator",t.recoveryKeyFieldParams.showRequiredFieldIndicator)("inputFormControl",t.recoveryKeyFieldParams.inputFormControl))},directives:[m.p,Ct.a],pipes:[M.b],encapsulation:2,changeDetection:0}),e})();var HC=i("ubRZ"),$C=i("QTf/");function YC(e,t){if(1&e&&(c.fc(0,"p",4),c.xc(1,"t")),2&e){const e=c.wc(2);c.Dc("innerHTML",c.yc(1,1,e.description),c.Wc)}}function WC(e,t){if(1&e&&(c.ic(0),c.ed(1,YC,2,3,"p",2),c.kc(2,"ol",3),c.fc(3,"li",4),c.xc(4,"t"),c.kc(5,"li"),c.gd(6),c.xc(7,"t"),c.jc(),c.kc(8,"li"),c.gd(9),c.xc(10,"t"),c.kc(11,"div",5),c.fc(12,"qrcode",6),c.jc(),c.gd(13),c.xc(14,"t"),c.kc(15,"div",7),c.gd(16),c.jc(),c.jc(),c.kc(17,"li"),c.gd(18),c.xc(19,"t"),c.fc(20,"textfield",8),c.jc(),c.jc(),c.hc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",e.description),c.Mb(2),c.Dc("innerHTML",c.yc(4,17,e.stepsTranslations.downloadApp),c.Wc),c.Mb(3),c.hd(c.yc(7,19,e.stepsTranslations.openApp)),c.Mb(3),c.id(" ",c.yc(10,21,e.stepsTranslations.scanBarcode)," "),c.Mb(3),c.Dc("qrdata",e.qrCodeUri)("size",140)("level","M"),c.Mb(1),c.id(" ",c.yc(14,23,e.stepsTranslations.enterKey)," "),c.Mb(3),c.hd(e.secret),c.Mb(2),c.id(" ",c.yc(19,25,e.stepsTranslations.insertOtp)," "),c.Mb(2),c.Dc("label",e.otpFieldParams.label)("value",e.otpFieldParams.value)("type",e.otpFieldParams.type)("floating_label",e.otpFieldParams.floating_label)("show_counter",e.otpFieldParams.show_counter)("showRequiredFieldIndicator",e.otpFieldParams.showRequiredFieldIndicator)("inputFormControl",e.otpFieldParams.inputFormControl)}}function QC(e,t){if(1&e&&(c.ic(0),c.kc(1,"div",9),c.kc(2,"div",10),c.fc(3,"i",11),c.jc(),c.kc(4,"span",12),c.gd(5),c.xc(6,"t"),c.xc(7,"date"),c.jc(),c.jc(),c.kc(8,"div",13),c.fc(9,"rectangular-button",14),c.fc(10,"rectangular-button",14),c.jc(),c.hc()),2&e){const e=c.wc();c.Mb(5),c.jd("",c.yc(6,6,e.pairDateMessage)," ",c.yc(7,8,e.pairDate),""),c.Mb(4),c.Dc("properties",e.unpairAppButton.properties)("click",e.unpairAppButton.onClick),c.Mb(1),c.Dc("properties",e.generateRecoveryKeyButton.properties)("click",e.generateRecoveryKeyButton.onClick)}}function KC(e,t){if(1&e){const e=c.lc();c.ic(0),c.kc(1,"div",15),c.kc(2,"basic-button",16),c.sc("click",function(){return c.Vc(e),c.wc().activateAuthButton.onClick()}),c.jc(),c.jc(),c.hc()}if(2&e){const e=c.wc();c.Mb(2),c.Dc("type","normal")("state",e.otpFormControl.value?"enabled":"disabled")("text",e.activateAuthButton.properties.text)}}function JC(e,t){1&e&&(c.ic(0),c.fc(1,"widget-spinner"),c.hc())}let XC=(()=>{class e extends vc.a{constructor(e,t,i,s,n,a){super(),this._ref=e,this._backendService=t,this.docLayoutService=i,this._pageService=s,this._store=n,this._sessionActions=a,this.isLoading=!0,this.isPaired=!1,this.pairDate$=this._store.pipe(Object(w.q)(UC.k)),this.stepsTranslations={downloadApp:M.a.t("esignature","Download the Google Authenticator app from {playStoreLinkStart}Google Play Store{linkEnd} or {appStoreLinkStart}App Store{linkEnd}.",{playStoreLinkStart:'<a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2" target="_blank" class="bolded">',appStoreLinkStart:'<a href="https://itunes.apple.com/us/app/google-authenticator/id388497605" target="_blank" class="bolded">',linkEnd:"</a>"}),openApp:M.a.t("esignature","Open the app and tap the Add button"),scanBarcode:M.a.t("esignature","Select the Scan Barcode option"),enterKey:M.a.t("esignature","If you don't have a camera, you can manually enter the key:"),insertOtp:M.a.t("esignature","Insert here the 6-digit verification code (OTP) that you see in the app")},this.description=M.a.t("esignature","Pair your authenticator app. In this way, you'll be able to generate verification codes from your device."),this.pairDateMessage=M.a.t("esignature","An app appears to have been associated with your profile on"),this.activateAuthButton={properties:{text:M.a.t("esignature","Activate authenticator app"),colorScheme:"positive-green",typeStyle:"outline"},onClick:()=>{this.otpFormControl.value&&this._backendService.request("/manage/v1/2fa/apps/pairings","POST",{otp:this.otpFormControl.value}).subscribe(e=>{this._pageService.dialog.open(this.saveRecoveryKeyDialogParams(e.data.recovery_code))},e=>{const t=e.error.message.join(" ");1003===e.code?(this.otpFormControl.setErrors({remote:t}),this._ref.markForCheck()):this.docLayoutService.toast.showToast({message:t,type:"error"})})}},this.unpairAppButton={properties:{text:M.a.t("esignature","Unpair"),colorScheme:"positive-green",typeStyle:"outline"},onClick:()=>{this.recoveryKeyFormControl.reset(),this._pageService.dialog.open(this.unpairDialogParams)}},this.generateRecoveryKeyButton={properties:{text:M.a.t("esignature","Generate a New Recovery Key"),colorScheme:"positive-green",typeStyle:"outline"},onClick:()=>{this.otpFormControl.reset(),this._pageService.dialog.open(this.generateRecoveryKeyDialogParams)}},this.otpFormControl=new Ze.e(null,[Ze.x.required,Ze.x.minLength(6),Ze.x.maxLength(6)]),this.otpFieldParams={label:M.a.t("esignature","OTP"),value:"",type:et.a.NUMBER,floating_label:!0,show_counter:!1,showRequiredFieldIndicator:!0,inputFormControl:this.otpFormControl},this.recoveryKeyFormControl=new Ze.e(null,[Ze.x.required,Nc.a.authenticatorappRecoveryKey(),Ze.x.minLength(16),Ze.x.maxLength(16)]),this.recoveryKeyFieldParams={label:M.a.t("esignature","Recovery Key"),value:"",type:et.a.TEXT,floating_label:!0,show_counter:!1,showRequiredFieldIndicator:!0,inputFormControl:this.recoveryKeyFormControl}}saveRecoveryKeyDialogParams(e){return{width:460,height:300,title:M.a.t("esignature","{boldStart}Save Emergency Recovery Key{boldEnd}",{boldStart:"",boldEnd:""}),content:{component:Vc,params:{description:M.a.t("esignature","If you lose access to your phone, you won't be able to authenticate yourself without this key. Print, copy or write down this new recovery key without letting anyone see it."),recoveryKey:e}},type:"confirmation",show_confirmation_check:!0,confirmation_check_text:M.a.t("mobile","I saved the recovery key"),overlayClick:!1,top_padding_content:"0",actions:[{type:"normal",properties:{text:M.a.t("standard","Done")},handler:e=>{const t=M.a.t("esignature",this.isPaired?"Recovery key created successfully":"The authenticator app paired successfully. You can now authenticate yourself and complete courses that require an E-Signature.");this.docLayoutService.toast.showToast({message:t,type:"success"}),this.updateSession(),e.close()}}]}}get unpairDialogParams(){return{width:600,height:250,title:M.a.t("esignature","Unpair Authenticator App"),content:{component:GC,params:{recoveryKeyFormControl:this.recoveryKeyFormControl,recoveryKeyFieldParams:this.recoveryKeyFieldParams,description:M.a.t("esignature","To unpair your authenticator app, you need to enter your recovery key. If you need any help with the recovery key, contact your system administrator.")}},inputFormControl:GC.dialogFormControl,type:"confirmation",show_confirmation_check:!1,overlayClick:!0,top_padding_content:"0",actions:[{type:"cancel",properties:{text:M.a.t("standard","_CANCEL")},handler:e=>{e.close()}},{type:"submit",properties:{text:M.a.t("esignature","Unpair")},handler:e=>{GC.dialogFormControl.setErrors({invalid:!0}),this._backendService.request("/manage/v1/2fa/users/pairings","DELETE",{identifier:"authenticatorapp",recovery_code:this.recoveryKeyFormControl.value}).subscribe(t=>{this.docLayoutService.toast.showToast({message:M.a.t("esignature","Authenticator app unpaired successfully"),type:"success"}),this.updateSession(),e.close(),this.otpFormControl.reset(),GC.dialogFormControl.setErrors(null)},t=>{1005===t.code?(this.recoveryKeyFormControl.setErrors({remote:M.a.t("mobile","This recovery Key is not valid")}),this._ref.markForCheck()):(this.docLayoutService.toast.showToast({message:t.error.message.join(" "),type:"error"}),e.close())})}}]}}get generateRecoveryKeyDialogParams(){return{width:600,height:280,title:M.a.t("esignature","Generate a New Recovery Key"),content:{component:qC,params:{otpFormControl:this.otpFormControl,otpFieldParams:this.otpFieldParams,description:M.a.t("esignature","In order to generate a new recovery key, please insert here the 6-digit verification code (OTP) that you see in the app. {newLine} Are you sure you want to generate a new recovery key?",{newLine:"<br />"})}},inputFormControl:qC.dialogFormControl,type:"confirmation",show_confirmation_check:!1,overlayClick:!0,top_padding_content:"0",actions:[{type:"cancel",properties:{text:M.a.t("standard","_CANCEL")},handler:e=>{e.close()}},{type:"submit",properties:{text:M.a.t("app7020","Generate")},handler:e=>{this._backendService.request("/manage/v1/2fa/apps/recovery_codes","POST",{otp:this.otpFormControl.value}).subscribe(t=>{e.close(),this._pageService.dialog.open(this.saveRecoveryKeyDialogParams(t.data.recovery_code))},e=>{this.docLayoutService.toast.showToast({message:e.error.message.join(" "),type:"error"})})}}]}}ngOnInit(){this.updateSession(),this.pairDate$.pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{void 0!==e&&(this.pairDate=e,this.isPaired=!!this.pairDate,this.isLoading=!1,this.isPaired||(this.isLoading=!0,this.getAndSetSecrets()),this._ref.detectChanges())}),this.otpFieldParams.inputFormControl.statusChanges.pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{qC.dialogFormControl.setErrors("VALID"===e?null:{invalid:!0})}),this.recoveryKeyFieldParams.inputFormControl.statusChanges.pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{GC.dialogFormControl.setErrors("VALID"===e?null:{invalid:!0})})}updateSession(){this.isLoading=!0,this._ref.detectChanges(),this._store.dispatch(this._sessionActions.loadSession())}getAndSetSecrets(){this._backendService.request("/manage/v1/2fa/apps/secrets","GET").subscribe(e=>{const{qr_code_uri:t,secret:i}=e.data;this.isLoading=!1,this.qrCodeUri=t,this.secret=i,this._ref.detectChanges()},e=>{this.isLoading=!1,this.docLayoutService.toast.showToast({message:e.error.message.join(" "),type:"error"})})}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i),c.ec(I.a),c.ec(j.a),c.ec(P.a),c.ec(w.e),c.ec(HC.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["authenticator-app"]],features:[c.Jb],decls:5,vars:4,consts:[[1,"authenticator-wrap"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"steps"],[3,"innerHTML"],[1,"qr-code"],[3,"qrdata","size","level"],[1,"title-regular"],[3,"label","value","type","floating_label","show_counter","showRequiredFieldIndicator","inputFormControl"],[1,"app-associated-info"],[1,"fab-container"],[1,"fab-icon","zmdi","zmdi-devices"],[1,"bolded"],[1,"buttons-wrap"],[3,"properties","click"],[1,"authenticator-app-footer"],[3,"type","state","text","click"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.ed(1,WC,21,27,"ng-container",1),c.ed(2,QC,11,10,"ng-container",1),c.ed(3,KC,3,3,"ng-container",1),c.ed(4,JC,2,0,"ng-container",1),c.jc()),2&e&&(c.Mb(1),c.Dc("ngIf",!t.isLoading&&!t.isPaired),c.Mb(1),c.Dc("ngIf",!t.isLoading&&t.isPaired),c.Mb(1),c.Dc("ngIf",!t.isLoading&&!t.isPaired&&t.otpFormControl.dirty),c.Mb(1),c.Dc("ngIf",t.isLoading))},directives:[m.p,k,Ct.a,ts.a,Is.a,$C.a],pipes:[M.b,Vr.a],encapsulation:2,changeDetection:0}),e})();var ZC=i("DbCY"),eS=i("gUu9");const tS=["additionalFieldElements"];function iS(e,t){if(1&e){const e=c.lc();c.kc(0,"div",7),c.kc(1,"additional-field-renderer",12,13),c.sc("onChangeField",function(t){return c.Vc(e),c.wc(2).markFormAsDirty(t)})("onIframeOpen",function(){c.Vc(e);const i=t.$implicit,s=c.Sc(2);return c.wc(2).sendIframeMessageToParent(s.iframeWidget,i.iframeParams,i.id)}),c.jc(),c.jc()}if(2&e){const e=t.$implicit;c.Mb(1),c.Dc("id",e.id)("type",e.type)("labels",e.labels)("options",e.options)("value",e.value)("blankOption",e.blankOption)("visible_label",!0)("iframeParams",e.iframeParams)("inputFormControl",e.inputFormControl)("readOnly",!e.enabled)}}function sS(e,t){if(1&e&&(c.kc(0,"div",14),c.fc(1,"basic-button",15),c.fc(2,"basic-button",16),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("buttonType",e.buttonSave.buttonType)("type",e.buttonSave.type)("text",e.buttonSave.text),c.Mb(1),c.Dc("buttonType",e.buttonCancel.buttonType)("type",e.buttonCancel.type)("text",e.buttonCancel.text)("click",e.buttonCancel.onClick)}}function nS(e,t){if(1&e){const e=c.lc();c.kc(0,"form",5),c.sc("ngSubmit",function(){return c.Vc(e),c.wc().updateUserInformation()}),c.kc(1,"div",6),c.kc(2,"div",7),c.fc(3,"textfield",8),c.jc(),c.kc(4,"div",7),c.fc(5,"textfield",8),c.jc(),c.jc(),c.kc(6,"div",6),c.kc(7,"div",9),c.fc(8,"textfield",8),c.jc(),c.ed(9,iS,3,10,"div",10),c.jc(),c.ed(10,sS,3,7,"div",11),c.jc()}if(2&e){const e=c.wc();c.Dc("formGroup",e.myProfileInformation),c.Mb(3),c.Dc("id",e.firstNameField.id)("type",e.firstNameField.type)("label",e.firstNameField.label)("value",e.firstName)("floating_label",e.firstNameField.floating_label)("inputFormControl",e.myProfileInformation.controls.firstname),c.Mb(2),c.Dc("id",e.lastNameField.id)("type",e.lastNameField.type)("label",e.lastNameField.label)("value",e.lastName)("floating_label",e.lastNameField.floating_label)("inputFormControl",e.myProfileInformation.controls.lastname),c.Mb(2),c.bd(e.emailFieldBalloon.style),c.Dc("width",e.emailFieldBalloon.width)("position",e.emailFieldBalloon.position)("title",e.emailFieldBalloon.title)("text",e.emailFieldBalloon.text)("balloonGroup",e.emailFieldBalloon.balloonGroup),c.Mb(1),c.Dc("id",e.eMailField.id)("type",e.eMailField.type)("label",e.eMailField.label)("value",e.email)("floating_label",e.eMailField.floating_label)("inputFormControl",e.myProfileInformation.controls.email),c.Mb(1),c.Dc("ngForOf",e.additionalFields),c.Mb(1),c.Dc("ngIf",!e.myProfileInformation.pristine)}}function aS(e,t){if(1&e&&(c.kc(0,"div",17),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.id(" ",c.yc(2,1,e.formError)," ")}}function oS(e,t){1&e&&c.fc(0,"ui-spinner")}let rS=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this.fb=e,this.backendService=t,this.activatedRoute=i,this.changeDetector=s,this.bootstrapService=n,this.pageService=a,this.docLayoutService=o,this._stripTags=r,this.additionalFields=[],this.fieldsLoaded=!1,this.iframeSubmitState="disabled",this.snackbarSuccess=M.a.t("standard","Your details are successfully updated."),this.iframe_data=[],this.emailFieldBalloon={style:"main",width:290,position:"top-left",title:M.a.t("standard","Email address"),text:M.a.t("standard","Associate a valid email address with your profile"),showOnClick:!0,balloonGroup:"my-profile"},this.hasUnfilledMandatoryFields=!1,this.fieldsToBeHtmlStripped=["firstname","lastname","email","additional_fields"];const c=M.a.t("standard","_SAVE"),l=M.a.t("standard","_CANCEL"),d=M.a.t("standard","Email"),u=M.a.t("standard","Last Name"),h=M.a.t("standard","First Name");M.a.t("standard","Your details are successfully updated."),this.firstNameField={type:"text",floating_label:!0,id:"first-name-field",label:h},this.lastNameField={type:"text",floating_label:!0,id:"last-name-field",label:u},this.eMailField={type:"text",floating_label:!0,id:"email-field",label:d},this.buttonSave={type:"normal",text:c,buttonType:"submit"},this.buttonCancel={type:"cancel",text:l,buttonType:"button",onClick:()=>{this.buttonCancelFunction()}},this.activatedRoute.params.forEach(e=>{this.isPanelOpenTriggeredByRoute=e.user_details})}sessionReady(){let e,t;this.sessionInstance=o.a.getInstance(),this.hasUnfilledMandatoryFields=E.b.getInstance().settings.request_mandatory_fields_completion&&this.sessionInstance.has_unfilled_fields,this.firstName=this.sessionInstance.firstname,this.lastName=this.sessionInstance.lastname,this.email=this.sessionInstance.email,E.b.getInstance().settings.registration_settings.options.lastfirst_mandatory&&(e=Ze.x.required),this.sessionInstance.isCurrentUserA(this.sessionInstance.LEVEL_SUPERADMIN)&&(t=Ze.x.required),this.myProfileInformation=this.fb.group({firstname:[this.firstName,e],lastname:[this.lastName,e],email:[this.email,t]}),this.isPanelOpenTriggeredByRoute&&this.myProfileInformation.markAsDirty()}ngOnDestroy(){this.userFieldsSubscription&&this.userFieldsSubscription.unsubscribe()}isValueSet({value:e,mandatory:t}){return!t||null===e||0===Number(e)||void 0===e}isDropDownField(e){return"dropdown"===e||"country"===e||"yesno"===e}ngOnInit(){this.sessionReady(),this.loadAdditionalFields(),this.changeDetector.detectChanges()}loadAdditionalFields(){let e={as_array:1};e.user_id=o.a.getInstance().id,e.skip_all=1,this.userFieldsSubscription=this.backendService.request("/manage/v1/user_fields","GET",e).subscribe(e=>{this.additionalFields=[];const t=[],i=e.data;for(let s of i)t.push(new Ze.h({[s.id]:new Ze.e(s.value)}));this.myProfileInformation.addControl("additional_fields",this.fb.array(t));for(let s=0;s<i.length;s++){const e=i[s];let t={};e.mandatory&&this.myProfileInformation.controls.additional_fields.controls[s].controls[e.id].setValidators([Ze.x.required]);let n={};if(n[o.a.getInstance().language]=e.title,t={id:e.id,labels:n,type:e.type,value:e.value,inputFormControl:this.myProfileInformation.controls.additional_fields.controls[s].controls[e.id],enabled:!!Object(ot.isUndefined)(e.enabled)||e.enabled},this.isDropDownField(e.type)&&("yesno"!==e.type&&(t.options=e.options),t.blankOption={has_blank_option:this.isValueSet(e),blank_option_config:{label:M.a.t("standard","Select an option"),value:"yesno"!==e.type||e.mandatory?null:0}}),"iframe"===e.type&&e.settings){let i;console.log("ITEM",e.iframe_url),i=JSON.parse(e.settings);const s=[{properties:{text:M.a.t("standard","Cancel")},handler:e=>{this.iframe_data=[],this.loadAdditionalFields(),e.hide()}},{type:"positive",properties:{text:M.a.t("standard","Save and Close")},handler:e=>{this.saveIframeData(),e.hide()}}];t.iframeParams={width:"90%",height:i&&i.iframe_height?Number(i.iframe_height)+127:"90%",title:i?i.field_name:"Iframe name",content:{component:ys.a,params:{widget:{params:{iframeHeight:i?i.iframe_height:"90%",iframeUrl:e.iframe_url}}}},type:"confirmation",show_confirmation_check:!1,actions:s}}this.additionalFields.push(t)}this.fieldsLoaded=!0})}saveIframeData(){if(void 0!==this.iframe_data[0]){const e={id:this.iframe_data[0].iframe_id,value:JSON.stringify(this.iframe_data[0].value)},t=[];t.push(e);const i=o.a.getInstance().id;this.backendService.request(`/manage/v1/user/${i}`,"PUT",{additional_fields:t}).subscribe(e=>{this.fieldsLoaded=!1,this.loadAdditionalFields()})}this.docLayoutService.toast.showToast({message:this.snackbarSuccess,type:"success"})}listenerParent(e,t){window,window,window.addEventListener("message",t=>{this.iframeSubmitState="normal",this.iframe_data=[],this.iframe_data.push({iframe_id:e,value:t.data})})}sendIframeMessageToParent(e,t,i){if(!e)return;const s=t.content.params.widget.params.iframeUrl,n=o.a.getInstance().id;this.listenerParent(i,s),e.onIframeLoad.pipe(Object(se.a)(1)).subscribe(e=>{this.backendService.request(`/manage/v1/user/${n}`,"GET").subscribe(t=>{e.contentWindow.postMessage(t.data,s)})})}updateUserInformation(){const e=M.a.t("standard","The form data is not valid");if(this.stripHtmlContentFromFormControls(this.fieldsToBeHtmlStripped,this.myProfileInformation.controls),this.myProfileInformation.valid){const e=this.myProfileInformation.getRawValue(),t=[];for(let s of e.additional_fields)for(let e in s)s.hasOwnProperty(e)&&t.push({value:void 0!==s[e]?s[e]:null,id:e}),this.iframe_data&&this.iframe_data.filter(i=>{i.iframe_id===e&&t.push({id:e,value:JSON.stringify(i.value)})});const i=Object.assign({},e,{additional_fields:t});this.backendService.changeUserInformation(i,o.a.getInstance().id).subscribe(e=>{e.error||(this.docLayoutService.toast.showToast({message:this.snackbarSuccess,type:"success"}),this.formError=null,E.b.getInstance().settings.request_mandatory_fields_completion&&o.a.getInstance().has_unfilled_fields&&this.rebootAppIfNeeded(),this.sessionInstance.setUserInfo(i))},e=>{this.formError=Array.isArray(e.message)?e.message[0]:e.message.message,this.docLayoutService.toast.showToast({message:this.formError,type:"error"})})}else{for(let e in this.additionalFields)this.myProfileInformation.controls.additional_fields.controls[e].controls[this.additionalFields[e].id].markAsTouched();this.docLayoutService.toast.showToast({message:e,type:"error"})}}buttonCancelFunction(){r.a.singleton.publish({event_type:"toggle-accordion",sender_id:"my-profile",data:{index:"0",reload:!0}})}rebootAppIfNeeded(){this.docLayoutService.dialog.showCommonDialog({title:M.a.t("standard","Platform Reload"),content:M.a.t("standard",'Your settings are saved, but for the changes to be applied the page needs to reload. By clicking on "Confirm" the page will reload to apply the changes you\'ve made. Are you sure you want to proceed?'),showConfirmationCheck:!0,requireConfirmation:!0,confirmationLabel:M.a.t("standard","Yes I'm sure and I want to proceed"),actions:[{id:"cancel",type:"neutral",label:M.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"positive",label:M.a.t("standard","Confirm"),slot:"end"}]}).subscribe(e=>{e.actionSuccess.next(!0),"confirm"===e.actionID&&this.bootstrapService.reboot()})}markFormAsDirty(e){for(let t in this.additionalFields)this.additionalFields[t].type===e.type&&this.additionalFields[t].value!==e.value&&this.myProfileInformation.markAsDirty()}stripHtmlContentFromFormControls(e,t){e.forEach(e=>{if(t[e]){if("additional_fields"===e)return void(t[e].controls&&Array.isArray(t[e].controls)&&t[e].controls.forEach((i,s)=>{t[e].controls[s].setValue(this.stripHtmlContentFromAdditionalFields(i.value))}));t[e].setValue(this._stripTags.transform(t[e].value)),"firstname"!==e&&"lastname"!==e||t[e].setValue(this.purifySSTI(t[e].value))}})}stripHtmlContentFromAdditionalFields(e){for(const t in e)e.hasOwnProperty(t)&&e[t]&&"string"==typeof e[t]&&(e[t]=this._stripTags.transform(e[t]));return e}purifySSTI(e){return e?e.replace(/\{\{((.|\s)*)\}\}/g,""):""}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Ze.d),c.ec(I.a),c.ec(s.a),c.ec(c.i),c.ec(le.a),c.ec(P.a),c.ec(j.a),c.ec(Cb.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["my-profile-information"]],viewQuery:function(e,t){if(1&e&&c.nd(tS,1),2&e){let e;c.Rc(e=c.tc())&&(t.additionalFieldElements=e.first)}},features:[c.Lb([Cb.a])],decls:5,vars:3,consts:[[1,"profile-wrap"],["class","myprofile-info",3,"formGroup","ngSubmit",4,"ngIf"],["class","text-error",4,"ngIf"],[1,"loader"],[4,"ngIf"],[1,"myprofile-info",3,"formGroup","ngSubmit"],[1,"form-row","mdl-grid"],[1,"mdl-cell","mdl-cell--6-col","mdl-cell--12-col-tablet","mdl-cell--12-col-phone"],[3,"id","type","label","value","floating_label","inputFormControl"],["balloon","",1,"mdl-cell","mdl-cell--6-col","mdl-cell--12-col-tablet","mdl-cell--12-col-phone",3,"width","position","title","text","balloonGroup"],["class","mdl-cell mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone",4,"ngFor","ngForOf"],["class","form-row form-profile-buttons border-grey",4,"ngIf"],[3,"id","type","labels","options","value","blankOption","visible_label","iframeParams","inputFormControl","readOnly","onChangeField","onIframeOpen"],["additionalFieldElements",""],[1,"form-row","form-profile-buttons","border-grey"],[3,"buttonType","type","text"],[3,"buttonType","type","text","click"],[1,"text-error"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.ed(1,nS,11,28,"form",1),c.ed(2,aS,3,3,"div",2),c.kc(3,"div",3),c.ed(4,oS,1,0,"ui-spinner",4),c.jc(),c.jc()),2&e&&(c.Mb(1),c.Dc("ngIf",t.fieldsLoaded),c.Mb(1),c.Dc("ngIf",t.myProfileInformation&&!t.myProfileInformation.valid),c.Mb(2),c.Dc("ngIf",!t.fieldsLoaded))},directives:[m.p,Ze.y,Ze.p,Ze.i,Ct.a,ZC.a,m.o,eS.a,Is.a,b.Be],pipes:[M.b],encapsulation:2}),e})();var cS=i("96ns"),lS=i("A+3w"),dS=i("ked7"),uS=i("b+L+"),hS=i("U7Ls"),pS=i("f2BR");const gS=["singleSelector"],mS=["multiSelect"];function bS(e,t){if(1&e&&(c.kc(0,"div",8),c.fc(1,"basic-button",9),c.fc(2,"basic-button",9),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.cancelFormButtonParams.type)("text",e.cancelFormButtonParams.text)("click",e.cancelFormButtonParams.onClick),c.Mb(1),c.Dc("type",e.saveFormButtonParams.type)("text",e.saveFormButtonParams.text)("click",e.saveFormButtonParams.onClick)}}let fS=(()=>{class e extends vc.a{constructor(e,t,i,s,n,a,r){super(),this.fb=e,this.improvementAreasProfilingService=t,this.pageService=i,this.docLayoutService=s,this.appStore=n,this.cdr=a,this.toggleService=r,this.singleSelectorSource=[],this.singleSelectorShowLoader=!1,this.multiSelectSource=[],this.multiSelectShowLoader=!1,this.saveFormButtonParams={type:"normal",text:M.a.t("standard","Save Changes"),onClick:()=>{this.myProfileAreasForm.valid&&this.selectedSkills.length>0&&this.selectedSkills.length<=10?this.saveFormChanges():Object(Cy.l)(this.myProfileAreasForm)}},this.cancelFormButtonParams={type:"cancel",text:M.a.t("standard","Cancel"),onClick:()=>{this.resetFormInitialValues()}},this.session=o.a.getInstance(),this.selectedSkills=[],this.multiSelectChangeSubject$=new _t.a,this.searchAvailableSkills=[],this.addedSkills=[],this.processDataFromSession(),this.subscribeToMultiSelectChanges()}ngOnInit(){this.initForm(),this.singleSelectorParams={floatingLabel:!0,label:M.a.t("standard","_ACTIVITY"),maxLength:50,showCounter:!0,showRequiredFieldIndicator:!0,inputFormControl:this.myProfileAreasForm.get("occupation")},this.multiSelectParams={label:M.a.t("standard","My Areas of Interest"),floatingLabel:!0,maxSelectableItems:10,mode:lS.a.AUTOCOMPLETE,showCounter:!0,multiSelector:"dropdown",placeholder:M.a.t("standard","Type here..."),inputFormControl:this.myProfileAreasForm.get("skills")}}ngAfterViewInit(){this.selectInitialMultiSelectItems(),this.multiSelect.autocompleteInput.nativeElement.blur(),this.cdr.detectChanges()}onSingleSelectorChanged(e){this.singleSelectorSource=[],this.selectedOccupation=void 0,e.length>=3&&this.fetchOccupations(e)}onSingleSelectorItemSelected(e){this.selectedOccupation=this.suggestedOccupations.find(t=>t.code===e.id)}onMultiSelectAddition(e){if(-1===this.selectedSkills.findIndex(t=>t.code===e.id)){const t=this.searchAvailableSkills.find(t=>t.code===e.id);t&&(this.selectedSkills.push(t),this.addedSkills.push(t),this.myProfileAreasForm.markAsDirty())}this.selectedSkills=[...this.selectedSkills]}onMultiSelectSubtraction(e){this.selectedSkills=this.selectedSkills.filter(t=>t.code!==e.id),this.addedSkills=this.addedSkills.filter(t=>t.code!==e.id),this.myProfileAreasForm.markAsDirty()}onMultiSelectChange(e){this.multiSelectChangeSubject$.next(e)}subscribeToMultiSelectChanges(){this.multiSelectChangeSubject$.pipe(Object(yt.a)(500),Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{var t;this.multiSelectSource=[],e.replace(/\s/g,"").length>=3&&(this.multiSelectShowLoader=!0,this.canonicalCode=this.selectedOccupation&&!this._isSkillsToggleOn&&null!==(t=this.selectedOccupation.canonicalCode)&&void 0!==t?t:null,this.improvementAreasProfilingService.getSkills(e,this.canonicalCode).pipe(Object(se.a)(1)).subscribe(e=>{this.searchAvailableSkills=[];const t=[];e.forEach(e=>{t.push({id:e.code,name:e.name})}),this.searchAvailableSkills=e,this.multiSelectSource=[...t],this.multiSelectShowLoader=!1},()=>{this.improvementAreasProfilingService.showGenericSnackbarError(),this.multiSelectShowLoader=!1}))})}fetchOccupations(e){this.singleSelectorShowLoader=!0,this.improvementAreasProfilingService.getOccupations(e).pipe(Object(se.a)(1)).subscribe(t=>{this.singleSelectorSource=[],this.suggestedOccupations=t,this.suggestedOccupations.forEach(e=>{this.singleSelectorSource.push({id:e.code,title:e.name})}),this.singleSelectorSource.find(t=>t.title.toLowerCase()===e.toLowerCase())||this.singleSelectorSource.unshift({id:"",title:e,prefix:M.a.t("standard","Use:")}),this.singleSelectorSource=[...this.singleSelectorSource],this.singleSelectorShowLoader=!1},()=>{this.improvementAreasProfilingService.showGenericSnackbarError(),this.singleSelectorShowLoader=!1})}processDataFromSession(){this.sessionObjectives=this.session.objectives,this.selectedOccupation=this.sessionObjectives&&this.sessionObjectives.occupation?this.sessionObjectives.occupation:void 0,this.sessionOccupationName=this.sessionObjectives&&this.sessionObjectives.occupation?this.sessionObjectives.occupation.name:"",this.sessionImprovementAreas=this.sessionObjectives&&this.sessionObjectives.areasOfImprovement?this.sessionObjectives.areasOfImprovement:[]}initForm(){this.myProfileAreasForm=this.fb.group({occupation:[this.sessionOccupationName,Ze.x.compose([Ze.x.required,Ze.x.maxLength(50)])],skills:[]})}selectInitialMultiSelectItems(){this.sessionImprovementAreas&&this.sessionImprovementAreas.forEach(e=>{this.selectedSkills.push(e),this.multiSelect.select({id:e.code,name:e.name})})}resetFormInitialValues(){const e=this.myProfileAreasForm.get("occupation"),t=this.myProfileAreasForm.get("skills");this.multiSelect.removeAllItems(),this.selectInitialMultiSelectItems(),this.selectedSkills=this.sessionImprovementAreas?[...this.sessionImprovementAreas]:[],this.clearAddedSkills(),e.setValue(this.sessionOccupationName,{emitEvent:!1}),t.setValue(this.sessionImprovementAreas,{emitEvent:!1}),this.myProfileAreasForm.markAsPristine(),this.myProfileAreasForm.markAsUntouched(),this.singleSelector.updateTextFieldCounter()}saveFormChanges(){if(this.selectedOccupation)this.checkForAddedSkills();else{const e=this.myProfileAreasForm.get("occupation");this.improvementAreasProfilingService.createOccupation(e.value).pipe(Object(se.a)(1)).subscribe(e=>{this.selectedOccupation=e,this.checkForAddedSkills()},()=>{this.improvementAreasProfilingService.showGenericSnackbarError()})}}checkForAddedSkills(){this.addedSkills.length>0?this.openSkillsRatingDialog():this.saveProfiling()}clearAddedSkills(){this.addedSkills=[]}openSkillsRatingDialog(){const e={id:"improvement-areas-skills-rating",width:448,height:"auto",content:{params:{skills:this.addedSkills},component:cS.a},type:"confirmation",overlayClick:!1,scrollable:!0,contentMaxHeight:388,actions:[{type:"cancel",properties:{text:M.a.t("standard","Cancel")},handler:e=>{e.close()}},{type:"normal",properties:{text:M.a.t("standard","Save")},handler:e=>{this.saveProfiling(e)}}]};this.pageService.dialog.open(e)}saveProfiling(e){const t=this.selectedOccupation;e&&(e.showFullOverlayLoader=!0),this.improvementAreasProfilingService.saveProfiling(t,this.selectedSkills).pipe(Object(se.a)(1)).subscribe(e=>{const t=e.occupation,i=e.areasOfImprovement;this.appStore.dispatch(dS.a.submitAreasOfImprovement()),this.session.objectives&&(this.session.objectives.areasOfImprovement=i,this.sessionImprovementAreas=i,this.session.objectives.occupation=t,this.sessionOccupationName=t.name),this.session.skills&&(this.session.skills.userIsProfiled=!0),this.pageService.dialog.isOpened&&this.pageService.dialog.close(),this.clearAddedSkills(),this.docLayoutService.toast.showToast({message:M.a.t("standard","Your details are successfully updated."),type:"success"}),this.multiSelect.innerControl.reset(""),this.myProfileAreasForm.markAsPristine()},()=>{this.improvementAreasProfilingService.showGenericSnackbarError(),e&&(e.showFullOverlayLoader=!1)})}get _isSkillsToggleOn(){return this.toggleService.isOn(u.f.TOGGLE_SKILLS_PHASE_1_1)}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Ze.d),c.ec(uS.a),c.ec(P.a),c.ec(j.a),c.ec(w.e),c.ec(c.i),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["myprofile-improvement-areas"]],viewQuery:function(e,t){if(1&e&&(c.nd(gS,1),c.nd(mS,1)),2&e){let e;c.Rc(e=c.tc())&&(t.singleSelector=e.first),c.Rc(e=c.tc())&&(t.multiSelect=e.first)}},features:[c.Jb],decls:10,vars:23,consts:[[1,"myprofile-info",3,"formGroup"],[1,"form-row","mdl-grid"],[1,"mdl-cell","mdl-cell--12-col","mdl-cell--12-col-tablet","mdl-cell--12-col-phone"],[3,"label","source","floatingLabel","maxLength","showCounter","showRequiredFieldIndicator","inputFormControl","showLoader","itemSelected","inputChanged"],["singleSelector",""],["id","discover-profile-skill",3,"label","placeholder","floating_label","mode","showRequiredFieldIndicator","max_selectable_items","source","showCounter","inputFormControl","applyLoaderOffset","showLoader","applySourceRegex","suggestionsMaxHeight","onItemSelection","onItemDeletion","onChange"],["multiSelect",""],["class","form-row form-profile-buttons",4,"ngIf"],[1,"form-row","form-profile-buttons"],[3,"type","text","click"]],template:function(e,t){1&e&&(c.kc(0,"form",0),c.kc(1,"div",1),c.kc(2,"div",2),c.kc(3,"textfield-single-selector",3,4),c.sc("itemSelected",function(e){return t.onSingleSelectorItemSelected(e)})("inputChanged",function(e){return t.onSingleSelectorChanged(e)}),c.jc(),c.jc(),c.jc(),c.kc(5,"div",1),c.kc(6,"div",2),c.kc(7,"multi-select",5,6),c.sc("onItemSelection",function(e){return t.onMultiSelectAddition(e)})("onItemDeletion",function(e){return t.onMultiSelectSubtraction(e)})("onChange",function(e){return t.onMultiSelectChange(e)}),c.jc(),c.jc(),c.jc(),c.ed(9,bS,3,6,"div",7),c.jc()),2&e&&(c.Dc("formGroup",t.myProfileAreasForm),c.Mb(3),c.Dc("label",t.singleSelectorParams.label)("source",t.singleSelectorSource)("floatingLabel",t.singleSelectorParams.floatingLabel)("maxLength",t.singleSelectorParams.maxLength)("showCounter",t.singleSelectorParams.showCounter)("showRequiredFieldIndicator",t.singleSelectorParams.showRequiredFieldIndicator)("inputFormControl",t.singleSelectorParams.inputFormControl)("showLoader",t.singleSelectorShowLoader),c.Mb(4),c.Dc("label",t.multiSelectParams.label)("placeholder",t.multiSelectParams.placeholder)("floating_label",t.multiSelectParams.floatingLabel)("mode",t.multiSelectParams.mode)("showRequiredFieldIndicator",!0)("max_selectable_items",t.multiSelectParams.maxSelectableItems)("source",t.multiSelectSource)("showCounter",t.multiSelectParams.showCounter)("inputFormControl",t.multiSelectParams.inputFormControl)("applyLoaderOffset",!0)("showLoader",t.multiSelectShowLoader)("applySourceRegex",!1)("suggestionsMaxHeight",134),c.Mb(2),c.Dc("ngIf",t.myProfileAreasForm.dirty))},directives:[Ze.y,Ze.p,Ze.i,hS.a,pS.a,m.p,Is.a],encapsulation:2}),e})();var _S=i("nhDY");const vS=["affiliate"];let yS=(()=>{class e{constructor(e,t,i,s){this.fb=e,this.docLayoutService=t,this.backendService=i,this.formatterService=s}ngOnInit(){this.affiliateForm=this.fb.group({code:[""]}),this.affiliateCode={type:"text",id:"affiliate_code",floating_label:!0,label:M.a.t("standard","Add Affiliate Code")},this.buttonSave={type:"normal",text:M.a.t("standard","Add Code"),buttonType:"submit",onClick:()=>{this.addCode()}},this.tableParams={columns:this.getColumns(),source:new wS(1,[{column_id:"name",order:"asc"}],3,this.backendService),row_actions:this.getRowActions(),enable_massive_actions:!1,massive_actions:this.getMassiveActions()}}getColumns(){return[{id:"partner_name",name:M.a.t("standard","Partner Name"),is_sortable:!1,renderer:this.renderJSON},{id:"partner_discount",name:M.a.t("standard","Default Discount"),is_sortable:!1,renderer:this.renderDiscount},{id:"affiliate_since",name:M.a.t("standard","Affiliate Since"),is_sortable:!1,renderer:e=>Object(ui.a)(this.formatterService,e,"dateTime",{disableRelativeTime:!0})}]}getRowActions(){return[{id:"delete",title:M.a.t("standard","Delete"),icon_color:"red",icon:"delete",action:e=>{console.log(e),this.deleteAffiliateId=e.id,this.docLayoutService.dialog.showCommonDialog({title:M.a.t("standard","Delete content partner"),content:M.a.t("standard","Do you want to delete the affiliation?"),showConfirmationCheck:!0,requireConfirmation:!0,confirmationLabel:M.a.t("standard","Yes, I want to proceed"),actions:[{id:"cancel",type:"neutral",label:M.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"positive",label:M.a.t("standard","Confirm"),slot:"end"}]}).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.deletePartner().then(t=>{e.actionSuccess.next(t)})})}}]}getMassiveActions(){return[]}renderJSON(e){const t=JSON.parse(e),i=o.a.getInstance().language;return"single_value"===t.type?t.value:t.values[i]?t.values[i]:t.values.en}renderDiscount(e){return parseInt(e)+"%"}addCode(){let e=this.affiliateForm.getRawValue();""!==e.code?this.backendService.request("/manage/v1/contentpartners/affiliation","POST",e).subscribe(e=>{this.affiliate.refreshTable(),this.docLayoutService.toast.showToast({message:M.a.t("standard","Affiliate code successfuly added"),type:"success"}),this.affiliateForm.controls.code.setValue("")},e=>{this.docLayoutService.toast.showToast({message:e.error.message[0],type:"error"})}):this.docLayoutService.toast.showToast({message:M.a.t("standard","You need to enter affiliate code"),type:"error"})}deletePartner(){return new Promise(e=>{this.backendService.request("/manage/v1/contentpartners/affiliation","DELETE",{affiliation_ids:[this.deleteAffiliateId]}).subscribe(t=>{this.affiliate.refreshTable(),this.affiliate.getLoadDataObservable().pipe(Object(se.a)(1)).subscribe(t=>{e(!0),this.docLayoutService.toast.showToast({type:"success",message:M.a.t("user_management","Affiliation has been successfully deleted")})})},t=>{e(!1),this.docLayoutService.toast.showToast({type:"error",message:this.errorMessages(t.error.message)})})})}errorMessages(e){let t="";for(let i=0;i<e.length;i++)t+=e[i];return t}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Ze.d),c.ec(j.a),c.ec(I.a),c.ec(ni.b))},e.\u0275cmp=c.Yb({type:e,selectors:[["partners-content"]],viewQuery:function(e,t){if(1&e&&c.nd(vS,1),2&e){let e;c.Rc(e=c.tc())&&(t.affiliate=e.first)}},decls:7,vars:14,consts:[[1,"content-partners"],[3,"id","type","label","floating_label","inputFormControl"],[1,"text-right"],[3,"buttonType","type","text","click"],[1,"wrap-table","affiliates"],[3,"columns","row_actions","massive_actions","source","enable_massive_actions"],["affiliate",""]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.fc(1,"textfield",1),c.kc(2,"div",2),c.fc(3,"basic-button",3),c.jc(),c.kc(4,"div",4),c.fc(5,"core-table",5,6),c.jc(),c.jc()),2&e&&(c.Mb(1),c.Dc("id",t.affiliateCode.id)("type",t.affiliateCode.type)("label",t.affiliateCode.label)("floating_label",t.affiliateCode.floating_label)("inputFormControl",t.affiliateForm.controls.code),c.Mb(2),c.Dc("buttonType",t.buttonSave.buttonType)("type",t.buttonSave.type)("text",t.buttonSave.text)("click",t.buttonSave.onClick),c.Mb(2),c.Dc("columns",t.tableParams.columns)("row_actions",t.tableParams.row_actions)("massive_actions",t.tableParams.massive_actions)("source",t.tableParams.source)("enable_massive_actions",t.tableParams.enable_massive_actions))},directives:[Ct.a,Is.a,_S.a],encapsulation:2}),e})();class wS extends ui.b{constructor(e=0,t,i,s,n){super(e,t,i,s,n),this.current_page=e,this.sort_by=t,this.page_size=i,this.serviceProvider=s,this.columns=n}fetchData(e){return this.serviceProvider.request("/manage/v1/contentpartners/affiliation","GET",e).pipe(Object(di.a)(e=>e.data))}}function CS(e,t){if(1&e&&(c.kc(0,"div",7),c.fc(1,"basic-button",8),c.fc(2,"basic-button",9),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("buttonType",e.buttonSave.buttonType)("type",e.buttonSave.type)("text",e.buttonSave.text)("buttonType",e.buttonSave.buttonType),c.Mb(1),c.Dc("buttonType",e.buttonCancel.buttonType)("type",e.buttonCancel.type)("text",e.buttonCancel.text)("buttonType",e.buttonCancel.buttonType)("click",e.buttonCancel.onClick)}}let SS=(()=>{class e{constructor(e,t,i,s,n){this.fb=e,this.el=t,this.backendService=i,this.bootstrapService=s,this.docLayoutService=n,this.myProfilePassword=e.group({currentPassword:["",Ze.x.required],newPassword:["",Ze.x.required],newReTypePassword:["",Ze.x.required]},{validator:Nc.a.mismatchedPasswords("newPassword","newReTypePassword")});let a=M.a.t("standard","_SAVE"),o=M.a.t("standard","cancel"),r=M.a.t("standard","Your password is successfully updated."),c=M.a.t("standard","Your current password"),l=M.a.t("standard","Choose a password"),d=M.a.t("standard","Re-type the new password");this.currentPassword={type:"password",id:"password-current",floating_label:!0,label:c},this.newPassword={type:"password",id:"password-new",floating_label:!0,label:l},this.newReTypePassword={type:"password",id:"password-new-retype",floating_label:!0,label:d},this.buttonSave={type:"normal",text:a,buttonType:"submit"},this.buttonCancel={type:"cancel",text:o,buttonType:"button",onClick:()=>{this.buttonCancelFunction()}},this.snackbarSuccess={message:r,type:"success"}}buttonCancelFunction(){r.a.singleton.publish({event_type:"toggle-accordion",sender_id:"my-profile",data:{index:"1",reload:!0}})}sessionReady(){return this.sessionInstance=o.a.getInstance(),this.sessionInstance}setPassword(){this.formError=null;const e=M.a.t("standard","The password data is not valid");if(this.myProfilePassword.valid){let e=this.myProfilePassword.controls.currentPassword.value,t=this.myProfilePassword.controls.newReTypePassword.value,i=this.sessionReady().email;this.backendService.changePassword(i,e,t).subscribe(e=>{e.error||this.backendService.passwordRenewed().subscribe(e=>{this.docLayoutService.toast.showToast({message:this.snackbarSuccess.message,type:"success"}),E.b.getInstance().disable_simultaneous_access?this.backendService.handleApiErrors({error:{code:101},status:401}):o.a.getInstance().force_change&&this.rebootIfNeeded()})},e=>{this.formError=e.error.message[0],this.docLayoutService.toast.showToast({message:this.formError,type:"error"})})}else this.myProfilePassword.controls.currentPassword.markAsTouched(),this.myProfilePassword.controls.newReTypePassword.markAsTouched(),this.myProfilePassword.controls.newPassword.markAsTouched(),this.docLayoutService.toast.showToast({message:e,type:"error"})}rebootIfNeeded(){this.docLayoutService.dialog.showCommonDialog({title:M.a.t("standard","Platform Reload"),content:M.a.t("standard",'Your settings are saved, but for the changes to be applied the page needs to reload. By clicking on "Confirm" the page will reload to apply the changes you\'ve made. Are you sure you want to proceed?'),showConfirmationCheck:!0,requireConfirmation:!0,confirmationLabel:M.a.t("standard","Yes I'm sure and I want to proceed"),actions:[{id:"cancel",type:"neutral",label:M.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"positive",label:M.a.t("standard","Confirm"),slot:"end"}]}).subscribe(e=>{if(e.actionSuccess.next(!0),"confirm"===e.actionID){const e=Di.a.getInstance();let t=e.get("original_url",null)||o.a.getInstance().home_route[0];e.remove("original_url"),t.startsWith("http")||(t=this.backendService.getBaseUrl()+t),this.bootstrapService.reboot(t)}})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Ze.d),c.ec(c.o),c.ec(I.a),c.ec(le.a),c.ec(j.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["my-profile-password"]],decls:14,vars:21,consts:[[1,"myprofile-info",3,"formGroup","ngSubmit"],[1,"form-row","mdl-grid"],[1,"mdl-cell","mdl-cell--6-col","mdl-cell--12-col-tablet","mdl-cell--12-col-phone"],[3,"id","type","label","floating_label","value","inputFormControl"],[3,"id","type","label","floating_label","inputFormControl"],[1,"text-error"],["class","form-row form-profile-buttons border-grey",4,"ngIf"],[1,"form-row","form-profile-buttons","border-grey"],[3,"buttonType","type","text"],[3,"buttonType","type","text","click"]],template:function(e,t){1&e&&(c.kc(0,"form",0),c.sc("ngSubmit",function(){return t.setPassword()}),c.kc(1,"div",1),c.kc(2,"div",2),c.fc(3,"textfield",3),c.jc(),c.kc(4,"div",2),c.fc(5,"textfield",4),c.jc(),c.jc(),c.kc(6,"div",1),c.fc(7,"div",2),c.kc(8,"div",2),c.fc(9,"textfield",4),c.jc(),c.jc(),c.kc(10,"div",5),c.gd(11),c.xc(12,"t"),c.jc(),c.ed(13,CS,3,9,"div",6),c.jc()),2&e&&(c.Dc("formGroup",t.myProfilePassword),c.Mb(3),c.Dc("id",t.currentPassword.id)("type",t.currentPassword.type)("label",t.currentPassword.label)("floating_label",t.currentPassword.floating_label)("value",t.currentPassword.value)("inputFormControl",t.myProfilePassword.controls.currentPassword),c.Mb(2),c.Dc("id",t.newPassword.id)("type",t.newPassword.type)("label",t.newPassword.label)("floating_label",t.newPassword.floating_label)("inputFormControl",t.myProfilePassword.controls.newPassword),c.Mb(4),c.Dc("id",t.newReTypePassword.id)("type",t.newReTypePassword.type)("label",t.newReTypePassword.label)("floating_label",t.newReTypePassword.floating_label)("inputFormControl",t.myProfilePassword.controls.newReTypePassword),c.Mb(2),c.hd(c.yc(12,19,t.formError)),c.Mb(2),c.Dc("ngIf",!t.myProfilePassword.pristine))},directives:[Ze.y,Ze.p,Ze.i,Ct.a,m.p,Is.a],pipes:[M.b],encapsulation:2}),e})();function kS(e,t){if(1&e&&(c.ic(0),c.fc(1,"checkbox",14),c.hc()),2&e){const e=t.$implicit,i=t.index,s=c.wc(2);c.Mb(1),c.Dc("label",e.sub_policy_acceptance_message)("required",e.mandatory)("checked",e.answer)("inputFormControl",s.policyFormGroup.controls.sub_policies.controls[i])}}function TS(e,t){if(1&e&&(c.kc(0,"div",15),c.fc(1,"basic-button",16),c.fc(2,"basic-button",16),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("buttonType",e.buttonSave.buttonType)("type",e.buttonSave.type)("text",e.buttonSave.text)("buttonType",e.buttonSave.buttonType)("click",e.buttonSave.onClick),c.Mb(1),c.Dc("buttonType",e.buttonCancel.buttonType)("type",e.buttonCancel.type)("text",e.buttonCancel.text)("buttonType",e.buttonCancel.buttonType)("click",e.buttonCancel.onClick)}}const IS=function(e){return{lng:e}},xS=function(e){return["/learn/policy/view",e]};function DS(e,t){if(1&e&&(c.kc(0,"form",5),c.kc(1,"div",6),c.kc(2,"div",7),c.kc(3,"div",8),c.fc(4,"checkbox",9),c.kc(5,"a",10),c.gd(6),c.xc(7,"t"),c.jc(),c.jc(),c.kc(8,"div",11),c.ed(9,kS,2,4,"ng-container",12),c.jc(),c.ed(10,TS,3,10,"div",13),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Dc("formGroup",e.policyFormGroup),c.Mb(4),c.Dc("label",e.policy.label)("value",e.policy.value)("checked",e.policy.checked)("change",e.policy.change)("required",!0)("inputFormControl",e.policyFormGroup.controls.policy),c.Mb(1),c.Dc("routerLink",c.Ic(15,xS,c.Ic(13,IS,e.currentLanguge))),c.Mb(1),c.hd(c.yc(7,11,"View Privacy Policy")),c.Mb(3),c.Dc("ngForOf",e.subPolicies),c.Mb(1),c.Dc("ngIf",e.policyFormGroup.dirty)}}let OS=(()=>{class e{constructor(e,t,i,s,n){this.fb=e,this.backendService=t,this.translationService=i,this.docLayoutService=s,this.router=n,this.initialized=!1,this.areMandatoryFieldsAllSelected=!1,this._policyId=E.b.getInstance().policy_id,this._policyTrackId=null;const a=M.a.t("standard","_SAVE"),o=M.a.t("standard","cancel");this.currentLanguge=this.translationService.currentLang,this.buttonSave={type:"normal",text:a,buttonType:"submit",onClick:()=>{this.areMandatoryFieldsAllSelected?this.savePolicy():this.docLayoutService.dialog.showCommonDialog({title:M.a.t("standard","Are you sure you want to proceed?"),content:M.a.t("standard","By unchecking the mandatory Privacy Policy settings (marked with an asterisk), you will not be able to access and use your LMS again. The agreement to the mandatory Privacy Policy settings is required to complete your registration and use your platform."),actions:[{id:"cancel",type:"neutral",label:M.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"positive",label:M.a.t("standard","Confirm"),slot:"end"}]}).subscribe(e=>{e.actionSuccess.next(!0),"confirm"===e.actionID&&this.savePolicy()})}},this.buttonCancel={type:"cancel",text:o,buttonType:"button",onClick:()=>{r.a.singleton.publish({event_type:"toggle-accordion",sender_id:"my-profile",data:{index:"0",reload:!0}})}}}ngOnInit(){this.loadData().subscribe(()=>{this.initialized=!0,this.policyFormGroup.valueChanges.subscribe(e=>{if(this.areMandatoryFieldsAllSelected=!0,!1!==e.policy){if(0!==this.policyFormGroup.value.sub_policies.length)for(const t in this.policyFormGroup.value.sub_policies)if(1===this.subPolicies[t].mandatory&&!1===e.sub_policies[t]){this.areMandatoryFieldsAllSelected=!1;break}}else this.areMandatoryFieldsAllSelected=!1})})}savePolicy(){(null===this._policyTrackId?this.createPolicyTracking():this.updatePolicyTracking()).subscribe(e=>{!0===e.data.logout?(window.localStorage.clear(),this.router.navigate(["/learn/signin"],fi.b)):this.docLayoutService.toast.showToast({message:M.a.t("standard","Your preferences are successfully updated."),type:"success"})},e=>{this.docLayoutService.toast.showToast({message:e.message[0].message.text,type:"error"})})}createPolicyTracking(){const e=rt.a.map(this.policyFormGroup.value.sub_policies,(e,t)=>({id:this.subPolicies[t].id,answer:Number(e)})),t={policy:{id:this._policyId,answer:Number(this.policyFormGroup.value.policy),sub_policies:e}};return this.backendService.request("/manage/v1/policy/track","POST",t)}updatePolicyTracking(){const e=rt.a.map(this.policyFormGroup.value.sub_policies,(e,t)=>({id:this.subPolicies[t].id,answer:Number(e)}));return this.backendService.request(`/manage/v1/policy/track/${this._policyTrackId}`,"PUT",{id_policy_version:this._policyVersion,track_answer:!0===this.policyFormGroup.value.policy?1:0,sub_policy:e})}loadData(){return Object(Yt.a)(this._loadPrivacyPolicyDefinition(),this.backendService.request("/manage/v1/policy/track","GET").pipe(Object(di.a)(e=>e.data))).pipe(Object(di.a)(([e,t])=>{const{policy:i,sub_policy:s}=e,{policy:n,sub_policy:a}=t,o=!rt.a.isNil(n);this._policyVersion=i.policy_version,o&&(this._policyTrackId=n.track_id,this._policyVersion=n.id_policy_version),this.policy={label:i.policy_acceptance_message[this.currentLanguge],value:o?n.answer:0,checked:!!o&&Boolean(n.answer),enabled:!0,required:!0},this.subPolicies=rt.a.map(s,e=>({id:e.id,sub_policy_acceptance_message:e.sub_policy_acceptance_message[this.currentLanguge],mandatory:e.mandatory,answer:o?rt.a.find(a,t=>t.id===e.id).answer:0}));const r=new Ze.c(rt.a.map(this.subPolicies,e=>{const t=e.mandatory?Ze.x.required:Ze.x.nullValidator;return new Ze.e(Boolean(e.answer),t)}));this.policyFormGroup=this.fb.group({policy:[this.policy.checked,Ze.x.required],sub_policies:r})}))}_loadPrivacyPolicyDefinition(){return void 0===this._policyId?yc.a:this.backendService.request(`/manage/v1/policy/${this._policyId}/versions/latest`,"GET").pipe(Object(di.a)(e=>e.data))}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Ze.d),c.ec(I.a),c.ec(rn.a),c.ec(j.a),c.ec(s.h))},e.\u0275cmp=c.Yb({type:e,selectors:[["my-profile-policy"]],decls:8,vars:4,consts:[[1,"policy-wrapper"],[1,"policy-alert-banner","bg-warning","text-white"],[1,"zmdi","zmdi-alert-triangle","table-big-icons"],[1,"mdl-wrapper","policy-form"],["class","policy-form",3,"formGroup",4,"ngIf"],[1,"policy-form",3,"formGroup"],[1,"mdl-grid"],[1,"mdl-cell","policy-view","bg-white","mdl-cell--12-col"],[1,"form-row","form-row-privacy"],[3,"label","value","checked","change","required","inputFormControl"],["target","_blank",3,"routerLink"],[1,"form-row","sub-policies"],[4,"ngFor","ngForOf"],["class","form-row policy-form-buttons border-grey",4,"ngIf"],[3,"label","required","checked","inputFormControl"],[1,"form-row","policy-form-buttons","border-grey"],[3,"buttonType","type","text","click"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.fc(2,"i",2),c.kc(3,"p"),c.gd(4),c.xc(5,"t"),c.jc(),c.jc(),c.kc(6,"div",3),c.ed(7,DS,11,17,"form",4),c.jc(),c.jc()),2&e&&(c.Mb(4),c.hd(c.yc(5,2,"By unchecking the mandatory Privacy Policy settings (marked with an asterisk), you will not be able to access and use your LMS again. The agreement to the mandatory Privacy Policy settings is required to complete your registration and use your platform.")),c.Mb(3),c.Dc("ngIf",t.initialized))},directives:[m.p,Ze.y,Ze.p,Ze.i,ih.a,s.k,m.o,Is.a],pipes:[M.b],encapsulation:2}),e})();function ES(e,t){if(1&e){const e=c.lc();c.kc(0,"dropdown",7),c.sc("onChange",function(){c.Vc(e);const t=c.wc();return t.onChange(t.myProfilePreferences.controls.language.value)}),c.jc()}if(2&e){const e=c.wc();c.Dc("label",e.preferredLanguage.label)("floating_label",e.preferredLanguage.floating_label)("display_search",e.preferredLanguage.display_search)("grouped",e.preferredLanguage.grouped)("options",e.preferredLanguage.options)("name",e.preferredLanguage.name)("enabled",e.preferredLanguage.enabled)("required",e.preferredLanguage.required)("value",e.preferredLanguage.value)("inputFormControl",e.myProfilePreferences.controls.language)}}function AS(e,t){if(1&e&&(c.kc(0,"div",2),c.fc(1,"dropdown",8),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("label",e.dateFormat.label)("floating_label",e.dateFormat.floating_label)("display_search",e.dateFormat.display_search)("grouped",e.dateFormat.grouped)("options",e.dateFormats)("grouped",!0)("name",e.dateFormat.name)("enabled",e.dateFormat.enabled)("required",e.dateFormat.required)("value",e.formatSelected)("inputFormControl",e.myProfilePreferences.controls.dateformat_locale)}}function PS(e,t){if(1&e&&(c.kc(0,"div",2),c.fc(1,"dropdown",8),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("label",e.preferredTimeZone.label)("floating_label",e.preferredTimeZone.floating_label)("display_search",e.preferredTimeZone.display_search)("grouped",e.preferredTimeZone.grouped)("options",e.preferredTimeZone.options)("name",e.preferredTimeZone.name)("enabled",e.preferredTimeZone.enabled)("required",e.preferredTimeZone.required)("value",e.preferredTimeZone.value)("inputFormControl",e.myProfilePreferences.controls.timezone)}}function MS(e,t){if(1&e&&(c.kc(0,"div",9),c.fc(1,"basic-button",10),c.fc(2,"basic-button",11),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("buttonType",e.buttonSave.buttonType)("type",e.buttonSave.type)("text",e.buttonSave.text)("buttonType",e.buttonSave.buttonType),c.Mb(1),c.Dc("buttonType",e.buttonCancel.buttonType)("type",e.buttonCancel.type)("text",e.buttonCancel.text)("buttonType",e.buttonCancel.buttonType)("click",e.buttonCancel.onClick)}}let LS=(()=>{class e{constructor(e,t,i,s,n,a){this.formatter=e,this.backendService=t,this.bootstrapService=i,this.docLayoutService=s,this.dateFormats=[],this.formatSelected="",this.myProfilePreferences=a.group({language:[o.a.getInstance().language],timezone:[o.a.getInstance().timezone],dateformat_locale:[o.a.getInstance().datetime_format]}),this.buttonSave={type:"normal",text:M.a.t("standard","_SAVE"),buttonType:"submit"},this.buttonCancel={type:"cancel",text:M.a.t("standard","cancel"),buttonType:"button",onClick:()=>{this.buttonCancelFunction()}}}buttonCancelFunction(){r.a.singleton.publish({event_type:"toggle-accordion",sender_id:"my-profile",data:{index:"2",reload:!0}})}savePreferences(){this.myProfilePreferences.valid&&this.docLayoutService.dialog.showCommonDialog({title:M.a.t("standard","Platform Reload"),content:M.a.t("standard",'By clicking on "Confirm" your changes will be saved and the page will reload to apply such changes. Are you sure you want to proceed?'),showConfirmationCheck:!0,requireConfirmation:!0,confirmationLabel:M.a.t("standard","Yes I'm sure and I want to proceed"),actions:[{id:"cancel",type:"neutral",label:M.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"positive",label:M.a.t("standard","Confirm"),slot:"end"}]}).subscribe(e=>{if("cancel"===e.actionID)e.actionSuccess.next(!0);else{const t=this._session.id,i=JSON.stringify({settings:[{name:"ui.language",value:this.myProfilePreferences.controls.language.value},{name:"date_format",value:this.myProfilePreferences.controls.dateformat_locale.value},{name:"timezone",value:this.myProfilePreferences.controls.timezone.value}]});this.backendService.updateMyPreferences(i,t).subscribe(t=>{t.error?(e.actionSuccess.next(!1),this.docLayoutService.toast.showToast({message:M.a.t("standard","Error while saving your changes"),type:"error"})):(e.actionSuccess.next(!0),this.bootstrapService.reboot())},t=>{e.actionSuccess.next(!1),this.docLayoutService.toast.showToast({message:M.a.t("standard","Error while saving your changes"),type:"error"})})}})}platformReady(){this._platform=E.b.getInstance(),this.allowDateFormatOverwrite=this._platform.settings.allow_user_dateformat_override,this.timezoneOverwriteAllow=this._platform.settings.timezone_allow_user_override}sessionReady(){this._session=o.a.getInstance()}ngOnInit(){this.platformReady(),this.sessionReady();const e=this._platform.getLanguageOptions(),t=M.a.t("standard","_LANGUAGE"),i=M.a.t("configuration","Time zone"),s=M.a.t("standard","Format"),n=this._session.language;this.preferredLanguage={label:t,floating_label:!0,display_search:!1,grouped:!1,options:e,name:"languages-dropdown",enabled:!0,required:!1,value:n},this.preferredTimeZone={label:i,floating_label:!0,display_search:!0,grouped:!1,options:this.formatter.momentZones(),name:"timezone-dropdown",enabled:!0,required:!1,value:this._session.timezone},this.dateFormat={label:s,floating_label:!0,display_search:!1,grouped:!1,name:"format-dropdown",enabled:!0,required:!1},this.setupDatetimeFormat(n,!0)}onChange(e){this.setupDatetimeFormat(e)}setupDatetimeFormat(e,t=!1){if(!this.allowDateFormatOverwrite)return;const i=Object.keys(this._platform.active_languages),s=rt.a.chain(i).map(e=>this._platform.getLangByShortCode(e)).sortBy(t=>t.browser_code===e?0:1).map(e=>({group:e.label_translated,items:rt.a.map(e.date_formats,e=>({label:`${this.formatter.asDatetime("2005-03-15 23:30:00",e)} (${e})`,value:e}))})).value();let n=s[0].items[0].value;if(t){const e=this._session.datetime_format.replace(/-/g,"_");n=e,this.myProfilePreferences.controls.dateformat_locale.setValue(e,{emitEvent:!1})}this.dateFormats=s,this.formatSelected=n}}return e.\u0275fac=function(t){return new(t||e)(c.ec(ni.b),c.ec(I.a),c.ec(le.a),c.ec(j.a),c.ec(c.o),c.ec(Ze.d))},e.\u0275cmp=c.Yb({type:e,selectors:[["my-profile-preferences"]],decls:9,vars:6,consts:[[1,"myprofile-info","my-preferences",3,"formGroup","ngSubmit"],[1,"form-row","mdl-grid"],[1,"mdl-cell","mdl-cell--6-col","mdl-cell--12-col-tablet","mdl-cell--12-col-phone"],[3,"label","floating_label","display_search","grouped","options","name","enabled","required","value","inputFormControl","onChange",4,"ngIf"],["class","mdl-cell mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone",4,"ngIf"],[1,"text-error"],["class","form-row form-profile-buttons border-grey",4,"ngIf"],[3,"label","floating_label","display_search","grouped","options","name","enabled","required","value","inputFormControl","onChange"],[3,"label","floating_label","display_search","grouped","options","name","enabled","required","value","inputFormControl"],[1,"form-row","form-profile-buttons","border-grey"],[3,"buttonType","type","text"],[3,"buttonType","type","text","click"]],template:function(e,t){1&e&&(c.kc(0,"form",0),c.sc("ngSubmit",function(){return t.savePreferences()}),c.kc(1,"div",1),c.kc(2,"div",2),c.ed(3,ES,1,10,"dropdown",3),c.jc(),c.ed(4,AS,2,11,"div",4),c.ed(5,PS,2,10,"div",4),c.jc(),c.kc(6,"div",5),c.gd(7),c.jc(),c.ed(8,MS,3,9,"div",6),c.jc()),2&e&&(c.Dc("formGroup",t.myProfilePreferences),c.Mb(3),c.Dc("ngIf",t.preferredLanguage.options.length>0),c.Mb(1),c.Dc("ngIf",t.allowDateFormatOverwrite),c.Mb(1),c.Dc("ngIf",t.timezoneOverwriteAllow),c.Mb(2),c.hd(t.formError),c.Mb(1),c.Dc("ngIf",t.myProfilePreferences.dirty))},directives:[Ze.y,Ze.p,Ze.i,m.p,ai.a,Is.a],encapsulation:2}),e})();const jS=function(e){return{lng:e}},RS=function(e){return["/learn/terms-conditions/view",e]};function FS(e,t){if(1&e&&(c.kc(0,"div",9),c.fc(1,"checkbox",10),c.kc(2,"a",11),c.gd(3),c.xc(4,"t"),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("label",e.termsConditionsFields.fieldsParams.label)("value",e.termsConditionsFields.fieldsParams.value)("checked",e.termsConditionsFields.fieldsParams.checked)("change",e.termsConditionsFields.fieldsParams.change)("required",!0)("inputFormControl",e.termsConditionsFormGroup.controls.termsConditions),c.Mb(1),c.Dc("routerLink",c.Ic(12,RS,c.Ic(10,jS,e.currentLanguge))),c.Mb(1),c.id(" ",c.yc(4,8,"View Terms & Conditions"),"")}}function NS(e,t){if(1&e&&(c.kc(0,"div",12),c.fc(1,"basic-button",13),c.fc(2,"basic-button",13),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("buttonType",e.buttonSave.buttonType)("type",e.buttonSave.type)("text",e.buttonSave.text)("buttonType",e.buttonSave.buttonType)("click",e.buttonSave.onClick),c.Mb(1),c.Dc("buttonType",e.buttonCancel.buttonType)("type",e.buttonCancel.type)("text",e.buttonCancel.text)("buttonType",e.buttonCancel.buttonType)("click",e.buttonCancel.onClick)}}let US=(()=>{class e{constructor(e,t,i,s,n,a){this.fb=e,this.backendService=t,this.translationService=i,this.pageService=s,this.docLayoutService=n,this.router=a,this.termsConditionsFields={fieldsParams:null},this.mandatoryFieldChanged=!1;const o=M.a.t("standard","_SAVE"),c=M.a.t("standard","cancel");this.currentLanguge=this.translationService.currentLang,this.termsConditionsFormGroup=this.fb.group({termsConditions:[!0,Ze.x.required]}),this.buttonSave={type:"normal",text:o,buttonType:"submit",onClick:()=>{this.mandatoryFieldChanged&&this.docLayoutService.dialog.showCommonDialog({title:M.a.t("standard","Are you sure you want to proceed?"),content:M.a.t("standard","By unchecking the mandatory Terms & Conditions settings (marked with an asterisk), you will not be able to access and use your LMS again. The agreement to the mandatory Terms & Conditions settings is required to complete your registration and use your platform."),actions:[{id:"cancel",type:"neutral",label:M.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"negative",label:M.a.t("standard","Confirm"),slot:"end"}]}).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.updateTermsConditions().then(t=>{e.actionSuccess.next(t)})})}},this.buttonCancel={type:"cancel",text:c,buttonType:"button",onClick:()=>{r.a.singleton.publish({event_type:"toggle-accordion",sender_id:"my-profile",data:{index:"0",reload:!0}})}}}ngOnInit(){this.loadTermsConditions(),this.termsConditionsFormGroup.valueChanges.subscribe(e=>{this.mandatoryFieldChanged=!1===e.termsConditions})}updateTermsConditions(){return new Promise(e=>{this.backendService.request(`/manage/v1/termsandconditions/track/${this.mainTermsConditionsData.track_id}`,"PUT",{id_tc_version:this.mainTermsConditionsData.id_tc_version,track_answer:!0===this.termsConditionsFormGroup.value.termsConditions?1:0}).subscribe(t=>{e(!0),!0===t.data.logout?(window.localStorage.clear(),this.router.navigate(["/learn/signin"],fi.b)):this.docLayoutService.toast.showToast({message:M.a.t("standard","Your preferences are successfully updated."),type:"success"})},t=>{e(!1),this.docLayoutService.toast.showToast({message:t.message[0].message.text,type:"error"})})})}loadTermsConditions(){this.backendService.request("/manage/v1/termsandconditions/track","GET").subscribe(e=>{this.mainTermsConditionsData=e.data.tc,this.termsConditionsFields.fieldsParams={label:this.mainTermsConditionsData.tc_acceptance_message[`${this.currentLanguge}`],value:1,checked:!0,enabled:!0,required:!0,change:e=>{}}})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(Ze.d),c.ec(I.a),c.ec(rn.a),c.ec(P.a),c.ec(j.a),c.ec(s.h))},e.\u0275cmp=c.Yb({type:e,selectors:[["my-profile-terms-conditions"]],decls:12,vars:6,consts:[[1,"terms-conditions-wrapper"],[1,"terms-conditions-alert-banner","bg-warning","text-white"],[1,"zmdi","zmdi-alert-triangle","table-big-icons"],[1,"mdl-wrapper","terms-conditions-form"],[1,"policy-form",3,"formGroup"],[1,"mdl-grid"],[1,"mdl-cell","terms-conditions-view","bg-white","mdl-cell--12-col"],["class","form-row form-row-terms-conditions",4,"ngIf"],["class","form-row terms-conditions-form-buttons border-grey",4,"ngIf"],[1,"form-row","form-row-terms-conditions"],[3,"label","value","checked","change","required","inputFormControl"],["target","_blank",3,"routerLink"],[1,"form-row","terms-conditions-form-buttons","border-grey"],[3,"buttonType","type","text","click"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.fc(2,"i",2),c.kc(3,"p"),c.gd(4),c.xc(5,"t"),c.jc(),c.jc(),c.kc(6,"div",3),c.kc(7,"form",4),c.kc(8,"div",5),c.kc(9,"div",6),c.ed(10,FS,5,14,"div",7),c.ed(11,NS,3,10,"div",8),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(4),c.hd(c.yc(5,4,"By unchecking the mandatory Terms & Conditions settings (marked with an asterisk), you will not be able to access and use your LMS again. The agreement to the mandatory Terms & Conditions settings is required to complete your registration and use your platform.")),c.Mb(3),c.Dc("formGroup",t.termsConditionsFormGroup),c.Mb(3),c.Dc("ngIf",t.termsConditionsFields.fieldsParams),c.Mb(1),c.Dc("ngIf",t.termsConditionsFormGroup.dirty))},directives:[Ze.y,Ze.p,Ze.i,m.p,ih.a,s.k,Is.a],pipes:[M.b],encapsulation:2}),e})();var zS=i("9j9i"),qS=i("SxV6"),VS=i("zP0r");const BS={authenticatorApp:{title:tt.a.t("esignature","Authenticator App"),description:tt.a.t("esignature","Use the Authenticator app to get free verification codes, even if your phone is offline. Available for Android and iOS."),contentText:tt.a.t("esignature","Pair your authenticator app. In this way, you'll be able to generate verification codes from your device."),scanQrCode:tt.a.t("standard","Scan me to pair your authentication app"),bulletPoints:{first:tt.a.t("standard","Download the Google Authenticator App from Google Play Store or App Store."),second:tt.a.t("esignature","Open the app and tap the Add button"),third:tt.a.t("esignature","Select the Scan Barcode option"),fourth:tt.a.t("esignature","Insert here the 6-digit verification code (OTP) that you see in the app")},noCamera:tt.a.t("esignature","If you don't have a camera, you can manually enter the key:"),oneTimePassword:tt.a.t("two_factor_auth","One Time Password"),activate:tt.a.t("standard","_ACTIVATE"),errors:{missingOtp:tt.a.t("standard","Something is missing, please type your One Time Password"),wrongLengthOtp:tt.a.t("mobile","The required length is 6 characters"),wrongOtpCode:tt.a.t("two_factor_auth","Invalid OTP")},notificationError:{title:tt.a.t("standard","1 Error - Activation not possible"),subtitle:tt.a.t("standard","Please fill in the required fields correctly to proceed")},notificationErrorGenerateKey:{title:tt.a.t("standard","1 Error - Recovery key generation not possible"),subtitle:tt.a.t("standard","Please fill in the required fields correctly to proceed")},successPairing:tt.a.t("esignature","Authenticator app paired successfully"),successGenerateRecoveryKey:tt.a.t("esignature","Recovery key created successfully"),pairedTextTitle:tt.a.t("esignature","Authenticator App Paired"),pairedTextSubtitle:tt.a.t("esignature","An app appears to have been associated with your profile on"),btnNewRecoveryKey:tt.a.t("standard","New Recovery Key"),unpair:tt.a.t("esignature","Unpair"),dialogs:{generateOtpTitle:tt.a.t("esignature","Generate a New Recovery Key"),generateOtpSubTitle:tt.a.t("esignature","In order to generate a new recovery key, please insert here the 6-digit verification code (OTP) that you see in the app. {newLine} Are you sure you want to generate a new recovery key?"),recoveryOtpTitle:tt.a.t("esignature","Generate a New Recovery Key"),recoveryOtpSubtitle:tt.a.t("esignature","If you lose access to your phone, you won't be able to complete the authentication process. Print, copy or write down this key without letting anyone see it."),savedKey:tt.a.t("mobile","I saved the recovery key"),btnDone:tt.a.t("standard","Done"),savedRecoveryKey:tt.a.t("mobile","I saved the recovery key"),requiredKey:tt.a.t("standard","(Required)"),btnCancel:tt.a.t("standard","Cancel"),btnGenerate:tt.a.t("app7020","Generate"),tooltipClose:tt.a.t("app7020","Close"),tooltipAria:tt.a.t("standard","Close dialog"),checkedSaveKey:tt.a.t("standard","Something went wrong."),flagCheckBox:tt.a.t("error","Please confirm you want to proceed by flagging the checkbox."),unpairTitle:tt.a.t("esignature","Unpair Authenticator App"),unpairSubTitle:tt.a.t("esignature","To unpair your authenticator app, you need to enter your recovery key. If you need any help with the recovery key, contact your system administrator."),unpairSuccess:tt.a.t("esignature","Authenticator app unpaired successfully"),errorUnpairNotification:tt.a.t("standard","1 Error - Unpairing not possible"),recoveryKey:tt.a.t("esignature","Recovery Key"),missingRecoveryKey:tt.a.t("standard","Something is missing, please type your recovery key"),wrongUnpairLengthOtp:tt.a.t("standard","The required length is {count} characters"),wrongOtpUnpair:tt.a.t("mobile","This recovery Key is not valid")}}};var GS=i("Qb5X"),HS=i("7fTW"),$S=i("KwVG"),YS=i("jesm");let WS=(()=>{class e{constructor(e,t,i){this._backendService=e,this._docLayoutService=t,this._improvementAreasProfilingService=i,this.assignedSkillsOccupation$=new je.a(null),this.assignedSkills$=new je.a([]),this.suggestedSkills$=new je.a([]),this.userIsProfiled$=new je.a(!1),this.loadingSuggestedSkills$=new je.a(!1),this.enoughPlatformAvailableSkills$=new je.a(!1),this.isSkillsToggleOn$=new je.a(!1)}hasPlatformAvailableSkills(){return this._backendService.request($S.a.workForceSkills,"GET",void 0,{size:26}).pipe(Object(Ti.a)(e=>{var t;this.isSkillsToggleOn$.value&&this.enoughPlatformAvailableSkills$.next((null!==(t=e.data.items)&&void 0!==t?t:[]).length>25)}),Object(di.a)(e=>{var t;return(null!==(t=e.data.items)&&void 0!==t?t:[]).length>0}))}getSuggestedSkills(e){var t,i;if(!this.isSkillsToggleOn$.value&&!this.assignedSkillsOccupation$.value&&!e)return;const s=null!=e?e:this.assignedSkillsOccupation$.value;this.loadingSuggestedSkills$.next(!0),this.isSkillsToggleOn$.value?this._backendService.request($S.a.workForceSkills,"GET",void 0,Object.assign({size:10},s&&this.enoughPlatformAvailableSkills$.value&&{occupation_code:null!==(t=s.canonicalCode)&&void 0!==t?t:""})).pipe(Object(se.a)(1),Object(di.a)(e=>e.data.items)).subscribe(e=>{this.suggestedSkills$.next(e),this.filterSuggestedSkills(),this.loadingSuggestedSkills$.next(!1)}):this._improvementAreasProfilingService.getSuggestedSkills(null!==(i=null==s?void 0:s.canonicalCode)&&void 0!==i?i:"").pipe(Object(se.a)(1)).subscribe(e=>{this.suggestedSkills$.next(e),this.filterSuggestedSkills(),this.loadingSuggestedSkills$.next(!1)})}getAutocompleteSkills(e,t){var i,s;const n=this.assignedSkillsOccupation$.value;return this.isSkillsToggleOn$.value?this._backendService.request($S.a.workForceSkills,"GET",void 0,{search:e,size:10}).pipe(Object(di.a)(e=>this.filterAutoCompleteSkills(e.data.items))):this._improvementAreasProfilingService.getSkills(e,null!==(s=null!==(i=null==n?void 0:n.canonicalCode)&&void 0!==i?i:null==t?void 0:t.canonicalCode)&&void 0!==s?s:null).pipe(Object(di.a)(e=>this.filterAutoCompleteSkills(e)))}getOccupations(e){return this._improvementAreasProfilingService.getOccupations(e)}createOccupation(e){return this._improvementAreasProfilingService.createOccupation(e)}saveProfiling(e,t){return this.userIsProfiled$.next(Boolean(null==t?void 0:t.length)),this._improvementAreasProfilingService.saveProfiling(e,t)}filterSuggestedSkills(){const e=this.suggestedSkills$.value.filter(e=>-1===this.assignedSkills$.value.findIndex(t=>t.code===e.code));this.suggestedSkills$.next(e)}filterAutoCompleteSkills(e){return e.filter(e=>-1===this.assignedSkills$.value.findIndex(t=>t.code===e.code))}showGenericSnackbarError(){this._docLayoutService.toast.showToast({message:GS.a.skills.internalError,type:"error"})}resetServiceSkillsState(){this.assignedSkillsOccupation$.next(null),this.assignedSkills$.next([]),this.suggestedSkills$.next([]),this.loadingSuggestedSkills$.next(!1),this.enoughPlatformAvailableSkills$.next(!1),this.isSkillsToggleOn$.next(!1)}}return e.\u0275fac=function(t){return new(t||e)(c.oc(I.a),c.oc(j.a),c.oc(uS.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var QS=i("S7qi"),KS=i("GIHc");const JS=["uploadFile"];function XS(e,t){if(1&e&&(c.kc(0,"span",17),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.personalInfo.avatarWithDefaultIcon)," ")}}function ZS(e,t){if(1&e&&(c.kc(0,"span",17),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.personalInfo.avatarWithLetters)," ")}}function ek(e,t){if(1&e&&(c.kc(0,"span",17),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.personalInfo.avatarWithImage)," ")}}function tk(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.personalInfo.error.errorImgSize)," ")}}function ik(e,t){if(1&e&&(c.kc(0,"div",29),c.fc(1,"ui-notification-inline",30),c.xc(2,"t"),c.xc(3,"t"),c.xc(4,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("title",e.totalErrorsForm>1?c.yc(2,2,e.multipleErrorsSaveFormTitle):c.yc(3,4,e.singleErrorSaveFormTitle))("message",c.yc(4,6,e.dictionary.personalInfo.error.errorsSaveFormSubTitle))}}function sk(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.personalInfo.error.fieldRequired)," ")}}function nk(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.personalInfo.error.fieldRequired)," ")}}function ak(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.personalInfo.error.missingEmail)," ")}}function ok(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.personalInfo.error.emailNotValid)," ")}}function rk(e,t){1&e&&c.fc(0,"div",37)}function ck(e,t){if(1&e&&(c.ic(0),c.kc(1,"div",23),c.fc(2,"doc-shared-user-additional-field",35),c.jc(),c.ed(3,rk,1,0,"div",36),c.hc()),2&e){const e=t.$implicit,i=t.index,s=c.wc(3);c.Mb(2),c.Dc("id",e.id)("label",e.label)("type",e.type)("control",e.formControl)("options",e.options)("iframeHeight",e.iframeHeight)("iframeUrl",e.iframeUrl)("userData",s.responseIframe),c.Mb(1),c.Dc("ngIf",0!==i&&(i+1)%2==0)}}function lk(e,t){if(1&e&&(c.kc(0,"section",31),c.kc(1,"div",2),c.kc(2,"div",32),c.kc(3,"div",33),c.gd(4),c.xc(5,"t"),c.jc(),c.jc(),c.jc(),c.ed(6,ck,4,9,"ng-container",34),c.jc()),2&e){const e=c.wc(2);c.Mb(4),c.id(" ",c.yc(5,2,e.dictionary.personalInfo.additionalFields)," "),c.Mb(2),c.Dc("ngForOf",e.additionalFields)}}function dk(e,t){if(1&e){const e=c.lc();c.kc(0,"form",18),c.sc("ngSubmit",function(){return c.Vc(e),c.wc().submitForm()}),c.kc(1,"section",19),c.kc(2,"div",1),c.kc(3,"div",2),c.kc(4,"div",20),c.kc(5,"div",21),c.gd(6),c.xc(7,"t"),c.jc(),c.ed(8,ik,5,8,"div",22),c.jc(),c.jc(),c.kc(9,"div",23),c.fc(10,"ui-input-text",24),c.xc(11,"t"),c.xc(12,"t"),c.jc(),c.kc(13,"div",23),c.fc(14,"ui-input-text",24),c.xc(15,"t"),c.xc(16,"t"),c.jc(),c.kc(17,"div",23),c.kc(18,"ui-input-text",25),c.xc(19,"t"),c.xc(20,"t"),c.ed(21,sk,3,3,"ui-input-error",12),c.jc(),c.jc(),c.kc(22,"div",23),c.kc(23,"ui-input-text",25),c.xc(24,"t"),c.xc(25,"t"),c.ed(26,nk,3,3,"ui-input-error",12),c.jc(),c.jc(),c.jc(),c.kc(27,"div",1),c.kc(28,"div",23),c.kc(29,"ui-input-text",25),c.xc(30,"t"),c.xc(31,"t"),c.ed(32,ak,3,3,"ui-input-error",12),c.ed(33,ok,3,3,"ui-input-error",12),c.jc(),c.jc(),c.jc(),c.jc(),c.kc(34,"div",1),c.ed(35,lk,7,4,"section",26),c.kc(36,"div",2),c.kc(37,"div",27),c.fc(38,"ui-button-raised-primary",28),c.xc(39,"t"),c.xc(40,"t"),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Dc("formGroup",e.personalInfoGroup),c.Mb(6),c.id(" ",c.yc(7,26,e.dictionary.personalInfo.details)," "),c.Mb(2),c.Dc("ngIf",e.totalErrorsForm>0),c.Mb(2),c.Dc("formControl",e.personalInfoBlocked.controls.username)("disabledMarker",c.yc(11,28,e.dictionary.personalInfo.disabledMarker))("label",c.yc(12,30,e.dictionary.personalInfo.username)),c.Mb(4),c.Dc("formControl",e.personalInfoBlocked.controls.user_level)("disabledMarker",c.yc(15,32,e.dictionary.personalInfo.disabledMarker))("label",c.yc(16,34,e.dictionary.personalInfo.userLevel)),c.Mb(4),c.Dc("formControl",e.personalInfoGroup.controls.firstname)("requiredMarker",c.yc(19,36,e.dictionary.personalInfo.requiredMarker))("label",c.yc(20,38,e.dictionary.personalInfo.firstName)),c.Mb(3),c.Dc("ngIf",(null==e.personalInfoGroup.controls.firstname.errors?null:e.personalInfoGroup.controls.firstname.errors.required)&&e.personalInfoGroup.controls.firstname.dirty),c.Mb(2),c.Dc("formControl",e.personalInfoGroup.controls.lastname)("requiredMarker",c.yc(24,40,e.dictionary.personalInfo.requiredMarker))("label",c.yc(25,42,e.dictionary.personalInfo.lastName)),c.Mb(3),c.Dc("ngIf",(null==e.personalInfoGroup.controls.lastname.errors?null:e.personalInfoGroup.controls.lastname.errors.required)&&e.personalInfoGroup.controls.lastname.dirty),c.Mb(3),c.Dc("formControl",e.personalInfoGroup.controls.email)("requiredMarker",c.yc(30,44,e.dictionary.personalInfo.requiredMarker))("label",c.yc(31,46,e.dictionary.personalInfo.email)),c.Mb(3),c.Dc("ngIf",(null==e.personalInfoGroup.controls.email.errors?null:e.personalInfoGroup.controls.email.errors.required)&&e.personalInfoGroup.controls.email.dirty),c.Mb(1),c.Dc("ngIf",!1===(null==e.personalInfoGroup.controls.email.errors||null==e.personalInfoGroup.controls.email.errors.emailValidator?null:e.personalInfoGroup.controls.email.errors.emailValidator.valid)&&e.personalInfoGroup.controls.email.dirty),c.Mb(2),c.Dc("ngIf",e.additionalFields.length>0),c.Mb(3),c.Dc("label",c.yc(39,48,e.dictionary.personalInfo.btnSave))("loading",e.savingPersonalInfo)("ariaLabel",c.yc(40,50,e.dictionary.personalInfo.savePersonalInfoA11y))}}let uk=(()=>{class e{constructor(e,t,i,s,n,a){this._myProfileService=e,this._uploadService=t,this._docLayoutService=i,this._translationService=s,this._changeDetectorRef=n,this._toggleService=a,this.dictionary=GS.a,this.sizeAvatar=b.s.XXL,this.imageUrl="",this.errorSizeImg=!0,this.color=b.D.ACCENT,this.showPersonalInfo=!D.b.getInstance().settings.allow_only_password_change,this.isSuperAdmin=D.c.getInstance().isCurrentUserA(D.c.LEVEL_SUPERADMIN),this.additionalFields=[],this.savingPersonalInfo=!1,this.personalInfoBlocked=new Ze.h({username:new Ze.e(""),user_level:new Ze.e("")}),this._session=D.c.getInstance(),this._platform=D.b.getInstance(),this._useEmalAsUsername="on"===this._platform.user_settings.use_email_as_username,this._requireName=D.b.getInstance().settings.registration_settings.options.lastfirst_mandatory,this._imgMaxSize=HS.b,this._imgMimeTypes=["image/gif","image/png","image/jpeg"],this._myProfileService.sessionAvatarUrl$.subscribe(e=>{this.imageUrl=e}),this._myProfileService.sessionAvatarUrl$.next(this._session.avatar_url),this._toggleService.isOn(u.f.TOGGLE_HIDE_MY_PROFILE_PREFERENCES_AND_TIMEZONE_MODAL)&&(this.showPersonalInfo=!D.b.getInstance().settings.hide_personal_info)}ngOnInit(){this._setPersonalInfoGroup(),this._getUserLevel(),this.setFormValue(),this._getIframeData(),this.getAdditionalFields(),this._setTextImage()}setFormValue(){var e,t,i,s,n,a,o,r;null===(e=this.personalInfoBlocked.get("username"))||void 0===e||e.setValue(this._session.username),null===(t=this.personalInfoBlocked.get("username"))||void 0===t||t.disable(),null===(i=this.personalInfoBlocked.get("user_level"))||void 0===i||i.setValue(this.userLevel),null===(s=this.personalInfoBlocked.get("user_level"))||void 0===s||s.disable(),null===(n=this.personalInfoGroup.get("firstname"))||void 0===n||n.setValue(this._session.firstname),null===(a=this.personalInfoGroup.get("lastname"))||void 0===a||a.setValue(this._session.lastname),null===(o=this.personalInfoGroup.get("email"))||void 0===o||o.setValue(this._session.email),null===(r=this.personalInfoGroup.get("formControl"))||void 0===r||r.setValue(this.additionalFields),this.markFormAsPristine()}getAdditionalFields(){this._myProfileService.getAdditionalFields().subscribe(e=>{this.additionalFields=e,this.markFormAsPristine()})}deleteAvatar(){this.uploadFile.nativeElement.value="",this._myProfileService.fetchImage(this._session.id,{avatar:""}).subscribe(()=>{D.c.getInstance().setUserInfo({avatar:""}),this._myProfileService.sessionAvatarUrl$.next(""),this._changeDetectorRef.markForCheck(),this._uploadService.remove(this.imageUrl.split("/").reverse()[0],"avatar").subscribe(()=>{this._setTextImage()}),this._docLayoutService.toast.showToast({message:GS.a.personalInfo.deleteAvatarImage,type:"success"})})}fileUpload(e){const t=e.target.files,i=URL.createObjectURL(t[0]),s=new Image;s.onload=()=>{this._imgSize=Number(s.sizes),this._validate(t)&&(this.isLoading=!0,this._toggleService.isOn(u.f.TOGGLE_EXIF_STRIP_AVATAR_UPLOAD)?this._uploadAvatar(t):this._toggleService.isOn(u.f.TOGGLE_UPLOAD_WITH_POSTOBJECT_V4)?this._uploadAvatarUsingPost(t):this._uploadImg(t))},s.src=i}submitForm(){const e=new je.a(!1);if(this.errorSizeImg=!0,this._validateDetails()){this.savingPersonalInfo=!0;const t=this._myProfileService.getAdditionalFieldsRawValue(this.additionalFields);this._myProfileService.updatePersonalInfo(this.personalInfoGroup.controls.firstname.value,this.personalInfoGroup.controls.lastname.value,this.personalInfoGroup.controls.email.value,t,"myProfile").subscribe(t=>{t.data.success&&(D.c.getInstance().setUserInfo({avatar:this._myProfileService.sessionAvatarUrl$.value,firstname:this.personalInfoGroup.controls.firstname.value,lastname:this.personalInfoGroup.controls.lastname.value,email:this.personalInfoGroup.controls.email.value}),this._docLayoutService.toast.showToast({message:GS.a.personalInfo.success,type:"success"}),this._setTextImage(),this.markFormAsPristine()),this.savingPersonalInfo=!1,e.next(t.data.success)},()=>{this.savingPersonalInfo=!1,e.next(!1)})}else setTimeout(()=>{e.next(!1)});return e}markFormAsPristine(){for(let e in this.personalInfoGroup.controls)this.personalInfoGroup.controls[e].markAsPristine();this.personalInfoGroup.markAsPristine(),this.additionalFields.forEach(e=>{e.formControl.markAsPristine()})}_getUserLevel(){this.userLevel="super_admin"===this._session.user_level?this._translationService.instant(this.dictionary.personalInfo.userIs.admin.key,this.dictionary.personalInfo.userIs.admin.category):"power_user"===this._session.user_level?this._translationService.instant(this.dictionary.personalInfo.userIs.powerUser.key,this.dictionary.personalInfo.userIs.powerUser.category):this._translationService.instant(this.dictionary.personalInfo.userIs.user.key,this.dictionary.personalInfo.userIs.user.category)}_getIframeData(){this._myProfileService.getUserData(this._session.id).subscribe(e=>{this.responseIframe=e.data})}_setPersonalInfoGroup(){this.personalInfoGroup=new Ze.h({firstname:new Ze.e("",this._requireName?Ze.x.required:null),lastname:new Ze.e("",this._requireName?Ze.x.required:null),email:new Ze.e("",[Nc.a.validEmail(),this.isSuperAdmin||this._useEmalAsUsername?Ze.x.required:Ze.x.nullValidator]),formControl:new Ze.e("")})}_setTextImage(){this.userInitials=D.c.getInstance().user_initials,this.hasName=!0,""===this._session.avatar_url&&""===this.personalInfoGroup.controls.firstname.value&&""===this.personalInfoGroup.controls.lastname.value&&(this.hasName=!1)}_validate(e){let t=!0,i=e[0];return this._validateSize(i)||(t=!1,this.uploadFile.nativeElement.value="",this._docLayoutService.toast.showToast({message:GS.a.personalInfo.errorUploadImage,type:"error"})),this._validateType(i)||(t=!1,this.uploadFile.nativeElement.value="",this._docLayoutService.toast.showToast({message:GS.a.personalInfo.errorUploadFileType,type:"error"})),t}_validateDetails(){let e=!0;this._userProfileErrorsCount=0,this._additionalFieldsErrorsCount=0,this.totalErrorsForm=0,this._myProfileService.stripTagsFromPersonalInfoFields(this.personalInfoGroup),this._myProfileService.stripTagsFromAdditionalFields(this.additionalFields),this.personalInfoGroup.markAllAsTouched();for(const t in this.personalInfoGroup.controls)this.personalInfoGroup.controls[t].valid||(this.personalInfoGroup.controls[t].markAsDirty(),this._userProfileErrorsCount++,e=!1);for(const t in this.additionalFields)this.additionalFields[t].formControl.markAsTouched(),this.additionalFields[t].formControl.valid||this.additionalFields[t].formControl.disabled||(this.additionalFields[t].formControl.setErrors({required:!0}),this.additionalFields[t].formControl.markAsDirty(),this._additionalFieldsErrorsCount++,e=!1);return this.userAdditionalField.forEach(e=>{"freetext"===e.type&&e.checkInputChanges()}),this.totalErrorsForm=this._userProfileErrorsCount+this._additionalFieldsErrorsCount,this.multipleErrorsSaveFormTitle=tt.a.t("standard","{count_error} Errors - Saving changes not possible",{count_error:this.totalErrorsForm}),this.singleErrorSaveFormTitle=tt.a.t("standard","{count_error} Error - Saving changes not possible",{count_error:this.totalErrorsForm}),e}_validateSize(e){let t=!0;return this.errorSizeImg=!0,this._uploadService.toMegabytes(e.size)>this._imgMaxSize.size&&(t=!1,this.errorSizeImg=!1),t}_validateType(e){let t=!0,i=e.type.toString();return this._imgMimeTypes.includes(i)||(t=!1),t}_uploadImg(e){this.isLoading=!0;let t=e[0];this._uploadService.getSignedUrl(t,"avatar","",!0,"write").subscribe(e=>{let i={avatar:e.data.filename_hashed};this._uploadService.uploadToS3(t,e.data.url).subscribe(s=>{s.type===Cc.e.Response&&this._myProfileService.fetchImage(this._session.id,i).subscribe(i=>{i.data.success&&(this.isLoading=!1,this._myProfileService.getFetchedImage({filename:e.data.filename_hashed,mime:t.type,collection:"avatar",operation:"read"}).subscribe(e=>{const t=e.data.url;this._session.avatar_url=t,this._myProfileService.sessionAvatarUrl$.next(t),this.uploadFile.nativeElement.value="",D.c.getInstance().setUserInfo({avatar:this._myProfileService.sessionAvatarUrl$.value})})),this._docLayoutService.toast.showToast({message:GS.a.personalInfo.successUploadImage,type:"success"})})})},()=>{this.isLoading=!1,this.uploadFile.nativeElement.value=""})}_uploadAvatar(e){const t=Di.a.getInstance().get("access_token").access_token;let i=new Cc.f;t&&(i=i.append("Authorization",`Bearer ${t}`));let s=e[0];this.isLoading=!0,this._uploadService.uploadToS3(s,"/manage/v1/upload/avatar",i).subscribe(e=>{if(e.type===Cc.e.Response){const t=e.body.data.filename;this._myProfileService.fetchImage(this._session.id,{avatar:t}).subscribe(e=>{e.data.success&&(this.isLoading=!1,this._myProfileService.getFetchedImage({filename:t,mime:s.type,collection:"avatar",operation:"read"}).subscribe(e=>{const t=e.data.url;this._session.avatar_url=t,this._myProfileService.sessionAvatarUrl$.next(t),D.c.getInstance().setUserInfo({avatar:this._myProfileService.sessionAvatarUrl$.value}),this.uploadFile.nativeElement.value=""})),this._docLayoutService.toast.showToast({message:GS.a.personalInfo.successUploadImage,type:"success"})})}})}_uploadAvatarUsingPost(e){const t=e[0];this.isLoading=!0,this._uploadService.uploadToS3UsingPostObject({file:t,collection:"avatar",keepOriginalFileName:!0}).pipe(Object(ki.a)(e=>this._uploadService.getUserReadableURL({fileName:e.filename,collection:"avatar",keepOriginalFileName:!0}))).subscribe(e=>{this._myProfileService.fetchImage(this._session.id,{avatar:e.fileName}).subscribe(t=>{t.data.success&&(this.isLoading=!1,this._session.avatar_url=e.url,this._myProfileService.sessionAvatarUrl$.next(e.url),D.c.getInstance().setUserInfo({avatar:e.url}),this.uploadFile.nativeElement.value=""),this._docLayoutService.toast.showToast({message:GS.a.personalInfo.successUploadImage,type:"success"})})},e=>{this.isLoading=!1,this._docLayoutService.toast.showToast({message:GS.a.savedError,type:"error"})})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(YS.a),c.ec(KS.a),c.ec(j.a),c.ec(u.h),c.ec(c.i),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-my-profile-personal-info"]],viewQuery:function(e,t){if(1&e&&(c.nd(JS,1),c.nd(QS.a,1)),2&e){let e;c.Rc(e=c.tc())&&(t.uploadFile=e.first),c.Rc(e=c.tc())&&(t.userAdditionalField=e)}},hostAttrs:[1,"lrn-my-profile-personal-info"],decls:30,vars:32,consts:[[1,"border"],[1,"ui-row"],[1,"ui-col-24"],[1,"avatar-section","font-custom"],["aria-labelledby","my-personal-info-avatar-section"],[1,"container"],[3,"size","imageUrl","text","iconName","showDeleteButton","deleteButtonTooltip","deleteButtonAriaLabel","uiAriaHidden","delete"],[1,"direction"],["id","my-personal-info-avatar-section","role","heading","aria-level","3",1,"title-text"],[1,"avatar-description"],["class","ui-visually-hidden",4,"ngIf"],[1,"error-img-load"],[4,"ngIf"],["type","file","accept","image/gif, image/png, image/jpg, image/jpeg",3,"hidden","change"],["uploadFile",""],[3,"label","color","loading","trigger"],["dcbUIRelativeViewport","",3,"formGroup","ngSubmit",4,"ngIf"],[1,"ui-visually-hidden"],["dcbUIRelativeViewport","",3,"formGroup","ngSubmit"],["aria-labelledby","my-personal-info-details-group"],[1,"details-section","font-custom"],["id","my-personal-info-details-group","role","heading","aria-level","3",1,"title-text"],["class","error-space",4,"ngIf"],[1,"ui-col-24","ui-col-sm-12","field-spacing"],[3,"formControl","disabledMarker","label"],["ngDefaultControl","",3,"formControl","requiredMarker","label"],["aria-labelledby","my-personal-info-additional-fields-group",4,"ngIf"],[1,"tab-footer"],["type","submit",3,"label","loading","ariaLabel"],[1,"error-space"],[3,"title","message"],["aria-labelledby","my-personal-info-additional-fields-group"],[1,"additional-fields-section","font-custom"],["id","my-personal-info-additional-fields-group","role","heading","aria-level","3",1,"title-text"],[4,"ngFor","ngForOf"],["ngDefaultControl","",3,"id","label","type","control","options","iframeHeight","iframeUrl","userData"],["class","clearfix",4,"ngIf"],[1,"clearfix"]],template:function(e,t){if(1&e){const e=c.lc();c.kc(0,"div",0),c.kc(1,"div",1),c.kc(2,"div",2),c.kc(3,"div",3),c.kc(4,"section",4),c.kc(5,"div",5),c.kc(6,"ui-avatar",6),c.sc("delete",function(){return t.deleteAvatar()}),c.xc(7,"t"),c.xc(8,"t"),c.jc(),c.kc(9,"div",7),c.kc(10,"div",8),c.gd(11),c.xc(12,"t"),c.jc(),c.kc(13,"div",9),c.kc(14,"div"),c.gd(15),c.xc(16,"t"),c.jc(),c.kc(17,"div"),c.gd(18),c.xc(19,"t"),c.jc(),c.jc(),c.ed(20,XS,3,3,"span",10),c.ed(21,ZS,3,3,"span",10),c.ed(22,ek,3,3,"span",10),c.kc(23,"div",11),c.ed(24,tk,3,3,"ui-input-error",12),c.jc(),c.kc(25,"input",13,14),c.sc("change",function(e){return t.fileUpload(e)}),c.jc(),c.kc(27,"ui-button-outlined",15),c.sc("trigger",function(){return c.Vc(e),c.Sc(26).click()}),c.xc(28,"t"),c.jc(),c.jc(),c.jc(),c.jc(),c.jc(),c.jc(),c.jc(),c.jc(),c.ed(29,dk,41,52,"form",16)}2&e&&(c.Mb(6),c.Dc("size",t.sizeAvatar)("imageUrl",t.imageUrl)("text",t.userInitials)("iconName",t.hasName?"":"user")("showDeleteButton",!!t.imageUrl)("deleteButtonTooltip",c.yc(7,20,t.dictionary.delete))("deleteButtonAriaLabel",c.yc(8,22,t.dictionary.deleteAvatar))("uiAriaHidden",""===t.imageUrl),c.Mb(5),c.id(" ",c.yc(12,24,t.dictionary.personalInfo.avatar)," "),c.Mb(4),c.id(" ",c.yc(16,26,t.dictionary.personalInfo.minDimensionImage)," "),c.Mb(3),c.id(" ",c.yc(19,28,t.dictionary.personalInfo.maxFileSize)," "),c.Mb(2),c.Dc("ngIf",""===t.imageUrl&&!t.hasName),c.Mb(1),c.Dc("ngIf",""===t.imageUrl&&t.hasName),c.Mb(1),c.Dc("ngIf",""!==t.imageUrl),c.Mb(2),c.Dc("ngIf",!t.errorSizeImg),c.Mb(1),c.Dc("hidden",!0),c.Mb(2),c.Dc("label",c.yc(28,30,t.dictionary.personalInfo.btnImage))("color",t.color)("loading",t.isLoading),c.Mb(2),c.Dc("ngIf",t.showPersonalInfo))},directives:[b.o,b.j,m.p,b.O,b.Ac,Ze.y,Ze.p,b.ue,Ze.i,b.Qc,Ze.o,Ze.f,Ze.b,b.S,b.Jd,m.o,QS.a],pipes:[M.b],styles:["lrn-my-profile-personal-info .avatar-section{padding:1.5rem 0 2rem;padding:var(--ui-spacing-md) 0 var(--ui-spacing-lg)}lrn-my-profile-personal-info .avatar-section ui-avatar{display:inline-table;margin-right:1.5rem;margin-right:var(--ui-spacing-md)}[dir=rtl] lrn-my-profile-personal-info .avatar-section ui-avatar{margin-right:0;margin-left:1.5rem;margin-left:var(--ui-spacing-md)}lrn-my-profile-personal-info .avatar-description{font-size:.75rem;font-size:var(--ui-typography-size-xs);margin-top:.5rem;margin-top:var(--ui-spacing-xxs);line-height:1.25rem;line-height:var(--ui-typography-lineheight-sm);color:#707070;color:var(--ui-color-typography-secondary)}lrn-my-profile-personal-info .details-section{padding:1.5rem 0;padding:var(--ui-spacing-md) 0}lrn-my-profile-personal-info .error-space{maring-top:1rem;margin-top:var(--ui-spacing-sm)}lrn-my-profile-personal-info .error-img-load{margin:1rem 0;margin:var(--ui-spacing-sm) 0}lrn-my-profile-personal-info .additional-fields-section{padding:1.5rem 0;padding:var(--ui-spacing-md) 0}lrn-my-profile-personal-info .field-spacing{margin:0 0 var(--ui-spacing-md);display:block}"],encapsulation:2}),e})();var hk=i("bD2U");function pk(e){const t=D.b.getInstance().settings;return e.value?t.pass_min_char&&e.value.length<+t.pass_min_char||t.pass_not_username&&e.value===D.c.getInstance().username?{pattern:!0}:t.pass_alfanumeric&&!e.value.match(/^(?=.*[a-zA-Z])(?=.*[0-9])/)?{alphanumeric:!0}:/(.)\1{2,}/gi.test(e.value)?{duplicateCharacter:!0}:null:null}var gk=i("+uCo");function mk(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.changePassword.error.emptyCurrentPassword)," ")}}function bk(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.id(" ",c.yc(2,1,null==e.currentPasswordFormControl.errors?null:e.currentPasswordFormControl.errors.backendError)," ")}}function fk(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.changePassword.error.emptyNewPassword)," ")}}function _k(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.changePassword.error.passwordPolicy)," ")}}function vk(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.changePassword.error.passwordAlphaNumeric)," ")}}function yk(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.changePassword.error.repeatingCharacters)," ")}}function wk(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.id(" ",c.yc(2,1,null==e.newPasswordFormControl.errors?null:e.newPasswordFormControl.errors.backendError)," ")}}function Ck(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.changePassword.error.emptyRetypedPassword)," ")}}function Sk(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc();c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.changePassword.error.notEqualPassword)," ")}}let kk=(()=>{class e{constructor(){this.dictionary=GS.a,this.userID=D.c.getInstance().username,this.currentPasswordFormControl=new Ze.e("",[Ze.x.required]),this.newPasswordFormControl=new Ze.e("",[Ze.x.required,pk]),this.retypePasswordFormControl=new Ze.e("",[Ze.x.required,Nc.a.matchPassword(this.newPasswordFormControl)]),this.passwordChangeFormGroup=new Ze.h({currentPassword:this.currentPasswordFormControl,newPassword:this.newPasswordFormControl,retypePassword:this.retypePasswordFormControl})}ngOnInit(){this.newPasswordFormControl.valueChanges.subscribe(()=>{this.retypePasswordFormControl.dirty&&this.retypePasswordFormControl.updateValueAndValidity()})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-my-profile-change-password-form"]],hostAttrs:[1,"lrn-my-profile-change-password-form"],decls:35,vars:71,consts:[[3,"formControl","requiredMarker","label","tooltipLabelShow","tooltipLabelHide","buttonIconAriaLabelShow","buttonIconAriaLabelHide"],[4,"ngIf"],[1,"new-password-wrapper",3,"uiFocusWithin"],[3,"formControl","requiredMarker","label","ariaDescribedBy","tooltipLabelShow","tooltipLabelHide","buttonIconAriaLabelShow","buttonIconAriaLabelHide"],[3,"userID","passwordValue","allowAutoGenerate"]],template:function(e,t){1&e&&(c.kc(0,"form"),c.kc(1,"div"),c.kc(2,"ui-input-password",0),c.xc(3,"t"),c.xc(4,"t"),c.xc(5,"t"),c.xc(6,"t"),c.xc(7,"t"),c.xc(8,"t"),c.ed(9,mk,3,3,"ui-input-error",1),c.ed(10,bk,3,3,"ui-input-error",1),c.jc(),c.jc(),c.kc(11,"div",2),c.kc(12,"ui-input-password",3),c.xc(13,"t"),c.xc(14,"t"),c.xc(15,"t"),c.xc(16,"t"),c.xc(17,"t"),c.xc(18,"t"),c.ed(19,fk,3,3,"ui-input-error",1),c.ed(20,_k,3,3,"ui-input-error",1),c.ed(21,vk,3,3,"ui-input-error",1),c.ed(22,yk,3,3,"ui-input-error",1),c.ed(23,wk,3,3,"ui-input-error",1),c.jc(),c.fc(24,"doc-layout-password-helper",4),c.jc(),c.kc(25,"div"),c.kc(26,"ui-input-password",0),c.xc(27,"t"),c.xc(28,"t"),c.xc(29,"t"),c.xc(30,"t"),c.xc(31,"t"),c.xc(32,"t"),c.ed(33,Ck,3,3,"ui-input-error",1),c.ed(34,Sk,3,3,"ui-input-error",1),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(2),c.Dc("formControl",t.currentPasswordFormControl)("requiredMarker",c.yc(3,35,t.dictionary.personalInfo.requiredMarker))("label",c.yc(4,37,t.dictionary.changePassword.currentPassword))("tooltipLabelShow",c.yc(5,39,t.dictionary.changePassword.showPassword))("tooltipLabelHide",c.yc(6,41,t.dictionary.changePassword.hidePassword))("buttonIconAriaLabelShow",c.yc(7,43,t.dictionary.changePassword.showPassword))("buttonIconAriaLabelHide",c.yc(8,45,t.dictionary.changePassword.hidePassword)),c.Mb(7),c.Dc("ngIf",t.currentPasswordFormControl.dirty&&(null==t.currentPasswordFormControl.errors?null:t.currentPasswordFormControl.errors.required)),c.Mb(1),c.Dc("ngIf",t.currentPasswordFormControl.dirty&&(null==t.currentPasswordFormControl.errors?null:t.currentPasswordFormControl.errors.backendError)),c.Mb(1),c.Dc("uiFocusWithin","new-password-wrapper-focus-within"),c.Mb(1),c.Dc("formControl",t.newPasswordFormControl)("requiredMarker",c.yc(13,47,t.dictionary.personalInfo.requiredMarker))("label",c.yc(14,49,t.dictionary.changePassword.newPassword))("ariaDescribedBy","password-helper")("tooltipLabelShow",c.yc(15,51,t.dictionary.changePassword.showPassword))("tooltipLabelHide",c.yc(16,53,t.dictionary.changePassword.hidePassword))("buttonIconAriaLabelShow",c.yc(17,55,t.dictionary.changePassword.showPassword))("buttonIconAriaLabelHide",c.yc(18,57,t.dictionary.changePassword.hidePassword)),c.Mb(7),c.Dc("ngIf",t.newPasswordFormControl.dirty&&(null==t.newPasswordFormControl.errors?null:t.newPasswordFormControl.errors.required)),c.Mb(1),c.Dc("ngIf",t.newPasswordFormControl.dirty&&(null==t.newPasswordFormControl.errors?null:t.newPasswordFormControl.errors.pattern)),c.Mb(1),c.Dc("ngIf",t.newPasswordFormControl.dirty&&(null==t.newPasswordFormControl.errors?null:t.newPasswordFormControl.errors.alphanumeric)),c.Mb(1),c.Dc("ngIf",t.newPasswordFormControl.dirty&&(null==t.newPasswordFormControl.errors?null:t.newPasswordFormControl.errors.duplicateCharacter)),c.Mb(1),c.Dc("ngIf",t.newPasswordFormControl.dirty&&(null==t.newPasswordFormControl.errors?null:t.newPasswordFormControl.errors.backendError)),c.Mb(1),c.Dc("userID",t.userID)("passwordValue",t.newPasswordFormControl.value)("allowAutoGenerate",!1),c.Mb(2),c.Dc("formControl",t.retypePasswordFormControl)("requiredMarker",c.yc(27,59,t.dictionary.personalInfo.requiredMarker))("label",c.yc(28,61,t.dictionary.changePassword.confirmNewPassword))("tooltipLabelShow",c.yc(29,63,t.dictionary.changePassword.showPassword))("tooltipLabelHide",c.yc(30,65,t.dictionary.changePassword.hidePassword))("buttonIconAriaLabelShow",c.yc(31,67,t.dictionary.changePassword.showPassword))("buttonIconAriaLabelHide",c.yc(32,69,t.dictionary.changePassword.hidePassword)),c.Mb(7),c.Dc("ngIf",t.retypePasswordFormControl.dirty&&(null==t.retypePasswordFormControl.errors?null:t.retypePasswordFormControl.errors.required)),c.Mb(1),c.Dc("ngIf",t.retypePasswordFormControl.dirty&&(null==t.retypePasswordFormControl.errors?null:t.retypePasswordFormControl.errors.notEquivalent)))},directives:[Ze.y,Ze.p,Ze.q,b.Dc,Ze.o,Ze.f,m.p,b.ic,gk.a,b.Ac],pipes:[M.b],styles:["lrn-my-profile-change-password-form .new-password-wrapper{position:relative}lrn-my-profile-change-password-form .new-password-wrapper doc-layout-password-helper{display:block;position:absolute;top:calc(var(--ui-spacing-lg) + var(--ui-typography-lineheight-md));left:0;width:100%;z-index:var(--ui-zindex-modal);opacity:0;transform:translateY(calc(var(--ui-spacing-lg) * -1));pointer-events:none;transition:opacity var(--ui-motion-duration-short) var(--ui-motion-easing-default),transform var(--ui-motion-duration-short) var(--ui-motion-easing-leaving)}[dir=rtl] lrn-my-profile-change-password-form .new-password-wrapper doc-layout-password-helper{left:0;right:var(--ui-spacing-tiny)}lrn-my-profile-change-password-form .new-password-wrapper.new-password-wrapper-focus-within doc-layout-password-helper{opacity:1;transform:translateY(0);pointer-events:auto;transition:opacity var(--uimotion-duration-short) var(--ui-motion-easing-default),transform var(--ui-motion-duration-short) var(--ui-motion-easing-entering)}"],encapsulation:2}),e})();const Tk=["formComponent"],Ik=function(e){return{count_error:e}};function xk(e,t){if(1&e&&(c.fc(0,"ui-notification-inline",9),c.xc(1,"t"),c.xc(2,"t")),2&e){const e=c.wc();c.Dc("title",c.zc(1,2,1===e.passwordChangeErrorsCount?e.dictionary.savingChangesNotPossibleSingular:e.dictionary.savingChangesNotPossiblePlural,c.Ic(7,Ik,e.passwordChangeErrorsCount)))("message",c.yc(2,5,e.dictionary.personalInfo.error.errorsSaveFormSubTitle))}}let Dk=(()=>{class e{constructor(e,t,i){this._myProfileService=e,this._docLayoutService=t,this._secureLogoutService=i,this.dictionary=GS.a,this.passwordChangeErrorsCount=0,this.savingNewPassword=!1}updatePassword(){const e=new je.a(!1),t=this.formComponent.passwordChangeFormGroup;for(let i in t.controls)t.controls[i].markAsDirty();return t.markAllAsTouched(),t.updateValueAndValidity(),this.passwordChangeErrorsCount=0,t.valid?this._myProfileService.updatePassword(t).subscribe(i=>{i.error||(this._docLayoutService.toast.showToast({message:this.dictionary.changePassword.successChangePassword,type:"success"}),t.reset(),this._myProfileService.redirectToSecureLogout()),this.markFormAsPristine(),e.next(!1)},()=>{this.passwordChangeErrorsCount=Object.keys(t.controls).filter(e=>!t.controls[e].valid).length,e.next(!1)}):(this.passwordChangeErrorsCount=Object.keys(t.controls).filter(e=>!t.controls[e].valid).length,setTimeout(()=>{e.next(!1)})),e}markFormAsPristine(){for(let e in this.formComponent.passwordChangeFormGroup.controls)this.formComponent.passwordChangeFormGroup.controls[e].markAsPristine()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(YS.a),c.ec(j.a),c.ec(hk.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-my-profile-change-password"]],viewQuery:function(e,t){if(1&e&&c.nd(Tk,1),2&e){let e;c.Rc(e=c.tc())&&(t.formComponent=e.first)}},hostAttrs:[1,"lrn-my-profile-change-password"],decls:18,vars:8,consts:[[1,"password-tab-content"],[1,"ui-row"],[1,"ui-col-24"],["class","password-inline-error",3,"title","message",4,"ngIf"],[1,"password-content-info"],[1,"ui-col-24","ui-col-sm-12"],["formComponent",""],[1,"tab-footer"],["color","accent",3,"label","loading","trigger"],[1,"password-inline-error",3,"title","message"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.kc(2,"div",2),c.ed(3,xk,3,9,"ui-notification-inline",3),c.jc(),c.jc(),c.kc(4,"div",1),c.kc(5,"div",2),c.kc(6,"div",4),c.gd(7),c.xc(8,"t"),c.jc(),c.jc(),c.jc(),c.kc(9,"div",1),c.kc(10,"div",5),c.fc(11,"lrn-my-profile-change-password-form",null,6),c.jc(),c.jc(),c.kc(13,"div",1),c.kc(14,"div",2),c.kc(15,"div",7),c.kc(16,"ui-button-raised-primary",8),c.sc("trigger",function(){return t.updatePassword()}),c.xc(17,"t"),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(3),c.Dc("ngIf",t.passwordChangeErrorsCount>0),c.Mb(4),c.id(" ",c.yc(8,4,t.dictionary.changePassword.contentInfo)," "),c.Mb(9),c.Dc("label",c.yc(17,6,t.dictionary.changePassword.btnChangePassword))("loading",t.savingNewPassword))},directives:[m.p,kk,b.S,b.Jd],pipes:[M.b],styles:["lrn-my-profile-change-password .password-tab-content{margin-top:var(--ui-spacing-md)}lrn-my-profile-change-password .password-content-info,lrn-my-profile-change-password .password-inline-error{margin-bottom:var(--ui-spacing-md);display:block}"],encapsulation:2}),e})();var Ok=i("q6CC");const Ek={language:tt.a.t("standard","Language"),dateFormat:tt.a.t("standard","Date format"),timezone:tt.a.t("standard","Timezone"),dialog:{title:tt.a.t("standard","Save Changes with Platform Reload"),subtitle:tt.a.t("standard","Click on Confirm to save your changes. The platform will reload to apply them. Are you sure you want to proceed?"),btnCancel:tt.a.t("salesforce","CANCEL"),btnConfirm:tt.a.t("webapp","CONFIRM")}};var Ak=i("0La2"),Pk=i("xAMO");const Mk=["dialogConfirmChange"];function Lk(e,t){if(1&e){const e=c.lc();c.kc(0,"ui-input-select-option",13),c.sc("trigger",function(){c.Vc(e);const i=t.$implicit;return c.wc().changeLanguage(i.value)}),c.gd(1),c.jc()}if(2&e){const e=t.$implicit;c.Dc("value",e.value),c.Mb(1),c.id(" ",e.label," ")}}function jk(e,t){if(1&e&&(c.kc(0,"ui-input-select-option",16),c.gd(1),c.jc()),2&e){const e=t.$implicit;c.Dc("value",e.value),c.Mb(1),c.id("",e.label," ")}}function Rk(e,t){if(1&e&&(c.kc(0,"div",4),c.kc(1,"ui-input-select",14),c.xc(2,"t"),c.ed(3,jk,2,2,"ui-input-select-option",15),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("label",c.yc(2,3,e.dictionary.dateFormat))("formControl",e.preferencesForm.controls.dateFormat),c.Mb(2),c.Dc("ngForOf",e.dateFormats)}}function Fk(e,t){if(1&e&&(c.kc(0,"ui-input-select-option",16),c.gd(1),c.jc()),2&e){const e=t.$implicit;c.Dc("value",e.value),c.Mb(1),c.id("",e.label," ")}}function Nk(e,t){if(1&e&&(c.kc(0,"div",4),c.kc(1,"ui-input-select",14),c.xc(2,"t"),c.ed(3,Fk,2,2,"ui-input-select-option",15),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("label",c.yc(2,3,e.dictionary.timezone))("formControl",e.preferencesForm.controls.timezone),c.Mb(2),c.Dc("ngForOf",e.timezones)}}function Uk(e,t){if(1&e&&c.fc(0,"country-selector",17),2&e){const e=c.wc();c.Dc("feature",e.countrySelectorFeature)}}function zk(e,t){if(1&e){const e=c.lc();c.kc(0,"doc-shared-dialog-body"),c.kc(1,"doc-shared-dialog-title"),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"doc-shared-dialog-content"),c.kc(5,"div",18),c.gd(6),c.xc(7,"t"),c.jc(),c.jc(),c.jc(),c.kc(8,"doc-shared-dialog-actions"),c.kc(9,"doc-shared-dialog-action",19),c.sc("trigger",function(){return c.Vc(e),c.wc().dialogConfirmHide()}),c.xc(10,"t"),c.jc(),c.kc(11,"doc-shared-dialog-action",20),c.sc("trigger",function(t){return c.Vc(e),c.wc().confirmPreferences(t)}),c.xc(12,"t"),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(2),c.id(" ",c.yc(3,5,e.dictionary.dialog.title)," "),c.Mb(4),c.id(" ",c.yc(7,7,e.dictionary.dialog.subtitle)," "),c.Mb(3),c.Dc("label",c.yc(10,9,e.dictionary.dialog.btnCancel)),c.Mb(2),c.Dc("label",c.yc(12,11,e.dictionary.dialog.btnConfirm))("type","positive")}}let qk=(()=>{class e{constructor(e,t,i,s,n,a,o){this._formatter=e,this._docLayoutService=t,this._myProfileService=i,this._bootstrapService=s,this._changeDetector=n,this._countryService=a,this._toggleService=o,this.sizeDialog=b.cc.SM,this.dictionary=Ek,this.dictionaryMyProfile=GS.a,this.languages=D.b.getInstance().getLanguageOptions(),this.dates="",this.isLoading=!1,this.isChecked=!0,this.preferencesForm=new Ze.h({language:new Ze.e(""),dateFormat:new Ze.e(""),timezone:new Ze.e("")}),this._session=D.c.getInstance(),this._formatSelected="",this._ngUnsubscribe$=new _t.a,void 0===this.timezones&&this.populateTimezonesField()}ngOnInit(){this._toggleService.isOn(u.f.TOGGLE_MY_PROFILE_DATE_FORMAT_SELECTION)?this.setupDateFormat():this.changeLanguage(this._session.language,!0),this.setInputValue(),this.canChangeTimezone=D.b.getInstance().settings.timezone_allow_user_override,this.canChangeDateFormat=D.b.getInstance().settings.allow_user_dateformat_override,this.appendCountrySelector()}appendCountrySelector(){this.countrySelectorFeature=new Ok.a(this._countryService.getCountries(),this.preferencesForm),this.countrySelectorFeature.enabled&&(this.preferencesForm=this.countrySelectorFeature.patchForm())}ngOnDestroy(){this._ngUnsubscribe$.next(),this._ngUnsubscribe$.complete()}savePreferences(){const e=new je.a(!1);return this.isLoading=!0,setTimeout(()=>{e.next(!0),this.isLoading=!1,this._changeDetector.detectChanges()},600),this.dialogConfirmChange.show(),e}changeLanguage(e,t=!1){var i;if(this._toggleService.isOn(u.f.TOGGLE_MY_PROFILE_DATE_FORMAT_SELECTION))return;const s=D.b.getInstance(),n=void 0!==s.active_languages[e]?s.active_languages[e]:null;if(null===n)return;const a=[];let o;for(const r in n.date_formats)n.date_formats.hasOwnProperty(r)&&(o=this._formatter.asDatetime("2005-03-15 23:30:00 ",n.date_formats[r]),a.push({label:o,value:n.date_formats[r]}),n.date_formats[r]===D.c.getInstance().datetime_format&&(this._formatSelected=n.date_formats[r]));this.dateFormats=a,a.length>0&&(this._formatSelected=a[0].value),null===(i=this.preferencesForm.get("dateFormat"))||void 0===i||i.setValue(this._formatSelected),t&&this.markFormAsPristine()}setupDateFormat(){const e=D.b.getInstance(),t=Object.keys(e.active_languages);this.dateFormats=[],t.forEach(t=>{e.getLangByShortCode(t).date_formats.forEach(e=>{const t=this._formatter.asDatetime("2005-03-15 23:30:00",e);this.dateFormats.push({label:`${t} (${e})`,value:e})})}),this.markFormAsPristine()}isFormDirty(){let e=!1;for(let t in this.preferencesForm.controls)if(e=this.preferencesForm.controls[t].dirty,e)break;return e}markFormAsPristine(){for(let e in this.preferencesForm.controls)this.preferencesForm.controls[e].markAsPristine()}confirmPreferences(e){const t=JSON.stringify({settings:[{name:"ui.language",value:this.preferencesForm.controls.language.value},{name:"date_format",value:this.preferencesForm.controls.dateFormat.value},{name:"timezone",value:this.preferencesForm.controls.timezone.value},this.countrySelectorFeature.getPayload(this.preferencesForm).asNameValue]});this._myProfileService.savePreferencesData(t,this._session.id.toString()).pipe(Object(se.a)(1)).subscribe(()=>{e.next(),this.isLoading=!1,this.markFormAsPristine()},()=>{e.next(),this.isLoading=!1}),this.dialogConfirmChange.hide(),this._bootstrapService.reboot(),this._docLayoutService.toast.showToast({message:GS.a.personalInfo.success,type:"success"})}setInputValue(){var e,t,i;null===(e=this.preferencesForm.get("language"))||void 0===e||e.setValue(this._session.language),null===(t=this.preferencesForm.get("timezone"))||void 0===t||t.setValue(this._session.timezone),null===(i=this.preferencesForm.get("dateFormat"))||void 0===i||i.setValue(this._session.datetime_format),this.markFormAsPristine()}dialogConfirmHide(){this.isChecked=!0,this.dialogConfirmChange.hide()}populateTimezonesField(){this.timezones=this._formatter.momentZones()}}return e.\u0275fac=function(t){return new(t||e)(c.ec(ni.b),c.ec(j.a),c.ec(YS.a),c.ec(le.a),c.ec(c.i),c.ec(Ak.a),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-my-profile-preferences"]],viewQuery:function(e,t){if(1&e&&c.nd(Mk,1),2&e){let e;c.Rc(e=c.tc())&&(t.dialogConfirmChange=e.first)}},hostAttrs:[1,"lrn-my-profile-preferences"],decls:18,vars:15,consts:[[1,"ui-row"],[1,"ui-col-24","ui-col-sm-12"],[3,"formGroup","ngSubmit"],[1,"preferences-wrapper"],[1,"field-spacing"],["id","lrn-my-profile-preferences-language-select","ngDefaultControl","",3,"label","formControl"],[3,"value","trigger",4,"ngFor","ngForOf"],["class","field-spacing",4,"ngIf"],["class","field-spacing",3,"feature",4,"ngIf"],[1,"btn-save-preferences"],["type","submit",3,"label","loading"],[3,"canClose","size"],["dialogConfirmChange",""],[3,"value","trigger"],["ngDefaultControl","",3,"label","formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"field-spacing",3,"feature"],[1,"lrn-preferences-wrapper"],["type","neutral",3,"label","trigger"],[3,"label","type","trigger"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.kc(2,"form",2),c.sc("ngSubmit",function(){return t.savePreferences()}),c.kc(3,"div",3),c.kc(4,"div",4),c.kc(5,"ui-input-select",5),c.xc(6,"t"),c.ed(7,Lk,2,2,"ui-input-select-option",6),c.jc(),c.jc(),c.ed(8,Rk,4,5,"div",7),c.ed(9,Nk,4,5,"div",7),c.ed(10,Uk,1,1,"country-selector",8),c.jc(),c.kc(11,"div",9),c.fc(12,"ui-button-raised-primary",10),c.xc(13,"t"),c.jc(),c.jc(),c.jc(),c.jc(),c.kc(14,"doc-shared-dialog"),c.kc(15,"doc-shared-dialog",11,12),c.ed(17,zk,13,13,"ng-template"),c.jc(),c.jc()),2&e&&(c.Mb(2),c.Dc("formGroup",t.preferencesForm),c.Mb(3),c.Dc("label",c.yc(6,11,t.dictionary.language))("formControl",t.preferencesForm.controls.language),c.Mb(2),c.Dc("ngForOf",t.languages),c.Mb(1),c.Dc("ngIf",t.canChangeDateFormat),c.Mb(1),c.Dc("ngIf",t.canChangeTimezone),c.Mb(1),c.Dc("ngIf",t.countrySelectorFeature.enabled),c.Mb(2),c.Dc("label",c.yc(13,13,t.dictionaryMyProfile.personalInfo.btnSave))("loading",t.isLoading),c.Mb(3),c.Dc("canClose",!0)("size",t.sizeDialog))},directives:[Ze.y,Ze.p,Ze.i,b.Lc,Ze.b,Ze.o,Ze.f,m.o,m.p,b.S,Ko.a,b.Nc,Pk.a,Jo.a,Xo.a,Zo.a,er.a,tr.a],pipes:[M.b],styles:["lrn-my-profile-preferences .preferences-wrapper{padding:var(--ui-spacing-md) 0}lrn-my-profile-preferences .preferences-wrapper .field-spacing{margin:0 0 var(--ui-spacing-md);display:block}lrn-my-profile-preferences .btn-save-preferences{padding-bottom:var(--ui-spacing-md)}.lrn-preferences-wrapper{margin-bottom:var(--ui-spacing-sm)}.lrn-preferences-not-checked{color:var(--ui-color-typography-error)}"],encapsulation:2,changeDetection:0}),e})();var Vk=i("BpKD");const Bk=["generateRecoveryKey"],Gk=["saveRecoveryKey"],Hk=["unpairDialog"];function $k(e,t){if(1&e&&(c.kc(0,"div",26),c.fc(1,"ui-notification-inline",27),c.xc(2,"t"),c.xc(3,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("title",c.yc(2,2,e.dictionary.authenticatorApp.notificationError.title))("message",c.yc(3,4,e.dictionary.authenticatorApp.notificationError.subtitle))}}function Yk(e,t){if(1&e&&(c.kc(0,"div",28),c.xc(1,"t"),c.fc(2,"qrcode",29),c.jc()),2&e){const e=c.wc(2);c.Dc("uiAriaLabel",c.yc(1,4,e.dictionary.authenticatorApp.scanQrCode)),c.Mb(2),c.Dc("qrdata",e.qrCodeUri)("size",140)("level","M")}}function Wk(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.authenticatorApp.errors.missingOtp)," ")}}function Qk(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.authenticatorApp.errors.wrongLengthOtp)," ")}}function Kk(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.authenticatorApp.errors.wrongOtpCode)," ")}}function Jk(e,t){if(1&e){const e=c.lc();c.kc(0,"div"),c.kc(1,"div",8),c.ed(2,$k,4,6,"div",9),c.jc(),c.kc(3,"form",10),c.sc("ngSubmit",function(){return c.Vc(e),c.wc().pairApp()}),c.kc(4,"div",8),c.kc(5,"div",11),c.gd(6),c.xc(7,"t"),c.jc(),c.kc(8,"div",12),c.fc(9,"ui-avatar",13),c.kc(10,"div",14),c.gd(11),c.xc(12,"t"),c.jc(),c.jc(),c.jc(),c.kc(13,"div",8),c.kc(14,"div",12),c.fc(15,"ui-avatar",15),c.kc(16,"div",14),c.gd(17),c.xc(18,"t"),c.jc(),c.jc(),c.jc(),c.kc(19,"div",8),c.kc(20,"div",16),c.fc(21,"ui-avatar",17),c.kc(22,"div",14),c.gd(23),c.xc(24,"t"),c.jc(),c.jc(),c.ed(25,Yk,3,6,"div",18),c.kc(26,"div",19),c.kc(27,"div"),c.gd(28),c.xc(29,"t"),c.jc(),c.kc(30,"div",20),c.gd(31),c.jc(),c.jc(),c.jc(),c.kc(32,"div",8),c.kc(33,"div",12),c.fc(34,"ui-avatar",21),c.kc(35,"div",14),c.gd(36),c.xc(37,"t"),c.jc(),c.jc(),c.kc(38,"ui-input-text",22),c.xc(39,"t"),c.xc(40,"t"),c.ed(41,Wk,3,3,"ui-input-error",23),c.ed(42,Qk,3,3,"ui-input-error",23),c.ed(43,Kk,3,3,"ui-input-error",23),c.jc(),c.jc(),c.kc(44,"div",8),c.kc(45,"div",24),c.fc(46,"ui-button-raised-primary",25),c.xc(47,"t"),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(2),c.Dc("ngIf",!e.controlOtp||!e.isOtpValid),c.Mb(1),c.Dc("formGroup",e.authenticatorAppForm),c.Mb(3),c.id(" ",c.yc(7,22,e.dictionary.authenticatorApp.contentText)," "),c.Mb(3),c.Dc("size",e.sizeBulletPoint),c.Mb(2),c.id(" ",c.yc(12,24,e.dictionary.authenticatorApp.bulletPoints.first)," "),c.Mb(4),c.Dc("size",e.sizeBulletPoint),c.Mb(2),c.id(" ",c.yc(18,26,e.dictionary.authenticatorApp.bulletPoints.second)," "),c.Mb(4),c.Dc("size",e.sizeBulletPoint),c.Mb(2),c.id(" ",c.yc(24,28,e.dictionary.authenticatorApp.bulletPoints.third)," "),c.Mb(2),c.Dc("ngIf",e.qrCodeUri),c.Mb(3),c.id(" ",c.yc(29,30,e.dictionary.authenticatorApp.noCamera)," "),c.Mb(3),c.id(" ",e.secretKey," "),c.Mb(3),c.Dc("size",e.sizeBulletPoint),c.Mb(2),c.id(" ",c.yc(37,32,e.dictionary.authenticatorApp.bulletPoints.fourth)," "),c.Mb(2),c.Dc("formControl",e.authenticatorAppForm.controls.oneTimePassword)("requiredMarker",c.yc(39,34,e.dictionaryMyProfile.personalInfo.requiredMarker))("label",c.yc(40,36,e.dictionary.authenticatorApp.oneTimePassword)),c.Mb(3),c.Dc("ngIf",(null==e.authenticatorAppForm.controls.oneTimePassword.errors?null:e.authenticatorAppForm.controls.oneTimePassword.errors.required)&&e.authenticatorAppForm.controls.oneTimePassword.dirty),c.Mb(1),c.Dc("ngIf",(null==e.authenticatorAppForm.controls.oneTimePassword.errors?null:e.authenticatorAppForm.controls.oneTimePassword.errors.lengthError)&&e.authenticatorAppForm.controls.oneTimePassword.dirty),c.Mb(1),c.Dc("ngIf",(null==e.authenticatorAppForm.controls.oneTimePassword.errors?null:e.authenticatorAppForm.controls.oneTimePassword.errors.otpNotValid)&&e.authenticatorAppForm.controls.oneTimePassword.dirty),c.Mb(3),c.Dc("label",c.yc(47,38,e.dictionary.authenticatorApp.activate))("loading",e.spinnerLoading)}}function Xk(e,t){if(1&e){const e=c.lc();c.kc(0,"div",8),c.kc(1,"div",30),c.fc(2,"ui-icon",31),c.kc(3,"div",32),c.kc(4,"div",33),c.gd(5),c.xc(6,"t"),c.jc(),c.kc(7,"div"),c.gd(8),c.xc(9,"t"),c.xc(10,"HDate"),c.jc(),c.kc(11,"div",34),c.kc(12,"ui-button-raised-primary",35),c.sc("trigger",function(){return c.Vc(e),c.wc().showDialog()}),c.xc(13,"t"),c.jc(),c.kc(14,"ui-button-text",36),c.sc("trigger",function(){return c.Vc(e),c.wc().showDialogUnpair()}),c.xc(15,"t"),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(2),c.Dc("name",e.iconCheckName)("size",e.sizeIconCheckCircle)("color","success"),c.Mb(3),c.id(" ",c.yc(6,9,e.dictionary.authenticatorApp.pairedTextTitle)," "),c.Mb(3),c.jd(" ",c.yc(9,11,e.dictionary.authenticatorApp.pairedTextSubtitle)," ",c.yc(10,13,e.isAuthenticatorPaired)," "),c.Mb(4),c.Dc("label",c.yc(13,15,e.dictionary.authenticatorApp.btnNewRecoveryKey)),c.Mb(2),c.Dc("label",c.yc(15,17,e.dictionary.authenticatorApp.unpair))("color",e.btnUnpairColor)}}function Zk(e,t){if(1&e&&(c.kc(0,"div",43),c.fc(1,"ui-notification-inline",27),c.xc(2,"t"),c.xc(3,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("title",c.yc(2,2,e.dictionary.authenticatorApp.notificationErrorGenerateKey.title))("message",c.yc(3,4,e.dictionary.authenticatorApp.notificationErrorGenerateKey.subtitle))}}function eT(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.authenticatorApp.errors.missingOtp)," ")}}function tT(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.authenticatorApp.errors.wrongLengthOtp)," ")}}function iT(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.authenticatorApp.errors.wrongOtpCode)," ")}}function sT(e,t){if(1&e){const e=c.lc();c.kc(0,"doc-shared-dialog-body"),c.kc(1,"doc-shared-dialog-title"),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"doc-shared-dialog-content"),c.ed(5,Zk,4,6,"div",37),c.kc(6,"div",38),c.gd(7),c.xc(8,"t"),c.jc(),c.kc(9,"form",39),c.kc(10,"ui-input-text",40),c.xc(11,"t"),c.xc(12,"t"),c.ed(13,eT,3,3,"ui-input-error",23),c.ed(14,tT,3,3,"ui-input-error",23),c.ed(15,iT,3,3,"ui-input-error",23),c.jc(),c.jc(),c.jc(),c.jc(),c.kc(16,"doc-shared-dialog-actions"),c.kc(17,"doc-shared-dialog-action",41),c.sc("trigger",function(){return c.Vc(e),c.wc(),c.Sc(5).hide()}),c.xc(18,"t"),c.jc(),c.kc(19,"doc-shared-dialog-action",42),c.sc("trigger",function(t){return c.Vc(e),c.wc().generateOtp(t)}),c.xc(20,"t"),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(2),c.id(" ",c.yc(3,12,e.dictionary.authenticatorApp.dialogs.generateOtpTitle)," "),c.Mb(3),c.Dc("ngIf",!e.controlOtp||!e.isOtpValid),c.Mb(2),c.id(" ",c.yc(8,14,e.dictionary.authenticatorApp.dialogs.generateOtpSubTitle)," "),c.Mb(2),c.Dc("formGroup",e.recoverKeyForm),c.Mb(1),c.Dc("formControl",e.recoverKeyForm.controls.recoveryOtp)("requiredMarker",c.yc(11,16,e.dictionaryMyProfile.personalInfo.requiredMarker))("label",c.yc(12,18,e.dictionary.authenticatorApp.oneTimePassword)),c.Mb(3),c.Dc("ngIf",(null==e.recoverKeyForm.controls.recoveryOtp.errors?null:e.recoverKeyForm.controls.recoveryOtp.errors.required)&&e.recoverKeyForm.controls.recoveryOtp.dirty),c.Mb(1),c.Dc("ngIf",(null==e.recoverKeyForm.controls.recoveryOtp.errors?null:e.recoverKeyForm.controls.recoveryOtp.errors.pattern)&&e.recoverKeyForm.controls.recoveryOtp.dirty),c.Mb(1),c.Dc("ngIf",(null==e.recoverKeyForm.controls.recoveryOtp.errors?null:e.recoverKeyForm.controls.recoveryOtp.errors.otpNotValid)&&e.recoverKeyForm.controls.recoveryOtp.dirty),c.Mb(2),c.Dc("label",c.yc(18,20,e.dictionary.authenticatorApp.dialogs.btnCancel)),c.Mb(2),c.Dc("label",c.yc(20,22,e.dictionary.authenticatorApp.dialogs.btnGenerate))}}function nT(e,t){if(1&e&&(c.kc(0,"div",43),c.fc(1,"ui-notification-inline",27),c.xc(2,"t"),c.xc(3,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("title",c.yc(2,2,e.dictionary.authenticatorApp.dialogs.checkedSaveKey))("message",c.yc(3,4,e.dictionary.authenticatorApp.dialogs.flagCheckBox))}}const aT=function(e){return{"not-checked":e}};function oT(e,t){if(1&e){const e=c.lc();c.kc(0,"doc-shared-dialog-body"),c.kc(1,"doc-shared-dialog-title"),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"doc-shared-dialog-content"),c.ed(5,nT,4,6,"div",37),c.kc(6,"div",43),c.gd(7),c.xc(8,"t"),c.jc(),c.kc(9,"div",44),c.gd(10),c.jc(),c.kc(11,"form",39),c.kc(12,"ui-input-checkbox",45),c.kc(13,"ui-input-label",46),c.gd(14),c.xc(15,"t"),c.xc(16,"t"),c.jc(),c.jc(),c.jc(),c.jc(),c.jc(),c.kc(17,"doc-shared-dialog-actions"),c.kc(18,"doc-shared-dialog-action",42),c.sc("trigger",function(t){return c.Vc(e),c.wc().done(t)}),c.xc(19,"t"),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(2),c.id(" ",c.yc(3,10,e.dictionary.authenticatorApp.dialogs.recoveryOtpTitle)," "),c.Mb(3),c.Dc("ngIf",!e.isChecked),c.Mb(2),c.id(" ",c.yc(8,12,e.dictionary.authenticatorApp.dialogs.recoveryOtpSubtitle)," "),c.Mb(3),c.id(" ",e.recoveryKey," "),c.Mb(1),c.Dc("formGroup",e.saveKeyForm),c.Mb(1),c.Dc("formControl",e.saveKeyForm.controls.checkboxControl),c.Mb(1),c.Dc("ngClass",c.Ic(20,aT,!1===e.isChecked)),c.Mb(1),c.jd(" ",c.yc(15,14,e.dictionary.authenticatorApp.dialogs.savedRecoveryKey)," ",c.yc(16,16,e.dictionary.authenticatorApp.dialogs.requiredKey)," "),c.Mb(4),c.Dc("label",c.yc(19,18,e.dictionary.authenticatorApp.dialogs.btnDone))}}function rT(e,t){if(1&e&&(c.kc(0,"div",43),c.fc(1,"ui-notification-inline",27),c.xc(2,"t"),c.xc(3,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.Dc("title",c.yc(2,2,e.dictionary.authenticatorApp.dialogs.errorUnpairNotification))("message",c.yc(3,4,e.dictionary.authenticatorApp.notificationError.subtitle))}}function cT(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.authenticatorApp.dialogs.missingRecoveryKey)," ")}}const lT=function(){return{count:16}};function dT(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.zc(2,1,e.dictionary.authenticatorApp.dialogs.wrongUnpairLengthOtp,c.Hc(4,lT))," ")}}function uT(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.authenticatorApp.dialogs.wrongOtpUnpair)," ")}}function hT(e,t){if(1&e){const e=c.lc();c.kc(0,"doc-shared-dialog-body"),c.kc(1,"doc-shared-dialog-title"),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"doc-shared-dialog-content"),c.ed(5,rT,4,6,"div",37),c.kc(6,"div",47),c.gd(7),c.xc(8,"t"),c.jc(),c.kc(9,"form",39),c.kc(10,"ui-input-text",48),c.xc(11,"t"),c.xc(12,"t"),c.ed(13,cT,3,3,"ui-input-error",23),c.ed(14,dT,3,5,"ui-input-error",23),c.ed(15,uT,3,3,"ui-input-error",23),c.jc(),c.jc(),c.jc(),c.jc(),c.kc(16,"doc-shared-dialog-actions"),c.kc(17,"doc-shared-dialog-action",41),c.sc("trigger",function(){return c.Vc(e),c.wc(),c.Sc(15).hide()}),c.xc(18,"t"),c.jc(),c.kc(19,"doc-shared-dialog-action",49),c.sc("trigger",function(t){return c.Vc(e),c.wc().unpairApp(t)}),c.xc(20,"t"),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(2),c.id(" ",c.yc(3,12,e.dictionary.authenticatorApp.dialogs.unpairTitle)," "),c.Mb(3),c.Dc("ngIf",!e.controlOtp),c.Mb(2),c.id(" ",c.yc(8,14,e.dictionary.authenticatorApp.dialogs.unpairSubTitle)," "),c.Mb(2),c.Dc("formGroup",e.unpairForm),c.Mb(1),c.Dc("formControl",e.unpairForm.controls.otpUnpair)("requiredMarker",c.yc(11,16,e.dictionaryMyProfile.personalInfo.requiredMarker))("label",c.yc(12,18,e.dictionary.authenticatorApp.dialogs.recoveryKey)),c.Mb(3),c.Dc("ngIf",(null==e.unpairForm.controls.otpUnpair.errors?null:e.unpairForm.controls.otpUnpair.errors.required)&&e.unpairForm.controls.otpUnpair.dirty),c.Mb(1),c.Dc("ngIf",(null==e.unpairForm.controls.otpUnpair.errors?null:e.unpairForm.controls.otpUnpair.errors.pattern)&&e.unpairForm.controls.otpUnpair.dirty),c.Mb(1),c.Dc("ngIf",(null==e.unpairForm.controls.otpUnpair.errors?null:e.unpairForm.controls.otpUnpair.errors.otpNotValid)&&e.unpairForm.controls.otpUnpair.dirty),c.Mb(2),c.Dc("label",c.yc(18,20,e.dictionary.authenticatorApp.dialogs.btnCancel)),c.Mb(2),c.Dc("label",c.yc(20,22,e.dictionary.authenticatorApp.unpair))}}let pT=(()=>{class e{constructor(e,t,i,s){this._translationService=e,this._myProfileService=t,this._docLayoutService=i,this._sessionService=s,this.dictionaryMyProfile=GS.a,this.dictionary=BS,this.sizeIcon=b.s.MD,this.sizeIconCheckCircle=b.nc.LG,this.btnUnpairColor=b.D.ERROR,this.sizeDialog=b.cc.SM,this.sizeBulletPoint=b.s.XS,this.iconCheckName="check-circle",this.isChecked=!0,this.isAppPaired=!1,this.controlOtp=!0,this.isOtpValid=!0,this.isBtnGenerateOtpClicked=!1,this.spinnerLoading=!1,this.isEmpty=!1,this.authenticatorAppForm=new Ze.h({oneTimePassword:new Ze.e("",Ze.x.required)}),this.recoverKeyForm=new Ze.h({recoveryOtp:new Ze.e("",Ze.x.required)}),this.saveKeyForm=new Ze.h({checkboxControl:new Ze.e("",Ze.x.required)}),this.unpairForm=new Ze.h({otpUnpair:new Ze.e("",Ze.x.required)}),this._ngUnsubscribe$=new _t.a}ngOnInit(){this.isPaired()}ngOnDestroy(){this._ngUnsubscribe$.next(),this._ngUnsubscribe$.complete()}isPaired(e){this.isAuthenticatorPaired=e||D.c.getInstance().authenticatorapp_pair_date,this.isAppPaired=!!this.isAuthenticatorPaired,this.isAuthenticatorPaired||this._myProfileService.getQRCodeAndSecretKey().subscribe(e=>{let{qr_code_uri:t,secret:i}=e.data;this.qrCodeUri=t,this.secretKey=i})}generateOtp(e){this.isBtnGenerateOtpClicked=!0,this.controlOtp=!0;let t=this.recoverKeyForm.controls.recoveryOtp.value;this.recoverKeyForm.markAllAsTouched(),t||(this.recoverKeyForm.controls.recoveryOtp.markAsDirty(),this.recoverKeyForm.controls.recoveryOtp.setErrors({required:!0})),t&&6!=t.length&&(this.recoverKeyForm.controls.recoveryOtp.markAsDirty(),this.recoverKeyForm.controls.recoveryOtp.setErrors({pattern:!0}),this.controlOtp=!1),this.recoverKeyForm.valid||(this.recoverKeyForm.controls.recoveryOtp.markAsDirty(),this.controlOtp=!1),this.controlOtp?this._myProfileService.recoveryOtp(this.recoverKeyForm.controls.recoveryOtp.value).pipe(Object(vt.a)(this._ngUnsubscribe$)).subscribe(t=>{e.next(),this.recoveryKey=t.data.recovery_code,this.generateRecoveryKey.hide(),this.saveRecoveryKey.show()},()=>{e.next(),this.isOtpValid=!1,this.recoverKeyForm.controls.recoveryOtp.markAsDirty(),this.recoverKeyForm.controls.recoveryOtp.setErrors({otpNotValid:!0})}):e.next()}pairApp(){const e=new je.a(!1);return this.isOtpValid=!0,this.controlOtp=!0,this.spinnerLoading=!0,this._validOtpCode()?this._myProfileService.pairingOtp(this.authenticatorAppForm.controls.oneTimePassword.value).pipe(Object(vt.a)(this._ngUnsubscribe$)).subscribe(t=>{this.authenticatorAppForm.reset(),this.spinnerLoading=!1,e.next(!0),this._sessionService.loadUserSession(!0).pipe(Object(se.a)(1)).subscribe(e=>{this.isPaired(e.data.authenticatorapp_pair_date),this.recoveryKey=t.data.recovery_code,this.saveRecoveryKey.show(),this._docLayoutService.toast.showToast({message:this.dictionary.authenticatorApp.successPairing,type:"success"})})},()=>{this.isOtpValid=!1,this.spinnerLoading=!1,this.authenticatorAppForm.controls.oneTimePassword.markAsDirty(),this.authenticatorAppForm.controls.oneTimePassword.setErrors({otpNotValid:!0}),e.next(!1)}):(this.spinnerLoading=!1,setTimeout(()=>{e.next(!1)})),e}unpairApp(e){this.controlOtp=!0,this.isEmpty=!1;let t=this.unpairForm.controls.otpUnpair.value;this.recoverKeyForm.markAllAsTouched(),t||(this.isEmpty=!0,this.unpairForm.controls.otpUnpair.markAsDirty(),this.unpairForm.controls.otpUnpair.setErrors({required:!0})),t&&16!==t.length&&(this.unpairForm.controls.otpUnpair.markAsDirty(),this.unpairForm.controls.otpUnpair.setErrors({pattern:!0}),this.controlOtp=!1),this.unpairForm.valid||(this.unpairForm.controls.otpUnpair.markAsDirty(),this.controlOtp=!1),this.controlOtp?this._myProfileService.unpairApp(this.unpairForm.controls.otpUnpair.value).pipe(Object(vt.a)(this._ngUnsubscribe$)).subscribe(t=>{e.next(),this._sessionService.loadUserSession(!0).pipe(Object(se.a)(1)).subscribe(e=>{this.isPaired(e.data.authenticatorapp_pair_date),this.recoveryKey=t.data.recovery_code,this._docLayoutService.toast.showToast({message:this.dictionary.authenticatorApp.dialogs.unpairSuccess,type:"success"}),this.unpairDialog.hide()})},()=>{e.next(),this.controlOtp=!1,this.unpairForm.controls.otpUnpair.markAsDirty(),this.unpairForm.controls.otpUnpair.setErrors({otpNotValid:!0})}):e.next()}isFormDirty(){let e=!1;for(let t in this.authenticatorAppForm.controls)if(e=this.authenticatorAppForm.controls[t].dirty,e)break;return e}done(e){this.isChecked=!0,!0!==this.saveKeyForm.controls.checkboxControl.value?(this.isChecked=!1,e.next()):(e.next(),this.saveKeyForm.reset(),this.saveRecoveryKey.hide(),this.isBtnGenerateOtpClicked&&this._docLayoutService.toast.showToast({message:this.dictionary.authenticatorApp.successGenerateRecoveryKey,type:"success"}),this.isBtnGenerateOtpClicked=!1)}showDialog(){this.recoverKeyForm.reset(),this.controlOtp=!0,this.generateRecoveryKey.show()}showDialogUnpair(){this.unpairForm.reset(),this.isEmpty=!1,this.controlOtp=!0,this.unpairDialog.show()}_validOtpCode(){this.controlOtp=!0;let e=this.authenticatorAppForm.controls.oneTimePassword.value;return this.authenticatorAppForm.markAllAsTouched(),e&&6!==e.length&&""!==e&&(this.authenticatorAppForm.controls.oneTimePassword.markAsDirty(),this.authenticatorAppForm.controls.oneTimePassword.setErrors({lengthError:!0}),this.controlOtp=!1),e||(this.authenticatorAppForm.controls.oneTimePassword.markAsDirty(),this.authenticatorAppForm.controls.oneTimePassword.setErrors({required:!0}),this.controlOtp=!1),this.controlOtp}}return e.\u0275fac=function(t){return new(t||e)(c.ec(u.h),c.ec(YS.a),c.ec(j.a),c.ec(Vk.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-my-profile-authenticator-app"]],viewQuery:function(e,t){if(1&e&&(c.nd(Bk,1),c.nd(Gk,1),c.nd(Hk,1)),2&e){let e;c.Rc(e=c.tc())&&(t.generateRecoveryKey=e.first),c.Rc(e=c.tc())&&(t.saveRecoveryKey=e.first),c.Rc(e=c.tc())&&(t.unpairDialog=e.first)}},hostAttrs:[1,"lrn-my-profile-authenticator-app"],decls:19,vars:20,consts:[[1,"ui-row"],[4,"ngIf","ngIfElse"],["appPaired",""],[3,"canClose","closeTooltipLabel","closeAriaLabel","size"],["generateRecoveryKey",""],[3,"canClose","size"],["saveRecoveryKey",""],["unpairDialog",""],[1,"ui-col-24"],["class","notification-app-wrapper",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"content-text-unpaired-app"],[1,"container","bullet-section"],["text","1",3,"size"],[1,"content-margin"],["text","2",3,"size"],[1,"container","bullet-section-qr"],["text","3",3,"size"],["class","qr-code","role","img",3,"uiAriaLabel",4,"ngIf"],[1,"qr-camera"],[1,"ui-typography-heading-5","title-regular"],["text","4",3,"size"],[1,"ui-col-sm-12","margin-one-time-password",3,"formControl","requiredMarker","label"],[4,"ngIf"],[1,"btn-activate-authenticator"],["type","submit",3,"label","loading"],[1,"notification-app-wrapper"],[3,"title","message"],["role","img",1,"qr-code",3,"uiAriaLabel"],[3,"qrdata","size","level"],[1,"container","app-paired-wrapper"],[1,"icon-check",3,"name","size","color"],[1,"content-margin","direction"],[1,"font-custom","title-text"],[1,"wrapper-btn"],[1,"margin-right-recovery-btn",3,"label","trigger"],[3,"label","color","trigger"],["class","my-profile-authenticator-inline-notification-wrapper",4,"ngIf"],[1,"my-profile-authenticator-dialog-subtitle"],[3,"formGroup"],[1,"margin-one-time-password",3,"formControl","requiredMarker","label"],[3,"label","trigger"],["type","positive",3,"label","trigger"],[1,"my-profile-authenticator-inline-notification-wrapper"],[1,"recovery-wrapper"],[3,"formControl"],[3,"ngClass"],[1,"subtitle-wrapper"],[1,"my-profile-authenticator-unpair-wrapper",3,"formControl","requiredMarker","label"],["type","negative",3,"label","trigger"]],template:function(e,t){if(1&e&&(c.kc(0,"div",0),c.ed(1,Jk,48,40,"div",1),c.ed(2,Xk,16,19,"ng-template",null,2,c.fd),c.kc(4,"doc-shared-dialog",3,4),c.xc(6,"t"),c.xc(7,"t"),c.ed(8,sT,21,24,"ng-template"),c.jc(),c.kc(9,"doc-shared-dialog"),c.kc(10,"doc-shared-dialog",5,6),c.ed(12,oT,20,22,"ng-template"),c.jc(),c.jc(),c.kc(13,"doc-shared-dialog"),c.kc(14,"doc-shared-dialog",3,7),c.xc(16,"t"),c.xc(17,"t"),c.ed(18,hT,21,24,"ng-template"),c.jc(),c.jc(),c.jc()),2&e){const e=c.Sc(3);c.Mb(1),c.Dc("ngIf",!t.isAppPaired)("ngIfElse",e),c.Mb(3),c.Dc("canClose",!0)("closeTooltipLabel",c.yc(6,12,t.dictionary.authenticatorApp.dialogs.tooltipClose))("closeAriaLabel",c.yc(7,14,t.dictionary.authenticatorApp.dialogs.tooltipAria))("size",t.sizeDialog),c.Mb(6),c.Dc("canClose",!1)("size",t.sizeDialog),c.Mb(4),c.Dc("canClose",!0)("closeTooltipLabel",c.yc(16,16,t.dictionary.authenticatorApp.dialogs.tooltipClose))("closeAriaLabel",c.yc(17,18,t.dictionary.authenticatorApp.dialogs.tooltipAria))("size",t.sizeDialog)}},directives:[m.p,Ko.a,Ze.y,Ze.p,Ze.i,b.o,b.Qc,Ze.o,Ze.f,b.S,b.Jd,b.k,k,b.Ac,b.lc,b.U,Jo.a,Xo.a,Zo.a,er.a,tr.a,b.sc,b.Cc,m.n],pipes:[M.b,Ge.a],styles:["lrn-my-profile-authenticator-app .notification-app-wrapper{margin-top:1.5rem;margin-top:var(--ui-spacing-md)}lrn-my-profile-authenticator-app .app-paired-wrapper{margin:2rem 0;margin:var(--ui-spacing-lg) 0}lrn-my-profile-authenticator-app qrcode canvas{width:140px!important;height:140px!important}lrn-my-profile-authenticator-app .content-text-unpaired-app{padding:1.5rem 0 .75rem;padding:var(--ui-spacing-md) 0 var(--ui-spacing-xs)}lrn-my-profile-authenticator-app .content-margin{margin-block:auto}lrn-my-profile-authenticator-app ui-icon{margin-right:1rem;margin-right:var(--ui-spacing-sm)}[dir=rtl] lrn-my-profile-authenticator-app ui-icon{margin-right:0;margin-left:1rem;margin-left:var(--ui-spacing-sm)}lrn-my-profile-authenticator-app .wrapper-btn{margin-top:1.5rem;margin-top:var(--ui-spacing-md)}lrn-my-profile-authenticator-app .margin-right-recovery-btn{margin-right:1rem;margin-right:var(--ui-spacing-sm)}lrn-my-profile-authenticator-app .bullet-section-qr{margin:.75rem 0;margin:var(--ui-spacing-xs) 0}lrn-my-profile-authenticator-app .bullet-section-qr .content-margin{margin-block:auto}lrn-my-profile-authenticator-app .bullet-section-qr ui-avatar{margin-right:.5rem;margin-right:var(--ui-spacing-xxs)}[dir=rtl] lrn-my-profile-authenticator-app .bullet-section-qr ui-avatar{margin-right:0;margin-left:.5rem;margin-left:var(--ui-spacing-xxs)}lrn-my-profile-authenticator-app .bullet-section{margin:.75rem 0;margin:var(--ui-spacing-xs) 0}lrn-my-profile-authenticator-app .bullet-section .content-margin{margin-block:auto}lrn-my-profile-authenticator-app .bullet-section ui-avatar{margin-right:.5rem;margin-right:var(--ui-spacing-xxs)}[dir=rtl] lrn-my-profile-authenticator-app .bullet-section ui-avatar{margin-right:0;margin-left:.5rem;margin-left:var(--ui-spacing-xxs)}lrn-my-profile-authenticator-app .qr-code{margin-left:1.5rem;margin-left:var(--ui-spacing-md)}[dir=rtl] lrn-my-profile-authenticator-app .qr-code{margin-left:0;margin-right:1.5rem;margin-right:var(--ui-spacing-md)}lrn-my-profile-authenticator-app .title-regular{margin:.5rem 0 .75rem;margin:var(--ui-spacing-xxs) 0 var(--ui-spacing-xs)}lrn-my-profile-authenticator-app .qr-camera{margin-top:.75rem;margin-top:var(--ui-spacing-xs);margin-left:2rem;margin-left:var(--ui-spacing-lg)}[dir=rtl] lrn-my-profile-authenticator-app .qr-camera{margin-left:0;margin-right:2rem;margin-right:var(--ui-spacing-lg)}lrn-my-profile-authenticator-app .margin-one-time-password{padding:.75rem 0 .75rem 2rem;padding:var(--ui-spacing-xs) 0 var(--ui-spacing-xs) var(--ui-spacing-lg)}[dir=rtl] lrn-my-profile-authenticator-app .margin-one-time-password{padding:.75rem 2rem 1rem 0;padding:var(--ui-spacing-xs) var(--ui-spacing-lg) var(--ui-spacing-xs) 0}lrn-my-profile-authenticator-app .btn-activate-authenticator{margin:0 0 1.5rem 2rem;margin:0 0 var(--ui-spacing-md) var(--ui-spacing-lg)}[dir=rtl] lrn-my-profile-authenticator-app .btn-activate-authenticator{margin:0 2rem .5rem 0;margin:0 var(--ui-spacing-lg) var(--ui-spacing-md) 0}lrn-my-profile-authenticator-app .bullet-section ui-avatar{display:inline-table}lrn-my-profile-authenticator-app .margin-icon-check{margin-right:1rem;margin-right:var(--ui-spacing-sm)}[dir=rtl] lrn-my-profile-authenticator-app .margin-icon-check{margin-right:0;margin-left:1rem;margin-left:var(--ui-spacing-sm)}lrn-my-profile-authenticator-app .btn-recovery-key lrn-authenticator-app .app-paired-wrapper{margin:2rem 0;margin:var(--ui-spacing-lg) 0}lrn-my-profile-authenticator-app .btn-recovery-key lrn-authenticator-app .app-paired-wrapper ui-icon{margin-right:1rem;margin-right:var(--ui-spacing-sm)}[dir=rtl] lrn-my-profile-authenticator-app .btn-recovery-key lrn-authenticator-app .app-paired-wrapper ui-icon{margin-right:0;margin-left:1rem;margin-left:var(--ui-spacing-sm)}lrn-my-profile-authenticator-app .btn-recovery-key lrn-authenticator-app .app-paired-wrapper .btn-recovery-key{margin-right:1rem;margin-right:var(--ui-spacing-sm)}.my-profile-authenticator-unpair-wrapper{margin-top:1rem;margin-top:var(--ui-spacing-sm)}.my-profile-authenticator-inline-notification-wrapper,doc-shared-dialog-body .my-profile-authenticator-dialog-subtitle{margin-bottom:1rem;margin-bottom:var(--ui-spacing-sm)}doc-shared-dialog-body .app-paired-wrapper{margin:2rem 0;margin:var(--ui-spacing-lg) 0}doc-shared-dialog-body .recovery-wrapper{font-weight:600;font-weight:var(--ui-typography-weight-semibold);font-size:1.13rem;font-size:var(--ui-typography-size-lg);margin-bottom:1.5rem;margin-bottom:var(--ui-spacing-md)}"],encapsulation:2}),e})();var gT=i("6AVF");const mT=["addAffiliateCodeDialog"];function bT(e,t){if(1&e){const e=c.lc();c.kc(0,"div",5),c.fc(1,"ui-blank-slate",6),c.xc(2,"t"),c.xc(3,"t"),c.kc(4,"ui-button-raised-primary",7),c.sc("trigger",function(){return c.Vc(e),c.wc(),c.Sc(4).show()}),c.xc(5,"t"),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(1),c.Dc("title",c.yc(2,4,e.dictionary.contentPartnersApp.noAffiliations))("description",c.yc(3,6,e.dictionary.contentPartnersApp.useAddCodeButton))("illustrationSize",e.illustrationSize),c.Mb(3),c.Dc("label",c.yc(5,8,e.dictionary.contentPartnersApp.addCode))}}function fT(e,t){1&e&&(c.kc(0,"div",8),c.fc(1,"ui-spinner"),c.jc())}function _T(e,t){if(1&e&&(c.kc(0,"hyd-table",9),c.fc(1,"hyd-table-column-text",10),c.xc(2,"t"),c.fc(3,"hyd-table-column-text",11),c.xc(4,"t"),c.fc(5,"hyd-table-column-date",12),c.xc(6,"t"),c.fc(7,"hyd-table-column-ellipsis",13),c.jc()),2&e){const e=c.wc();c.Dc("data",e.contentPartnerAffiliations),c.Mb(1),c.Dc("headerLabel",c.yc(2,7,e.dictionary.contentPartnersApp.partnerName))("showEllipsedTooltip",!0),c.Mb(2),c.Dc("headerLabel",c.yc(4,9,e.dictionary.contentPartnersApp.defaultDiscount))("showEllipsedTooltip",!0),c.Mb(2),c.Dc("headerLabel",c.yc(6,11,e.dictionary.contentPartnersApp.affiliateSince)),c.Mb(2),c.Dc("actions",e.contentPartnerAffiliationActions)}}const vT=function(){return{count_error:1}};function yT(e,t){if(1&e&&(c.fc(0,"ui-notification-inline",19),c.xc(1,"t"),c.xc(2,"t")),2&e){const e=c.wc(2);c.Dc("title",c.zc(1,2,e.dictionary.contentPartnersApp.addingNotPossible,c.Hc(7,vT)))("message",c.yc(2,5,e.dictionary.personalInfo.error.errorsSaveFormSubTitle))}}function wT(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.hd(c.yc(2,1,e.dictionary.contentPartnersApp.fillAffiliateCode))}}function CT(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.hd(c.yc(2,1,e.affiliateCodeNotValidLabel))}}function ST(e,t){if(1&e){const e=c.lc();c.kc(0,"doc-shared-dialog-body"),c.kc(1,"doc-shared-dialog-title",14),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"doc-shared-dialog-content"),c.ed(5,yT,3,8,"ui-notification-inline",15),c.kc(6,"ui-input-text",16),c.xc(7,"t"),c.xc(8,"t"),c.ed(9,wT,3,3,"ui-input-error",17),c.ed(10,CT,3,3,"ui-input-error",17),c.jc(),c.jc(),c.jc(),c.kc(11,"doc-shared-dialog-actions"),c.kc(12,"doc-shared-dialog-action",7),c.sc("trigger",function(){return c.Vc(e),c.wc().hideAddContentPartnerAffiliationDialog()}),c.xc(13,"t"),c.jc(),c.kc(14,"doc-shared-dialog-action",18),c.sc("trigger",function(t){return c.Vc(e),c.wc().addContentPartnerAffiliation(t)}),c.xc(15,"t"),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(2),c.id(" ",c.yc(3,9,e.dictionary.contentPartnersApp.addAffiliateCode)," "),c.Mb(3),c.Dc("ngIf",e.showAffiliateCodeInlineError),c.Mb(1),c.Dc("label",c.yc(7,11,e.dictionary.contentPartnersApp.affiliateCode))("formControl",e.addAffiliateCodeFormControl)("requiredMarker",c.yc(8,13,e.dictionary.personalInfo.requiredMarker)),c.Mb(3),c.Dc("ngIf",(null==e.addAffiliateCodeFormControl.errors?null:e.addAffiliateCodeFormControl.errors.required)&&e.addAffiliateCodeFormControl.dirty),c.Mb(1),c.Dc("ngIf",(null==e.addAffiliateCodeFormControl.errors?null:e.addAffiliateCodeFormControl.errors.affiliateCodeNotValid)&&e.addAffiliateCodeFormControl.dirty),c.Mb(2),c.Dc("label",c.yc(13,15,e.dictionary.contentPartnersApp.cancel)),c.Mb(2),c.Dc("label",c.yc(15,17,e.dictionary.contentPartnersApp.confirm))}}let kT=(()=>{class e{constructor(e,t,i){this._changeDetectorRef=e,this._docLayoutService=t,this._myProfileService=i,this.illustrationSize=b.qc.MD,this.dictionary=GS.a,this.contentPartnerAffiliations=[],this.contentPartnerAffiliationActions=[{id:"delete",title:this.dictionary.delete,type:Pe.a.DELETE,action:e=>{this._deleteContentPartnerAffiliation(e.id)},active:!1}],this.loadingContentPartnerAffiliations=!1,this.showAffiliateCodeInlineError=!1,this.affiliateCodeNotValidLabel="",this.addAffiliateCodeFormControl=new Ze.e("",[Ze.x.required]),this._getContentPartnerAffiliations(),this._contentPartnerAffiliationAddition=this._myProfileService.contentPartnerAffiliationAddition$.subscribe(()=>{this._getContentPartnerAffiliations()})}ngOnDestroy(){this._contentPartnerAffiliationAddition.unsubscribe()}addContentPartnerAffiliation(e){this.showAffiliateCodeInlineError=!1,this.addAffiliateCodeFormControl.markAsDirty(),this.addAffiliateCodeFormControl.updateValueAndValidity(),this.addAffiliateCodeFormControl.valid?this._myProfileService.addContentPartnerAffiliation(this.addAffiliateCodeFormControl.value).subscribe(()=>{e.next(),this.addAffiliateCodeFormControl.markAsPristine(),this.addAffiliateCodeFormControl.setValue(""),this.addAffiliateCodeDialog.hide(),this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.contentPartnersApp.affiliateCodeAdded}),this._getContentPartnerAffiliations()},t=>{1002===t.error.code?(this.addAffiliateCodeFormControl.setErrors({affiliateCodeNotValid:!0}),this.showAffiliateCodeInlineError=!0,this.affiliateCodeNotValidLabel=t.error.message[0]):(this._docLayoutService.toast.showToast({message:t.error.message?t.error.message[0]:this.dictionary.somethingWentWrong,type:"error"}),400!==t.error.status&&(this.addAffiliateCodeFormControl.markAsPristine(),this.addAffiliateCodeFormControl.setValue(""),this.addAffiliateCodeDialog.hide())),e.next(),this._changeDetectorRef.markForCheck()}):(this.showAffiliateCodeInlineError=!0,e.next(),this._changeDetectorRef.markForCheck())}hideAddContentPartnerAffiliationDialog(){this.addAffiliateCodeDialog.hide(),this.addAffiliateCodeFormControl.markAsPristine(),this.addAffiliateCodeFormControl.setValue(""),this.showAffiliateCodeInlineError=!1,this._changeDetectorRef.markForCheck()}_deleteContentPartnerAffiliation(e){this._docLayoutService.dialog.showCommonDialog({title:this.dictionary.contentPartnersApp.deleteContentPartner,content:this.dictionary.contentPartnersApp.deleteAffiliationConfirm,closable:!0,actions:[{id:"cancel",label:this.dictionary.contentPartnersApp.cancel,slot:"end",type:"neutral"},{id:"confirm",label:this.dictionary.contentPartnersApp.confirm,slot:"end",type:"negative"}]}).subscribe(t=>{"cancel"===t.actionID?t.actionSuccess.next(!0):this._myProfileService.deleteContentPartnerAffiliation(e).subscribe(()=>{t.actionSuccess.next(!0),this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.contentPartnersApp.affiliateCodeDeleted}),this._getContentPartnerAffiliations()},e=>{t.actionSuccess.next(!1),this._docLayoutService.toast.showToast({message:e.error.message[0],type:"error"})})})}_getContentPartnerAffiliations(){this.loadingContentPartnerAffiliations=!0,this.contentPartnerAffiliations=[],this._changeDetectorRef.markForCheck(),this._myProfileService.getContentPartnerAffiliations().subscribe(e=>{this.contentPartnerAffiliations=e,this.loadingContentPartnerAffiliations=!1,this._changeDetectorRef.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i),c.ec(j.a),c.ec(YS.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-my-profile-content-partners"]],viewQuery:function(e,t){if(1&e&&c.nd(mT,1),2&e){let e;c.Rc(e=c.tc())&&(t.addAffiliateCodeDialog=e.first)}},hostAttrs:[1,"lrn-my-profile-content-partners"],decls:8,vars:10,consts:[["class","my-profile-affiliations-blank-slate",4,"ngIf"],["class","my-profile-affiliations-loading",4,"ngIf"],[3,"data",4,"ngIf"],["size","sm","aria-labelledby","my-profile-shared-dialog-aria-label-title",3,"canClose","closeTooltipLabel","closeAriaLabel"],["addAffiliateCodeDialog",""],[1,"my-profile-affiliations-blank-slate"],["illustrationName","different-content-files",3,"title","description","illustrationSize"],[3,"label","trigger"],[1,"my-profile-affiliations-loading"],[3,"data"],["fieldName","partnerName",3,"headerLabel","showEllipsedTooltip"],["fieldName","defaultDiscount",3,"headerLabel","showEllipsedTooltip"],["fieldName","affiliateSince","type","dateTime",3,"headerLabel"],[3,"actions"],["id","my-profile-shared-dialog-aria-label-title"],["class","my-profile-add-affiliate-code-error-notification","type","error",3,"title","message",4,"ngIf"],[3,"label","formControl","requiredMarker"],[4,"ngIf"],["type","positive",3,"label","trigger"],["type","error",1,"my-profile-add-affiliate-code-error-notification",3,"title","message"]],template:function(e,t){1&e&&(c.ed(0,bT,6,10,"div",0),c.ed(1,fT,2,0,"div",1),c.ed(2,_T,8,13,"hyd-table",2),c.kc(3,"doc-shared-dialog",3,4),c.xc(5,"t"),c.xc(6,"t"),c.ed(7,ST,16,19,"ng-template"),c.jc()),2&e&&(c.Dc("ngIf",!t.contentPartnerAffiliations.length&&!t.loadingContentPartnerAffiliations),c.Mb(1),c.Dc("ngIf",t.loadingContentPartnerAffiliations),c.Mb(1),c.Dc("ngIf",t.contentPartnerAffiliations.length),c.Mb(1),c.Dc("canClose",!0)("closeTooltipLabel",c.yc(5,6,t.dictionary.skills.close))("closeAriaLabel",c.yc(6,8,t.dictionary.skills.closeDialog)))},directives:[m.p,Ko.a,b.B,b.S,b.Be,Ue.a,ze.a,gT.a,Ve.a,Jo.a,Xo.a,Zo.a,b.Qc,Ze.o,Ze.f,er.a,tr.a,b.Jd,b.Ac],pipes:[M.b],styles:["lrn-my-profile-content-partners .my-profile-add-affiliate-code-error-notification{display:block;margin-bottom:var(--ui-spacing-md)}lrn-my-profile-content-partners .my-profile-affiliations-blank-slate{display:flex;flex-direction:column;align-items:center;padding:var(--ui-spacing-md) var(--ui-spacing-md) var(--ui-spacing-xl) var(--ui-spacing-md)}lrn-my-profile-content-partners .my-profile-affiliations-blank-slate ui-button-raised-primary{margin-top:var(--ui-spacing-md)}lrn-my-profile-content-partners .my-profile-affiliations-loading{display:flex;align-items:center;justify-content:center;padding:var(--ui-spacing-md) var(--ui-spacing-md) var(--ui-spacing-xl) var(--ui-spacing-md)}"],encapsulation:2,changeDetection:0}),e})();const TT={privacyPolicy:{title:tt.a.t("standard","Privacy Policy"),subtitle:tt.a.t("standard","By unchecking the mandatory Privacy Policy settings, you will not be able to access and use your LMS again. The agreement to the mandatory Privacy Policy settings is required to complete your registration and use your platform."),savePrivacyPolicyA11y:tt.a.t("standard","Save changes to Privacy Policy")},newsletterOptOut:{title:tt.a.t("newsletter","Newsletter"),saveNewsletterOptOutA11y:tt.a.t("newsletter","Save Changes to Newsletter Opt-Out"),checkboxLabel:tt.a.t("newsletter","Subscribe to our newsletter")},termsAndConditions:{title:tt.a.t("standard","Terms & Conditions"),subtitle:tt.a.t("standard","By unchecking the mandatory Terms & Conditions settings, you will not be able to access and use your LMS again. The agreement to the mandatory Terms & Conditions settings is required to complete your registration and use your platform."),saveTermsAndConditionA11y:tt.a.t("standard","Save Changes to Terms & Conditions")},save:tt.a.t("standard","Save Changes"),toastSuccessMsg:tt.a.t("app7020","Your changes have been saved successfully"),toastErrorMsg:tt.a.t("app7020","Something went wrong!"),areYouSureDialog:{title:tt.a.t("mobile","You will be logged out"),content:tt.a.t("standard","Since you declined a mandatory condition of use, you will be logged out. Are you sure you want to proceed?"),cancel:tt.a.t("standard","Cancel"),logout:tt.a.t("standard","_LOGOUT")}};var IT=i("JIr8");let xT=(()=>{class e{constructor(e,t,i,s,n,a){this._backendService=e,this._docLayoutService=t,this._router=i,this._bootstrapService=s,this._externalPluginService=n,this._auth0Service=a}loadSubPolicies(){return new a.a(e=>this._backendService.request("/manage/v1/policy/track","GET").pipe(Object(se.a)(1)).subscribe(t=>{var i;return e.next(null===(i=t.data)||void 0===i?void 0:i.sub_policy)}))}savePrivacyPolicy(e){return this._backendService.request(`/manage/v1/policy/track/${this._ppTrackId}`,"PUT",e)}saveTermsAndConditions(e){return this._backendService.request(`/manage/v1/termsandconditions/track/${this._tocTrackId}`,"PUT",e)}_showToastNotification(e){"success"===e?this._showToastSuccessNotification():this._showToastErrorNotification()}openAreYouSureDialog(e){this._docLayoutService.dialog.showDialog(e)}logout(){D.b.getInstance().isPluginActive("OpenIDConnectApp")?this._backendService.openidConnectLogout().pipe(Object(se.a)(1)).subscribe(e=>{e&&e.data&&e.data.idp_logout_url&&(window.location.href=e.data.idp_logout_url)},()=>this._lmsLogout(),()=>this._lmsLogout()):this._lmsLogout()}loadPrivacyPolicyTrackId(){this._backendService.request("manage/v1/policy/track","GET").pipe(Object(se.a)(1)).subscribe(e=>{var t,i;return this._ppTrackId=null===(i=null===(t=e.data)||void 0===t?void 0:t.policy)||void 0===i?void 0:i.track_id})}loadTermsAndConditionsTrackId(){this._backendService.request("manage/v1/termsandconditions/track","GET").pipe(Object(se.a)(1)).subscribe(e=>{var t,i;return this._tocTrackId=null===(i=null===(t=e.data)||void 0===t?void 0:t.tc)||void 0===i?void 0:i.track_id})}_showToastSuccessNotification(){this._docLayoutService.toast.showToast({message:TT.toastSuccessMsg,type:"success"})}_showToastErrorNotification(){this._docLayoutService.toast.showToast({message:TT.toastErrorMsg,type:"error"})}_lmsLogout(){localStorage.setItem("skip_reenter_cc","no"),localStorage.getItem("access_token")?this._backendService.logout().pipe(Object(se.a)(1)).subscribe(e=>{D.b.getInstance().isPluginActive("ZendeskApp")&&(D.b.getInstance().getPluginSettings("ZendeskApp").show_to_non_authenticated||this._externalPluginService.zendeskWidgetOptions("hide")),this._auth0Service.isLoggedIn()?this._auth0Service.logout():(null!==e&&this._router.navigate(["/learn"]),this._bootstrapService.removeCustomStyles("multidomain_styles"))},()=>{this._router.navigate(["/learn"]),this._bootstrapService.removeCustomStyles("multidomain_styles")}):(this._router.navigate(["/learn"]),this._bootstrapService.removeCustomStyles("multidomain_styles")),this._docLayoutService.breadcrumbs.clearNavigationHistory()}}return e.\u0275fac=function(t){return new(t||e)(c.oc(I.a),c.oc(j.a),c.oc(s.h),c.oc(le.a),c.oc(ce.a),c.oc(Qt.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();function DT(e,t){if(1&e){const e=c.lc();c.kc(0,"section",1),c.kc(1,"div",2),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"div",3),c.kc(5,"ui-input-checkbox",4),c.kc(6,"ui-input-label"),c.gd(7),c.xc(8,"t"),c.jc(),c.jc(),c.jc(),c.kc(9,"div",5),c.kc(10,"ui-button-raised-primary",6),c.sc("trigger",function(){return c.Vc(e),c.wc().saveNewsletterOptOut()}),c.xc(11,"t"),c.xc(12,"t"),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(2),c.id(" ",c.yc(3,6,e.dictionary.newsletterOptOut.title)," "),c.Mb(3),c.Dc("formControl",e.checkboxNewsletterFormControl),c.Mb(2),c.id(" ",c.yc(8,8,e.dictionary.newsletterOptOut.checkboxLabel)," "),c.Mb(3),c.Dc("label",c.yc(11,10,e.dictionary.save))("loading",e.newsletterOptOutLoading)("ariaLabel",c.yc(12,12,e.dictionary.newsletterOptOut.saveNewsletterOptOutA11y))}}let OT=(()=>{class e{constructor(e,t,i,s,n){this._docLayoutService=e,this._sessionService=t,this.backendService=i,this.myProfileService=s,this._toggleService=n,this.dictionary=TT,this.newsletterOptOutLoading=!1,this.newsletterOptOutAccepted=!1,this.platformSettings=D.b.getInstance().settings,this.checkboxNewsletterFormControl=new Ze.e}ngOnInit(){this.newsletterOptOutAccepted=this._toggleService.isOn(u.f.TOGGLE_MY_PROFILE_NEWSLETTER_OPTOUT)&&!0===this.platformSettings.opt_out_mode,this.newsletterOptOutAccepted&&this.myProfileService.getUserData(D.c.getInstance().id).pipe(Object(se.a)(1)).subscribe({next:e=>{this.checkboxNewsletterFormControl.setValue("1"!==(null==e?void 0:e.data.user_data.newsletter_optout))},error:()=>{this._docLayoutService.toast.showToast({message:tt.a.t("standard","Sorry, something went wrong during the requested action"),type:"error"})}})}saveNewsletterOptOut(){this.backendService.request("/manage/v1/user/"+D.c.getInstance().id,"PUT",{newsletter_optout:this.checkboxNewsletterFormControl.value?"0":"1"}).pipe(Object(se.a)(1)).subscribe({next:()=>{this._docLayoutService.toast.showToast({message:tt.a.t("app7020","Your changes have been saved successfully"),type:"success"})},error:()=>{this._docLayoutService.toast.showToast({message:tt.a.t("standard","Sorry, something went wrong during the requested action"),type:"error"})}})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(j.a),c.ec(Vk.a),c.ec(I.a),c.ec(YS.a),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-newsletter-opt-out"]],hostAttrs:[1,"lrn-newsletter-opt-out"],decls:1,vars:1,consts:[["aria-labelledby","my-personal-newsletter-optout",4,"ngIf"],["aria-labelledby","my-personal-newsletter-optout"],["id","my-personal-newsletter-optout","role","heading","aria-level","3",1,"my-profile-conditions-of-use-title","ui-typography-heading-4"],[2,"padding","0 1.5rem 1.5rem"],[3,"formControl"],[1,"my-profile-conditions-of-use-save-button"],[3,"label","loading","ariaLabel","trigger"]],template:function(e,t){1&e&&c.ed(0,DT,13,14,"section",0),2&e&&c.Dc("ngIf",t.newsletterOptOutAccepted)},directives:[m.p,b.sc,Ze.o,Ze.f,b.Cc,b.S],pipes:[M.b],styles:["lrn-newsletter-opt-out:not(:first-child){border-top:var(--ui-size-border-xs) solid var(--ui-color-border-neutral)}"],encapsulation:2}),e})();var ET=i("cvde");const AT=["policies"],PT=["termsAndConditions"];function MT(e,t){if(1&e){const e=c.lc();c.kc(0,"section",2),c.kc(1,"div",3),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"div",4),c.gd(5),c.xc(6,"t"),c.jc(),c.kc(7,"doc-layout-policies-acceptance",5,6),c.sc("privacyPolicyLoad",function(){return c.Vc(e),c.wc().privacyPolicyLoad()}),c.jc(),c.kc(9,"div",7),c.kc(10,"ui-button-raised-primary",8),c.sc("trigger",function(){return c.Vc(e),c.wc().savePolicy("privacy-policy")}),c.xc(11,"t"),c.xc(12,"t"),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(2),c.id(" ",c.yc(3,6,e.dictionary.privacyPolicy.title)," "),c.Mb(3),c.id(" ",c.yc(6,8,e.dictionary.privacyPolicy.subtitle)," "),c.Mb(2),c.Dc("showPrivacyPolicyCheckboxes",!0),c.Mb(3),c.Dc("label",c.yc(11,10,e.dictionary.save))("loading",e.privacyPolicyLoading)("ariaLabel",c.yc(12,12,e.dictionary.privacyPolicy.savePrivacyPolicyA11y))}}function LT(e,t){if(1&e){const e=c.lc();c.kc(0,"section",9),c.kc(1,"div",10),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"div",4),c.gd(5),c.xc(6,"t"),c.jc(),c.kc(7,"doc-layout-policies-acceptance",11,12),c.sc("termsAndConditionsLoad",function(){return c.Vc(e),c.wc().termsAndConditionsLoad()}),c.jc(),c.kc(9,"div",7),c.kc(10,"ui-button-raised-primary",8),c.sc("trigger",function(){return c.Vc(e),c.wc().savePolicy("terms-and-conditions")}),c.xc(11,"t"),c.xc(12,"t"),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(2),c.id(" ",c.yc(3,6,e.dictionary.termsAndConditions.title)," "),c.Mb(3),c.id(" ",c.yc(6,8,e.dictionary.termsAndConditions.subtitle)," "),c.Mb(2),c.Dc("showTermsAndConditionsCheckboxes",!0),c.Mb(3),c.Dc("label",c.yc(11,10,e.dictionary.save))("loading",e.termsAndConditionsLoading)("ariaLabel",c.yc(12,12,e.dictionary.termsAndConditions.saveTermsAndConditionA11y))}}let jT=(()=>{class e{constructor(e,t,i){this._docLayoutService=e,this._myProfileConditionsOfUseService=t,this._sessionService=i,this.privacyPolicyMustAccepted=!1,this.termsAndConditionsMustAccepted=!1,this.dictionary=TT,this.privacyPolicyLoading=!1,this.termsAndConditionsLoading=!1,this.subPolicies$=new je.a([])}ngOnInit(){this.checkUserSession(),this.privacyPolicyMustAccepted&&(this._myProfileConditionsOfUseService.loadSubPolicies().pipe(Object(se.a)(1)).subscribe(e=>this.subPolicies$.next(e)),this._myProfileConditionsOfUseService.loadPrivacyPolicyTrackId()),this.termsAndConditionsMustAccepted&&this._myProfileConditionsOfUseService.loadTermsAndConditionsTrackId()}checkUserSession(){this._sessionService.loadUserSession(!0).subscribe(e=>{e.data.need_policy_accept&&window.location.reload()})}privacyPolicyLoad(){this.policies.privacyPolicyFormControl.setValue(!0),this.subPolicies$.pipe(Object(qS.a)(e=>e.length>0)).subscribe(e=>{this.policies.subPolicies.forEach(t=>{const i=null==e?void 0:e.find(e=>e.id===t.id);i&&t.formControl.setValue(1===i.answer)})})}termsAndConditionsLoad(){this.termsAndConditions.termsAndConditionsFormControl.setValue(!0)}savePolicy(e){switch(e){case"privacy-policy":this.policies.isValid()?(this.privacyPolicyLoading=!0,this._savePrivacyPolicy().subscribe(()=>{this.privacyPolicyLoading=!1,this._myProfileConditionsOfUseService._showToastNotification("success"),this.policies.privacyPolicyFormControl.markAsPristine(),this.policies.subPolicies.forEach(e=>e.formControl.markAsPristine())},()=>{this.privacyPolicyLoading=!1,this._myProfileConditionsOfUseService._showToastNotification("error")})):this._askForLogoutConfirmation().subscribe(e=>{"logout"===e.actionID?this._savePrivacyPolicy().subscribe(()=>{var t;e.actionSuccess.next(!0),this.policies.privacyPolicyFormControl.markAsPristine(),this.policies.subPolicies.forEach(e=>e.formControl.markAsPristine()),null===(t=this.termsAndConditions)||void 0===t||t.termsAndConditionsFormControl.markAsPristine(),this._myProfileConditionsOfUseService.logout()},()=>{e.actionSuccess.next(!1),this._myProfileConditionsOfUseService._showToastNotification("error")}):e.actionSuccess.next(!0)});break;case"terms-and-conditions":this.termsAndConditions.isValid()?(this.termsAndConditionsLoading=!0,this._saveTermsAndConditions().subscribe(()=>{this.termsAndConditionsLoading=!1,this._myProfileConditionsOfUseService._showToastNotification("success"),this.termsAndConditions.termsAndConditionsFormControl.markAsPristine()},()=>{this.termsAndConditionsLoading=!1,this._myProfileConditionsOfUseService._showToastNotification("error")})):this._askForLogoutConfirmation().subscribe(e=>{"logout"===e.actionID?this._saveTermsAndConditions().subscribe(()=>{var t,i,s;e.actionSuccess.next(!0),this.termsAndConditions.termsAndConditionsFormControl.markAsPristine(),null===(t=this.policies)||void 0===t||t.privacyPolicyFormControl.markAsPristine(),null===(s=null===(i=this.policies)||void 0===i?void 0:i.subPolicies)||void 0===s||s.forEach(e=>e.formControl.markAsPristine()),this._myProfileConditionsOfUseService.logout()},()=>{e.actionSuccess.next(!1),this._myProfileConditionsOfUseService._showToastNotification("error")}):e.actionSuccess.next(!0)})}}saveChanges(){const e=new je.a(!1);return this.privacyPolicyMustAccepted&&!this.policies.isValid()||this.termsAndConditionsMustAccepted&&!this.termsAndConditions.isValid()?this._askForLogoutConfirmation().subscribe(t=>{if("logout"===t.actionID){const i=[];let s=!1;this.privacyPolicyMustAccepted&&i.push(this._savePrivacyPolicy()),this.termsAndConditionsMustAccepted&&i.push(this._saveTermsAndConditions()),Object(Yt.a)(i).pipe(Object(IT.a)(()=>(s=!0,Object(Ei.a)(void 0)))).subscribe(()=>{},()=>{},()=>{s?this._myProfileConditionsOfUseService._showToastNotification("error"):(this._myProfileConditionsOfUseService._showToastNotification("success"),this.markFormAsPristine(),this._myProfileConditionsOfUseService.logout()),t.actionSuccess.next(!s),e.next(!s)})}else t.actionSuccess.next(!0),e.next(!1)}):(this.policies&&this._isPolicyFormDirty()&&this.savePolicy("privacy-policy"),this.termsAndConditions&&this._isTermsAndConditionsFomDirty()&&this.savePolicy("terms-and-conditions"),setTimeout(()=>{e.next(!0)})),e}isFormDirty(){let e=!1;return this.privacyPolicyMustAccepted&&(e=this._isPolicyFormDirty()),!e&&this.termsAndConditionsMustAccepted&&(e=this._isTermsAndConditionsFomDirty()),e}markFormAsPristine(){this.privacyPolicyMustAccepted&&(this.policies.privacyPolicyFormControl.setValue(!0),this.policies.privacyPolicyFormControl.markAsPristine(),this.policies.subPolicies.forEach(e=>e.formControl.markAsPristine()),this._myProfileConditionsOfUseService.loadSubPolicies().pipe(Object(se.a)(1)).subscribe(e=>this.subPolicies$.next(e))),this.termsAndConditionsMustAccepted&&(this.termsAndConditions.termsAndConditionsFormControl.setValue(!0),this.termsAndConditions.termsAndConditionsFormControl.markAsPristine())}_isPolicyFormDirty(){if(this.policies.privacyPolicyFormControl.dirty)return!0;let e=!1;for(let t=0;t<this.policies.subPolicies.length;t++)if(this.policies.subPolicies[t].formControl.dirty){e=!0;break}return e}_isTermsAndConditionsFomDirty(){return this.termsAndConditions.termsAndConditionsFormControl.dirty}_savePrivacyPolicy(){const e={id_policy_version:this.policies.privacyPolicyResponse.data.policy.policy_version_id,sub_policy:this.policies.subPolicies.map(e=>({id:e.id,answer:e.formControl.value?1:0})),track_answer:this.policies.privacyPolicyFormControl.value?1:0};return this._myProfileConditionsOfUseService.savePrivacyPolicy(e)}_saveTermsAndConditions(){return this._myProfileConditionsOfUseService.saveTermsAndConditions({id_tc_version:this.termsAndConditions.termsAndConditionsResponse.data.tc.tc_version,track_answer:this.termsAndConditions.termsAndConditionsFormControl.value?1:0})}_askForLogoutConfirmation(){return this._docLayoutService.dialog.showCommonDialog({title:this.dictionary.areYouSureDialog.title,content:this.dictionary.areYouSureDialog.content,actions:[{slot:"end",id:"cancel",label:this.dictionary.areYouSureDialog.cancel,type:"neutral"},{slot:"end",id:"logout",label:this.dictionary.areYouSureDialog.logout,type:"negative"}]})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(j.a),c.ec(xT),c.ec(Vk.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-my-profile-conditions-of-use"]],viewQuery:function(e,t){if(1&e&&(c.nd(AT,1),c.nd(PT,1)),2&e){let e;c.Rc(e=c.tc())&&(t.policies=e.first),c.Rc(e=c.tc())&&(t.termsAndConditions=e.first)}},hostAttrs:[1,"lrn-my-profile-conditions-of-use"],inputs:{privacyPolicyMustAccepted:"privacyPolicyMustAccepted",termsAndConditionsMustAccepted:"termsAndConditionsMustAccepted"},decls:3,vars:2,consts:[["aria-labelledby","my-personal-info-privacy-policy-group",4,"ngIf"],["aria-labelledby","my-personal-info-terms-condition-group",4,"ngIf"],["aria-labelledby","my-personal-info-privacy-policy-group"],["id","my-personal-info-privacy-policy-group","role","heading","aria-level","3",1,"my-profile-conditions-of-use-title","ui-typography-heading-4"],[1,"my-profile-conditions-of-use-subtitle"],[3,"showPrivacyPolicyCheckboxes","privacyPolicyLoad"],["policies",""],[1,"my-profile-conditions-of-use-save-button"],[3,"label","loading","ariaLabel","trigger"],["aria-labelledby","my-personal-info-terms-condition-group"],["id","my-personal-info-terms-condition-group","role","heading","aria-level","3",1,"my-profile-conditions-of-use-title","ui-typography-heading-4"],[3,"showTermsAndConditionsCheckboxes","termsAndConditionsLoad"],["termsAndConditions",""]],template:function(e,t){1&e&&(c.ed(0,MT,13,14,"section",0),c.ed(1,LT,13,14,"section",1),c.fc(2,"lrn-newsletter-opt-out")),2&e&&(c.Dc("ngIf",t.privacyPolicyMustAccepted),c.Mb(1),c.Dc("ngIf",t.termsAndConditionsMustAccepted))},directives:[m.p,OT,ET.a,b.S],pipes:[M.b],styles:["lrn-my-profile-conditions-of-use{display:flex;flex-direction:column}lrn-my-profile-conditions-of-use section{padding:var(--ui-spacing-md) 0}lrn-my-profile-conditions-of-use section div[class^=my-profile-conditions-of-use-]{padding-right:var(--ui-spacing-md);padding-left:var(--ui-spacing-md)}lrn-my-profile-conditions-of-use section doc-layout-policies-acceptance{padding-top:var(--ui-spacing-md)}lrn-my-profile-conditions-of-use section:not(:first-child){border-top:var(--ui-size-border-xs) solid var(--ui-color-border-neutral)}lrn-my-profile-conditions-of-use section .my-profile-conditions-of-use-title{padding-bottom:var(--ui-spacing-xxs)}.my-profile-conditions-of-use-dialog{padding:var(--ui-spacing-md)}.my-profile-conditions-of-use-dialog .my-profile-conditions-of-use-dialog-title{margin-bottom:var(--ui-spacing-sm)}"],encapsulation:2}),e})();var RT=function(e){return e.ADD="add",e.MODIFY="modify",e}({}),FT=i("Rjvz"),NT=i("kBu+");let UT=(()=>{class e{constructor(e){this._myProfileSkillsService=e,this.inputFormControl=new Ze.e(""),this.selectedOccupation=new c.q,this.inputTextChange=new c.q,this.dictionary=GS.a,this.singleSelectorSource=[],this.singleSelectorShowLoader$=new je.a(!1)}onSingleSelectorChanged(e){this.singleSelectorSource=[],this.inputTextChange.emit(),e.replace(/\s/g,"").length>=3&&this._fetchOccupation(e)}onSingleSelectorItemSelected(e){const t=this._suggestedOccupations.find(t=>t.code===e.id);this.selectedOccupation.emit(t)}_fetchOccupation(e){this.singleSelectorShowLoader$.next(!0),this._myProfileSkillsService.getOccupations(e).pipe(Object(se.a)(1)).subscribe(t=>{this.singleSelectorSource=[],this._suggestedOccupations=t,this._suggestedOccupations.forEach(e=>{this.singleSelectorSource.push({id:e.code,title:e.name})}),this.singleSelectorSource.find(t=>t.title.toLowerCase()===e.toLowerCase())||this.singleSelectorSource.unshift({id:"",title:e,prefix:tt.a.t("standard","Use:")}),this.singleSelectorSource=[...this.singleSelectorSource],this.singleSelectorShowLoader$.next(!1)},()=>{this.singleSelectorShowLoader$.next(!1),this._myProfileSkillsService.showGenericSnackbarError()})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(WS))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-my-profile-skills-occupation-selector"]],hostAttrs:[1,"lrn-my-profile-skills-occupation-selector"],inputs:{inputFormControl:"inputFormControl"},outputs:{selectedOccupation:"selectedOccupation",inputTextChange:"inputTextChange"},decls:3,vars:11,consts:[["ngDefaultControl","",1,"my-profile-skills-edit-occupation-selector-input",3,"label","inputFormControl","source","maxLength","showCounter","showRequiredFieldIndicator","showLoader","itemSelected","inputChanged"]],template:function(e,t){1&e&&(c.kc(0,"textfield-single-selector",0),c.sc("itemSelected",function(e){return t.onSingleSelectorItemSelected(e)})("inputChanged",function(e){return t.onSingleSelectorChanged(e)}),c.xc(1,"t"),c.xc(2,"async"),c.jc()),2&e&&c.Dc("label",c.yc(1,7,t.dictionary.skills.occupation))("inputFormControl",t.inputFormControl)("source",t.singleSelectorSource)("maxLength",50)("showCounter",!0)("showRequiredFieldIndicator",!0)("showLoader",c.yc(2,9,t.singleSelectorShowLoader$))},directives:[hS.a,Ze.b],pipes:[M.b,m.b],styles:["lrn-my-profile-skills-occupation-selector .my-profile-skills-edit-occupation-selector-input{display:block;margin:1.5rem 0;margin:var(--ui-spacing-md) 0}"],encapsulation:2,changeDetection:0}),e})();const zT=["dialog"],qT=function(){return{count_error:1}};function VT(e,t){if(1&e&&(c.fc(0,"ui-notification-inline",7),c.xc(1,"t"),c.xc(2,"t")),2&e){const e=c.wc(2);c.Dc("title",c.zc(1,2,e.dictionary.skills.savingChangesErrorNotificationTitle,c.Hc(7,qT)))("message",c.yc(2,5,e.dictionary.skills.editJobErrorNotificationSubtitle))}}function BT(e,t){if(1&e){const e=c.lc();c.kc(0,"doc-shared-dialog-body"),c.kc(1,"doc-shared-dialog-title"),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"doc-shared-dialog-content"),c.kc(5,"div",2),c.ed(6,VT,3,8,"ui-notification-inline",3),c.xc(7,"async"),c.kc(8,"lrn-my-profile-skills-occupation-selector",4),c.sc("selectedOccupation",function(t){return c.Vc(e),c.wc().onSelectedOccupation(t)})("inputTextChange",function(){return c.Vc(e),c.wc().showErrorNotification$.next(!1)}),c.jc(),c.jc(),c.jc(),c.jc(),c.kc(9,"doc-shared-dialog-actions"),c.kc(10,"doc-shared-dialog-action",5),c.sc("trigger",function(){return c.Vc(e),c.wc().hideDialog()}),c.xc(11,"t"),c.jc(),c.kc(12,"doc-shared-dialog-action",6),c.sc("trigger",function(t){return c.Vc(e),c.wc().onDialogSubmit(t)}),c.xc(13,"t"),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(2),c.id(" ",c.yc(3,5,e.dictionary.skills.editOccupation)," "),c.Mb(4),c.Dc("ngIf",c.yc(7,7,e.showErrorNotification$)),c.Mb(2),c.Dc("inputFormControl",e.inputTextFormControl),c.Mb(2),c.Dc("label",c.yc(11,9,e.dictionary.skills.cancel)),c.Mb(2),c.Dc("label",c.yc(13,11,e.dictionary.skills.saveChanges))}}let GT=(()=>{class e{constructor(e,t,i,s){this._docLayoutService=e,this._myProfileSkillsService=t,this._translationService=i,this._cdr=s,this.dictionary=GS.a,this.inputTextFormControl=new Ze.e("",Ze.x.required),this.showErrorNotification$=new je.a(!1)}showDialog(){this.showErrorNotification$.next(!1),this.inputTextFormControl=new Ze.e("",Ze.x.required),this.dialog.show()}hideDialog(){this.dialog.hide(),this._resetComponentState()}onSelectedOccupation(e){this._selectedOccupation=e}onDialogClose(){this._resetComponentState()}onDialogSubmit(e){if(!this.inputTextFormControl.valid)return this.showErrorNotification$.next(!0),void e.next();this._selectedOccupation?this._saveProfiling(e):this._createOccupation(e)}_saveProfiling(e){this._myProfileSkillsService.saveProfiling(this._selectedOccupation,this._myProfileSkillsService.assignedSkills$.value).pipe(Object(se.a)(1)).subscribe(e=>{const t=e.occupation,i=D.c.getInstance().objectives;this._myProfileSkillsService.assignedSkillsOccupation$.next(t),this._myProfileSkillsService.getSuggestedSkills(),i.occupation=t,this.hideDialog(),this._docLayoutService.toast.showToast({message:this.dictionary.skills.changesSavedSuccessfully,type:"success"})},()=>{this._myProfileSkillsService.showGenericSnackbarError(),e.next(),this._cdr.markForCheck()})}_createOccupation(e){this._myProfileSkillsService.createOccupation(this.inputTextFormControl.value).pipe(Object(se.a)(1)).subscribe(t=>{this._selectedOccupation=t,this._saveProfiling(e)},()=>{this._myProfileSkillsService.showGenericSnackbarError(),e.next(),this._cdr.markForCheck()})}_resetComponentState(){this.showErrorNotification$.next(!1)}}return e.\u0275fac=function(t){return new(t||e)(c.ec(j.a),c.ec(WS),c.ec(u.h),c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-my-profile-skills-edit-occupation-dialog"]],viewQuery:function(e,t){if(1&e&&c.nd(zT,1),2&e){let e;c.Rc(e=c.tc())&&(t.dialog=e.first)}},decls:5,vars:7,consts:[["size","sm",3,"canClose","closeTooltipLabel","closeAriaLabel","close"],["dialog",""],[1,"my-profile-skills-edit-occupation-dialog"],["class","my-profile-skills-edit-occupation-dialog-notification",3,"title","message",4,"ngIf"],[3,"inputFormControl","selectedOccupation","inputTextChange"],["type","neutral",3,"label","trigger"],["type","positive",3,"label","trigger"],[1,"my-profile-skills-edit-occupation-dialog-notification",3,"title","message"]],template:function(e,t){1&e&&(c.kc(0,"doc-shared-dialog",0,1),c.sc("close",function(){return t.onDialogClose()}),c.xc(2,"t"),c.xc(3,"t"),c.ed(4,BT,14,13,"ng-template"),c.jc()),2&e&&c.Dc("canClose",!0)("closeTooltipLabel",c.yc(2,3,t.dictionary.skills.close))("closeAriaLabel",c.yc(3,5,t.dictionary.skills.closeDialog))},directives:[Ko.a,Jo.a,Xo.a,Zo.a,m.p,UT,er.a,tr.a,b.Jd],pipes:[M.b,m.b],styles:[".my-profile-skills-edit-occupation-dialog .my-profile-skills-edit-occupation-selector-notification{display:block;margin:1.5rem 0;margin:var(--ui-spacing-md) 0}"],encapsulation:2,changeDetection:0}),e})();var HT=i("KCNW"),$T=i("FqIC");let YT=(()=>{class e{constructor(){this.change=new c.q}ngOnInit(){this._setSliderSteps()}onSliderSelectedStep(e){const t=Object.assign({},this.skill);t.expertise=e.value,this.change.emit(t)}_setSliderSteps(){this.sliderSteps=[{label:tt.a.t("standard","Beginner"),value:HT.a.BEGINNER,preselected:this.skill.expertise===HT.a.BEGINNER},{label:tt.a.t("standard","Intermediate"),value:HT.a.INTERMEDIATE,preselected:this.skill.expertise===HT.a.INTERMEDIATE},{label:tt.a.t("standard","_ADVANCED"),value:HT.a.ADVANCED,preselected:this.skill.expertise===HT.a.ADVANCED},{label:tt.a.t("standard","Expert"),value:HT.a.EXPERT,preselected:this.skill.expertise===HT.a.EXPERT}]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-my-profile-skills-slider-labels"]],hostAttrs:[1,"lrn-my-profile-skills-slider-labels"],inputs:{skill:"skill"},outputs:{change:"change"},decls:4,vars:2,consts:[[1,"my-profile-skills-slider-labels-wrapper"],[1,"my-profile-skills-slider-labels-name","ui-typography-heading-5"],[1,"my-profile-skills-slider-labels",3,"steps","selectedStep$"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.gd(2),c.jc(),c.kc(3,"slider-labels",2),c.sc("selectedStep$",function(e){return t.onSliderSelectedStep(e)}),c.jc(),c.jc()),2&e&&(c.Mb(2),c.id(" ",t.skill.name," "),c.Mb(1),c.Dc("steps",t.sliderSteps))},directives:[$T.a],styles:["lrn-my-profile-skills-slider-labels .my-profile-skills-slider-labels-name{margin-bottom:2rem;margin-bottom:var(--ui-spacing-lg)}"],encapsulation:2,changeDetection:0}),e})();const WT=["dialog"];function QT(e,t){if(1&e){const e=c.lc();c.kc(0,"lrn-my-profile-skills-slider-labels",6),c.sc("change",function(t){return c.Vc(e),c.wc(2).onSliderLabelsChange(t)}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("skill",e.skill)}}function KT(e,t){if(1&e){const e=c.lc();c.kc(0,"doc-shared-dialog-body"),c.kc(1,"doc-shared-dialog-title"),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"doc-shared-dialog-content"),c.kc(5,"div",2),c.ed(6,QT,1,1,"lrn-my-profile-skills-slider-labels",3),c.jc(),c.jc(),c.jc(),c.kc(7,"doc-shared-dialog-actions"),c.kc(8,"doc-shared-dialog-action",4),c.sc("trigger",function(){return c.Vc(e),c.wc().onDialogCancel()}),c.xc(9,"t"),c.jc(),c.kc(10,"doc-shared-dialog-action",5),c.sc("trigger",function(t){return c.Vc(e),c.wc().onDialogSubmit(t)}),c.xc(11,"t"),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(2),c.id(" ",c.yc(3,4,e.dictionary.skills.rateYourself)," "),c.Mb(4),c.Dc("ngIf",e.skill),c.Mb(2),c.Dc("label",c.yc(9,6,e.dictionary.skills.cancel)),c.Mb(2),c.Dc("label",c.yc(11,8,e.dictionary.skills.saveChanges))}}let JT=(()=>{class e{constructor(e,t,i,s){this._docLayoutService=e,this._translationService=t,this._myProfileSkillsService=i,this._cdr=s,this.dictionary=GS.a,this.updatedSkill=null,this._dialogMode=RT.MODIFY}showDialog(e,t){this.skill=e,this._dialogMode=t,this.dialog.show()}hideDialog(){this.dialog.hide(),this._resetComponentState()}onDialogClose(){this._resetComponentState()}onDialogCancel(){this.hideDialog()}onSliderLabelsChange(e){this.updatedSkill=e}onDialogSubmit(e){const t=this._myProfileSkillsService.assignedSkills$.value;if(this._dialogMode===RT.ADD)t.push(this.updatedSkill);else{const e=t.findIndex(e=>{var t;return e.code===(null===(t=this.updatedSkill)||void 0===t?void 0:t.code)});t[e]=this.updatedSkill}this._saveProfiling(t,e)}_saveProfiling(e,t){this._myProfileSkillsService.saveProfiling(this._myProfileSkillsService.assignedSkillsOccupation$.value,e).pipe(Object(se.a)(1)).subscribe(e=>{const t=e.areasOfImprovement;D.c.getInstance().objectives.areasOfImprovement=t,this._myProfileSkillsService.assignedSkills$.next(t),this._dialogMode===RT.ADD&&this._myProfileSkillsService.filterSuggestedSkills(),this.hideDialog(),this._docLayoutService.toast.showToast({message:this.dictionary.skills.detailsSuccessfullyUpdated,type:"success"})},()=>{this._myProfileSkillsService.showGenericSnackbarError(),t.next(),this._cdr.markForCheck()})}_resetComponentState(){this.updatedSkill=null}}return e.\u0275fac=function(t){return new(t||e)(c.ec(j.a),c.ec(u.h),c.ec(WS),c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-my-profile-skills-rate-skill-dialog"]],viewQuery:function(e,t){if(1&e&&c.nd(WT,1),2&e){let e;c.Rc(e=c.tc())&&(t.dialog=e.first)}},decls:5,vars:7,consts:[["size","sm",3,"canClose","closeTooltipLabel","closeAriaLabel","close"],["dialog",""],[1,"my-profile-skills-rate-skill-dialog"],[3,"skill","change",4,"ngIf"],["type","neutral",3,"label","trigger"],["type","positive",3,"label","trigger"],[3,"skill","change"]],template:function(e,t){1&e&&(c.kc(0,"doc-shared-dialog",0,1),c.sc("close",function(){return t.onDialogClose()}),c.xc(2,"t"),c.xc(3,"t"),c.ed(4,KT,12,10,"ng-template"),c.jc()),2&e&&c.Dc("canClose",!0)("closeTooltipLabel",c.yc(2,3,t.dictionary.skills.close))("closeAriaLabel",c.yc(3,5,t.dictionary.skills.closeDialog))},directives:[Ko.a,Jo.a,Xo.a,Zo.a,m.p,er.a,tr.a,YT],pipes:[M.b],styles:[".my-profile-skills-rate-skill-dialog{margin-bottom:1.5rem;margin-bottom:var(--ui-spacing-md)}"],encapsulation:2,changeDetection:0}),e})();const XT=["dialog"];function ZT(e,t){if(1&e){const e=c.lc();c.kc(0,"doc-shared-dialog-body"),c.kc(1,"doc-shared-dialog-title"),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"doc-shared-dialog-content"),c.kc(5,"div",2),c.gd(6),c.xc(7,"t"),c.fc(8,"br"),c.gd(9),c.xc(10,"t"),c.jc(),c.jc(),c.jc(),c.kc(11,"doc-shared-dialog-actions"),c.kc(12,"doc-shared-dialog-action",3),c.sc("trigger",function(){return c.Vc(e),c.wc(),c.Sc(1).hide()}),c.xc(13,"t"),c.jc(),c.kc(14,"doc-shared-dialog-action",4),c.sc("trigger",function(t){return c.Vc(e),c.wc().onDialogSubmit(t)}),c.xc(15,"t"),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(2),c.id(" ",c.yc(3,5,e.dictionary.skills.deleteSkill)," "),c.Mb(4),c.id(" ",c.yc(7,7,e.dictionary.skills.deleteSkillDescription)," "),c.Mb(3),c.id(" ",c.yc(10,9,e.dictionary.skills.doYouWantToProceed)," "),c.Mb(3),c.Dc("label",c.yc(13,11,e.dictionary.skills.cancel)),c.Mb(2),c.Dc("label",c.yc(15,13,e.dictionary.skills.delete))}}let eI=(()=>{class e{constructor(e,t,i){this._docLayoutService=e,this._myProfileSkillsService=t,this._cdr=i,this.dictionary=GS.a}showDialog(e){this.skill=e,this.dialog.show()}onDialogSubmit(e){let t=this._myProfileSkillsService.assignedSkills$.value;t=t.filter(e=>e.code!==this.skill.code),this._myProfileSkillsService.saveProfiling(this._myProfileSkillsService.assignedSkillsOccupation$.value,t).pipe(Object(se.a)(1)).subscribe(e=>{const t=e.areasOfImprovement;D.c.getInstance().objectives.areasOfImprovement=t,this._myProfileSkillsService.assignedSkills$.next(t),this._myProfileSkillsService.getSuggestedSkills(),this.dialog.hide(),this._docLayoutService.toast.showToast({message:this.dictionary.skills.deleteSkillToast,type:"success"})},()=>{this._myProfileSkillsService.showGenericSnackbarError(),e.next(),this._cdr.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(j.a),c.ec(WS),c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-my-profile-skills-delete-skill-dialog"]],viewQuery:function(e,t){if(1&e&&c.nd(XT,1),2&e){let e;c.Rc(e=c.tc())&&(t.dialog=e.first)}},decls:5,vars:7,consts:[["size","sm",3,"canClose","closeTooltipLabel","closeAriaLabel"],["dialog",""],[1,"my-profile-skills-delete-skill-dialog"],["type","neutral",3,"label","trigger"],["type","negative",3,"label","trigger"]],template:function(e,t){1&e&&(c.kc(0,"doc-shared-dialog",0,1),c.xc(2,"t"),c.xc(3,"t"),c.ed(4,ZT,16,15,"ng-template"),c.jc()),2&e&&c.Dc("canClose",!0)("closeTooltipLabel",c.yc(2,3,t.dictionary.skills.close))("closeAriaLabel",c.yc(3,5,t.dictionary.skills.closeDialog))},directives:[Ko.a,Jo.a,Xo.a,Zo.a,er.a,tr.a],pipes:[M.b],encapsulation:2,changeDetection:0}),e})(),tI=(()=>{class e{constructor(e){this._translationService=e}transform(e){let t="";switch(e){case 1:t="Beginner";break;case 2:t="Intermediate";break;case 3:t="_ADVANCED";break;case 4:t="Expert"}return t?this._translationService.instant(t,{category:"standard"}):""}}return e.\u0275fac=function(t){return new(t||e)(c.ec(u.h))},e.\u0275pipe=c.dc({name:"myProfileSkillsExpertise",type:e,pure:!0}),e})();const iI=["editOccupationDialog"],sI=["rateSkillDialog"],nI=["deleteSkillDialog"];function aI(e,t){if(1&e){const e=c.lc();c.kc(0,"div",8),c.kc(1,"div",9),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"div",10),c.gd(5),c.xc(6,"async"),c.jc(),c.kc(7,"ui-button-outlined",11),c.sc("trigger",function(){return c.Vc(e),c.wc(2),c.Sc(6).showDialog()}),c.xc(8,"t"),c.xc(9,"t"),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Mb(2),c.id(" ",c.yc(3,5,e.dictionary.skills.yourOccupation)," "),c.Mb(3),c.id(" ",c.yc(6,7,e.assignedSkillsOccupation$).name," "),c.Mb(2),c.Dc("label",c.yc(8,9,e.dictionary.skills.changeOccupation))("ariaLabel",c.yc(9,11,e.dictionary.skills.changeOccupation))("ariaHasPopup",!0)}}function oI(e,t){1&e&&c.fc(0,"ui-spinner",25)}const rI=function(e){return{"my-profile-skills-item-disable":e}};function cI(e,t){if(1&e){const e=c.lc();c.kc(0,"ui-chip",28),c.sc("click",function(){c.Vc(e);const i=t.$implicit;return c.wc(6).addSelectedSkill(i)}),c.xc(1,"async"),c.gd(2),c.jc()}if(2&e){const e=t.$implicit,i=c.wc(6);c.Dc("ngClass",c.Ic(4,rI,c.yc(1,2,i.assignedSkills$).length==i.maxAssignableSkills)),c.Mb(2),c.id(" ",e.name," ")}}function lI(e,t){if(1&e&&(c.ic(0),c.ed(1,cI,3,6,"ui-chip",27),c.xc(2,"async"),c.hc()),2&e){const e=c.wc(5);c.Mb(1),c.Dc("ngForOf",c.yc(2,1,e.suggestedSkills$))}}function dI(e,t){if(1&e&&(c.gd(0),c.xc(1,"t")),2&e){const e=c.wc(5);c.id(" ",c.yc(1,1,e.dictionary.skills.noSuggestions)," ")}}function uI(e,t){if(1&e&&(c.ed(0,lI,3,3,"ng-container",1),c.xc(1,"async"),c.ed(2,dI,2,3,"ng-template",null,26,c.fd)),2&e){const e=c.Sc(3),t=c.wc(4);c.Dc("ngIf",c.yc(1,2,t.suggestedSkills$).length>0)("ngIfElse",e)}}function hI(e,t){if(1&e&&(c.kc(0,"div",20),c.kc(1,"div",21),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"div",22),c.ed(5,oI,1,0,"ui-spinner",23),c.xc(6,"async"),c.ed(7,uI,4,4,"ng-template",null,24,c.fd),c.jc(),c.jc()),2&e){const e=c.Sc(8),t=c.wc(3);c.Mb(2),c.id(" ",c.yc(3,3,t.dictionary.skills.topSuggestions)," "),c.Mb(3),c.Dc("ngIf",c.yc(6,5,t.loadingSuggestedSkills$))("ngIfElse",e)}}function pI(e,t){if(1&e&&(c.kc(0,"div",29),c.fc(1,"ui-notification-inline",30),c.xc(2,"t"),c.xc(3,"t"),c.jc()),2&e){const e=c.wc(3);c.Mb(1),c.Dc("title",c.yc(2,2,e.dictionary.skills.maxSkillsNumberReachedTitle))("message",c.yc(3,4,e.dictionary.skills.addSkillMaxCountErrorNotificationSubtitle))}}function gI(e,t){if(1&e&&(c.kc(0,"div",31),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(3);c.Mb(1),c.id(" ",c.yc(2,1,e.numberOfSkillsAssigned)," ")}}function mI(e,t){if(1&e){const e=c.lc();c.kc(0,"li",32),c.kc(1,"div",33),c.kc(2,"div",34),c.gd(3),c.jc(),c.kc(4,"div",35),c.gd(5),c.xc(6,"myProfileSkillsExpertise"),c.jc(),c.jc(),c.kc(7,"div",36),c.kc(8,"ui-button-dropdown",37),c.sc("selectOption",function(i){c.Vc(e);const s=t.$implicit;return c.wc(3).onSkillSelectOption(i,s)}),c.xc(9,"t"),c.kc(10,"ui-button-dropdown-option",38),c.gd(11),c.xc(12,"t"),c.jc(),c.kc(13,"ui-button-dropdown-option",39),c.gd(14),c.xc(15,"t"),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=t.$implicit,i=c.wc(3);c.Mb(3),c.id(" ",e.name," "),c.Mb(2),c.id(" ",c.yc(6,8,e.expertise)," "),c.Mb(3),c.Dc("selectable",!1)("tooltipLabel",c.yc(9,10,i.dictionary.skills.actions)),c.Mb(2),c.Dc("value",i.skillsActionsEnum.UPDATE),c.Mb(1),c.id(" ",c.yc(12,12,i.dictionary.skills.updateRating)," "),c.Mb(2),c.Dc("value",i.skillsActionsEnum.DELETE),c.Mb(1),c.id(" ",c.yc(15,14,i.dictionary.skills.delete)," ")}}const bI=function(e){return{"max-skills-assigned":e}};function fI(e,t){if(1&e){const e=c.lc();c.kc(0,"div",12),c.xc(1,"async"),c.kc(2,"div",13),c.gd(3),c.xc(4,"t"),c.jc(),c.kc(5,"ui-button-text",14),c.sc("trigger",function(){return c.Vc(e),c.wc(2).openSkillsProfiler()}),c.xc(6,"async"),c.xc(7,"async"),c.xc(8,"t"),c.xc(9,"t"),c.jc(),c.ed(10,hI,9,7,"div",15),c.ed(11,pI,4,6,"div",16),c.xc(12,"async"),c.ed(13,gI,3,3,"div",17),c.xc(14,"async"),c.kc(15,"ul",18),c.ed(16,mI,16,16,"li",19),c.xc(17,"async"),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Dc("ngClass",c.Ic(29,bI,c.yc(1,11,e.assignedSkills$).length===e.maxAssignableSkills)),c.Mb(3),c.id(" ",c.yc(4,13,e.dictionary.skills.yourSkills)," "),c.Mb(2),c.Dc("disabled",c.yc(6,15,e.assignedSkills$).length>=e.maxAssignableSkills||e.editMode!==e.editModeEnum.COMPLETE)("ngClass",c.Ic(31,rI,c.yc(7,17,e.assignedSkills$).length==e.maxAssignableSkills))("label",c.yc(8,19,e.dictionary.skills.addSkills))("ariaLabel",c.yc(9,21,e.dictionary.skills.addSkills))("ariaHasPopup",!0),c.Mb(5),c.Dc("ngIf",e.editMode===e.editModeEnum.COMPLETE),c.Mb(1),c.Dc("ngIf",c.yc(12,23,e.assignedSkills$).length==e.maxAssignableSkills),c.Mb(2),c.Dc("ngIf",c.yc(14,25,e.assignedSkills$).length>0),c.Mb(3),c.Dc("ngForOf",c.yc(17,27,e.assignedSkills$))}}function _I(e,t){if(1&e&&(c.ic(0),c.ed(1,aI,10,13,"div",6),c.xc(2,"async"),c.ed(3,fI,18,33,"div",7),c.xc(4,"async"),c.hc()),2&e){const e=c.wc();c.Mb(1),c.Dc("ngIf",c.yc(2,2,e.assignedSkillsOccupation$)),c.Mb(2),c.Dc("ngIf",c.yc(4,4,e.assignedSkills$).length>0)}}function vI(e,t){if(1&e){const e=c.lc();c.kc(0,"div",40),c.fc(1,"ui-blank-slate",41),c.xc(2,"t"),c.xc(3,"t"),c.kc(4,"div",42),c.kc(5,"ui-button-raised-primary",43),c.sc("trigger",function(){return c.Vc(e),c.wc().openSkillsProfiler()}),c.xc(6,"t"),c.xc(7,"t"),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(1),c.Dc("title",c.yc(2,5,e.dictionary.skills.improveYourSkillsTitle))("description",c.yc(3,7,e.dictionary.skills.improveYourSkillsSubtitle)),c.Mb(4),c.Dc("label",c.yc(6,9,e.dictionary.skills.getStarted))("ariaLabel",c.yc(7,11,e.dictionary.skills.getStarted))("ariaHasPopup",!0)}}let yI=(()=>{class e{constructor(e,t,i,s){this._translationService=e,this._myProfileSkillsService=t,this._toggleService=i,this._skillsProfilerRenderer=s,this.editMode=$S.d.COMPLETE,this.dictionary=GS.a,this.maxAssignableSkills=$S.b,this.assignedSkillsOccupation$=this._myProfileSkillsService.assignedSkillsOccupation$,this.assignedSkills$=this._myProfileSkillsService.assignedSkills$,this.suggestedSkills$=this._myProfileSkillsService.suggestedSkills$,this.loadingSuggestedSkills$=this._myProfileSkillsService.loadingSuggestedSkills$,this.skillsActionsEnum=$S.c,this.rateSkillDialogModeEnum=RT,this.userIsProfiled$=this._myProfileSkillsService.userIsProfiled$,this.editModeEnum=$S.d,this._setInitialSessionData(),this._myProfileSkillsService.getSuggestedSkills(),this.unscribeSkills&&this.unscribeSkills.unsubscribe(),this.unscribeSkills=this.assignedSkills$.pipe(Object(Ti.a)(e=>this._loadConfiguration(e))).subscribe(()=>{this.numberOfSkillsAssigned=tt.a.t("skills","{numberOfSkills} out of {maxNumberOfSkills} skills",{numberOfSkills:this.assignedSkills$.value.length,maxNumberOfSkills:this.maxAssignableSkills})})}ngOnDestroy(){this.unscribeSkills&&this.unscribeSkills.unsubscribe()}onSkillSelectOption(e,t){switch(e){case $S.c.UPDATE:this.rateSkillDialog.showDialog(t,this.rateSkillDialogModeEnum.MODIFY);break;case $S.c.DELETE:this.deleteSkillDialog.showDialog(t)}}openSkillsProfiler(){this._openProfiler()}_openProfiler(){this.skillsProfilerDialogHost=this._skillsProfilerRenderer.renderProfiler(this.profilerConfiguration),this._addSkillsProfilerListener(),this.skillsProfilerDialogHost.skillsProfilerDialog.show()}_addSkillsProfilerListener(){this.skillsProfilerDialogHost.profileSaved.pipe(Object(vt.a)(this._skillsProfilerRenderer.profilerDestroyed$)).subscribe(e=>this._onProfileSaved(e)),this.skillsProfilerDialogHost.canceled.pipe(Object(vt.a)(this._skillsProfilerRenderer.profilerDestroyed$)).subscribe(()=>this._onProfilerCanceled())}_onProfileSaved(e){this._setInitialSessionData(),this._myProfileSkillsService.getSuggestedSkills(),e.operationEndSubject$.next(),this._skillsProfilerRenderer.removeProfiler()}_onProfilerCanceled(){this._skillsProfilerRenderer.removeProfiler()}addSelectedSkill(e){this.assignedSkills$.value.length<10&&this.rateSkillDialog.showDialog(e,this.rateSkillDialogModeEnum.ADD)}_setInitialProfilerConfiguration(e,t,i){var s;this.profilerConfiguration=Object.assign(Object.assign(Object.assign(Object.assign({},FT.a),t&&{selectedOccupation:t}),Boolean(null==i?void 0:i.length)&&{preselectedSkills:i}),{occupation:Object.assign(Object.assign({},FT.a.occupation),{title:GS.a.skills.chooseOccupationTitle,subtitle:"",enabled:!e}),skills:Object.assign(Object.assign({},FT.a.skills),{maxElements:$S.b-(null!==(s=null==i?void 0:i.length)&&void 0!==s?s:0),title:GS.a.skills.typeSkills})})}_loadConfiguration(e){var t;this.profilerConfiguration=Object.assign(Object.assign(Object.assign({},this.profilerConfiguration),Boolean(null==e?void 0:e.length)&&{preselectedSkills:e}),{skills:Object.assign(Object.assign({},this.profilerConfiguration.skills),{maxElements:$S.b-(null!==(t=null==e?void 0:e.length)&&void 0!==t?t:0)})})}_setInitialSessionData(){var e,t,i,s;const n=null===(e=D.c.getInstance().objectives)||void 0===e?void 0:e.occupation,a=null===(t=D.c.getInstance().objectives)||void 0===t?void 0:t.areasOfImprovement,o=this._toggleService.isOn(u.f.TOGGLE_SKILLS_PHASE_1_1)?null===(i=D.c.getInstance().skills)||void 0===i?void 0:i.userIsProfiled:Boolean(null===(s=D.c.getInstance().objectives)||void 0===s?void 0:s.occupation);n&&this._myProfileSkillsService.assignedSkillsOccupation$.next(n),a&&this._myProfileSkillsService.assignedSkills$.next(a),o&&this._myProfileSkillsService.userIsProfiled$.next(Boolean(null==a?void 0:a.length)),this._setInitialProfilerConfiguration(null!=o&&o,n,a)}}return e.\u0275fac=function(t){return new(t||e)(c.ec(u.h),c.ec(WS),c.ec(u.g),c.ec(NT.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-my-profile-skills"]],viewQuery:function(e,t){if(1&e&&(c.nd(iI,1),c.nd(sI,1),c.nd(nI,1)),2&e){let e;c.Rc(e=c.tc())&&(t.editOccupationDialog=e.first),c.Rc(e=c.tc())&&(t.rateSkillDialog=e.first),c.Rc(e=c.tc())&&(t.deleteSkillDialog=e.first)}},hostAttrs:[1,"lrn-my-profile-skills"],inputs:{editMode:"editMode"},decls:11,vars:4,consts:[[1,"my-profile-skills-wrapper"],[4,"ngIf","ngIfElse"],["blankSlate",""],["editOccupationDialog",""],["rateSkillDialog",""],["deleteSkillDialog",""],["class","my-profile-skills-occupation",4,"ngIf"],["class","my-profile-skills-assigned",3,"ngClass",4,"ngIf"],[1,"my-profile-skills-occupation"],[1,"my-profile-skills-occupation-subtitle","ui-typography-subtitle","ui-color-typography-secondary"],[1,"my-profile-skills-occupation-title","ui-typography-heading-4"],["color","accent",1,"my-profile-skills-occupation-edit",3,"label","ariaLabel","ariaHasPopup","trigger"],[1,"my-profile-skills-assigned",3,"ngClass"],[1,"my-profile-skills-assigned-title","ui-typography-heading-4"],["color","accent","iconName","add-element",1,"my-profile-skills-assigned-add-skills",3,"disabled","ngClass","label","ariaLabel","ariaHasPopup","trigger"],["class","my-profile-skills-suggestions",4,"ngIf"],["class","my-profile-skills-notification-inline-wrapper",4,"ngIf"],["class","ui-typography-subtitle ui-color-typography-secondary my-profile-skills-reached-wrapper",4,"ngIf"],[1,"my-profile-skills-assigned-list"],["class","my-profile-skills-assigned-list-item",4,"ngFor","ngForOf"],[1,"my-profile-skills-suggestions"],[1,"my-profile-skills-suggestions-subtitle","ui-typography-subtitle","ui-color-typography-secondary"],[1,"my-profile-skills-suggestions-list"],["class","my-profile-skills-suggestions-list-spinner",4,"ngIf","ngIfElse"],["suggestionsList",""],[1,"my-profile-skills-suggestions-list-spinner"],["noSuggestionsMessage",""],["class","my-profile-skills-suggestions-list-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"my-profile-skills-suggestions-list-item",3,"ngClass","click"],[1,"my-profile-skills-notification-inline-wrapper"],["type","alert",3,"title","message"],[1,"ui-typography-subtitle","ui-color-typography-secondary","my-profile-skills-reached-wrapper"],[1,"my-profile-skills-assigned-list-item"],[1,"my-profile-skills-assigned-list-item-texts"],[1,"my-profile-skills-assigned-list-item-title","ui-typography-heading-5"],[1,"my-profile-skills-assigned-list-item-subtitle","ui-typography-subtitle","ui-color-typography-secondary"],[1,"my-profile-skills-assigned-list-item-actions"],["menuHorizontalAlignment","before","iconName","more-vertical","triggerType","icon","tooltipPosition","above",3,"selectable","tooltipLabel","selectOption"],[3,"value"],[1,"ui-color-typography-error",3,"value"],[1,"my-profile-skills-blank-slate-wrapper"],["illustrationName","on-the-way","illustrationSize","md",1,"my-profile-skills-blank-slate",3,"title","description"],[1,"my-profile-skills-blank-slate-button-wrapper"],[1,"my-profile-skills-blank-slate-button",3,"label","ariaLabel","ariaHasPopup","trigger"]],template:function(e,t){if(1&e&&(c.kc(0,"div",0),c.ed(1,_I,5,6,"ng-container",1),c.xc(2,"async"),c.ed(3,vI,8,13,"ng-template",null,2,c.fd),c.fc(5,"lrn-my-profile-skills-edit-occupation-dialog",null,3),c.fc(7,"lrn-my-profile-skills-rate-skill-dialog",null,4),c.fc(9,"lrn-my-profile-skills-delete-skill-dialog",null,5),c.jc()),2&e){const e=c.Sc(4);c.Mb(1),c.Dc("ngIf",c.yc(2,2,t.userIsProfiled$))("ngIfElse",e)}},directives:[m.p,GT,JT,eI,b.O,m.n,b.U,m.o,b.Be,b.tb,b.Jd,b.E,b.H,b.B,b.S],pipes:[m.b,M.b,tI],styles:["lrn-my-profile-skills .my-profile-skills-occupation{padding:1.5rem;padding:var(--ui-spacing-md);border-bottom:.06rem solid #e4e6e5;border-bottom:solid var(--ui-size-border-xs) var(--ui-color-border-neutral)}lrn-my-profile-skills .my-profile-skills-occupation-title{margin-top:.25rem;margin-top:var(--ui-spacing-tiny)}lrn-my-profile-skills .my-profile-skills-occupation-edit{margin-top:.75rem;margin-top:var(--ui-spacing-xs)}lrn-my-profile-skills .my-profile-skills-suggestions{padding:1rem 0;padding:var(--ui-spacing-sm) 0}lrn-my-profile-skills .my-profile-skills-suggestions-title{display:flex;align-items:center}lrn-my-profile-skills .my-profile-skills-suggestions-title .my-profile-skills-suggestions-title-icon{padding-left:.25rem;padding-left:var(--ui-spacing-tiny)}[dir=rtl] lrn-my-profile-skills .my-profile-skills-suggestions-title .my-profile-skills-suggestions-title-icon{padding-left:0;padding-right:.25rem;padding-right:var(--ui-spacing-tiny)}lrn-my-profile-skills .my-profile-skills-suggestions-subtitle{padding-bottom:.5rem;padding-bottom:var(--ui-spacing-xxs)}lrn-my-profile-skills .my-profile-skills-suggestions-list-spinner{width:100%;height:37px;display:flex;justify-content:center;align-items:center}lrn-my-profile-skills .my-profile-skills-suggestions-list-item{display:inline-block;margin:.5rem .5rem 0 0;margin:var(--ui-spacing-xxs) var(--ui-spacing-xxs) 0 0;cursor:pointer}[dir=rtl] lrn-my-profile-skills .my-profile-skills-suggestions-list-item{margin:.5rem 0 0 .5rem;margin:var(--ui-spacing-xxs) 0 0 var(--ui-spacing-xxs)}lrn-my-profile-skills .my-profile-skills-suggestions-list-item-disable{display:inline-block;margin:.5rem .5rem 0 0;margin:var(--ui-spacing-xxs) var(--ui-spacing-xxs) 0 0;cursor:not-allowed}[dir=rtl] lrn-my-profile-skills .my-profile-skills-suggestions-list-item-disable{margin:.5rem 0 0 .5rem;margin:var(--ui-spacing-xxs) 0 0 var(--ui-spacing-xxs)}lrn-my-profile-skills .my-profile-skills-notification-inline-wrapper{padding:.5rem 0 1.5rem;padding:var(--ui-spacing-xxs) 0 var(--ui-spacing-md) 0}lrn-my-profile-skills .my-profile-skills-reached-wrapper{margin-bottom:.5rem;margin-bottom:var(--ui-spacing-xxs)}lrn-my-profile-skills .my-profile-skills-assigned{position:relative;padding:1.5rem 1.5rem 0;padding:var(--ui-spacing-md) var(--ui-spacing-md) 0 var(--ui-spacing-md)}lrn-my-profile-skills .my-profile-skills-assigned.max-skills-assigned .my-profile-skills-assigned-title{padding-bottom:.75rem;padding-bottom:var(--ui-spacing-xs)}lrn-my-profile-skills .my-profile-skills-assigned-add-skills{position:absolute;top:1.5rem;top:var(--ui-spacing-md);right:1.5rem;right:var(--ui-spacing-md)}[dir=rtl] lrn-my-profile-skills .my-profile-skills-assigned-add-skills{right:auto;left:1.5rem;left:var(--ui-spacing-md)}lrn-my-profile-skills .my-profile-skills-item-disable{cursor:default;opacity:var(--ui-opacity-middle)}lrn-my-profile-skills .my-profile-skills-assigned-list-item{display:flex;align-items:center;padding:.75rem 0;padding:var(--ui-spacing-xs) 0}lrn-my-profile-skills .my-profile-skills-assigned-list-item-subtitle{margin-top:.13rem;margin-top:var(--ui-spacing-micro)}lrn-my-profile-skills .my-profile-skills-assigned-list-item-actions{margin-left:auto}[dir=rtl] lrn-my-profile-skills .my-profile-skills-assigned-list-item-actions{margin-left:unset;margin-right:auto}lrn-my-profile-skills .my-profile-skills-blank-slate-wrapper{display:block;padding:2rem 0;padding:var(--ui-spacing-lg) 0}lrn-my-profile-skills .my-profile-skills-blank-slate-button-wrapper{text-align:center;margin-top:1.5rem;margin-top:var(--ui-spacing-md)}"],encapsulation:2,changeDetection:0}),e})();const wI={orderHistoryTitle:tt.a.t("ecommerce","Order History"),orderHistorySubtitle:tt.a.t("ecommerce","Click on the link to manage your orders"),orderHistoryLinkText:tt.a.t("ecommerce","Go to Order History Page"),subscriptionsTitle:tt.a.t("standard","Subscriptions"),subscriptionsSubtitle:tt.a.t("ecommerce","Click on the link to manage your subscriptions"),subscriptionsLinkText:tt.a.t("ecommerce","Go to Subscription Page")};var CI=i("QYwl");let SI=(()=>{class e{constructor(){this.dictionary=wI}ngOnInit(){this.externalUrls$=this.getExternalUrls()}getExternalUrls(){return Object(Ei.a)({history:D.c.getInstance().order_history_page,subscriptions:D.c.getInstance().subscription_page})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-my-profile-external-ecommerce"]],decls:26,vars:30,consts:[["role","heading","aria-level","4",1,"ui-typography-heading-4"],[1,"ui-typography-subtitle","ui-color-typography-secondary"],[1,"section-content"],["targetBlank","",3,"targetBlankLinkTitle","href"]],template:function(e,t){if(1&e&&(c.kc(0,"section"),c.kc(1,"div",0),c.gd(2),c.xc(3,"t"),c.jc(),c.kc(4,"div",1),c.gd(5),c.xc(6,"t"),c.jc(),c.kc(7,"p",2),c.kc(8,"a",3),c.xc(9,"t"),c.xc(10,"async"),c.gd(11),c.xc(12,"t"),c.jc(),c.jc(),c.jc(),c.kc(13,"section"),c.kc(14,"div",0),c.gd(15),c.xc(16,"t"),c.jc(),c.kc(17,"div",1),c.gd(18),c.xc(19,"t"),c.jc(),c.kc(20,"p",2),c.kc(21,"a",3),c.xc(22,"t"),c.xc(23,"async"),c.gd(24),c.xc(25,"t"),c.jc(),c.jc(),c.jc()),2&e){let e=null,i=null;c.Mb(2),c.id(" ",c.yc(3,10,t.dictionary.orderHistoryTitle)," "),c.Mb(3),c.id(" ",c.yc(6,12,t.dictionary.orderHistorySubtitle)," "),c.Mb(3),c.Dc("targetBlankLinkTitle",c.yc(9,14,t.dictionary.orderHistoryLinkText))("href",null==(e=c.yc(10,16,t.externalUrls$))?null:e.history,c.Yc),c.Mb(3),c.id(" ",c.yc(12,18,t.dictionary.orderHistoryLinkText)," "),c.Mb(4),c.id(" ",c.yc(16,20,t.dictionary.subscriptionsTitle)," "),c.Mb(3),c.id(" ",c.yc(19,22,t.dictionary.subscriptionsSubtitle)," "),c.Mb(3),c.Dc("targetBlankLinkTitle",c.yc(22,24,t.dictionary.subscriptionsLinkText))("href",null==(i=c.yc(23,26,t.externalUrls$))?null:i.subscriptions,c.Yc),c.Mb(3),c.id(" ",c.yc(25,28,t.dictionary.subscriptionsLinkText)," ")}},directives:[CI.a],pipes:[M.b,m.b],styles:["lrn-my-profile-external-ecommerce section{padding:var(--ui-spacing-md)}lrn-my-profile-external-ecommerce section:not(:first-child){border-top:var(--ui-size-border-xs) solid var(--ui-color-border-neutral)}lrn-my-profile-external-ecommerce .section-content{padding-top:var(--ui-spacing-sm)}"],encapsulation:2,changeDetection:0}),e})();const kI=["uiTabsVerticalComponent"],TI=["personalInfoComponent"],II=["conditionsOfUseComponent"],xI=["preferencesComponent"],DI=["changePasswordComponent"],OI=["contentPartnersComponent"],EI=["skillsComponent"],AI=["authenticatorComponent"],PI=["externalEcommerceComponent"];function MI(e,t){1&e&&c.fc(0,"lrn-my-profile-personal-info",null,7)}function LI(e,t){1&e&&c.fc(0,"lrn-my-profile-change-password",null,8)}function jI(e,t){if(1&e&&(c.kc(0,"ui-tab-vertical",4),c.xc(1,"t"),c.kc(2,"ui-tab-vertical-header"),c.kc(3,"ui-tab-vertical-title"),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"ui-tab-vertical-description"),c.gd(7),c.xc(8,"t"),c.jc(),c.jc(),c.kc(9,"ui-tab-vertical-content"),c.ed(10,LI,2,0,"lrn-my-profile-change-password",5),c.jc(),c.jc()),2&e){c.wc();const e=c.Sc(2),t=c.wc();c.Dc("error",t.tabs.changePassword.showErrors)("tabName",t.tabs.changePassword.id)("title",c.yc(1,6,t.dictionary.changePassword.title)),c.Mb(4),c.id(" ",c.yc(5,8,t.dictionary.changePassword.title)," "),c.Mb(3),c.id(" ",c.yc(8,10,t.dictionary.changePassword.description)," "),c.Mb(3),c.Dc("ngIf",e.activeTab===t.tabs.changePassword.id)}}function RI(e,t){1&e&&c.fc(0,"lrn-my-profile-preferences",null,9)}function FI(e,t){if(1&e&&(c.kc(0,"ui-tab-vertical",4),c.xc(1,"t"),c.kc(2,"ui-tab-vertical-header"),c.kc(3,"ui-tab-vertical-title"),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"ui-tab-vertical-description"),c.gd(7),c.xc(8,"t"),c.jc(),c.jc(),c.kc(9,"ui-tab-vertical-content"),c.ed(10,RI,2,0,"lrn-my-profile-preferences",5),c.jc(),c.jc()),2&e){c.wc();const e=c.Sc(2),t=c.wc();c.Dc("error",t.tabs.preferences.showErrors)("tabName",t.tabs.preferences.id)("title",c.yc(1,6,t.dictionary.preferences.title)),c.Mb(4),c.id(" ",c.yc(5,8,t.dictionary.preferences.title)," "),c.Mb(3),c.id(" ",c.yc(8,10,t.dictionary.preferences.description)," "),c.Mb(3),c.Dc("ngIf",e.activeTab===t.tabs.preferences.id)}}function NI(e,t){1&e&&c.fc(0,"lrn-my-profile-authenticator-app",null,10)}function UI(e,t){if(1&e&&(c.kc(0,"ui-tab-vertical",4),c.xc(1,"t"),c.kc(2,"ui-tab-vertical-header"),c.kc(3,"ui-tab-vertical-title"),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"ui-tab-vertical-description"),c.gd(7),c.xc(8,"t"),c.jc(),c.jc(),c.kc(9,"ui-tab-vertical-content"),c.ed(10,NI,2,0,"lrn-my-profile-authenticator-app",5),c.jc(),c.jc()),2&e){c.wc();const e=c.Sc(2),t=c.wc();c.Dc("error",t.tabs.authenticatorApp.showErrors)("tabName",t.tabs.authenticatorApp.id)("title",c.yc(1,6,t.dictionaryAuthenticatorApp.authenticatorApp.title)),c.Mb(4),c.id(" ",c.yc(5,8,t.dictionaryAuthenticatorApp.authenticatorApp.title)," "),c.Mb(3),c.id(" ",c.yc(8,10,t.dictionaryAuthenticatorApp.authenticatorApp.description)," "),c.Mb(3),c.Dc("ngIf",e.activeTab===t.tabs.authenticatorApp.id)}}function zI(e,t){1&e&&c.fc(0,"lrn-my-profile-content-partners",null,12)}function qI(e,t){if(1&e){const e=c.lc();c.kc(0,"ui-tab-vertical",4),c.xc(1,"t"),c.kc(2,"ui-tab-vertical-header"),c.kc(3,"ui-tab-vertical-title"),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"ui-tab-vertical-description"),c.gd(7),c.xc(8,"t"),c.jc(),c.kc(9,"ui-tab-vertical-action"),c.kc(10,"ui-button-text",11),c.sc("trigger",function(){return c.Vc(e),c.wc(2).contentPartnersComponent.addAffiliateCodeDialog.show()}),c.xc(11,"t"),c.jc(),c.jc(),c.jc(),c.kc(12,"ui-tab-vertical-content"),c.ed(13,zI,2,0,"lrn-my-profile-content-partners",5),c.jc(),c.jc()}if(2&e){c.wc();const e=c.Sc(2),t=c.wc();c.Dc("error",t.tabs.contentPartnersApp.showErrors)("tabName",t.tabs.contentPartnersApp.id)("title",c.yc(1,7,t.dictionary.contentPartnersApp.title)),c.Mb(4),c.id(" ",c.yc(5,9,t.dictionary.contentPartnersApp.title)," "),c.Mb(3),c.id(" ",c.yc(8,11,t.dictionary.contentPartnersApp.description)," "),c.Mb(3),c.Dc("label",c.yc(11,13,t.dictionary.contentPartnersApp.addCode)),c.Mb(3),c.Dc("ngIf",e.activeTab===t.tabs.contentPartnersApp.id)}}function VI(e,t){if(1&e&&c.fc(0,"lrn-my-profile-conditions-of-use",14,15),2&e){const e=c.wc(3);c.Dc("privacyPolicyMustAccepted",e.privacyPolicyMustAccepted)("termsAndConditionsMustAccepted",e.termsAndConditionsMustAccepted)}}function BI(e,t){if(1&e&&(c.kc(0,"ui-tab-vertical",4),c.xc(1,"t"),c.kc(2,"ui-tab-vertical-header"),c.kc(3,"ui-tab-vertical-title"),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"ui-tab-vertical-description"),c.gd(7),c.xc(8,"t"),c.jc(),c.jc(),c.kc(9,"ui-tab-vertical-content"),c.ed(10,VI,2,2,"lrn-my-profile-conditions-of-use",13),c.jc(),c.jc()),2&e){c.wc();const e=c.Sc(2),t=c.wc();c.Dc("error",t.tabs.conditionsOfUse.showErrors)("tabName",t.tabs.conditionsOfUse.id)("title",c.yc(1,6,t.dictionary.conditionsOfUse.title)),c.Mb(4),c.id(" ",c.yc(5,8,t.dictionary.conditionsOfUse.title)," "),c.Mb(3),c.id(" ",c.yc(8,10,t.dictionary.conditionsOfUse.description)," "),c.Mb(3),c.Dc("ngIf",e.activeTab===t.tabs.conditionsOfUse.id)}}function GI(e,t){if(1&e&&(c.fc(0,"lrn-my-profile-skills",17,18),c.xc(2,"async")),2&e){const e=c.wc(3);c.Dc("editMode",c.yc(2,1,e.skillsEditMode$))}}function HI(e,t){if(1&e&&(c.kc(0,"ui-tab-vertical",4),c.xc(1,"t"),c.kc(2,"ui-tab-vertical-header"),c.kc(3,"ui-tab-vertical-title"),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"ui-tab-vertical-description"),c.gd(7),c.xc(8,"t"),c.jc(),c.jc(),c.kc(9,"ui-tab-vertical-content"),c.ed(10,GI,3,3,"lrn-my-profile-skills",16),c.jc(),c.jc()),2&e){c.wc();const e=c.Sc(2),t=c.wc();c.Dc("error",t.tabs.skills.showErrors)("tabName",t.tabs.skills.id)("title",c.yc(1,6,t.dictionary.skills.title)),c.Mb(4),c.id(" ",c.yc(5,8,t.dictionary.skills.title)," "),c.Mb(3),c.id(" ",c.yc(8,10,t.dictionary.skills.description)," "),c.Mb(3),c.Dc("ngIf",e.activeTab===t.tabs.skills.id)}}function $I(e,t){1&e&&c.fc(0,"lrn-my-profile-external-ecommerce",null,19)}function YI(e,t){if(1&e&&(c.kc(0,"ui-tab-vertical",4),c.xc(1,"t"),c.kc(2,"ui-tab-vertical-header"),c.kc(3,"ui-tab-vertical-title"),c.gd(4),c.xc(5,"t"),c.jc(),c.kc(6,"ui-tab-vertical-description"),c.gd(7),c.xc(8,"t"),c.jc(),c.jc(),c.kc(9,"ui-tab-vertical-content"),c.ed(10,$I,2,0,"lrn-my-profile-external-ecommerce",5),c.jc(),c.jc()),2&e){c.wc();const e=c.Sc(2),t=c.wc();c.Dc("error",t.tabs.externalEcommerce.showErrors)("tabName",t.tabs.externalEcommerce.id)("title",c.yc(1,6,t.dictionary.externalEcommerce.title)),c.Mb(4),c.id(" ",c.yc(5,8,t.dictionary.externalEcommerce.title)," "),c.Mb(3),c.id(" ",c.yc(8,10,t.dictionary.externalEcommerce.description)," "),c.Mb(3),c.Dc("ngIf",e.activeTab===t.tabs.externalEcommerce.id)}}function WI(e,t){if(1&e){const e=c.lc();c.kc(0,"div",1),c.kc(1,"ui-tabs-vertical",2,3),c.sc("changeTab",function(t){return c.Vc(e),c.wc().onChangeTab(t)}),c.xc(3,"async"),c.xc(4,"t"),c.xc(5,"t"),c.kc(6,"ui-tab-vertical",4),c.xc(7,"t"),c.kc(8,"ui-tab-vertical-header"),c.kc(9,"ui-tab-vertical-title"),c.gd(10),c.xc(11,"t"),c.jc(),c.kc(12,"ui-tab-vertical-description"),c.gd(13),c.xc(14,"t"),c.jc(),c.jc(),c.kc(15,"ui-tab-vertical-content"),c.ed(16,MI,2,0,"lrn-my-profile-personal-info",5),c.jc(),c.jc(),c.ed(17,jI,11,12,"ui-tab-vertical",6),c.ed(18,FI,11,12,"ui-tab-vertical",6),c.ed(19,UI,11,12,"ui-tab-vertical",6),c.ed(20,qI,14,15,"ui-tab-vertical",6),c.ed(21,BI,11,12,"ui-tab-vertical",6),c.ed(22,HI,11,12,"ui-tab-vertical",6),c.xc(23,"async"),c.ed(24,YI,11,12,"ui-tab-vertical",6),c.jc(),c.jc()}if(2&e){const e=c.Sc(2),t=c.wc();c.Wb("error-notification-visible",t.errorNotification.show),c.Mb(1),c.Dc("renderOnlyActiveContent",!0)("activeTab",c.yc(3,19,t.activeTab$))("menuLabel",c.yc(4,21,t.dictionary.menu))("navigationAriaLabel",c.yc(5,23,t.dictionary.myProfileMenu)),c.Mb(5),c.Dc("error",t.tabs.personalInfo.showErrors)("tabName",t.tabs.personalInfo.id)("title",c.yc(7,25,t.dictionary.personalInfo.title)),c.Mb(4),c.id(" ",c.yc(11,27,t.dictionary.personalInfo.title)," "),c.Mb(3),c.id(" ",c.yc(14,29,t.dictionary.personalInfo.description)," "),c.Mb(3),c.Dc("ngIf",e.activeTab===t.tabs.personalInfo.id),c.Mb(1),c.Dc("ngIf",t.showChangePasswordTab),c.Mb(1),c.Dc("ngIf",t.showPreferencesTab),c.Mb(1),c.Dc("ngIf",t.showTabAuthenticator),c.Mb(1),c.Dc("ngIf",t.showContentPartnersTab),c.Mb(1),c.Dc("ngIf",t.privacyPolicyMustAccepted||t.termsAndConditionsMustAccepted),c.Mb(1),c.Dc("ngIf",c.yc(23,31,t.showSkillsTab$)),c.Mb(2),c.Dc("ngIf",t.showExternalEcommerceTab)}}let QI=(()=>{class e{constructor(e,t,i,s,n,a,o,r,c){this._docLayoutService=e,this._pageService=t,this._myProfileService=i,this._toggleService=s,this._activatedRoute=n,this._myProfileSkillsService=a,this._translationService=o,this._location=r,this._router=c,this.activeTab$=new je.a(""),this.dictionary=GS.a,this.dictionaryAuthenticatorApp=BS,this.tabs=HS.c,this.platformSettings=D.b.getInstance().settings,this.privacyPolicyMustAccepted=!1,this.termsAndConditionsMustAccepted=!1,this.errorNotification={title:null,message:null,show:!1},this.showContentPartnersTab=D.b.getInstance().isPluginActive("ContentPartnersApp"),this.showChangePasswordTab=this._myProfileService.isChangePasswordAllowed(),this.showPreferencesTab=!0,this.showExternalEcommerceTab=!1,this.showSkillsTab$=new je.a(!1),this.skillsEditMode$=new je.a($S.d.COMPLETE),this.translationServiceReady=!1,this._session=D.c.getInstance(),this._hasSkillsRouteParam=!1,this._personalInfoDirty=!1,this._passwordFormDirty=!1,this._preferencesFormDirty=!1,this._conditionsOfUseComponentDirty=!1,this._authenticatorFormDirty=!1,this._ngUnsubscribe$=new _t.a,this._isSkillsToggleOn$=this._myProfileSkillsService.isSkillsToggleOn$,this._myProfileSkillsService.isSkillsToggleOn$.next(this._toggleService.isOn(u.f.TOGGLE_SKILLS_PHASE_1_1)),this._activatedRoute.params.pipe(Object(se.a)(1)).subscribe(e=>{this._hasSkillsRouteParam=!!e.improvementAreas,e.password&&this.activeTab$.next(this.tabs.changePassword.id)}),this._translationService.whenReady().pipe(Object(qS.a)(e=>e)).subscribe(()=>{this.translationServiceReady=!0})}ngOnInit(){this._pageService.ready().pipe(Object(se.a)(1)).subscribe(()=>{this._setHeaderTitle()}),this._checkPreferencesTabVisibility(),this.showTabAuthenticator=this._isAuthenticatorEnabled(),this.privacyPolicyMustAccepted=this.platformSettings.registration_settings.options.privacy_policy,this.termsAndConditionsMustAccepted=this.platformSettings.registration_settings.options.terms_and_conditions,this._checkSkillsTabVisibility(),this.showExternalEcommerceTab=this._isExternalEcommerceTabVisible()}ngAfterViewInit(){this._isPreferencesFragmentSet()}ngOnDestroy(){this._ngUnsubscribe$.next(),this._ngUnsubscribe$.complete(),this._myProfileSkillsService.resetServiceSkillsState()}onChangeTab(e){this.isFormDirty()?this._showLeavingDialog(e):e.next(!0)}saveChanges(){switch(this.uiTabsVerticalComponent.activeTab){case this.tabs.personalInfo.id:return this.personalInfoComponent.submitForm();case this.tabs.changePassword.id:return this.changePasswordComponent.updatePassword();case this.tabs.preferences.id:return this.preferencesComponent.savePreferences();case this.tabs.authenticatorApp.id:return this.authenticatorComponent.pairApp();case this.tabs.conditionsOfUse.id:return this.conditionsOfUseComponent.saveChanges()}}isFormDirty(){switch(this.uiTabsVerticalComponent.activeTab){case this.tabs.personalInfo.id:return this._personalInfoDirty=this._isPersonalInfoFormDirty(),this._personalInfoDirty;case this.tabs.changePassword.id:return this._passwordFormDirty=this._isPasswordFormDirty(),this._passwordFormDirty;case this.tabs.preferences.id:return this._preferencesFormDirty=this.preferencesComponent.isFormDirty(),this._preferencesFormDirty;case this.tabs.authenticatorApp.id:return this._authenticatorFormDirty=this.authenticatorComponent.isFormDirty(),this._authenticatorFormDirty;case this.tabs.conditionsOfUse.id:return this._conditionsOfUseComponentDirty=this.conditionsOfUseComponent.isFormDirty(),this._conditionsOfUseComponentDirty}return!1}_discardChanges(){switch(this.uiTabsVerticalComponent.activeTab){case this.tabs.personalInfo.id:this.personalInfoComponent.totalErrorsForm=0,this.personalInfoComponent.setFormValue(),this.personalInfoComponent.getAdditionalFields();break;case this.tabs.changePassword.id:this.changePasswordComponent.passwordChangeErrorsCount=0,this.changePasswordComponent.formComponent.passwordChangeFormGroup.reset();break;case this.tabs.preferences.id:this._toggleService.isOn(u.f.TOGGLE_MY_PROFILE_DATE_FORMAT_SELECTION)||this.preferencesComponent.changeLanguage(D.c.getInstance().language),this.preferencesComponent.setInputValue();break;case this.tabs.authenticatorApp.id:this.authenticatorComponent.controlOtp=!0,this.authenticatorComponent.authenticatorAppForm.reset();break;case this.tabs.conditionsOfUse.id:this.conditionsOfUseComponent.ngOnInit(),void 0!==this.conditionsOfUseComponent.policies&&this.conditionsOfUseComponent.policies.ngOnInit(),void 0!==this.conditionsOfUseComponent.termsAndConditions&&this.conditionsOfUseComponent.termsAndConditions.ngOnInit()}}_markFormsAsPristine(){switch(this.uiTabsVerticalComponent.activeTab){case this.tabs.personalInfo.id:this.personalInfoComponent.markFormAsPristine();break;case this.tabs.changePassword.id:this.changePasswordComponent.markFormAsPristine();break;case this.tabs.preferences.id:this.preferencesComponent.markFormAsPristine();break;case this.tabs.conditionsOfUse.id:this.conditionsOfUseComponent.markFormAsPristine()}}_isAuthenticatorEnabled(){const e=D.b.getInstance().getPluginSettings("EsignatureApp");return e&&e.enabled&&e.auth_types.filter(e=>"authenticatorapp"===e.type&&e.enabled).length}_checkPreferencesTabVisibility(){(this._toggleService.isOn(u.f.TOGGLE_HIDE_MY_PROFILE_PREFERENCES_AND_TIMEZONE_MODAL)?this.platformSettings.hide_preferences_tab:this.platformSettings.allow_only_password_change)&&!this._session.isCurrentUserA(D.c.LEVEL_SUPERADMIN)&&(this.showPreferencesTab=!1)}_setHeaderTitle(){this._docLayoutService.header.showTitleBar({title:this.dictionary.titleBar,fullWidth:!0})}_checkSkillsTabVisibility(){var e;Object(Yt.a)([this._isSkillsToggleOn$.value?Object(Ei.a)(null===(e=D.c.getInstance().skills)||void 0===e?void 0:e.atLeastOneAIChannelIsVisible):Object(Ei.a)(void 0!==D.c.getInstance().objectives),this._isSkillsToggleOn$.value?this._myProfileSkillsService.hasPlatformAvailableSkills():Object(Ei.a)(!0),Object(Ei.a)(D.b.getInstance().settings.skills_third_party_enabled)]).pipe(Object(se.a)(1)).subscribe(([e,t,i])=>{var s,n,a;e&&!i&&(t||Boolean(null===(s=D.c.getInstance().skills)||void 0===s?void 0:s.userIsProfiled)||Boolean(null===(a=null===(n=D.c.getInstance().objectives)||void 0===n?void 0:n.areasOfImprovement)||void 0===a?void 0:a.length))&&(this.showSkillsTab$.next(!0),setTimeout(()=>{this._hasSkillsRouteParam&&this.activeTab$.next(this.tabs.skills.id)})),this.skillsEditMode$.next(t?$S.d.COMPLETE:$S.d.DELETE_ONLY)})}_isExternalEcommerceTabVisible(){return this._toggleService.isOn(u.f.TOGGLE_EXTERNAL_ECOMMERCE)&&D.c.getInstance().has_external_cart}_showLeavingDialog(e){this._docLayoutService.dialog.showCommonDialog({title:this.dictionary.leavingDialog.title,content:this.dictionary.leavingDialog.content,actions:[{id:"cancel",type:"neutral",label:this.dictionary.leavingDialog.actions.cancel,slot:"start"},{id:"discard-changes",type:"neutral",label:this.dictionary.leavingDialog.actions.discard,slot:"end"},{id:"save-changes",type:"positive",label:this.dictionary.leavingDialog.actions.save,slot:"end"}]}).subscribe(t=>{switch(t.actionID){case"cancel":e.next(!1),t.actionSuccess.next(!0);break;case"discard-changes":this._markFormsAsPristine(),this._discardChanges(),e.next(!0),t.actionSuccess.next(!0);break;case"save-changes":this.saveChanges().pipe(Object(VS.a)(1),Object(vt.a)(this._ngUnsubscribe$)).subscribe(i=>{e.next(i),t.actionSuccess.next(!0)},()=>{e.next(!1),t.actionSuccess.next(!0)})}})}_isPersonalInfoFormDirty(){return Object.keys(this.personalInfoComponent.personalInfoGroup.controls).some(e=>this.personalInfoComponent.personalInfoGroup.controls[e].dirty)||this.personalInfoComponent.additionalFields.some(e=>e.formControl.dirty)}_isPasswordFormDirty(){return Object.keys(this.changePasswordComponent.formComponent.passwordChangeFormGroup.controls).some(e=>this.changePasswordComponent.formComponent.passwordChangeFormGroup.controls[e].dirty)}_isPreferencesFragmentSet(){if(this._toggleService.isOn(u.f.TOGGLE_HIDE_MY_PROFILE_PREFERENCES_AND_TIMEZONE_MODAL)&&this.tabs.preferences.id===this._activatedRoute.snapshot.fragment){this.activeTab$.next(this.tabs.preferences.id);const e=this._router.createUrlTree([{}],{relativeTo:this._activatedRoute}).toString();this._location.replaceState(e)}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(j.a),c.ec(u.c),c.ec(YS.a),c.ec(u.g),c.ec(s.a),c.ec(WS),c.ec(u.h),c.ec(m.k),c.ec(s.h))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-my-profile"]],viewQuery:function(e,t){if(1&e&&(c.nd(kI,1),c.nd(TI,1),c.nd(II,1),c.nd(xI,1),c.nd(DI,1),c.nd(OI,1),c.nd(EI,1),c.nd(AI,1),c.nd(PI,1)),2&e){let e;c.Rc(e=c.tc())&&(t.uiTabsVerticalComponent=e.first),c.Rc(e=c.tc())&&(t.personalInfoComponent=e.first),c.Rc(e=c.tc())&&(t.conditionsOfUseComponent=e.first),c.Rc(e=c.tc())&&(t.preferencesComponent=e.first),c.Rc(e=c.tc())&&(t.changePasswordComponent=e.first),c.Rc(e=c.tc())&&(t.contentPartnersComponent=e.first),c.Rc(e=c.tc())&&(t.skillsComponent=e.first),c.Rc(e=c.tc())&&(t.authenticatorComponent=e.first),c.Rc(e=c.tc())&&(t.ecommerceComponent=e.first)}},hostAttrs:[1,"lrn-my-profile"],decls:1,vars:1,consts:[["class","launcher-details-tabs",3,"error-notification-visible",4,"ngIf"],[1,"launcher-details-tabs"],[3,"renderOnlyActiveContent","activeTab","menuLabel","navigationAriaLabel","changeTab"],["uiTabsVerticalComponent",""],[3,"error","tabName","title"],[4,"ngIf"],[3,"error","tabName","title",4,"ngIf"],["personalInfoComponent",""],["changePasswordComponent",""],["preferencesComponent",""],["authenticatorComponent",""],["color","accent","iconName","add-element",1,"add-affiliate-code-button",3,"label","trigger"],["contentPartnersComponent",""],[3,"privacyPolicyMustAccepted","termsAndConditionsMustAccepted",4,"ngIf"],[3,"privacyPolicyMustAccepted","termsAndConditionsMustAccepted"],["conditionsOfUseComponent",""],[3,"editMode",4,"ngIf"],[3,"editMode"],["skillsComponent",""],["externalEcommerceComponent",""]],template:function(e,t){1&e&&c.ed(0,WI,25,33,"div",0),2&e&&c.Dc("ngIf",t.translationServiceReady)},directives:[m.p,b.af,b.Me,b.Pe,b.Qe,b.Oe,b.Ne,uk,Dk,qk,pT,b.Le,b.U,kT,jT,yI,SI],pipes:[m.b,M.b],styles:["lrn-my-profile .launcher-details-tabs{margin:0 0 90px}lrn-my-profile .launcher-details-tabs.error-notification-visible{margin-top:0}lrn-my-profile .font-custom{font-weight:600;font-weight:var(--ui-typography-weight-semibold)}lrn-my-profile .title-text{font-size:1rem;font-size:var(--ui-typography-size-md)}lrn-my-profile .border{border-bottom:solid var(--ui-size-border-xs) var(--ui-color-border-neutral)}lrn-my-profile .container{display:flex}lrn-my-profile .direction{flex-direction:column}lrn-my-profile .detail-description{font-size:.75rem;font-size:var(--ui-typography-size-xs);line-height:1.25rem;line-height:var(--ui-typography-lineheight-sm)}lrn-my-profile .spinner-loading{padding:var(--ui-spacing-md) 0;display:flex;justify-content:center;align-items:center}lrn-my-profile .btn-select-img{padding-top:1rem;padding-top:var(--ui-spacing-sm)}lrn-my-profile .tab-footer{padding:var(--ui-spacing-md) 0}lrn-my-profile .details{margin:.75rem 0;margin:var(--ui-spacing-xs) 0}lrn-my-profile .add-affiliate-code-button{margin:0 var(--ui-spacing-xs)}@media (min-width:600px){lrn-my-profile .launcher-details-tabs{margin-top:2.5rem;margin-top:var(--ui-spacing-xl)}}doc-shared-dialog-body .space-notification-dialog{margin-botom:24px}doc-shared-dialog-body .not-checked{color:#cf000f;color:var(--ui-color-typography-error)}"],encapsulation:2}),e})();const KI=["newMyProfileComponent"],JI=function(){return["png","jpg","jpeg","gif"]},XI=function(e,t){return{size:"70",bg_color_class:"bg-blue",text_color_class:"text-white",icon_class:"zmdi zmdi-account",initials:e,uploadSuccess:t}},ZI=function(){return{category:"standard"}};function ex(e,t){if(1&e){const e=c.lc();c.kc(0,"div",2),c.kc(1,"div",3),c.kc(2,"div",4),c.kc(3,"single-upload",5),c.sc("uploaded",function(t){return c.Vc(e),c.wc().onUploaded(t)})("reset",function(t){return c.Vc(e),c.wc().onReset(t)})("failed",function(t){return c.Vc(e),c.wc().onFailedUpload(t)}),c.jc(),c.kc(4,"span",6),c.kc(5,"span",7),c.gd(6),c.jc(),c.kc(7,"span",8),c.kc(8,"div",9),c.kc(9,"span",10),c.gd(10),c.xc(11,"t"),c.jc(),c.gd(12),c.xc(13,"t"),c.jc(),c.kc(14,"div",11),c.kc(15,"span",10),c.gd(16),c.xc(17,"t"),c.jc(),c.gd(18),c.jc(),c.jc(),c.jc(),c.jc(),c.jc(),c.kc(19,"div",12),c.fc(20,"accordion",13),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(3),c.bd("avatar"),c.Dc("allowed_extensions",c.Hc(22,JI))("max_file_size",40)("collection","avatar")("avatarOptions",c.Jc(23,XI,e.initials,e.uploadSuccessCallback))("inputFormControl",e.myProfileAvatar.controls.avatar),c.Mb(3),c.hd(e.fullName),c.Mb(4),c.id("",c.zc(11,15,"_LEVEL",c.Hc(26,ZI)),":"),c.Mb(2),c.id(" ",c.yc(13,18,e.showLevel()),""),c.Mb(4),c.id("",c.yc(17,20,"_EMAIL"),":"),c.Mb(2),c.id(" ",e.eMail,""),c.Mb(2),c.Dc("type",e.accordionParams.type)("title",e.accordionParams.title)("panels",e.accordionParams.panels)}}function tx(e,t){1&e&&c.fc(0,"lrn-my-profile",null,14)}let ix=(()=>{class e{constructor(e,t,i,s,n,a){this.activatedRoute=e,this.backendService=t,this.router=i,this.docLayoutService=s,this.skillsUserService=n,this.toggleService=a,this.panels=[],this.uploadSuccessCallback=new _t.a,this.eSignatureSettings=E.b.getInstance().getPluginSettings("EsignatureApp"),this.isESignatureAppEnabled=this.eSignatureSettings&&this.eSignatureSettings.enabled,this.isAuthenticatorAppEnabled=!1,this.authenticatorAppPanel=!1,this.subscriptions=new ti.a,this.activatedRoute.params.forEach(e=>{this.user_details=e.user_details,this.password=e.password,this.preferences=e.preferences,this.improvementAreasParam=e.improvementAreas,this.authenticatorAppPanel=e.authenticatorApp}),this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:Ii.a.myProfile,href:this.router.url}]),this.myProfileAvatar=new Ze.h({avatar:new Ze.e("")}),this.isAuthenticatorAppEnabled=this.isESignatureAppEnabled&&this.eSignatureSettings.auth_types.filter(e=>"authenticatorapp"===e.type&&e.enabled).length}init(){let e=!1,t=!1,i=!1,s=E.b.getInstance().settings.request_mandatory_fields_completion&&o.a.getInstance().has_unfilled_fields;void 0!==this.preferences&&(i=!0),(void 0!==this.user_details||s)&&(e=!0),void 0!==this.password&&(t=!0),this.PlatformInstance=E.b.getInstance(),this.myProfilePanel={title:M.a.t("menu_course","_PROFILE"),description:M.a.t("userprofile","Change your profile information, email, and other personal details"),content:{params:{},component:rS},active:e,opened:e},this.myPolicyPanel={title:M.a.t("standard","Privacy Policy"),description:M.a.t("userprofile","Manage your Privacy Policy preferences"),content:{params:{},component:OS},active:!1,opened:!1},this.myTermsConditionsPanel={title:M.a.t("standard","Terms & Conditions"),description:M.a.t("userprofile","Manage your Terms & Conditions preferences"),content:{params:{},component:US},active:!1,opened:!1},this.myPasswordPanel={title:M.a.t("profile","_CHANGEPASSWORD"),description:M.a.t("userprofile","Change your password to access the LMS"),content:{params:{},component:SS},active:t,opened:t},this.myAuthenticatorApp={title:M.a.t("esignature","Authenticator App"),description:M.a.t("esignature","Use the Authenticator app to get free verification codes, even if your phone is offline. Available for Android and iOS."),content:{params:{},component:XC},balloonParams:{style:FC.a.MAIN,width:290,position:"np-top-left",title:M.a.t("esignature","Authenticator App"),text:M.a.t("esignature","Configure an authenticator app to verify your identity in order to complete Eletronic Signature courses")},active:this.authenticatorAppPanel,opened:this.authenticatorAppPanel},this.preferencesPanel={title:M.a.t("userprofile","Preferences"),description:M.a.t("userprofile","Set your language and timezone preferences"),content:{params:{},component:LS},active:i,opened:i},this.partnersPanel={title:M.a.t("standard","Content Partners Affiliation"),description:M.a.t("standard","Affiliate codes will grant you a discount when buying courses from partners"),content:{params:{},component:yS},active:i,opened:i},this.improvementAreas={title:M.a.t("standard","My Areas of Interest"),description:M.a.t("standard","Select at least one area of interest, and self evaluate yourself on it"),content:{params:{},component:fS},balloonParams:{style:FC.a.MAIN,width:296,position:"np-top-left",title:M.a.t("standard","My Areas of Interest"),text:M.a.t("standard","Use this section to identify your activities in the company and to define the areas where you would like improve your knowledge with fresh content coming from the web, prepared for you every day.")},active:Boolean(this.improvementAreasParam),opened:Boolean(this.improvementAreasParam)};this.PlatformInstance.settings.allow_only_password_change&&!s||this.panels.push(this.myProfilePanel),s&&!o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN)||o.a.getInstance().is_erp_admin||this.panels.push(this.myPasswordPanel),this.isAuthenticatorAppEnabled&&this.panels.push(this.myAuthenticatorApp),(!this.PlatformInstance.settings.allow_only_password_change&&!s||o.a.getInstance().isCurrentUserA(o.a.LEVEL_SUPERADMIN))&&this.panels.push(this.preferencesPanel),this.PlatformInstance.isPluginActive("ContentPartnersApp")&&this.panels.push(this.partnersPanel),0!=this.PlatformInstance.policy_id&&void 0!==this.PlatformInstance.policy_id&&this.panels.push(this.myPolicyPanel);const n=this.toggleService.isOn(u.f.TOGGLE_SKILLS_PHASE_1_1)?this.skillsUserService.userHasAvailableSkills():Object(Ei.a)(!0),a=Object(NC.a)([Object(Ei.a)(typeof o.a.getInstance().objectives),n,Object(Ei.a)(E.b.getInstance().settings.skills_third_party_enabled)]).subscribe(([e,t,i])=>{"undefined"!==e&&t&&!i&&this.panels.push(this.improvementAreas)});this.subscriptions.add(a),this.backendService.request("/manage/v1/termsandconditions/track","GET").subscribe(e=>{e.data.hasOwnProperty("tc")&&0!==this.PlatformInstance.tc_id&&void 0!==this.PlatformInstance.tc_id&&this.panels.push(this.myTermsConditionsPanel)}),this.accordionParams={type:"split",title:"",panels:this.panels}}setUserData(){this.sessionInstance=o.a.getInstance(),this.firstName=this.sessionInstance.firstname,this.lastName=this.sessionInstance.lastname,this.fullName=this.sessionInstance.getFullName(),this.eMail=this.sessionInstance.email,this.userLevel=this.sessionInstance.user_level.replace("_"," "),this.avatarUrl=this.sessionInstance.avatar_url,this.myProfileAvatar.controls.avatar.setValue(this.avatarUrl),this.initials=this.sessionInstance.user_initials}showLevel(){switch(this.sessionInstance.user_level){case"user":return M.a.t("standard","_USER");case"power_user":return M.a.t("standard","_PUBLIC_ADMIN_USER");case"super_admin":return M.a.t("standard","Super-admin users");default:return null}}ngOnInit(){this.activeToggleMyProfile=this.toggleService.isOn(u.f.TOGGLE_NEW_MY_PROFILE),this.activeToggleMyProfile||(this.init(),this.setUserData(),this.subscription=r.a.singleton.subscribe("UserSessionChange",e=>{let t=o.a.getInstance();this.fullName=t.getFullName(),this.initials=t.user_initials}))}onUploaded(e){this.backendService.changeUserInformation(this.myProfileAvatar.value,this.sessionInstance.id).subscribe(t=>{t.error||this.sessionInstance.setUserInfo({avatar:e.public_url})}),this.uploadSuccessCallback.next(!0)}onReset(e){this.backendService.changeUserInformation({avatar:""},this.sessionInstance.id).subscribe(e=>{e.error||this.sessionInstance.setUserInfo({avatar:""})})}onFailedUpload(e){this.uploadSuccessCallback.next(!1)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),this.subscriptions&&this.subscriptions.unsubscribe()}isFormDirty(){return!!this.activeToggleMyProfile&&this.newMyProfileComponent.isFormDirty()}saveChanges(){return this.activeToggleMyProfile?this.newMyProfileComponent.saveChanges():new je.a(!0)}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.a),c.ec(I.a),c.ec(s.h),c.ec(j.a),c.ec(zS.a),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["my-profile"]],viewQuery:function(e,t){if(1&e&&c.nd(KI,1),2&e){let e;c.Rc(e=c.tc())&&(t.newMyProfileComponent=e.first)}},decls:3,vars:2,consts:[["class","my-profile_wrapper",4,"ngIf","ngIfElse"],["newProfile",""],[1,"my-profile_wrapper"],[1,"my-profile__head","mdl-list","bg-white"],[1,"mdl-list__item","mdl-list__item--three-line"],[3,"allowed_extensions","max_file_size","collection","avatarOptions","inputFormControl","uploaded","reset","failed"],[1,"mdl-list__item-primary-content","myprofile-info"],[1,"name-field"],[1,"mdl-list__item-text-body","text-grey-light","form-labels"],[1,"user-role"],[1,"text-black"],[1,"user-email"],[1,"my-profile__body","mdl-list"],[3,"type","title","panels"],["newMyProfileComponent",""]],template:function(e,t){if(1&e&&(c.ed(0,ex,21,27,"div",0),c.ed(1,tx,2,0,"ng-template",null,1,c.fd)),2&e){const e=c.Sc(2);c.Dc("ngIf",!t.activeToggleMyProfile)("ngIfElse",e)}},directives:[m.p,ea.a,wn.a,QI],pipes:[M.b],styles:[".router-outlet:not(.direction-rtl):not(.heracles-root)   [_nghost-%COMP%]     single-upload{margin-right:30px}.router-outlet.direction-rtl:not(.heracles-root)   [_nghost-%COMP%]     single-upload{margin-left:30px}[_nghost-%COMP%]     single-upload .avatar{padding:0}[_nghost-%COMP%]     single-upload .avatar-clip{margin:0!important}"]}),e})(),sx=(()=>{class e{constructor(e){this._router=e,this.labels={title:M.a.t("simplesaml","Your logout was successful"),subtitle:M.a.t("simplesaml","You can now re-enter inside the LMS or close this window"),button:M.a.t("simplesaml","Re-login")},this.buttonProperties={text:this.labels.button,colorScheme:"positive-green",typeStyle:"filled"}}ngOnInit(){this.background=E.b.getInstance().branding_elements.background?E.b.getInstance().branding_elements.background:{color:!1,image:"/public/images/core/def_login_bg.jpg",video:{url:!1,fallback_img:!1}},this.backgroundImage=this.background.video.url&&this.background.video.fallback_img?this.background.video.fallback_img:this.background.image&&!this.background.color?this.background.image:this.background.image||this.background.color?"":"/public/images/core/def_login_bg.jpg"}goToLoginPage(){this._router.navigate(["/"])}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.h))},e.\u0275cmp=c.Yb({type:e,selectors:[["app-sso-logout"]],decls:14,vars:12,consts:[["internal-header","",1,"mdl-layout__header","mdl-layout__header--scroll","is-loaded"],["header",""],[1,"mdl-layout__content","minimal-login"],[1,"background"],[1,"logout-message","bg-grey-superlight"],[1,"text-bigger-icons"],[1,"text-small"],[3,"properties","click"],[1,"footer-guest","bg-white"]],template:function(e,t){1&e&&(c.fc(0,"header",0,1),c.kc(2,"main",2),c.kc(3,"div",3),c.kc(4,"div",4),c.kc(5,"div",5),c.gd(6),c.xc(7,"t"),c.jc(),c.kc(8,"div",6),c.gd(9),c.xc(10,"t"),c.jc(),c.kc(11,"div"),c.fc(12,"rectangular-button",7),c.jc(),c.jc(),c.jc(),c.jc(),c.fc(13,"doc-layout-footer",8)),2&e&&(c.Mb(3),c.dd("background-color",t.background.color)("background-image","url("+t.backgroundImage+")"),c.Mb(3),c.hd(c.yc(7,8,t.labels.title)),c.Mb(3),c.hd(c.yc(10,10,t.labels.subtitle)),c.Mb(3),c.Dc("properties",t.buttonProperties)("click",t.goToLoginPage.bind(t)))},directives:[ts.a],pipes:[M.b],styles:[""]}),e})();var nx=i("0JTz");function ax(e,t){if(1&e&&(c.ic(0),c.gd(1),c.xc(2,"t"),c.hc()),2&e){const e=c.wc();c.Mb(1),c.id(" ",c.yc(2,1,e.blankSlateParams.subtitle)," ")}}let ox=(()=>{class e{constructor(e,t){switch(this.backendService=e,this.secureLogoutService=t,this.logoUrl="/public/images/core/docebo_logo.png",this.blankSlateParams={isVisible:!0,type:Tl.a.SAD001,title:M.a.t("standard","You have been logged out"),subtitle:M.a.t("standard","You have been logged out because you accessed the platform from a more recent session")},this.rectangularButtonParams={properties:{text:M.a.t("standard","Go to Sign In Page"),colorScheme:"positive-green",typeStyle:"filled"},onClick:()=>{this.backendService.logoutRedirection()}},this.platform=E.b.getInstance(),this.srReadMessage=!1,this.secureLogoutReason=this.secureLogoutService.getCurrentSecureLogoutReason(),this.secureLogoutReason){case nx.a.ResetPassword:this.blankSlateParams.subtitle=M.a.t("standard","Since you have completed your password reset, you have been logged out for security reasons");break;case nx.a.ImpersonateUserDeactivated:this.blankSlateParams.subtitle=M.a.t("standard","You have been logged out because, during the impersonation session, your user or the user you were impersonating has been deactivated.");break;case nx.a.ImpersonateUserDeleted:this.blankSlateParams.subtitle=M.a.t("standard","You have been logged out because, during the impersonation session, your user or the user you were impersonating has been deleted.");break;case nx.a.ImpersonateUserLevelChanged:this.blankSlateParams.subtitle=M.a.t("standard","You have been logged out because, during the impersonation session, your user\u2019s level or the level of the user you were impersonating has been changed.");break;case nx.a.ImpersonateToggleDeactivated:case nx.a.AuditTrailAppDeactivated:case nx.a.NotificationAppDeactivated:case nx.a.ImpersonateRequirementDeactivated:this.blankSlateParams.subtitle=M.a.t("standard","You have been logged out because, during the impersonation session, one or more requirements have been removed.")}this.secureLogoutService.cleanSecureLogoutReason()}ngOnInit(){this.platform.branding_elements.logo_url&&this.platform.branding_elements.logo_url.length>0&&(this.logoUrl=this.platform.branding_elements.logo_url),setTimeout(()=>this.srReadMessage=!0,this.secureLogoutReason===nx.a.ResetPassword?6e3:1e3)}}return e.\u0275fac=function(t){return new(t||e)(c.ec(I.a),c.ec(hk.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["user-secure-logout"]],decls:7,vars:8,consts:[["role","alert","aria-live","polite","aria-atomic","true",1,"ui-visually-hidden"],[4,"ngIf"],["id","user-secure-logout",1,"bg-grey-superlight"],[1,"content-wrapper","bg-white"],["alt","logo",1,"secure-logout-logo",3,"src"],[1,"secure-logout-blankslate",3,"isVisible","type","title","subtitle"],[1,"secure-logout-button",3,"properties","click"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.ed(1,ax,3,3,"ng-container",1),c.jc(),c.kc(2,"section",2),c.kc(3,"div",3),c.fc(4,"img",4),c.fc(5,"blankslate",5),c.fc(6,"rectangular-button",6),c.jc(),c.jc()),2&e&&(c.Mb(1),c.Dc("ngIf",t.srReadMessage),c.Mb(3),c.Ec("src",t.logoUrl,c.Yc),c.Mb(1),c.Dc("isVisible",t.blankSlateParams.isVisible)("type",t.blankSlateParams.type)("title",t.blankSlateParams.title)("subtitle",t.blankSlateParams.subtitle),c.Mb(1),c.Dc("properties",t.rectangularButtonParams.properties)("click",t.rectangularButtonParams.onClick))},directives:[m.p,jc.a,ts.a],pipes:[M.b],styles:["user-secure-logout #user-secure-logout{position:absolute;top:0;left:0;width:100%;height:100%}user-secure-logout #user-secure-logout .content-wrapper{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:448px;padding:50px;box-sizing:border-box;text-align:center;box-shadow:0 1px 4px 0 rgba(0,0,0,.15)}user-secure-logout #user-secure-logout .secure-logout-logo{max-width:190px;max-height:35px;padding-bottom:24px}user-secure-logout #user-secure-logout .secure-logout-blankslate{padding:24px 0}user-secure-logout #user-secure-logout .button-rectangular{width:100%;margin:0}"],encapsulation:2}),e})();var rx=i("ZKH7"),cx=i("xLs9"),lx=i("AurG"),dx=i("He4l");let ux=(()=>{class e{constructor(e,t,i,s,n){this.store=e,this.actions=t,this.backendService=i,this.router=s,this.docLayoutService=n}ngOnInit(){this.reduxListener(),Object(rx.c)("/learn/mycourses")||this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:Ii.a.myCoursesAndLearningPlans,href:this.router.url}]),this.getPageHeader().then(e=>{const t=Object.assign(Object.assign({},cx.a),{title:e.titles,description:e.descriptions});this.store.dispatch(this.actions.loadPageData(t))},()=>{this.store.dispatch(this.actions.loadPageData(cx.a))})}ngOnDestroy(){this.reduxSubscriber&&this.reduxSubscriber.unsubscribe()}reduxListener(){}getPageHeader(){return this.backendService.request("/pages/v1/pages?search_text=my_courses","GET").toPromise().then(e=>{if(!e.data||!e.data.items)throw new Error("Cannot retrieve My Courses and Learning Plans page data");return e.data.items}).then(e=>{const t=e.find(e=>"my_courses"===e.code);if(!t)throw new Error("Cannot retrieve My Courses and Learning Plans page data");return{titles:t.names,descriptions:t.descriptions}})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(w.e),c.ec(lx.a),c.ec(I.a),c.ec(s.h),c.ec(j.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["mycourses-page"]],hostAttrs:["id","doc-page-my-courses"],decls:1,vars:0,template:function(e,t){1&e&&c.fc(0,"dynamic-widget-page")},directives:[dx.a],styles:[""],changeDetection:0}),e})();var hx=i("e0zn"),px=i("HsFC");let gx=(()=>{class e{constructor(e,t){this._backendService=e,this.router=t}resolve(e,t){const i=Object.assign({page_size:1,get_total_count:1,show_item_list:2,all_catalogs:1,virtual_catalogs:1},o.a.getInstance().isValid()&&{my_catalogs:1});return Object(px.a)(this._backendService,i,e.params.catalogId).pipe(Object(IT.a)(e=>(this.router.navigate(["/unauthorized"],fi.b),Object(Ei.a)({}))))}}return e.\u0275fac=function(t){return new(t||e)(c.oc(I.a),c.oc(s.h))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var mx=i("QmWI"),bx=i("paWX");function fx(e,t){if(1&e&&(c.kc(0,"div",1),c.kc(1,"div",2),c.kc(2,"div",3),c.kc(3,"div",4),c.kc(4,"div",5),c.fc(5,"h2",6),c.fc(6,"p",7),c.jc(),c.fc(7,"div",8),c.jc(),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(5),c.Dc("innerHTML",e.cookieTitle,c.Wc),c.Mb(1),c.Dc("innerHTML",e.cookieSubtitle,c.Wc),c.Mb(1),c.Dc("innerHTML",e.cookieContent,c.Wc)}}let _x=(()=>{class e{constructor(e,t,i){this.content=e,this.docLayoutService=t,this.router=i,this.isLoaded=!1,this.localizationPipe=new mx.a,this.cookiePolicyTextBuilder=()=>new Promise((e,t)=>{this.content.getInformation(1).pipe(Object(se.a)(1)).subscribe(t=>{this._cookieContent=t[bx.a.BODY],this._cookieTitle=t[bx.a.TITLE],this._cookieDescription=t[bx.a.SUBTITLE],e()},e=>{t()})}),this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:Ii.a.cookiePolicy,href:this.router.url}])}ngOnInit(){this.cookiePolicyTextBuilder().then(e=>{this.isLoaded=!0})}get cookieContent(){return this.localizationPipe.transform(this._cookieContent)}get cookieTitle(){return this.localizationPipe.transform(this._cookieTitle)}get cookieSubtitle(){return this.localizationPipe.transform(this._cookieDescription)}}return e.\u0275fac=function(t){return new(t||e)(c.ec(bx.b),c.ec(j.a),c.ec(s.h))},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[["class","mdl-wrapper",4,"ngIf"],[1,"mdl-wrapper"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--12-col"],[1,"cookie-policy","bg-white","wrapper-shadow","default-headings-styles","default-list-style"],[1,"cookie-policy_title"],[1,"title-section","bolded",3,"innerHTML"],[1,"text-grey-mid","bolded",3,"innerHTML"],[1,"cookie-policy_content",3,"innerHTML"]],template:function(e,t){1&e&&c.ed(0,fx,8,3,"div",0),2&e&&c.Dc("ngIf",t.isLoaded)},directives:[m.p],styles:[".cookie-policy[_ngcontent-%COMP%]{box-sizing:border-box;max-width:1153px;margin:40px auto;padding:50px;border-radius:2px;box-shadow:0 2px 8px 0 rgba(0,0,0,.15)}.cookie-policy_title[_ngcontent-%COMP%]{padding-bottom:30px}.cookie-policy_title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:32px}.cookie-policy_content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(:last-child){margin-bottom:15px}"]}),e})();var vx=i("e3q5");let yx=(()=>{class e{constructor(e,t){this.router=e,this.toggleService=t,this.sessionExists=new Promise(e=>{r.a.singleton.subscribe("UserSessionReady",()=>{e(!0)})})}ngOnInit(){if(!this.toggleService.isOn(vx.a.TOGGLE_COOKIE_POLICY)||!this.toggleService.isOn(vx.a.TOGGLE_COOKIE_POLICY_LEARNER)||this.toggleService.isOn(vx.a.TOGGLE_COOKIE_POLICY_RESTRICTIONS))return void this.router.navigate(["/not-found"],fi.b);const e=o.a.getInstance();e.isValid()&&e.username?this.router.navigate(["/learn/cookie-policy-private"],{skipLocationChange:!0}):e.isValid()?this.sessionExists.then(()=>{this.router.navigate(["/learn/cookie-policy-private"],{skipLocationChange:!0})}):this.router.navigate(["/learn/cookie-policy-public"],{skipLocationChange:!0})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.h),c.ec(Sc.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();function wx(e){return`docebo_zoomus_pairing_${e}`}const Cx=M.a.t("standard","None"),Sx=M.a.t("webinar","Paired"),kx=(e,t,i)=>{window.open(`https://zoom.us/oauth/authorize?response_type=code&client_id=${i}&redirect_uri=${e}?id=${t}`,"_blank")};let Tx=(()=>{class e{constructor(e,t){this.route=e,this.backendService=t}ngOnInit(){this.code=this.route.snapshot.queryParamMap.get("code"),this.id=this.route.snapshot.queryParamMap.get("id")||"",this.backendService.request(`/learn/v1/webinar/accounts/${this.id}/pair`,"POST",{code:this.code}).pipe(Object(se.a)(1)).subscribe(()=>{window.close(),window.localStorage.setItem(wx(this.id),"success")},()=>{window.close(),window.localStorage.setItem(wx(this.id),"fail")})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.a),c.ec(I.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["zoomus-pairing"]],decls:1,vars:0,template:function(e,t){1&e&&c.fc(0,"widget-spinner")},directives:[$C.a],styles:["zoomus-pairing widget-spinner{position:absolute;top:250px;left:50%}"],encapsulation:2,changeDetection:0}),e})(),Ix=(()=>{class e{constructor(e){this.router=e,this.platform=E.b.getInstance()}canActivate(e,t){return!!this.platform.isPluginActive("ZoomV2App")||(this.router.navigate(["/unauthorized"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(c.oc(s.h))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var xx=function(e){return e.AccountSuccessfullyCreated="[Zoomus] Account Successfully Created",e.AccountSuccessfullyEdited="[Zoomus] Account Successfully Edited",e.AccountSuccessfullyPaired="[Zoomus] Account Successfully Paired",e.AccountSuccessfullyDeleted="[Zoomus] Account Successfully Deleted",e.PairingAccountRequested="[Zoomus] Pairing Account Requested",e.PairingAccountAcquired="[Zoomus] Pairing Account Acquired",e.PairingAccountCompleted="[Zoomus] Pairing Account Completed",e.PairingAccountAborted="[Zoomus] Pairing Account Aborted",e}({});class Dx{constructor(e){this.payload=e,this.type=xx.AccountSuccessfullyCreated}}class Ox{constructor(e){this.payload=e,this.type=xx.AccountSuccessfullyEdited}}class Ex{constructor(e){this.payload=e,this.type=xx.PairingAccountRequested}}class Ax{constructor(e){this.payload=e,this.type=xx.PairingAccountAcquired}}class Px{constructor(){this.type=xx.PairingAccountCompleted}}class Mx{constructor(){this.type=xx.PairingAccountAborted}}class Lx{constructor(e){this.payload=e,this.type=xx.AccountSuccessfullyDeleted}}let jx=(()=>{class e{constructor(e){this.backendService=e}createAccount(e){const t=this.buildPayload(e);return this.backendService.request("/learn/v1/webinar/accounts","POST",t)}editAccount(e){const t=this.buildPayload(e);return this.backendService.request(`/learn/v1/webinar/accounts/${e.get("id").value}`,"PUT",t)}fetchAccounts(e){const t=Object.assign(Object.assign({},e),{providers:["zoomv2meeting","zoomv2webinar"]});return this.backendService.request("/learn/v1/webinar/accounts","GET",t)}unpairAccount(e){return this.backendService.request(`/learn/v1/webinar/accounts/${e}/pair`,"DELETE")}deleteAccount(e){return this.backendService.request(`/learn/v1/webinar/accounts/${e}`,"DELETE")}buildPayload(e){const t="meeting"===e.get("sessionType").value?"zoomv2meeting":"zoomv2webinar";return{name:e.get("accountName").value,tool:t,additional_info:e.get("accountDescription").value,app_key:e.get("clientId").value,app_secret:e.get("clientSecret").value,session_type:t,max_sessions:0|e.get("sessionLimitAccount").value,max_sessions_per_course:0|e.get("sessionLimitCourses").value,max_concurrent_sessions:0|e.get("sessionLimitConcurrentRooms").value}}}return e.\u0275fac=function(t){return new(t||e)(c.oc(I.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();function Rx(e,t){if(1&e&&(c.kc(0,"div",17),c.fc(1,"textfield",8),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitCoursesTextField.type)("id",e.sessionLimitCoursesTextField.id)("floating_label",e.sessionLimitCoursesTextField.floating_label)("label",e.sessionLimitCoursesTextField.label)("max_length",e.sessionLimitCoursesTextField.max_length)("inputFormControl",e.sessionLimitCoursesTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}function Fx(e,t){if(1&e&&(c.kc(0,"div",17),c.fc(1,"textfield",8),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitAccountTextField.type)("id",e.sessionLimitAccountTextField.id)("floating_label",e.sessionLimitAccountTextField.floating_label)("label",e.sessionLimitAccountTextField.label)("max_length",e.sessionLimitAccountTextField.max_length)("inputFormControl",e.sessionLimitAccountTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}function Nx(e,t){if(1&e&&(c.kc(0,"div",17),c.fc(1,"textfield",8),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitConcurrentRoomsTextField.type)("id",e.sessionLimitConcurrentRoomsTextField.id)("floating_label",e.sessionLimitConcurrentRoomsTextField.floating_label)("label",e.sessionLimitConcurrentRoomsTextField.label)("max_length",e.sessionLimitConcurrentRoomsTextField.max_length)("inputFormControl",e.sessionLimitConcurrentRoomsTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}const Ux=function(){return{category:"standard"}},zx=function(){return{category:"webinar"}},qx=function(){return{category:"admin"}};let Vx=(()=>{class e{constructor(e){this.cdr=e,this.isEditMode=!1}ngOnInit(){this.setFormFieldsParams()}ngAfterViewInit(){this.formGroup.valueChanges.subscribe(()=>{this.cdr.detectChanges()})}checkForChanges(){this.cdr.markForCheck()}setFormFieldsParams(){this.accountName={type:et.a.TEXT,id:"account-name",floating_label:!0,label:M.a.t("webinar","Account Name"),max_length:50,show_counter:!0,inputFormControl:this.formGroup.controls.accountName},this.accountDescription={type:et.a.TEXT,id:"account-description",floating_label:!0,label:M.a.t("app7020","Description"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.accountDescription},this.clientId={type:et.a.TEXT,id:"client-id",floating_label:!0,label:M.a.t("slack","Client ID"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.clientId},this.clientSecret={type:et.a.TEXT,id:"client-secret",floating_label:!0,label:M.a.t("app","Client Secret"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.clientSecret},this.sessionType={id:"session-type",label:M.a.t("webinar","Session type"),inputFormControl:this.formGroup.get("sessionType"),name:"session-type"},this.sessionType.webinar={id:"session-type-webinar",floating_label:!0,label:M.a.t("webinar","Webinar")},this.sessionType.meeting={id:"session-type-meeting",floating_label:!0,label:M.a.t("conference","Meeting")},this.sessionLimitCoursesTextField={type:et.a.NUMBER,id:"session-limit-courses",floating_label:!0,label:M.a.t("configuration","Max rooms per course"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitCourses")},this.sessionLimitAccountTextField={type:et.a.NUMBER,id:"session-limit-accounts",floating_label:!0,label:M.a.t("webinar","Max sessions for this account"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitAccount")},this.sessionLimitConcurrentRoomsTextField={type:et.a.NUMBER,id:"session-limit-concurrents",floating_label:!0,label:M.a.t("configuration","Max concurrent rooms"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitConcurrentRooms")};const e=!!this.formGroup.get("sessionLimitCourses").value;this.sessionLimitCoursesCheckbox={label:M.a.t("webinar","Set session limits for courses"),inputFormControl:new Ze.e(e),checked:e},this.sessionLimitCoursesCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitCoursesCheckbox").setValue(e)});const t=!!this.formGroup.get("sessionLimitAccount").value;this.sessionLimitAccountCheckbox={label:M.a.t("webinar","Set session limits per accounts"),inputFormControl:new Ze.e(t),checked:t},this.sessionLimitAccountCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitAccountCheckbox").setValue(e)});const i=!!this.formGroup.get("sessionLimitConcurrentRooms").value;this.sessionLimitConcurrentRoomsCheckbox={label:M.a.t("webinar","Set session for concurrent rooms"),inputFormControl:new Ze.e(i),checked:i},this.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitConcurrentRoomsCheckbox").setValue(e)})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["zoomus-account-panel-ui"]],inputs:{formGroup:"formGroup",isEditMode:"isEditMode",oauthRedirectUri:"oauthRedirectUri",oauthRedirectUriTranslatable:"oauthRedirectUriTranslatable"},decls:53,vars:76,consts:[[1,"zoomus-create-account"],[1,"zoomus-account-redirect-info"],[1,"zmdi","zmdi-info","zmdi-hc-2x","text-main"],[1,"border-top-wrapper",3,"formGroup"],[1,"zoomus-account-info-container"],[1,"details-container"],[1,"bold-subtitle"],[1,"zoomus-account-text-field-margin"],[3,"type","id","floating_label","label","max_length","inputFormControl","showRequiredFieldIndicator"],[1,"zoomus-account-text-field-margin-no-bottom"],[1,"border-top-wrapper","zoomus-account-info-container"],[1,"bold-subtitle","options-subtitle"],[3,"label","value","name","enabled","inputFormControl"],[1,"text-grey-mid","hint","options-label"],[1,"options-container"],[3,"inputFormControl","checked","label"],["class","zoomus-account-margin-huge",4,"ngIf"],[1,"zoomus-account-margin-huge"]],template:function(e,t){1&e&&(c.kc(0,"section",0),c.kc(1,"div"),c.kc(2,"div",1),c.fc(3,"i",2),c.kc(4,"span"),c.gd(5),c.xc(6,"t"),c.fc(7,"br"),c.gd(8),c.jc(),c.jc(),c.jc(),c.kc(9,"form",3),c.kc(10,"div",4),c.kc(11,"div",5),c.kc(12,"div",6),c.gd(13),c.xc(14,"t"),c.jc(),c.kc(15,"div",7),c.fc(16,"textfield",8),c.jc(),c.kc(17,"div",7),c.fc(18,"textfield",8),c.jc(),c.kc(19,"div",7),c.fc(20,"textfield",8),c.jc(),c.kc(21,"div",9),c.fc(22,"textfield",8),c.jc(),c.jc(),c.jc(),c.kc(23,"div",10),c.kc(24,"div",5),c.kc(25,"div",11),c.gd(26),c.xc(27,"t"),c.jc(),c.kc(28,"div"),c.fc(29,"radio",12),c.jc(),c.kc(30,"div"),c.fc(31,"radio",12),c.fc(32,"div",13),c.jc(),c.jc(),c.jc(),c.kc(33,"div",10),c.kc(34,"div",5),c.kc(35,"div",11),c.gd(36),c.xc(37,"t"),c.jc(),c.kc(38,"div",14),c.kc(39,"div"),c.fc(40,"checkbox",15),c.jc(),c.ed(41,Rx,2,7,"div",16),c.xc(42,"async"),c.jc(),c.kc(43,"div",14),c.kc(44,"div"),c.fc(45,"checkbox",15),c.jc(),c.ed(46,Fx,2,7,"div",16),c.xc(47,"async"),c.jc(),c.kc(48,"div",14),c.kc(49,"div"),c.fc(50,"checkbox",15),c.jc(),c.ed(51,Nx,2,7,"div",16),c.xc(52,"async"),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(5),c.id(" ",c.yc(6,56,t.oauthRedirectUriTranslatable),""),c.Mb(3),c.id(" ",t.oauthRedirectUri," "),c.Mb(1),c.Dc("formGroup",t.formGroup),c.Mb(4),c.id(" ",c.zc(14,58,"General Information",c.Hc(73,Ux))," "),c.Mb(3),c.Dc("type",t.accountName.type)("id",t.accountName.id)("floating_label",t.accountName.floating_label)("label",t.accountName.label)("max_length",t.accountName.max_length)("inputFormControl",t.accountName.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.accountDescription.type)("id",t.accountDescription.id)("floating_label",t.accountDescription.floating_label)("label",t.accountDescription.label)("max_length",t.accountDescription.max_length)("inputFormControl",t.accountDescription.inputFormControl)("showRequiredFieldIndicator",!1),c.Mb(2),c.Dc("type",t.clientId.type)("id",t.clientId.id)("floating_label",t.clientId.floating_label)("label",t.clientId.label)("max_length",t.clientId.max_length)("inputFormControl",t.clientId.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.clientSecret.type)("id",t.clientSecret.id)("floating_label",t.clientSecret.floating_label)("label",t.clientSecret.label)("max_length",t.clientSecret.max_length)("inputFormControl",t.clientSecret.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(4),c.id(" ",c.zc(27,61,"Session type",c.Hc(74,zx))," "),c.Mb(3),c.Dc("label",t.sessionType.meeting.label)("value","meeting")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(2),c.Dc("label",t.sessionType.webinar.label)("value","webinar")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(5),c.id(" ",c.zc(37,64,"Options",c.Hc(75,qx))," "),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitCoursesCheckbox.inputFormControl)("checked",t.sessionLimitCoursesCheckbox.checked)("label",t.sessionLimitCoursesCheckbox.label),c.Mb(1),c.Dc("ngIf",c.yc(42,67,t.sessionLimitCoursesCheckbox.inputFormControl.valueChanges)||t.sessionLimitCoursesTextField.inputFormControl.value>0&&t.sessionLimitCoursesCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitAccountCheckbox.inputFormControl)("checked",t.sessionLimitAccountCheckbox.checked)("label",t.sessionLimitAccountCheckbox.label),c.Mb(1),c.Dc("ngIf",c.yc(47,69,t.sessionLimitAccountCheckbox.inputFormControl.valueChanges)||t.sessionLimitAccountTextField.inputFormControl.value>0&&t.sessionLimitAccountCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitConcurrentRoomsCheckbox.inputFormControl)("checked",t.sessionLimitConcurrentRoomsCheckbox.checked)("label",t.sessionLimitConcurrentRoomsCheckbox.label),c.Mb(1),c.Dc("ngIf",c.yc(52,71,t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges)||t.sessionLimitConcurrentRoomsTextField.inputFormControl.value>0&&t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.value||!1))},directives:[Ze.y,Ze.p,Ze.i,Ct.a,Zn.a,ih.a,m.p],pipes:[M.b,m.b],styles:[".color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}zoomus-account-panel-ui .bold-subtitle{padding-bottom:6px;font-weight:600;font-size:14px;line-height:18px}zoomus-account-panel-ui .border-top-wrapper{border-top:1px solid var(--ui-color-badge-background-light)}zoomus-account-panel-ui .details-container{padding:24px 0}zoomus-account-panel-ui .options-subtitle{margin-bottom:16px}zoomus-account-panel-ui .options-label{padding-left:24px}zoomus-account-panel-ui .docebo-radio{margin-bottom:0}zoomus-account-panel-ui .zoomus-account-limit-list{padding:24px}zoomus-account-panel-ui .zoomus-account-redirect-info{display:flex;align-items:center;padding:1rem 1.5rem;padding:var(--hyd-spacing-sm) var(--hyd-spacing-md)}.router-outlet:not(.direction-rtl):not(.heracles-root) zoomus-account-panel-ui .zoomus-account-redirect-info span{margin-left:29px}.router-outlet.direction-rtl:not(.heracles-root) zoomus-account-panel-ui .zoomus-account-redirect-info span{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) zoomus-account-panel-ui .zoomus-account-redirect-info span{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) zoomus-account-panel-ui .zoomus-account-redirect-info span{margin-right:29px}.router-outlet:not(.direction-rtl):not(.heracles-root) zoomus-account-panel-ui .zoomus-account-margin{margin-left:12px}.router-outlet.direction-rtl:not(.heracles-root) zoomus-account-panel-ui .zoomus-account-margin{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) zoomus-account-panel-ui .zoomus-account-margin{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) zoomus-account-panel-ui .zoomus-account-margin{margin-right:12px}.router-outlet:not(.direction-rtl):not(.heracles-root) zoomus-account-panel-ui .zoomus-account-margin-huge{margin-left:26px}.router-outlet.direction-rtl:not(.heracles-root) zoomus-account-panel-ui .zoomus-account-margin-huge{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) zoomus-account-panel-ui .zoomus-account-margin-huge{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) zoomus-account-panel-ui .zoomus-account-margin-huge{margin-right:26px}zoomus-account-panel-ui .zoomus-account-info-container{padding:0 1.5rem;padding:0 var(--hyd-spacing-md);box-sizing:border-box}zoomus-account-panel-ui .zoomus-account-text-field-margin{margin:16px 0 24px}zoomus-account-panel-ui .zoomus-account-text-field-margin-no-bottom{margin:16px 0 0}"],encapsulation:2,changeDetection:0}),e})();const Bx=["uiComponent"];let Gx=(()=>{class e extends vc.a{constructor(t,i,s,n){super(),this.pageService=t,this.zoomService=i,this.zoomusStore=s,this.translationService=n,this.isEditMode=!1,this.notMoreThan=(e,t)=>i=>i.value>e?{notMoreThan:this.translationService.instant("Max limit is {max} {things}",{category:"standard",max:e,things:t})}:null,this.baseRedirectUri=e.createBaseRedirectUri(),this.oauthRedirectUriTranslatable=M.a.t("webinar","Zoom Oauth redirect URL:")}static createBaseRedirectUri(){return`${E.b.getInstance().getFullLmsCustomUrl()}/learn/zoomus`}ngOnInit(){this.rightPanel=this.pageService.rightPanel,this.setFormGroup()}ngAfterViewInit(){this.setPanelActions()}ngOnDestroy(){super.ngOnDestroy(),this.rightPanel.buttonsEnabled()}setPanelActions(){const e=[],t=M.a.t("standard",this.isEditMode?"Confirm":"Create");e.push({type:"normal",properties:{text:t},customClasses:"float-ltr-right-clear-none",handler:()=>{this.checkCustomFormValidations(),this.form.get("clientId").errors||this.form.get("clientId").setErrors(null),this.form.valid?(this.cleanFormValues(this.form),this.isEditMode?this.editAccount():this.createAccount()):(Object(Cy.l)(this.form),this.form.setValue(this.form.value))}}),e.push({type:"cancel",properties:{text:M.a.t("standard","Cancel")},customClasses:"float-ltr-right-clear-none",handler:e=>{e.close()}}),this.rightPanel.setActions(e)}createAccount(){this.rightPanel.buttonsDisabled(),this.zoomService.createAccount(this.form).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{this.accountName=e.data.name,this.accountId=e.data.id;const t={id:e.data.id,name:this.accountName,description:e.data.additional_info,createdAt:P_()().toDate(),clientId:e.data.app_key,clientSecret:e.data.app_secret,sessionType:e.session_type,accessTokenStatus:Cx,sessionLimitCourses:0|this.form.get("sessionLimitCourses").value,sessionLimitAccount:0|this.form.get("sessionLimitAccount").value,sessionLimitConcurrentRooms:0|this.form.get("sessionLimitConcurrentRooms").value};this.zoomusStore.dispatch(new Dx(t)),this.rightPanel.close(),kx(this.baseRedirectUri,e.data.id,this.form.get("clientId").value)},this.accountUpsertErrorCallback())}editAccount(){this.rightPanel.buttonsDisabled(),this.zoomService.editAccount(this.form).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{var t=this.accountName;this.accountName=e.data.name;const i={id:e.data.id,name:t,description:e.data.additional_info,createdAt:P_()().toDate(),clientId:e.data.app_key,clientSecret:e.data.app_secret,accessTokenStatus:Cx};this.zoomService.unpairAccount(e.data.id).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(()=>{kx(this.baseRedirectUri,e.data.id,this.form.get("clientId").value),this.zoomusStore.dispatch(new Ox(i)),this.rightPanel.close()})},this.accountUpsertErrorCallback())}accountUpsertErrorCallback(){return e=>{1002===e.code&&(Object(Cy.l)(this.form),this.form.get("clientId").setErrors({notUnique:M.a.t("webinar","Multiple accounts cannot use the same Client ID")}),Object(Cy.l)(this.form),this.uiComponent.checkForChanges(),this.rightPanel.buttonsEnabled())}}cleanFormValues(e){e.get("sessionLimitCoursesCheckbox").value||e.get("sessionLimitCourses").setValue(0),e.get("sessionLimitAccountCheckbox").value||e.get("sessionLimitAccount").setValue(0),e.get("sessionLimitConcurrentRoomsCheckbox").value||e.get("sessionLimitConcurrentRooms").setValue(0)}setFormGroup(){this.form=new Ze.h({id:new Ze.e(this.accountId),accountName:new Ze.e(this.accountName),accountDescription:new Ze.e(this.accountDescription),clientId:new Ze.e(this.clientId),clientSecret:new Ze.e(this.clientSecret),sessionType:new Ze.e(this.sessionType),sessionLimitCourses:new Ze.e(this.sessionLimitCourses),sessionLimitCoursesCheckbox:new Ze.e(!!this.sessionLimitCourses),sessionLimitAccount:new Ze.e(this.sessionLimitAccount),sessionLimitAccountCheckbox:new Ze.e(!!this.sessionLimitAccount),sessionLimitConcurrentRooms:new Ze.e(this.sessionLimitConcurrentRooms),sessionLimitConcurrentRoomsCheckbox:new Ze.e(!!this.sessionLimitConcurrentRooms)}),this.checkCustomFormValidations()}checkCustomFormValidations(){this.form.get("accountName").setValidators([Ze.x.required,e=>"string"==typeof e.value&&e.value.match("^\\s+$")?{notHaveOnlyBlankCharacters:"This field cannot contains only empty spaces"}:null,Ze.x.maxLength(255)]),this.form.get("accountDescription").setValidators([Ze.x.maxLength(255)]),this.form.get("clientId").setValidators([Ze.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ze.x.maxLength(255)]),this.form.get("clientSecret").setValidators([Ze.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ze.x.maxLength(255)]),this.form.get("sessionType").setValidators([Ze.x.required]),this.form.get("sessionLimitCourses").setValidators([this.notMoreThan(999,"sessions")]),this.form.get("sessionLimitAccount").setValidators([this.notMoreThan(999,"sessions")]),this.form.get("sessionLimitConcurrentRooms").setValidators([this.notMoreThan(999,"rooms")]),this.form.get("accountName").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("clientId").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("clientSecret").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(P.a),c.ec(jx),c.ec(w.e),c.ec(rn.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["zoomus-account-panel-container"]],viewQuery:function(e,t){if(1&e&&c.nd(Bx,1),2&e){let e;c.Rc(e=c.tc())&&(t.uiComponent=e.first)}},inputs:{isEditMode:"isEditMode",accountId:"accountId",accountName:"accountName",accountDescription:"accountDescription",clientId:"clientId",clientSecret:"clientSecret",sessionType:"sessionType",sessionLimitCourses:"sessionLimitCourses",sessionLimitAccount:"sessionLimitAccount",sessionLimitConcurrentRooms:"sessionLimitConcurrentRooms"},features:[c.Lb([jx]),c.Jb],decls:2,vars:3,consts:[[3,"formGroup","oauthRedirectUri","oauthRedirectUriTranslatable"],["uiComponent",""]],template:function(e,t){1&e&&c.fc(0,"zoomus-account-panel-ui",0,1),2&e&&c.Dc("formGroup",t.form)("oauthRedirectUri",t.baseRedirectUri)("oauthRedirectUriTranslatable",t.oauthRedirectUriTranslatable)},directives:[Vx,Ze.p,Ze.i],styles:["zoomus-account-panel-ui{height:100%;overflow-y:auto;overflow-x:hidden;display:block}"],encapsulation:2,changeDetection:0}),e})();var Hx=i("BPI6");const $x={isVisible:!0,type:Tl.a.BLANK001,title:M.a.t("webinar","No Zoom Accounts Found"),subtitle:M.a.t("webinar","Click the Add button in the top right corner to add a new Zoom account!")},Yx={isVisible:!0,type:Tl.a.EMPTY001,title:M.a.t("standard","Whoops, No results found!"),subtitle:M.a.t("myteam","Please try again using different search/filters criteria.")},Wx={mode:Me.a.push,viewOptionLabel:M.a.t("standard","SORT BY"),filters:new je.a([{title:M.a.t("standard","Search"),code:"search",type:Me.d.free_search_filter,params:{placeholder:M.a.t("standard","Search...")}}]),appliedFiltersNumber:new je.a(null),displayedItemsNumber:new je.a(null),viewOptions:new je.a(null),disableViewOptions:!1,elementLabels:{singular:M.a.t("standard","items"),plural:M.a.t("standard","items")}},Qx={columnName:"createdAt",dir:Hx.a.DESC},Kx={name:{headerLabel:M.a.t("webinar","Account Name"),fieldName:"name",columnName:"name",sortable:!0},description:{headerLabel:M.a.t("app7020","Description"),fieldName:"description",columnName:"description",sortable:!1},createdAt:{headerLabel:M.a.t("standard","Creation Date"),fieldName:"createdAt",columnName:"createdAt",sortable:!0,type:"date",format:"MM/DD/YYYY"},accessTokenStatus:{headerLabel:M.a.t("webinar","Access token"),fieldName:"accessTokenStatus",columnName:"accessTokenStatus",sortable:!1},ellipsis:{}};function Jx(e,t){if(1&e&&(c.gd(0),c.xc(1,"t")),2&e){const e=c.wc(3);c.hd(c.yc(1,1,e.tableColumns.createdAt.headerLabel))}}function Xx(e,t){1&e&&(c.gd(0),c.xc(1,"HDateTime")),2&e&&c.id(" ",c.Ac(1,1,t.item.createdAt,null,"lll")," ")}function Zx(e,t){if(1&e){const e=c.lc();c.kc(0,"hyd-table",6),c.sc("sort",function(t){return c.Vc(e),c.wc(2).onTableSort(t)}),c.fc(1,"hyd-table-column-text",7),c.fc(2,"hyd-table-column-text",7),c.kc(3,"hyd-table-column",8),c.kc(4,"hyd-table-column-header"),c.ed(5,Jx,2,3,"ng-template"),c.jc(),c.kc(6,"hyd-table-column-cell"),c.ed(7,Xx,2,5,"ng-template"),c.jc(),c.jc(),c.fc(8,"hyd-table-column-text",7),c.fc(9,"hyd-table-column-ellipsis",9),c.jc()}if(2&e){const e=c.wc(2);c.Dc("data",e.tableData)("sorting",e.tableDefaultSorting),c.Mb(1),c.Dc("headerLabel",e.tableColumns.name.headerLabel)("fieldName",e.tableColumns.name.fieldName)("columnName",e.tableColumns.name.columnName)("sortable",e.tableColumns.name.sortable),c.Mb(1),c.Dc("headerLabel",e.tableColumns.description.headerLabel)("fieldName",e.tableColumns.description.fieldName)("columnName",e.tableColumns.description.columnName)("sortable",e.tableColumns.description.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.createdAt.columnName)("sortable",e.tableColumns.createdAt.sortable),c.Mb(5),c.Dc("headerLabel",e.tableColumns.accessTokenStatus.headerLabel)("fieldName",e.tableColumns.accessTokenStatus.fieldName)("columnName",e.tableColumns.accessTokenStatus.columnName)("sortable",e.tableColumns.accessTokenStatus.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.ellipsis.columnName)("actions",e.tableColumns.ellipsis.actions)("orientation",e.tableColumns.ellipsis.orientation)}}function eD(e,t){if(1&e){const e=c.lc();c.kc(0,"hyd-paginator",10),c.sc("pageChange",function(t){return c.Vc(e),c.wc(2).onTablePageChange(t)}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("pageIndex",e.tablePaginator.pageIndex)("pageSize",e.tablePaginator.pageSize)("length",e.tablePaginator.length)("pageSizeAutoAllowed",e.tablePaginator.pageSizeAutoAllowed)}}function tD(e,t){if(1&e&&c.fc(0,"blankslate",11),2&e){const e=c.wc(2);c.Dc("ngClass","blankslate-container")("isVisible",e.blankslateWithFilters.isVisible)("type",e.blankslateWithFilters.type)("title",e.blankslateWithFilters.title)("subtitle",e.blankslateWithFilters.subtitle)}}function iD(e,t){if(1&e){const e=c.lc();c.kc(0,"data-browser",2),c.sc("onFiltersUpdate",function(t){return c.Vc(e),c.wc().onDataBrowserFiltersUpdate(t)}),c.ed(1,Zx,10,19,"hyd-table",3),c.ed(2,eD,1,4,"hyd-paginator",4),c.ed(3,tD,1,5,"blankslate",5),c.jc()}if(2&e){const e=c.wc();c.Dc("dataBrowserSource",e.dataBrowserSource),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("ngIf",e.showBlankslateWithFilters())}}function sD(e,t){if(1&e&&(c.kc(0,"blankslate",12),c.gd(1," >\n"),c.jc()),2&e){const e=c.wc();c.Dc("isVisible",e.blankslateWithoutFilters.isVisible)("type",e.blankslateWithoutFilters.type)("title",e.blankslateWithoutFilters.title)("subtitle",e.blankslateWithoutFilters.subtitle)}}let nD=(()=>{class e{constructor(e){this.cdr=e,this.filtersUpdate=new c.q,this.tableSort=new c.q,this.tablePageChange=new c.q,this.openDeleteDialog=new c.q,this.beginPairing=new c.q,this.editAccount=new c.q,this.blankslateWithoutFilters=$x,this.blankslateWithFilters=Yx,this.dataBrowserSource=Wx,this.tableDefaultSorting=Qx,this.tableColumns=Kx,this.setTableEllipsisColumn()}showBlankslateWithoutFilters(){return!this.showLoader&&0===this.tableData.length&&""===this.searchFilterValue}showBlankslateWithFilters(){return!this.showLoader&&0===this.tableData.length&&""!==this.searchFilterValue}showDataBrowser(){return this.tableData.length>0||""!==this.searchFilterValue}showTable(){return!this.showLoader&&this.tableData.length>0}onDataBrowserFiltersUpdate(e){this.filtersUpdate.emit(e)}onTableSort(e){this.tableSort.emit(e)}onTablePageChange(e){this.tablePageChange.emit(e)}checkForChanges(){this.cdr.markForCheck()}setTableEllipsisColumn(){this.tableColumns.ellipsis={columnName:"ellipsis",columnWidth:"100px",alignment:Le.a.CENTER,ellipsed:!1,orientation:"bottom-right",actions:[{id:"pair",title:M.a.t("standard","Pair"),params:null,active:!1,action:e=>{this.beginPairing.emit(e)}},{id:"edit",title:M.a.t("app7020","Edit"),params:null,active:!1,action:e=>{this.editAccount.emit(e)}},{id:"delete",title:M.a.t("standard","Delete"),params:null,active:!1,action:e=>{this.openDeleteDialog.emit(e)}}]}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["zoomus-account-list"]],inputs:{tableData:"tableData",searchFilterValue:"searchFilterValue",showLoader:"showLoader",tablePaginator:"tablePaginator"},outputs:{filtersUpdate:"filtersUpdate",tableSort:"tableSort",tablePageChange:"tablePageChange",openDeleteDialog:"openDeleteDialog",beginPairing:"beginPairing",editAccount:"editAccount"},decls:2,vars:2,consts:[["class","data-browser-zoomus",3,"dataBrowserSource","onFiltersUpdate",4,"ngIf"],["class","blankslate-container",3,"isVisible","type","title","subtitle",4,"ngIf"],[1,"data-browser-zoomus",3,"dataBrowserSource","onFiltersUpdate"],["class","hyd-table",3,"data","sorting","sort",4,"ngIf"],["class","hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange",4,"ngIf"],[3,"ngClass","isVisible","type","title","subtitle",4,"ngIf"],[1,"hyd-table",3,"data","sorting","sort"],[3,"headerLabel","fieldName","columnName","sortable"],[3,"columnName","sortable"],[3,"columnName","actions","orientation"],[1,"hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange"],[3,"ngClass","isVisible","type","title","subtitle"],[1,"blankslate-container",3,"isVisible","type","title","subtitle"]],template:function(e,t){1&e&&(c.ed(0,iD,4,4,"data-browser",0),c.ed(1,sD,2,4,"blankslate",1)),2&e&&(c.Dc("ngIf",t.showDataBrowser()),c.Mb(1),c.Dc("ngIf",t.showBlankslateWithoutFilters()))},directives:[m.p,Fe.a,Ue.a,ze.a,qe.c,qe.d,qe.b,Ve.a,Ne.b,jc.a,m.n],pipes:[M.b,ei.a],styles:["zoomus-account-list .blankslate-container{margin-top:91px}zoomus-account-list .hyd-paginator{position:fixed;bottom:0;left:0;width:100%}zoomus-account-list .data-browser-zoomus .grid-content-container.mdl-grid{margin:0}zoomus-account-list .data-browser-zoomus .grid-content-container.mdl-grid>.mdl-cell.mdl-cell--12-col{margin:0;width:100%}zoomus-account-list .data-browser-zoomus .full-width-header-container>.section-wrapper>.mdl-grid{margin:0}zoomus-account-list .data-browser-zoomus .hyd-table-body{padding-bottom:45px}"],encapsulation:2,changeDetection:0}),e})();var aD=i("0ayN");const oD=Object(w.l)("learn-zoomus"),rD=Object(w.n)(oD,e=>e);var cD=function(e){return e.NAME="name",e.CREATION="created_at",e}({}),lD=function(e){return e.ASC="asc",e.DESC="desc",e}({}),dD=i("Tz1W");const uD=["uiComponent"];let hD=(()=>{class e extends vc.a{constructor(e,t,i,s,n,a,o,r,c){super(),this.translationService=e,this.pageService=t,this.router=i,this.zoomusStore=s,this.permissionManagerService=n,this.appStore=a,this.windowService=o,this.zoomusService=r,this.docLayoutService=c,this.showLoader=!0,this.searchFilterValue="",this.tablePaginator={pageIndex:0,pageSize:15,length:0,pageSizeAutoAllowed:!0},this.tableActiveSorting=cD.CREATION,this.tableActiveSortingDir=lD.DESC,this.tableData=[],this.zoomusAccountSelector$=this.zoomusStore.pipe(Object(w.q)(rD)),this.pageInitialized=!1,this.snackbarIntervals=[],this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:"Zoom V2",href:this.router.url}]),this.hasUserViewPermission$=n.can(aD.a.USER_VIEW),this.zoomusAccountSelector$.pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{if("PairingAccountCompleted"===e.status&&this.windowSubscription)return this.windowSubscription.unsubscribe(),void this.fetchAccounts();if(["AccountCreated","AccountEdited","PairingAccountRequested"].includes(e.status))switch(e.status){case"AccountCreated":this.fetchAccounts(),this.uiComponent.checkForChanges(),this.watchPairing(e.lastCreatedAccount,"create");break;case"AccountEdited":this.fetchAccounts(),this.uiComponent.checkForChanges(),this.watchPairing(e.lastEditedAccount,"edit");break;case"PairingAccountRequested":this.watchPairing(e.lastRequestedPairedAccount,"pair")}"PairingAccountAcquired"===e.status&&e.pairing&&(this.fetchAccounts(),this.uiComponent.checkForChanges(),this.windowSubscription=this.windowService.focus().pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(t=>{if(t&&"PairingAccountAcquired"===e.status&&e.pairing){const{account:t,action:i,item:s}=e.pairing;this.createSnackbar(s,t,i),this.zoomusStore.dispatch(new Px)}})),"AccountDeleted"===e.status&&e.lastDeletedAccountPartial&&(this.fetchAccounts(),this.uiComponent.checkForChanges(),this.handleAccountDeleted(e.lastDeletedAccountPartial))})}ngOnInit(){this.pageService.ready().pipe(Object(se.a)(1)).subscribe(()=>{this.pageDialog=this.pageService.dialog,this.rightPanel=this.pageService.rightPanel,this.setPageTitle(),this.setActionButtons(),this.pageInitialized=!0})}ngAfterViewInit(){this.fetchAccounts()}ngOnDestroy(){this.docLayoutService.actionButtons.clearActionButtons(),super.ngOnDestroy()}onFiltersUpdate(e){this.searchFilterValue=e.search?e.search:"",this.fetchAccounts()}onTableSort(e){switch(this.tableActiveSortingDir=e.dir,e.columnName){case"createdAt":this.tableActiveSorting=cD.CREATION;break;case"name":this.tableActiveSorting=cD.NAME}this.fetchAccounts()}onTablePageChange(e){const{pageIndex:t}=e;let{pageSize:i}=e;i<1&&(i=this.getAutoPageSize()),this.tablePaginator.pageSize=i,this.tablePaginator.pageIndex=t,this.fetchAccounts()}onOpenDeleteDialog(e){const t=e.id,i=e.name;this.docLayoutService.dialog.showCommonDialog(this.setDeleteDialogParams()).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.zoomusService.deleteAccount(t).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(()=>{e.actionSuccess.next(!0),this.zoomusStore.dispatch(new Lx({id:t,name:i}))})})}onPairingRequested(e){this.zoomusService.unpairAccount(e.id).subscribe(()=>{kx(`${E.b.getInstance().getFullLmsCustomUrl()}/learn/zoomus`,e.id,e.clientId),this.zoomusStore.dispatch(new Ex({id:e.id,name:e.name,description:e.description,clientId:e.clientId,clientSecret:"",createdAt:e.createdAt,accessTokenStatus:Sx,sessionType:e.sessionType,sessionLimitCourses:e.sessionLimitCourses,sessionLimitAccount:e.sessionLimitAccount,sessionLimitConcurrentRooms:e.sessionLimitConcurrentRooms}))})}onEditAccountRequested(e){this.openAccountRightPanel(e)}getAutoPageSize(){const e=document.querySelector("zoomus-account-list");return Math.floor((window.innerHeight-e.offsetTop-90-80-39)/38)}createAccountCreationSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully created!",{accountName:e.name})}createAccountEditSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully edited!",{accountName:e.name})}createAccountDeleteSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully deleted!",{accountName:e.name})}showSuccessSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"success"})}createAccountPairingSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully paired!",{accountName:e.name})}showFailureSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"error"})}createAccountPairingFailureSnackbarLabel(){return M.a.t("webinar","Pairing failed, please try again or check your configuration")}setPageTitle(){this.docLayoutService.header.showTitleBar({title:M.a.t("app","Zoom"),subtitle:M.a.t("webinar","Manage your Zoom accounts. For more info read our Knowledge Base"),fullWidth:!0})}setActionButtons(){const e=[{properties:{BgClass:"bg-positive-green",textClass:"text-white",icons:["plus"],tooltipText:M.a.t("webinar","New Account"),tooltipPosition:"bottom"},onClick:()=>{this.openAccountRightPanel()}}];this.docLayoutService.actionButtons.setActionButtons(e)}openAccountRightPanel(e){let t,i;e?(t=M.a.t("webinar","Edit Account"),i=M.a.t("webinar","Edit the details of your account to update it")):(t=M.a.t("webinar","New Account"),i=M.a.t("webinar","Fill in all the mandatory details in order to create a new account"));const s={isEditMode:!!e,accountId:e?e.id:null,accountName:e?e.name:null,accountDescription:e?e.description:null,clientId:e?e.clientId:null,clientSecret:e?e.clientSecret:null,sessionType:e?(n=e.sessionType,{zoomv2meeting:"meeting",zoomv2webinar:"webinar"}[n]):"meeting",sessionLimitCourses:e&&e.sessionLimitCourses>0?e.sessionLimitCourses:null,sessionLimitAccount:e&&e.sessionLimitAccount>0?e.sessionLimitAccount:null,sessionLimitConcurrentRooms:e&&e.sessionLimitConcurrentRooms>0?e.sessionLimitConcurrentRooms:null};var n;this.pageService.rightPanel.setWidth(500).setTitle(t).setDescription(i).setContent({component:Gx,params:s}).open()}fetchAccounts(){this.showLoader=!0,this.uiComponent.checkForChanges(),this.zoomusService.fetchAccounts({term:this.searchFilterValue,page:this.tablePaginator.pageIndex+1,page_size:this.tablePaginator.pageSize,sort:`${this.tableActiveSorting}.${this.tableActiveSortingDir}`}).subscribe(e=>{const t=[];for(const s of e.data.items)t.push({id:s.id,clientId:s.app_key,clientSecret:s.app_secret,name:s.name,description:s.description,createdAt:P_.a.unix(s.created_at).toDate(),accessTokenStatus:s.paired?Sx:Cx,sessionType:s.session_type,sessionLimitCourses:s.max_sessions_per_course,sessionLimitAccount:s.max_sessions,sessionLimitConcurrentRooms:s.max_concurrent_sessions});const{total_count:i}=e.data;this.tablePaginator.length=i,this.mapTableData(t),this.showLoader=!1,this.uiComponent.checkForChanges()})}mapTableData(e){this.tableData=[],e.forEach(e=>{this.tableData.push(e)})}handleAccountCreated(e,t){if("success"===e){const e=this.createAccountCreationSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.createAccountPairingFailureSnackbarLabel();this.showFailureSnackbar(e)}}handleAccountPaired(e,t){if("success"===e){const e=this.createAccountPairingSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.createAccountPairingFailureSnackbarLabel();this.showFailureSnackbar(e)}}handleAccountEdited(e,t){if("success"===e){const e=this.createAccountEditSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.createAccountPairingFailureSnackbarLabel();this.showFailureSnackbar(e)}}handleAccountDeleted(e){const t=this.createAccountDeleteSuccessSnackbarLabel(e);this.showSuccessSnackbar(t)}watchPairing(e,t){const i=Math.random();this.snackbarIntervals[i]=setInterval(()=>{const s=window.localStorage.getItem(wx(e.id));s&&(window.localStorage.removeItem(wx(e.id)),clearInterval(this.snackbarIntervals[i]),delete this.snackbarIntervals[i],this.zoomusStore.dispatch(new Ax({item:s,account:e,action:t})))},200),setTimeout(()=>{this.snackbarIntervals[i]&&(clearInterval(this.snackbarIntervals[i]),window.localStorage.removeItem(wx(e.id)),this.zoomusStore.dispatch(new Mx))},4e4)}createSnackbar(e,t,i){switch(i){case"create":this.handleAccountCreated(e,t);break;case"edit":this.handleAccountEdited(e,t);break;case"pair":this.handleAccountPaired(e,t);break;case"delete":this.handleAccountDeleted(t)}}setDeleteDialogParams(){return{id:"delete-checklist-dialog",width:460,height:210,title:M.a.t("standard","Delete Account"),content:M.a.t("standard","Are you sure you want to delete the selected account?<br>If you delete it, it will be definitely removed from the system and you will need to reassign all of the events created with this account to a different account. If you don't reassign the events, both learners and instructors will no longer be able to access them."),actions:[{id:"cancel",type:"neutral",label:M.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"negative",label:M.a.t("standard","Delete"),slot:"end"}]}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(rn.a),c.ec(P.a),c.ec(s.h),c.ec(w.e),c.ec(dD.a),c.ec(w.e),c.ec(kc.a),c.ec(jx),c.ec(j.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["zoomus-account-container"]],viewQuery:function(e,t){if(1&e&&c.nd(uD,1),2&e){let e;c.Rc(e=c.tc())&&(t.uiComponent=e.first)}},features:[c.Jb],decls:2,vars:4,consts:[[3,"showLoader","tableData","tablePaginator","searchFilterValue","filtersUpdate","tableSort","tablePageChange","openDeleteDialog","beginPairing","editAccount"],["uiComponent",""]],template:function(e,t){1&e&&(c.kc(0,"zoomus-account-list",0,1),c.sc("filtersUpdate",function(e){return t.onFiltersUpdate(e)})("tableSort",function(e){return t.onTableSort(e)})("tablePageChange",function(e){return t.onTablePageChange(e)})("openDeleteDialog",function(e){return t.onOpenDeleteDialog(e)})("beginPairing",function(e){return t.onPairingRequested(e)})("editAccount",function(e){return t.onEditAccountRequested(e)}),c.jc()),2&e&&c.Dc("showLoader",t.showLoader)("tableData",t.tableData)("tablePaginator",t.tablePaginator)("searchFilterValue",t.searchFilterValue)},directives:[nD],encapsulation:2,changeDetection:0}),e})(),pD=(()=>{class e{constructor(e,t){this.router=e,this.toggleService=t,this.platform=E.b.getInstance()}canActivate(e,t){return!(this.toggleService.isOn(u.f.TOGGLE_WEBEX_NEW_REST_API)||!this.platform.isPluginActive("WebexV2App")&&(this.router.navigate(["/unauthorized"]),1))}}return e.\u0275fac=function(t){return new(t||e)(c.oc(s.h),c.oc(u.g))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();var gD=function(e){return e.AccountSuccessfullyCreated="[Webex] Account Successfully Created",e.AccountSuccessfullyEdited="[Webex] Account Successfully Edited",e.AccountSuccessfullyDeleted="[Webex] Account Successfully Deleted",e.AccountSuccessfullyReset="[Webex] Account Successfully Reset",e}({});class mD{constructor(e){this.payload=e,this.type=gD.AccountSuccessfullyCreated}}class bD{constructor(e){this.payload=e,this.type=gD.AccountSuccessfullyEdited}}class fD{constructor(e){this.payload=e,this.type=gD.AccountSuccessfullyDeleted}}class _D{constructor(){this.type=gD.AccountSuccessfullyReset}}let vD=(()=>{class e{constructor(e){this.backendService=e}createAccount(e){const t=this.buildPayload(e);return this.backendService.request("/learn/v1/webinar/webex/accounts","POST",t)}editAccount(e){const t=this.buildPayload(e);return this.backendService.request(`/learn/v1/webinar/webex/accounts/${e.get("id").value}`,"PUT",t)}fetchAccounts(e){const t=Object.assign(Object.assign({},e),{providers:["webexv2meeting","webexv2event","webexv2training"]});return this.backendService.request("/learn/v1/webinar/webex/accounts","GET",t)}deleteAccount(e){return this.backendService.request(`/learn/v1/webinar/webex/accounts/${e}`,"DELETE")}buildPayload(e){const t="meeting"===e.get("sessionType").value?"webexv2meeting":"event"==e.get("sessionType").value?"webexv2event":"webexv2training";return{name:e.get("accountName").value,tool:t,description:e.get("accountDescription").value,webex_id:e.get("webexId").value,password:e.get("password").value,site_name:e.get("siteName").value,site_id:e.get("siteId").value,partner_id:e.get("partnerId").value,template:e.get("sessionTemplate").value,host_listed:e.get("siteAdminOption").value,max_sessions:0|e.get("sessionLimitAccount").value,max_sessions_per_course:0|e.get("sessionLimitCourses").value,max_concurrent_sessions:0|e.get("sessionLimitConcurrentRooms").value}}}return e.\u0275fac=function(t){return new(t||e)(c.oc(I.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();const yD=()=>e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:tt.a.t("zoom","This field cannot contains empty spaces")};function wD(e){return{webexv2meeting:"Meeting",webexv2event:"Event",webexv2training:"Training"}[e]}function CD(e,t){if(1&e&&(c.kc(0,"div",15),c.fc(1,"textfield",16),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitCoursesTextField.type)("id",e.sessionLimitCoursesTextField.id)("floating_label",e.sessionLimitCoursesTextField.floating_label)("label",e.sessionLimitCoursesTextField.label)("max_length",e.sessionLimitCoursesTextField.max_length)("inputFormControl",e.sessionLimitCoursesTextField.inputFormControl)("showRequiredFieldIndicator",!0)("minValueNumber",0)}}function SD(e,t){if(1&e&&(c.kc(0,"div",15),c.fc(1,"textfield",16),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitAccountTextField.type)("id",e.sessionLimitAccountTextField.id)("floating_label",e.sessionLimitAccountTextField.floating_label)("label",e.sessionLimitAccountTextField.label)("max_length",e.sessionLimitAccountTextField.max_length)("inputFormControl",e.sessionLimitAccountTextField.inputFormControl)("showRequiredFieldIndicator",!0)("minValueNumber",0)}}function kD(e,t){if(1&e&&(c.kc(0,"div",15),c.fc(1,"textfield",16),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitConcurrentRoomsTextField.type)("id",e.sessionLimitConcurrentRoomsTextField.id)("floating_label",e.sessionLimitConcurrentRoomsTextField.floating_label)("label",e.sessionLimitConcurrentRoomsTextField.label)("max_length",e.sessionLimitConcurrentRoomsTextField.max_length)("inputFormControl",e.sessionLimitConcurrentRoomsTextField.inputFormControl)("showRequiredFieldIndicator",!0)("minValueNumber",0)}}const TD=function(){return{category:"standard"}},ID=function(){return{category:"webinar"}},xD=function(){return{category:"admin"}};let DD=(()=>{class e{constructor(e){this.cdr=e,this.isEditMode=!1}ngOnInit(){this.setFormFieldsParams(),this.formGroup.valueChanges.subscribe(()=>{this.cdr.detectChanges()})}checkForChanges(){this.cdr.markForCheck()}setFormFieldsParams(){this.accountName={type:et.a.TEXT,id:"account-name",floating_label:!0,label:M.a.t("webinar","Account Name"),max_length:50,show_counter:!0,inputFormControl:this.formGroup.controls.accountName},this.accountDescription={type:et.a.TEXT,id:"account-description",floating_label:!0,label:M.a.t("app7020","Description"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.accountDescription},this.webexId={type:et.a.TEXT,id:"webex-id",floating_label:!0,label:M.a.t("webinar","Webex id"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.webexId},this.password={type:et.a.PASSWORD,id:"password",floating_label:!0,label:M.a.t("webinar","Webex password"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.password},this.siteName={type:et.a.TEXT,id:"client-site",floating_label:!0,label:M.a.t("webinar","Site name"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.siteName},this.siteId={type:et.a.TEXT,id:"client-site-id",floating_label:!0,label:M.a.t("webinar","Site id"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.siteId},this.partnerId={type:et.a.TEXT,id:"partner-id",floating_label:!0,label:M.a.t("webinar","Partner id"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.partnerId},this.sessionTemplate={type:et.a.TEXT,id:"session-template",floating_label:!0,label:M.a.t("preferences","_TEMPLATE"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.sessionTemplate},this.sessionType={id:"session-type",label:M.a.t("webinar","Session type"),inputFormControl:this.formGroup.get("sessionType"),name:"session-type"},this.sessionType.training={id:"session-type-training",floating_label:!0,label:M.a.t("setup","training")},this.sessionType.event={id:"session-type-event",floating_label:!0,label:M.a.t("conference","Event")},this.sessionType.meeting={id:"session-type-meeting",floating_label:!0,label:M.a.t("conference","Meeting")},this.siteAdminOption={id:"site-admin-option",label:M.a.t("webinar","Site admin option"),inputFormControl:this.formGroup.get("siteAdminOption"),name:"site-admin-option"},this.siteAdminOption.listed={id:"site-admin-option-listed",floating_label:!0,label:M.a.t("webinar","Listed")},this.siteAdminOption.unlisted={id:"site-admin-option-unlisted",floating_label:!0,label:M.a.t("webinar","Unlisted")},this.sessionLimitCoursesTextField={type:et.a.NUMBER,id:"session-limit-courses",floating_label:!0,label:M.a.t("configuration","Max rooms per course"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitCourses")},this.sessionLimitAccountTextField={type:et.a.NUMBER,id:"session-limit-accounts",floating_label:!0,label:M.a.t("webinar","Max sessions for this account"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitAccount")},this.sessionLimitConcurrentRoomsTextField={type:et.a.NUMBER,id:"session-limit-concurrents",floating_label:!0,label:M.a.t("configuration","Max concurrent rooms"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitConcurrentRooms")};const e=!!this.formGroup.get("sessionLimitCourses").value;this.sessionLimitCoursesCheckbox={label:M.a.t("webinar","Set session limits for courses"),inputFormControl:new Ze.e(e),checked:e},this.sessionLimitCoursesCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitCoursesCheckbox").setValue(e)});const t=!!this.formGroup.get("sessionLimitAccount").value;this.sessionLimitAccountCheckbox={label:M.a.t("webinar","Set session limits per accounts"),inputFormControl:new Ze.e(t),checked:t},this.sessionLimitAccountCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitAccountCheckbox").setValue(e)});const i=!!this.formGroup.get("sessionLimitConcurrentRooms").value;this.sessionLimitConcurrentRoomsCheckbox={label:M.a.t("webinar","Set session for concurrent rooms"),inputFormControl:new Ze.e(i),checked:i},this.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitConcurrentRoomsCheckbox").setValue(e)})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["webex-account-panel-ui"]],inputs:{formGroup:"formGroup",isEditMode:"isEditMode"},decls:66,vars:120,consts:[[1,"webex-create-account"],[1,"border-top-wrapper",3,"formGroup"],[1,"webex-account-info-container"],[1,"details-container"],[1,"bold-subtitle"],[1,"webex-account-text-field-margin"],[3,"type","id","floating_label","label","max_length","inputFormControl","showRequiredFieldIndicator"],[1,"webex-account-text-field-margin-no-bottom"],[1,"border-top-wrapper","webex-account-info-container"],[1,"bold-subtitle","options-subtitle"],[3,"label","value","name","enabled","inputFormControl"],[1,"text-grey-mid","hint","options-label"],[1,"options-container"],[3,"inputFormControl","checked","label"],["class","webex-account-margin-huge",4,"ngIf"],[1,"webex-account-margin-huge"],[3,"type","id","floating_label","label","max_length","inputFormControl","showRequiredFieldIndicator","minValueNumber"]],template:function(e,t){1&e&&(c.kc(0,"section",0),c.kc(1,"form",1),c.kc(2,"div",2),c.kc(3,"div",3),c.kc(4,"div",4),c.gd(5),c.xc(6,"t"),c.jc(),c.kc(7,"div",5),c.fc(8,"textfield",6),c.jc(),c.kc(9,"div",5),c.fc(10,"textfield",6),c.jc(),c.kc(11,"div",5),c.fc(12,"textfield",6),c.jc(),c.kc(13,"div",5),c.fc(14,"textfield",6),c.jc(),c.kc(15,"div",5),c.fc(16,"textfield",6),c.jc(),c.kc(17,"div",5),c.fc(18,"textfield",6),c.jc(),c.kc(19,"div",5),c.fc(20,"textfield",6),c.jc(),c.kc(21,"div",7),c.fc(22,"textfield",6),c.jc(),c.jc(),c.jc(),c.kc(23,"div",8),c.kc(24,"div",3),c.kc(25,"div",9),c.gd(26),c.xc(27,"t"),c.jc(),c.kc(28,"div"),c.fc(29,"radio",10),c.jc(),c.kc(30,"div"),c.fc(31,"radio",10),c.fc(32,"div",11),c.jc(),c.kc(33,"div"),c.fc(34,"radio",10),c.fc(35,"div",11),c.jc(),c.jc(),c.jc(),c.kc(36,"div",8),c.kc(37,"div",3),c.kc(38,"div",9),c.gd(39),c.xc(40,"t"),c.jc(),c.kc(41,"div"),c.fc(42,"radio",10),c.jc(),c.kc(43,"div"),c.fc(44,"radio",10),c.fc(45,"div",11),c.jc(),c.jc(),c.jc(),c.kc(46,"div",8),c.kc(47,"div",3),c.kc(48,"div",9),c.gd(49),c.xc(50,"t"),c.jc(),c.kc(51,"div",12),c.kc(52,"div"),c.fc(53,"checkbox",13),c.jc(),c.ed(54,CD,2,8,"div",14),c.xc(55,"async"),c.jc(),c.kc(56,"div",12),c.kc(57,"div"),c.fc(58,"checkbox",13),c.jc(),c.ed(59,SD,2,8,"div",14),c.xc(60,"async"),c.jc(),c.kc(61,"div",12),c.kc(62,"div"),c.fc(63,"checkbox",13),c.jc(),c.ed(64,kD,2,8,"div",14),c.xc(65,"async"),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(1),c.Dc("formGroup",t.formGroup),c.Mb(4),c.id(" ",c.zc(6,98,"General Information",c.Hc(116,TD))," "),c.Mb(3),c.Dc("type",t.accountName.type)("id",t.accountName.id)("floating_label",t.accountName.floating_label)("label",t.accountName.label)("max_length",t.accountName.max_length)("inputFormControl",t.accountName.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.accountDescription.type)("id",t.accountDescription.id)("floating_label",t.accountDescription.floating_label)("label",t.accountDescription.label)("max_length",t.accountDescription.max_length)("inputFormControl",t.accountDescription.inputFormControl)("showRequiredFieldIndicator",!1),c.Mb(2),c.Dc("type",t.webexId.type)("id",t.webexId.id)("floating_label",t.webexId.floating_label)("label",t.webexId.label)("max_length",t.webexId.max_length)("inputFormControl",t.webexId.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.password.type)("id",t.password.id)("floating_label",t.password.floating_label)("label",t.password.label)("max_length",t.password.max_length)("inputFormControl",t.password.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.siteName.type)("id",t.siteName.id)("floating_label",t.siteName.floating_label)("label",t.siteName.label)("max_length",t.siteName.max_length)("inputFormControl",t.siteName.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.siteId.type)("id",t.siteId.id)("floating_label",t.siteId.floating_label)("label",t.siteId.label)("max_length",t.siteId.max_length)("inputFormControl",t.siteId.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.partnerId.type)("id",t.partnerId.id)("floating_label",t.partnerId.floating_label)("label",t.partnerId.label)("max_length",t.partnerId.max_length)("inputFormControl",t.partnerId.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.sessionTemplate.type)("id",t.sessionTemplate.id)("floating_label",t.sessionTemplate.floating_label)("label",t.sessionTemplate.label)("max_length",t.sessionTemplate.max_length)("inputFormControl",t.sessionTemplate.inputFormControl)("showRequiredFieldIndicator",!1),c.Mb(4),c.id(" ",c.zc(27,101,"Session type",c.Hc(117,ID))," "),c.Mb(3),c.Dc("label",t.sessionType.meeting.label)("value","meeting")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(2),c.Dc("label",t.sessionType.training.label)("value","training")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(3),c.Dc("label",t.sessionType.event.label)("value","event")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(5),c.id(" ",c.zc(40,104,"Site admin option",c.Hc(118,ID))," "),c.Mb(3),c.Dc("label",t.siteAdminOption.listed.label)("value",!0)("name",t.siteAdminOption.name)("enabled",!t.siteAdminOption.inputFormControl.readonly)("inputFormControl",t.siteAdminOption.inputFormControl),c.Mb(2),c.Dc("label",t.siteAdminOption.unlisted.label)("value",!1)("name",t.siteAdminOption.name)("enabled",!t.siteAdminOption.inputFormControl.readonly)("inputFormControl",t.siteAdminOption.inputFormControl),c.Mb(5),c.id(" ",c.zc(50,107,"Options",c.Hc(119,xD))," "),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitCoursesCheckbox.inputFormControl)("checked",t.sessionLimitCoursesCheckbox.checked)("label",t.sessionLimitCoursesCheckbox.label),c.Mb(1),c.Dc("ngIf",c.yc(55,110,t.sessionLimitCoursesCheckbox.inputFormControl.valueChanges)||t.sessionLimitCoursesTextField.inputFormControl.value>0&&t.sessionLimitCoursesCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitAccountCheckbox.inputFormControl)("checked",t.sessionLimitAccountCheckbox.checked)("label",t.sessionLimitAccountCheckbox.label),c.Mb(1),c.Dc("ngIf",c.yc(60,112,t.sessionLimitAccountCheckbox.inputFormControl.valueChanges)||t.sessionLimitAccountTextField.inputFormControl.value>0&&t.sessionLimitAccountCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitConcurrentRoomsCheckbox.inputFormControl)("checked",t.sessionLimitConcurrentRoomsCheckbox.checked)("label",t.sessionLimitConcurrentRoomsCheckbox.label),c.Mb(1),c.Dc("ngIf",c.yc(65,114,t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges)||t.sessionLimitConcurrentRoomsTextField.inputFormControl.value>0&&t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.value||!1))},directives:[Ze.y,Ze.p,Ze.i,Ct.a,Zn.a,ih.a,m.p],pipes:[M.b,m.b],styles:[".color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}webex-account-panel-ui .bold-subtitle{padding-bottom:6px;font-weight:600;font-size:14px;line-height:18px}webex-account-panel-ui .border-top-wrapper{border-top:1px solid var(--ui-color-badge-background-light)}webex-account-panel-ui .details-container{padding:24px 0}webex-account-panel-ui .options-subtitle{margin-bottom:16px}webex-account-panel-ui .options-label{padding-left:24px}webex-account-panel-ui .docebo-radio{margin-bottom:0}webex-account-panel-ui .webex-account-limit-list{padding:24px}webex-account-panel-ui .webex-account-redirect-info{display:flex;align-items:center;padding:1rem 1.5rem;padding:var(--hyd-spacing-sm) var(--hyd-spacing-md)}.router-outlet:not(.direction-rtl):not(.heracles-root) webex-account-panel-ui .webex-account-redirect-info span{margin-left:29px}.router-outlet.direction-rtl:not(.heracles-root) webex-account-panel-ui .webex-account-redirect-info span{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) webex-account-panel-ui .webex-account-redirect-info span{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) webex-account-panel-ui .webex-account-redirect-info span{margin-right:29px}.router-outlet:not(.direction-rtl):not(.heracles-root) webex-account-panel-ui .webex-account-margin{margin-left:12px}.router-outlet.direction-rtl:not(.heracles-root) webex-account-panel-ui .webex-account-margin{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) webex-account-panel-ui .webex-account-margin{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) webex-account-panel-ui .webex-account-margin{margin-right:12px}.router-outlet:not(.direction-rtl):not(.heracles-root) webex-account-panel-ui .webex-account-margin-huge{margin-left:26px}.router-outlet.direction-rtl:not(.heracles-root) webex-account-panel-ui .webex-account-margin-huge{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) webex-account-panel-ui .webex-account-margin-huge{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) webex-account-panel-ui .webex-account-margin-huge{margin-right:26px}webex-account-panel-ui .webex-account-info-container{padding:0 1.5rem;padding:0 var(--hyd-spacing-md);box-sizing:border-box}webex-account-panel-ui .webex-account-text-field-margin{margin:16px 0 24px}webex-account-panel-ui .webex-account-text-field-margin-no-bottom{margin:16px 0 0}"],encapsulation:2,changeDetection:0}),e})();const OD=["uiComponent"];let ED=(()=>{class e extends vc.a{constructor(t,i,s,n){super(),this.pageService=t,this.webexService=i,this.webexStore=s,this.translationService=n,this.isEditMode=!1,this.notMoreThan=(e,t)=>i=>i.value>e?{notMoreThan:this.translationService.instant("Max limit is {max} {things}",{category:"standard",max:e,things:t})}:null,this.baseRedirectUri=e.createBaseRedirectUri(),this.oauthRedirectUriTranslatable=M.a.t("webinar","Webex Oauth redirect URL:")}static createBaseRedirectUri(){return`${E.b.getInstance().getFullLmsCustomUrl()}/learn/webex`}ngOnInit(){this.rightPanel=this.pageService.rightPanel,this.setFormGroup()}ngAfterViewInit(){this.setPanelActions()}ngOnDestroy(){super.ngOnDestroy(),this.rightPanel.buttonsEnabled()}setPanelActions(){const e=[],t=M.a.t("standard",this.isEditMode?"Confirm":"Create");e.push({type:"normal",properties:{text:t},customClasses:"float-ltr-right-clear-none",handler:()=>{this.checkCustomFormValidations(),this.form.get("webexId").errors||this.form.get("webexId").setErrors(null),this.form.valid?(this.cleanFormValues(this.form),this.isEditMode?this.editAccount():this.createAccount()):(Object(Cy.l)(this.form),this.form.setValue(this.form.value))}}),e.push({type:"cancel",properties:{text:M.a.t("standard","Cancel")},customClasses:"float-ltr-right-clear-none",handler:e=>{e.close()}}),this.rightPanel.setActions(e)}createAccount(){this.rightPanel.buttonsDisabled(),this.webexService.createAccount(this.form).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{this.accountName=e.data.name,this.accountId=e.data.id,this.sessionType=wD(e.data.tool);const t={id:e.data.id,name:e.data.name,description:e.data.description,createdAt:P_()().toDate(),webexId:e.data.webex_id,password:e.data.password,siteName:e.data.site_name,siteId:e.data.site_id,partnerId:e.data.partner_id,sessionType:this.sessionType,sessionTemplate:e.data.template,siteAdminOption:e.data.host_listed,sessionLimitCourses:0|this.form.get("sessionLimitCourses").value,sessionLimitAccount:0|this.form.get("sessionLimitAccount").value,sessionLimitConcurrentRooms:0|this.form.get("sessionLimitConcurrentRooms").value};this.webexStore.dispatch(new mD(t)),this.rightPanel.close()},this.accountUpsertErrorCallback())}editAccount(){this.rightPanel.buttonsDisabled(),this.webexService.editAccount(this.form).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{var t=this.accountName;this.accountName=e.data.name,this.sessionType=wD(e.data.tool);const i={id:e.data.id,name:t,description:e.data.description,createdAt:P_()().toDate(),webexId:e.data.webex_id,password:e.data.password,siteName:e.data.site_name,siteId:e.data.site_id,partnerId:e.data.partner_id,sessionTemplate:e.data.template,siteAdminOption:e.data.host_listed,sessionLimitCourses:e.data.max_sessions_per_course,sessionLimitAccount:e.data.max_sessions,sessionLimitConcurrentRooms:e.data.max_concurent_sessions};this.webexStore.dispatch(new bD(i)),this.rightPanel.close()},this.accountUpsertErrorCallback())}accountUpsertErrorCallback(){return e=>{1002===e.code&&(Object(Cy.l)(this.form),this.form.get("webexId").setErrors({notUnique:M.a.t("webinar","Multiple accounts cannot use the same Client ID")}),Object(Cy.l)(this.form),this.uiComponent.checkForChanges(),this.rightPanel.buttonsEnabled())}}cleanFormValues(e){e.get("sessionLimitCoursesCheckbox").value||e.get("sessionLimitCourses").setValue(0),e.get("sessionLimitAccountCheckbox").value||e.get("sessionLimitAccount").setValue(0),e.get("sessionLimitConcurrentRoomsCheckbox").value||e.get("sessionLimitConcurrentRooms").setValue(0)}setFormGroup(){this.form=new Ze.h({id:new Ze.e(this.accountId),accountName:new Ze.e(this.accountName),accountDescription:new Ze.e(this.accountDescription),webexId:new Ze.e(this.webexId),password:new Ze.e(this.password),siteName:new Ze.e(this.siteName),siteId:new Ze.e(this.siteId),partnerId:new Ze.e(this.partnerId),sessionTemplate:new Ze.e(this.sessionTemplate),sessionType:new Ze.e(this.sessionType),siteAdminOption:new Ze.e(this.siteAdminOption),sessionLimitCourses:new Ze.e(this.sessionLimitCourses),sessionLimitCoursesCheckbox:new Ze.e(!!this.sessionLimitCourses),sessionLimitAccount:new Ze.e(this.sessionLimitAccount),sessionLimitAccountCheckbox:new Ze.e(!!this.sessionLimitAccount),sessionLimitConcurrentRooms:new Ze.e(this.sessionLimitConcurrentRooms),sessionLimitConcurrentRoomsCheckbox:new Ze.e(!!this.sessionLimitConcurrentRooms)}),this.checkCustomFormValidations()}checkCustomFormValidations(){this.form.get("accountName").setValidators([Ze.x.required,e=>"string"==typeof e.value&&e.value.match("^\\s+$")?{notHaveOnlyBlankCharacters:tt.a.t("zoom","This field cannot contains empty spaces")}:null,Ze.x.maxLength(255)]),this.form.get("accountDescription").setValidators([Ze.x.maxLength(255)]),this.form.get("webexId").setValidators([Ze.x.required,Ze.x.maxLength(255)]),this.form.get("password").setValidators([Ze.x.required,yD(),Ze.x.maxLength(255)]),this.form.get("siteName").setValidators([Ze.x.required,yD(),Ze.x.maxLength(255)]),this.form.get("siteId").setValidators([Ze.x.required,yD(),Ze.x.maxLength(255)]),this.form.get("partnerId").setValidators([Ze.x.required,yD(),Ze.x.maxLength(255)]),this.form.get("sessionTemplate").setValidators([Ze.x.maxLength(255)]),this.form.get("sessionType").setValidators([Ze.x.required]),this.form.get("siteAdminOption").setValidators([Ze.x.required]),this.form.get("sessionLimitCourses").setValidators([this.notMoreThan(999,"sessions")]),this.form.get("sessionLimitAccount").setValidators([this.notMoreThan(999,"sessions")]),this.form.get("sessionLimitConcurrentRooms").setValidators([this.notMoreThan(999,"rooms")]),this.form.get("accountName").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("webexId").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("password").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("siteName").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(P.a),c.ec(vD),c.ec(w.e),c.ec(rn.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["webex-account-panel-container"]],viewQuery:function(e,t){if(1&e&&c.nd(OD,1),2&e){let e;c.Rc(e=c.tc())&&(t.uiComponent=e.first)}},inputs:{isEditMode:"isEditMode",accountId:"accountId",accountName:"accountName",accountDescription:"accountDescription",webexId:"webexId",password:"password",siteName:"siteName",siteId:"siteId",partnerId:"partnerId",sessionTemplate:"sessionTemplate",sessionType:"sessionType",siteAdminOption:"siteAdminOption",sessionLimitCourses:"sessionLimitCourses",sessionLimitAccount:"sessionLimitAccount",sessionLimitConcurrentRooms:"sessionLimitConcurrentRooms"},features:[c.Lb([vD]),c.Jb],decls:2,vars:1,consts:[[3,"formGroup","oauthRedirectUri","oauthRedirectUriTranslatable"],["uiComponent",""]],template:function(e,t){1&e&&c.fc(0,"webex-account-panel-ui",0,1),2&e&&c.Dc("formGroup",t.form)},directives:[DD,Ze.p,Ze.i],styles:["webex-account-panel-ui{height:100%;overflow-y:auto;overflow-x:hidden;display:block}"],encapsulation:2,changeDetection:0}),e})();const AD={isVisible:!0,type:Tl.a.BLANK001,title:M.a.t("webinar","No Webex Accounts Found"),subtitle:M.a.t("webinar","Click the Add button in the top right corner to add a new Webex account!")},PD={isVisible:!0,type:Tl.a.EMPTY001,title:M.a.t("standard","Whoops, No results found!"),subtitle:M.a.t("myteam","Please try again using different search/filters criteria.")},MD={mode:Me.a.push,viewOptionLabel:M.a.t("standard","SORT BY"),filters:new je.a([{title:M.a.t("standard","Search"),code:"search",type:Me.d.free_search_filter,params:{placeholder:M.a.t("standard","Search...")}}]),appliedFiltersNumber:new je.a(null),displayedItemsNumber:new je.a(null),viewOptions:new je.a(null),disableViewOptions:!1,elementLabels:{singular:M.a.t("standard","items"),plural:M.a.t("standard","items")}},LD={columnName:"createdAt",dir:Hx.a.DESC},jD={name:{headerLabel:M.a.t("webinar","Account Name"),fieldName:"name",columnName:"name",sortable:!0},description:{headerLabel:M.a.t("app7020","Description"),fieldName:"description",columnName:"description",sortable:!1},createdAt:{headerLabel:M.a.t("standard","Creation Date"),fieldName:"createdAt",columnName:"createdAt",sortable:!0,type:"date",format:"MM/DD/YYYY"},sessionType:{headerLabel:M.a.t("webinar","Session type"),fieldName:"sessionType",columnName:"sessionType",sortable:!1},ellipsis:{}};function RD(e,t){if(1&e&&(c.gd(0),c.xc(1,"t")),2&e){const e=c.wc(3);c.hd(c.yc(1,1,e.tableColumns.createdAt.headerLabel))}}function FD(e,t){1&e&&(c.gd(0),c.xc(1,"HDateTime")),2&e&&c.id(" ",c.Ac(1,1,t.item.createdAt,null,"lll")," ")}function ND(e,t){if(1&e){const e=c.lc();c.kc(0,"hyd-table",7),c.sc("sort",function(t){return c.Vc(e),c.wc(2).onTableSort(t)}),c.fc(1,"hyd-table-column-text",8),c.fc(2,"hyd-table-column-text",8),c.kc(3,"hyd-table-column",9),c.kc(4,"hyd-table-column-header"),c.ed(5,RD,2,3,"ng-template"),c.jc(),c.kc(6,"hyd-table-column-cell"),c.ed(7,FD,2,5,"ng-template"),c.jc(),c.jc(),c.fc(8,"hyd-table-column-text",8),c.fc(9,"hyd-table-column-ellipsis",10),c.jc()}if(2&e){const e=c.wc(2);c.Dc("data",e.tableData)("sorting",e.tableDefaultSorting),c.Mb(1),c.Dc("headerLabel",e.tableColumns.name.headerLabel)("fieldName",e.tableColumns.name.fieldName)("columnName",e.tableColumns.name.columnName)("sortable",e.tableColumns.name.sortable),c.Mb(1),c.Dc("headerLabel",e.tableColumns.description.headerLabel)("fieldName",e.tableColumns.description.fieldName)("columnName",e.tableColumns.description.columnName)("sortable",e.tableColumns.description.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.createdAt.columnName)("sortable",e.tableColumns.createdAt.sortable),c.Mb(5),c.Dc("headerLabel",e.tableColumns.sessionType.headerLabel)("fieldName",e.tableColumns.sessionType.fieldName)("columnName",e.tableColumns.sessionType.columnName)("sortable",e.tableColumns.sessionType.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.ellipsis.columnName)("actions",e.tableColumns.ellipsis.actions)("orientation",e.tableColumns.ellipsis.orientation)}}function UD(e,t){if(1&e){const e=c.lc();c.kc(0,"hyd-paginator",11),c.sc("pageChange",function(t){return c.Vc(e),c.wc(2).onTablePageChange(t)}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("pageIndex",e.tablePaginator.pageIndex)("pageSize",e.tablePaginator.pageSize)("length",e.tablePaginator.length)("pageSizeAutoAllowed",e.tablePaginator.pageSizeAutoAllowed)}}function zD(e,t){if(1&e&&c.fc(0,"blankslate",12),2&e){const e=c.wc(2);c.Dc("ngClass","blankslate-container")("isVisible",e.blankslateWithFilters.isVisible)("type",e.blankslateWithFilters.type)("title",e.blankslateWithFilters.title)("subtitle",e.blankslateWithFilters.subtitle)}}function qD(e,t){if(1&e){const e=c.lc();c.kc(0,"data-browser",3),c.sc("onFiltersUpdate",function(t){return c.Vc(e),c.wc().onDataBrowserFiltersUpdate(t)}),c.ed(1,ND,10,19,"hyd-table",4),c.ed(2,UD,1,4,"hyd-paginator",5),c.ed(3,zD,1,5,"blankslate",6),c.jc()}if(2&e){const e=c.wc();c.Dc("dataBrowserSource",e.dataBrowserSource),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("ngIf",e.showBlankslateWithFilters())}}function VD(e,t){if(1&e&&(c.kc(0,"blankslate",13),c.gd(1," > "),c.jc()),2&e){const e=c.wc();c.Dc("isVisible",e.blankslateWithoutFilters.isVisible)("type",e.blankslateWithoutFilters.type)("title",e.blankslateWithoutFilters.title)("subtitle",e.blankslateWithoutFilters.subtitle)}}let BD=(()=>{class e{constructor(e){this.cdr=e,this.filtersUpdate=new c.q,this.tableSort=new c.q,this.tablePageChange=new c.q,this.openDeleteDialog=new c.q,this.editAccount=new c.q,this.blankslateWithoutFilters=AD,this.blankslateWithFilters=PD,this.dataBrowserSource=MD,this.tableDefaultSorting=LD,this.tableColumns=jD,this.setTableEllipsisColumn()}showBlankslateWithoutFilters(){return!this.showLoader&&0===this.tableData.length&&""===this.searchFilterValue}showBlankslateWithFilters(){return!this.showLoader&&0===this.tableData.length&&""!==this.searchFilterValue}showDataBrowser(){return this.tableData.length>0||""!==this.searchFilterValue}showTable(){return!this.showLoader&&this.tableData.length>0}onDataBrowserFiltersUpdate(e){this.filtersUpdate.emit(e)}onTableSort(e){this.tableSort.emit(e)}onTablePageChange(e){this.tablePageChange.emit(e)}checkForChanges(){this.cdr.markForCheck()}setTableEllipsisColumn(){this.tableColumns.ellipsis={columnName:"ellipsis",columnWidth:"100px",alignment:Le.a.CENTER,ellipsed:!1,orientation:"top-right",actions:[{id:"edit",title:M.a.t("app7020","Edit"),params:null,active:!1,action:e=>{this.editAccount.emit(e)}},{id:"delete",title:M.a.t("standard","Delete"),params:null,active:!1,action:e=>{this.openDeleteDialog.emit(e)}}]}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["webex-account-list"]],inputs:{tableData:"tableData",searchFilterValue:"searchFilterValue",showLoader:"showLoader",tablePaginator:"tablePaginator"},outputs:{filtersUpdate:"filtersUpdate",tableSort:"tableSort",tablePageChange:"tablePageChange",openDeleteDialog:"openDeleteDialog",editAccount:"editAccount"},decls:3,vars:2,consts:[[1,"webex-manage"],["class","data-browser",3,"dataBrowserSource","onFiltersUpdate",4,"ngIf"],["class","blankslate-container",3,"isVisible","type","title","subtitle",4,"ngIf"],[1,"data-browser",3,"dataBrowserSource","onFiltersUpdate"],["class","hyd-table",3,"data","sorting","sort",4,"ngIf"],["class","hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange",4,"ngIf"],[3,"ngClass","isVisible","type","title","subtitle",4,"ngIf"],[1,"hyd-table",3,"data","sorting","sort"],[3,"headerLabel","fieldName","columnName","sortable"],[3,"columnName","sortable"],[3,"columnName","actions","orientation"],[1,"hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange"],[3,"ngClass","isVisible","type","title","subtitle"],[1,"blankslate-container",3,"isVisible","type","title","subtitle"]],template:function(e,t){1&e&&(c.kc(0,"section",0),c.ed(1,qD,4,4,"data-browser",1),c.ed(2,VD,2,4,"blankslate",2),c.jc()),2&e&&(c.Mb(1),c.Dc("ngIf",t.showDataBrowser()),c.Mb(1),c.Dc("ngIf",t.showBlankslateWithoutFilters()))},directives:[m.p,Fe.a,Ue.a,ze.a,qe.c,qe.d,qe.b,Ve.a,Ne.b,jc.a,m.n],pipes:[M.b,ei.a],styles:["webex-account-list .blankslate-container{margin-top:91px}webex-account-list .hyd-paginator{position:fixed;bottom:0;left:0;width:100%}webex-account-list .webex-manage{overflow:hidden}webex-account-list .webex-manage .mdl-cell.mdl-cell--12-col{margin-top:0;margin-bottom:0}"],encapsulation:2,changeDetection:0}),e})();const GD=Object(w.l)("learn-webex"),HD=Object(w.n)(GD,e=>e);var $D=function(e){return e.NAME="name",e.CREATION="created_at",e}({}),YD=function(e){return e.ASC="asc",e.DESC="desc",e}({});const WD=["uiComponent"];let QD=(()=>{class e extends vc.a{constructor(e,t,i,s,n,a,o,r,c){super(),this.translationService=e,this.pageService=t,this.docLayoutService=i,this.router=s,this.webexStore=n,this.permissionManagerService=a,this.appStore=o,this.windowService=r,this.webexService=c,this.showLoader=!0,this.searchFilterValue="",this.tablePaginator={pageIndex:0,pageSize:15,length:0,pageSizeAutoAllowed:!0},this.tableActiveSorting=$D.CREATION,this.tableActiveSortingDir=YD.DESC,this.tableData=[],this.webexAccountSelector$=this.webexStore.pipe(Object(w.q)(HD)),this.PAGE_TITLE="Webex V2 (Classic)",this.pageInitialized=!1,this.snackbarIntervals=[],this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:this.PAGE_TITLE,href:this.router.url}]),this.hasUserViewPermission$=a.can(aD.a.USER_VIEW),this.webexAccountSelector$.pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{if(["AccountCreated","AccountEdited"].includes(e.status))switch(e.status){case"AccountCreated":this.fetchAccounts(),this.handleAccountCreated("success",e.lastCreatedAccount);break;case"AccountEdited":this.fetchAccounts(),this.handleAccountEdited("success",e.lastEditedAccount)}"AccountDeleted"===e.status&&e.lastDeletedAccountPartial&&(this.fetchAccounts(),this.handleAccountDeleted(e.lastDeletedAccountPartial))})}ngOnInit(){this.pageService.ready().pipe(Object(se.a)(1)).subscribe(()=>{this.pageDialog=this.pageService.dialog,this.rightPanel=this.pageService.rightPanel,this.setPageTitle(),this.setActionButtons(),this.pageInitialized=!0})}ngAfterViewInit(){this.fetchAccounts()}ngOnDestroy(){this.docLayoutService.actionButtons.clearActionButtons(),super.ngOnDestroy(),this.webexStore.dispatch(new _D)}onFiltersUpdate(e){this.searchFilterValue=e.search?e.search:"",this.fetchAccounts()}onTableSort(e){switch(this.tableActiveSortingDir=e.dir,e.columnName){case"createdAt":this.tableActiveSorting=$D.CREATION;break;case"name":this.tableActiveSorting=$D.NAME}this.fetchAccounts()}onTablePageChange(e){const{pageIndex:t}=e;let{pageSize:i}=e;i<1&&(i=this.getAutoPageSize()),this.tablePaginator.pageSize=i,this.tablePaginator.pageIndex=t,this.fetchAccounts()}onOpenDeleteDialog(e){const t=e.id,i=e.name;this.docLayoutService.dialog.showCommonDialog(this.setDeleteDialogParams()).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.webexService.deleteAccount(t).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(()=>{e.actionSuccess.next(!0),this.webexStore.dispatch(new fD({id:t,name:i}))})})}onEditAccountRequested(e){this.openAccountRightPanel(e)}getAutoPageSize(){const e=document.querySelector("webex-account-list");return Math.floor((window.innerHeight-e.offsetTop-90-80-39)/38)}createAccountCreationSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully created!",{accountName:e?e.name:""})}createAccountFaliureSnackbarLabel(e){return M.a.t("webinar","There were error creating <b>{accountName}</b>!",{accountName:e?e.name:""})}createAccountEditSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully edited!",{accountName:e?e.name:""})}editAccountFaliureSnackbarLabel(e){return M.a.t("webinar","There were error updating <b>{accountName}</b>!",{accountName:e?e.name:""})}createAccountDeleteSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully deleted!",{accountName:e.name})}deleteAccountFaliureSnackbarLabel(e){return M.a.t("webinar","There were error deleting <b>{accountName}</b>!",{accountName:e.name})}showFailureSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"error"})}showSuccessSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"success"})}setPageTitle(){this.docLayoutService.header.showTitleBar({title:this.PAGE_TITLE,subtitle:M.a.t("webinar","Manage your Webex accounts. For more info read our Knowledge Base"),fullWidth:!0,mode:"bordered"})}setActionButtons(){const e=[{properties:{BgClass:"bg-positive-green",textClass:"text-white",icons:["plus"],tooltipText:M.a.t("webinar","New Account"),tooltipPosition:"bottom"},onClick:()=>{this.openAccountRightPanel()}}];this.docLayoutService.actionButtons.setActionButtons(e)}openAccountRightPanel(e){let t,i;e?(t=M.a.t("webinar","Edit Account"),i=M.a.t("webinar","Edit the details of your account to update it")):(t=M.a.t("webinar","New Account"),i=M.a.t("webinar","Fill in all the mandatory details in order to create a new account"));const s={isEditMode:!!e,accountId:e?e.id:null,accountName:e?e.name:null,accountDescription:e?e.description:null,webexId:e?e.webexId:null,password:e?e.password:null,siteName:e?e.siteName:null,siteId:e?e.siteId:null,partnerId:e?e.partnerId:null,sessionTemplate:e?e.sessionTemplate:"",siteAdminOption:!e||e.siteAdminOption,sessionType:e?e.sessionType.toLowerCase():"meeting",sessionLimitCourses:e&&e.sessionLimitCourses>0?e.sessionLimitCourses:null,sessionLimitAccount:e&&e.sessionLimitAccount>0?e.sessionLimitAccount:null,sessionLimitConcurrentRooms:e&&e.sessionLimitConcurrentRooms>0?e.sessionLimitConcurrentRooms:null};this.pageService.rightPanel.setWidth(500).setTitle(t).setDescription(i).setContent({component:ED,params:s}).open()}fetchAccounts(){this.showLoader=!0,this.webexService.fetchAccounts({term:this.searchFilterValue,page:this.tablePaginator.pageIndex+1,page_size:this.tablePaginator.pageSize,sort:`${this.tableActiveSorting}.${this.tableActiveSortingDir}`}).subscribe(e=>{const t=[];for(const s of e.data.items)t.push({id:s.id,webexId:s.webex_id,password:s.password,siteName:s.site_name,siteId:s.site_id,partnerId:s.partner_id,sessionTemplate:s.template,name:s.name,description:s.description,createdAt:P_.a.unix(s.created_at).toDate(),siteAdminOption:s.host_listed,sessionType:wD(s.tool),sessionLimitCourses:s.max_sessions_per_course,sessionLimitAccount:s.max_sessions,sessionLimitConcurrentRooms:s.max_concurrent_sessions});const{total_count:i}=e.data;this.tablePaginator.length=i,this.mapTableData(t),this.showLoader=!1,this.uiComponent.checkForChanges()})}mapTableData(e){this.tableData=[],e.forEach(e=>{this.tableData.push(e)})}handleAccountCreated(e,t){if("success"===e){const e=this.createAccountCreationSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.createAccountFaliureSnackbarLabel(t);this.showFailureSnackbar(e)}}handleAccountEdited(e,t){if("success"===e){const e=this.createAccountEditSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.deleteAccountFaliureSnackbarLabel(t);this.showFailureSnackbar(e)}}handleAccountDeleted(e){const t=this.createAccountDeleteSuccessSnackbarLabel(e);this.showSuccessSnackbar(t)}setDeleteDialogParams(){return{id:"delete-checklist-dialog",width:460,height:210,title:M.a.t("standard","Delete Account"),content:M.a.t("standard","Are you sure you want to delete the selected account?<br>If you delete it, it will be definitely removed from the system and you will need to reassign all of the events created with this account to a different account. If you don't reassign the events, both learners and instructors will no longer be able to access them."),actions:[{id:"cancel",type:"neutral",label:M.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"negative",label:M.a.t("standard","Delete"),slot:"end"}]}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(rn.a),c.ec(P.a),c.ec(j.a),c.ec(s.h),c.ec(w.e),c.ec(dD.a),c.ec(w.e),c.ec(kc.a),c.ec(vD))},e.\u0275cmp=c.Yb({type:e,selectors:[["webex-account-container"]],viewQuery:function(e,t){if(1&e&&c.nd(WD,1),2&e){let e;c.Rc(e=c.tc())&&(t.uiComponent=e.first)}},features:[c.Jb],decls:2,vars:4,consts:[[3,"showLoader","tableData","tablePaginator","searchFilterValue","filtersUpdate","tableSort","tablePageChange","openDeleteDialog","editAccount"],["uiComponent",""]],template:function(e,t){1&e&&(c.kc(0,"webex-account-list",0,1),c.sc("filtersUpdate",function(e){return t.onFiltersUpdate(e)})("tableSort",function(e){return t.onTableSort(e)})("tablePageChange",function(e){return t.onTablePageChange(e)})("openDeleteDialog",function(e){return t.onOpenDeleteDialog(e)})("editAccount",function(e){return t.onEditAccountRequested(e)}),c.jc()),2&e&&c.Dc("showLoader",t.showLoader)("tableData",t.tableData)("tablePaginator",t.tablePaginator)("searchFilterValue",t.searchFilterValue)},directives:[BD],encapsulation:2,changeDetection:0}),e})();function KD(e,t){if(1&e&&(c.kc(0,"ui-input-select-option",23),c.gd(1),c.jc()),2&e){const e=t.$implicit;c.Dc("value",e.value),c.Mb(1),c.id(" ",e.label," ")}}const JD=function(){return{category:"error"}};function XD(e,t){1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e&&(c.Mb(1),c.id(" ",c.zc(2,1,"Something is missing, please select a Docebo Field",c.Hc(4,JD))," "))}function ZD(e,t){if(1&e&&(c.kc(0,"ui-input-select",20),c.xc(1,"t"),c.xc(2,"t"),c.ed(3,KD,2,2,"ui-input-select-option",21),c.ed(4,XD,3,5,"ui-input-error",22),c.jc()),2&e){const e=c.wc(2);c.Dc("label",c.yc(1,6,e.doceboFieldDropdown.label))("formControl",e.doceboFieldDropdown.inputFormControl)("requiredMarker",c.yc(2,8,e.doceboFieldDropdown.requiredMarker))("required",e.doceboFieldDropdown.required),c.Mb(3),c.Dc("ngForOf",e.doceboFieldDropdown.options),c.Mb(1),c.Dc("ngIf",(null==e.doceboFieldDropdown.inputFormControl.errors?null:e.doceboFieldDropdown.inputFormControl.errors.required)&&e.doceboFieldDropdown.inputFormControl.dirty)}}function eO(e,t){if(1&e&&(c.kc(0,"div",11),c.kc(1,"div",3),c.kc(2,"div",12),c.gd(3),c.xc(4,"t"),c.kc(5,"div",17),c.gd(6),c.xc(7,"t"),c.jc(),c.jc(),c.kc(8,"ui-input-checkbox",18),c.kc(9,"ui-input-label"),c.gd(10),c.xc(11,"t"),c.jc(),c.kc(12,"ui-input-description"),c.gd(13),c.xc(14,"t"),c.jc(),c.jc(),c.ed(15,ZD,5,10,"ui-input-select",19),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(3),c.id(" ",c.yc(4,6,e.dictionary.attendanceTrackingTitle)," "),c.Mb(3),c.id(" ",c.yc(7,8,e.dictionary.attendanceTrackingSubtitle)," "),c.Mb(2),c.Dc("formControl",e.attendanceTrackingCheckbox.inputFormControl),c.Mb(2),c.id(" ",c.yc(11,10,e.dictionary.attendanceTrackingCheckboxTitle)," "),c.Mb(3),c.id(" ",c.yc(14,12,e.dictionary.attendanceTrackingCheckboxDesc)," "),c.Mb(2),c.Dc("ngIf",e.attendanceTrackingCheckbox.inputFormControl.value)}}function tO(e,t){if(1&e&&(c.kc(0,"div",24),c.fc(1,"textfield",25),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitCoursesTextField.type)("id",e.sessionLimitCoursesTextField.id)("floating_label",e.sessionLimitCoursesTextField.floating_label)("label",e.sessionLimitCoursesTextField.label)("max_length",e.sessionLimitCoursesTextField.max_length)("inputFormControl",e.sessionLimitCoursesTextField.inputFormControl)("showRequiredFieldIndicator",!0)("minValueNumber",0)}}function iO(e,t){if(1&e&&(c.kc(0,"div",24),c.fc(1,"textfield",25),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitAccountTextField.type)("id",e.sessionLimitAccountTextField.id)("floating_label",e.sessionLimitAccountTextField.floating_label)("label",e.sessionLimitAccountTextField.label)("max_length",e.sessionLimitAccountTextField.max_length)("inputFormControl",e.sessionLimitAccountTextField.inputFormControl)("showRequiredFieldIndicator",!0)("minValueNumber",0)}}function sO(e,t){if(1&e&&(c.kc(0,"div",24),c.fc(1,"textfield",25),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitConcurrentRoomsTextField.type)("id",e.sessionLimitConcurrentRoomsTextField.id)("floating_label",e.sessionLimitConcurrentRoomsTextField.floating_label)("label",e.sessionLimitConcurrentRoomsTextField.label)("max_length",e.sessionLimitConcurrentRoomsTextField.max_length)("inputFormControl",e.sessionLimitConcurrentRoomsTextField.inputFormControl)("showRequiredFieldIndicator",!0)("minValueNumber",0)}}const nO=function(){return{category:"standard"}},aO=function(){return{category:"webinar"}},oO=function(){return{category:"admin"}};let rO=(()=>{class e{constructor(e,t,i){this.cdr=e,this.toggleService=t,this.dictionary=i,this.isEditMode=!1,this.requiredMarker=M.a.t("standard","(Required)")}ngOnInit(){this.setFormFieldsParams(),this.formGroup.valueChanges.subscribe(()=>{this.cdr.detectChanges()})}checkForChanges(){this.cdr.markForCheck()}setFormFieldsParams(){this.name={type:et.a.TEXT,id:"account-name",floating_label:!0,label:M.a.t("webinar","Account Name"),max_length:50,show_counter:!0,inputFormControl:this.formGroup.controls.name},this.description={type:et.a.TEXT,id:"account-description",floating_label:!0,label:M.a.t("app7020","Description"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.description},this.username={type:et.a.TEXT,id:"username",floating_label:!0,label:M.a.t("standard","Username"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.username},this.password={type:et.a.PASSWORD,id:"password",floating_label:!0,label:M.a.t("shopify","Password"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.password,tooltipLabelShow:M.a.t("login","Show password"),tooltipLabelHide:M.a.t("login","Hide password")},this.serverUrl={type:et.a.TEXT,id:"server-url",floating_label:!0,label:M.a.t("custom_domain","_DOMAIN_NAME_"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.serverUrl},this.sessionType={id:"session-type",value:"meeting",name:"sessionType",inputFormControl:this.formGroup.get("sessionType")},this.sessionLimitCoursesTextField={type:et.a.NUMBER,id:"session-limit-courses",floating_label:!0,label:M.a.t("configuration","Max rooms per course"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitCourses")},this.sessionLimitAccountTextField={type:et.a.NUMBER,id:"session-limit-accounts",floating_label:!0,label:M.a.t("webinar","Max sessions for this account"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitAccount")},this.sessionLimitConcurrentRoomsTextField={type:et.a.NUMBER,id:"session-limit-concurrents",floating_label:!0,label:M.a.t("configuration","Max concurrent rooms"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitConcurrentRooms")},this.attendanceTrackingCheckbox={inputFormControl:this.formGroup.controls.attendanceTrackingCheckbox},this.doceboFieldDropdown={label:M.a.t("salesforce","Docebo Field"),inputFormControl:this.formGroup.controls.doceboField,options:this.doceboFieldList,required:!0,requiredMarker:this.dictionary.requiredMarkerLabel};const e=!!this.formGroup.get("sessionLimitCourses").value;this.sessionLimitCoursesCheckbox={label:M.a.t("webinar","Set session limits for courses"),inputFormControl:new Ze.e(e),checked:e},this.sessionLimitCoursesCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitCoursesCheckbox").setValue(e)});const t=!!this.formGroup.get("sessionLimitAccount").value;this.sessionLimitAccountCheckbox={label:M.a.t("webinar","Set session limits per accounts"),inputFormControl:new Ze.e(t),checked:t},this.sessionLimitAccountCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitAccountCheckbox").setValue(e)});const i=!!this.formGroup.get("sessionLimitConcurrentRooms").value;this.sessionLimitConcurrentRoomsCheckbox={label:M.a.t("webinar","Set session for concurrent rooms"),inputFormControl:new Ze.e(i),checked:i},this.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.get("sessionLimitConcurrentRoomsCheckbox").setValue(e)})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i),c.ec(u.g),c.ec(L))},e.\u0275cmp=c.Yb({type:e,selectors:[["adobeconnect-account-panel-ui"]],inputs:{formGroup:"formGroup",isEditMode:"isEditMode",doceboFieldList:"doceboFieldList",canShowAttendanceTrackingOption:"canShowAttendanceTrackingOption"},decls:61,vars:98,consts:[[1,"adobeconnect-create-account"],[1,"border-top-wrapper",3,"formGroup"],[1,"adobeconnect-account-info-container"],[1,"details-container"],[1,"bold-subtitle"],[1,"adobeconnect-account-text-field-margin"],[3,"label","id","requiredMarker","formControl","autocomplete","maxLength"],[3,"label","id","formControl","autocomplete"],[3,"label","id","requiredMarker","formControl","autocomplete"],[3,"label","id","requiredMarker","formControl","tooltipLabelShow","tooltipLabelHide","autocomplete"],["class","border-top-wrapper adobeconnect-account-info-container",4,"ngIf"],[1,"border-top-wrapper","adobeconnect-account-info-container"],[1,"bold-subtitle","options-subtitle"],[1,"options-container"],[3,"id","label","name","value","inputFormControl"],[3,"inputFormControl","checked","label"],["class","adobeconnect-account-margin-huge",4,"ngIf"],[1,"ui-typography-subtitle","ui-color-typography-secondary"],[3,"formControl"],["ngDefaultControl","",3,"label","formControl","requiredMarker","required",4,"ngIf"],["ngDefaultControl","",3,"label","formControl","requiredMarker","required"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[1,"adobeconnect-account-margin-huge"],[3,"type","id","floating_label","label","max_length","inputFormControl","showRequiredFieldIndicator","minValueNumber"]],template:function(e,t){1&e&&(c.kc(0,"section",0),c.kc(1,"form",1),c.kc(2,"div",2),c.kc(3,"div",3),c.kc(4,"div",4),c.gd(5),c.xc(6,"t"),c.jc(),c.kc(7,"div",5),c.fc(8,"ui-input-text",6),c.xc(9,"t"),c.xc(10,"t"),c.jc(),c.kc(11,"div",5),c.fc(12,"ui-input-text",7),c.xc(13,"t"),c.jc(),c.kc(14,"div",5),c.fc(15,"ui-input-text",8),c.xc(16,"t"),c.xc(17,"t"),c.jc(),c.kc(18,"div",5),c.fc(19,"ui-input-text",8),c.xc(20,"t"),c.xc(21,"t"),c.jc(),c.kc(22,"div",5),c.fc(23,"ui-input-password",9),c.xc(24,"t"),c.xc(25,"t"),c.xc(26,"t"),c.xc(27,"t"),c.jc(),c.jc(),c.jc(),c.ed(28,eO,16,14,"div",10),c.kc(29,"div",11),c.kc(30,"div",3),c.kc(31,"div",12),c.gd(32),c.xc(33,"t"),c.jc(),c.kc(34,"div",13),c.kc(35,"div"),c.fc(36,"radio",14),c.xc(37,"t"),c.jc(),c.kc(38,"div"),c.fc(39,"radio",14),c.xc(40,"t"),c.jc(),c.jc(),c.jc(),c.jc(),c.kc(41,"div",11),c.kc(42,"div",3),c.kc(43,"div",12),c.gd(44),c.xc(45,"t"),c.jc(),c.kc(46,"div",13),c.kc(47,"div"),c.fc(48,"checkbox",15),c.jc(),c.ed(49,tO,2,8,"div",16),c.xc(50,"async"),c.jc(),c.kc(51,"div",13),c.kc(52,"div"),c.fc(53,"checkbox",15),c.jc(),c.ed(54,iO,2,8,"div",16),c.xc(55,"async"),c.jc(),c.kc(56,"div",13),c.kc(57,"div"),c.fc(58,"checkbox",15),c.jc(),c.ed(59,sO,2,8,"div",16),c.xc(60,"async"),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(1),c.Dc("formGroup",t.formGroup),c.Mb(4),c.id(" ",c.zc(6,54,"General Information",c.Hc(95,nO))," "),c.Mb(3),c.Dc("label",c.yc(9,57,t.name.label))("id",t.name.id)("requiredMarker",c.yc(10,59,t.requiredMarker))("formControl",t.name.inputFormControl)("autocomplete","off")("maxLength",t.name.max_length),c.Mb(4),c.Dc("label",c.yc(13,61,t.description.label))("id",t.description.id)("formControl",t.description.inputFormControl)("autocomplete","off"),c.Mb(3),c.Dc("label",c.yc(16,63,t.serverUrl.label))("id",t.serverUrl.id)("requiredMarker",c.yc(17,65,t.requiredMarker))("formControl",t.serverUrl.inputFormControl)("autocomplete","off"),c.Mb(4),c.Dc("label",c.yc(20,67,t.username.label))("id",t.username.id)("requiredMarker",c.yc(21,69,t.requiredMarker))("formControl",t.username.inputFormControl)("autocomplete","off"),c.Mb(4),c.Dc("label",c.yc(24,71,t.password.label))("id",t.password.id)("requiredMarker",c.yc(25,73,t.requiredMarker))("formControl",t.password.inputFormControl)("tooltipLabelShow",c.yc(26,75,t.password.tooltipLabelShow))("tooltipLabelHide",c.yc(27,77,t.password.tooltipLabelHide))("autocomplete","off"),c.Mb(5),c.Dc("ngIf",t.canShowAttendanceTrackingOption),c.Mb(4),c.id(" ",c.zc(33,79,"Session type",c.Hc(96,aO))," "),c.Mb(4),c.Dc("id",t.sessionType.id)("label",c.yc(37,82,"Meeting"))("name",t.sessionType.name)("value","meeting")("inputFormControl",t.sessionType.inputFormControl),c.Mb(3),c.Dc("id",t.sessionType.id)("label",c.yc(40,84,"Seminar"))("name",t.sessionType.name)("value","seminar")("inputFormControl",t.sessionType.inputFormControl),c.Mb(5),c.id(" ",c.zc(45,86,"Options",c.Hc(97,oO))," "),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitCoursesCheckbox.inputFormControl)("checked",t.sessionLimitCoursesCheckbox.checked)("label",t.sessionLimitCoursesCheckbox.label),c.Mb(1),c.Dc("ngIf",c.yc(50,89,t.sessionLimitCoursesCheckbox.inputFormControl.valueChanges)||t.sessionLimitCoursesTextField.inputFormControl.value>0&&t.sessionLimitCoursesCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitAccountCheckbox.inputFormControl)("checked",t.sessionLimitAccountCheckbox.checked)("label",t.sessionLimitAccountCheckbox.label),c.Mb(1),c.Dc("ngIf",c.yc(55,91,t.sessionLimitAccountCheckbox.inputFormControl.valueChanges)||t.sessionLimitAccountTextField.inputFormControl.value>0&&t.sessionLimitAccountCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitConcurrentRoomsCheckbox.inputFormControl)("checked",t.sessionLimitConcurrentRoomsCheckbox.checked)("label",t.sessionLimitConcurrentRoomsCheckbox.label),c.Mb(1),c.Dc("ngIf",c.yc(60,93,t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges)||t.sessionLimitConcurrentRoomsTextField.inputFormControl.value>0&&t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.value||!1))},directives:[Ze.y,Ze.p,Ze.i,b.Qc,Ze.o,Ze.f,b.Dc,m.p,Zn.a,ih.a,b.sc,b.Cc,b.zc,b.Lc,Ze.b,Ze.v,m.o,b.Nc,b.Ac,Ct.a],pipes:[M.b,m.b],styles:[".color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}adobeconnect-account-panel-ui .bold-subtitle{padding-bottom:6px;font-weight:600;font-size:14px;line-height:18px}adobeconnect-account-panel-ui .border-top-wrapper{border-top:1px solid var(--ui-color-badge-background-light)}adobeconnect-account-panel-ui .details-container{padding:24px 0}adobeconnect-account-panel-ui .options-subtitle{margin-bottom:16px}adobeconnect-account-panel-ui .options-label{padding-left:24px}adobeconnect-account-panel-ui .docebo-radio{margin-bottom:0}adobeconnect-account-panel-ui .adobeconnect-account-limit-list{padding:24px}adobeconnect-account-panel-ui .adobeconnect-account-redirect-info{display:flex;align-items:center;padding:var(--hyd-spacing-sm) var(--hyd-spacing-md)}.router-outlet:not(.direction-rtl):not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-redirect-info span{margin-left:29px}.router-outlet.direction-rtl:not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-redirect-info span{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-redirect-info span{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-redirect-info span{margin-right:29px}.router-outlet:not(.direction-rtl):not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-margin{margin-left:12px}.router-outlet.direction-rtl:not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-margin{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-margin{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-margin{margin-right:12px}.router-outlet:not(.direction-rtl):not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-margin-huge{margin-left:26px}.router-outlet.direction-rtl:not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-margin-huge{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-margin-huge{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) adobeconnect-account-panel-ui .adobeconnect-account-margin-huge{margin-right:26px}adobeconnect-account-panel-ui .adobeconnect-account-info-container{padding:0 var(--hyd-spacing-md);box-sizing:border-box}adobeconnect-account-panel-ui .adobeconnect-account-text-field-margin{margin:16px 0 24px}adobeconnect-account-panel-ui .adobeconnect-account-text-field-margin-no-bottom{margin:16px 0 0}adobeconnect-account-panel-ui ui-input-select{width:95%;margin:var(--hyd-spacing-xxs) var(--hyd-spacing-lg)}"],encapsulation:2,changeDetection:0}),e})();const cO=["uiComponent"];let lO=(()=>{class e extends vc.a{constructor(e,t,i,s,n,a){super(),this.router=e,this.toggleService=t,this.pageService=i,this.adobeConnectService=s,this.adobeConnectStore=n,this.translationService=a,this.isEditMode=!1,this.attendanceTrackingCheckbox=!1,this.toggleAdobeConnectIsOn=!1,this.toggleAdobeConnectAttendanceTrackingIsOn=!1}static createBaseRedirectUri(){return`${E.b.getInstance().getFullLmsCustomUrl()}/learn/adobeconnect`}get canShowAttendanceTrackingOption(){return this.toggleAdobeConnectAttendanceTrackingIsOn&&this.toggleAdobeConnectIsOn}ngOnInit(){this.toggleAdobeConnectIsOn=this.toggleService.isOn(u.f.TOGGLE_ADOBE_CONNECT_V2_SESSION_COMPLETION_VILT),this.toggleAdobeConnectAttendanceTrackingIsOn=this.toggleService.isOn(u.f.TOGGLE_ADOBE_CONNECT_V2_ATTENDANCE_TRACKING),this.rightPanel=this.pageService.rightPanel,this.setFormGroup(),this.rightPanel.buttonsDisabled(),this.attendanceTrackingCheckboxControlValueChanges(),this.sessionLimitCheckboxesValueChanges(["Courses","Account","ConcurrentRooms"]),this.form.valueChanges.pipe(Object(yt.a)(250),Object(wt.a)(),Object(vt.a)(this.ngUnsubscribe)).subscribe(()=>{this.form.valid?this.rightPanel.buttonsEnabled():this.rightPanel.buttonsDisabled()})}ngAfterViewInit(){this.setPanelActions()}ngOnDestroy(){super.ngOnDestroy(),this.rightPanel.buttonsEnabled()}setPanelActions(){const e=[],t=M.a.t("standard",this.isEditMode?"Confirm":"Create & Edit");e.push({type:"normal",properties:{text:t},customClasses:"float-ltr-right-clear-none",handler:()=>{this.checkCustomFormValidations(),this.form.valid?(this.cleanFormValues(this.form),this.createAccount()):(this.markFormGroupAsTouchedAndDirty(this.form,!0),this.form.setValue(this.form.value))}}),e.push({type:"cancel",properties:{text:M.a.t("standard","Cancel")},customClasses:"float-ltr-right-clear-none",handler:e=>{e.close()}}),this.rightPanel.setActions(e)}createAccount(){this.rightPanel.buttonsDisabled(),this.adobeConnectService.createAccount(this.form).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{this.name=e.data.name,this.accountId=e.data.id;const t={id:e.data.id,name:this.name,description:e.data.additional_info,createdAt:P_()().toDate(),username:e.data.admin_username,password:e.data.admin_password,serverUrl:e.data.server_url,sessionType:e.data.session_type,sessionLimitCourses:0|this.form.get("sessionLimitCourses").value,sessionLimitAccount:0|this.form.get("sessionLimitAccount").value,sessionLimitConcurrentRooms:0|this.form.get("sessionLimitConcurrentRooms").value,assignedTemplates:null,assignedFolders:null,assignedRooms:null,doceboField:e.data.tool_mapping_field_lms};this.adobeConnectStore.dispatch(new U(t)),this.rightPanel.close(),this.navigateTo("/learn/adobeconnect/edit/"+this.accountId)},this.accountUpsertErrorCallback())}navigateTo(e){this.router.navigate([e])}accountUpsertErrorCallback(){return e=>{1002===e.code&&(Object(Cy.l)(this.form),Object(Cy.l)(this.form),this.uiComponent.checkForChanges(),this.rightPanel.buttonsEnabled())}}cleanFormValues(e){e.get("sessionLimitCoursesCheckbox").value||e.get("sessionLimitCourses").setValue(0),e.get("sessionLimitAccountCheckbox").value||e.get("sessionLimitAccount").setValue(0),e.get("sessionLimitConcurrentRoomsCheckbox").value||e.get("sessionLimitConcurrentRooms").setValue(0)}setFormGroup(){this.form=new Ze.h({id:new Ze.e(this.accountId),name:new Ze.e(this.name),description:new Ze.e(this.description),username:new Ze.e(this.username),password:new Ze.e(this.password),serverUrl:new Ze.e(this.serverUrl),sessionType:new Ze.e("meeting"),sessionLimitCourses:new Ze.e(this.sessionLimitCourses),sessionLimitCoursesCheckbox:new Ze.e(!!this.sessionLimitCourses),sessionLimitAccount:new Ze.e(this.sessionLimitAccount),sessionLimitAccountCheckbox:new Ze.e(!!this.sessionLimitAccount),sessionLimitConcurrentRooms:new Ze.e(this.sessionLimitConcurrentRooms),sessionLimitConcurrentRoomsCheckbox:new Ze.e(!!this.sessionLimitConcurrentRooms),attendanceTrackingCheckbox:new Ze.e(this.attendanceTrackingCheckbox),doceboField:new Ze.e(this.doceboField)}),this.checkCustomFormValidations()}checkCustomFormValidations(){this.form.get("name").setValidators([Ze.x.required,e=>"string"==typeof e.value&&e.value.match("^\\s+$")?{notHaveOnlyBlankCharacters:"This field cannot contains only empty spaces"}:null,Ze.x.maxLength(50)]),this.form.get("description").setValidators([Ze.x.maxLength(255)]),this.form.get("username").setValidators([Ze.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ze.x.maxLength(255)]),this.form.get("password").setValidators([Ze.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ze.x.maxLength(255)]),this.form.get("serverUrl").setValidators([Ze.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ze.x.maxLength(255)]),this.form.get("sessionLimitCourses").setValidators([st(999,"sessions",this.translationService),it("sessionLimitCoursesCheckbox")]),this.form.get("sessionLimitAccount").setValidators([st(999,"sessions",this.translationService),it("sessionLimitAccountCheckbox")]),this.form.get("sessionLimitConcurrentRooms").setValidators([st(999,"rooms",this.translationService),it("sessionLimitConcurrentRoomsCheckbox")]),this.form.get("doceboField").setValidators([it("attendanceTrackingCheckbox")]),this.form.get("name").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("username").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("password").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("serverUrl").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.get("sessionType").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}sessionLimitCourcesValidator(e){return e.parent?e.parent.get("sessionLimitCoursesCheckbox").value?Ze.x.required(e):void 0:null}markFormGroupAsTouchedAndDirty(e,t=!1){Object.keys(e.controls).forEach(i=>{e.controls[i].markAsTouched(),t&&e.controls[i].markAsDirty()})}attendanceTrackingCheckboxControlValueChanges(){return this.form.controls.attendanceTrackingCheckbox.valueChanges.pipe(Object(yt.a)(400),Object(wt.a)()).subscribe(e=>{e?this.form.controls.doceboField.setValidators([Ze.x.required]):(this.form.controls.doceboField.clearValidators(),this.form.controls.doceboField.setErrors(null)),this.form.controls.doceboField.updateValueAndValidity()})}sessionLimitCheckboxesValueChanges(e){e.forEach(e=>{this.form.controls[`sessionLimit${e}Checkbox`].valueChanges.pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(t=>{t?this.form.controls[`sessionLimit${e}`].setValidators([Ze.x.required,st(999,"ConcurrentRooms"===e?"rooms":"sessions",this.translationService)]):(this.form.controls[`sessionLimit${e}`].clearValidators(),this.form.controls[`sessionLimit${e}`].setValue(0)),this.form.controls[`sessionLimit${e}`].updateValueAndValidity(),this.form.controls[`sessionLimit${e}`].markAsTouched(),this.form.controls[`sessionLimit${e}`].markAsDirty()})})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.h),c.ec(u.g),c.ec(P.a),c.ec(x),c.ec(w.e),c.ec(rn.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["adobeconnect-account-panel-container"]],viewQuery:function(e,t){if(1&e&&c.nd(cO,1),2&e){let e;c.Rc(e=c.tc())&&(t.uiComponent=e.first)}},inputs:{isEditMode:"isEditMode",accountId:"accountId",name:"name",description:"description",username:"username",password:"password",serverUrl:"serverUrl",sessionType:"sessionType",sessionLimitCourses:"sessionLimitCourses",sessionLimitAccount:"sessionLimitAccount",sessionLimitConcurrentRooms:"sessionLimitConcurrentRooms",attendanceTrackingCheckbox:"attendanceTrackingCheckbox",doceboField:"doceboField",doceboFieldList:"doceboFieldList"},features:[c.Lb([x]),c.Jb],decls:2,vars:3,consts:[[3,"formGroup","doceboFieldList","canShowAttendanceTrackingOption"],["uiComponent",""]],template:function(e,t){1&e&&c.fc(0,"adobeconnect-account-panel-ui",0,1),2&e&&c.Dc("formGroup",t.form)("doceboFieldList",t.doceboFieldList)("canShowAttendanceTrackingOption",t.canShowAttendanceTrackingOption)},directives:[rO,Ze.p,Ze.i],styles:["adobeconnect-account-panel-ui{height:100%;overflow-y:auto;overflow-x:hidden;display:block}"],encapsulation:2,changeDetection:0}),e})();const dO={isVisible:!0,type:Tl.a.BLANK001,title:M.a.t("webinar","No Adobe Connect Accounts Found"),subtitle:M.a.t("webinar","Click the Add button in the top right corner to add a new Adobe Connect account!")},uO={isVisible:!0,type:Tl.a.EMPTY001,title:M.a.t("standard","Whoops, No results found!"),subtitle:M.a.t("myteam","Please try again using different search/filters criteria.")},hO={mode:Me.a.push,viewOptionLabel:M.a.t("standard","SORT BY"),filters:new je.a([{title:M.a.t("standard","Search"),code:"search",type:Me.d.free_search_filter,params:{placeholder:M.a.t("standard","Search...")}}]),appliedFiltersNumber:new je.a(null),displayedItemsNumber:new je.a(null),viewOptions:new je.a(null),disableViewOptions:!1,elementLabels:{singular:M.a.t("standard","items"),plural:M.a.t("standard","items")}},pO={columnName:"createdAt",dir:Hx.a.DESC},gO={name:{headerLabel:M.a.t("webinar","Account Name"),fieldName:"name",columnName:"name",sortable:!0},description:{headerLabel:M.a.t("app7020","Description"),fieldName:"description",columnName:"description",sortable:!1},createdAt:{headerLabel:M.a.t("standard","Creation Date"),fieldName:"createdAt",columnName:"createdAt",sortable:!0,type:"date",format:"MM/DD/YYYY"},sessionType:{headerLabel:M.a.t("standard","Type"),fieldName:"sessionType",columnName:"sessionType",sortable:!1},serverUrl:{headerLabel:M.a.t("custom_domain","_DOMAIN_NAME_"),fieldName:"serverUrl",columnName:"serverUrl",sortable:!1},ellipsis:{}},mO=["hydTable"];function bO(e,t){if(1&e&&(c.gd(0),c.xc(1,"t")),2&e){const e=c.wc(3);c.hd(c.yc(1,1,e.tableColumns.name.headerLabel))}}function fO(e,t){if(1&e&&(c.kc(0,"a",12),c.gd(1),c.xc(2,"stripTags"),c.jc()),2&e){const e=t.item;c.Dc("routerLink","/learn/adobeconnect/edit/"+e.id),c.Mb(1),c.id(" ",c.yc(2,2,e.name)," ")}}function _O(e,t){if(1&e&&(c.gd(0),c.xc(1,"t")),2&e){const e=c.wc(3);c.hd(c.yc(1,1,e.tableColumns.createdAt.headerLabel))}}function vO(e,t){1&e&&(c.gd(0),c.xc(1,"HDateTime")),2&e&&c.id(" ",c.Ac(1,1,t.item.createdAt,null,"lll")," ")}function yO(e,t){}function wO(e,t){if(1&e&&c.fc(0,"btn-ellipsis",14),2&e){const e=c.wc().item,t=c.wc(3);c.dd("width","100%")("text-align",t.tableColumns.ellipsis.alignment),c.Dc("params",e)("orientation",t.tableColumns.ellipsis.orientation)("actions",t.tableColumns.ellipsis.actions)("treeBody",t.hydTableTemlpElem.nativeElement)}}function CO(e,t){if(1&e&&c.ed(0,wO,1,8,"btn-ellipsis",13),2&e){const e=c.wc(3);c.Dc("ngIf",e.hydTableTemlpElem)}}function SO(e,t){if(1&e){const e=c.lc();c.kc(0,"hyd-table",7,8),c.sc("sort",function(t){return c.Vc(e),c.wc(2).onTableSort(t)}),c.kc(2,"hyd-table-column",9),c.kc(3,"hyd-table-column-header"),c.ed(4,bO,2,3,"ng-template"),c.jc(),c.kc(5,"hyd-table-column-cell"),c.ed(6,fO,3,4,"ng-template"),c.jc(),c.jc(),c.fc(7,"hyd-table-column-text",10),c.kc(8,"hyd-table-column",9),c.kc(9,"hyd-table-column-header"),c.ed(10,_O,2,3,"ng-template"),c.jc(),c.kc(11,"hyd-table-column-cell"),c.ed(12,vO,2,5,"ng-template"),c.jc(),c.jc(),c.fc(13,"hyd-table-column-text",10),c.fc(14,"hyd-table-column-text",10),c.kc(15,"hyd-table-column",11),c.kc(16,"hyd-table-column-header"),c.ed(17,yO,0,0,"ng-template"),c.jc(),c.kc(18,"hyd-table-column-cell"),c.ed(19,CO,1,1,"ng-template"),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc(2);c.Dc("data",e.tableData)("sorting",e.tableDefaultSorting),c.Mb(2),c.Dc("columnName",e.tableColumns.name.columnName)("sortable",e.tableColumns.name.sortable),c.Mb(5),c.Dc("headerLabel",e.tableColumns.description.headerLabel)("fieldName",e.tableColumns.description.fieldName)("columnName",e.tableColumns.description.columnName)("sortable",e.tableColumns.description.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.createdAt.columnName)("sortable",e.tableColumns.createdAt.sortable),c.Mb(5),c.Dc("headerLabel",e.tableColumns.sessionType.headerLabel)("fieldName",e.tableColumns.sessionType.fieldName)("columnName",e.tableColumns.sessionType.columnName)("sortable",e.tableColumns.sessionType.sortable),c.Mb(1),c.Dc("headerLabel",e.tableColumns.serverUrl.headerLabel)("fieldName",e.tableColumns.serverUrl.fieldName)("columnName",e.tableColumns.serverUrl.columnName)("sortable",e.tableColumns.serverUrl.sortable),c.Mb(1),c.Dc("columnWidth",e.tableColumns.ellipsis.columnWidth)("ellipsed",e.tableColumns.ellipsis.ellipsed)("columnName",e.tableColumns.ellipsis.columnName)}}function kO(e,t){if(1&e&&c.fc(0,"blankslate",15),2&e){const e=c.wc(2);c.Dc("ngClass","blankslate-container")("isVisible",e.blankslateWithFilters.isVisible)("type",e.blankslateWithFilters.type)("title",e.blankslateWithFilters.title)("subtitle",e.blankslateWithFilters.subtitle)}}function TO(e,t){if(1&e){const e=c.lc();c.kc(0,"data-browser",3),c.sc("onFiltersUpdate",function(t){return c.Vc(e),c.wc().onDataBrowserFiltersUpdate(t)}),c.ed(1,SO,20,21,"hyd-table",4),c.kc(2,"hyd-paginator",5),c.sc("pageChange",function(t){return c.Vc(e),c.wc().onTablePageChange(t)}),c.jc(),c.ed(3,kO,1,5,"blankslate",6),c.jc()}if(2&e){const e=c.wc();c.Dc("dataBrowserSource",e.dataBrowserSource),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("pageIndex",e.tablePaginator.pageIndex)("pageSize",e.tablePaginator.pageSize)("length",e.tablePaginator.length)("pageSizeAutoAllowed",e.tablePaginator.pageSizeAutoAllowed),c.Mb(1),c.Dc("ngIf",e.showBlankslateWithFilters())}}function IO(e,t){if(1&e&&(c.kc(0,"blankslate",16),c.gd(1," > "),c.jc()),2&e){const e=c.wc();c.Dc("isVisible",e.blankslateWithoutFilters.isVisible)("type",e.blankslateWithoutFilters.type)("title",e.blankslateWithoutFilters.title)("subtitle",e.blankslateWithoutFilters.subtitle)}}let xO=(()=>{class e{constructor(e,t){this.cdr=e,this.toggleService=t,this.filtersUpdate=new c.q,this.tableSort=new c.q,this.tablePageChange=new c.q,this.openDeleteDialog=new c.q,this.editAccount=new c.q,this.blankslateWithoutFilters=dO,this.blankslateWithFilters=uO,this.dataBrowserSource=hO,this.tableDefaultSorting=pO,this.tableColumns=gO,this.setTableEllipsisColumn()}showBlankslateWithoutFilters(){return!this.showLoader&&0===this.tableData.length&&""===this.searchFilterValue}showBlankslateWithFilters(){return!this.showLoader&&0===this.tableData.length&&""!==this.searchFilterValue}showDataBrowser(){return this.tableData.length>0||""!==this.searchFilterValue}showTable(){return!this.showLoader&&this.tableData.length>0}onDataBrowserFiltersUpdate(e){this.filtersUpdate.emit(e)}onTableSort(e){this.tableSort.emit(e)}onTablePageChange(e){this.tablePageChange.emit(e)}checkForChanges(){this.cdr.markForCheck()}setTableEllipsisColumn(){this.tableColumns.ellipsis={columnName:"ellipsis",columnWidth:"30px",alignment:Le.a.RIGHT,ellipsed:!1,orientation:"bottom-right",actions:[{id:"edit",title:M.a.t("app7020","Edit"),params:null,active:!1,action:e=>{this.editAccount.emit(e)}},{id:"delete",title:M.a.t("standard","Delete"),params:null,active:!1,action:e=>{this.openDeleteDialog.emit(e)}}]}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["adobeconnect-account-list"]],viewQuery:function(e,t){if(1&e&&c.nd(mO,1,c.o),2&e){let e;c.Rc(e=c.tc())&&(t.hydTableTemlpElem=e.first)}},inputs:{tableData:"tableData",searchFilterValue:"searchFilterValue",showLoader:"showLoader",tablePaginator:"tablePaginator"},outputs:{filtersUpdate:"filtersUpdate",tableSort:"tableSort",tablePageChange:"tablePageChange",openDeleteDialog:"openDeleteDialog",editAccount:"editAccount"},decls:3,vars:2,consts:[[1,"adobeconnect-manage"],["class","data-browser",3,"dataBrowserSource","onFiltersUpdate",4,"ngIf"],["class","blankslate-container",3,"isVisible","type","title","subtitle",4,"ngIf"],[1,"data-browser",3,"dataBrowserSource","onFiltersUpdate"],["class","hyd-table",3,"data","sorting","sort",4,"ngIf"],[1,"hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange"],[3,"ngClass","isVisible","type","title","subtitle",4,"ngIf"],[1,"hyd-table",3,"data","sorting","sort"],["hydTable",""],[3,"columnName","sortable"],[3,"headerLabel","fieldName","columnName","sortable"],[3,"columnWidth","ellipsed","columnName"],[3,"routerLink"],[3,"params","orientation","actions","width","treeBody","text-align",4,"ngIf"],[3,"params","orientation","actions","treeBody"],[3,"ngClass","isVisible","type","title","subtitle"],[1,"blankslate-container",3,"isVisible","type","title","subtitle"]],template:function(e,t){1&e&&(c.kc(0,"section",0),c.ed(1,TO,4,7,"data-browser",1),c.ed(2,IO,2,4,"blankslate",2),c.jc()),2&e&&(c.Mb(1),c.Dc("ngIf",t.showDataBrowser()),c.Mb(1),c.Dc("ngIf",t.showBlankslateWithoutFilters()))},directives:[m.p,Fe.a,Ne.b,Ue.a,qe.c,qe.d,qe.b,ze.a,s.k,M_.a,jc.a,m.n],pipes:[M.b,Cb.a,ei.a],styles:["adobeconnect-account-list .blankslate-container{margin-top:91px}adobeconnect-account-list .hyd-paginator{position:fixed;bottom:0;left:0;width:100%}adobeconnect-account-list .adobeconnect-manage{overflow:hidden}adobeconnect-account-list .adobeconnect-manage .mdl-cell.mdl-cell--12-col{margin-top:0;margin-bottom:0}adobeconnect-account-list .hyd-table{height:calc(100vh - 260px)}adobeconnect-account-list div.data-browser-content{overflow:auto}"],encapsulation:2,changeDetection:0}),e})();const DO=Object(w.l)("learn-adobeconnect"),OO=Object(w.n)(DO,e=>e);var EO=function(e){return e.NAME="name",e.CREATION="created_at",e}({}),AO=function(e){return e.ASC="asc",e.DESC="desc",e}({});const PO=["uiComponent"];let MO=(()=>{class e extends vc.a{constructor(e,t,i,s,n,a,o,r,c,l){super(),this.translationService=e,this.pageService=t,this.docLayoutService=i,this.router=s,this.adobeConnectStore=n,this.permissionManagerService=a,this.appStore=o,this.windowService=r,this.adobeConnectService=c,this.toggleService=l,this.showLoader=!0,this.searchFilterValue="",this.tablePaginator={pageIndex:0,pageSize:15,length:0,pageSizeAutoAllowed:!0},this.tableActiveSorting=EO.CREATION,this.tableActiveSortingDir=AO.DESC,this.tableData=[],this.adobeConnectAccountSelector$=this.adobeConnectStore.pipe(Object(w.q)(OO)),this.pageInitialized=!1,this.snackbarIntervals=[],this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:"Adobe Connect V2",href:this.router.url}]),this.hasUserViewPermission$=a.can(aD.a.USER_VIEW),this.adobeConnectAccountSelector$.pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{if(["AccountCreated","AccountEdited"].includes(e.status))switch(e.status){case"AccountCreated":this.fetchAccounts(),void 0!==this.uiComponent&&(this.uiComponent.checkForChanges(),this.handleAccountCreated("success",e.lastCreatedAccount));break;case"AccountEdited":this.fetchAccounts(),this.uiComponent.checkForChanges(),this.handleAccountEdited("success",e.lastEditedAccount)}"AccountDeleted"===e.status&&e.lastDeletedAccountPartial&&(this.fetchAccounts(),this.uiComponent.checkForChanges(),this.handleAccountDeleted(e.lastDeletedAccountPartial))})}ngOnInit(){this.pageService.ready().pipe(Object(se.a)(1)).subscribe(()=>{this.pageDialog=this.pageService.dialog,this.rightPanel=this.pageService.rightPanel,this.setPageTitle(),this.setActionButtons(),this.pageInitialized=!0})}ngAfterViewInit(){this.tablePaginator.pageSizeAutoAllowed&&(this.tablePaginator.pageSize=this.getAutoPageSize()),this.fetchAccounts()}ngOnDestroy(){this.docLayoutService.actionButtons.clearActionButtons(),super.ngOnDestroy()}onFiltersUpdate(e){this.searchFilterValue=e.search?e.search:"",this.fetchAccounts()}onTableSort(e){switch(this.tableActiveSortingDir=e.dir,e.columnName){case"createdAt":this.tableActiveSorting=EO.CREATION;break;case"name":this.tableActiveSorting=EO.NAME}this.fetchAccounts()}onTablePageChange(e){const{pageIndex:t,pageSize:i}=e;this.tablePaginator.pageSize=i<1?this.getAutoPageSize():i,this.tablePaginator.pageIndex=t,this.fetchAccounts()}onOpenDeleteDialog(e){const t=e.id,i=e.name;this.docLayoutService.dialog.showCommonDialog(this.setDeleteDialogParams()).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.adobeConnectService.deleteAccount(t).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(()=>{e.actionSuccess.next(!0),this.adobeConnectStore.dispatch(new z({id:t,name:i}))})})}onEditAccountRequested(e){this.navigateTo("/learn/adobeconnect/edit/"+e.id)}navigateTo(e){this.router.navigate([e])}getAutoPageSize(){const e=document.querySelector("adobeconnect-account-list");return Math.floor((window.innerHeight-e.offsetTop-90-80-39)/38)}createAccountCreationSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully created!",{accountName:e?e.name:""})}createAccountFaliureSnackbarLabel(e){return M.a.t("webinar","There were error creating <b>{accountName}</b>!",{accountName:e?e.name:""})}createAccountEditSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully edited!",{accountName:e?e.name:""})}editAccountFaliureSnackbarLabel(e){return M.a.t("webinar","There were error updating <b>{accountName}</b>!",{accountName:e?e.name:""})}createAccountDeleteSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully deleted!",{accountName:e.name})}deleteAccountFaliureSnackbarLabel(e){return M.a.t("webinar","There were error deleting <b>{accountName}</b>!",{accountName:e.name})}showFailureSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"error"})}showSuccessSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"success"})}setPageTitle(){this.docLayoutService.header.showTitleBar({title:"Adobe Connect V2",subtitle:M.a.t("webinar","Manage your Adobe Connect accounts"),fullWidth:!0,mode:"bordered"})}setActionButtons(){const e=[{properties:{BgClass:"bg-positive-green",textClass:"text-white",icons:["plus"],tooltipText:M.a.t("webinar","New Account"),tooltipPosition:"bottom"},onClick:()=>{this.openAccountRightPanel()}}];this.docLayoutService.actionButtons.setActionButtons(e)}openAccountRightPanel(e){let t,i;e?(t=M.a.t("webinar","Edit Account"),i=M.a.t("webinar","Edit the details of your account to update it")):(t=M.a.t("webinar","New Account"),i=M.a.t("webinar","Fill in the form below to add a new account"));const s={isEditMode:!!e,accountId:e?e.id:null,name:e?e.name:null,description:e?e.description:null,username:e?e.username:null,password:e?e.password:null,serverUrl:e?e.serverUrl:null,sessionType:e?e.sessionType:null,sessionLimitCourses:e&&e.sessionLimitCourses>0?e.sessionLimitCourses:null,sessionLimitAccount:e&&e.sessionLimitAccount>0?e.sessionLimitAccount:null,sessionLimitConcurrentRooms:e&&e.sessionLimitConcurrentRooms>0?e.sessionLimitConcurrentRooms:null,doceboFieldList:this.doceboFieldList,doceboField:this.doceboFieldList[0].value};this.pageService.rightPanel.setWidth(500).setTitle(t).setDescription(i).setContent({component:lO,params:s}).open()}fetchAccounts(){this.showLoader=!0,void 0!==this.uiComponent&&this.uiComponent.checkForChanges(),this.adobeConnectService.fetchAccounts({term:this.searchFilterValue,page:this.tablePaginator.pageIndex+1,page_size:this.tablePaginator.pageSize,sort:`${this.tableActiveSorting}.${this.tableActiveSortingDir}`}).subscribe(e=>{const t=[];this.doceboFieldList=this.mapDoceboFields(e.data.docebo_fields);for(const s of e.data.items)t.push({id:s.id,username:s.admin_username,password:s.admin_password,serverUrl:s.server_url,sessionType:ft.toCapitalLetter(s.session_type),name:s.name,description:s.additional_info,createdAt:P_.a.unix(s.created_at).toDate(),sessionLimitCourses:s.max_sessions_per_course,sessionLimitAccount:s.max_sessions,sessionLimitConcurrentRooms:s.max_concurrent_sessions,assignedTemplates:s.assigned_templates,assignedFolders:s.assigned_folders,assignedRooms:s.assigned_rooms,doceboField:s.tool_mapping_field_lms});const{total_count:i}=e.data;this.tablePaginator.length=i,this.mapTableData(t),this.showLoader=!1,this.uiComponent.checkForChanges()})}mapDoceboFields(e){return Object.entries(e).map(([e,t])=>({value:e,label:t}))}mapTableData(e){this.tableData=[],e.forEach(e=>{this.tableData.push(e)})}handleAccountCreated(e,t){if("success"===e){const e=this.createAccountCreationSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.createAccountFaliureSnackbarLabel(t);this.showFailureSnackbar(e)}}handleAccountEdited(e,t){if("success"===e){const e=this.createAccountEditSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.deleteAccountFaliureSnackbarLabel(t);this.showFailureSnackbar(e)}}handleAccountDeleted(e){const t=this.createAccountDeleteSuccessSnackbarLabel(e);this.showSuccessSnackbar(t)}setDeleteDialogParams(){return{id:"delete-checklist-dialog",width:460,height:210,title:M.a.t("standard","Delete Account"),content:M.a.t("standard","Are you sure you want to delete the selected account?<br>If you delete it, it will be definitely removed from the system and you will need to reassign all of the events created with this account to a different account. If you don't reassign the events, both learners and instructors will no longer be able to access them."),actions:[{id:"cancel",type:"neutral",label:M.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"negative",label:M.a.t("standard","Delete"),slot:"end"}]}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(rn.a),c.ec(P.a),c.ec(j.a),c.ec(s.h),c.ec(w.e),c.ec(dD.a),c.ec(w.e),c.ec(kc.a),c.ec(x),c.ec(u.g))},e.\u0275cmp=c.Yb({type:e,selectors:[["adobeconnect-account-container"]],viewQuery:function(e,t){if(1&e&&c.nd(PO,1),2&e){let e;c.Rc(e=c.tc())&&(t.uiComponent=e.first)}},features:[c.Jb],decls:2,vars:4,consts:[[3,"showLoader","tableData","tablePaginator","searchFilterValue","filtersUpdate","tableSort","tablePageChange","openDeleteDialog","editAccount"],["uiComponent",""]],template:function(e,t){1&e&&(c.kc(0,"adobeconnect-account-list",0,1),c.sc("filtersUpdate",function(e){return t.onFiltersUpdate(e)})("tableSort",function(e){return t.onTableSort(e)})("tablePageChange",function(e){return t.onTablePageChange(e)})("openDeleteDialog",function(e){return t.onOpenDeleteDialog(e)})("editAccount",function(e){return t.onEditAccountRequested(e)}),c.jc()),2&e&&c.Dc("showLoader",t.showLoader)("tableData",t.tableData)("tablePaginator",t.tablePaginator)("searchFilterValue",t.searchFilterValue)},directives:[xO],encapsulation:2,changeDetection:0}),e})();function LO(e){return`docebo_gotomeeting_pairing_${e}`}const jO=M.a.t("standard","None"),RO=M.a.t("webinar","Paired"),FO=(e,t,i)=>{const s=`https://api.getgo.com/oauth/v2/authorize?response_type=code&client_id=${i}&redirect_uri=${e}`;window.localStorage.setItem("gtm_account_id",t.toString()),window.open(s,"_blank")};let NO=(()=>{class e{constructor(e,t){this.route=e,this.backendService=t}ngOnInit(){this.code=this.route.snapshot.queryParamMap.get("code"),this.id=window.localStorage.getItem("gtm_account_id")||0,this.backendService.request("/learn/v1/webinar/gotomeeting/accounts/pair","POST",{code:this.code,account_id:this.id}).pipe(Object(se.a)(1)).subscribe(()=>{window.localStorage.setItem("gtm_account_id",""),window.close(),window.localStorage.setItem(LO(this.id),"success")},()=>{window.localStorage.setItem("gtm_account_id",""),window.close(),window.localStorage.setItem(LO(this.id),"fail")})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.a),c.ec(I.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["gotomeeting-pairing"]],decls:1,vars:0,template:function(e,t){1&e&&c.fc(0,"widget-spinner")},directives:[$C.a],styles:["gotomeeting-pairing widget-spinner{position:absolute;top:250px;left:50%}"],encapsulation:2,changeDetection:0}),e})();const UO=e=>t=>("string"==typeof t.value&&""==t.value||null==t.value)&&t.parent&&t.parent.controls[e].value?{thisIsRequiredField:"This is mandatory field"}:null;function zO(e,t){if(1&e&&(c.kc(0,"div",17),c.fc(1,"textfield",8),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitCoursesTextField.type)("id",e.sessionLimitCoursesTextField.id)("floating_label",e.sessionLimitCoursesTextField.floating_label)("label",e.sessionLimitCoursesTextField.label)("max_length",e.sessionLimitCoursesTextField.max_length)("inputFormControl",e.sessionLimitCoursesTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}function qO(e,t){if(1&e&&(c.kc(0,"div",17),c.fc(1,"textfield",8),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitAccountTextField.type)("id",e.sessionLimitAccountTextField.id)("floating_label",e.sessionLimitAccountTextField.floating_label)("label",e.sessionLimitAccountTextField.label)("max_length",e.sessionLimitAccountTextField.max_length)("inputFormControl",e.sessionLimitAccountTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}function VO(e,t){if(1&e&&(c.kc(0,"div",17),c.fc(1,"textfield",8),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitConcurrentRoomsTextField.type)("id",e.sessionLimitConcurrentRoomsTextField.id)("floating_label",e.sessionLimitConcurrentRoomsTextField.floating_label)("label",e.sessionLimitConcurrentRoomsTextField.label)("max_length",e.sessionLimitConcurrentRoomsTextField.max_length)("inputFormControl",e.sessionLimitConcurrentRoomsTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}const BO=function(){return{category:"standard"}},GO=function(){return{category:"webinar"}},HO=function(){return{category:"admin"}};let $O=(()=>{class e{constructor(e){this.cdr=e,this.isEditMode=!1}ngOnInit(){this.setFormFieldsParams()}ngAfterViewInit(){this.formGroup.valueChanges.subscribe(()=>{this.cdr.detectChanges()})}checkForChanges(){this.cdr.markForCheck()}setFormFieldsParams(){this.accountName={type:et.a.TEXT,id:"account-name",floating_label:!0,label:M.a.t("webinar","Account Name"),max_length:50,show_counter:!0,inputFormControl:this.formGroup.controls.accountName},this.accountDescription={type:et.a.TEXT,id:"account-description",floating_label:!0,label:M.a.t("app7020","Description"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.accountDescription},this.clientId={type:et.a.TEXT,id:"client-id",floating_label:!0,label:M.a.t("slack","Client ID"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.clientId},this.clientSecret={type:et.a.TEXT,id:"client-secret",floating_label:!0,label:M.a.t("app","Client Secret"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.clientSecret},this.sessionType={id:"session-type",label:M.a.t("webinar","Session type"),inputFormControl:this.formGroup.get("sessionType"),name:"session-type"},this.sessionType.webinar={id:"session-type-webinar",floating_label:!0,label:M.a.t("webinar","Webinar")},this.sessionType.meeting={id:"session-type-meeting",floating_label:!0,label:M.a.t("conference","Meeting")},this.sessionType.training={id:"session-type-meeting",floating_label:!0,label:M.a.t("setup","Training")},this.sessionLimitCoursesTextField={type:et.a.NUMBER,id:"session-limit-courses",floating_label:!0,label:M.a.t("configuration","Max rooms per course"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitCourses")},this.sessionLimitAccountTextField={type:et.a.NUMBER,id:"session-limit-accounts",floating_label:!0,label:M.a.t("webinar","Max sessions for this account"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitAccount")},this.sessionLimitConcurrentRoomsTextField={type:et.a.NUMBER,id:"session-limit-concurrents",floating_label:!0,label:M.a.t("configuration","Max concurrent rooms"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.controls.sessionLimitConcurrentRooms};const e=!!this.formGroup.controls.sessionLimitCourses.value;this.sessionLimitCoursesCheckbox={label:M.a.t("webinar","Set session limits for courses"),inputFormControl:new Ze.e(e),checked:e},this.sessionLimitCoursesCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.controls.sessionLimitCoursesCheckbox.setValue(e)});const t=!!this.formGroup.controls.sessionLimitAccount.value;this.sessionLimitAccountCheckbox={label:M.a.t("webinar","Set session limits per accounts"),inputFormControl:new Ze.e(t),checked:t},this.sessionLimitAccountCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.controls.sessionLimitAccountCheckbox.setValue(e)});const i=!!this.formGroup.controls.sessionLimitConcurrentRooms.value;this.sessionLimitConcurrentRoomsCheckbox={label:M.a.t("webinar","Set session for concurrent rooms"),inputFormControl:new Ze.e(i),checked:i},this.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.controls.sessionLimitConcurrentRoomsCheckbox.setValue(e)})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["gotomeeting-account-panel-ui"]],inputs:{formGroup:"formGroup",isEditMode:"isEditMode",oauthRedirectUri:"oauthRedirectUri",oauthRedirectUriTranslatable:"oauthRedirectUriTranslatable"},decls:56,vars:81,consts:[[1,"gotomeeting-create-account"],[1,"gotomeeting-account-redirect-info"],[1,"zmdi","zmdi-info","zmdi-hc-2x","text-main"],[1,"border-top-wrapper",3,"formGroup"],[1,"gotomeeting-account-info-container"],[1,"details-container"],[1,"bold-subtitle"],[1,"gotomeeting-account-text-field-margin"],[3,"type","id","floating_label","label","max_length","inputFormControl","showRequiredFieldIndicator"],[1,"gotomeeting-account-text-field-margin-no-bottom"],[1,"border-top-wrapper","gotomeeting-account-info-container"],[1,"bold-subtitle","options-subtitle"],[3,"label","value","name","enabled","inputFormControl"],[1,"text-grey-mid","hint","options-label"],[1,"options-container"],[3,"inputFormControl","checked","label"],["class","gotomeeting-account-margin-huge",4,"ngIf"],[1,"gotomeeting-account-margin-huge"]],template:function(e,t){1&e&&(c.kc(0,"section",0),c.kc(1,"div"),c.kc(2,"div",1),c.fc(3,"i",2),c.kc(4,"span"),c.gd(5),c.xc(6,"t"),c.fc(7,"br"),c.gd(8),c.jc(),c.jc(),c.jc(),c.kc(9,"form",3),c.kc(10,"div",4),c.kc(11,"div",5),c.kc(12,"div",6),c.gd(13),c.xc(14,"t"),c.jc(),c.kc(15,"div",7),c.fc(16,"textfield",8),c.jc(),c.kc(17,"div",7),c.fc(18,"textfield",8),c.jc(),c.kc(19,"div",7),c.fc(20,"textfield",8),c.jc(),c.kc(21,"div",9),c.fc(22,"textfield",8),c.jc(),c.jc(),c.jc(),c.kc(23,"div",10),c.kc(24,"div",5),c.kc(25,"div",11),c.gd(26),c.xc(27,"t"),c.jc(),c.kc(28,"div"),c.fc(29,"radio",12),c.jc(),c.kc(30,"div"),c.fc(31,"radio",12),c.fc(32,"div",13),c.jc(),c.kc(33,"div"),c.fc(34,"radio",12),c.fc(35,"div",13),c.jc(),c.jc(),c.jc(),c.kc(36,"div",10),c.kc(37,"div",5),c.kc(38,"div",11),c.gd(39),c.xc(40,"t"),c.jc(),c.kc(41,"div",14),c.kc(42,"div"),c.fc(43,"checkbox",15),c.jc(),c.ed(44,zO,2,7,"div",16),c.xc(45,"async"),c.jc(),c.kc(46,"div",14),c.kc(47,"div"),c.fc(48,"checkbox",15),c.jc(),c.ed(49,qO,2,7,"div",16),c.xc(50,"async"),c.jc(),c.kc(51,"div",14),c.kc(52,"div"),c.fc(53,"checkbox",15),c.jc(),c.ed(54,VO,2,7,"div",16),c.xc(55,"async"),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(5),c.id(" ",c.yc(6,61,t.oauthRedirectUriTranslatable),""),c.Mb(3),c.id(" ",t.oauthRedirectUri," "),c.Mb(1),c.Dc("formGroup",t.formGroup),c.Mb(4),c.id(" ",c.zc(14,63,"General Information",c.Hc(78,BO))," "),c.Mb(3),c.Dc("type",t.accountName.type)("id",t.accountName.id)("floating_label",t.accountName.floating_label)("label",t.accountName.label)("max_length",t.accountName.max_length)("inputFormControl",t.accountName.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.accountDescription.type)("id",t.accountDescription.id)("floating_label",t.accountDescription.floating_label)("label",t.accountDescription.label)("max_length",t.accountDescription.max_length)("inputFormControl",t.accountDescription.inputFormControl)("showRequiredFieldIndicator",!1),c.Mb(2),c.Dc("type",t.clientId.type)("id",t.clientId.id)("floating_label",t.clientId.floating_label)("label",t.clientId.label)("max_length",t.clientId.max_length)("inputFormControl",t.clientId.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.clientSecret.type)("id",t.clientSecret.id)("floating_label",t.clientSecret.floating_label)("label",t.clientSecret.label)("max_length",t.clientSecret.max_length)("inputFormControl",t.clientSecret.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(4),c.id(" ",c.zc(27,66,"Session type",c.Hc(79,GO))," "),c.Mb(3),c.Dc("label",t.sessionType.meeting.label)("value","meeting")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(2),c.Dc("label",t.sessionType.webinar.label)("value","webinar")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(3),c.Dc("label",t.sessionType.training.label)("value","training")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(5),c.id(" ",c.zc(40,69,"Options",c.Hc(80,HO))," "),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitCoursesCheckbox.inputFormControl)("checked",t.sessionLimitCoursesCheckbox.checked)("label",t.sessionLimitCoursesCheckbox.label),c.Mb(1),c.Dc("ngIf",c.yc(45,72,t.sessionLimitCoursesCheckbox.inputFormControl.valueChanges)||t.sessionLimitCoursesTextField.inputFormControl.value>0&&t.sessionLimitCoursesCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitAccountCheckbox.inputFormControl)("checked",t.sessionLimitAccountCheckbox.checked)("label",t.sessionLimitAccountCheckbox.label),c.Mb(1),c.Dc("ngIf",c.yc(50,74,t.sessionLimitAccountCheckbox.inputFormControl.valueChanges)||t.sessionLimitAccountTextField.inputFormControl.value>0&&t.sessionLimitAccountCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitConcurrentRoomsCheckbox.inputFormControl)("checked",t.sessionLimitConcurrentRoomsCheckbox.checked)("label",t.sessionLimitConcurrentRoomsCheckbox.label),c.Mb(1),c.Dc("ngIf",c.yc(55,76,t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges)||t.sessionLimitConcurrentRoomsTextField.inputFormControl.value>0&&t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.value||!1))},directives:[Ze.y,Ze.p,Ze.i,Ct.a,Zn.a,ih.a,m.p],pipes:[M.b,m.b],styles:[".color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}gotomeeting-account-panel-ui .bold-subtitle{padding-bottom:6px;font-weight:600;font-size:14px;line-height:18px}gotomeeting-account-panel-ui .border-top-wrapper{border-top:1px solid var(--ui-color-badge-background-light)}gotomeeting-account-panel-ui .details-container{padding:24px 0}gotomeeting-account-panel-ui .options-subtitle{margin-bottom:16px}gotomeeting-account-panel-ui .options-label{padding-left:24px}gotomeeting-account-panel-ui .docebo-radio{margin-bottom:0}gotomeeting-account-panel-ui .gotomeeting-account-limit-list{padding:24px}gotomeeting-account-panel-ui .gotomeeting-account-redirect-info{display:flex;align-items:center;padding:var(--hyd-spacing-sm) var(--hyd-spacing-md)}.router-outlet:not(.direction-rtl):not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-redirect-info span{margin-left:29px}.router-outlet.direction-rtl:not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-redirect-info span{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-redirect-info span{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-redirect-info span{margin-right:29px}.router-outlet:not(.direction-rtl):not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-margin{margin-left:12px}.router-outlet.direction-rtl:not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-margin{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-margin{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-margin{margin-right:12px}.router-outlet:not(.direction-rtl):not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-margin-huge{margin-left:26px}.router-outlet.direction-rtl:not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-margin-huge{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-margin-huge{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) gotomeeting-account-panel-ui .gotomeeting-account-margin-huge{margin-right:26px}gotomeeting-account-panel-ui .gotomeeting-account-info-container{padding:0 var(--hyd-spacing-md);box-sizing:border-box}gotomeeting-account-panel-ui .gotomeeting-account-text-field-margin{margin:16px 0 24px}gotomeeting-account-panel-ui .gotomeeting-account-text-field-margin-no-bottom{margin:16px 0 0}"],encapsulation:2,changeDetection:0}),e})();const YO=["uiComponent"];let WO=(()=>{class e extends vc.a{constructor(t,i,s,n,a){super(),this.pageService=t,this.goToMeetingService=i,this.goToMeetingStore=s,this.translationService=n,this.fb=a,this.isEditMode=!1,this.notMoreThan=(e,t)=>i=>i.value>e?{notMoreThan:this.translationService.instant("Max limit is {max} {things}",{category:"standard",max:e,things:t})}:null,this.baseRedirectUri=e.createBaseRedirectUri(),this.oauthRedirectUriTranslatable=M.a.t("webinar","GoTo Oauth redirect URL:")}static createBaseRedirectUri(){return`${E.b.getInstance().getFullLmsCustomUrl()}/learn/gotomeeting`}ngOnInit(){this.rightPanel=this.pageService.rightPanel,this.form=this.fb.group({id:[this.accountId],accountName:[this.accountName,[Ze.x.required,e=>"string"==typeof e.value&&e.value.match("^\\s+$")?{notHaveOnlyBlankCharacters:"This field cannot contains only empty spaces"}:null,Ze.x.maxLength(255)]],accountDescription:[this.accountDescription,[Ze.x.maxLength(255)]],clientId:[this.clientId,[Ze.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ze.x.maxLength(255)]],clientSecret:[this.clientSecret,[Ze.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ze.x.maxLength(255)]],sessionType:[this.sessionType,[Ze.x.required]],sessionLimitCourses:[this.sessionLimitCourses,[this.notMoreThan(999,"sessions"),UO("sessionLimitCoursesCheckbox")]],sessionLimitCoursesCheckbox:[!!this.sessionLimitCourses],sessionLimitAccount:[this.sessionLimitAccount,[this.notMoreThan(999,"sessions"),UO("sessionLimitAccountCheckbox")]],sessionLimitAccountCheckbox:[!!this.sessionLimitAccount],sessionLimitConcurrentRooms:[this.sessionLimitConcurrentRooms,[this.notMoreThan(999,"rooms"),UO("sessionLimitConcurrentRoomsCheckbox")]],sessionLimitConcurrentRoomsCheckbox:[!!this.sessionLimitConcurrentRooms]})}ngAfterViewInit(){this.setPanelActions()}ngOnDestroy(){super.ngOnDestroy(),this.rightPanel.buttonsEnabled()}setPanelActions(){const e=[],t=M.a.t("standard",this.isEditMode?"Confirm":"Create");e.push({type:"normal",properties:{text:t},customClasses:"float-ltr-right-clear-none",handler:()=>{this.form.controls.clientId.errors||this.form.controls.clientId.setErrors(null),this.form.valid?(this.cleanFormValues(this.form),this.isEditMode?this.editAccount():this.createAccount()):(Object(Cy.l)(this.form),this.form.setValue(this.form.value))}}),e.push({type:"cancel",properties:{text:M.a.t("standard","Cancel")},customClasses:"float-ltr-right-clear-none",handler:e=>{e.close()}}),this.rightPanel.setActions(e)}createAccount(){this.rightPanel.buttonsDisabled(),this.goToMeetingService.createAccount(this.form).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{this.accountName=e.data.name,this.accountId=e.data.id;const t={id:e.data.id,name:this.accountName,description:e.data.additional_info,createdAt:P_()().toDate(),clientId:e.data.app_key,clientSecret:e.data.app_secret,sessionType:e.session_type,accessTokenStatus:jO,sessionLimitCourses:0|this.form.controls.sessionLimitCourses.value,sessionLimitAccount:0|this.form.controls.sessionLimitAccount.value,sessionLimitConcurrentRooms:0|this.form.controls.sessionLimitConcurrentRooms.value};this.goToMeetingStore.dispatch(new Y(t)),this.rightPanel.close(),FO(this.baseRedirectUri,e.data.id,this.form.controls.clientId.value)},this.accountUpsertErrorCallback())}editAccount(){this.rightPanel.buttonsDisabled(),this.goToMeetingService.editAccount(this.form).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{var t=this.accountName;this.accountName=e.data.name;const i={id:e.data.id,name:t,description:e.data.additional_info,createdAt:P_()().toDate(),clientId:e.data.app_key,clientSecret:e.data.app_secret,accessTokenStatus:jO};this.goToMeetingService.unpairAccount(e.data.id).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(()=>{FO(this.baseRedirectUri,e.data.id,this.form.controls.clientId.value),this.goToMeetingStore.dispatch(new W(i)),this.rightPanel.close()})},this.accountUpsertErrorCallback())}accountUpsertErrorCallback(){return e=>{1002===e.code&&(Object(Cy.l)(this.form),this.form.controls.clientId.setErrors({notUnique:M.a.t("webinar","Multiple accounts cannot use the same Client ID")}),Object(Cy.l)(this.form),this.uiComponent.checkForChanges(),this.rightPanel.buttonsEnabled())}}cleanFormValues(e){e.controls.sessionLimitCoursesCheckbox.value||e.controls.sessionLimitCourses.setValue(0),e.controls.sessionLimitAccountCheckbox.value||e.controls.sessionLimitAccount.setValue(0),e.controls.sessionLimitConcurrentRoomsCheckbox.value||e.controls.sessionLimitConcurrentRooms.setValue(0)}}return e.\u0275fac=function(t){return new(t||e)(c.ec(P.a),c.ec(B),c.ec(w.e),c.ec(rn.a),c.ec(Ze.d))},e.\u0275cmp=c.Yb({type:e,selectors:[["gotomeeting-account-panel-container"]],viewQuery:function(e,t){if(1&e&&c.nd(YO,1),2&e){let e;c.Rc(e=c.tc())&&(t.uiComponent=e.first)}},inputs:{isEditMode:"isEditMode",accountId:"accountId",accountName:"accountName",accountDescription:"accountDescription",clientId:"clientId",clientSecret:"clientSecret",sessionType:"sessionType",sessionLimitCourses:"sessionLimitCourses",sessionLimitAccount:"sessionLimitAccount",sessionLimitConcurrentRooms:"sessionLimitConcurrentRooms"},features:[c.Lb([B]),c.Jb],decls:2,vars:3,consts:[[3,"formGroup","oauthRedirectUri","oauthRedirectUriTranslatable"],["uiComponent",""]],template:function(e,t){1&e&&c.fc(0,"gotomeeting-account-panel-ui",0,1),2&e&&c.Dc("formGroup",t.form)("oauthRedirectUri",t.baseRedirectUri)("oauthRedirectUriTranslatable",t.oauthRedirectUriTranslatable)},directives:[$O,Ze.p,Ze.i],styles:["gotomeeting-account-panel-ui{height:100%;overflow-y:auto;overflow-x:hidden;display:block}"],encapsulation:2,changeDetection:0}),e})();const QO={isVisible:!0,type:Tl.a.BLANK001,title:M.a.t("webinar","No GTM Accounts Found"),subtitle:M.a.t("webinar","Click the Add button in the top right corner to add a new GTM account!")},KO={isVisible:!0,type:Tl.a.EMPTY001,title:M.a.t("standard","Whoops, No results found!"),subtitle:M.a.t("myteam","Please try again using different search/filters criteria.")},JO={mode:Me.a.push,viewOptionLabel:M.a.t("standard","SORT BY"),filters:new je.a([{title:M.a.t("standard","Search"),code:"search",type:Me.d.free_search_filter,params:{placeholder:M.a.t("standard","Search...")}}]),appliedFiltersNumber:new je.a(null),displayedItemsNumber:new je.a(null),viewOptions:new je.a(null),disableViewOptions:!1,elementLabels:{singular:M.a.t("standard","items"),plural:M.a.t("standard","items")}},XO={columnName:"createdAt",dir:Hx.a.DESC},ZO={name:{headerLabel:M.a.t("webinar","Account Name"),fieldName:"name",columnName:"name",sortable:!0},description:{headerLabel:M.a.t("app7020","Description"),fieldName:"description",columnName:"description",sortable:!1},createdAt:{headerLabel:M.a.t("standard","Creation Date"),fieldName:"createdAt",columnName:"createdAt",sortable:!0,type:"date",format:"MM/DD/YYYY"},accessTokenStatus:{headerLabel:M.a.t("webinar","Access token"),fieldName:"accessTokenStatus",columnName:"accessTokenStatus",sortable:!1},ellipsis:{orientation:"",columnName:"",actions:[]}};function eE(e,t){if(1&e&&(c.gd(0),c.xc(1,"t")),2&e){const e=c.wc(3);c.hd(c.yc(1,1,e.tableColumns.createdAt.headerLabel))}}function tE(e,t){1&e&&(c.gd(0),c.xc(1,"HDateTime")),2&e&&c.id(" ",c.Ac(1,1,t.item.createdAt,null,"lll")," ")}function iE(e,t){if(1&e){const e=c.lc();c.kc(0,"hyd-table",6),c.sc("sort",function(t){return c.Vc(e),c.wc(2).onTableSort(t)}),c.fc(1,"hyd-table-column-text",7),c.fc(2,"hyd-table-column-text",7),c.kc(3,"hyd-table-column",8),c.kc(4,"hyd-table-column-header"),c.ed(5,eE,2,3,"ng-template"),c.jc(),c.kc(6,"hyd-table-column-cell"),c.ed(7,tE,2,5,"ng-template"),c.jc(),c.jc(),c.fc(8,"hyd-table-column-text",7),c.fc(9,"hyd-table-column-ellipsis",9),c.jc()}if(2&e){const e=c.wc(2);c.Dc("data",e.tableData)("sorting",e.tableDefaultSorting),c.Mb(1),c.Dc("headerLabel",e.tableColumns.name.headerLabel)("fieldName",e.tableColumns.name.fieldName)("columnName",e.tableColumns.name.columnName)("sortable",e.tableColumns.name.sortable),c.Mb(1),c.Dc("headerLabel",e.tableColumns.description.headerLabel)("fieldName",e.tableColumns.description.fieldName)("columnName",e.tableColumns.description.columnName)("sortable",e.tableColumns.description.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.createdAt.columnName)("sortable",e.tableColumns.createdAt.sortable),c.Mb(5),c.Dc("headerLabel",e.tableColumns.accessTokenStatus.headerLabel)("fieldName",e.tableColumns.accessTokenStatus.fieldName)("columnName",e.tableColumns.accessTokenStatus.columnName)("sortable",e.tableColumns.accessTokenStatus.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.ellipsis.columnName)("actions",e.tableColumns.ellipsis.actions)("orientation",e.tableColumns.ellipsis.orientation)}}function sE(e,t){if(1&e){const e=c.lc();c.kc(0,"hyd-paginator",10),c.sc("pageChange",function(t){return c.Vc(e),c.wc(2).onTablePageChange(t)}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("pageIndex",e.tablePaginator.pageIndex)("pageSize",e.tablePaginator.pageSize)("length",e.tablePaginator.length)("pageSizeAutoAllowed",e.tablePaginator.pageSizeAutoAllowed)}}function nE(e,t){if(1&e&&c.fc(0,"blankslate",11),2&e){const e=c.wc(2);c.Dc("ngClass","blankslate-container")("isVisible",e.blankslateWithFilters.isVisible)("type",e.blankslateWithFilters.type)("title",e.blankslateWithFilters.title)("subtitle",e.blankslateWithFilters.subtitle)}}function aE(e,t){if(1&e){const e=c.lc();c.kc(0,"data-browser",2),c.sc("onFiltersUpdate",function(t){return c.Vc(e),c.wc().onDataBrowserFiltersUpdate(t)}),c.ed(1,iE,10,19,"hyd-table",3),c.ed(2,sE,1,4,"hyd-paginator",4),c.ed(3,nE,1,5,"blankslate",5),c.jc()}if(2&e){const e=c.wc();c.Dc("dataBrowserSource",e.dataBrowserSource),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("ngIf",e.showBlankslateWithFilters())}}function oE(e,t){if(1&e&&(c.kc(0,"blankslate",12),c.gd(1," >\n"),c.jc()),2&e){const e=c.wc();c.Dc("isVisible",e.blankslateWithoutFilters.isVisible)("type",e.blankslateWithoutFilters.type)("title",e.blankslateWithoutFilters.title)("subtitle",e.blankslateWithoutFilters.subtitle)}}let rE=(()=>{class e{constructor(e){this.cdr=e,this.filtersUpdate=new c.q,this.tableSort=new c.q,this.tablePageChange=new c.q,this.openDeleteDialog=new c.q,this.beginPairing=new c.q,this.editAccount=new c.q,this.blankslateWithoutFilters=QO,this.blankslateWithFilters=KO,this.dataBrowserSource=JO,this.tableDefaultSorting=XO,this.tableColumns=ZO,this.setTableEllipsisColumn()}showBlankslateWithoutFilters(){return!this.showLoader&&0===this.tableData.length&&""===this.searchFilterValue}showBlankslateWithFilters(){return!this.showLoader&&0===this.tableData.length&&""!==this.searchFilterValue}showDataBrowser(){return this.tableData.length>0||""!==this.searchFilterValue}showTable(){return!this.showLoader&&this.tableData.length>0}onDataBrowserFiltersUpdate(e){this.filtersUpdate.emit(e)}onTableSort(e){this.tableSort.emit(e)}onTablePageChange(e){this.tablePageChange.emit(e)}checkForChanges(){this.cdr.markForCheck()}setTableEllipsisColumn(){this.tableColumns.ellipsis={columnName:"ellipsis",columnWidth:"100px",alignment:Le.a.CENTER,ellipsed:!1,orientation:"bottom-right",actions:[{id:"pair",title:M.a.t("standard","Pair"),params:null,active:!1,action:e=>{this.beginPairing.emit(e)}},{id:"edit",title:M.a.t("app7020","Edit"),params:null,active:!1,action:e=>{this.editAccount.emit(e)}},{id:"delete",title:M.a.t("standard","Delete"),params:null,active:!1,action:e=>{this.openDeleteDialog.emit(e)}}]}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["gotomeeting-account-list"]],inputs:{tableData:"tableData",searchFilterValue:"searchFilterValue",showLoader:"showLoader",tablePaginator:"tablePaginator"},outputs:{filtersUpdate:"filtersUpdate",tableSort:"tableSort",tablePageChange:"tablePageChange",openDeleteDialog:"openDeleteDialog",beginPairing:"beginPairing",editAccount:"editAccount"},decls:2,vars:2,consts:[["class","data-browser-gotomeeting",3,"dataBrowserSource","onFiltersUpdate",4,"ngIf"],["class","blankslate-container",3,"isVisible","type","title","subtitle",4,"ngIf"],[1,"data-browser-gotomeeting",3,"dataBrowserSource","onFiltersUpdate"],["class","hyd-table",3,"data","sorting","sort",4,"ngIf"],["class","hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange",4,"ngIf"],[3,"ngClass","isVisible","type","title","subtitle",4,"ngIf"],[1,"hyd-table",3,"data","sorting","sort"],[3,"headerLabel","fieldName","columnName","sortable"],[3,"columnName","sortable"],[3,"columnName","actions","orientation"],[1,"hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange"],[3,"ngClass","isVisible","type","title","subtitle"],[1,"blankslate-container",3,"isVisible","type","title","subtitle"]],template:function(e,t){1&e&&(c.ed(0,aE,4,4,"data-browser",0),c.ed(1,oE,2,4,"blankslate",1)),2&e&&(c.Dc("ngIf",t.showDataBrowser()),c.Mb(1),c.Dc("ngIf",t.showBlankslateWithoutFilters()))},directives:[m.p,Fe.a,Ue.a,ze.a,qe.c,qe.d,qe.b,Ve.a,Ne.b,jc.a,m.n],pipes:[M.b,ei.a],styles:["gotomeeting-account-list .blankslate-container{margin-top:91px}gotomeeting-account-list .hyd-paginator{position:fixed;bottom:0;left:0;width:100%}gotomeeting-account-list .data-browser-gotomeeting .grid-content-container.mdl-grid{margin:0}gotomeeting-account-list .data-browser-gotomeeting .grid-content-container.mdl-grid>.mdl-cell.mdl-cell--12-col{margin:0;width:100%}gotomeeting-account-list .data-browser-gotomeeting .full-width-header-container>.section-wrapper>.mdl-grid{margin:0}gotomeeting-account-list .data-browser-gotomeeting .hyd-table-body{padding-bottom:45px}"],encapsulation:2,changeDetection:0}),e})();const cE=Object(w.l)("learn-gotomeeting"),lE=Object(w.n)(cE,e=>e);var dE=function(e){return e.NAME="name",e.CREATION="created_at",e}({}),uE=function(e){return e.ASC="asc",e.DESC="desc",e}({});const hE=["uiComponent"];let pE=(()=>{class e extends vc.a{constructor(e,t,i,s,n,a,o,r,c){super(),this.translationService=e,this.pageService=t,this.router=i,this.goToMeetingStore=s,this.permissionManagerService=n,this.appStore=a,this.windowService=o,this.goToMeetingService=r,this.docLayoutService=c,this.showLoader=!0,this.searchFilterValue="",this.tablePaginator={pageIndex:0,pageSize:15,length:0,pageSizeAutoAllowed:!0},this.tableActiveSorting=dE.CREATION,this.tableActiveSortingDir=uE.DESC,this.tableData=[],this.goToMeetingAccountSelector$=this.goToMeetingStore.pipe(Object(w.q)(lE)),this.pageInitialized=!1,this.snackbarIntervals=[],this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:"Gotomeeting V2",href:this.router.url}]),this.hasUserViewPermission$=n.can(aD.a.USER_VIEW),this.goToMeetingAccountSelector$.pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{({GoToMeetingInitialState:()=>{},PairingAccountCompleted:()=>{if(this.windowSubscription)return this.windowSubscription.unsubscribe(),void this.fetchAccounts()},AccountCreated:()=>{this.fetchAccounts(),this.uiComponent.checkForChanges(),this.watchPairing(e.lastCreatedAccount,"create")},AccountEdited:()=>{this.fetchAccounts(),this.uiComponent.checkForChanges(),this.watchPairing(e.lastEditedAccount,"edit")},AccountDeleted:()=>{e.lastDeletedAccountPartial&&(this.fetchAccounts(),this.uiComponent.checkForChanges(),this.handleAccountDeleted(e.lastDeletedAccountPartial))},PairingAccountRequested:()=>{this.watchPairing(e.lastRequestedPairedAccount,"pair")},PairingAccountAcquired:()=>{e.pairing&&(this.fetchAccounts(),this.uiComponent.checkForChanges(),this.windowSubscription=this.windowService.focus().pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(t=>{if(t&&"PairingAccountAcquired"===e.status&&e.pairing){const{account:t,action:i,item:s}=e.pairing;this.createSnackbar(s,t,i),this.goToMeetingStore.dispatch(new J)}}))},PairingAccountAborted:()=>{}})[e.status]()})}ngOnInit(){this.pageService.ready().pipe(Object(se.a)(1)).subscribe(()=>{this.pageDialog=this.pageService.dialog,this.rightPanel=this.pageService.rightPanel,this.setPageTitle(),this.setActionButtons(),this.pageInitialized=!0})}ngAfterViewInit(){this.fetchAccounts()}ngOnDestroy(){this.docLayoutService.actionButtons.clearActionButtons(),super.ngOnDestroy()}onFiltersUpdate(e){this.searchFilterValue=e.search?e.search:"",this.fetchAccounts()}onTableSort(e){const t={createdAt:dE.CREATION,name:dE.NAME};this.tableActiveSortingDir=e.dir,this.tableActiveSorting=t[e.columnName],this.fetchAccounts()}onTablePageChange(e){const{pageIndex:t,pageSize:i}=e;this.tablePaginator.pageSize=i<1?this.getAutoPageSize():i,this.tablePaginator.pageIndex=t,this.fetchAccounts()}onOpenDeleteDialog(e){const t=e.id,i=e.name;this.docLayoutService.dialog.showCommonDialog(this.setDeleteDialogParams()).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.goToMeetingService.deleteAccount(t).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(()=>{e.actionSuccess.next(!0),this.goToMeetingStore.dispatch(new Z({id:t,name:i}))})})}onPairingRequested(e){this.goToMeetingService.unpairAccount(e.id).subscribe(()=>{FO(`${E.b.getInstance().getFullLmsCustomUrl()}/learn/gotomeeting`,e.id,e.clientId),this.goToMeetingStore.dispatch(new Q({id:e.id,name:e.name,description:e.description,clientId:e.clientId,clientSecret:"",createdAt:e.createdAt,accessTokenStatus:RO,sessionType:e.sessionType,sessionLimitCourses:e.sessionLimitCourses,sessionLimitAccount:e.sessionLimitAccount,sessionLimitConcurrentRooms:e.sessionLimitConcurrentRooms}))})}onEditAccountRequested(e){this.openAccountRightPanel(e)}getAutoPageSize(){const e=document.querySelector("gotomeeting-account-list");return Math.floor((window.innerHeight-e.offsetTop-90-80-39)/38)}createAccountCreationSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully created!",{accountName:e.name})}createAccountEditSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully edited!",{accountName:e.name})}createAccountDeleteSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully deleted!",{accountName:e.name})}createAccountPairingSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully paired!",{accountName:e.name})}showSuccessSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"success"})}showFailureSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"error"})}createAccountPairingFailureSnackbarLabel(){return M.a.t("webinar","Pairing failed, please try again or check your configuration")}setPageTitle(){this.docLayoutService.header.showTitleBar({title:"GoToMeeting",subtitle:M.a.t("webinar","Manage your GoToMeeting accounts. For more info read our Knowledge Base"),fullWidth:!0})}setActionButtons(){const e=[{properties:{BgClass:"bg-positive-green",textClass:"text-white",icons:["plus"],tooltipText:M.a.t("webinar","New Account"),tooltipPosition:"bottom"},onClick:()=>{this.openAccountRightPanel()}}];this.docLayoutService.actionButtons.setActionButtons(e)}openAccountRightPanel(e){let t,i;e?(t=M.a.t("webinar","Edit Account"),i=M.a.t("webinar","Edit the details of your account to update it")):(t=M.a.t("webinar","New Account"),i=M.a.t("webinar","Fill in all the mandatory details in order to create a new account"));const s={isEditMode:!!e,accountId:e?e.id:null,accountName:e?e.name:null,accountDescription:e?e.description:null,clientId:e?e.clientId:null,clientSecret:e?e.clientSecret:null,sessionType:e?(n=e.sessionType,{gotomeetingv2meeting:"meeting",gotomeetingv2webinar:"webinar",gotomeetingv2training:"training"}[n]):"meeting",sessionLimitCourses:e&&e.sessionLimitCourses>0?e.sessionLimitCourses:null,sessionLimitAccount:e&&e.sessionLimitAccount>0?e.sessionLimitAccount:null,sessionLimitConcurrentRooms:e&&e.sessionLimitConcurrentRooms>0?e.sessionLimitConcurrentRooms:null};var n;this.pageService.rightPanel.setWidth(500).setTitle(t).setDescription(i).setContent({component:WO,params:s}).open()}fetchAccounts(){this.showLoader=!0,this.uiComponent.checkForChanges(),this.goToMeetingService.fetchAccounts({term:this.searchFilterValue,page:this.tablePaginator.pageIndex+1,page_size:this.tablePaginator.pageSize,sort:`${this.tableActiveSorting}.${this.tableActiveSortingDir}`}).subscribe(e=>{const{items:t}=e.data,i=t.map(e=>({id:e.id,clientId:e.app_key,clientSecret:e.app_secret,name:e.name,description:e.description,createdAt:P_.a.unix(e.created_at).toDate(),accessTokenStatus:e.paired?RO:jO,sessionType:e.session_type,sessionLimitCourses:e.max_sessions_per_course,sessionLimitAccount:e.max_sessions,sessionLimitConcurrentRooms:e.max_concurrent_sessions})),{total_count:s}=e.data;this.tablePaginator.length=s,this.tableData=[...i],this.showLoader=!1,this.uiComponent.checkForChanges()})}handleAccountCreated(e,t){({success:()=>this.showSuccessSnackbar(this.createAccountCreationSuccessSnackbarLabel(t)),fail:()=>this.showFailureSnackbar(this.createAccountPairingFailureSnackbarLabel())})[e]()}handleAccountPaired(e,t){({success:()=>this.showSuccessSnackbar(this.createAccountPairingSuccessSnackbarLabel(t)),fail:()=>this.showFailureSnackbar(this.createAccountPairingFailureSnackbarLabel())})[e]()}handleAccountEdited(e,t){({success:()=>this.showSuccessSnackbar(this.createAccountEditSuccessSnackbarLabel(t)),fail:()=>this.showFailureSnackbar(this.createAccountPairingFailureSnackbarLabel())})[e]()}handleAccountDeleted(e){this.showSuccessSnackbar(this.createAccountDeleteSuccessSnackbarLabel(e))}watchPairing(e,t){const i=Math.random();this.snackbarIntervals[i]=setInterval(()=>{const s=window.localStorage.getItem(LO(e.id));s&&(window.localStorage.removeItem(LO(e.id)),clearInterval(this.snackbarIntervals[i]),delete this.snackbarIntervals[i],this.goToMeetingStore.dispatch(new K({item:s,account:e,action:t})))},200),setTimeout(()=>{this.snackbarIntervals[i]&&(clearInterval(this.snackbarIntervals[i]),window.localStorage.removeItem(LO("")),this.goToMeetingStore.dispatch(new X))},4e4)}createSnackbar(e,t,i){({create:()=>this.handleAccountCreated(e,t),edit:()=>this.handleAccountEdited(e,t),pair:()=>this.handleAccountPaired(e,t),delete:()=>this.handleAccountDeleted(t)})[i]()}setDeleteDialogParams(){return{id:"delete-checklist-dialog",width:460,height:210,title:M.a.t("standard","Delete Account"),content:M.a.t("standard","Are you sure you want to delete the selected account?<br>If you delete it, it will be definitely removed from the system and you will need to reassign all of the events created with this account to a different account. If you don't reassign the events, both learners and instructors will no longer be able to access them."),actions:[{id:"cancel",type:"neutral",label:M.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"negative",label:M.a.t("standard","Delete"),slot:"end"}]}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(rn.a),c.ec(P.a),c.ec(s.h),c.ec(w.e),c.ec(dD.a),c.ec(w.e),c.ec(kc.a),c.ec(B),c.ec(j.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["gotomeeting-account-container"]],viewQuery:function(e,t){if(1&e&&c.nd(hE,1),2&e){let e;c.Rc(e=c.tc())&&(t.uiComponent=e.first)}},features:[c.Jb],decls:2,vars:4,consts:[["S","",3,"showLoader","tableData","tablePaginator","searchFilterValue","filtersUpdate","tableSort","tablePageChange","openDeleteDialog","beginPairing","editAccount"],["uiComponent",""]],template:function(e,t){1&e&&(c.kc(0,"gotomeeting-account-list",0,1),c.sc("filtersUpdate",function(e){return t.onFiltersUpdate(e)})("tableSort",function(e){return t.onTableSort(e)})("tablePageChange",function(e){return t.onTablePageChange(e)})("openDeleteDialog",function(e){return t.onOpenDeleteDialog(e)})("beginPairing",function(e){return t.onPairingRequested(e)})("editAccount",function(e){return t.onEditAccountRequested(e)}),c.jc()),2&e&&c.Dc("showLoader",t.showLoader)("tableData",t.tableData)("tablePaginator",t.tablePaginator)("searchFilterValue",t.searchFilterValue)},directives:[rE],encapsulation:2,changeDetection:0}),e})(),gE=(()=>{class e{constructor(e){this.router=e,this.platform=E.b.getInstance()}canActivate(e,t){return!!this.platform.isPluginActive("MsTeamsApp")||(this.router.navigate(["/unauthorized"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(c.oc(s.h))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();function mE(e){return`docebo_msteams_pairing_${e}`}const bE=M.a.t("standard","None"),fE=M.a.t("webinar","Paired"),_E=(e,t,i,s,n,a)=>{const o=`${e.replace("http://","https://")}`;window.localStorage.setItem("msteams_account_id",t.toString());let r={grant_type:"authorization_code",response_type:"code",scope:a,client_secret:n,client_id:i,redirect_uri:o};const c=document.createElement("form");for(var l in c.target="_blank",c.method="POST",c.action=`https://login.microsoftonline.com/${s}/oauth2/v2.0/authorize`,r){let e=document.createElement("input");e.type="hidden",e.name=l,e.setAttribute("value",r[l]),c.appendChild(e)}document.body.appendChild(c),c.submit(),c.remove()};let vE=(()=>{class e{constructor(e,t){this.route=e,this.backendService=t}ngOnInit(){this.code=this.route.snapshot.queryParamMap.get("code"),this.id=window.localStorage.getItem("msteams_account_id")||0,this.backendService.request("/learn/v1/webinar/msteams/accounts/pair","POST",{code:this.code,account_id:this.id}).pipe(Object(se.a)(1)).subscribe(()=>{window.localStorage.setItem("msteams_account_id",""),window.close(),window.localStorage.setItem(mE(this.id),"success")},()=>{window.localStorage.setItem("msteams_account_id",""),window.close(),window.localStorage.setItem(mE(this.id),"fail")})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.a),c.ec(I.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["msteams-pairing"]],decls:1,vars:0,template:function(e,t){1&e&&c.fc(0,"widget-spinner")},directives:[$C.a],styles:["msteams-pairing widget-spinner{position:absolute;top:250px;left:50%}"],encapsulation:2,changeDetection:0}),e})();var yE=function(e){return e.AccountSuccessfullyCreated="[MsTeams] Account Successfully Created",e.AccountSuccessfullyEdited="[MsTeams] Account Successfully Edited",e.AccountSuccessfullyPaired="[MsTeams] Account Successfully Paired",e.AccountSuccessfullyDeleted="[MsTeams] Account Successfully Deleted",e.PairingAccountRequested="[MsTeams] Pairing Account Requested",e.PairingAccountAcquired="[MsTeams] Pairing Account Acquired",e.PairingAccountCompleted="[MsTeams] Pairing Account Completed",e.PairingAccountAborted="[MsTeams] Pairing Account Aborted",e}({});class wE{constructor(e){this.payload=e,this.type=yE.AccountSuccessfullyCreated}}class CE{constructor(e){this.payload=e,this.type=yE.AccountSuccessfullyEdited}}class SE{constructor(e){this.payload=e,this.type=yE.PairingAccountRequested}}class kE{constructor(e){this.payload=e,this.type=yE.PairingAccountAcquired}}class TE{constructor(){this.type=yE.PairingAccountCompleted}}class IE{constructor(){this.type=yE.PairingAccountAborted}}class xE{constructor(e){this.payload=e,this.type=yE.AccountSuccessfullyDeleted}}const DE=Object(w.l)("learn-msteams"),OE=Object(w.n)(DE,e=>e);let EE=(()=>{class e{constructor(e){this.backendService=e,this.getScope().pipe().subscribe(e=>{this.currentPairScope=e.data.scope,console.log("Current MS Teams scope is "+this.currentPairScope)})}getScope(){return this.backendService.request("/learn/v1/webinar/msteams/accounts/scope","GET")}createAccount(e){const t=this.buildPayload(e);return this.backendService.request("/learn/v1/webinar/msteams/accounts","POST",t)}editAccount(e){const t=this.buildPayload(e);return this.backendService.request(`/learn/v1/webinar/msteams/accounts/${e.controls.id.value}`,"PUT",t)}fetchAccounts(e){const t=Object.assign(Object.assign({},e),{providers:["msteamsv2meeting","msteamsv2event"]});return this.backendService.request("/learn/v1/webinar/msteams/accounts","GET",t)}unpairAccount(e){return this.backendService.request(`/learn/v1/webinar/msteams/accounts/${e}/pair`,"DELETE")}deleteAccount(e){return this.backendService.request(`/learn/v1/webinar/msteams/accounts/${e}`,"DELETE")}buildPayload(e){var t;const i="meeting"===(null===(t=e.get("sessionType"))||void 0===t?void 0:t.value)?"msteamsv2meeting":"msteamsv2event";return{name:e.controls.accountName.value,tool:i,additional_info:e.controls.accountDescription.value,client_id:e.controls.clientId.value,client_secret:e.controls.clientSecret.value,session_type:i,is_calendarmeeting:e.controls.isCalendarMeeting.value,max_sessions:0|e.controls.sessionLimitAccount.value,max_sessions_per_course:0|e.controls.sessionLimitCourses.value,max_concurrent_sessions:0|e.controls.sessionLimitConcurrentRooms.value,tenant_id:e.controls.tenantId.value}}}return e.\u0275fac=function(t){return new(t||e)(c.oc(I.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();const AE=e=>t=>("string"==typeof t.value&&""==t.value||null==t.value)&&t.parent&&t.parent.controls[e].value?{thisIsRequiredField:"This is mandatory field"}:null,PE=function(){return{category:"webinar"}};function ME(e,t){if(1&e&&(c.kc(0,"div",10),c.kc(1,"div",5),c.kc(2,"div",11),c.gd(3),c.xc(4,"t"),c.jc(),c.kc(5,"div",15),c.kc(6,"div"),c.fc(7,"checkbox",16),c.jc(),c.jc(),c.jc(),c.jc()),2&e){const e=c.wc();c.Mb(3),c.id(" ",c.zc(4,4,"Session type",c.Hc(7,PE))," "),c.Mb(4),c.Dc("inputFormControl",e.isCalendarMeeting.inputFormControl)("checked",e.isCalendarMeeting.checked)("label",e.isCalendarMeeting.label)}}function LE(e,t){if(1&e&&(c.kc(0,"div",18),c.fc(1,"textfield",8),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitCoursesTextField.type)("id",e.sessionLimitCoursesTextField.id)("floating_label",e.sessionLimitCoursesTextField.floating_label)("label",e.sessionLimitCoursesTextField.label)("max_length",e.sessionLimitCoursesTextField.max_length)("inputFormControl",e.sessionLimitCoursesTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}function jE(e,t){if(1&e&&(c.kc(0,"div",18),c.fc(1,"textfield",8),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitAccountTextField.type)("id",e.sessionLimitAccountTextField.id)("floating_label",e.sessionLimitAccountTextField.floating_label)("label",e.sessionLimitAccountTextField.label)("max_length",e.sessionLimitAccountTextField.max_length)("inputFormControl",e.sessionLimitAccountTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}function RE(e,t){if(1&e&&(c.kc(0,"div",18),c.fc(1,"textfield",8),c.jc()),2&e){const e=c.wc();c.Mb(1),c.Dc("type",e.sessionLimitConcurrentRoomsTextField.type)("id",e.sessionLimitConcurrentRoomsTextField.id)("floating_label",e.sessionLimitConcurrentRoomsTextField.floating_label)("label",e.sessionLimitConcurrentRoomsTextField.label)("max_length",e.sessionLimitConcurrentRoomsTextField.max_length)("inputFormControl",e.sessionLimitConcurrentRoomsTextField.inputFormControl)("showRequiredFieldIndicator",!0)}}const FE=function(){return{category:"standard"}},NE=function(){return{category:"admin"}};let UE=(()=>{class e{constructor(e){this.cdr=e,this.isEditMode=!1}ngOnInit(){this.setFormFieldsParams()}ngAfterViewInit(){this.formGroup.valueChanges.subscribe(()=>{this.cdr.detectChanges()})}checkForChanges(){this.cdr.markForCheck()}setFormFieldsParams(){this.accountName={type:et.a.TEXT,id:"account-name",floating_label:!0,label:M.a.t("webinar","Account Name"),max_length:50,show_counter:!0,inputFormControl:this.formGroup.controls.accountName},this.accountDescription={type:et.a.TEXT,id:"account-description",floating_label:!0,label:M.a.t("app7020","Description"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.accountDescription},this.clientId={type:et.a.TEXT,id:"client-id",floating_label:!0,label:M.a.t("slack","Client ID"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.clientId},this.tenantId={type:et.a.TEXT,id:"tenant-id",floating_label:!0,label:M.a.t("opensesame","Tenant ID"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.tenantId},this.clientSecret={type:et.a.TEXT,id:"client-secret",floating_label:!0,label:M.a.t("app","Client Secret"),max_length:255,show_counter:!0,inputFormControl:this.formGroup.controls.clientSecret},this.sessionType={id:"session-type",label:M.a.t("webinar","Session type"),inputFormControl:this.formGroup.get("sessionType"),name:"session-type"},this.sessionType.event={id:"session-type-event",floating_label:!0,label:M.a.t("conference","Event")},this.sessionType.meeting={id:"session-type-meeting",floating_label:!0,label:M.a.t("conference","Meeting")},this.sessionLimitCoursesTextField={type:et.a.NUMBER,id:"session-limit-courses",floating_label:!0,label:M.a.t("configuration","Max rooms per course"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitCourses")},this.sessionLimitAccountTextField={type:et.a.NUMBER,id:"session-limit-accounts",floating_label:!0,label:M.a.t("webinar","Max sessions for this account"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.get("sessionLimitAccount")},this.sessionLimitConcurrentRoomsTextField={type:et.a.NUMBER,id:"session-limit-concurrents",floating_label:!0,label:M.a.t("configuration","Max concurrent rooms"),max_length:255,show_counter:!1,inputFormControl:this.formGroup.controls.sessionLimitConcurrentRooms};const e=!!this.formGroup.controls.isCalendarMeeting.value;this.isCalendarMeeting={label:M.a.t("webinar","Show Meeting instructor calendar"),inputFormControl:new Ze.e(e),checked:e},this.isCalendarMeeting.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.controls.isCalendarMeeting.setValue(e)});const t=!!this.formGroup.controls.sessionLimitCourses.value;this.sessionLimitCoursesCheckbox={label:M.a.t("webinar","Set session limits for courses"),inputFormControl:new Ze.e(t),checked:t},this.sessionLimitCoursesCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.controls.sessionLimitCoursesCheckbox.setValue(e)});const i=!!this.formGroup.controls.sessionLimitAccount.value;this.sessionLimitAccountCheckbox={label:M.a.t("webinar","Set session limits per accounts"),inputFormControl:new Ze.e(i),checked:i},this.sessionLimitAccountCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.controls.sessionLimitAccountCheckbox.setValue(e)});const s=!!this.formGroup.controls.sessionLimitConcurrentRooms.value;this.sessionLimitConcurrentRoomsCheckbox={label:M.a.t("webinar","Set session for concurrent rooms"),inputFormControl:new Ze.e(s),checked:s},this.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges.subscribe(e=>{this.formGroup.controls.sessionLimitConcurrentRoomsCheckbox.setValue(e)})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["msteams-account-panel-ui"]],inputs:{formGroup:"formGroup",isEditMode:"isEditMode",oauthRedirectUri:"oauthRedirectUri",oauthRedirectUriTranslatable:"oauthRedirectUriTranslatable"},decls:56,vars:84,consts:[[1,"msteams-create-account"],[1,"msteams-account-redirect-info"],[1,"zmdi","zmdi-info","zmdi-hc-2x","text-main"],[1,"border-top-wrapper",3,"formGroup"],[1,"msteams-account-info-container"],[1,"details-container"],[1,"bold-subtitle"],[1,"msteams-account-text-field-margin"],[3,"type","id","floating_label","label","max_length","inputFormControl","showRequiredFieldIndicator"],[1,"msteams-account-text-field-margin-no-bottom"],[1,"border-top-wrapper","msteams-account-info-container"],[1,"bold-subtitle","options-subtitle"],[3,"label","value","name","enabled","inputFormControl"],[1,"text-grey-mid","hint","options-label"],["class","border-top-wrapper msteams-account-info-container",4,"ngIf"],[1,"options-container"],[3,"inputFormControl","checked","label"],["class","msteams-account-margin-huge",4,"ngIf"],[1,"msteams-account-margin-huge"]],template:function(e,t){1&e&&(c.kc(0,"section",0),c.kc(1,"div"),c.kc(2,"div",1),c.fc(3,"i",2),c.kc(4,"span"),c.gd(5),c.xc(6,"t"),c.fc(7,"br"),c.gd(8),c.jc(),c.jc(),c.jc(),c.kc(9,"form",3),c.kc(10,"div",4),c.kc(11,"div",5),c.kc(12,"div",6),c.gd(13),c.xc(14,"t"),c.jc(),c.kc(15,"div",7),c.fc(16,"textfield",8),c.jc(),c.kc(17,"div",7),c.fc(18,"textfield",8),c.jc(),c.kc(19,"div",7),c.fc(20,"textfield",8),c.jc(),c.kc(21,"div",7),c.fc(22,"textfield",8),c.jc(),c.kc(23,"div",9),c.fc(24,"textfield",8),c.jc(),c.jc(),c.jc(),c.kc(25,"div",10),c.kc(26,"div",5),c.kc(27,"div",11),c.gd(28),c.xc(29,"t"),c.jc(),c.kc(30,"div"),c.fc(31,"radio",12),c.jc(),c.kc(32,"div"),c.fc(33,"radio",12),c.fc(34,"div",13),c.jc(),c.jc(),c.jc(),c.ed(35,ME,8,8,"div",14),c.kc(36,"div",10),c.kc(37,"div",5),c.kc(38,"div",11),c.gd(39),c.xc(40,"t"),c.jc(),c.kc(41,"div",15),c.kc(42,"div"),c.fc(43,"checkbox",16),c.jc(),c.ed(44,LE,2,7,"div",17),c.xc(45,"async"),c.jc(),c.kc(46,"div",15),c.kc(47,"div"),c.fc(48,"checkbox",16),c.jc(),c.ed(49,jE,2,7,"div",17),c.xc(50,"async"),c.jc(),c.kc(51,"div",15),c.kc(52,"div"),c.fc(53,"checkbox",16),c.jc(),c.ed(54,RE,2,7,"div",17),c.xc(55,"async"),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()),2&e&&(c.Mb(5),c.id(" ",c.yc(6,64,t.oauthRedirectUriTranslatable),""),c.Mb(3),c.id(" ",t.oauthRedirectUri," "),c.Mb(1),c.Dc("formGroup",t.formGroup),c.Mb(4),c.id(" ",c.zc(14,66,"General Information",c.Hc(81,FE))," "),c.Mb(3),c.Dc("type",t.accountName.type)("id",t.accountName.id)("floating_label",t.accountName.floating_label)("label",t.accountName.label)("max_length",t.accountName.max_length)("inputFormControl",t.accountName.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.accountDescription.type)("id",t.accountDescription.id)("floating_label",t.accountDescription.floating_label)("label",t.accountDescription.label)("max_length",t.accountDescription.max_length)("inputFormControl",t.accountDescription.inputFormControl)("showRequiredFieldIndicator",!1),c.Mb(2),c.Dc("type",t.clientId.type)("id",t.clientId.id)("floating_label",t.clientId.floating_label)("label",t.clientId.label)("max_length",t.clientId.max_length)("inputFormControl",t.clientId.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.tenantId.type)("id",t.tenantId.id)("floating_label",t.tenantId.floating_label)("label",t.tenantId.label)("max_length",t.tenantId.max_length)("inputFormControl",t.tenantId.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(2),c.Dc("type",t.clientSecret.type)("id",t.clientSecret.id)("floating_label",t.clientSecret.floating_label)("label",t.clientSecret.label)("max_length",t.clientSecret.max_length)("inputFormControl",t.clientSecret.inputFormControl)("showRequiredFieldIndicator",!0),c.Mb(4),c.id(" ",c.zc(29,69,"Session type",c.Hc(82,PE))," "),c.Mb(3),c.Dc("label",t.sessionType.meeting.label)("value","meeting")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(2),c.Dc("label",t.sessionType.event.label)("value","event")("name",t.sessionType.name)("enabled",!t.sessionType.inputFormControl.readonly)("inputFormControl",t.sessionType.inputFormControl),c.Mb(2),c.Dc("ngIf","meeting"===t.sessionType.inputFormControl.value),c.Mb(4),c.id(" ",c.zc(40,72,"Options",c.Hc(83,NE))," "),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitCoursesCheckbox.inputFormControl)("checked",t.sessionLimitCoursesCheckbox.checked)("label",t.sessionLimitCoursesCheckbox.label),c.Mb(1),c.Dc("ngIf",c.yc(45,75,t.sessionLimitCoursesCheckbox.inputFormControl.valueChanges)||t.sessionLimitCoursesTextField.inputFormControl.value>0&&t.sessionLimitCoursesCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitAccountCheckbox.inputFormControl)("checked",t.sessionLimitAccountCheckbox.checked)("label",t.sessionLimitAccountCheckbox.label),c.Mb(1),c.Dc("ngIf",c.yc(50,77,t.sessionLimitAccountCheckbox.inputFormControl.valueChanges)||t.sessionLimitAccountTextField.inputFormControl.value>0&&t.sessionLimitAccountCheckbox.inputFormControl.value||!1),c.Mb(4),c.Dc("inputFormControl",t.sessionLimitConcurrentRoomsCheckbox.inputFormControl)("checked",t.sessionLimitConcurrentRoomsCheckbox.checked)("label",t.sessionLimitConcurrentRoomsCheckbox.label),c.Mb(1),c.Dc("ngIf",c.yc(55,79,t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.valueChanges)||t.sessionLimitConcurrentRoomsTextField.inputFormControl.value>0&&t.sessionLimitConcurrentRoomsCheckbox.inputFormControl.value||!1))},directives:[Ze.y,Ze.p,Ze.i,Ct.a,Zn.a,m.p,ih.a],pipes:[M.b,m.b],styles:[".color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}msteams-account-panel-ui .bold-subtitle{padding-bottom:6px;font-weight:600;font-size:14px;line-height:18px}msteams-account-panel-ui .border-top-wrapper{border-top:1px solid var(--ui-color-badge-background-light)}msteams-account-panel-ui .details-container{padding:24px 0}msteams-account-panel-ui .options-subtitle{margin-bottom:16px}msteams-account-panel-ui .options-label{padding-left:24px}msteams-account-panel-ui .docebo-radio{margin-bottom:0}msteams-account-panel-ui .msteams-account-limit-list{padding:24px}msteams-account-panel-ui .msteams-account-redirect-info{display:flex;align-items:center;padding:1rem 1.5rem;padding:var(--hyd-spacing-sm) var(--hyd-spacing-md)}.router-outlet:not(.direction-rtl):not(.heracles-root) msteams-account-panel-ui .msteams-account-redirect-info span{margin-left:29px}.router-outlet.direction-rtl:not(.heracles-root) msteams-account-panel-ui .msteams-account-redirect-info span{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) msteams-account-panel-ui .msteams-account-redirect-info span{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) msteams-account-panel-ui .msteams-account-redirect-info span{margin-right:29px}.router-outlet:not(.direction-rtl):not(.heracles-root) msteams-account-panel-ui .msteams-account-margin{margin-left:12px}.router-outlet.direction-rtl:not(.heracles-root) msteams-account-panel-ui .msteams-account-margin{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) msteams-account-panel-ui .msteams-account-margin{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) msteams-account-panel-ui .msteams-account-margin{margin-right:12px}.router-outlet:not(.direction-rtl):not(.heracles-root) msteams-account-panel-ui .msteams-account-margin-huge{margin-left:26px}.router-outlet.direction-rtl:not(.heracles-root) msteams-account-panel-ui .msteams-account-margin-huge{margin-left:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) msteams-account-panel-ui .msteams-account-margin-huge{margin-right:auto}.router-outlet.direction-rtl:not(.heracles-root) msteams-account-panel-ui .msteams-account-margin-huge{margin-right:26px}msteams-account-panel-ui .msteams-account-info-container{padding:0 1.5rem;padding:0 var(--hyd-spacing-md);box-sizing:border-box}msteams-account-panel-ui .msteams-account-text-field-margin{margin:16px 0 24px}msteams-account-panel-ui .msteams-account-text-field-margin-no-bottom{margin:16px 0 0}"],encapsulation:2,changeDetection:0}),e})();const zE=["uiComponent"];let qE=(()=>{class e extends vc.a{constructor(t,i,s,n){super(),this.pageService=t,this.msTeamsService=i,this.msTeamsStore=s,this.translationService=n,this.isEditMode=!1,this.notMoreThan=(e,t)=>i=>i.value>e?{notMoreThan:this.translationService.instant("Max limit is {max} {things}",{category:"standard",max:e,things:t})}:null,this.baseRedirectUri=e.createBaseRedirectUri(),this.oauthRedirectUriTranslatable=M.a.t("webinar","Microsoft Teams Oauth redirect URL:")}static createBaseRedirectUri(){return`${E.b.getInstance().getPlatformActualUrl()}/learn/msteams`}ngOnInit(){this.rightPanel=this.pageService.rightPanel,this.setFormGroup()}ngAfterViewInit(){this.setPanelActions()}ngOnDestroy(){super.ngOnDestroy(),this.rightPanel.buttonsEnabled()}setPanelActions(){const e=[],t=M.a.t("standard",this.isEditMode?"Confirm":"Create");e.push({type:"normal",properties:{text:t},customClasses:"float-ltr-right-clear-none",handler:()=>{this.checkCustomFormValidations(),this.form.controls.clientId.errors||this.form.controls.clientId.setErrors(null),this.form.valid?(this.cleanFormValues(this.form),this.isEditMode?this.editAccount():this.createAccount()):(Object(Cy.l)(this.form),this.form.setValue(this.form.value))}}),e.push({type:"cancel",properties:{text:M.a.t("standard","Cancel")},customClasses:"float-ltr-right-clear-none",handler:e=>{e.close()}}),this.rightPanel.setActions(e)}createAccount(){this.rightPanel.buttonsDisabled(),this.msTeamsService.createAccount(this.form).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{this.accountName=e.data.name,this.accountId=e.data.id;const t={id:e.data.id,name:this.accountName,description:e.data.additional_info,createdAt:P_()().toDate(),clientId:e.data.client_id,clientSecret:e.data.client_secret,accessTokenStatus:bE,sessionType:e.session_type,isCalendarMeeting:e.is_calendarmeeting,sessionLimitCourses:0|this.form.controls.sessionLimitCourses.value,sessionLimitAccount:0|this.form.controls.sessionLimitAccount.value,sessionLimitConcurrentRooms:0|this.form.controls.sessionLimitConcurrentRooms.value,tenantId:e.data.tenantId};this.msTeamsStore.dispatch(new wE(t)),this.rightPanel.close(),_E(this.baseRedirectUri,e.data.id,this.form.controls.clientId.value,e.data.tenant_id,e.data.client_secret,this.msTeamsService.currentPairScope)},this.accountUpsertErrorCallback())}editAccount(){this.rightPanel.buttonsDisabled(),this.msTeamsService.editAccount(this.form).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{var t=this.accountName;this.accountName=e.data.name;const i={id:e.data.id,name:t,description:e.data.additional_info,createdAt:P_()().toDate(),clientId:e.data.client_id,tenantId:e.data.tenant_id,clientSecret:e.data.client_secret,sessionType:e.data.session_type,accessTokenStatus:bE};this.msTeamsService.unpairAccount(e.data.id).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(()=>{_E(this.baseRedirectUri,e.data.id,this.form.controls.clientId.value,e.data.tenant_id,e.data.client_secret,this.msTeamsService.currentPairScope),this.msTeamsStore.dispatch(new CE(i)),this.rightPanel.close()})},this.accountUpsertErrorCallback())}accountUpsertErrorCallback(){return e=>{1002===e.code&&(Object(Cy.l)(this.form),this.form.controls.clientId.setErrors({notUnique:M.a.t("webinar","Multiple accounts cannot use the same Client ID")}),Object(Cy.l)(this.form),this.uiComponent.checkForChanges(),this.rightPanel.buttonsEnabled())}}cleanFormValues(e){e.controls.sessionLimitCoursesCheckbox.value||e.controls.sessionLimitCourses.setValue(0),e.controls.sessionLimitAccountCheckbox.value||e.controls.sessionLimitAccount.setValue(0),e.controls.sessionLimitConcurrentRoomsCheckbox.value||e.controls.sessionLimitConcurrentRooms.setValue(0)}setFormGroup(){this.form=new Ze.h({id:new Ze.e(this.accountId),accountName:new Ze.e(this.accountName),accountDescription:new Ze.e(this.accountDescription),clientId:new Ze.e(this.clientId),tenantId:new Ze.e(this.tenantId),clientSecret:new Ze.e(this.clientSecret),sessionType:new Ze.e(this.sessionType),isCalendarMeeting:new Ze.e(this.isCalendarMeeting),sessionLimitCourses:new Ze.e(this.sessionLimitCourses),sessionLimitCoursesCheckbox:new Ze.e(!!this.sessionLimitCourses),sessionLimitAccount:new Ze.e(this.sessionLimitAccount),sessionLimitAccountCheckbox:new Ze.e(!!this.sessionLimitAccount),sessionLimitConcurrentRooms:new Ze.e(this.sessionLimitConcurrentRooms),sessionLimitConcurrentRoomsCheckbox:new Ze.e(!!this.sessionLimitConcurrentRooms)}),this.checkCustomFormValidations()}checkCustomFormValidations(){this.form.controls.accountName.setValidators([Ze.x.required,e=>"string"==typeof e.value&&e.value.match("^\\s+$")?{notHaveOnlyBlankCharacters:"This field cannot contains only empty spaces"}:null,Ze.x.maxLength(255)]),this.form.controls.accountDescription.setValidators([Ze.x.maxLength(255)]),this.form.controls.clientId.setValidators([Ze.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ze.x.maxLength(255)]),this.form.controls.clientSecret.setValidators([Ze.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ze.x.maxLength(255)]),this.form.controls.tenantId.setValidators([Ze.x.required,e=>"string"!=typeof e.value||e.value.match("^\\S+$")?null:{nonBlankCharacters:"This field cannot contains empty spaces"},Ze.x.maxLength(255)]),this.form.controls.sessionType.setValidators([Ze.x.required]),this.form.controls.sessionLimitCourses.setValidators([AE("sessionLimitCoursesCheckbox"),this.notMoreThan(999,"sessions")]),this.form.controls.sessionLimitAccount.setValidators([AE("sessionLimitAccountCheckbox"),this.notMoreThan(999,"sessions")]),this.form.controls.sessionLimitConcurrentRooms.setValidators([AE("sessionLimitConcurrentRoomsCheckbox"),this.notMoreThan(999,"rooms")]),this.form.controls.accountName.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.controls.clientId.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.controls.tenantId.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.controls.clientSecret.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.form.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}}return e.\u0275fac=function(t){return new(t||e)(c.ec(P.a),c.ec(EE),c.ec(w.e),c.ec(rn.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["msteams-account-panel-container"]],viewQuery:function(e,t){if(1&e&&c.nd(zE,1),2&e){let e;c.Rc(e=c.tc())&&(t.uiComponent=e.first)}},inputs:{isEditMode:"isEditMode",accountId:"accountId",accountName:"accountName",accountDescription:"accountDescription",clientId:"clientId",tenantId:"tenantId",clientSecret:"clientSecret",sessionType:"sessionType",isCalendarMeeting:"isCalendarMeeting",sessionLimitCourses:"sessionLimitCourses",sessionLimitAccount:"sessionLimitAccount",sessionLimitConcurrentRooms:"sessionLimitConcurrentRooms"},features:[c.Lb([EE]),c.Jb],decls:2,vars:3,consts:[[3,"formGroup","oauthRedirectUri","oauthRedirectUriTranslatable"],["uiComponent",""]],template:function(e,t){1&e&&c.fc(0,"msteams-account-panel-ui",0,1),2&e&&c.Dc("formGroup",t.form)("oauthRedirectUri",t.baseRedirectUri)("oauthRedirectUriTranslatable",t.oauthRedirectUriTranslatable)},directives:[UE,Ze.p,Ze.i],styles:["\n        msteams-account-panel-ui {\n            height: 100%;\n            overflow-y: auto;\n            overflow-x: hidden;\n            display: block;\n        }\n    "],encapsulation:2,changeDetection:0}),e})();var VE=function(e){return e.NAME="name",e.CREATION="created_at",e}({}),BE=function(e){return e.ASC="asc",e.DESC="desc",e}({});const GE={isVisible:!0,type:Tl.a.BLANK001,title:M.a.t("webinar","No Microsoft Teams Accounts Found"),subtitle:M.a.t("webinar","Click the Add button in the top right corner to add a new Microsoft Teams account!")},HE={isVisible:!0,type:Tl.a.EMPTY001,title:M.a.t("standard","Whoops, No results found!"),subtitle:M.a.t("myteam","Please try again using different search/filters criteria.")},$E={mode:Me.a.push,viewOptionLabel:M.a.t("standard","SORT BY"),filters:new je.a([{title:M.a.t("standard","Search"),code:"search",type:Me.d.free_search_filter,params:{placeholder:M.a.t("standard","Search...")}}]),appliedFiltersNumber:new je.a(null),displayedItemsNumber:new je.a(null),viewOptions:new je.a(null),disableViewOptions:!1,elementLabels:{singular:M.a.t("standard","items"),plural:M.a.t("standard","items")}},YE={columnName:"createdAt",dir:Hx.a.DESC},WE={name:{headerLabel:M.a.t("webinar","Account Name"),fieldName:"name",columnName:"name",sortable:!0},description:{headerLabel:M.a.t("app7020","Description"),fieldName:"description",columnName:"description",sortable:!1},sessionType:{headerLabel:M.a.t("webinar","Session type"),fieldName:"sessionType",columnName:"sessionType",sortable:!1},createdAt:{headerLabel:M.a.t("standard","Creation Date"),fieldName:"createdAt",columnName:"createdAt",sortable:!0,type:"date",format:"MM/DD/YYYY"},accessTokenStatus:{headerLabel:M.a.t("webinar","Access token"),fieldName:"accessTokenStatus",columnName:"accessTokenStatus",sortable:!1},ellipsis:{}};function QE(e,t){if(1&e&&(c.gd(0),c.xc(1,"t")),2&e){const e=c.wc(3);c.hd(c.yc(1,1,e.tableColumns.createdAt.headerLabel))}}function KE(e,t){1&e&&(c.gd(0),c.xc(1,"HDateTime")),2&e&&c.id(" ",c.Ac(1,1,t.item.createdAt,null,"lll")," ")}function JE(e,t){if(1&e){const e=c.lc();c.kc(0,"hyd-table",6),c.sc("sort",function(t){return c.Vc(e),c.wc(2).onTableSort(t)}),c.fc(1,"hyd-table-column-text",7),c.fc(2,"hyd-table-column-text",7),c.kc(3,"hyd-table-column",8),c.kc(4,"hyd-table-column-header"),c.ed(5,QE,2,3,"ng-template"),c.jc(),c.kc(6,"hyd-table-column-cell"),c.ed(7,KE,2,5,"ng-template"),c.jc(),c.jc(),c.fc(8,"hyd-table-column-text",7),c.fc(9,"hyd-table-column-text",7),c.fc(10,"hyd-table-column-ellipsis",9),c.jc()}if(2&e){const e=c.wc(2);c.Dc("data",e.tableData)("sorting",e.tableDefaultSorting),c.Mb(1),c.Dc("headerLabel",e.tableColumns.name.headerLabel)("fieldName",e.tableColumns.name.fieldName)("columnName",e.tableColumns.name.columnName)("sortable",e.tableColumns.name.sortable),c.Mb(1),c.Dc("headerLabel",e.tableColumns.description.headerLabel)("fieldName",e.tableColumns.description.fieldName)("columnName",e.tableColumns.description.columnName)("sortable",e.tableColumns.description.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.createdAt.columnName)("sortable",e.tableColumns.createdAt.sortable),c.Mb(5),c.Dc("headerLabel",e.tableColumns.sessionType.headerLabel)("fieldName",e.tableColumns.sessionType.fieldName)("columnName",e.tableColumns.sessionType.columnName)("sortable",e.tableColumns.sessionType.sortable),c.Mb(1),c.Dc("headerLabel",e.tableColumns.accessTokenStatus.headerLabel)("fieldName",e.tableColumns.accessTokenStatus.fieldName)("columnName",e.tableColumns.accessTokenStatus.columnName)("sortable",e.tableColumns.accessTokenStatus.sortable),c.Mb(1),c.Dc("columnName",e.tableColumns.ellipsis.columnName)("actions",e.tableColumns.ellipsis.actions)("orientation",e.tableColumns.ellipsis.orientation)}}function XE(e,t){if(1&e){const e=c.lc();c.kc(0,"hyd-paginator",10),c.sc("pageChange",function(t){return c.Vc(e),c.wc(2).onTablePageChange(t)}),c.jc()}if(2&e){const e=c.wc(2);c.Dc("pageIndex",e.tablePaginator.pageIndex)("pageSize",e.tablePaginator.pageSize)("length",e.tablePaginator.length)("pageSizeAutoAllowed",e.tablePaginator.pageSizeAutoAllowed)}}function ZE(e,t){if(1&e&&c.fc(0,"blankslate",11),2&e){const e=c.wc(2);c.Dc("ngClass","blankslate-container")("isVisible",e.blankslateWithFilters.isVisible)("type",e.blankslateWithFilters.type)("title",e.blankslateWithFilters.title)("subtitle",e.blankslateWithFilters.subtitle)}}function eA(e,t){if(1&e){const e=c.lc();c.kc(0,"data-browser",2),c.sc("onFiltersUpdate",function(t){return c.Vc(e),c.wc().onDataBrowserFiltersUpdate(t)}),c.ed(1,JE,11,23,"hyd-table",3),c.ed(2,XE,1,4,"hyd-paginator",4),c.ed(3,ZE,1,5,"blankslate",5),c.jc()}if(2&e){const e=c.wc();c.Dc("dataBrowserSource",e.dataBrowserSource),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("ngIf",e.showTable()),c.Mb(1),c.Dc("ngIf",e.showBlankslateWithFilters())}}function tA(e,t){if(1&e&&(c.kc(0,"blankslate",12),c.gd(1," >\n"),c.jc()),2&e){const e=c.wc();c.Dc("isVisible",e.blankslateWithoutFilters.isVisible)("type",e.blankslateWithoutFilters.type)("title",e.blankslateWithoutFilters.title)("subtitle",e.blankslateWithoutFilters.subtitle)}}let iA=(()=>{class e{constructor(e){this.cdr=e,this.filtersUpdate=new c.q,this.tableSort=new c.q,this.tablePageChange=new c.q,this.openDeleteDialog=new c.q,this.beginPairing=new c.q,this.editAccount=new c.q,this.blankslateWithoutFilters=GE,this.blankslateWithFilters=HE,this.dataBrowserSource=$E,this.tableDefaultSorting=YE,this.tableColumns=WE,this.setTableEllipsisColumn()}showBlankslateWithoutFilters(){return!this.showLoader&&0===this.tableData.length&&""===this.searchFilterValue}showBlankslateWithFilters(){return!this.showLoader&&0===this.tableData.length&&""!==this.searchFilterValue}showDataBrowser(){return this.tableData.length>0||""!==this.searchFilterValue}showTable(){return!this.showLoader&&this.tableData.length>0}onDataBrowserFiltersUpdate(e){this.filtersUpdate.emit(e)}onTableSort(e){this.tableSort.emit(e)}onTablePageChange(e){this.tablePageChange.emit(e)}checkForChanges(){this.cdr.markForCheck()}setTableEllipsisColumn(){this.tableColumns.ellipsis={columnName:"ellipsis",columnWidth:"100px",alignment:Le.a.CENTER,ellipsed:!1,orientation:"bottom-right",actions:[{id:"pair",title:M.a.t("standard","Pair"),params:null,active:!1,action:e=>{this.beginPairing.emit(e)}},{id:"edit",title:M.a.t("app7020","Edit"),params:null,active:!1,action:e=>{this.editAccount.emit(e)}},{id:"delete",title:M.a.t("standard","Delete"),params:null,active:!1,action:e=>{this.openDeleteDialog.emit(e)}}]}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(c.i))},e.\u0275cmp=c.Yb({type:e,selectors:[["msteams-account-list"]],inputs:{tableData:"tableData",searchFilterValue:"searchFilterValue",showLoader:"showLoader",tablePaginator:"tablePaginator"},outputs:{filtersUpdate:"filtersUpdate",tableSort:"tableSort",tablePageChange:"tablePageChange",openDeleteDialog:"openDeleteDialog",beginPairing:"beginPairing",editAccount:"editAccount"},decls:2,vars:2,consts:[["class","data-browser-msTeams",3,"dataBrowserSource","onFiltersUpdate",4,"ngIf"],["class","blankslate-container",3,"isVisible","type","title","subtitle",4,"ngIf"],[1,"data-browser-msTeams",3,"dataBrowserSource","onFiltersUpdate"],["class","hyd-table",3,"data","sorting","sort",4,"ngIf"],["class","hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange",4,"ngIf"],[3,"ngClass","isVisible","type","title","subtitle",4,"ngIf"],[1,"hyd-table",3,"data","sorting","sort"],[3,"headerLabel","fieldName","columnName","sortable"],[3,"columnName","sortable"],[3,"columnName","actions","orientation"],[1,"hyd-paginator",3,"pageIndex","pageSize","length","pageSizeAutoAllowed","pageChange"],[3,"ngClass","isVisible","type","title","subtitle"],[1,"blankslate-container",3,"isVisible","type","title","subtitle"]],template:function(e,t){1&e&&(c.ed(0,eA,4,4,"data-browser",0),c.ed(1,tA,2,4,"blankslate",1)),2&e&&(c.Dc("ngIf",t.showDataBrowser()),c.Mb(1),c.Dc("ngIf",t.showBlankslateWithoutFilters()))},directives:[m.p,Fe.a,Ue.a,ze.a,qe.c,qe.d,qe.b,Ve.a,Ne.b,jc.a,m.n],pipes:[M.b,ei.a],styles:["msteams-account-list .blankslate-container{margin-top:91px}msteams-account-list .hyd-paginator{position:fixed;bottom:0;left:0;width:100%;border:1px solid var(--hyd-color-border-neutral)}msteams-account-list .data-browser-msTeams .grid-content-container.mdl-grid{margin:0}msteams-account-list .data-browser-msTeams .grid-content-container.mdl-grid>.mdl-cell.mdl-cell--12-col{margin:0;width:100%}msteams-account-list .data-browser-msTeams .full-width-header-container>.section-wrapper{border-top:1px solid var(--hyd-color-border-neutral)}msteams-account-list .data-browser-msTeams .full-width-header-container>.section-wrapper>.mdl-grid{margin:0}msteams-account-list .data-browser-msTeams .hyd-table-body{padding-bottom:45px}msteams-account-list .data-browser-msTeams .docebo-data-browser #sidebar-filters .sidebar-wrapper{height:100%;box-sizing:border-box;border-top:var(--hyd-color-border-neutral)}msteams-account-list .data-browser-msTeams .hyd-table{border-color:var(--hyd-color-border-neutral)}msteams-account-list .data-browser-msTeams .hyd-table .hyd-table-head{border-color:var(--hyd-color-border-neutral)!important}msteams-account-list .data-browser-msTeams .hyd-table .hyd-table-body,msteams-account-list .data-browser-msTeams .hyd-table .hyd-table-body .hyd-table-row{border-color:var(--hyd-color-border-neutral)}"],encapsulation:2,changeDetection:0}),e})();const sA=["uiComponent"];let nA=(()=>{class e extends vc.a{constructor(e,t,i,s,n,a,o,r,c){super(),this.translationService=e,this.pageService=t,this.router=i,this.msTeamsStore=s,this.permissionManagerService=n,this.appStore=a,this.windowService=o,this.msTeamsService=r,this.docLayoutService=c,this.showLoader=!0,this.searchFilterValue="",this.tablePaginator={pageIndex:0,pageSize:15,length:0,pageSizeAutoAllowed:!0},this.tableActiveSorting=VE.CREATION,this.tableActiveSortingDir=BE.DESC,this.tableData=[],this.msTeamsAccountSelector$=this.msTeamsStore.pipe(Object(w.q)(OE)),this.pageInitialized=!1,this.snackbarIntervals=[],this.docLayoutService.breadcrumbs.setHierarchicalBreadcrumbs([{label:"Microsoft Teams",href:this.router.url}]),this.hasUserViewPermission$=n.can(aD.a.USER_VIEW),this.msTeamsAccountSelector$.pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(e=>{if("PairingAccountCompleted"===e.status&&this.windowSubscription)return this.windowSubscription.unsubscribe(),void this.fetchAccounts();if(["AccountCreated","AccountEdited","PairingAccountRequested"].includes(e.status))switch(e.status){case"AccountCreated":this.fetchAccounts(),this.uiComponent.checkForChanges(),this.watchPairing(e.lastCreatedAccount,"create");break;case"AccountEdited":this.fetchAccounts(),this.uiComponent.checkForChanges(),this.watchPairing(e.lastEditedAccount,"edit");break;case"PairingAccountRequested":this.watchPairing(e.lastRequestedPairedAccount,"pair")}"PairingAccountAcquired"===e.status&&e.pairing&&(this.fetchAccounts(),this.uiComponent.checkForChanges(),this.windowSubscription=this.windowService.focus().pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(t=>{if(t&&"PairingAccountAcquired"===e.status&&e.pairing){const{account:t,action:i,item:s}=e.pairing;this.createSnackbar(s,t,i),this.msTeamsStore.dispatch(new TE)}})),"AccountDeleted"===e.status&&e.lastDeletedAccountPartial&&(this.fetchAccounts(),this.uiComponent.checkForChanges(),this.handleAccountDeleted(e.lastDeletedAccountPartial))})}ngOnInit(){this.pageService.ready().pipe(Object(se.a)(1)).subscribe(()=>{this.pageDialog=this.pageService.dialog,this.rightPanel=this.pageService.rightPanel,this.setPageTitle(),this.setActionButtons(),this.pageInitialized=!0})}ngAfterViewInit(){this.fetchAccounts()}ngOnDestroy(){this.docLayoutService.actionButtons.clearActionButtons(),super.ngOnDestroy()}onFiltersUpdate(e){this.searchFilterValue=e.search?e.search:"",this.fetchAccounts()}onTableSort(e){switch(this.tableActiveSortingDir=e.dir,e.columnName){case"createdAt":this.tableActiveSorting=VE.CREATION;break;case"name":this.tableActiveSorting=VE.NAME}this.fetchAccounts()}onTablePageChange(e){const{pageIndex:t}=e;let{pageSize:i}=e;i<1&&(i=this.getAutoPageSize()),this.tablePaginator.pageSize=i,this.tablePaginator.pageIndex=t,this.fetchAccounts()}onOpenDeleteDialog(e){const t=e.id,i=e.name;this.docLayoutService.dialog.showCommonDialog(this.setDeleteDialogParams()).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.msTeamsService.deleteAccount(t).pipe(Object(vt.a)(this.ngUnsubscribe)).subscribe(()=>{e.actionSuccess.next(!0),this.msTeamsStore.dispatch(new xE({id:t,name:i}))})})}onPairingRequested(e){this.msTeamsService.unpairAccount(e.id).subscribe(()=>{_E(`${E.b.getInstance().getPlatformActualUrl()}/learn/msteams`,e.id,e.clientId,e.tenantId,e.clientSecret,this.msTeamsService.currentPairScope),this.msTeamsStore.dispatch(new SE({id:e.id,name:e.name,description:e.description,clientId:e.clientId,tenantId:e.tenantId,clientSecret:"",createdAt:e.createdAt,accessTokenStatus:fE,sessionType:e.sessionType,sessionLimitCourses:e.sessionLimitCourses,sessionLimitAccount:e.sessionLimitAccount,sessionLimitConcurrentRooms:e.sessionLimitConcurrentRooms}))})}onEditAccountRequested(e){this.openAccountRightPanel(e)}getAutoPageSize(){const e=document.querySelector("msteams-account-list");return Math.floor((window.innerHeight-e.offsetTop-90-80-39)/38)}createAccountCreationSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully created!",{accountName:null==e?void 0:e.name})}createAccountEditSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully edited!",{accountName:null==e?void 0:e.name})}createAccountDeleteSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully deleted!",{accountName:e.name})}showSuccessSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"success"})}createAccountPairingSuccessSnackbarLabel(e){return M.a.t("webinar","<b>{accountName}</b> has been successfully paired!",{accountName:null==e?void 0:e.name})}showFailureSnackbar(e){this.docLayoutService.toast.showToast({message:e,type:"error"})}createAccountPairingFailureSnackbarLabel(){return M.a.t("webinar","Pairing failed, please try again or check your configuration")}setPageTitle(){this.docLayoutService.header.showTitleBar({title:"Microsoft Teams",subtitle:M.a.t("webinar","Manage your Microsoft Teams accounts."),fullWidth:!0})}setActionButtons(){const e=[{properties:{BgClass:"bg-positive-green",textClass:"text-white",icons:["plus"],tooltipText:M.a.t("webinar","New Account"),tooltipPosition:"bottom"},onClick:()=>{this.openAccountRightPanel()}}];this.docLayoutService.actionButtons.setActionButtons(e)}openAccountRightPanel(e){let t,i;e?(t=M.a.t("webinar","Edit Account"),i=M.a.t("webinar","Edit the details of your account to update it")):(t=M.a.t("webinar","New Account"),i=M.a.t("webinar","Fill in all the mandatory details in order to create a new account"));const s={isEditMode:!!e,accountId:e?e.id:null,accountName:e?e.name:null,accountDescription:e?e.description:null,clientId:e?e.clientId:null,tenantId:e?e.tenantId:null,clientSecret:e?e.clientSecret:null,sessionType:e?e.sessionType:"meeting",isCalendarMeeting:!!e&&e.isCalendarMeeting,sessionLimitCourses:e&&e.sessionLimitCourses>0?e.sessionLimitCourses:null,sessionLimitAccount:e&&e.sessionLimitAccount>0?e.sessionLimitAccount:null,sessionLimitConcurrentRooms:e&&e.sessionLimitConcurrentRooms>0?e.sessionLimitConcurrentRooms:null};this.pageService.rightPanel.setWidth(500).setTitle(t).setDescription(i).setContent({component:qE,params:s}).open()}fetchAccounts(){this.showLoader=!0,this.uiComponent.checkForChanges(),this.msTeamsService.fetchAccounts({term:this.searchFilterValue,page:this.tablePaginator.pageIndex+1,page_size:this.tablePaginator.pageSize,sort:`${this.tableActiveSorting}.${this.tableActiveSortingDir}`}).subscribe(e=>{const t=[];for(const n of e.data.items)t.push({id:n.id,clientId:n.client_id,clientSecret:n.client_secret,tenantId:n.tenant_id,name:n.name,description:n.description,createdAt:P_.a.unix(n.created_at).toDate(),accessTokenStatus:n.paired?fE:bE,sessionType:(i=n.session_type,{msteamsv2meeting:"meeting",msteamsv2event:"event"}[i]),isCalendarMeeting:n.is_calendarmeeting,sessionLimitCourses:n.max_sessions_per_course,sessionLimitAccount:n.max_sessions,sessionLimitConcurrentRooms:n.max_concurrent_sessions});var i;const{total_count:s}=e.data;this.tablePaginator.length=s,this.mapTableData(t),this.showLoader=!1,this.uiComponent.checkForChanges()})}mapTableData(e){this.tableData=[],e.forEach(e=>{this.tableData.push(e)})}handleAccountCreated(e,t){if("success"===e){const e=this.createAccountCreationSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.createAccountPairingFailureSnackbarLabel();this.showFailureSnackbar(e)}}handleAccountPaired(e,t){if("success"===e){const e=this.createAccountPairingSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.createAccountPairingFailureSnackbarLabel();this.showFailureSnackbar(e)}}handleAccountEdited(e,t){if("success"===e){const e=this.createAccountEditSuccessSnackbarLabel(t);this.showSuccessSnackbar(e)}else if("fail"===e){const e=this.createAccountPairingFailureSnackbarLabel();this.showFailureSnackbar(e)}}handleAccountDeleted(e){const t=this.createAccountDeleteSuccessSnackbarLabel(e);this.showSuccessSnackbar(t)}watchPairing(e,t){if(null===e)return;const i=Math.random();this.snackbarIntervals[i]=setInterval(()=>{const s=window.localStorage.getItem(mE(e.id));s&&(window.localStorage.removeItem(mE(e.id)),clearInterval(this.snackbarIntervals[i]),delete this.snackbarIntervals[i],this.msTeamsStore.dispatch(new kE({item:s,account:e,action:t})))},200),setTimeout(()=>{this.snackbarIntervals[i]&&(clearInterval(this.snackbarIntervals[i]),window.localStorage.removeItem(mE("")),this.msTeamsStore.dispatch(new IE))},4e4)}createSnackbar(e,t,i){switch(i){case"create":this.handleAccountCreated(e,t);break;case"edit":this.handleAccountEdited(e,t);break;case"pair":this.handleAccountPaired(e,t);break;case"delete":this.handleAccountDeleted(t)}}setDeleteDialogParams(){return{id:"delete-checklist-dialog",width:460,height:210,title:M.a.t("standard","Delete Account"),content:M.a.t("standard","Are you sure you want to delete the selected account?<br>If you delete it, it will be definitely removed from the system and you will need to reassign all of the events created with this account to a different account. If you don't reassign the events, both learners and instructors will no longer be able to access them."),actions:[{id:"cancel",type:"neutral",label:M.a.t("standard","Cancel"),slot:"end"},{id:"confirm",type:"negative",label:M.a.t("standard","Delete"),slot:"end"}]}}}return e.\u0275fac=function(t){return new(t||e)(c.ec(rn.a),c.ec(P.a),c.ec(s.h),c.ec(w.e),c.ec(dD.a),c.ec(w.e),c.ec(kc.a),c.ec(EE),c.ec(j.a))},e.\u0275cmp=c.Yb({type:e,selectors:[["msteams-account-container"]],viewQuery:function(e,t){if(1&e&&c.nd(sA,1),2&e){let e;c.Rc(e=c.tc())&&(t.uiComponent=e.first)}},features:[c.Jb],decls:2,vars:4,consts:[[3,"showLoader","tableData","tablePaginator","searchFilterValue","filtersUpdate","tableSort","tablePageChange","openDeleteDialog","beginPairing","editAccount"],["uiComponent",""]],template:function(e,t){1&e&&(c.kc(0,"msteams-account-list",0,1),c.sc("filtersUpdate",function(e){return t.onFiltersUpdate(e)})("tableSort",function(e){return t.onTableSort(e)})("tablePageChange",function(e){return t.onTablePageChange(e)})("openDeleteDialog",function(e){return t.onOpenDeleteDialog(e)})("beginPairing",function(e){return t.onPairingRequested(e)})("editAccount",function(e){return t.onEditAccountRequested(e)}),c.jc()),2&e&&c.Dc("showLoader",t.showLoader)("tableData",t.tableData)("tablePaginator",t.tablePaginator)("searchFilterValue",t.searchFilterValue)},directives:[iA],encapsulation:2,changeDetection:0}),e})(),aA=(()=>{class e{constructor(e,t){this.pageService=e,this.docLayoutService=t}canDeactivate(e){return new Promise(t=>{if(!e.showIframe)return t(!0);this.pageService.dialog.open({id:1,width:465,height:200,title:tt.a.t("widgets","Leaving session"),content:tt.a.t("widgets","Leaving this page will log you out from the session. Are you sure you want to do that?"),actions:[{type:"cancel",properties:{text:tt.a.t("standard","Cancel")},handler:e=>{e.close(),t(!1)}},{type:"normal",properties:{text:tt.a.t("standard","Confirm")},handler:e=>{t(!0),e.close()}}]})})}}return e.\u0275fac=function(t){return new(t||e)(c.oc(P.a),c.oc(j.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var oA=i("B2Mo");const rA=["privacyPolicy"],cA=["termsAndConditions"];function lA(e,t){if(1&e){const e=c.lc();c.kc(0,"div",6),c.kc(1,"doc-layout-policies-acceptance",7,8),c.kc(3,"div",9),c.kc(4,"ui-button-text",10),c.sc("trigger",function(){return c.Vc(e),c.wc().askForLogoutConfirmation()}),c.xc(5,"t"),c.xc(6,"t"),c.jc(),c.kc(7,"ui-button-text",11),c.sc("trigger",function(){return c.Vc(e),c.wc().onPrivacyPolicyAccept()}),c.xc(8,"t"),c.xc(9,"t"),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(1),c.Dc("insideConfirmDetails",!0)("showPrivacyPolicyName",!0)("showPrivacyPolicySubtitle",!0)("showPrivacyPolicyHeaderMessage",!0)("showPrivacyPolicyContent",!0)("showPrivacyPolicyCheckboxes",!0)("update",e.isPrivacyPolicyUpdated)("showInlineError",!0),c.Mb(3),c.Dc("label",c.yc(5,15,e.dictionary.dontAgree))("ariaLabel",c.yc(6,17,e.dictionary.dontAgree))("loading",e.loggingOut),c.Mb(3),c.Dc("label",c.yc(8,19,e.dictionary.agree))("ariaLabel",c.yc(9,21,e.dictionary.agree))("color","accent")("loading",e.savingPrivacyPolicy)}}function dA(e,t){if(1&e){const e=c.lc();c.kc(0,"div",12),c.kc(1,"doc-layout-policies-acceptance",13,14),c.kc(3,"div",15),c.kc(4,"ui-button-text",10),c.sc("trigger",function(){return c.Vc(e),c.wc().askForLogoutConfirmation()}),c.xc(5,"t"),c.xc(6,"t"),c.jc(),c.kc(7,"ui-button-text",11),c.sc("trigger",function(){return c.Vc(e),c.wc().onTermsConditionsAccept()}),c.xc(8,"t"),c.xc(9,"t"),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(1),c.Dc("insideConfirmDetails",!0)("showTermsAndConditionsName",!0)("showTermsAndConditionsSubtitle",!0)("showTermsAndConditionsContent",!0)("showTermsAndConditionsCheckboxes",!0)("update",e.isTermsAndConditionsUpdated)("showInlineError",!0),c.Mb(3),c.Dc("label",c.yc(5,14,e.dictionary.dontAgree))("ariaLabel",c.yc(6,16,e.dictionary.dontAgree))("loading",e.loggingOut),c.Mb(3),c.Dc("label",c.yc(8,18,e.dictionary.agree))("ariaLabel",c.yc(9,20,e.dictionary.agree))("color","accent")("loading",e.savingTermsAndConditions)}}function uA(e,t){if(1&e&&(c.fc(0,"ui-notification-inline",31),c.xc(1,"t"),c.xc(2,"t")),2&e){const e=c.wc(2);c.Dc("title",c.yc(1,2,e.personalInfoErrorsTitle))("message",c.yc(2,4,e.dictionary.personalInfo.error.errorsSaveFormSubTitle))}}function hA(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.personalInfo.error.fieldRequired)," ")}}function pA(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.personalInfo.error.fieldRequired)," ")}}function gA(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.personalInfo.error.missingEmail)," ")}}function mA(e,t){if(1&e&&(c.kc(0,"ui-input-error"),c.gd(1),c.xc(2,"t"),c.jc()),2&e){const e=c.wc(2);c.Mb(1),c.id(" ",c.yc(2,1,e.dictionary.personalInfo.error.emailNotValid)," ")}}function bA(e,t){1&e&&c.fc(0,"div",37)}function fA(e,t){if(1&e&&(c.ic(0),c.kc(1,"div",25),c.fc(2,"doc-shared-user-additional-field",35),c.jc(),c.ed(3,bA,1,0,"div",36),c.hc()),2&e){const e=t.$implicit,i=t.index,s=c.wc(3);c.Mb(2),c.Dc("id",e.id)("label",e.label)("type",e.type)("control",e.formControl)("options",e.options)("iframeHeight",e.iframeHeight)("iframeUrl",e.iframeUrl)("userData",s.userData),c.Mb(1),c.Dc("ngIf",0!==i&&(i+1)%2==0)}}function _A(e,t){if(1&e&&(c.kc(0,"section",32),c.kc(1,"div",17),c.kc(2,"div",18),c.kc(3,"div",33),c.gd(4),c.xc(5,"t"),c.jc(),c.jc(),c.ed(6,fA,4,9,"ng-container",34),c.jc(),c.jc()),2&e){const e=c.wc(2);c.Mb(4),c.id(" ",c.yc(5,2,e.dictionary.personalInfo.additionalFields)," "),c.Mb(2),c.Dc("ngForOf",e.additionalFields)}}function vA(e,t){if(1&e){const e=c.lc();c.kc(0,"div",16),c.kc(1,"div",17),c.kc(2,"div",18),c.kc(3,"div",19),c.kc(4,"div",20),c.gd(5),c.xc(6,"t"),c.jc(),c.kc(7,"div",21),c.gd(8),c.xc(9,"t"),c.jc(),c.jc(),c.jc(),c.jc(),c.kc(10,"div",17),c.kc(11,"div",18),c.ed(12,uA,3,6,"ui-notification-inline",22),c.jc(),c.jc(),c.kc(13,"section",23),c.kc(14,"div",17),c.kc(15,"div",18),c.kc(16,"div",24),c.gd(17),c.xc(18,"t"),c.jc(),c.jc(),c.kc(19,"div",25),c.kc(20,"ui-input-text",26),c.xc(21,"t"),c.xc(22,"t"),c.ed(23,hA,3,3,"ui-input-error",27),c.jc(),c.jc(),c.kc(24,"div",25),c.kc(25,"ui-input-text",26),c.xc(26,"t"),c.xc(27,"t"),c.ed(28,pA,3,3,"ui-input-error",27),c.jc(),c.jc(),c.kc(29,"div",25),c.kc(30,"ui-input-text",26),c.xc(31,"t"),c.xc(32,"t"),c.ed(33,gA,3,3,"ui-input-error",27),c.ed(34,mA,3,3,"ui-input-error",27),c.jc(),c.jc(),c.jc(),c.jc(),c.ed(35,_A,7,4,"section",28),c.kc(36,"ui-panel-footer"),c.kc(37,"ui-panel-footer-slot-end"),c.kc(38,"ui-button-text",29),c.sc("trigger",function(){return c.Vc(e),c.wc().logout()}),c.xc(39,"t"),c.jc(),c.kc(40,"ui-button-text",30),c.sc("trigger",function(){return c.Vc(e),c.wc().savePersonalInfo()}),c.xc(41,"t"),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(5),c.id(" ",c.yc(6,22,e.dictionary.personalInfo.additionalFieldsUpdate)," "),c.Mb(3),c.id(" ",c.yc(9,24,e.dictionary.personalInfo.additionalFieldsSubtitle)," "),c.Mb(4),c.Dc("ngIf",e.personalInfoErrorsCount>0),c.Mb(5),c.id(" ",c.yc(18,26,e.dictionary.personalInfo.details)," "),c.Mb(3),c.Dc("formControl",e.personalInfoGroup.controls.firstname)("requiredMarker",c.yc(21,28,e.dictionary.personalInfo.requiredMarker))("label",c.yc(22,30,e.dictionary.personalInfo.firstName)),c.Mb(3),c.Dc("ngIf",(null==e.personalInfoGroup.controls.firstname.errors?null:e.personalInfoGroup.controls.firstname.errors.required)&&e.personalInfoGroup.controls.firstname.dirty),c.Mb(2),c.Dc("formControl",e.personalInfoGroup.controls.lastname)("requiredMarker",c.yc(26,32,e.dictionary.personalInfo.requiredMarker))("label",c.yc(27,34,e.dictionary.personalInfo.lastName)),c.Mb(3),c.Dc("ngIf",(null==e.personalInfoGroup.controls.lastname.errors?null:e.personalInfoGroup.controls.lastname.errors.required)&&e.personalInfoGroup.controls.lastname.dirty),c.Mb(2),c.Dc("formControl",e.personalInfoGroup.controls.email)("requiredMarker",c.yc(31,36,e.dictionary.personalInfo.requiredMarker))("label",c.yc(32,38,e.dictionary.personalInfo.email)),c.Mb(3),c.Dc("ngIf",(null==e.personalInfoGroup.controls.email.errors?null:e.personalInfoGroup.controls.email.errors.required)&&e.personalInfoGroup.controls.email.dirty),c.Mb(1),c.Dc("ngIf",!1===(null==e.personalInfoGroup.controls.email.errors||null==e.personalInfoGroup.controls.email.errors.emailValidator?null:e.personalInfoGroup.controls.email.errors.emailValidator.valid)&&e.personalInfoGroup.controls.email.dirty),c.Mb(1),c.Dc("ngIf",e.additionalFields.length>0),c.Mb(3),c.Dc("loading",e.loggingOut)("label",c.yc(39,40,e.dictionary.signout)),c.Mb(2),c.Dc("label",c.yc(41,42,e.dictionary.update))("loading",e.savingPersonalInfo)}}const yA=function(e){return{count_error:e}};function wA(e,t){if(1&e&&(c.fc(0,"ui-notification-inline",31),c.xc(1,"t"),c.xc(2,"t")),2&e){const e=c.wc(2);c.Dc("title",c.zc(1,2,1===e.passwordChangeErrorsCount?e.dictionary.savingChangesNotPossibleSingular:e.dictionary.savingChangesNotPossiblePlural,c.Ic(7,yA,e.passwordChangeErrorsCount)))("message",c.yc(2,5,e.dictionary.personalInfo.error.errorsSaveFormSubTitle))}}function CA(e,t){if(1&e){const e=c.lc();c.kc(0,"div",38),c.kc(1,"div",17),c.kc(2,"div",18),c.kc(3,"div",19),c.kc(4,"div",20),c.gd(5),c.xc(6,"t"),c.jc(),c.kc(7,"div",21),c.gd(8),c.xc(9,"t"),c.jc(),c.jc(),c.jc(),c.jc(),c.kc(10,"div",17),c.kc(11,"div",18),c.ed(12,wA,3,9,"ui-notification-inline",22),c.jc(),c.jc(),c.kc(13,"div",17),c.kc(14,"div",18),c.fc(15,"lrn-my-profile-change-password-form",null,39),c.jc(),c.jc(),c.kc(17,"ui-panel-footer"),c.kc(18,"ui-panel-footer-slot-end"),c.kc(19,"ui-button-text",29),c.sc("trigger",function(){return c.Vc(e),c.wc().logout()}),c.xc(20,"t"),c.jc(),c.kc(21,"ui-button-text",30),c.sc("trigger",function(){c.Vc(e);const t=c.Sc(16);return c.wc().updatePassword(t.passwordChangeFormGroup)}),c.xc(22,"t"),c.jc(),c.jc(),c.jc(),c.jc()}if(2&e){const e=c.wc();c.Mb(5),c.id(" ",c.yc(6,7,e.dictionary.changePassword.title)," "),c.Mb(3),c.id(" ",c.yc(9,9,e.dictionary.changePassword.changePasswordRequired)," "),c.Mb(4),c.Dc("ngIf",e.passwordChangeErrorsCount>0),c.Mb(7),c.Dc("loading",e.loggingOut)("label",c.yc(20,11,e.dictionary.signout)),c.Mb(2),c.Dc("label",c.yc(22,13,e.dictionary.changePassword.btnChangePassword))("loading",e.savingNewPassword)}}let SA=(()=>{class e extends vc.a{constructor(e,t,i,s,n,a,o,r){var c,l,d,u;super(),this._router=e,this._backendService=t,this._translationService=i,this._docLayoutService=s,this._sessionService=n,this._myProfileService=a,this._toggleService=o,this._store=r,this.isPrivacyPolicyUpdated=null===(l=null===(c=D.c.getInstance().need_policy_accept)||void 0===c?void 0:c.policy)||void 0===l?void 0:l.is_update,this.isTermsAndConditionsUpdated=null===(u=null===(d=D.c.getInstance().need_tc_accept)||void 0===d?void 0:d.tc)||void 0===u?void 0:u.is_update,this.dialogs=[],this.currentDialogIndex=0,this.dictionary=GS.a,this.conditionsOfUseDictionary=TT,this.savingPrivacyPolicy=!1,this.savingTermsAndConditions=!1,this.additionalFields=[],this.isSuperAdmin=D.c.getInstance().isCurrentUserA(D.c.LEVEL_SUPERADMIN),this.savingPersonalInfo=!1,this.savingNewPassword=!1,this.loggingOut=!1,this.passwordChangeErrorsCount=0,this.personalInfoErrorsCount=0,this._session=D.c.getInstance(),this._platform=D.b.getInstance(),this._useEmalAsUsername="on"===this._platform.user_settings.use_email_as_username,this._requireName=D.b.getInstance().settings.registration_settings.options.lastfirst_mandatory,this._docLayoutService.page.activateLimboMode(),this.initConfirmDetailsDialogs()}initConfirmDetailsDialogs(){const e=this._session.isCurrentUserA(D.c.LEVEL_SUPERADMIN),t=this._session.isCurrentUserA(D.c.LEVEL_ERP_ADMIN);this._session.need_policy_accept&&this.dialogs.push("privacy-policy"),this._session.need_tc_accept&&this.dialogs.push("terms-and-conditions"),!t&&this._session.force_change&&this.dialogs.push("password"),!e&&D.b.getInstance().settings.request_mandatory_fields_completion&&this._session.has_unfilled_fields&&(this._setPersonalInfoGroup(),this.dialogs.push("user-fields"),this._getAdditionalFields(),this._getUserData(),this._startLangChangeListenerForAddFields()),this.dialogs.length||this.goToHomepage()}showNextDialog(){this.currentDialogIndex++,this.currentDialogIndex>=this.dialogs.length&&this.goToHomepage()}goToHomepage(){this._router.navigate(["/learn/home"]),this._docLayoutService.breadcrumbs.clearNavigationHistory()}askForLogoutConfirmation(){this._docLayoutService.dialog.showCommonDialog({title:this.conditionsOfUseDictionary.areYouSureDialog.title,content:this.conditionsOfUseDictionary.areYouSureDialog.content,actions:[{id:"cancel",type:"neutral",label:this.conditionsOfUseDictionary.areYouSureDialog.cancel,slot:"end"},{id:"logout",type:"negative",label:this.conditionsOfUseDictionary.areYouSureDialog.logout,slot:"end"}]}).subscribe(e=>{"cancel"===e.actionID?e.actionSuccess.next(!0):this.logout().subscribe(()=>{e.actionSuccess.next(!0)},()=>{e.actionSuccess.next(!0)})})}logout(){this.loggingOut=!0;const e=this._backendService.logout().pipe(Object(Ti.a)(()=>{this._session.redirect_on_logout?top.window.location.href=`${this._backendService.getBaseUrl()}/lms/index.php?r=site/logout&keep_oauth=1`:(this.loggingOut=!1,this._router.navigate(["/learn/signin"]))}));return e.subscribe(()=>{}),e}onPrivacyPolicyAccept(){this.redirectPowerUserImpersonator()||(this.privacyPolicy.ppInlineError=!1,this.privacyPolicy.isValid()?(this.savingPrivacyPolicy=!0,this.privacyPolicy.acceptNewPrivacyPolicy().pipe(Object(se.a)(1)).subscribe(()=>{this._reloadSessionAndGoToNextDialog()},()=>{this.logout()})):this.privacyPolicy.ppInlineError=!0)}onTermsConditionsAccept(){this.redirectPowerUserImpersonator()||(this.termsAndConditions.tcInlineError=!1,this.termsAndConditions.isValid()?(this.savingTermsAndConditions=!0,this.termsAndConditions.acceptNewTerms().pipe(Object(se.a)(1)).subscribe(()=>{this._reloadSessionAndGoToNextDialog()},()=>{this.logout()})):this.termsAndConditions.tcInlineError=!0)}savePersonalInfo(){if(!this.redirectPowerUserImpersonator()&&this._isPersonalInfoValid()){this.savingPersonalInfo=!0;const e=this._myProfileService.getAdditionalFieldsRawValue(this.additionalFields);this._myProfileService.updatePersonalInfo(this.personalInfoGroup.controls.firstname.value,this.personalInfoGroup.controls.lastname.value,this.personalInfoGroup.controls.email.value,e,"myProfile").subscribe(e=>{e.data.success&&(this._session.setUserInfo({firstname:this.personalInfoGroup.controls.firstname.value,lastname:this.personalInfoGroup.controls.lastname.value,email:this.personalInfoGroup.controls.email.value}),this._docLayoutService.toast.showToast({message:GS.a.personalInfo.success,type:"success"}),this._reloadSessionAndGoToNextDialog()),this.savingPersonalInfo=!1},()=>{this.savingPersonalInfo=!1})}}updatePassword(e){if(!this.redirectPowerUserImpersonator()){for(let t in e.controls)e.controls[t].markAsDirty();e.markAllAsTouched(),e.updateValueAndValidity(),this.passwordChangeErrorsCount=0,e.valid?(this.savingNewPassword=!0,this._myProfileService.updatePassword(e).subscribe(e=>{e.error||(this._docLayoutService.toast.showToast({message:this.dictionary.changePassword.successChangePassword,type:"success"}),this.savingNewPassword=!1,this._reloadSessionAndGoToNextDialog())},()=>{this.savingNewPassword=!1,this.passwordChangeErrorsCount=Object.keys(e.controls).filter(t=>!e.controls[t].valid).length})):this.passwordChangeErrorsCount=Object.keys(e.controls).filter(t=>!e.controls[t].valid).length}}_getAdditionalFields(){this._myProfileService.getAdditionalFields().pipe(Object(se.a)(1)).subscribe(e=>{this.additionalFields=e})}_startLangChangeListenerForAddFields(){this._translationService.onLangChange.pipe(Object(vt.a)(this.ngUnsubscribe),Object(ki.a)(e=>this._myProfileService.getAdditionalFields(e.lang))).subscribe(e=>{this.additionalFields=e})}_getUserData(){this._myProfileService.getUserData(this._session.id).subscribe(e=>{this.userData=e.data})}persistUserLangLimboMode(){return this._backendService.updateMyPreferences({settings:[{name:"ui.language",value:this._translationService.currentLang}]},D.c.getInstance().id.toString())}_reloadSessionAndGoToNextDialog(){D.b.getInstance().settings.language_persistence_in_limbo_mode&&this.currentDialogIndex===this.dialogs.length-1?this.persistUserLangLimboMode().pipe(Object(ki.a)(e=>this._sessionService.loadUserSession(!0))).subscribe(()=>{this.savingNewPassword=!1,this.showNextDialog(),this._store.dispatch(Object(oA.b)())},()=>{this.logout()}):this._sessionService.loadUserSession(!0).subscribe(()=>{this.savingNewPassword=!1,this.showNextDialog()},()=>{this.logout()})}_setPersonalInfoGroup(){this.personalInfoGroup=new Ze.h({firstname:new Ze.e(this._session.firstname,this._requireName?Ze.x.required:null),lastname:new Ze.e(this._session.lastname,this._requireName?Ze.x.required:null),email:new Ze.e(this._session.email,[Nc.a.validEmail(),this.isSuperAdmin||this._useEmalAsUsername?Ze.x.required:Ze.x.nullValidator])})}_isPersonalInfoValid(){let e=!0;this._userProfileErrorsCount=0,this._additionalFieldsErrorsCount=0,this.personalInfoErrorsCount=0,this._myProfileService.stripTagsFromPersonalInfoFields(this.personalInfoGroup),this._myProfileService.stripTagsFromAdditionalFields(this.additionalFields),this.personalInfoGroup.markAllAsTouched();for(const t in this.personalInfoGroup.controls)this.personalInfoGroup.controls[t].valid||(this.personalInfoGroup.controls[t].markAsDirty(),this._userProfileErrorsCount++,e=!1);for(const t in this.additionalFields)this.additionalFields[t].formControl.markAsTouched(),this.additionalFields[t].formControl.valid||this.additionalFields[t].formControl.disabled||(this.additionalFields[t].formControl.setErrors({required:!0}),this.additionalFields[t].formControl.markAsDirty(),this._additionalFieldsErrorsCount++,e=!1);return this.userAdditionalField.forEach(e=>{"freetext"===e.type&&e.checkInputChanges()}),this.personalInfoErrorsCount=this._userProfileErrorsCount+this._additionalFieldsErrorsCount,this.personalInfoErrorsTitle=tt.a.t("standard","{count_error} Errors - Saving changes not possible",{count_error:this.personalInfoErrorsCount}),e}redirectPowerUserImpersonator(){return!!this._session.is_impersonated_by_pu&&(this._router.navigate(["/impersonating-pu/unauthorized"],{state:{docLayoutMode:"limbo"}}),!0)}}return e.\u0275fac=function(t){return new(t||e)(c.ec(s.h),c.ec(I.a),c.ec(u.h),c.ec(j.a),c.ec(Vk.a),c.ec(YS.a),c.ec(u.g),c.ec(w.e))},e.\u0275cmp=c.Yb({type:e,selectors:[["lrn-confirm-details"]],viewQuery:function(e,t){if(1&e&&(c.nd(rA,1),c.nd(cA,1),c.nd(QS.a,1)),2&e){let e;c.Rc(e=c.tc())&&(t.privacyPolicy=e.first),c.Rc(e=c.tc())&&(t.termsAndConditions=e.first),c.Rc(e=c.tc())&&(t.userAdditionalField=e)}},features:[c.Jb],decls:6,vars:4,consts:[[1,"confirm-details-wrapper"],[1,"confirm-details-content"],["class","confirm-details-privacy-policy ui-shadow-md",4,"ngIf"],["class","confirm-details-terms-and-conditions ui-shadow-md",4,"ngIf"],["class","confirm-details-user-fields ui-shadow-md",4,"ngIf"],["class","confirm-details-password ui-shadow-md",4,"ngIf"],[1,"confirm-details-privacy-policy","ui-shadow-md"],[3,"insideConfirmDetails","showPrivacyPolicyName","showPrivacyPolicySubtitle","showPrivacyPolicyHeaderMessage","showPrivacyPolicyContent","showPrivacyPolicyCheckboxes","update","showInlineError"],["privacyPolicy",""],[1,"policies-acceptance-footer-buttons","privacy"],[3,"label","ariaLabel","loading","trigger"],[3,"label","ariaLabel","color","loading","trigger"],[1,"confirm-details-terms-and-conditions","ui-shadow-md"],[3,"insideConfirmDetails","showTermsAndConditionsName","showTermsAndConditionsSubtitle","showTermsAndConditionsContent","showTermsAndConditionsCheckboxes","update","showInlineError"],["termsAndConditions",""],[1,"policies-acceptance-footer-buttons","terms-and-condition"],[1,"confirm-details-user-fields","ui-shadow-md"],[1,"ui-row"],[1,"ui-col-24"],[1,"confirm-details-panel-header"],["role","heading","aria-level","1",1,"ui-typography-heading-3"],[1,"ui-typography-subtitle","ui-color-typography-secondary"],[3,"title","message",4,"ngIf"],["aria-labelledby","confirm-details-title"],["role","heading","aria-level","3","id","confirm-details-title",1,"confirm-details-user-fields-title","ui-typography-heading-4"],[1,"ui-col-24","ui-col-sm-12"],["ngDefaultControl","",3,"formControl","requiredMarker","label"],[4,"ngIf"],["aria-labelledby","confirm-additional-fields-title",4,"ngIf"],["color","neutral",3,"loading","label","trigger"],["color","accent",3,"label","loading","trigger"],[3,"title","message"],["aria-labelledby","confirm-additional-fields-title"],["role","heading","aria-level","3","id","confirm-additional-fields-title",1,"confirm-details-user-fields-title","ui-typography-heading-4"],[4,"ngFor","ngForOf"],["ngDefaultControl","",3,"id","label","type","control","options","iframeHeight","iframeUrl","userData"],["class","clearfix",4,"ngIf"],[1,"clearfix"],[1,"confirm-details-password","ui-shadow-md"],["changePasswordForm",""]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"div",1),c.ed(2,lA,10,23,"div",2),c.ed(3,dA,10,22,"div",3),c.ed(4,vA,42,44,"div",4),c.ed(5,CA,23,15,"div",5),c.jc(),c.jc()),2&e&&(c.Mb(2),c.Dc("ngIf","privacy-policy"===t.dialogs[t.currentDialogIndex]),c.Mb(1),c.Dc("ngIf","terms-and-conditions"===t.dialogs[t.currentDialogIndex]),c.Mb(1),c.Dc("ngIf","user-fields"===t.dialogs[t.currentDialogIndex]),c.Mb(1),c.Dc("ngIf","password"===t.dialogs[t.currentDialogIndex]))},directives:[m.p,ET.a,b.U,b.Qc,Ze.b,Ze.o,Ze.f,b.Ud,b.Wd,b.Jd,b.Ac,m.o,QS.a,kk],pipes:[M.b],styles:["lrn-confirm-details,lrn-confirm-details .confirm-details-wrapper{height:100%;display:flex;flex:1;flex-direction:column}lrn-confirm-details .confirm-details-wrapper{background-color:var(--ui-color-layout-background);justify-content:center}lrn-confirm-details .confirm-details-content{display:flex;flex-shrink:0;justify-content:center;position:relative}lrn-confirm-details .confirm-details-password,lrn-confirm-details .confirm-details-privacy-policy,lrn-confirm-details .confirm-details-terms-and-conditions,lrn-confirm-details .confirm-details-user-fields{margin:0 auto;width:100%;max-width:var(--ui-size-modal-lg);background-color:var(--ui-color-layout-surface)}lrn-confirm-details .confirm-details-password,lrn-confirm-details .confirm-details-privacy-policy,lrn-confirm-details .confirm-details-terms-and-conditions{margin:0 auto}lrn-confirm-details .confirm-details-user-fields{margin:var(--ui-spacing-md) auto}lrn-confirm-details .confirm-details-user-fields .confirm-details-panel-header{padding-bottom:0}lrn-confirm-details .confirm-details-user-fields ui-notification-inline{margin-top:var(--ui-spacing-md)}lrn-confirm-details .confirm-details-password{max-width:var(--ui-size-modal-sm)}lrn-confirm-details .confirm-details-panel-header{padding:var(--ui-spacing-md) 0}lrn-confirm-details .confirm-details-password ui-panel-footer,lrn-confirm-details .confirm-details-user-fields ui-panel-footer{margin-top:var(--ui-spacing-md)}lrn-confirm-details .confirm-details-password ui-notification-inline,lrn-confirm-details .confirm-details-user-fields ui-notification-inline{margin-bottom:var(--ui-spacing-sm);display:block}lrn-confirm-details .confirm-details-user-fields-title{padding:var(--ui-spacing-md) 0}lrn-confirm-details doc-layout-policies-acceptance ui-spinner{margin:unset}"],encapsulation:2}),e})();var kA=i("rQlO"),TA=i("bOdf");const IA=[{path:"cookie-policy",component:yx},{path:"cookie-policy-public",children:[{path:"",component:_x}]},{path:"cookie-policy-private",children:[{path:"",component:_x}]},{path:"",canActivateChild:[he.a],children:[{path:"",component:fe.a,pathMatch:"full",data:{view:"none"}},{path:"external-simple",component:_e.a},{path:"external-ecommerce",component:be.a,data:{external:!0}},{path:"signin",component:fe.a,data:{view:"signin"}},{path:"register",component:fe.a,canActivate:[me.a],data:{view:"register"}},{path:"forgot-password",component:fe.a,data:{view:"forgot-password"}},{path:"registration-submitted",component:fe.a,data:{view:"registration-submitted"}},{path:"forgot-password-submitted",component:fe.a,data:{view:"forgot-password-submitted"}},{path:"reset-password-submitted",component:ye.a},{path:"policy",component:Ce.a},{path:"terms-conditions",component:Se.a},{path:"public",children:[{path:""},{path:"learning_plan",canActivateChild:[Wt,n.a],canDeactivate:[n.a],loadChildren:()=>Promise.resolve().then(i.bind(null,"A0KR")).then(e=>e.LearningPlanModule)},{path:"catalog",children:[{path:"",component:hx.a,resolve:{catalog:gx},data:{gstab:4}},{path:"view/:catalogId",component:hx.a,resolve:{catalog:gx},data:{external:!0}}]},{path:"course",pathMatch:"prefix",redirectTo:"/learn/course"},{path:"subscriptions",children:[{path:"index",component:xe.a,data:{gstab:4}},{path:"payment-billing/:plan_id",canActivate:[ge.a,l],component:Ie.a}]}]}]},{path:"course",canActivateChild:[Wt,n.a],canDeactivate:[n.a],loadChildren:()=>i.e(57).then(i.bind(null,"wKsZ")).then(e=>e.CatalogCourseWrapperModule)},{path:"courses",canLoad:[Ht],loadChildren:()=>i.e(1).then(i.bind(null,"DqQZ")).then(e=>e.LrnCoursesModule)},{path:"learning-plans",canLoad:[Ht],loadChildren:()=>i.e(1).then(i.bind(null,"DqQZ")).then(e=>e.LrnLearningPlansModule)},{path:"openidconnect/logout",canActivate:[de]},{path:"auth0/login",canActivateChild:[pe.a],children:[{component:Kt,path:"",pathMatch:"full"}]},{path:"auth0/callback",canActivateChild:[pe.a],children:[{component:Xt,path:"",pathMatch:"full"}]},{path:"sso/logout",canActivateChild:[he.a],component:sx},{path:"user/confirm-registration/:token",component:ve.a,canActivate:[me.a]},{path:"user/reset-password/:token",canActivateChild:[he.a],component:we.a},{path:"user/secure-logout",component:ox},{path:"",canActivateChild:[ge.a],children:[{path:"",component:yC},{path:"home",component:yC},{path:"my-profile",component:ix,canDeactivate:[Oe.a]},{path:"policy/view",component:Ce.a},{path:"terms-conditions/view",component:Se.a},{path:"confirm-details",component:SA},{path:"mycourses",children:[{path:"",component:ux,pathMatch:"full"}]},{path:"my-calendar",component:RC},{path:"course/:id/instructor-overview",loadChildren:()=>i.e(59).then(i.bind(null,"zjC3")).then(e=>e.InstructorOverviewModule)},{path:"course/:id/play",component:by,canActivate:[Wt],data:{mode:"player",playlistItem:{type:ke.a.COURSE}}},{path:"course/:id/:slug",component:by,canActivate:[Wt],data:{mode:"overview",playlistItem:{type:ke.a.COURSE}}},{path:"course/:id/:slug/:type",component:by,canActivate:[Wt],data:{mode:"player"}},{path:"course/:id/play/:id_lo/:slug",component:by,canActivate:[Wt,re],data:{mode:"player",playlistItem:{type:ke.a.COURSE}}},{path:"course/:id/session/:id_session/:slug",component:by,canActivate:[Wt,(()=>{class e{constructor(e,t,i,s){this.router=e,this.toggleService=t,this.backendService=i,this.store=s}canActivate(e){return this.toggleService.isOn(u.f.TOGGLE_VILT)&&this.toggleService.isOn(u.f.TOGGLE_WEBINARS_MIGRATION)?new a.a(t=>{const i=e.params.id,s=e.params.id_session,n=Object(oe.a)()?e=>{t.next(!0),t.complete()}:null,a=this.backendService.request(`/course/v1/courses/webinarmigration/mapping/${i}`,"GET",{session_id:s},void 0,I.b,null,n).pipe(Object(se.a)(1),Object(di.a)(e=>e.data.items));this.store.pipe(Object(w.q)(ae.d),Object(se.a)(1),Object(TA.a)(e=>void 0===e.id?a:Object(Ei.a)([])),Object(IT.a)(e=>Object(Ei.a)([]))).subscribe(e=>{0===e.length?(t.next(!0),t.complete()):(t.next(this.router.createUrlTree([this.router.url.replace(s,String(e[0].new_session_id))])),t.complete())})}):Object(Ei.a)(!0)}}return e.\u0275fac=function(t){return new(t||e)(c.oc(s.h),c.oc(u.g),c.oc(I.a),c.oc(w.e))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()],canDeactivate:[aA],data:{playlistItem:{type:ke.a.COURSE}}},{path:"course/:id",component:by,canActivate:[Wt],data:{mode:"overview",playlistItem:{type:ke.a.COURSE}}},{path:"multidomain/selector",component:xC},{path:"lp/:id",component:yv,canActivate:[Wt]},{path:"lp/:id/:slug",component:yv,canActivate:[Wt]},{path:"catalog",children:[{path:"",component:hx.a,resolve:{catalog:gx},data:{gstab:4}},{path:"licensed",children:[{path:"",component:De.a,resolve:{catalog:gx},data:{gstab:4}},{path:"view/:catalogId",component:De.a,resolve:{catalog:gx},data:{licensed:!0,external:!1}}]},{path:"view/:catalogId",component:hx.a,resolve:{catalog:gx},data:{external:!1}}]},{path:"learning_plan",canActivate:[ie],canActivateChild:[Wt],loadChildren:()=>Promise.resolve().then(i.bind(null,"A0KR")).then(e=>e.LearningPlanModule)},{path:"subscriptions",children:[{path:"index",component:xe.a,data:{gstab:4}},{path:"payment-billing/:plan_id",canActivate:[ge.a,l],component:Ie.a}]},{path:"global-search/:search",component:vC,data:{mode:"single"}},{path:"dashboard",loadChildren:()=>i.e(61).then(i.bind(null,"l7fg")).then(e=>e.ChannelsModule)},{path:"admin",loadChildren:()=>i.e(55).then(i.bind(null,"VEIG")).then(e=>e.AdminModule),canLoad:[ue.a]},{path:"zoomus/manage",data:{showFooter:!1},component:hD,canActivate:[Ix]},{path:"zoomus",component:Tx,canActivate:[Ix]},{path:"webex/manage",component:QD,canActivate:[pD],data:{showFooter:!1}},{path:"adobeconnect",children:[{path:"manage",canActivate:[A],component:MO,data:{showFooter:!1}},{path:"edit/:account_id",canActivate:[O],canDeactivate:[R],component:Gt,data:{showFooter:!1}}]},{path:"gotomeeting/manage",data:{showFooter:!1},component:pE,canActivate:[G]},{path:"gotomeeting",component:NO,canActivate:[G]},{path:"msteams/manage",data:{showFooter:!1},component:nA,canActivate:[gE]},{path:"msteams",component:vE,canActivate:[gE]},{path:"instructor",loadChildren:()=>i.e(58).then(i.bind(null,"IaS7")).then(e=>e.IltInstructorModule)},{path:"lens",loadChildren:()=>i.e(60).then(i.bind(null,"9KRv")).then(e=>e.LensModule)},{path:"bluejeans",canActivate:[kA.a],loadChildren:()=>i.e(56).then(i.bind(null,"jpO/")).then(e=>e.BlueJeansModule),data:{app:"BluejeansV2App",showFooter:!1}}]}];let xA=(()=>{class e{constructor(e){this.actions=e}}return e.\u0275fac=function(t){return new(t||e)(c.oc(y.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();const DA={accounts:[],lastCreatedAccount:null,lastRequestedPairedAccount:null,lastEditedAccount:null,status:"MsTeamsInitialState",pairing:null,lastDeletedAccountPartial:null,windowHasFocus:!1};function OA(e=DA,t){switch(t.type){case yE.AccountSuccessfullyCreated:return Object.assign(Object.assign({},e),{status:"AccountCreated",lastCreatedAccount:t.payload,pairing:null});case yE.AccountSuccessfullyPaired:return Object.assign(Object.assign({},e),{status:"AccountSuccessfullyPaired",lastRequestedPairedAccount:t.payload,pairing:null});case yE.AccountSuccessfullyEdited:return Object.assign(Object.assign({},e),{status:"AccountEdited",lastEditedAccount:t.payload,pairing:null});case yE.AccountSuccessfullyDeleted:return Object.assign(Object.assign({},e),{status:"AccountDeleted",lastDeletedAccountPartial:t.payload,pairing:null});case yE.PairingAccountRequested:return Object.assign(Object.assign({},e),{status:"PairingAccountRequested",lastRequestedPairedAccount:t.payload,lastEditedAccount:null,pairing:null});case yE.PairingAccountAcquired:return Object.assign(Object.assign({},e),{status:"PairingAccountAcquired",lastRequestedPairedAccount:null,pairing:Object.assign({},t.payload)});case yE.PairingAccountCompleted:return Object.assign(Object.assign({},DA),{status:"PairingAccountCompleted"});case yE.PairingAccountAborted:return Object.assign(Object.assign({},DA),{status:"PairingAccountAborted"});default:return e}}var EA=i("QKG3"),AA=i("mrSG");const PA=[401,403,404,500];let MA=(()=>{class e{constructor(e,t,i,n,a,o,r,c,l,d){this.update=e,this.store$=t,this.overviewActions=i,this.learningPlanActions=n,this.surveyPlayerActions=a,this.quizPlayerActions=o,this.svc=r,this.lpService=c,this.router=l,this.docLayoutService=d,this.pageNavigation$=new je.a(!0),this.loadCourseInfo$=this.update.pipe(Object(y.h)(Ts.a.LOAD_COURSE_INFO),Object(ki.a)(e=>this.svc.getCourseInfo(e).pipe(Object(di.a)(e=>Ts.a.loadCourseInfoSuccess(e)),Object(IT.a)(t=>{if(-1!==PA.indexOf(t.status))return Object(Ei.a)({type:"",payload:{}});Object(Ei.a)(Ts.a.loadCourseInfoRejected(e.payload))})))),this.loadCourseChapters$=this.update.pipe(Object(y.h)(Ts.b.LOAD_COURSE_CHAPTERS),Object(ki.a)(e=>this.svc.getCourseInfo(e).pipe(Object(di.a)(e=>Ts.b.loadCourseChaptersSuccess(e)),Object(IT.a)(t=>{if(-1!==PA.indexOf(t.status))return Object(Ei.a)({type:"",payload:{}});Object(Ei.a)(Ts.a.loadCourseInfoRejected(e.payload))})))),this.reloadCoursePlayer$=this.update.pipe(Object(y.h)(Ts.a.RELOAD_COURSE_PLAYER),Object(ki.a)(e=>this.svc.getCourseInfo(e).pipe(Object(di.a)(t=>Ts.a.loadCourseInfoSuccess(t,!0,e.payload.source)))),Object(IT.a)(e=>-1!==PA.indexOf(e.status)?Object(Ei.a)({type:"",payload:{}}):Object(Ei.a)(Ts.b.loadCourseInfoRejected(e)))),this.rateCourse$=this.update.pipe(Object(y.h)(Ts.a.RATE_COURSE),Object(ki.a)(e=>this.svc.rateCourse(e).pipe(Object(di.a)(t=>Ts.a.reloadRating(e.payload))))),this.reloadRating$=this.update.pipe(Object(y.h)(Ts.a.RELOAD_RATING),Object(ki.a)(e=>this.svc.getCourseRating(e).pipe(Object(di.a)(e=>Ts.a.updateCourseRating(e))))),this.loadOverviewInfo$=this.update.pipe(Object(y.h)(Ts.e.LOAD_OVERVIEW_INFO),Object(ki.a)(e=>this.svc.getOverviewInfo(e).pipe(Object(di.a)(t=>Object.assign(Object.assign({},e.payload),t)))),Object(di.a)(e=>this.overviewActions.loadOvervewInfoSuccess(e)),Object(IT.a)(e=>-1!==PA.indexOf(e.status)?Object(Ei.a)({type:"",payload:{}}):Object(Ei.a)(this.overviewActions.loadOverviewInfoRejected(e)))),this.requestSessionChange$=this.update.pipe(Object(y.h)(Ts.e.REQUEST_CHANGE),Object(di.a)(e=>this.overviewActions.changeSession(e))),this.enrollUserToSession$=this.update.pipe(Object(y.h)(Ts.e.ENROLL_USER_TO_SESSION),Object(ki.a)(e=>this.svc.enrollUser(e).pipe(Object(IT.a)(e=>{if(-1!==PA.indexOf(e.status))return Object(Ei.a)({type:"",payload:{}});let t=e.code&&1003===e.code?M.a.t("classroom","Limit of max enrollable users reached"):e.message[0];return this.docLayoutService.toast.showToast({message:t,type:"error"}),yc.a}))),Object(di.a)(e=>this.overviewActions.enrollUserToSessionSuccess(e.payload.courseId,e.payload.sessionId))),this.changeEnrollmentSessionError$=this.update.pipe(Object(y.h)(Ts.e.CHANGE_SESSION_ENROLLMENT_ERROR),Object(di.a)(e=>e.payload),Object(ki.a)(e=>{const t=e,i=t.hasOwnProperty("code")&&2002===t.code?M.a.t("standard","Your are not allowed to change session"):t.message[0];return this.docLayoutService.toast.showToast({message:i,type:"error"}),yc.a})),this.changeEnrollmentSession$=this.update.pipe(Object(y.h)(Ts.e.CHANGE_SESSION_ENROLLMENT),Object(ki.a)(e=>this.svc.changeEnrollmentSession(e.payload).pipe(Object(ki.a)(t=>{const i=D.b.getInstance().getPlatformActualUrl();return window.location.href=`${i}/learn/course/${e.payload.course_id}/session/${e.payload.new_session.id}/redirect`,yc.a}),Object(IT.a)(e=>Object(Ei.a)(this.overviewActions.changeEnrollmentSessionError(e.error?e.error:e)))))),this.startInitialPlaying$=this.update.pipe(Object(y.h)(Ts.b.START_PLAYING),Object(di.a)(e=>e.payload),Object(ki.a)(e=>{const t=e.id,i=e.params,s=e.chapters,n=e.course_id,a=s.filter(e=>e.id===t)[0];let o=!1;return e.hasOwnProperty("preserve_lightbox")&&(o=e.preserve_lightbox),this.svc.getLoInfo(t,i,e=>Object(Ei.a)(e)).pipe(Object(di.a)(e=>{if(e instanceof Cc.d)return 1005===e.error.code?void this.store$.dispatch(Ts.b.startPlayingRejectForMissingUserField(e.error)):"otj"===a.type&&403===e.error.code?void this.store$.dispatch(Ts.b.showOtjErrorState()):void this.store$.dispatch(Ts.b.startPlayingRejected(e.error));const i=e.data.launch_params;if(a.type===Kn.SCORM){const e=D.b.getInstance().getLangByShortCode(D.c.getInstance().language).is_rtl;i.url=`${i.url}&rtl=${e}`}"otj"===a.type&&i&&i.lo_completion_type===xl.UPON_CONCLUSION&&a.status===Ol.NOT_STARTED&&this.store$.dispatch(Ts.b.trackAndReloadCoursePlayer({chapter_id:a.id,course_id:n})),this.store$.dispatch(Ts.b.startPlayingSuccess(t,{id:t,launch_params:i,chapters:s,preserve_lightbox:o}))}))})),this.trackAndReload$=this.update.pipe(Object(y.h)(Ts.b.TRACK_AND_RELOAD),Object(di.a)(e=>e.payload),Object(ki.a)(e=>this.svc.trackLo(e.chapter_id).pipe(Object(di.a)(()=>Ts.a.reloadCoursePlayer(e.course_id,e.chapter_id))))),this.track$=this.update.pipe(Object(y.h)(Ts.g.BEGIN_SURVEY,Ts.g.GOTO_PAGE,Ts.g.SURVEY_SUBMITTED),Object(di.a)(e=>e.payload),Object(ki.a)(e=>this.svc.trackSurveyData(e).pipe(Object(di.a)(e=>this.surveyPlayerActions.trackCompleted(e))))),this.gotoPage$=this.update.pipe(Object(y.h)(Ts.f.START_PLAYING,Ts.f.RETAKE_THE_TEST,Ts.f.CONTINUE_PLAYING,Ts.f.GO_TO_PREV_PAGE,Ts.f.GO_TO_NEXT_PAGE),Object(di.a)(e=>e.payload),Object(ki.a)(e=>this.svc.trackQuizData(e).pipe(Object(di.a)(t=>this.quizPlayerActions.goToPageSuccess(rt.a.assign({},t,e))),Object(IT.a)(e=>Object(Ei.a)(this.quizPlayerActions.quizActionRejected(e)))))),this.submitQuizPartial$=this.update.pipe(Object(y.h)(Ts.f.SUBMIT_QUIZ_PARTIAL),Object(di.a)(e=>e.payload),Object(ki.a)(e=>this.svc.trackQuizData(e).pipe(Object(di.a)(e=>this.quizPlayerActions.submitQuizPartialSuccess(e)),Object(IT.a)(e=>Object(Ei.a)(this.quizPlayerActions.quizActionRejected(e)))))),this.leaveQuiz$=this.update.pipe(Object(y.h)(Ts.f.LEAVE_PLAY_MODE),Object(Ti.a)(e=>{this.svc.getCourseInfo({payload:{id:e.payload.courseId}}).subscribe(t=>{this.store$.dispatch(Ts.b.setCoursePlayerChapterLoading(!1)),this.store$.dispatch(Ts.a.loadCourseInfoSuccess(t,!0,e.payload.source))},e=>{this.store$.dispatch(Ts.b.setCoursePlayerChapterLoading(!1)),this.store$.dispatch(Ts.b.loadCourseInfoRejected(e))})})),this.timeEnabledForceExit$=this.update.pipe(Object(y.h)(Ts.f.TIME_ENABLED_FORCE_EXIT),Object(di.a)(e=>e.payload),Object(ki.a)(e=>this.svc.trackQuizData(e).pipe(Object(di.a)(e=>this.quizPlayerActions.setInitialState()),Object(IT.a)(e=>Object(Ei.a)(this.quizPlayerActions.quizActionRejected(e)))))),this.submitQuiz$=this.update.pipe(Object(y.h)(Ts.f.SUBMIT_QUIZ,Ts.f.TIME_ELAPSED_SUBMIT),Object(di.a)(e=>e.payload),Object(ki.a)(e=>this.svc.trackQuizData(e).pipe(Object(di.a)(e=>this.quizPlayerActions.submitQuizSuccess(e)),Object(IT.a)(e=>Object(Ei.a)(this.quizPlayerActions.quizActionRejected(e)))))),this.quizShowReview$=this.update.pipe(Object(y.h)(Ts.f.SHOW_REVIEW),Object(di.a)(e=>e.payload),Object(ki.a)(e=>this.svc.trackQuizData(e).pipe(Object(di.a)(e=>this.quizPlayerActions.showReviewSuccess(e)),Object(IT.a)(e=>Object(Ei.a)(this.quizPlayerActions.quizActionRejected(e)))))),this.loadLearningPlanInfo$=this.update.pipe(Object(y.h)(Ts.c.LOAD_LEARNING_PLAN_INFO),Object(ki.a)(e=>this.lpService.getLearningPlanInfo(e).pipe(Object(di.a)(e=>this.learningPlanActions.loadLearningPlanInfoSuccess(e)),Object(IT.a)(e=>Object(Ei.a)(this.learningPlanActions.loadLearningPlanInfoRejected(e)))))),this.onLightboxWindowClose=this.update.pipe(Object(y.h)(Ts.b.ON_LIGHTBOX_WINDOW_CLOSE),Object(Ti.a)(()=>this.pageNavigation$.next(!0)),Object(la.a)(()=>this.pageNavigation$.value),Object(Si.a)(this.store$.pipe(Object(w.q)(ae.o))),Object(ki.a)(([e,t])=>{const i=e.payload;return i.executionCount>5?Object(Ei.a)(Ts.b.loadCourseChapters(i.courseId)):this.svc.getLosTree(i.courseId).pipe(Object(Tp.a)(500),Object(la.a)(()=>this.pageNavigation$.value),Object(di.a)(e=>{const s=Object(Ic.c)(e.data);t===s?this.store$.dispatch(Ts.b.onLightboxWindowClose(i.courseId,i.chapterId,i.redirectUrl,i.executionCount+1)):(this.store$.dispatch(Ts.b.setScormChaptersHash(s)),this.store$.dispatch(Ts.b.loadCourseChapters(i.courseId)),this.store$.dispatch(Ts.a.reloadCoursePlayer(i.courseId,i.chapterId)))}),Object(IT.a)(e=>(this.router.navigate(i.redirectUrl).then(),this.docLayoutService.toast.showToast({message:e.message.join(" "),type:"error"}),yc.a)))})),this.router.events.subscribe(e=>{e instanceof s.e&&this.pageNavigation$.next(!1)})}}return e.\u0275fac=function(t){return new(t||e)(c.oc(y.a),c.oc(w.e),c.oc(Ts.e),c.oc(Ts.c),c.oc(Ts.g),c.oc(Ts.f),c.oc(Dc),c.oc(Oc),c.oc(s.h),c.oc(j.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),Object(AA.b)([Object(y.b)()],e.prototype,"loadCourseInfo$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"loadCourseChapters$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"reloadCoursePlayer$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"rateCourse$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"reloadRating$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"loadOverviewInfo$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"requestSessionChange$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"enrollUserToSession$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"changeEnrollmentSessionError$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"changeEnrollmentSession$",void 0),Object(AA.b)([Object(y.b)({dispatch:!1})],e.prototype,"startInitialPlaying$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"trackAndReload$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"track$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"gotoPage$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"submitQuizPartial$",void 0),Object(AA.b)([Object(y.b)({dispatch:!1})],e.prototype,"leaveQuiz$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"timeEnabledForceExit$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"submitQuiz$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"quizShowReview$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"loadLearningPlanInfo$",void 0),Object(AA.b)([Object(y.b)({dispatch:!1})],e.prototype,"onLightboxWindowClose",void 0),e})();var LA=i("z6cu");let jA=(()=>{class e{constructor(e,t,i){this._update$=e,this._myCalendarActions=t,this._myCalendarService=i,this.LoadEvents$=this._update$.pipe(Object(y.h)(Ts.d.INIT,Ts.d.UPDATE),Object(ki.a)(e=>this._myCalendarService.getEventsData(e).pipe(Object(di.a)(t=>{const i=window.location.origin+"/"+t.extra_data.download_url,s=this._myCalendarService.formatEvents(t.data.items),n=this._myCalendarService.filterEvents(s,e.payload.filters),a=this._myCalendarService.getAppliedFilters(e.payload.filters);return this._myCalendarActions.loadEventsSucces(n,e.payload,i,a)}),Object(IT.a)(e=>Object(Ei.a)(this._myCalendarActions.loadEventsReject(e)))))),this.requestMonthHasEvents$=this._update$.pipe(Object(y.h)(Ts.d.LOAD_EVENTS_SUCCESS),Object(di.a)(e=>this._myCalendarActions.initEventsInYear(e.payload))),this.LoadMonthHasEvents$=this._update$.pipe(Object(y.h)(Ts.d.LOAD_EVENTS_IN_YEAR),Object(ki.a)(e=>this._myCalendarService.getMonthHasEventsData(e).pipe(Object(di.a)(t=>{const i=this._myCalendarService.filterMonthHasEvents(t.data.items,e.payload.updateParams.filters);return this._myCalendarActions.loadEventsInYearSucces(i)}),Object(IT.a)(e=>Object(LA.a)(this._myCalendarActions.loadEventsInYearReject(e))))))}}return e.\u0275fac=function(t){return new(t||e)(c.oc(y.a),c.oc(Ts.d),c.oc(Lc))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),Object(AA.b)([Object(y.b)()],e.prototype,"LoadEvents$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"requestMonthHasEvents$",void 0),Object(AA.b)([Object(y.b)()],e.prototype,"LoadMonthHasEvents$",void 0),e})(),RA=(()=>{class e{constructor(e){this.actions=e}}return e.\u0275fac=function(t){return new(t||e)(c.oc(y.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();const FA={accounts:[],lastCreatedAccount:null,lastEditedAccount:null,status:"WebexInitialState",paring:null,lastDeletedAccountPartial:null,windowHasFocus:!1};function NA(e=FA,t){switch(t.type){case gD.AccountSuccessfullyCreated:return Object.assign(Object.assign({},e),{status:"AccountCreated",lastCreatedAccount:t.payload});case gD.AccountSuccessfullyEdited:return Object.assign(Object.assign({},e),{status:"AccountEdited",lastEditedAccount:t.payload});case gD.AccountSuccessfullyDeleted:return Object.assign(Object.assign({},e),{status:"AccountDeleted",lastDeletedAccountPartial:t.payload});case gD.AccountSuccessfullyReset:return Object.assign(Object.assign({},e),{lastCreatedAccount:null,lastEditedAccount:null,lastDeletedAccountPartial:null,paring:null,status:"WebexInitialState"});default:return e}}var UA=i("bUIS"),zA=i("8lF4"),qA=i("g+Nt"),VA=i.t(qA,2);let BA=(()=>{let e=class extends UA.a{};return e.\u0275fac=function(t){return GA(t||e)},e.\u0275cmp=c.Yb({type:e,selectors:[["ng-component"]],features:[c.Jb],decls:3,vars:3,consts:[[1,"widget-sample-color-root"]],template:function(e,t){1&e&&(c.kc(0,"div",0),c.kc(1,"p"),c.gd(2),c.jc(),c.jc()),2&e&&(c.dd("background-color",t.data.settings.color),c.Mb(2),c.id(" ",t.data.settings.color," "))},styles:[".widget-sample-color-root[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:300px;color:#fff}"]}),e=Object(AA.b)([Object(zA.a)({name:"learn-sample-widget",module:"learn",demoData:VA})],e),e})();const GA=c.mc(BA),HA=[BA];let $A=(()=>{class e{constructor(e,t){this.store=e,this.widgetRenderActions=t}init(){return new Promise((e,t)=>{this.store.dispatch(this.widgetRenderActions.registerWidgets(HA,"learn")),e()})}setActiveModuleInCoreStore(){this.store.dispatch(this.widgetRenderActions.setActiveModule("learn"))}}return e.\u0275fac=function(t){return new(t||e)(c.oc(w.e),c.oc(lx.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();const YA=[],WA=[...YA],QA={};let KA=(()=>{class e{constructor(e){this.actions=e}}return e.\u0275fac=function(t){return new(t||e)(c.oc(y.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})();const JA={accounts:[],lastCreatedAccount:null,lastRequestedPairedAccount:null,lastEditedAccount:null,status:"ZoomusInitialState",pairing:null,lastDeletedAccountPartial:null,windowHasFocus:!1};function XA(e=JA,t){switch(t.type){case xx.AccountSuccessfullyCreated:return Object.assign(Object.assign({},e),{status:"AccountCreated",lastCreatedAccount:t.payload,pairing:null});case xx.AccountSuccessfullyPaired:return Object.assign(Object.assign({},e),{status:"AccountSuccessfullyPaired",lastRequestedPairedAccount:t.payload,pairing:null});case xx.AccountSuccessfullyEdited:return Object.assign(Object.assign({},e),{status:"AccountEdited",lastEditedAccount:t.payload,pairing:null});case xx.AccountSuccessfullyDeleted:return Object.assign(Object.assign({},e),{status:"AccountDeleted",lastDeletedAccountPartial:t.payload,pairing:null});case xx.PairingAccountRequested:return Object.assign(Object.assign({},e),{status:"PairingAccountRequested",lastRequestedPairedAccount:t.payload,lastEditedAccount:null,pairing:null});case xx.PairingAccountAcquired:return Object.assign(Object.assign({},e),{status:"PairingAccountAcquired",lastRequestedPairedAccount:null,pairing:Object.assign({},t.payload)});case xx.PairingAccountCompleted:return Object.assign(Object.assign({},JA),{status:"PairingAccountCompleted"});case xx.PairingAccountAborted:return Object.assign(Object.assign({},JA),{status:"PairingAccountAborted"});default:return e}}i("0vgW"),i("+s/G"),i("jx+i");var ZA=i("mJ9n"),eP=i("IfWP");let tP=(()=>{class e{constructor(t){this.initLearnWidgetsService=t,e.widgetsRegistered||(this.initLearnWidgetsService.init(),e.widgetsRegistered=!0),this.initLearnWidgetsService.setActiveModuleInCoreStore()}}return e.storeInitialized=!1,e.widgetsRegistered=!1,e.\u0275fac=function(t){return new(t||e)(c.oc($A))},e.\u0275mod=c.cc({type:e}),e.\u0275inj=c.bc({providers:[ie,re,de,n.a,Dc,Oc,u.a,Ts.b,Ts.g,Ts.f,Ts.a,Ts.e,Ts.c,MA,jA,Ts.d,Lc,$A,gx,jx,Ix,vD,pD,x,A,O,R,l,B,G,EE,gE,aA,...WA,xT,h.a],imports:[[d.a,b.Cd,b.Ld,EA.CourseModule,T,p.a.forChildren(),s.l.forChild(IA),w.g.forFeature("learn",ae.j),w.g.forFeature("learn-widgets",QA),w.g.forFeature("learn-zoomus",XA),w.g.forFeature("learn-webex",NA),w.g.forFeature("learn-adobeconnect",V),w.g.forFeature("learn-gotomeeting",te),w.g.forFeature("learn-msteams",OA),y.e.forFeature([MA,jA,...YA,KA,RA,F,xA]),v.a,g.a,_]]}),e})();c.Zc(Te.a,[dv.a],[M.b]),c.Zc(Gt,[m.p,ZA.a,eP.a,jt,Xe],[M.b])},aZ40:function(e,t,i){var s,n,a=i("Wogr");a.alloc?(s=a.alloc(512),n=a.alloc(256)):(s=new a(512),n=new a(256)),function(){for(var e=1,t=0;t<255;t++)s[t]=e,n[e]=t,256&(e<<=1)&&(e^=285);for(t=255;t<512;t++)s[t]=s[t-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return n[e]},t.exp=function(e){return s[e]},t.mul=function(e,t){return 0===e||0===t?0:s[n[e]+n[t]]}},bDTG:function(e,t,i){"use strict";i.d(t,"c",function(){return o}),i.d(t,"b",function(){return r}),i.d(t,"d",function(){return c}),i.d(t,"e",function(){return l}),i.d(t,"a",function(){return d});var s=i("LvDl"),n=i.n(s),a=i("galx");function o(e){const t=e?Math.floor(e/60):0,i=e?e%60:0;return{hh:t,mm:i,label:t+"h "+i+"m"}}function r(e,t){return Math.floor(60*e+Number(t))}function c(e){n.a.delay(()=>{e.actions.forEach(e=>{e.disabled=!1,e.loading=!1})},250)}function l(e){return e.status&&e.status===a.b.QUEUED?{success:!0,backgroundJob:!0}:e.status&&e.status===a.b.COMPLETED?{success:!0}:{success:!1}}const d="lt_evaluation"},"e/Dd":function(e,t){var i,s=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return s[e]},t.getBCHDigit=function(e){for(var t=0;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');i=e},t.isKanjiModeEnabled=function(){return void 0!==i},t.toSJIS=function(e){return i(e)}},e6BP:function(e,t){function i(){this.buffer=[],this.length=0}i.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var i=0;i<t;i++)this.putBit(1==(e>>>t-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=i},eQOe:function(e,t){function i(e,i,s){switch(e){case t.Patterns.PATTERN000:return(i+s)%2==0;case t.Patterns.PATTERN001:return i%2==0;case t.Patterns.PATTERN010:return s%3==0;case t.Patterns.PATTERN011:return(i+s)%3==0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2==0;case t.Patterns.PATTERN101:return i*s%2+i*s%3==0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2==0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){for(var t=e.size,i=0,s=0,n=0,a=null,o=null,r=0;r<t;r++){s=n=0,a=o=null;for(var c=0;c<t;c++){var l=e.get(r,c);l===a?s++:(s>=5&&(i+=s-5+3),a=l,s=1),(l=e.get(c,r))===o?n++:(n>=5&&(i+=n-5+3),o=l,n=1)}s>=5&&(i+=s-5+3),n>=5&&(i+=n-5+3)}return i},t.getPenaltyN2=function(e){for(var t=e.size,i=0,s=0;s<t-1;s++)for(var n=0;n<t-1;n++){var a=e.get(s,n)+e.get(s,n+1)+e.get(s+1,n)+e.get(s+1,n+1);4!==a&&0!==a||i++}return 3*i},t.getPenaltyN3=function(e){for(var t=e.size,i=0,s=0,n=0,a=0;a<t;a++){s=n=0;for(var o=0;o<t;o++)s=s<<1&2047|e.get(a,o),o>=10&&(1488===s||93===s)&&i++,n=n<<1&2047|e.get(o,a),o>=10&&(1488===n||93===n)&&i++}return 40*i},t.getPenaltyN4=function(e){for(var t=0,i=e.data.length,s=0;s<i;s++)t+=e.data[s];return 10*Math.abs(Math.ceil(100*t/i/5)-10)},t.applyMask=function(e,t){for(var s=t.size,n=0;n<s;n++)for(var a=0;a<s;a++)t.isReserved(a,n)||t.xor(a,n,i(e,a,n))},t.getBestMask=function(e,i){for(var s=Object.keys(t.Patterns).length,n=0,a=1/0,o=0;o<s;o++){i(o),t.applyMask(o,e);var r=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(o,e),r<a&&(a=r,n=o)}return n}},ekOh:function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,i){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(s){return i}}},"g+Nt":function(e){e.exports=JSON.parse('{"data":{"icon":null,"code":"AAAA","names":{"en":"Widget","fa":"Widget","fi":"Widget","it":"Widget"},"published":1,"descriptions":{"en":"A sample page with widgets","fa":"A sample page with widgets","fi":"A sample page with widgets","it":"A sample page with widgets"},"widgets":[{"id":"1111","widget":"row","type":"parent","name":{"en":"Row","fa":"Row","fi":"Row","it":"Row"},"settings":{"mode":"boxed"},"contains":[{"id":"2222","widget":"column","type":"parent","name":{"en":"Column","fa":"Column","fi":"Column","it":"Column"},"settings":{"size":12},"contains":[{"id":"0","type":"child","widget":"learn-sample-widget","settings":{"color":"red"}}]}]}]}}')},hQwR:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var s=function(e){return e[e.DELETE="delete"]="DELETE",e[e.CONFIRM="confirm"]="CONFIRM",e}({})},hkxS:function(e,t,i){"use strict";i.d(t,"a",function(){return g});var s=i("gvJE"),n=i("fXoL"),a=i("Y9qQ"),o=i("tyNb"),r=i("jhN1"),c=i("ofXK");function l(e,t){if(1&e&&(n.kc(0,"div",5),n.gd(1),n.xc(2,"t"),n.jc()),2&e){const e=n.wc();n.Mb(1),n.hd(n.yc(2,1,e.title))}}function d(e,t){if(1&e&&(n.kc(0,"div",6),n.kc(1,"div",7),n.gd(2),n.xc(3,"t"),n.jc(),n.kc(4,"div",8),n.gd(5),n.xc(6,"t"),n.jc(),n.kc(7,"div",8),n.gd(8),n.xc(9,"t"),n.jc(),n.jc()),2&e){const e=n.wc();n.Mb(2),n.hd(n.yc(3,3,e.forum_header)),n.Mb(3),n.hd(n.yc(6,5,e.discussions_header)),n.Mb(3),n.hd(n.yc(9,7,e.posts_header))}}const u=function(e){return[e]};function h(e,t){if(1&e&&(n.kc(0,"div",9),n.kc(1,"div",10),n.kc(2,"a",11),n.gd(3),n.jc(),n.jc(),n.kc(4,"div",12),n.gd(5),n.jc(),n.kc(6,"div",12),n.gd(7),n.jc(),n.jc()),2&e){const e=t.$implicit,i=n.wc();n.Mb(2),n.Dc("routerLink",n.Ic(4,u,"/legacy/lms/index.php?r=forum/thread&forum_id="+e.ID+"&course_id="+i.course_id)),n.Mb(1),n.hd(e.FORUM),n.Mb(2),n.hd(e.DISCUSSIONS),n.Mb(2),n.hd(e.POSTS)}}function p(e,t){1&e&&(n.kc(0,"div",13),n.kc(1,"div",14),n.kc(2,"p",15),n.gd(3),n.xc(4,"t"),n.jc(),n.jc(),n.jc()),2&e&&(n.Mb(3),n.id(" ",n.yc(4,1,"No forums")," "))}let g=(()=>{class e{constructor(e,t,i){this._backendService=e,this.router=t,this.sanitizer=i,this.newCourseExperience=!1}ngOnInit(){this.title=s.a.t("course","Forums"),this.forum_header=s.a.t("standard","FORUM"),this.discussions_header=s.a.t("standard","DISCUSSIONS"),this.posts_header=s.a.t("standard","POSTS"),this._backendService.request("/learn/v1/forum/getForumData?course_id="+this.course_id+"&current_session_id="+this.current_session_id,"GET").subscribe(e=>{try{this.forums=e.data.forums,this.forums_count=this.forums.length}catch(t){console.log("FORUMS invalid app/version combination OR the returned JSON is invalid",t)}})}}return e.\u0275fac=function(t){return new(t||e)(n.ec(a.a),n.ec(o.h),n.ec(r.b))},e.\u0275cmp=n.Yb({type:e,selectors:[["forum"]],inputs:{course_id:"course_id",current_session_id:"current_session_id",widget:"widget",newCourseExperience:"newCourseExperience"},decls:5,vars:6,consts:[[1,"course-widget","forum-description"],["class","course-widget-title",4,"ngIf"],["class","mdl-grid bg-grey-light forum-description-header text-main",4,"ngIf"],["class","mdl-grid forum-description-row",4,"ngFor","ngForOf"],["class","mdl-grid forum-description-row no-border",4,"ngIf"],[1,"course-widget-title"],[1,"mdl-grid","bg-grey-light","forum-description-header","text-main"],[1,"mdl-cell","mdl-cell--6-col","bolded"],[1,"mdl-cell","mdl-cell--3-col","middle-cell-forum","bolded"],[1,"mdl-grid","forum-description-row"],[1,"mdl-cell","mdl-cell--6-col"],[1,"anchor-black",3,"routerLink"],[1,"mdl-cell","mdl-cell--3-col","middle-cell-forum"],[1,"mdl-grid","forum-description-row","no-border"],[1,"mdl-cell","mdl-cell--12-col"],[1,"empty-forum"]],template:function(e,t){1&e&&(n.kc(0,"div",0),n.ed(1,l,3,3,"div",1),n.ed(2,d,10,9,"div",2),n.ed(3,h,8,6,"div",3),n.ed(4,p,5,3,"div",4),n.jc()),2&e&&(n.Wb("widget-new-course-experience",t.newCourseExperience),n.Mb(1),n.Dc("ngIf",!t.newCourseExperience),n.Mb(1),n.Dc("ngIf",t.forums_count>0),n.Mb(1),n.Dc("ngForOf",t.forums),n.Mb(1),n.Dc("ngIf",t.forums_count<=0))},directives:[c.p,c.o,o.k],pipes:[s.b],encapsulation:2}),e})()},jSPq:function(e,t,i){var s=i("Wogr"),n=i("JzKC");function a(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}a.prototype.initialize=function(e){this.degree=e,this.genPoly=n.generateECPolynomial(this.degree)},a.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var t=new s(this.degree);t.fill(0);var i=s.concat([e,t],e.length+this.degree),a=n.mod(i,this.genPoly),o=this.degree-a.length;if(o>0){var r=new s(this.degree);return r.fill(0),a.copy(r,o),r}return a},e.exports=a},kG7x:function(e,t,i){"use strict";i.d(t,"a",function(){return A});var s=i("3Pt+"),n=i("lfsz"),a=i("/76g"),o=i("BPI6"),r=i("a4yA"),c=i("Xt1e"),l=i("yfT8"),d=i("rLbr"),u=i("LRne"),h=i("vkgz"),p=i("JIr8"),g=i("fXoL"),m=i("+sIT"),b=i("Y9qQ"),f=i("l7P3");let _=(()=>{class e{constructor(e,t,i){this._docLayoutService=e,this._backend=t,this._store=i,this._questionPostEndpoint=new l.a("/share/v1/questions",d.a.POST)}postNewQuestion(e){return this._backend.request(this._questionPostEndpoint.url,this._questionPostEndpoint.verb,{title:e,id_course:this.idCourse,id_lo:this.idLearningObject}).pipe(Object(h.a)(e=>{this._store.dispatch(Object(c.b)(e.data))}),Object(p.a)(e=>(this.errorSnackbar(e.message[0]),Object(u.a)(e))))}errorSnackbar(e){this._docLayoutService.toast.showToast({message:e,type:"error"})}}return e.\u0275fac=function(t){return new(t||e)(g.oc(m.a),g.oc(b.a),g.oc(f.e))},e.\u0275prov=g.ac({token:e,factory:e.\u0275fac}),e})();var v=i("tyNb"),y=i("ofXK"),w=i("R9jb"),C=i("nUpK"),S=i("rnoZ"),k=i("y0sE"),T=i("gvJE");function I(e,t){1&e&&g.gc(0)}function x(e,t){if(1&e&&(g.ic(0),g.kc(1,"div",2),g.kc(2,"div",3),g.ed(3,I,1,0,"ng-container",4),g.jc(),g.jc(),g.hc()),2&e){g.wc();const e=g.Sc(2);g.Mb(3),g.Dc("ngTemplateOutlet",e)}}function D(e,t){if(1&e&&g.fc(0,"doc-questions-and-answers-widget",18),2&e){const e=g.wc(2);g.Dc("data",e.qnaWidgetConfig)("size",e.widgetSize)("enableDropdownAutoPositioning",!0)}}function O(e,t){1&e&&g.fc(0,"ui-spinner",19),2&e&&g.Dc("color","neutral")("size","md")}function E(e,t){if(1&e){const e=g.lc();g.kc(0,"div",5),g.kc(1,"div",6),g.kc(2,"h3",7),g.gd(3),g.xc(4,"t"),g.jc(),g.kc(5,"div",8),g.gd(6),g.xc(7,"t"),g.jc(),g.jc(),g.kc(8,"lrn-course-question-widget-lo-picker",9),g.sc("linkToLO",function(t){return g.Vc(e),g.wc().linkLearningObjectToQuestion(t)}),g.jc(),g.kc(9,"div",10),g.fc(10,"ui-avatar",11),g.fc(11,"rich-textarea",12),g.jc(),g.kc(12,"div",13),g.kc(13,"ui-button-text",14),g.sc("trigger",function(){return g.Vc(e),g.wc().postNewQuestion()}),g.xc(14,"t"),g.jc(),g.jc(),g.jc(),g.kc(15,"div",15),g.ed(16,D,1,3,"doc-questions-and-answers-widget",16),g.ed(17,O,1,2,"ng-template",null,17,g.fd),g.jc()}if(2&e){const e=g.Sc(18),t=g.wc();g.Mb(3),g.id(" ",g.yc(4,10,t.dictionary.title)," "),g.Mb(3),g.id(" ",g.yc(7,12,t.dictionary.description)," "),g.Mb(4),g.Dc("imageUrl",t.loggedUser.avatar)("text",t.loggedUser.initials)("iconName",t.loggedUser.initials?"":"user"),g.Mb(1),g.Dc("preset",t.basePreset)("inputFormControl",t.textareaControl),g.Mb(2),g.Dc("label",g.yc(14,14,t.dictionary.cta)),g.Mb(3),g.Dc("ngIf",t.showWidget)("ngIfElse",e)}}let A=(()=>{class e{constructor(e,t,i){this._store=e,this._route=t,this._service=i,this.overview=!1,this.basePreset=r.c.BASE,this.dictionary={title:a.a.t("standard","Question & Answer"),description:a.a.t("standard","Link your question to course content"),cta:a.a.t("test","New question"),noRelation:a.a.t("app7020","Select content before submitting a question")},this.qnaWidgetConfig={id:"course-question-widget",type:"questionsandanswers",settings:{showFiltersSelector:!1,isLazyLoading:!0,defaultSortBy:o.a.DESC,showQuestionTypeFilter:!0,showLoadMoreLink:!1,showSearchBar:!1,showSortBy:!0,showViewAllLink:!1,maxDisplayable:"10",isInlineView:!1}},this.showWidget=!1,this.widgetSize=12,this.textareaControl=new s.e(""),this.loggedUser={avatar:"",initials:""}}ngOnInit(){this.loggedUser={avatar:n.c.getInstance().avatar_url,initials:n.c.getInstance().user_initials},this.widgetSize=this.widget.columns_span,this._route.params.forEach(e=>{this.qnaWidgetConfig.settings.courseId=+(e.id||e.course_id),this._service.idCourse=e.id,this.showWidget=!0})}linkLearningObjectToQuestion(e){this._service.idLearningObject=e.id}postNewQuestion(){this.textareaControl.value&&(this._service.idLearningObject?this._service.postNewQuestion(this.textareaControl.value).subscribe(()=>{this.textareaControl.reset(""),this.textareaControl.updateValueAndValidity()}):this._service.errorSnackbar(this.dictionary.noRelation))}}return e.\u0275fac=function(t){return new(t||e)(g.ec(f.e),g.ec(v.a),g.ec(_))},e.\u0275cmp=g.Yb({type:e,selectors:[["lrn-course-question-widget"]],hostVars:2,hostBindings:function(e,t){2&e&&g.Wb("overview",t.overview)},inputs:{widget:"widget",overview:"overview"},features:[g.Lb([_])],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["courseQuestionWidget",""],[1,"ui-row"],[1,"ui-col-24","course-question-widget__wrap"],[4,"ngTemplateOutlet"],[1,"ask-question-content","bg-white","ui-shadow-md"],[1,"ask-question-title"],[1,"ui-typography-heading-3"],[1,"ui-typography-body"],[3,"linkToLO"],[1,"ask-question-text-area"],["size","md",3,"imageUrl","text","iconName"],[3,"preset","inputFormControl"],[1,"ask-question-cta"],["color","accent",3,"label","trigger"],[1,"course-question-widget"],[3,"data","size","enableDropdownAutoPositioning",4,"ngIf","ngIfElse"],["showLoadingSpinner",""],[3,"data","size","enableDropdownAutoPositioning"],[3,"color","size"]],template:function(e,t){if(1&e&&(g.ed(0,x,4,1,"ng-container",0),g.ed(1,E,19,16,"ng-template",null,1,g.fd)),2&e){const e=g.Sc(2);g.Dc("ngIf",t.overview)("ngIfElse",e)}},directives:[y.p,y.u,w.a,C.o,S.a,C.U,k.a,C.Be],pipes:[T.b],styles:[".overview[_nghost-%COMP%]{display:block;padding:var(--ui-spacing-lg) 0}[_nghost-%COMP%]:not(.overview){display:grid;grid-template-columns:1fr;grid-template-rows:auto;grid-row-gap:var(--ui-spacing-lg)}[_nghost-%COMP%]   .ask-question-content[_ngcontent-%COMP%]{position:relative;z-index:1}[_nghost-%COMP%]   .course-question-widget[_ngcontent-%COMP%]{position:relative;z-index:0}[_nghost-%COMP%]   .course-question-widget__wrap[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr;grid-template-rows:auto;grid-row-gap:var(--ui-spacing-lg)}[_nghost-%COMP%]   .ask-question-title[_ngcontent-%COMP%]{padding:var(--ui-spacing-lg) var(--ui-spacing-lg) var(--ui-spacing-xxs)}[_nghost-%COMP%]   .ask-question-text-area[_ngcontent-%COMP%]{display:grid;grid-template-columns:var(--ui-size-avatar-md) 1fr;grid-column-gap:var(--ui-spacing-xs);padding:var(--ui-spacing-lg) var(--ui-spacing-lg) 0}[_nghost-%COMP%]   .ask-question-cta[_ngcontent-%COMP%]{text-align:right;padding:var(--ui-spacing-xxs) var(--ui-spacing-lg) var(--ui-spacing-lg)}[dir=rtl]   [_nghost-%COMP%]   .ask-question-cta[_ngcontent-%COMP%]{text-align:left}"]}),e})()},"kk9/":function(e,t,i){var s=i("e/Dd").getSymbolSize;t.getPositions=function(e){var t=s(e);return[[0,0],[t-7,0],[0,t-7]]}},kyyD:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("fXoL");let n=(()=>{class e{static loadCourseInfo(t){return{type:e.LOAD_COURSE_INFO,payload:t}}static reloadCoursePlayer(t,i){return{type:e.RELOAD_COURSE_PLAYER,payload:{id:t,source:i}}}static reloadRating(t){return{type:e.RELOAD_RATING,payload:t}}static updateCourseRating(t){return{type:e.UPDATE_COURSE_RATING,payload:t}}static loadCourseInfoSuccess(t,i=!1,s=!1){return{type:e.LOAD_COURSE_INFO_SUCCESS,payload:{courseData:t,inReloading:i,source:s}}}static loadCourseInfoRejected(t){return{type:e.LOAD_COURSE_INFO_REJECTED,payload:t}}static switchMode(t,i){const s={state:t};return void 0!==i&&(s.has_overview=i),{type:e.SWITCH_MODE,payload:s}}static reloadChapters(t){return{type:e.RELOAD_CHAPTERS,payload:{chapters:t}}}static rateCourse(t,i){return{type:e.RATE_COURSE,payload:{id_course:t,rating:i}}}static destroy(){return{type:e.DESTROY,payload:{}}}}return e.LOAD_COURSE_INFO="[Course] Load Course Info",e.RELOAD_COURSE_PLAYER="[Course] Reload Course Player",e.RELOAD_RATING="[Course] Reload Rating",e.RELOAD_CHAPTERS="[Course] Reload Chapters",e.RELOAD_CHAPTERS_COMPLETE="[Course] Reload Chapters Complete",e.UPDATE_COURSE_RATING="[Course] Reload Course Rating",e.LOAD_COURSE_INFO_SUCCESS="[Course] Load Course Info Success",e.LOAD_COURSE_INFO_REJECTED="[Course] Load Course Info Rejected",e.SWITCH_MODE="[Course] Switch mode",e.RATE_COURSE="[Course] Rate Course",e.DESTROY="[Course] Destroy",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.ac({token:e,factory:e.\u0275fac}),e})()},"l/Ve":function(e,t,i){"use strict";i.d(t,"a",function(){return p});var s=i("lJxs"),n=i("j5TW"),a=i("fXoL"),o=i("Y9qQ"),r=i("ofXK"),c=i("/hE/"),l=i("nhDY");const d=["table"];function u(e,t){if(1&e){const e=a.lc();a.kc(0,"radio",6),a.sc("OnChange",function(t){return a.Vc(e),a.wc().selectionChange(t)}),a.jc()}if(2&e){const e=t.$implicit;a.Dc("name","selection_type")("value",e.value)("label",e.label)("checked",e.checked)}}function h(e,t){if(1&e&&(a.kc(0,"div",7),a.fc(1,"core-table",8,9),a.jc()),2&e){const e=a.wc();a.Mb(1),a.Dc("columns",e.tableParams.columns)("row_actions",e.tableParams.row_actions)("massive_actions",e.tableParams.massive_actions)("source",e.tableParams.source)("enable_massive_actions",e.tableParams.enable_massive_actions)}}let p=(()=>{class e{constructor(e,t){this.service=e,this.changeDetector=t,this.showTable=!1,this.selectionOptions=[{id:0,value:0,label:"All sessions",checked:"checked"},{id:1,value:1,label:"Select sessions",checked:""}]}getColumns(){return[{id:"name",name:"name",is_sortable:!1,renderer:n.b.PlainText},{id:"date_begin",name:"date",is_sortable:!1,renderer:n.b.PlainText}]}getRowActions(){return[]}getMassiveActions(){return[]}ngOnInit(){this.tableParams={columns:this.getColumns(),source:new g(this.course_id,1,[{column_id:"name",order:"asc"}],3,this.service),row_actions:this.getRowActions(),enable_massive_actions:!0,massive_actions:this.getMassiveActions()}}ngAfterViewInit(){}getSelectedSessions(){if(this.showTable){let e=this.table.getSelectedItems(),t=[];for(let i=0;i<e.length;i++)t.push(e[i].id_session);return t}return[]}selectionChange(e){0==e?(this.showTable=!1,this.changeDetector.detectChanges()):(this.showTable=!0,this.changeDetector.detectChanges())}}return e.\u0275fac=function(t){return new(t||e)(a.ec(o.a),a.ec(a.i))},e.\u0275cmp=a.Yb({type:e,selectors:[["session-selection"]],viewQuery:function(e,t){if(1&e&&a.nd(d,1),2&e){let e;a.Rc(e=a.tc())&&(t.table=e.first)}},inputs:{course_id:"course_id"},decls:6,vars:2,consts:[[1,"component-content","session-selection__wrapper"],[1,"examples-reference"],[1,"elems-row"],["class","session-selection","id","selection_ + selection.id",3,"name","value","label","checked","OnChange",4,"ngFor","ngForOf"],[1,"sesion-table"],["class","wrap-table",4,"ngIf"],["id","selection_ + selection.id",1,"session-selection",3,"name","value","label","checked","OnChange"],[1,"wrap-table"],[3,"columns","row_actions","massive_actions","source","enable_massive_actions"],["table",""]],template:function(e,t){1&e&&(a.kc(0,"div",0),a.kc(1,"div",1),a.kc(2,"div",2),a.ed(3,u,1,4,"radio",3),a.kc(4,"div",4),a.ed(5,h,3,5,"div",5),a.jc(),a.jc(),a.jc(),a.jc()),2&e&&(a.Mb(3),a.Dc("ngForOf",t.selectionOptions),a.Mb(2),a.Dc("ngIf",t.showTable))},directives:[r.o,r.p,c.a,l.a],encapsulation:2}),e})();class g extends n.b{constructor(e,t=0,i,s,n,a){super(t,i,s,n,a),this.current_page=t,this.sort_by=i,this.page_size=s,this.serviceProvider=n,this.columns=a,this.course_id=e}fetchData(e){return this.serviceProvider.request("/learn/v1/filerepo/getSessions?course_id="+this.course_id,"GET").pipe(Object(s.a)(e=>e.data))}}},lWmL:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var s=i("mrSG"),n=i("yfT8"),a=i("rLbr"),o=i("lJxs"),r=i("wO+i"),c=i("fXoL"),l=i("Y9qQ");let d=(()=>{class e{constructor(e){this._backend=e,this.questionsEndpoint=new n.a("/share/v1/questions/list",a.a.GET),this.questionEndpoint=new n.a("/share/v1/questions/:id",a.a.GET),this.repliesEndpoint=new n.a("/share/v1/comments/:id",a.a.GET),this.answersEndpoint=new n.a("/share/v1/questions/:id/answers",a.a.GET),this.channelsListEndpoint=new n.a("/manage/v1/channels",a.a.GET),this.cohortGroupsEndpoint=new n.a("/share/v1/cohort/groups",a.a.GET),this.answersLikeEndpoint=new n.a("/share/v1/answers/:id/evaluate",a.a.PUT),this.answersDislikeEndpoint=new n.a("/share/v1/answers/:id/evaluate",a.a.DELETE),this.commentLikeEndpoint=new n.a("/share/v1/comments/:id/evaluate",a.a.PUT),this.commentDislikeEndpoint=new n.a("/share/v1/comments/:id/evaluate",a.a.DELETE),this.commentReplyEndpoint=new n.a("/share/v1/comments/:id/reply",a.a.POST),this.questionAnswerEndpoint=new n.a("/share/v1/questions/:id/answer",a.a.POST),this.questionFollowEndpoint=new n.a("/share/v1/questions/:id/follow",a.a.POST),this.questionUnFollowEndpoint=new n.a("/share/v1/questions/:id/follow",a.a.DELETE),this.editCommentEndpoint=new n.a("/share/v1/comments/:id",a.a.PUT),this.deleteCommentEndpoint=new n.a("/share/v1/comments/:id",a.a.DELETE),this.editQuestionEndpoint=new n.a("/share/v1/questions/:id",a.a.PUT),this.deleteQuestionEndpoint=new n.a("/share/v1/questions/:id",a.a.DELETE),this.editAnswerEndpoint=new n.a("/share/v1/answers/:id",a.a.PUT),this.deleteAnswerEndpoint=new n.a("/share/v1/answers/:id",a.a.DELETE)}questionsList(e,t){return t?this._backend.request(this.questionEndpoint.setPlaceholdersValue({id:t}),this.questionEndpoint.verb,e).pipe(Object(o.a)(e=>{const t=e.data,i=Object(s.e)(t,["sub_items"]);return{data:{items:[Object.assign(Object.assign({},i),{showGoToSingePageOption:!1})],current_page:1,total_count:1,current_page_size:1}}})):this._backend.request(this.questionsEndpoint.url,this.questionsEndpoint.verb,e)}getReplies(e){return this._backend.request(this.repliesEndpoint.setPlaceholdersValue({id:e}),this.repliesEndpoint.verb).pipe(Object(o.a)(e=>({data:{items:e.data.sub_items,count:e.data.sub_items.length,current_page:1,current_page_size:e.data.sub_items.length,has_more_data:!1,total_count:e.data.sub_items.length,total_page_count:1,cursor:""}})))}getAnswers(e,t,i=15){const s={page_size:i,page_number:t};return this._backend.request(this.answersEndpoint.setPlaceholdersValue({id:e}),this.answersEndpoint.verb,s)}getChannelsList(e){return this._backend.request(this.channelsListEndpoint.url,this.channelsListEndpoint.verb,e).pipe(Object(r.a)("data","items"))}getCohortList(e){return this._backend.request(this.cohortGroupsEndpoint.url,this.cohortGroupsEndpoint.verb,e).pipe(Object(r.a)("data","items"))}answerLike(e){return this._backend.request(this.answersLikeEndpoint.setPlaceholdersValue({id:e}),this.answersLikeEndpoint.verb).pipe(Object(r.a)("data"))}answerDislike(e){return this._backend.request(this.answersDislikeEndpoint.setPlaceholdersValue({id:e}),this.answersDislikeEndpoint.verb).pipe(Object(r.a)("data"))}commentLike(e){return this._backend.request(this.commentLikeEndpoint.setPlaceholdersValue({id:e}),this.commentLikeEndpoint.verb).pipe(Object(r.a)("data"))}commentDislike(e){return this._backend.request(this.commentDislikeEndpoint.setPlaceholdersValue({id:e}),this.commentDislikeEndpoint.verb).pipe(Object(r.a)("data"))}commentReply(e,t,i){const s=Object.assign(Object.assign({content:t.message},t.payload.length&&{mentions:t.payload}),i&&{idAnswerParent:i});return this._backend.request(this.commentReplyEndpoint.setPlaceholdersValue({id:e}),this.commentReplyEndpoint.verb,s).pipe(Object(r.a)("data"))}questionAnswer(e,t,i){const s=Object.assign(Object.assign({content:t.message},t.payload.length&&{mentions:t.payload}),i&&{idAnswerParent:i});return this._backend.request(this.questionAnswerEndpoint.setPlaceholdersValue({id:e}),this.questionAnswerEndpoint.verb,s).pipe(Object(r.a)("data"))}questionFollow(e){return this._backend.request(this.questionFollowEndpoint.setPlaceholdersValue({id:e}),this.questionFollowEndpoint.verb).pipe(Object(r.a)("data"))}questionUnfollow(e){return this._backend.request(this.questionUnFollowEndpoint.setPlaceholdersValue({id:e}),this.questionUnFollowEndpoint.verb).pipe(Object(r.a)("data"))}editComment(e,t){return this._backend.request(this.editCommentEndpoint.setPlaceholdersValue({id:e}),this.editCommentEndpoint.verb,Object.assign({title:t.message},t.payload.length&&{mentions:t.payload})).pipe(Object(r.a)("data"))}deleteComment(e){return this._backend.request(this.deleteCommentEndpoint.setPlaceholdersValue({id:e}),this.deleteCommentEndpoint.verb).pipe(Object(r.a)("data"))}editQuestion(e,t){return this._backend.request(this.editQuestionEndpoint.setPlaceholdersValue({id:e}),this.editQuestionEndpoint.verb,Object.assign({title:t.message},t.payload.length&&{mentions:t.payload})).pipe(Object(r.a)("data"))}deleteQuestion(e){return this._backend.request(this.deleteQuestionEndpoint.setPlaceholdersValue({id:e}),this.deleteQuestionEndpoint.verb).pipe(Object(r.a)("data"))}editAnswer(e,t){return this._backend.request(this.editAnswerEndpoint.setPlaceholdersValue({id:e}),this.editAnswerEndpoint.verb,Object.assign({content:t.message},t.payload.length&&{mentions:t.payload})).pipe(Object(r.a)("data"),Object(o.a)(e=>({id:e.updated_id})))}deleteAnswer(e){return this._backend.request(this.deleteAnswerEndpoint.setPlaceholdersValue({id:e}),this.deleteAnswerEndpoint.verb).pipe(Object(r.a)("data"))}answerMarkAsBest(e){return this._backend.request(`/share/v1/answers/${e}/mark`,"PUT").pipe(Object(r.a)("data"))}answerUnmarkAsBest(e){return this._backend.request(`/share/v1/answers/${e}/mark`,"DELETE").pipe(Object(r.a)("data"))}}return e.\u0275fac=function(t){return new(t||e)(c.oc(l.a))},e.\u0275prov=c.ac({token:e,factory:e.\u0275fac}),e})()},lYJp:function(e,t,i){var s=i("e/Dd"),n=s.getBCHDigit(1335);t.getEncodedBits=function(e,t){for(var i=e.bit<<3|t,a=i<<10;s.getBCHDigit(a)-n>=0;)a^=1335<<s.getBCHDigit(a)-n;return 21522^(i<<10|a)}},m06o:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var s=i("LRne"),n=i("rLbr"),a=i("wO+i"),o=i("lJxs"),r=i("JIr8"),c=i("S2Qf"),l=i("fXoL"),d=i("Y9qQ");let u=(()=>{class e{constructor(e,t){this._backendService=e,this._toggleService=t}getSkillById(e){return this._backendService.request(`/skill/v1/skills/${e}`,n.a.GET).pipe(Object(a.a)("data"),Object(o.a)(e=>({id:e.id,code:e.predefined_UID,name:e.title,active:"1"===e.active})))}deleteSkills(e){return this._backendService.request("/skill/v1/skills",n.a.DELETE,{items:e.map(e=>({id:e.id}))}).pipe(Object(r.a)(()=>Object(s.a)({data:void 0})),Object(o.a)(e=>{var t;return Boolean(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.length)&&e.data.every(e=>e.success)}))}isCustomSkillOn(){return this._toggleService.isOn(c.f.TOGGLE_SKILLS_PHASE_1_1)&&this._toggleService.isOn(c.f.TOGGLE_CUSTOM_SKILLS)}}return e.\u0275fac=function(t){return new(t||e)(l.oc(d.a),l.oc(c.g))},e.\u0275prov=l.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},mEp4:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("fXoL");let n=(()=>{class e{loadLearningPlanInfo(t){return{type:e.LOAD_LEARNING_PLAN_INFO,payload:t}}loadLearningPlanInfoSuccess(t){return{type:e.LOAD_LEARNING_PLAN_INFO_SUCCESS,payload:t}}loadLearningPlanInfoRejected(t){return{type:e.LOAD_LEARNING_PLAN_INFO_REJECTED,payload:t}}cleanLearningPlanStoreData(){return{type:e.CLEAN_STORE_DATA_LEARNING_PLAN,payload:{}}}}return e.LOAD_LEARNING_PLAN_INFO="[Learning Plan] Load Learning Plan Info",e.LOAD_LEARNING_PLAN_INFO_SUCCESS="[Learning Plan] Load Learning Plan Info Success",e.LOAD_LEARNING_PLAN_INFO_REJECTED="[Learning Plan] Load Learning Plan Info Rejected",e.CLEAN_STORE_DATA_LEARNING_PLAN="[Learning Plan] Clean Store Data Learning Plan",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.ac({token:e,factory:e.\u0275fac}),e})()},miDY:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var s=i("rLbr"),n=i("wO+i"),a=i("fXoL"),o=i("Y9qQ");let r=(()=>{class e{constructor(e){this._backendService=e}getUserCoursesTime(e,t=[],i,a){const o=Object.assign(Object.assign(Object.assign({},t.length&&{skill_codes:t}),(null==i?void 0:i.length)&&{date_begin:i}),(null==a?void 0:a.length)&&{date_end:a});return this._backendService.request(`/learn/v1/channels/users/${e}/content/courses/time`,s.a.GET,o).pipe(Object(n.a)("data","items"))}}return e.\u0275fac=function(t){return new(t||e)(a.oc(o.a))},e.\u0275prov=a.ac({token:e,factory:e.\u0275fac}),e})()},nZSm:function(e,t,i){var s=i("u/Db"),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(e){this.mode=s.ALPHANUMERIC,this.data=e}a.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){var t;for(t=0;t+2<=this.data.length;t+=2){var i=45*n.indexOf(this.data[t]);i+=n.indexOf(this.data[t+1]),e.put(i,11)}this.data.length%2&&e.put(n.indexOf(this.data[t]),6)},e.exports=a},pMVF:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("fXoL");let n=(()=>{class e{loadLaunchParams(t){return{type:e.LOAD_LAUNCH_PARAMS,payload:t}}beginSurvey(t){return{type:e.BEGIN_SURVEY,payload:t}}leaveSurvey(){return{type:e.LEAVE_SURVEY}}goToPage(t){return{type:e.GOTO_PAGE,payload:t}}trackCompleted(t){return{type:e.SURVEY_TRACK_COMPLETED,payload:t}}surveyCompleted(t){return{type:e.SURVEY_SUBMITTED,payload:t}}}return e.LOAD_LAUNCH_PARAMS="[SurveyPlayer] Load Launch params",e.BEGIN_SURVEY="[SurveyPlayer] Begin Survey",e.LEAVE_SURVEY="[SurveyPlayer] Leave survey",e.GOTO_PAGE="[SurveyPlayer] Go to page",e.SURVEY_TRACK_COMPLETED="[SurveyPlayer] Survey track completed",e.SURVEY_SUBMITTED="[SurveyPlayer] Survey completed",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.ac({token:e,factory:e.\u0275fac}),e})()},pnJL:function(e,t,i){"use strict";i.d(t,"a",function(){return H});var s=i("3Pt+"),n=i("ahFQ"),a=i("dRcD"),o=i("gvJE"),r=i("S2Qf"),c=i("Y9qQ"),l=i("L+gB"),d=i("8h18"),u=i("a4yA"),h=i("fXoL"),p=i("JA8w"),g=i("tyNb"),m=i("jhN1"),b=i("+sIT"),f=i("ofXK"),_=i("kG7x"),v=i("vEO/"),y=i("3zhW"),w=i("rnoZ"),C=i("PEGs"),S=i("GPJC");const k=["dropdown"],T=["dropdown2"];function I(e,t){if(1&e&&h.fc(0,"lrn-course-question-widget",2),2&e){const e=h.wc();h.Dc("widget",e.widget)("overview",e.overview)}}const x=function(e){return{"is-selected bg-main text-hover-white text-white":e}};function D(e,t){if(1&e){const e=h.lc();h.kc(0,"li",34),h.sc("click",function(){h.Vc(e);const i=t.$implicit;return h.wc(3).setFilter(i.value)}),h.jc()}if(2&e){const e=t.$implicit,i=h.wc(3);h.Dc("ngClass",h.Ic(2,x,e.value==i.filter_navigator_state))("innerHTML",e.label,h.Wc)}}function O(e,t){if(1&e&&(h.kc(0,"h4",10),h.gd(1),h.xc(2,"t"),h.jc()),2&e){const e=h.wc(3);h.Mb(1),h.hd(h.yc(2,1,e.title))}}function E(e,t){if(1&e){const e=h.lc();h.kc(0,"div",35),h.kc(1,"question",36),h.sc("changeInfoQuestion",function(t){return h.Vc(e),h.wc(3).onChangeInfoQuestion(t)}),h.jc(),h.jc()}if(2&e){const e=t.$implicit,i=h.wc(3);h.Mb(1),h.Dc("data",e)("openMode",i.questionOptions.openMode)("viewSize",i.questionOptions.viewSize)("initialView",i.questionOptions.initialView)("isForCourseView",!0)}}function A(e,t){if(1&e){const e=h.lc();h.kc(0,"span",37),h.sc("click",function(){return h.Vc(e),h.wc(3).loadMore()}),h.gd(1),h.xc(2,"t"),h.jc()}2&e&&(h.Mb(1),h.hd(h.yc(2,1,"show more Questions & Answers")))}const P=function(e){return{"mdl-cell mdl-cell--3-col":e}},M=function(e){return{"overview mdl-cell mdl-cell--9-col":e}},L=function(e){return{"loading-process":e}},j=function(){return{category:"app7020"}},R=function(){return{category:"social"}},F=function(e){return{"coach-overview":e}};function N(e,t){if(1&e){const e=h.lc();h.kc(0,"div",6),h.kc(1,"div",7),h.kc(2,"div",8),h.kc(3,"div",9),h.kc(4,"h4",10),h.gd(5),h.xc(6,"t"),h.jc(),h.kc(7,"ul"),h.ed(8,D,1,4,"li",11),h.jc(),h.jc(),h.jc(),h.kc(9,"div",12),h.kc(10,"div",13),h.ed(11,O,3,3,"h4",14),h.kc(12,"div",15),h.kc(13,"p"),h.gd(14),h.xc(15,"t"),h.jc(),h.kc(16,"dropdown",16,17),h.sc("onChange",function(t){return h.Vc(e),h.wc(2).chaptersChange(t)}),h.jc(),h.jc(),h.kc(18,"div",18),h.kc(19,"div",19),h.kc(20,"div",20),h.fc(21,"avatar",21),h.jc(),h.kc(22,"div",22),h.fc(23,"rich-textarea",23),h.kc(24,"div",24),h.fc(25,"basic-button",25),h.jc(),h.jc(),h.jc(),h.jc(),h.jc(),h.kc(26,"div",26),h.kc(27,"div",27),h.kc(28,"div",28),h.gd(29),h.xc(30,"t"),h.jc(),h.kc(31,"div",29),h.kc(32,"span"),h.gd(33),h.xc(34,"t"),h.jc(),h.kc(35,"dropdown",30),h.sc("onChange",function(t){return h.Vc(e),h.wc(2).sortChange(t)}),h.jc(),h.jc(),h.jc(),h.jc(),h.kc(36,"div",31),h.ed(37,E,2,5,"div",32),h.ed(38,A,3,3,"span",33),h.jc(),h.jc(),h.jc(),h.jc()}if(2&e){const e=h.Sc(17),t=h.wc(2);h.Mb(2),h.Dc("ngClass",h.Ic(48,P,t.overview)),h.Mb(3),h.id("",h.yc(6,38,"Show questions & answers for"),":"),h.Mb(3),h.Dc("ngForOf",t._navigator.options),h.Mb(1),h.Dc("ngClass",h.Ic(50,M,t.overview)),h.Mb(1),h.Dc("ngClass",h.Ic(52,L,t._loading)),h.Mb(1),h.Dc("ngIf",!t.overview&&!t.newCourseExperience),h.Mb(3),h.id("",h.yc(15,40,"Link your question to course content"),":"),h.Mb(2),h.Dc("display_search",!1)("grouped",!1)("options",t._chapters.options)("name",t.chapters-e)("enabled",!0)("required",!0)("customMaxHeight",!0)("value",t._chapters.options[0].value),h.Mb(5),h.Dc("initials",t.getSessionUser().user_initials)("image_url",t.getSessionUser().avatar_url)("size",t._avatarOptions.size)("properties",t._avatarOptions.properties),h.Mb(2),h.Dc("preset",t.richTextareaPreset.BASE)("inputFormControl",t._textareaControl),h.Mb(2),h.Dc("type",t._textareaAction.type)("text",t._textareaAction.text)("state",t._textareaAction.state)("click",t._textareaAction.onClick),h.Mb(4),h.jd("",t.totalQuestionCount," ",h.zc(30,42,"questions",h.Hc(54,j))," "),h.Mb(4),h.id("",h.zc(34,45,"Sort by",h.Hc(55,R)),":"),h.Mb(2),h.Dc("display_search",!1)("grouped",!1)("options",t._sort.options)("name","sort-dropdown")("enabled",!0)("required",!1)("value",t._sort.options[0].value),h.Mb(1),h.Dc("ngClass",h.Ic(56,F,t.overview)),h.Mb(1),h.Dc("ngForOf",t._items),h.Mb(1),h.Dc("ngIf",t._load_more)}}function U(e,t){if(1&e&&(h.kc(0,"h4",10),h.gd(1),h.xc(2,"t"),h.jc()),2&e){const e=h.wc(3);h.Mb(1),h.hd(h.yc(2,1,e.title))}}function z(e,t){if(1&e){const e=h.lc();h.kc(0,"div",35),h.kc(1,"question",36),h.sc("changeInfoQuestion",function(t){return h.Vc(e),h.wc(3).onChangeInfoQuestion(t)}),h.jc(),h.jc()}if(2&e){const e=t.$implicit,i=h.wc(3);h.Mb(1),h.Dc("data",e)("openMode",i.questionOptions.openMode)("viewSize",i.questionOptions.viewSize)("initialView",i.questionOptions.initialView)("isForCourseView",!0)}}function q(e,t){if(1&e){const e=h.lc();h.kc(0,"span",47),h.sc("click",function(){return h.Vc(e),h.wc(3).loadMore()}),h.gd(1),h.xc(2,"t"),h.jc()}2&e&&(h.Mb(1),h.hd(h.yc(2,1,"show more Questions & Answers")))}function V(e,t){if(1&e){const e=h.lc();h.kc(0,"div",38),h.kc(1,"div",39),h.ed(2,U,3,3,"h4",14),h.kc(3,"div",15),h.kc(4,"p"),h.gd(5),h.xc(6,"t"),h.jc(),h.kc(7,"dropdown",16,40),h.sc("onChange",function(t){return h.Vc(e),h.wc(2).chaptersChange(t)}),h.jc(),h.jc(),h.kc(9,"div",18),h.kc(10,"div",19),h.kc(11,"div",20),h.fc(12,"avatar",21),h.jc(),h.kc(13,"div",22),h.fc(14,"rich-textarea",23),h.kc(15,"div",24),h.fc(16,"basic-button",25),h.jc(),h.jc(),h.jc(),h.jc(),h.jc(),h.kc(17,"div",41),h.kc(18,"div",27),h.kc(19,"div",42),h.kc(20,"span"),h.gd(21),h.xc(22,"t"),h.jc(),h.kc(23,"dropdown",30),h.sc("onChange",function(t){return h.Vc(e),h.wc(2).filterChange(t)}),h.jc(),h.jc(),h.kc(24,"div",29),h.kc(25,"span"),h.gd(26),h.xc(27,"t"),h.jc(),h.kc(28,"dropdown",30),h.sc("onChange",function(t){return h.Vc(e),h.wc(2).sortChange(t)}),h.jc(),h.jc(),h.jc(),h.kc(29,"div",43),h.kc(30,"div",28),h.gd(31),h.xc(32,"t"),h.jc(),h.fc(33,"div",44),h.jc(),h.jc(),h.kc(34,"div",45),h.ed(35,z,2,5,"div",32),h.ed(36,q,3,3,"span",46),h.jc(),h.jc()}if(2&e){const e=h.wc(2);h.Mb(1),h.Dc("ngClass",h.Ic(50,L,e._loading)),h.Mb(1),h.Dc("ngIf",!e.newCourseExperience),h.Mb(3),h.id("",h.yc(6,41,"Link your question to course content"),":"),h.Mb(2),h.Dc("display_search",!1)("grouped",!1)("options",e._chapters.options)("name",e.chapters-e.dropdown)("enabled",!0)("required",!0)("customMaxHeight",!0)("value",e._chapters.options[0].value),h.Mb(5),h.Dc("initials",e.getSessionUser().user_initials)("image_url",e.getSessionUser().avatar_url)("size",e._avatarOptions.size)("properties",e._avatarOptions.properties),h.Mb(2),h.Dc("preset",e.richTextareaPreset.BASE)("inputFormControl",e._textareaControl),h.Mb(2),h.Dc("type",e._textareaAction.type)("text",e._textareaAction.text)("state",e._textareaAction.state)("click",e._textareaAction.onClick),h.Mb(5),h.id("",h.yc(22,43,"SHOW Q&A FOR"),":"),h.Mb(2),h.Dc("display_search",!1)("grouped",!1)("options",e._filter.options)("name",e.filter-e.dropdown)("enabled",!0)("required",!1)("value",e._filter.options[0].value),h.Mb(3),h.id("",h.zc(27,45,"Sort by",h.Hc(52,R)),":"),h.Mb(2),h.Dc("display_search",!1)("grouped",!1)("options",e._sort.options)("name",e.sort-e.dropdown)("enabled",!0)("required",!1)("value",e._sort.options[0].value),h.Mb(3),h.jd("",e.totalQuestionCount," ",h.yc(32,48,"Questions"),""),h.Mb(4),h.Dc("ngForOf",e._items),h.Mb(1),h.Dc("ngIf",e._load_more)}}function B(e,t){if(1&e&&(h.kc(0,"div",3),h.ed(1,N,39,58,"div",4),h.ed(2,V,37,53,"div",5),h.jc()),2&e){const e=h.wc();h.Wb("widget-new-course-experience",e.newCourseExperience),h.Mb(1),h.Dc("ngIf",e.overview),h.Mb(1),h.Dc("ngIf",!e.overview)}}const G=["/share/v1/questions","/share/v1/comments"];let H=(()=>{class e{constructor(e,t,i,a,c,d,h,p,g){this.backend=e,this.translate=t,this._route=i,this.router=a,this.sanitizer=c,this._ref=d,this.translationPipe=h,this.docLayoutService=p,this.toggle=g,this.overview=!1,this.newCourseExperience=!1,this.totalQuestionCount=0,this._page=1,this.filter_navigator_state=-1,this._page_size=3,this._requestParams={},this._loading=!1,this._load_more=!0,this.loTypes=n.d,this._items=[],this._textareaControl=new s.e("",s.x.minLength(3)),this._avatarOptions={size:40,properties:{bg_color_class:"bg-main",text_color_class:"text-white",icon_class:"zmdi zmdi-account"}},this.richTextareaPreset=u.c,this._textareaAction={type:"normal",text:o.a.t("test","New question"),state:"",onClick:()=>{this._textareaControl.value.length&&(null!=this._id_lo?(this._textareaAction.state="disabled",this._loading=!0,this.backend.request("/share/v1/questions","POST",{title:this._textareaControl.value,id_course:this._currentAsset,id_lo:this._id_lo}).subscribe(e=>{this._items.unshift(e.data),this._textareaAction.state="enabled",this._loading=!1,this._textareaControl.reset(""),this.totalQuestionCount+=1,this.resetDropdown()},null,()=>{this._textareaControl.reset(""),this._loading=!1,this._textareaAction.state="enabled"})):this.docLayoutService.toast.showToast({message:o.a.t("app7020","Select content before submitting a question"),type:"error"}))}},this._filter={options:[{label:o.a.t("standard","All course contents"),value:-1}]},this._sort={options:[{label:o.a.t("standard","Newest To Oldest"),value:"desc"},{label:o.a.t("standard","Oldest To Newest"),value:"asc"}]},this.isNewCoachPhaseToggleOn=!1,this.isNewCoachPhaseToggleOn=this.toggle.isOn(r.f.TOGGLE_COACH_PHASE_1),this._chapters={options:[{label:`\n                       <div class="question-wrapper">\n                            <div class="question-icon-wrapper">\n                                <i class='file-type text-grey-mid zmdi zmdi-link'></i>\n                            </div>\n                            <div class="question-content information">\n                                <div class='title bolded text-main'>${new o.b(this.translate,this._ref).transform(o.a.t("standard","Link your question to course content"))}</div>\n                                <div class='info text-grey-mid'></div>\n                            </div>\n                       </div>\n                `,value:-1}]},this._navigator={options:[{label:`\n                    <div class='item mdl-grid chapter'>\n                                <div class='mdl-cell mdl-cell--2-col icon-wrap' >\n                                    <div class='icon'>\n                                        <i class='file-type text-grey-mid zmdi zmdi-collection-item'></i>\n                                    </div>\n                                </div>\n                                <div class='information mdl-cell mdl-cell--10-col'>\n                                    <div class='title text-main text-hover-white'>${new o.b(this.translate,this._ref).transform(o.a.t("standard","All course contents"))}</div>\n                                    <div class='info text-grey-mid'></div>\n                                </div>\n                            </div>\n                `,value:-1}]},this._route.params.forEach(e=>{this._currentAsset=e.id||e.course_id,this._requestParams={id_course:this._currentAsset,type_question:1,page:this._page,page_size:this._page_size},this.fetchData()}),this._formControlSubscribtion=this._textareaControl.valueChanges.subscribe(e=>{setTimeout(()=>{this._textareaAction.state=e.trim().length<=3?"disabled":""},50)}),this._deteleDataSubscribtion=l.a.singleton.subscribe("coachTileDelete",e=>{this.backend.request(`${G[e.data.type-1]}/${e.data.id}`,"DELETE").subscribe(e=>{this._items.forEach((t,i)=>{t.id===e.data.id&&this._items.splice(i,1)})})},"coach-tile")}ngOnInit(){this.isNewCoachPhaseToggleOn||(this.questionOptions={viewSize:6===this.widget.columns_span?d.d.MEDIUM:d.d.LARGE,openMode:d.c.INLINE,initialView:d.b.SHOW_BEST_FIRST},this.title=o.a.t("standard","Question & Answer"),this.backend.request("/learn/v1/courses/"+this._currentAsset,"GET",{},{},c.b,null,e=>this.backend.redirectWhenCode9000(e)).subscribe(e=>{e.data.tree.forEach(e=>this.renderLOTree(e))}))}getSessionUser(){return a.a.getInstance()}filterChange(e){this._requestParams.id_lo=-1===e.selectedOption.value?null:e.selectedOption.value,this._requestParams.page=this._page,this._requestParams.page_size=this._page_size,this._load_more=!0,this.fetchData()}sortChange(e){this._requestParams.sort_attr="id",this._requestParams.sort_dir=e.selectedOption.value,this._requestParams.page=this._page,this._requestParams.page_size=this._page_size,this._load_more=!0,this.fetchData()}chaptersChange(e){this._id_lo=-1===e.selectedOption.value?null:e.selectedOption.value}setFilter(e){this.dropdown2?this.dropdown2.selectOptionByValue(e):this.dropdown&&this.dropdown.selectOptionByValue(e),this._requestParams.id_lo=-1===e?null:e,this.filter_navigator_state=e,this._requestParams.page=this._page,this._requestParams.page_size=this._page_size,this._load_more=!0,this.fetchData()}resetDropdown(){this.dropdown2?this.dropdown2.selectOptionByValue(-1):this.dropdown&&this.dropdown.selectOptionByValue(-1)}fetchData(){this.isNewCoachPhaseToggleOn||(this._fetchDataSubscribtion=this.backend.request("/share/v1/questions","GET",this._requestParams).subscribe(e=>{1===e.data.total_page_count&&(this._load_more=!1),this._items=e.data.items,this.totalQuestionCount=e.data.total_count}))}loadMore(){var e;const t=null===(e=this._items[this._items.length-1])||void 0===e?void 0:e.metadata.created_at;let i={};t?(i=Object.assign(Object.assign({},this._requestParams),{page_size:this._page_size+1,interval:{date_from:t},show:"new"}),"asc"===this._requestParams.sort_dir?i.interval.from=1:i.interval.to=1):(this._requestParams.page=1,i=this._requestParams),this._fetchDataSubscribtion=this.backend.request("/share/v1/questions","GET",i).subscribe(e=>{this._requestParams.page===e.data.total_page_count&&(this._load_more=!1),e.data.items.forEach(e=>{this._items.some(t=>t.id===e.id)||this._items.push(e)})})}getLOTitle(e){return this.loTypes[e]?this.loTypes[e].title:this.loTypes[void 0].title}getStatusIcon(e){return"in_progress"===e||"completed"===e||"incomplete"===e?"zmdi-check-circle":"locked"===e?"zmdi-lock":"failed"===e?"zmdi-close-circle":void 0}getLOIcon(e){return this.loTypes[e]?this.loTypes[e].icon:this.loTypes[void 0].icon}ngOnDestroy(){this._formControlSubscribtion&&this._formControlSubscribtion.unsubscribe(),this._fetchDataSubscribtion&&this._fetchDataSubscribtion.unsubscribe(),this._deteleDataSubscribtion&&this._deteleDataSubscribtion.unsubscribe()}onChangeInfoQuestion(e){switch(e.typeEvent){case d.a.DELETE_QUESTION:const t=this._items.filter(t=>t.id!==e.question.id);this._items=t,this.totalQuestionCount>0&&(this.totalQuestionCount-=1)}}renderLOTree(e){if(e.is_folder&&e.children)e.children.forEach(e=>this.renderLOTree(e));else{const t=this.getLOIcon(e.type),i=e.status,s=this.getStatusIcon(e.status),n=this.translationPipe.transform(this.getLOTitle(e.type));this._filter.options.push({label:e.name,value:e.id}),this._chapters.options.push({label:`\n                            <div class='question-wrapper'>\n                                <div class='question-icon-wrapper'>\n                                    <i class='file-type text-grey-mid ${t}'></i>\n                                    <div class='chapter-status ${i}'>\n                                        <i class='zmdi ${s}'></i>\n                                    </div>\n                                </div>\n                                <div class='question-content information'>\n                                    <div class='title bolded text-main'>${e.name}</div>\n                                    <div class='info text-grey-mid'>${n}\n                                    <span class="${e.duration?"":"hidden"}">| ${e.duration}</span>\n                                    </div>\n                                </div>\n                           </div>\n                        `,value:e.id}),this._navigator.options.push({label:`\n                            <div class='item mdl-grid chapter'>\n                                <div class='mdl-cell mdl-cell--2-col icon-wrap' >\n                                    <div class='icon'>\n                                        <i class='file-type text-grey-mid ${t}'></i>\n                                        \x3c!-- status icons --\x3e\n                                        <div class='chapter-status ${i}'>\n                                            <i class='zmdi ${s}'></i>\n                                        </div>\n                                        \x3c!-- status icons --\x3e\n                                    </div>\n                                </div>\n                                <div class='information mdl-cell mdl-cell--10-col'>\n                                    <div class='title text-main text-hover-white'>${e.name}</div>\n                                    <div class='info text-grey-mid'>${n} <span>${e.duration?` | ${e.duration}`:""}</span></div>\n                                </div>\n                            </div>\n                        `,value:e.id})}}}return e.\u0275fac=function(t){return new(t||e)(h.ec(c.a),h.ec(p.a),h.ec(g.a),h.ec(g.h),h.ec(m.b),h.ec(h.i),h.ec(o.b),h.ec(b.a),h.ec(r.g))},e.\u0275cmp=h.Yb({type:e,selectors:[["questions-widget"]],viewQuery:function(e,t){if(1&e&&(h.nd(k,1),h.nd(T,1)),2&e){let e;h.Rc(e=h.tc())&&(t.dropdown=e.first),h.Rc(e=h.tc())&&(t.dropdown2=e.first)}},inputs:{widget:"widget",overview:"overview",newCourseExperience:"newCourseExperience"},features:[h.Lb([o.b])],decls:2,vars:2,consts:[[3,"widget","overview",4,"ngIf"],["class","questions-widget-wrapper",3,"widget-new-course-experience",4,"ngIf"],[3,"widget","overview"],[1,"questions-widget-wrapper"],["class","mdl-wrapper overview-mode-asset-coach-widget",4,"ngIf"],["class","asset-coach-wrapper",4,"ngIf"],[1,"mdl-wrapper","overview-mode-asset-coach-widget"],[1,"mdl-grid"],[1,"filter-navigator",3,"ngClass"],[1,"navigator-wrapper","bg-white","mdl-shadow--2dp"],[1,"headline"],["class","bg-hover-main text-hover-white",3,"ngClass","innerHTML","click",4,"ngFor","ngForOf"],[1,"asset-coach-wrapper",3,"ngClass"],[1,"form-wrapper","bg-white","mdl-shadow--2dp",3,"ngClass"],["class","headline",4,"ngIf"],[1,"related-dropdown"],[1,"link_questions_dropdown",3,"display_search","grouped","options","name","enabled","required","customMaxHeight","value","onChange"],["dropdown",""],[1,"container","clearfix"],[1,"form-section","clearfix"],[1,"avatar-wrapper"],[3,"initials","image_url","size","properties"],[1,"content-wrapper"],[3,"preset","inputFormControl"],[1,"submit-wrapper"],[3,"type","text","state","click"],[1,"filter-wrapper","bg-white","mdl-shadow--2dp","clearfix"],[1,"filters-wrapper","clearfix"],[1,"counter-wrapper"],[1,"sort"],[3,"display_search","grouped","options","name","enabled","required","value","onChange"],[1,"items-wrapper",3,"ngClass"],["class","item",4,"ngFor","ngForOf"],["class","load-more text-main bg-white mdl-shadow--2dp",3,"click",4,"ngIf"],[1,"bg-hover-main","text-hover-white",3,"ngClass","innerHTML","click"],[1,"item"],[3,"data","openMode","viewSize","initialView","isForCourseView","changeInfoQuestion"],[1,"load-more","text-main","bg-white","mdl-shadow--2dp",3,"click"],[1,"asset-coach-wrapper"],[1,"form-wrapper","bg-white",3,"ngClass"],["dropdown2",""],[1,"filter-wrapper","bg-white","clearfix"],[1,"filter"],[1,"search-wrapper","clearfix"],[1,"search"],[1,"items-wrapper"],["class","load-more text-main",3,"click",4,"ngIf"],[1,"load-more","text-main",3,"click"]],template:function(e,t){1&e&&(h.ed(0,I,1,2,"lrn-course-question-widget",0),h.ed(1,B,3,4,"div",1)),2&e&&(h.Dc("ngIf",t.isNewCoachPhaseToggleOn),h.Mb(1),h.Dc("ngIf",!t.isNewCoachPhaseToggleOn))},directives:[f.p,_.a,f.n,f.o,v.a,y.a,w.a,C.a,S.a],pipes:[o.b],encapsulation:2}),e})()},"q6/4":function(e,t,i){"use strict";i.d(t,"a",function(){return u});var s=i("LRne"),n=i("5+tZ"),a=i("JIr8"),o=i("vkgz"),r=i("lfsz"),c=i("/76g"),l=i("fXoL"),d=i("+sIT");let u=(()=>{class e{constructor(e){this.docService=e}canDeactivate(e,t,i){return!e||!e.hasChanges()||!r.c.getInstance().isValid()||this.docService.dialog.showCommonDialog({title:c.a.t("standard","You're leaving without saving changes"),content:c.a.t("standard","Do you want to save changes before leaving the page? Otherwise, all unsaved changes will be lost."),closable:!0,actions:[{id:"cancel",type:"neutral",label:c.a.t("standard","Cancel"),slot:"start"},{id:"discard",type:"neutral",label:c.a.t("standard","Discard changes"),slot:"end"},{id:"save",type:"positive",label:c.a.t("standard","Save Changes"),slot:"end"}]}).pipe(Object(n.a)(t=>{switch(t.actionID){default:case"cancel":return t.actionSuccess.next(!0),Object(s.a)(!1);case"discard":return t.actionSuccess.next(!0),Object(s.a)(!0);case"save":return e.save().pipe(Object(a.a)(()=>(this.docService.toast.showToast({type:"error",message:c.a.t("standard","Error while saving your changes")}),Object(s.a)(!0))),Object(o.a)(()=>t.actionSuccess.next(!0)))}}))}}return e.\u0275fac=function(t){return new(t||e)(l.oc(d.a))},e.\u0275prov=l.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},qmMu:function(e,t,i){var s=i("Wogr"),n=i("e/Dd"),a=i("ekOh"),o=i("e6BP"),r=i("V35J"),c=i("1sBl"),l=i("kk9/"),d=i("eQOe"),u=i("NPxG"),h=i("jSPq"),p=i("yKow"),g=i("lYJp"),m=i("u/Db"),b=i("vvrf"),f=i("49sm");function _(e,t,i){var s,n,a=e.size,o=g.getEncodedBits(t,i);for(s=0;s<15;s++)e.set(s<6?s:s<8?s+1:a-15+s,8,n=1==(o>>s&1),!0),e.set(8,s<8?a-s-1:s<9?15-s-1+1:15-s-1,n,!0);e.set(a-8,8,1,!0)}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");var i,g,v=a.M;return void 0!==t&&(v=a.from(t.errorCorrectionLevel,a.M),i=p.from(t.version),g=d.from(t.maskPattern),t.toSJISFunc&&n.setToSJISFunction(t.toSJISFunc)),function(e,t,i,a){var g;if(f(e))g=b.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");var v=t;if(!v){var y=b.rawSplit(e);v=p.getBestVersionForData(y,i)}g=b.fromString(e,v||40)}var w=p.getBestVersionForData(g,i);if(!w)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<w)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+w+".\n")}else t=w;var C=function(e,t,i){var a=new o;i.forEach(function(t){a.put(t.mode.bit,4),a.put(t.getLength(),m.getCharCountIndicator(t.mode,e)),t.write(a)});var r=8*(n.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t));for(a.getLengthInBits()+4<=r&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(0);for(var c=(r-a.getLengthInBits())/8,l=0;l<c;l++)a.put(l%2?17:236,8);return function(e,t,i){for(var a=n.getSymbolTotalCodewords(t),o=a-u.getTotalCodewordsCount(t,i),r=u.getBlocksCount(t,i),c=r-a%r,l=Math.floor(a/r),d=Math.floor(o/r),p=d+1,g=l-d,m=new h(g),b=0,f=new Array(r),_=new Array(r),v=0,y=new s(e.buffer),w=0;w<r;w++){var C=w<c?d:p;f[w]=y.slice(b,b+C),_[w]=m.encode(f[w]),b+=C,v=Math.max(v,C)}var S,k,T=new s(a),I=0;for(S=0;S<v;S++)for(k=0;k<r;k++)S<f[k].length&&(T[I++]=f[k][S]);for(S=0;S<g;S++)for(k=0;k<r;k++)T[I++]=_[k][S];return T}(a,e,t)}(t,i,g),S=n.getSymbolSize(t),k=new r(S);return function(e,t){for(var i=e.size,s=l.getPositions(t),n=0;n<s.length;n++)for(var a=s[n][0],o=s[n][1],r=-1;r<=7;r++)if(!(a+r<=-1||i<=a+r))for(var c=-1;c<=7;c++)o+c<=-1||i<=o+c||e.set(a+r,o+c,r>=0&&r<=6&&(0===c||6===c)||c>=0&&c<=6&&(0===r||6===r)||r>=2&&r<=4&&c>=2&&c<=4,!0)}(k,t),function(e){for(var t=e.size,i=8;i<t-8;i++){var s=i%2==0;e.set(i,6,s,!0),e.set(6,i,s,!0)}}(k),function(e,t){for(var i=c.getPositions(t),s=0;s<i.length;s++)for(var n=i[s][0],a=i[s][1],o=-2;o<=2;o++)for(var r=-2;r<=2;r++)e.set(n+o,a+r,-2===o||2===o||-2===r||2===r||0===o&&0===r,!0)}(k,t),_(k,i,0),t>=7&&function(e,t){for(var i,s,n,a=e.size,o=p.getEncodedBits(t),r=0;r<18;r++)i=Math.floor(r/3),e.set(i,s=r%3+a-8-3,n=1==(o>>r&1),!0),e.set(s,i,n,!0)}(k,t),function(e,t){for(var i=e.size,s=-1,n=i-1,a=7,o=0,r=i-1;r>0;r-=2)for(6===r&&r--;;){for(var c=0;c<2;c++)if(!e.isReserved(n,r-c)){var l=!1;o<t.length&&(l=1==(t[o]>>>a&1)),e.set(n,r-c,l),-1==--a&&(o++,a=7)}if((n+=s)<0||i<=n){n-=s,s=-s;break}}}(k,C),isNaN(a)&&(a=d.getBestMask(k,_.bind(null,k,i))),d.applyMask(a,k),_(k,i,a),{modules:k,version:t,errorCorrectionLevel:i,maskPattern:a,segments:g}}(e,i,v,g)}},qqVP:function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i.d(t,"b",function(){return n}),i.d(t,"c",function(){return a});var s=function(e){return e.ASSET="coach_share",e.COURSE="learning_object",e.CHANNEL="channel",e}({}),n=function(e){return e[e.QUESTION=1]="QUESTION",e[e.COMMENT=2]="COMMENT",e}({}),a=function(e){return e[e.LIKE=1]="LIKE",e[e.DISLIKE=2]="DISLIKE",e}({})},r4LH:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var s=i("ofXK"),n=i("tfGn"),a=i("fXoL");let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.cc({type:e}),e.\u0275inj=a.bc({imports:[[s.c,n.a]]}),e})()},rL2y:function(e,t,i){"use strict";i.d(t,"a",function(){return p});var s=i("ofXK"),n=i("9j9i"),a=i("nUpK"),o=i("tfGn"),r=i("6fYS"),c=i("miDY"),l=i("m06o"),d=i("r4LH"),u=i("Znps"),h=i("fXoL");let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.cc({type:e}),e.\u0275inj=h.bc({providers:[n.a,c.a,l.a],imports:[[s.c,o.a,a.mc,a.Ld,r.o,a.Ce,a.Ge,a.r,a.V,a.nd,a.L,d.a,u.a]]}),e})()},sVTu:function(e,t,i){"use strict";i.d(t,"b",function(){return s}),i.d(t,"a",function(){return n});var s=function(e){return e[e.CHOICE="choice"]="CHOICE",e[e.CHOICE_MULTIPLE="choice_multiple"]="CHOICE_MULTIPLE",e[e.EXTENDED_TEXT="extended_text"]="EXTENDED_TEXT",e[e.LIKERT_SCALE="likert_scale"]="LIKERT_SCALE",e[e.TITLE="title"]="TITLE",e[e.EVALUATION="evaluation"]="EVALUATION",e[e.INLINE_CHOICE="inline_choice"]="INLINE_CHOICE",e[e.FITB="fill_in_the_blank"]="FITB",e[e.ASSOCIATE="associate"]="ASSOCIATE",e[e.TEXT_ENTRY="text_entry"]="TEXT_ENTRY",e[e.UPLOAD="upload"]="UPLOAD",e}({}),n=function(e){return e[e.ANSWER="answer"]="ANSWER",e[e.REVIEW="review"]="REVIEW",e[e.READONLY="readonly"]="READONLY",e}({})},sknK:function(e,t,i){"use strict";i.d(t,"a",function(){return m});var s=i("XNiG"),n=i("LRne"),a=i("Kj3r"),o=i("eIep"),r=i("lJxs"),c=i("vkgz"),l=i("5wvl"),d=i("lfsz"),u=i("fXoL"),h=i("Y9qQ"),p=i("EdLK"),g=i("m06o");let m=(()=>{class e{constructor(e,t,i){this.backendService=e,this._platformCatalogService=t,this._skillsService=i,this.searchSources$=new s.a,this.isCustomSkillsOn=this._skillsService.isCustomSkillOn(),this.searchSuggestions$=this.searchSources$.pipe(Object(a.a)(500),Object(o.a)(e=>this.search(e)))}init(){return this._setPlatformCatalogSearchMode()}search(e){return this.backendService.request(this.isCustomSkillsOn?"/skill/v1/workforce/skills":"/manage/v1/workforce/skills","GET",Object.assign(Object.assign(Object.assign({},this.isCustomSkillsOn?{search_text:e.query}:{search:e.query}),{size:10,skip_skillgroup:!0}),Boolean(this.platformCatalogSearchMode)&&{catalog_visibility:this.platformCatalogSearchMode})).pipe(Object(r.a)(t=>(t.data.items=t.data.items.map(t=>({name:t.name,id:e.mappedToId?t.code:t.name})),t.data.items)))}_setPlatformCatalogSearchMode(){return d.c.getInstance().isCurrentUserA(d.c.LEVEL_SUPERADMIN)?this._platformCatalogService.hasSkills().pipe(Object(c.a)(e=>this.platformCatalogSearchMode=e?l.a.PLATFORM:l.a.ALL),Object(r.a)(e=>{})):(this.platformCatalogSearchMode=l.a.PLATFORM,Object(n.a)(void 0))}}return e.\u0275fac=function(t){return new(t||e)(u.oc(h.a),u.oc(p.a),u.oc(g.a))},e.\u0275prov=u.ac({token:e,factory:e.\u0275fac}),e})()},"u/Db":function(e,t,i){var s=i("J6Nv"),n=i("BCVQ");t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!s.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return n.testNumeric(e)?t.NUMERIC:n.testAlphanumeric(e)?t.ALPHANUMERIC:n.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,i){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(s){return i}}},uNvY:function(e,t,i){"use strict";i.d(t,"a",function(){return v});var s=i("3Pt+"),n=i("gvJE"),a=i("fXoL"),o=i("Y9qQ"),r=i("ofXK"),c=i("fnIB"),l=i("Jc1x"),d=i("+H5O"),u=i("/hE/"),h=i("ySfU");const p=["folderList"],g=["titleField"];function m(e,t){if(1&e&&(a.kc(0,"span",13),a.gd(1),a.xc(2,"t"),a.jc()),2&e){const e=a.wc();a.Mb(1),a.hd(a.yc(2,1,e.errorFileSelected))}}function b(e,t){if(1&e&&(a.kc(0,"span",13),a.gd(1),a.xc(2,"t"),a.jc()),2&e){const e=a.wc();a.Mb(1),a.hd(a.yc(2,1,e.generalError))}}function f(e,t){if(1&e){const e=a.lc();a.kc(0,"radio",14),a.sc("OnChange",function(t){return a.Vc(e),a.wc().permissionChanged(t)}),a.jc()}if(2&e){const e=t.$implicit,i=a.wc();a.Dc("name","permission_type")("value",e.value)("label",e.label)("checked",e.checked)("inputFormControl",i.uploadForm.controls.permission_type)}}function _(e,t){if(1&e){const e=a.lc();a.kc(0,"div"),a.kc(1,"checkbox",15),a.sc("onChange",function(t){return a.Vc(e),a.wc().learnerSelection(t)}),a.jc(),a.kc(2,"checkbox",15),a.sc("onChange",function(t){return a.Vc(e),a.wc().tutorSelection(t)}),a.jc(),a.kc(3,"checkbox",15),a.sc("onChange",function(t){return a.Vc(e),a.wc().instructorSelection(t)}),a.jc(),a.jc()}if(2&e){const e=a.wc();a.Mb(1),a.Dc("label",e.learnerParams.label)("checked",e.learnerParams.checked)("value",e.learnerParams.value)("enabled",e.learnerParams.enabled),a.Mb(1),a.Dc("label",e.tutorParams.label)("checked",e.tutorParams.checked)("value",e.tutorParams.value)("enabled",e.tutorParams.enabled),a.Mb(1),a.Dc("label",e.instructorParams.label)("checked",e.instructorParams.checked)("value",e.instructorParams.value)("enabled",e.instructorParams.enabled)}}let v=(()=>{class e{constructor(e,t,i){this.fb=e,this._backendService=t,this.changeDetector=i,this.uploadedFile=null,this.errorFileSelected=null,this.generalError=null,this.visibleToAll=1,this.selectPermissions=!1,this.permissionList=[0,0,0],this.emitted=!1,this.uploadForm=e.group({fileInfo:["",s.x.required],uploader:["",s.x.required],permission_type:[""]})}ngOnInit(){this.learnerParams={label:"Learner",checked:!1,value:2,enabled:!1},this.tutorParams={label:"Tutor",checked:!1,value:8,enabled:!1},this.instructorParams={label:"Instructor",checked:!1,value:16,enabled:!1},this.fileInfo={type:"text",id:"fileInfo1",label:"Title",floating_label:!0},this.permissionOptions=[{id:0,value:0,label:n.a.t("player","All"),checked:"checked"},{id:1,value:1,label:n.a.t("player","Select enrollment levels"),checked:""}],this.uploadParams={label:"",placeholder:n.a.t("standard","Upload file"),allowed_extensions:["3gp","3gp2","avi","bmp","csv","doc","docx","epub","flv","gif","ico","jpeg","jpg","mkv","mov","mp3","mp4","mpeg","mpeg4","mpg","mpg2","ogg","ogm","pdf","png","ppsx","ppt","pptx","srt","txt","vtt","wmv","xls","xlsx","zip"],max_file_size:300,collection:"coursedocs",disabledField:!1,style:"form"}}uploadFile(){console.log("upload file method")}submitForm(){console.log("submitted!")}uploadedFiles(e){console.log("Uploaded!"),this.uploadedFile=e,console.log(e)}reset(){this.uploadedFile=null,this.errorFileSelected=null,this.generalError=null,this.changeDetector.detectChanges()}getParams(e){let t=this.uploadForm.controls.fileInfo.value,i="*";return e.length>0&&(i="selected_sessions"),this.errorFileSelected=null,this.generalError=null,this.uploadedFile&&t.length>0?{original_file_name:this.uploadedFile.original_filename,file_name:this.uploadedFile.new_filename,title:t,course_id:this.course_id,parent_id:this.folderList.getFirstId(),user_id:this.user_id,visibility:this.visibleToAll,permissions:this.permissionList,viewable_by:i,sessions:e}:"missing parameters"}permissionChanged(e){0==e?(this.visibleToAll=1,this.selectPermissions=!1,this.changeDetector.detectChanges()):(this.visibleToAll=-1,this.selectPermissions=!0,this.learnerParams.enabled=!0,this.tutorParams.enabled=!0,this.instructorParams.enabled=!0,this.changeDetector.detectChanges())}learnerSelection(e){this.permissionList[0]=e.checked?2:0,console.log(this.permissionList)}tutorSelection(e){this.permissionList[1]=e.checked?8:0,console.log(this.permissionList)}instructorSelection(e){this.permissionList[2]=e.checked?16:0,console.log(this.permissionList)}}return e.\u0275fac=function(t){return new(t||e)(a.ec(s.d),a.ec(o.a),a.ec(a.i))},e.\u0275cmp=a.Yb({type:e,selectors:[["upload-file-wizard"]],viewQuery:function(e,t){if(1&e&&(a.nd(p,3),a.nd(g,3)),2&e){let e;a.Rc(e=a.tc())&&(t.folderList=e.first),a.Rc(e=a.tc())&&(t.titleField=e.first)}},inputs:{course_id:"course_id",user_id:"user_id"},decls:14,vars:19,consts:[[1,"upload-file"],[1,"mdl-grid"],[1,"mdl-cell","mdl-cell--12-col"],["class","text-error",4,"ngIf"],[3,"formGroup","ngSubmit"],[3,"label","allowed_extensions","collection","max_file_size","disabledField","inputFormControl","uploaded","reset"],[3,"id","type","label","floating_label","inputFormControl"],["titleField",""],[1,"folder-list-vl"],[3,"course_id"],["folderList",""],["id","permission_ + permission.id",3,"name","value","label","checked","inputFormControl","OnChange",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-error"],["id","permission_ + permission.id",3,"name","value","label","checked","inputFormControl","OnChange"],[3,"label","checked","value","enabled","onChange"]],template:function(e,t){1&e&&(a.kc(0,"div",0),a.kc(1,"div",1),a.kc(2,"div",2),a.ed(3,m,3,3,"span",3),a.ed(4,b,3,3,"span",3),a.kc(5,"form",4),a.sc("ngSubmit",function(){return t.submitForm()}),a.kc(6,"single-upload",5),a.sc("uploaded",function(e){return t.uploadedFiles(e)})("reset",function(){return t.reset()}),a.jc(),a.fc(7,"textfield",6,7),a.kc(9,"div",8),a.fc(10,"folder-list",9,10),a.jc(),a.ed(12,f,1,5,"radio",11),a.ed(13,_,4,12,"div",12),a.jc(),a.jc(),a.jc(),a.jc()),2&e&&(a.Mb(3),a.Dc("ngIf",t.errorFileSelected),a.Mb(1),a.Dc("ngIf",t.generalError),a.Mb(1),a.Dc("formGroup",t.uploadForm),a.Mb(1),a.bd(t.uploadParams.style),a.Dc("label",t.uploadParams.label)("allowed_extensions",t.uploadParams.allowed_extensions)("collection",t.uploadParams.collection)("max_file_size",t.uploadParams.max_file_size)("disabledField",t.uploadParams.disabledField)("inputFormControl",t.uploadForm.controls.uploader),a.Mb(1),a.Dc("id",t.fileInfo.id)("type",t.fileInfo.type)("label",t.fileInfo.label)("floating_label",t.fileInfo.floating_label)("inputFormControl",t.uploadForm.controls.fileInfo),a.Mb(3),a.Dc("course_id",t.course_id),a.Mb(2),a.Dc("ngForOf",t.permissionOptions),a.Mb(1),a.Dc("ngIf",t.selectPermissions))},directives:[r.p,s.y,s.p,s.i,c.a,l.a,d.a,r.o,u.a,h.a],pipes:[n.b],styles:["body .wizard__wrapper {\n            height: calc(100vh - 110px);\n        }\n\n          body .wizard__wrapper .wizard-content {\n            max-height: unset;\n        }\n\n        .upload-file[_ngcontent-%COMP%] {\n            height: calc(100vh - 140px);\n        }"]}),e})()},vvrf:function(e,t,i){var s=i("u/Db"),n=i("3X7Y"),a=i("nZSm"),o=i("AZa5"),r=i("Lzq4"),c=i("BCVQ"),l=i("e/Dd"),d=i("ELBg");function u(e){return unescape(encodeURIComponent(e)).length}function h(e,t,i){for(var s,n=[];null!==(s=e.exec(i));)n.push({data:s[0],index:s.index,mode:t,length:s[0].length});return n}function p(e){var t,i,n=h(c.NUMERIC,s.NUMERIC,e),a=h(c.ALPHANUMERIC,s.ALPHANUMERIC,e);return l.isKanjiModeEnabled()?(t=h(c.BYTE,s.BYTE,e),i=h(c.KANJI,s.KANJI,e)):(t=h(c.BYTE_KANJI,s.BYTE,e),i=[]),n.concat(a,t,i).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function g(e,t){switch(t){case s.NUMERIC:return n.getBitsLength(e);case s.ALPHANUMERIC:return a.getBitsLength(e);case s.KANJI:return r.getBitsLength(e);case s.BYTE:return o.getBitsLength(e)}}function m(e,t){var i,c=s.getBestModeForData(e);if((i=s.from(t,c))!==s.BYTE&&i.bit<c.bit)throw new Error('"'+e+'" cannot be encoded with mode '+s.toString(i)+".\n Suggested mode is: "+s.toString(c));switch(i!==s.KANJI||l.isKanjiModeEnabled()||(i=s.BYTE),i){case s.NUMERIC:return new n(e);case s.ALPHANUMERIC:return new a(e);case s.KANJI:return new r(e);case s.BYTE:return new o(e)}}t.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e},[])},t.fromString=function(e,i){for(var n=function(e,t){for(var i={},n={start:{}},a=["start"],o=0;o<e.length;o++){for(var r=e[o],c=[],l=0;l<r.length;l++){var d=r[l],u=""+o+l;c.push(u),i[u]={node:d,lastCount:0},n[u]={};for(var h=0;h<a.length;h++){var p=a[h];i[p]&&i[p].node.mode===d.mode?(n[p][u]=g(i[p].lastCount+d.length,d.mode)-g(i[p].lastCount,d.mode),i[p].lastCount+=d.length):(i[p]&&(i[p].lastCount=d.length),n[p][u]=g(d.length,d.mode)+4+s.getCharCountIndicator(d.mode,t))}}a=c}for(h=0;h<a.length;h++)n[a[h]].end=0;return{map:n,table:i}}(function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];switch(n.mode){case s.NUMERIC:t.push([n,{data:n.data,mode:s.ALPHANUMERIC,length:n.length},{data:n.data,mode:s.BYTE,length:n.length}]);break;case s.ALPHANUMERIC:t.push([n,{data:n.data,mode:s.BYTE,length:n.length}]);break;case s.KANJI:t.push([n,{data:n.data,mode:s.BYTE,length:u(n.data)}]);break;case s.BYTE:t.push([{data:n.data,mode:s.BYTE,length:u(n.data)}])}}return t}(p(e,l.isKanjiModeEnabled())),i),a=d.find_path(n.map,"start","end"),o=[],r=1;r<a.length-1;r++)o.push(n.table[a[r]].node);return t.fromArray(o.reduce(function(e,t){var i=e.length-1>=0?e[e.length-1]:null;return i&&i.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[]))},t.rawSplit=function(e){return t.fromArray(p(e,l.isKanjiModeEnabled()))}},wqqH:function(e,t,i){"use strict";i.d(t,"d",function(){return s}),i.d(t,"a",function(){return n}),i.d(t,"e",function(){return a}),i.d(t,"b",function(){return o}),i.d(t,"f",function(){return r}),i.d(t,"c",function(){return c}),i.d(t,"g",function(){return l});var s=function(e){return e[e.TO_BE_STARTED="to_be_started"]="TO_BE_STARTED",e[e.STARTED="started"]="STARTED",e[e.SUBMITTED="submitted"]="SUBMITTED",e[e.REVIEW="review"]="REVIEW",e[e.REQUEST_FOR_PLAY="request_for_play"]="REQUEST_FOR_PLAY",e}({}),n=function(e){return e[e.INLINE="inline"]="INLINE",e[e.STAND_ALONE="standalone"]="STAND_ALONE",e}({}),a=function(e){return e[e.NOT_SUBMITTED="not_submitted"]="NOT_SUBMITTED",e[e.SUBMITTED="submitted"]="SUBMITTED",e}({}),o=function(e){return e[e.WAITING_EVALUATION="waiting_evaluation"]="WAITING_EVALUATION",e[e.EVALUATED="evaluated"]="EVALUATED",e}({}),r=function(e){return e[e.NONE="none"]="NONE",e[e.PER_TEST="per_test"]="PER_TEST",e[e.PER_QUESTION="per_question"]="PER_QUESTION",e}({}),c=function(e){return e[e.ABSOLUTE="absolute"]="ABSOLUTE",e[e.PERCENTAGE="percentage"]="PERCENTAGE",e}({}),l=function(e){return e[e.START="start"]="START",e[e.CONTINUE="continue"]="CONTINUE",e[e.PREV="prev"]="PREV",e[e.NEXT="next"]="NEXT",e[e.SUBMIT_PARTIAL="submit_partial"]="SUBMIT_PARTIAL",e[e.TIME_ELAPSED_SUBMIT="time_elapsed_submit"]="TIME_ELAPSED_SUBMIT",e[e.TIME_ENABLED_FORCE_EXIT="time_enabled_force_exit"]="TIME_ENABLED_FORCE_EXIT",e[e.SUBMIT="submit"]="SUBMIT",e[e.REVIEW="review"]="REVIEW",e[e.NO_ACTION="no_action"]="NO_ACTION",e}({})},wsCI:function(e,t,i){"use strict";i.d(t,"a",function(){return V});var s=i("R0Ic"),n=i("fXoL"),a=i("3Pt+"),o=i("wI8q"),r=i("lfsz"),c=i("Y9qQ"),l=i("zMZL"),d=i("/76g");class u{constructor(){this.hintPeerReview=d.a.t("standard","Requires Expert\u2019s Peer Review"),this.hintIsExpert=d.a.t("standard","You're an expert for this channel"),this.searchPanelTitle={all:d.a.t("app7020","Search for Channels and/or People"),channels:d.a.t("standard","Search for Channels")},this.clearAll=d.a.t("app7020","Clear all"),this.multiSelectLabel={all:d.a.t("app7020","Channels and/or People"),channels:d.a.t("app7020","Channels")},this.multiSelectPlaceholder=d.a.t("standard","Type..."),this.suggested=d.a.t("standard","Suggested"),this.allChannels=d.a.t("standard","All channels"),this.userSingular=d.a.t("standard","_USER"),this.userPlural=d.a.t("getmoreuser","users"),this.peerReviewTitle=d.a.t("standard","Info"),this.peerReviewDescription=d.a.t("app7020","Some of the selected channels require an expert to review your content. Your content will be published in those channels only after the expert's approval, but it will be published immediately in all of the other channels not requiring expert's review.")}}var h=i("XNiG"),p=i("LRne"),g=i("cp0P"),m=i("/uUt"),b=i("IzEk"),f=i("wO+i"),_=i("JIr8"),v=i("Kj3r"),y=i("eIep"),w=i("ofXK"),C=i("f2BR"),S=i("nUpK"),k=i("gvJE");const T=["shareContentMultiSelect"];function I(e,t){if(1&e){const e=n.lc();n.kc(0,"span",14),n.kc(1,"a",15),n.sc("click",function(){return n.Vc(e),n.wc().clearAll()}),n.gd(2),n.xc(3,"t"),n.jc(),n.jc()}if(2&e){const e=n.wc();n.Mb(2),n.id(" ",n.yc(3,1,e.dictionary.clearAll)," ")}}function x(e,t){if(1&e){const e=n.lc();n.kc(0,"div",16),n.fc(1,"ui-icon",17),n.kc(2,"div",18),n.fc(3,"h4",19),n.xc(4,"t"),n.fc(5,"p",20),n.xc(6,"t"),n.jc(),n.kc(7,"ui-button-text",21),n.sc("trigger",function(){return n.Vc(e),n.wc().hideNotification()}),n.jc(),n.jc()}if(2&e){const e=n.wc();n.Mb(1),n.Dc("name","comment")("size","sm")("color","dark"),n.Mb(2),n.Dc("innerHTML",n.yc(4,7,e.dictionary.peerReviewTitle),n.Wc),n.Mb(2),n.Dc("innerHTML",n.yc(6,9,e.dictionary.peerReviewDescription),n.Wc),n.Mb(2),n.Dc("color","dark")("label","got it")}}function D(e,t){if(1&e&&(n.kc(0,"h5",13),n.gd(1),n.xc(2,"t"),n.jc()),2&e){const e=n.wc();n.Mb(1),n.hd(n.yc(2,1,e.dictionary.suggested))}}function O(e,t){if(1&e&&(n.kc(0,"div",29),n.gd(1),n.xc(2,"t"),n.jc()),2&e){const e=n.wc(2);n.Mb(1),n.id(" ",n.yc(2,1,e.dictionary.suggested)," ")}}function E(e,t){if(1&e){const e=n.lc();n.kc(0,"li",22),n.sc("click",function(){n.Vc(e);const i=t.$implicit;return n.wc().shareSelection(i)}),n.fc(1,"ui-avatar",23),n.kc(2,"div",24),n.kc(3,"div",25),n.gd(4),n.jc(),n.jc(),n.ed(5,O,3,3,"div",26),n.kc(6,"div",27),n.kc(7,"ui-input-checkbox",28),n.sc("click",function(e){return e.preventDefault()}),n.jc(),n.jc(),n.jc()}if(2&e){const e=t.$implicit,i=n.wc();n.Mb(1),n.Dc("size","lg")("imageUrl",e.avatar)("text",null==e?null:e.initials)("iconName",e.avatar||null!=e&&e.initials?"":"user"),n.Mb(3),n.id(" ",e.name," "),n.Mb(1),n.Dc("ngIf",e.from_recommender),n.Mb(2),n.Dc("formControl",i.shareFormGroup.get(e.list_uuid))}}function A(e,t){1&e&&(n.kc(0,"div",30),n.fc(1,"ui-spinner",31),n.jc()),2&e&&(n.Mb(1),n.Dc("size","md")("color","neutral"))}function P(e,t){if(1&e&&(n.gd(0),n.xc(1,"lowercase"),n.xc(2,"t")),2&e){const e=n.wc(2);n.id(" ",n.yc(1,1,n.yc(2,3,e.dictionary.userPlural))," ")}}function M(e,t){if(1&e&&(n.gd(0),n.xc(1,"lowercase"),n.xc(2,"t")),2&e){const e=n.wc(2);n.id(" ",n.yc(1,1,n.yc(2,3,e.dictionary.userSingular))," ")}}function L(e,t){if(1&e&&(n.kc(0,"span"),n.gd(1),n.xc(2,"t"),n.jc()),2&e){const e=n.wc(2);n.Mb(1),n.id(" | ",n.yc(2,1,e.dictionary.hintPeerReview)," ")}}function j(e,t){if(1&e&&(n.kc(0,"span"),n.gd(1),n.xc(2,"t"),n.jc()),2&e){const e=n.wc(2);n.Mb(1),n.id(" | ",n.yc(2,1,e.dictionary.hintIsExpert)," ")}}const R=function(e,t){return{color:e,backgroundColor:t}},F=function(e){return[e]};function N(e,t){if(1&e){const e=n.lc();n.kc(0,"li",22),n.sc("click",function(){n.Vc(e);const i=t.$implicit;return n.wc().shareSelection(i)}),n.kc(1,"div",32),n.fc(2,"em",33),n.jc(),n.kc(3,"div",24),n.kc(4,"div",25),n.gd(5),n.jc(),n.kc(6,"div",34),n.kc(7,"span"),n.gd(8),n.ed(9,P,3,5,"ng-template",35),n.ed(10,M,3,5,"ng-template",35),n.jc(),n.ed(11,L,3,3,"span",36),n.ed(12,j,3,3,"span",36),n.jc(),n.jc(),n.kc(13,"div",27),n.kc(14,"ui-input-checkbox",28),n.sc("click",function(e){return e.preventDefault()}),n.jc(),n.jc(),n.jc()}if(2&e){const e=t.$implicit,i=n.wc();n.Mb(1),n.Dc("ngStyle",n.Jc(9,R,e.thumbnail.color||"#ffffff",e.thumbnail.background||"var(--ui-color-layout-overlay-dark)")),n.Mb(1),n.Dc("ngClass",n.Ic(12,F,e.thumbnail.icon)),n.Mb(3),n.id(" ",e.name," "),n.Mb(3),n.id(" ",e.users_count," "),n.Mb(1),n.Dc("ngIf",1!==e.users_count),n.Mb(1),n.Dc("ngIf",1===e.users_count),n.Mb(1),n.Dc("ngIf","everyone_with_pr"===e.upload_permission&&!(null!=e&&e.is_expert)),n.Mb(1),n.Dc("ngIf",!i.isCurrentUserSA&&(null==e?null:e.is_expert)&&"everyone"!==e.upload_permission),n.Mb(2),n.Dc("formControl",i.shareFormGroup.get(e.list_uuid))}}function U(e,t){1&e&&(n.kc(0,"div",30),n.fc(1,"ui-spinner",31),n.jc()),2&e&&(n.Mb(1),n.Dc("size","md")("color","neutral"))}const z=[[["","header",""]]],q=["[header]"];let V=(()=>{class e{constructor(e,t){this.backendReq=e,this.ref=t,this.sharingFormControl=new a.e([]),this.emitOnlyIds=!0,this.ignoreChannels=[],this.selectedUsers=new n.q,this.selectedChannels=new n.q,this.allSelections=new n.q,this.isLoadingChannels=!0,this.isLoadingUsers=!0,this.isSearchingForChannels=!1,this.searchedItems=[],this.suggestedUsers=[],this.dictionary=new u,this.shareFormGroup=new a.h({}),this.multiSelectValues=[],this.searchItems=new h.a,this.scrolledToBottom=new h.a,this.peerReviewChannelsInformation=[],this.channelsListItems=[],this.channelsHasMoreData=!0,this.channelsLoadPage=0,this.channelsVisibleItems=0,this.searchResponseCallback=e=>{const t=e.users.map(e=>Object.assign(Object.assign({},e),{id:`user_${e.id}`,name:r.b.getInstance().getFullName(e,!0)})),i=e.channels.map(e=>Object.assign(Object.assign({},e),{id:`channel_${e.id}`,name:e.name}));if(t.length+i.length>10){const e=5,s=t.length>e,n=i.length>e;s&&n&&(t.length=e,i.length=e),s||(i.length=e-t.length),n||(t.length=e-i.length)}this.searchedItems=[...t,...i],this.addPeerReviewChannels(e.channels),this.isSearchingForChannels=!1,this.ref.detectChanges()}}hostElementScrolling(e){e&&e.target&&this.scrolledToBottom.next(e.target.clientHeight+150>=e.target.scrollHeight-e.target.scrollTop)}get isCurrentUserSA(){return r.c.getInstance().isCurrentUserA(r.c.LEVEL_SUPERADMIN)}get visibleChannels(){const e=JSON.parse(JSON.stringify(this.channelsListItems));return e.length=this.channelsVisibleItems,e.filter(e=>Boolean(e))}get canShareToPeople(){return o.e.settings.share_to_people!==o.d.CANT_SHARE}get showInformationBar(){if(r.c.getInstance().isCurrentUserA(r.c.LEVEL_SUPERADMIN))return!1;if(l.a.getInstance().get("discover-channel-peer-review-information",!1))return!1;const e=this.sharingFormControl.value.filter(e=>e.indexOf("channel_")>-1).map(e=>Number(e.replace("channel_","")));if(!e.length)return!1;const t=this.peerReviewChannelsInformation.filter(t=>-1!==e.indexOf(t.id)).find(e=>"everyone_with_pr"===e.upload_permission&&!e.is_expert);return Boolean(t)}hideNotification(){l.a.getInstance().set("discover-channel-peer-review-information","confirmed")}ngOnInit(){this.multiSelectValues=this.sharingFormControl.value,this.preselected&&this.preselected.length&&(this.searchedItems=this.searchedItems.concat(this.preselected)),this.loadChannelList(),this.canShareToPeople&&this.loadSuggestedUsersList(),this.listenForSearch(),this.scrolledToBottom.pipe(Object(m.a)()).subscribe(e=>{e&&(this.isLoadingChannels=this.channelsHasMoreData,this.ref.detectChanges(),this.loadChannelList())})}listsTrackBy(e,t){return t.list_uuid}searchForChannels(e){this.sharingFormControl.setErrors(null),e.length<3||(this.searchItems.next(e),this.isSearchingForChannels=!0)}shareSelection(e){this.shareContentMultiSelect.select(Object.assign(Object.assign({},e),{id:e.list_uuid,name:e.name}),!0)}clearAll(){this.resetShareForm(),this.selectedUsers.emit([]),this.selectedChannels.emit([]),this.allSelections.emit([]),this.shareContentMultiSelect.removeAllItems()}shareContentSelections(){var e;const t=this.shareContentMultiSelect.selectedItems.map(e=>this.emitOnlyIds?e.id:e),i=e=>t=>this.emitOnlyIds?t.indexOf(e)>-1:t.id.indexOf(e)>-1,s=e=>t=>this.emitOnlyIds?Number(t.replace(e,"")):Object.assign(Object.assign({},t),{id:Number(t.id.replace(e,""))}),n=t.filter(i("user_")).map(s("user_")),a=t.filter(i("channel_")).map(s("channel_"));this.resetShareForm();for(let o of this.emitOnlyIds?t:t.map(e=>e.id))null===(e=this.shareFormGroup.get(o))||void 0===e||e.setValue(!0);this.allSelections.emit(this.shareContentMultiSelect.selectedItems),this.selectedChannels.emit(a),this.selectedUsers.emit(n),this.sharingFormControl.setErrors(null)}resetShareForm(){const e=Object.keys(this.shareFormGroup.getRawValue()),t={};for(const i of e)t[i]=!1;this.shareFormGroup.setValue(t,{emitEvent:!1})}isSuggestionSelected(e){return Boolean(this.sharingFormControl.value.find(t=>t===e))}loadSuggestedUsersList(){if(void 0===this.assetId)return this.isLoadingUsers=!1,void this.ref.detectChanges();this.backendReq.request(`/share/v1/assets/${this.assetId}/invitations/suggestions`,"GET",{},{},c.b,null,()=>{}).pipe(Object(b.a)(1),Object(f.a)("data"),Object(_.a)(()=>Object(p.a)({items:[]}))).subscribe(e=>{this.suggestedUsers=e.items.map(t=>(this.shareFormGroup.addControl(`user_${t.id}`,new a.e(this.isSuggestionSelected(`user_${t.id}`))),this.searchedItems.push({id:`user_${t.id}`,name:r.b.getInstance().getFullName(t,!0)}),Object.assign(Object.assign({},t),{list_uuid:`user_${t.id}`,initials:String(t.firstname.charAt(0)+t.lastname.charAt(0)).toUpperCase(),name:r.b.getInstance().getFullName(t,!0),from_recommender:e.is_from_recommender}))),this.isLoadingUsers=!1,this.ref.detectChanges()})}loadChannelList(){this.channelsHasMoreData?(this.channelsVisibleItems+=e.VISIBLE_CHANNELS_SIZE,this.channelsLoadPage++,this.backendReq.request("/manage/v1/channels","GET",{items_per_channel:1,page:this.channelsLoadPage,page_size:2*e.VISIBLE_CHANNELS_SIZE,canContributeInOnly:!0,count_user:!0,ignoreChannels:this.ignoreChannels}).pipe(Object(f.a)("data")).subscribe(e=>{e.items=e.items.map(e=>(this.shareFormGroup.addControl(`channel_${e.id}`,new a.e(this.isSuggestionSelected(`channel_${e.id}`))),this.searchedItems.push({id:`channel_${e.id}`,name:e.name}),Object.assign(Object.assign({},e),{list_uuid:`channel_${e.id}`}))),this.channelsHasMoreData=e.has_more_data,this.channelsListItems=[...this.channelsListItems,...e.items],this.addPeerReviewChannels(e.items),this.isLoadingChannels=!1,this.ref.detectChanges()})):this.channelsVisibleItems<this.channelsListItems.length&&(this.channelsVisibleItems=this.channelsListItems.length)}listenForSearch(){this.searchItems.pipe(Object(m.a)(),Object(v.a)(500),Object(y.a)(e=>Object(p.a)(e))).subscribe(e=>{const t=this.backendReq.request(`/share/v1/assets/${this.assetId}/invitations/users`,"GET",{search:e,page:1,page_size:20}).pipe(Object(f.a)("data","items")),i=this.backendReq.request("/manage/v1/channels","GET",{search:e,items_per_channel:1,page:1,page_size:20,canContributeInOnly:!0,count_user:!0,ignoreChannels:this.ignoreChannels}).pipe(Object(f.a)("data","items"));Object(g.a)({users:this.canShareToPeople?t:Object(p.a)([]),channels:i}).subscribe(this.searchResponseCallback)})}addPeerReviewChannels(e){const t=e.filter(e=>"everyone_with_pr"===e.upload_permission);if(!t.length)return;const i=t.map(e=>({id:Number(e.id),is_expert:e.is_expert,upload_permission:e.upload_permission})),s=this.peerReviewChannelsInformation.concat(i).map(e=>JSON.stringify(e)),n=new Set(s);this.peerReviewChannelsInformation=Array.from(n).map(e=>JSON.parse(e))}}return e.VISIBLE_CHANNELS_SIZE=10,e.\u0275fac=function(t){return new(t||e)(n.ec(c.a),n.ec(n.i))},e.\u0275cmp=n.Yb({type:e,selectors:[["asset-share-content"]],viewQuery:function(e,t){if(1&e&&n.nd(T,1),2&e){let e;n.Rc(e=n.tc())&&(t.shareContentMultiSelect=e.first)}},hostBindings:function(e,t){1&e&&n.sc("scroll",function(e){return t.hostElementScrolling(e)})},inputs:{assetId:"assetId",sharingFormControl:"sharingFormControl",emitOnlyIds:"emitOnlyIds",preselected:"preselected",ignoreChannels:"ignoreChannels"},outputs:{selectedUsers:"selectedUsers",selectedChannels:"selectedChannels",allSelections:"allSelections"},ngContentSelectors:q,decls:22,vars:28,consts:[[1,"app7020-contribute-panel-body","new-layout","app7020-share-content"],[1,"section-box","hyd-background-surface"],[1,"share-content-search-header"],[1,"hyd-typography-heading-4"],[1,"search-field-wrap"],["class","clear-all-action",4,"ngIf"],[3,"label","placeholder","mode","showCounter","applySourceRegex","showRequiredFieldIndicator","max_selectable_items","inputFormControl","value","source","showLoader","onChange","onItemDeletion","onItemSelection"],["shareContentMultiSelect",""],["class","review-hint",4,"ngIf"],["class","section-list-title hyd-typography-heading-4",4,"ngIf"],[1,"hyd-background-surface","suggestion-list"],["class","suggestion",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["class","load-more-spinner hyd-background-surface",4,"ngIf"],[1,"section-list-title","hyd-typography-heading-4"],[1,"clear-all-action"],[1,"bolded","cta-btn",3,"click"],[1,"review-hint"],[1,"icon",3,"name","size","color"],[1,"text"],[1,"heading","hyd-typography-heading-5",3,"innerHTML"],[1,"hyd-typography-subtitle",3,"innerHTML"],[3,"color","label","trigger"],[1,"suggestion",3,"click"],[3,"size","imageUrl","text","iconName"],[1,"suggestion-info"],[1,"suggestion-name"],["class","suggested-token",4,"ngIf"],[1,"contribute-status"],[3,"formControl","click"],[1,"suggested-token"],[1,"load-more-spinner","hyd-background-surface"],[3,"size","color"],[1,"suggestion-icon",3,"ngStyle"],[3,"ngClass"],[1,"additional-info","hyd-typography-subtitle"],[3,"ngIf"],[4,"ngIf"]],template:function(e,t){1&e&&(n.Cc(z),n.kc(0,"div",0),n.Bc(1),n.kc(2,"div",1),n.kc(3,"div",2),n.kc(4,"h5",3),n.gd(5),n.xc(6,"t"),n.jc(),n.jc(),n.kc(7,"div",4),n.ed(8,I,4,3,"span",5),n.kc(9,"multi-select",6,7),n.sc("onChange",function(e){return t.searchForChannels(e)})("onItemDeletion",function(){return t.shareContentSelections()})("onItemSelection",function(){return t.shareContentSelections()}),n.jc(),n.jc(),n.jc(),n.ed(11,x,8,11,"div",8),n.ed(12,D,3,3,"h5",9),n.kc(13,"ul",10),n.ed(14,E,8,7,"li",11),n.jc(),n.ed(15,A,2,2,"div",12),n.kc(16,"h5",13),n.gd(17),n.xc(18,"t"),n.jc(),n.kc(19,"ul",10),n.ed(20,N,15,14,"li",11),n.jc(),n.ed(21,U,2,2,"div",12),n.jc()),2&e&&(n.Mb(5),n.id(" ",n.yc(6,24,t.canShareToPeople?t.dictionary.searchPanelTitle.all:t.dictionary.searchPanelTitle.channels)," "),n.Mb(3),n.Dc("ngIf",null==t.sharingFormControl.value?null:t.sharingFormControl.value.length),n.Mb(1),n.Dc("label",t.canShareToPeople?t.dictionary.multiSelectLabel.all:t.dictionary.multiSelectLabel.channels)("placeholder",t.dictionary.multiSelectPlaceholder)("mode",0)("showCounter",!1)("applySourceRegex",!1)("showRequiredFieldIndicator",!0)("max_selectable_items",9999999999)("inputFormControl",t.sharingFormControl)("value",t.multiSelectValues)("source",t.searchedItems)("showLoader",t.isSearchingForChannels),n.Mb(2),n.Dc("ngIf",t.showInformationBar),n.Mb(1),n.Dc("ngIf",t.suggestedUsers.length),n.Mb(1),n.Dc("@listAnimation",t.suggestedUsers.length),n.Mb(1),n.Dc("ngForOf",t.suggestedUsers)("ngForTrackBy",t.listsTrackBy),n.Mb(1),n.Dc("ngIf",t.canShareToPeople&&t.isLoadingUsers),n.Mb(2),n.hd(n.yc(18,26,t.dictionary.allChannels)),n.Mb(2),n.Dc("@listAnimation",t.visibleChannels.length),n.Mb(1),n.Dc("ngForOf",t.visibleChannels)("ngForTrackBy",t.listsTrackBy),n.Mb(1),n.Dc("ngIf",t.isLoadingChannels))},directives:[w.p,C.a,w.o,S.lc,S.U,S.o,S.sc,a.o,a.f,S.Be,w.q,w.n],pipes:[k.b,w.m],styles:["asset-share-content{position:relative;display:block;height:100%;overflow:auto}.app7020-share-content .section-list-title{padding:var(--hyd-spacing-md) var(--hyd-spacing-sm) var(--hyd-spacing-xxs)}.app7020-share-content .review-hint{display:flex;width:100%;padding:var(--hyd-spacing-xs) var(--hyd-spacing-xxs) var(--hyd-spacing-xs) var(--hyd-spacing-sm);justify-content:stretch;align-items:center;box-sizing:border-box;background-color:var(--hyd-color-chip-background-light)}[dir=rtl] .app7020-share-content .review-hint{padding:var(--hyd-spacing-xs) var(--hyd-spacing-sm) var(--hyd-spacing-xs) var(--hyd-spacing-xxs)}.app7020-share-content .review-hint .text{margin-left:var(--hyd-spacing-sm);margin-right:var(--hyd-spacing-xs)}[dir=rtl] .app7020-share-content .review-hint .text{margin-left:var(--hyd-spacing-xs);margin-right:var(--hyd-spacing-sm)}.app7020-share-content .review-hint .text .heading{margin-bottom:var(--hyd-spacing-tiny)}.app7020-share-content .review-hint ui-button-text{flex-shrink:0}.app7020-share-content .section-box{padding-bottom:0}.app7020-share-content .share-content-search-header{display:flex;justify-content:space-between}.app7020-share-content .clear-all-action{cursor:pointer;font-size:var(--hyd-typography-size-xs);position:absolute;right:0;height:100%;top:0;margin-top:8px;z-index:2}.app7020-share-content .search-field-wrap{position:relative}.app7020-share-content .suggestion-list{box-sizing:border-box}.app7020-share-content .suggestion-list .suggestion{position:relative;display:flex;justify-content:space-between;align-items:center;padding:var(--hyd-spacing-xs) var(--hyd-spacing-sm);border-bottom:1px solid var(--hyd-color-border-neutral);background-color:var(--hyd-color-layout-surface);transition:background-color var(--hyd-motion-duration-short)}.app7020-share-content .suggestion-list .suggestion:first-of-type{border-top:1px solid var(--hyd-color-border-neutral)}.app7020-share-content .suggestion-list .suggestion:hover{cursor:pointer;background-color:var(--hyd-color-interaction-hover-dark)}.app7020-share-content .suggestion-list .suggestion .suggestion-icon{display:flex;align-items:center;justify-content:center;height:var(--hyd-size-avatar-lg);width:var(--hyd-size-avatar-lg);line-height:var(--hyd-size-avatar-lg);font-size:var(--hyd-size-icon-sm);flex-shrink:0;flex-grow:0;border-radius:50%}.app7020-share-content .suggestion-list .suggestion .suggestion-info{flex-grow:1;padding:0 var(--hyd-spacing-xs)}.app7020-share-content .suggestion-list .suggestion .suggestion-name{color:var(--hyd-color-typography-primary);font-size:var(--hyd-typography-size-sm);font-weight:var(--hyd-typography-weight-semibold);line-height:var(--hyd-typography-lineheight-md)}.app7020-share-content .suggestion-list .suggestion .suggestion-additional-info{color:var(--hyd-color-typography-secondary)}.app7020-share-content .suggestion-list .suggestion .suggested-token{padding:2px 7px;text-transform:uppercase;line-height:var(--hyd-typography-lineheight-sm);font-size:var(--hyd-typography-size-xs);font-weight:var(--hyd-typography-weight-semibold);color:var(--hyd-color-typography-success);border:var(--hyd-size-border-xs) solid var(--hyd-color-border-success);border-radius:var(--hyd-radius-default);margin-right:var(--hyd-spacing-md)}[dir=rtl] .app7020-share-content .suggestion-list .suggestion .suggested-token{margin-left:var(--hyd-spacing-md);margin-right:auto}.app7020-share-content .suggestion-list .suggestion .contribute-status{width:20px;height:30px}@-moz-document url-prefix(){.app7020-share-content .suggestion-list .suggestion .contribute-status{height:100%!important}}.app7020-share-content .suggestion-list .additional-info{color:var(--hyd-color-typography-secondary)}.app7020-share-content .load-more-spinner{text-align:center;padding:var(--hyd-spacing-sm)}"],encapsulation:2,data:{animation:[Object(s.n)("listAnimation",[Object(s.m)("* <=> *",[Object(s.h)(":enter",[Object(s.l)({maxHeight:0,opacity:0}),Object(s.j)("50ms",Object(s.e)("0.5s ease-in-out",Object(s.l)({maxHeight:"100%",opacity:1})))],{optional:!0}),Object(s.h)(":leave",Object(s.e)("0.5s ease-in-out",Object(s.l)({maxHeight:0,opacity:0})),{optional:!0})])])]},changeDetection:0}),e})()},wunY:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("fXoL");let n=(()=>{class e{static loadCourseInfo(t){return{type:e.LOAD_COURSE_INFO,payload:t}}static loadCourseChapters(t){return{type:e.LOAD_COURSE_CHAPTERS,payload:t}}static onLightboxWindowClose(t,i,s,n=1){return{type:e.ON_LIGHTBOX_WINDOW_CLOSE,payload:{courseId:t,chapterId:i,redirectUrl:s,executionCount:n}}}static setScormChaptersHash(t){return{type:e.SET_SCORM_CHAPTERS_HASH,payload:t}}static noOperationAction(){return{type:e.NO_OPERATION_ACTION}}static loadCourseChaptersSuccess(t){return{type:e.LOAD_COURSE_CHAPTERS_SUCCESS,payload:t}}static loadCourseInfoRejected(t){return{type:e.LOAD_COURSE_INFO_REJECTED,payload:t}}static setCoursePlayerChapterLoading(t){return{type:e.SET_COURSE_PLAYER_CHAPTER_LOADING,payload:t}}static openRecoveryKeyDialog(){return{type:e.OPEN_RECOVERY_KEY_DIALOG}}static openOtpDialog(){return{type:e.OPEN_OTP_DIALOG}}static loadCourseInfoSuccess(t,i=!1,s=!1){return{type:e.LOAD_COURSE_INFO_SUCCESS,payload:{courseData:t,inReloading:i,reloadSource:s}}}static startPlaying(t){return{type:e.START_PLAYING,payload:t}}static trackAndReloadCoursePlayer(t){return{type:e.TRACK_AND_RELOAD,payload:t}}static showOtjErrorState(){return{type:e.SHOW_OTJ_ERROR_STATE}}static startPlayingSuccess(t=null,i=null){return{type:e.START_PLAYING_SUCCESS,payload:{id:t,chapters:i.chapters,launch_params:i.launch_params,preserve_lightbox:i.preserve_lightbox,navigating_back:i.navigating_back}}}static startPlayingRejected(t){return{type:e.START_PLAYING_REJECTED,payload:t}}static startPlayingRejectForMissingUserField(t){return{type:e.START_PLAYING_REJECTED_MISSING_USERFIELDS,payload:t}}static setCurrentChapter(t){return{type:e.SET_CURRENT_CHAPTER,payload:t}}static chapterCompleted(t){return{type:e.CHAPTER_COMPLETED,payload:t}}static chapterCompletedSuccess(t){return{type:e.CHAPTER_COMPLETED_SUCCESS,payload:t}}static exitLightbox(){return{type:e.EXIT_LIGHTBOX}}static exitLightboxSuccess(){return{type:e.EXIT_LIGHTBOX_SUCCESS}}static videoCompleted(){return{type:e.VIDEO_COMPLETED}}}return e.LOAD_COURSE_INFO="[CoursePlayer] Load Course Info",e.LOAD_COURSE_INFO_REJECTED="[CoursePlayer] Load Course Info Rejected",e.LOAD_COURSE_INFO_SUCCESS="[CoursePlayer] Load Course Info Success",e.ON_LIGHTBOX_WINDOW_CLOSE="[CoursePlayer] On Lightbox Window Close",e.SET_SCORM_CHAPTERS_HASH="[CoursePlayer] Set SCORM chapters hash",e.SET_COURSE_PLAYER_CHAPTER_LOADING="[CoursePlayer] Set Chapter Loading",e.OPEN_RECOVERY_KEY_DIALOG="[CoursePlayer] Open recovery key dialog",e.OPEN_OTP_DIALOG="[CoursePlayer] Open OTP dialog",e.START_PLAYING="[CoursePlayer] Start Playing",e.TRACK_AND_RELOAD="[CoursePlayer] Track and re-load",e.SHOW_OTJ_ERROR_STATE="[CoursePlayer] Show ChapterViewer OTJ Lo error state",e.START_PLAYING_SUCCESS="[CoursePlayer] Start Playing Success",e.START_PLAYING_REJECTED="[CoursePlayer] Start Playing Rejected",e.START_PLAYING_REJECTED_MISSING_USERFIELDS="[CoursePlayer] Start Playing Rejected for Missing UserFields",e.SET_CURRENT_CHAPTER="[CoursePlayer] Set Current Chapter",e.CHAPTER_COMPLETED="[CoursePlayer] Chapter Completed",e.CHAPTER_COMPLETED_SUCCESS="[CoursePlayer] Chapter Completed success",e.EXIT_LIGHTBOX="[CoursePlayer] Chapter Completed",e.EXIT_LIGHTBOX_SUCCESS="[CoursePlayer] Chapter Completed success",e.VIDEO_COMPLETED="[CoursePlayer] Video ended",e.LOAD_COURSE_CHAPTERS="[Course] Load Course Chapters Request",e.LOAD_COURSE_CHAPTERS_SUCCESS="[Course] Load Course Chapters Success",e.NO_OPERATION_ACTION="[Course] No Operation Action",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.ac({token:e,factory:e.\u0275fac}),e})()},xLs9:function(e){e.exports=JSON.parse('{"a":{"id":292,"code":null,"title":{"label":"My courses and learning plans","category":"enrollments"},"description":{"label":"All your courses and learning plans you\'re enrolled in, including all your courses in progress and completed","category":"enrollments"},"icon":"zmdi zmdi-collection-bookmark","type":"widget","settings":{"showTitle":true,"headerFullWidth":false},"widgets":[{"id":"builtin-coursesandlearningplans-row-1","type":"parent","widget":"row","settings":{"mode":"boxed"},"contains":[{"id":"builtin-coursesandlearningplans-row-1","type":"parent","widget":"column","settings":{"size":"12"},"contains":[{"id":"0","type":"child","widget":"coursesandlearningplans","settings":{"showSearch":true,"showSortBy":true,"assignToAll":true,"displayMode":"card","showFilters":true,"coursesStatus":"all","defaultSortBy":"enrolled_date_desc","showCourseDeadline":true,"removeCoursesPartOfLearningPlan":false,"lpFiltering":"all","enablePushMode":true,"loadPreferences":"enableInfiniteScroll","stickDataBrowserToTop":true}}]}]}]}}')},y0sE:function(e,t,i){"use strict";i.d(t,"a",function(){return qt});var s=i("mrSG"),n=i("fXoL"),a=i("3Pt+"),o=i("384c"),r=i("lfsz"),c=i("knll"),l=i("8lF4"),d=i("9b3o"),u=i("bUIS"),h=i("yfT8"),p=i("/76g"),g=i("rLbr"),m=i("qqVP"),b=i("vkgz"),f=i("eIep"),_=i("wO+i"),v=i("lJxs"),y=i("pLZG"),w=i("IzEk"),C=i("L0WZ"),S=i("gvJE");const k=Object.assign(Object.assign({},C.a),{replyButton:{[m.b.QUESTION]:S.a.t("app7020","Answer"),[m.b.COMMENT]:S.a.t("standard","Reply")},questionLabel:{[m.b.QUESTION]:S.a.t("standard","asked"),[m.b.COMMENT]:S.a.t("standard","commented")},replyLabel:{[m.b.QUESTION]:S.a.t("standard","answered"),[m.b.COMMENT]:S.a.t("app7020","replied")},showMore:{[m.b.QUESTION]:S.a.t("app7020","Show {count} more answers"),[m.b.COMMENT]:S.a.t("app7020","Show {count} more replies")},confirmReply:S.a.t("standard","Send"),confirmEdit:S.a.t("standard","Save"),cancelEdit:S.a.t("standard","Cancel"),moreActions:{edit:S.a.t("standard","Edit"),delete:S.a.t("standard","Delete"),followMessage:S.a.t("app7020","Follow this Thread"),goToSinglePage:S.a.t("app7020","Go to Question Page"),unfollowMessage:S.a.t("standard","Unfollow this Thread")},deleteDialog:{[m.b.QUESTION]:{title:S.a.t("test","Delete question"),content:S.a.t("standard","If you delete this question, all answers to it will also disappear. Do you want to proceed?")},[m.b.COMMENT]:{title:S.a.t("standard","Delete Comment"),content:S.a.t("standard","If you delete this comment, all replies to it will also disappear. Do you want to proceed?")},answer:{title:S.a.t("test","Delete answer"),content:S.a.t("standard","If you delete this answer, no one will be able to read it. Do you want to proceed?")},reply:{title:S.a.t("test","Delete Reply"),content:S.a.t("standard","If you delete this reply, no one will be able to read it. Do you want to proceed?")},cancel:S.a.t("standard","Cancel"),confirm:S.a.t("standard","Delete")},snackbars:{answer:{[m.b.COMMENT]:S.a.t("standard","Your reply has been added successfully"),[m.b.QUESTION]:S.a.t("standard","Your answer has been added successfully")},edit:{reply:S.a.t("standard","Your answer has been edited successfully"),[m.b.COMMENT]:S.a.t("standard","Your comment has been edited successfully"),[m.b.QUESTION]:S.a.t("standard","Your question has been edited successfully")},delete:{reply:S.a.t("standard","This answer has been deleted successfully"),[m.b.COMMENT]:S.a.t("standard","This comment has been deleted successfully"),[m.b.QUESTION]:S.a.t("standard","This question has been deleted successfully")},followNotification:S.a.t("standard","Notifications for this thread have been activated successfully"),unfollowNotification:S.a.t("standard","Notifications for this thread have been deactivated successfully")},sortBy:S.a.t("standard","SORT BY"),totalElements:{singular:S.a.t("standard","{itemsCount} item"),plural:S.a.t("standard","{itemsCount} items")},uiDataBrowser:Object.assign(Object.assign({},C.a.uiDataBrowser),{clearSearchFiltersLabel:S.a.t("standard","Clear search"),showMoreLabel:S.a.t("widgets","See other options"),searchPlaceholder:S.a.t("standard","Search..."),searchLabel:S.a.t("standard","Search"),backLabel:S.a.t("standard","_BACK")}),viewQALabel:S.a.t("app7020","View all Q&A"),loadMore:S.a.t("standard","Load More"),askTheExpert:S.a.t("standard","Ask the Expert"),relatedTo:S.a.t("standard","Related to"),bestAnswer:S.a.t("app7020","Best Answer")});var T=i("Y9qQ"),I=i("tyNb"),x=i("+sIT"),D=i("l7P3");let O=(()=>{class e{get ACTIONS_TYPE(){return`coreWidgets/questionAndAnswers-${this.widgetId}`}initializeActions(){this.search=Object(D.k)(`[${this.ACTIONS_TYPE}] search`,Object(D.p)()),this.searchSuccess=Object(D.k)(`[${this.ACTIONS_TYPE}] search success`,Object(D.p)()),this.searchFailed=Object(D.k)(`[${this.ACTIONS_TYPE}] search failed`),this.updateFilters=Object(D.k)(`[${this.ACTIONS_TYPE}] update filters`,Object(D.p)()),this.resetFilters=Object(D.k)(`[${this.ACTIONS_TYPE}] reset filters`),this.updatePagination=Object(D.k)(`[${this.ACTIONS_TYPE}] update pagination`,Object(D.p)()),this.resetPagination=Object(D.k)(`[${this.ACTIONS_TYPE}] reset pagination`,Object(D.p)()),this.updateSorting=Object(D.k)(`[${this.ACTIONS_TYPE}] update sorting`,Object(D.p)()),this.loadChannels=Object(D.k)(`[${this.ACTIONS_TYPE}] load channel filter options`),this.loadCohorts=Object(D.k)(`[${this.ACTIONS_TYPE}] load cohort filter options`,(e=[])=>({channels:e})),this.loadChannelsSuccess=Object(D.k)(`[${this.ACTIONS_TYPE}] load channel filter options success`,Object(D.p)()),this.loadCohortsSuccess=Object(D.k)(`[${this.ACTIONS_TYPE}] load cohort filter options success`,Object(D.p)()),this.loadReplies=Object(D.k)(`[${this.ACTIONS_TYPE}] load replies of answer`,Object(D.p)()),this.loadRepliesSuccess=Object(D.k)(`[${this.ACTIONS_TYPE}] load replies of answer success`,Object(D.p)()),this.loadAnswers=Object(D.k)(`[${this.ACTIONS_TYPE}] load answers of answer`,Object(D.p)()),this.loadAnswersSuccess=Object(D.k)(`[${this.ACTIONS_TYPE}] load answers of answer success`,Object(D.p)()),this.deleteQuestionSuccess=Object(D.k)(`[${this.ACTIONS_TYPE}] delete question success`,Object(D.p)()),this.afterDeleteQuestion=Object(D.k)(`[${this.ACTIONS_TYPE}] after delete initiate search of the same page`),this.afterDeleteQuestionSuccess=Object(D.k)(`[${this.ACTIONS_TYPE}] after delete initiate search of the same page success`,Object(D.p)()),this.afterDeleteAnswer=Object(D.k)(`[${this.ACTIONS_TYPE}] after answer delete initiate search of the same answer page`,Object(D.p)()),this.afterDeleteAnswerSuccess=Object(D.k)(`[${this.ACTIONS_TYPE}] after answer delete initiate search of the same answer page success`,Object(D.p)()),this.changeBestAnswer=Object(D.k)(`[${this.ACTIONS_TYPE}] change the best answer on question`,Object(D.p)())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.ac({token:e,factory:e.\u0275fac}),e})();var E=i("lWmL");let A=(()=>{class e{constructor(e,t,i,s,n,a){this._backendService=e,this._router=t,this._docLayoutService=i,this._store=s,this._qnaActions=n,this._qnaService=a,this.DELETE_QUESTION_REMINDER_KEY="app7020_questions_deletion_warning_dismissed",this.DELETE_ANSWER_REMINDER_KEY="app7020_questions_answer_deletion_warning_dismissed",this.DELETE_COMMENT_REMINDER_KEY="app7020_comment_deletion_warning_dismissed",this.DELETE_REPLY_REMINDER_KEY="app7020_comment_reply_deletion_warning_dismissed",this.dictionary=k,this.deleteReminderOff={[this.DELETE_QUESTION_REMINDER_KEY]:!1,[this.DELETE_ANSWER_REMINDER_KEY]:!1,[this.DELETE_COMMENT_REMINDER_KEY]:!1,[this.DELETE_REPLY_REMINDER_KEY]:!1}}showAllQuestions(){this._router.navigate(["/share/list/coach"]).then()}rate(e,t){return this._qnaService[t](e)}follow(e){return this._qnaService.questionFollow(e).pipe(Object(b.a)(()=>{this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.snackbars.followNotification})}))}unFollow(e){return this._qnaService.questionUnfollow(e).pipe(Object(b.a)(()=>{this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.snackbars.unfollowNotification})}))}edit(e,t){return this._qnaService[e.isReply?"editAnswer":e.type===m.b.QUESTION?"editQuestion":"editComment"](e.id,t).pipe(Object(b.a)(()=>{this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.snackbars.edit[e.isReply?"reply":e.type]})}))}reply(e,t){var i;const s=e.type===m.b.COMMENT?"commentReply":"questionAnswer",n=null!==(i=e.isReply?e.parentID:e.id)&&void 0!==i?i:0;return this._qnaService[s](n,t,e.isReply?e.id:void 0).pipe(Object(b.a)(()=>{this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.snackbars.answer["questionAnswer"===s?m.b.QUESTION:m.b.COMMENT]})}))}markAsBest(e,t){const i=Object(b.a)(()=>{var t;this._store.dispatch(this._qnaActions.changeBestAnswer({idQuestion:null!==(t=e.parentID)&&void 0!==t?t:0,idAnswer:e.id,isBest:!e.isBestAnswer}))});return e.isBestAnswer?this._qnaService.answerUnmarkAsBest(e.id).pipe(i):t?this._qnaService.answerUnmarkAsBest(t).pipe(Object(f.a)(()=>this._qnaService.answerMarkAsBest(e.id).pipe(i))):this._qnaService.answerMarkAsBest(e.id).pipe(i)}delete(e){return new Promise(t=>{this._reminderDeleteQuestion(e.type,e.isReply).then(i=>{if(i&&"confirm"!==i.actionID)return void i.actionSuccess.next(!0);const s=e.isReply?"deleteAnswer":e.type===m.b.QUESTION?"deleteQuestion":"deleteComment",n=!i||!i.hasOwnProperty("confirmationCheckValue")||i.confirmationCheckValue;this._updatePreferences(e.type,e.isReply,n);const a=()=>{i&&i.actionSuccess.next(!0)};t(this._qnaService[s](e.id).pipe(Object(b.a)({next:()=>{var t;if(a(),this._docLayoutService.toast.showToast({type:"success",message:this.dictionary.snackbars.delete[e.isReply?"reply":e.type]}),this._store.dispatch(this._qnaActions.deleteQuestionSuccess({id:e.id,isAnswer:s.toLowerCase().indexOf("answer")>-1})),e.isReply||this._store.dispatch(this._qnaActions.afterDeleteQuestion()),e.isReply){const i=null!==(t=e.directParentId)&&void 0!==t?t:e.parentID;this._store.dispatch(this._qnaActions.afterDeleteAnswer({id:i,page:1}))}},error:e=>{a();const t=e&&e.message&&e.message[0]?e.message[0]:p.a.t("standard","Internal Server Error");this._docLayoutService.toast.showToast({message:t,type:"error"})}})))})})}loadMoreAnswers({id:e,page:t}){this._store.dispatch(this._qnaActions.loadAnswers({id:e,page:t}))}checkDeleteConfirmationModalSetting(){const e=new h.a("/manage/v1/user/:user_id/settings",g.a.GET);this._backendService.request(e.setPlaceholdersValue({user_id:r.c.getInstance().id}),e.verb,{page_size:!1}).pipe(Object(_.a)("data","items"),Object(v.a)(e=>e.filter(e=>[this.DELETE_ANSWER_REMINDER_KEY,this.DELETE_QUESTION_REMINDER_KEY,this.DELETE_COMMENT_REMINDER_KEY,this.DELETE_REPLY_REMINDER_KEY].indexOf(e.name)>-1)),Object(y.a)(e=>e.length>0)).subscribe(e=>{e.forEach(e=>{this.deleteReminderOff[e.name]=Boolean(Number(e.value))})})}_reminderDeleteQuestion(e,t=!1){return new Promise(i=>{let s=e;switch(e){case m.b.QUESTION:s=t?"answer":e;break;case m.b.COMMENT:s=t?"reply":e}e===m.b.QUESTION&&t&&this.deleteReminderOff[this.DELETE_ANSWER_REMINDER_KEY]||e===m.b.QUESTION&&!t&&this.deleteReminderOff[this.DELETE_QUESTION_REMINDER_KEY]||e===m.b.COMMENT&&t&&this.deleteReminderOff[this.DELETE_REPLY_REMINDER_KEY]||e===m.b.COMMENT&&!t&&this.deleteReminderOff[this.DELETE_COMMENT_REMINDER_KEY]?i(null):this._docLayoutService.dialog.showCommonDialog({title:this.dictionary.deleteDialog[s].title,content:this.dictionary.deleteDialog[s].content,showConfirmationCheck:!0,confirmationLabel:p.a.t("app7020","Don't show me again"),actions:[{id:"cancel",type:"neutral",label:this.dictionary.deleteDialog.cancel,slot:"end"},{id:"confirm",type:"negative",label:this.dictionary.deleteDialog.confirm,slot:"end"}]}).pipe(Object(w.a)(1)).subscribe(e=>i(e))})}_updatePreferenceForDeleteModalReminder(e){this.deleteReminderOff[e]=!0,this._backendService.updateMyPreferences({settings:[{name:e,value:"1"}]},r.c.getInstance().id).subscribe()}_updatePreferences(e,t,i){if(i)switch(!0){case e===m.b.QUESTION&&t&&!this.deleteReminderOff[this.DELETE_ANSWER_REMINDER_KEY]:this._updatePreferenceForDeleteModalReminder(this.DELETE_ANSWER_REMINDER_KEY);break;case e===m.b.QUESTION&&!t&&!this.deleteReminderOff[this.DELETE_QUESTION_REMINDER_KEY]:this._updatePreferenceForDeleteModalReminder(this.DELETE_QUESTION_REMINDER_KEY);break;case e===m.b.COMMENT&&t&&!this.deleteReminderOff[this.DELETE_REPLY_REMINDER_KEY]:this._updatePreferenceForDeleteModalReminder(this.DELETE_REPLY_REMINDER_KEY);break;case e===m.b.COMMENT&&!t&&!this.deleteReminderOff[this.DELETE_COMMENT_REMINDER_KEY]:this._updatePreferenceForDeleteModalReminder(this.DELETE_COMMENT_REMINDER_KEY)}}}return e.\u0275fac=function(t){return new(t||e)(n.oc(T.a),n.oc(I.h),n.oc(x.a),n.oc(D.e),n.oc(O),n.oc(E.a))},e.\u0275prov=n.ac({token:e,factory:e.\u0275fac}),e})();var P=i("d+dA"),M=i("S2Qf"),L=i("nsn+"),j=i("r0xE"),R=i("icXH");class F extends j.a{constructor(){super();const e=P.b.getInstance().isPluginActive("Share7020App");this.config=this.initConfig({name:"questionsandanswers-new",preview:"/public/images/core/questions-and-answers-widget-preview.jpg",heading:S.a.t("standard","Questions & Answers"),description:S.a.t("app7020","Shows sorted questions and answers"),conditions:{exists:e},params:[{title:"",type:"group",name:"titleGroup",subFields:[{name:"title",type:"textMultilang",label:S.a.t("standard","Title"),legend:S.a.t("dashboard","Leave blank to hide the title"),defaultValue:""}]},{title:S.a.t("admin","Options"),type:"group",name:"optionGroup",subFields:[{name:"showFiltersSelector",type:"checkbox",label:S.a.t("admin_webpages","Show filters selector"),description:S.a.t("admin_webpages","Allow users to filter Questions & Answers by type or status"),defaultValue:!0,conditions:{isEnabled:[{name:"showLoadMoreLink",value:!0}]}},{name:"showSearchBar",type:"checkbox",label:S.a.t("admin_webpages","Show search bar"),description:S.a.t("app7020","Allow users to search among Questions and Answers"),defaultValue:!0,conditions:{isEnabled:[{name:"showLoadMoreLink",value:!0}]}},{name:"showSortBy",type:"checkbox",label:S.a.t("admin_webpages","Show sort by"),description:S.a.t("admin_webpages","Allow users to sort by Questions & Answers"),defaultValue:!0,conditions:{isEnabled:[{name:"showLoadMoreLink",value:!0}]}},{name:"defaultSortBy",type:"dropdown",label:S.a.t("admin_webpages","Default sort by"),defaultValue:"desc",options:[{value:"desc",label:S.a.t("standard","Newest To Oldest")},{value:"asc",label:S.a.t("standard","Oldest To Newest")}]},{name:"maxDisplayable",type:"number",label:S.a.t("admin_webpages","Max displayable Q&A per page"),description:S.a.t("admin_webpages","Display up 10 items per page"),defaultValue:"5",validation:[a.x.required,L.a.min(1),L.a.max(10)]},{name:"showViewAllLink",type:"checkbox",label:S.a.t("dashboard",'Show "view all" link'),description:S.a.t("app7020","This link will bring the user to Q&A's page"),defaultValue:!0},{name:"showLoadMoreLink",type:"checkbox",label:S.a.t("standard",'Show "Load more" button'),description:S.a.t("app7020","This link will open more results in the same page"),defaultValue:!0}]},{title:S.a.t("standard","Filter by Channel"),type:"filteredAsyncLists",name:"selectedChannels",defaultValue:null,settings:{defaultOptionLabel:S.a.t("standard","All channels"),apiConfig:{endpoint:new h.a("/share/v1/admin/channels",g.a.GET),payload:{enabled:1,type:["custom"]}},mapFnc:e=>({label:e.name,value:e.id})}}]})}}class N{constructor(e){this.translateService=e.get(M.h)}get initQASortOptions(){return[{label:this.translateService.instant("Newest To Oldest",{category:"standard"}),value:"desc"},{label:this.translateService.instant("Oldest To Newest",{category:"standard"}),value:"asc"}]}get initQAShowFilter(){return{label:this.translateService.instant("Show",{category:"standard"}),key:"show",options:[{label:this.translateService.instant("New questions",{category:"app7020"}),value:"new"},{label:this.translateService.instant("New best answers",{category:"standard"}),value:"best"},{label:this.translateService.instant("Open questions",{category:"standard"}),value:"open"},{label:this.translateService.instant("My questions",{category:"app7020"}),value:"my_questions"},{label:this.translateService.instant("My answers",{category:"app7020"}),value:"my_answers"},{label:this.translateService.instant("Following",{category:"standard"}),value:"follow"}]}}get initQATypeFilter(){return{label:this.translateService.instant("Question type",{category:"standard"}),key:"type",options:[{label:this.translateService.instant("Direct questions",{category:"standard"}),value:"0"},{label:this.translateService.instant("Linked to an asset/course",{category:"standard"}),value:"1"}]}}get initQAQuestionTypeFilter(){return{label:this.translateService.instant("Type",{category:"standard"}),key:"type_question",defaultValue:"3",value:"3",options:[{label:this.translateService.instant("Question & Answers and Comments",{category:"mobile"}),value:"3"},{label:this.translateService.instant("Question & Answers Only",{category:"mobile"}),value:"1"},{label:this.translateService.instant("Comments Only",{category:"mobile"}),value:"2"}]}}get asyncChannelFilters(){return{label:this.translateService.instant("Channels",{category:"standard"}),endpoint:new R.a("/manage/v1/channels",g.a.GET,"name","id","search"),key:"channel_id",control:new a.e("")}}asyncCohortGroupsFilter(e={}){return{label:this.translateService.instant("Cohorts",{category:"app7020"}),endpoint:new R.a("/share/v1/cohort/groups",g.a.GET,"name","id","search_text",e),key:"cohort_groups",control:new a.e("")}}}var U=i("2NKM"),z=i("7vd5"),q=i("aWaq"),V=i("3RMk");class B{constructor(e){this.SHOW_MORE_STEP=10,this.createdAt="",this.id=0,this.type=m.b.COMMENT,this.content="",this.upVotes=0,this.downVotes=0,this.alreadyVoted=!1,this.isMine=!1,this.isBestAnswer=!1,this.bestAnswerIsLoading=!1,this.showBestAnswerBtn=!1,this.isFollowing=!1,this.owner={id:0,uuid:"",fullName:"",isExpert:!1,shortName:""},this.actions=[],this.replies=[],this.showReplyOption=!1,this.showGoToSingePageOption=!0,this.hasReplies=!1,this.showReplyBox=!1,this.showEditBox=!1,this.isReply=!1,this.hidden=!1,this.visibleReplies=3,this.hasMoreData=!1,this.totalCountReplies=0,this.repliesPage=1,this._createdAt=new q.a,this._setRequiredFields(e),e.hasOwnProperty("isReply")&&(this.isReply=e.isReply),e.hasOwnProperty("showGoToSingePageOption")&&(this.showGoToSingePageOption=e.showGoToSingePageOption),e.hasOwnProperty("parentId")&&(this.parentID=e.parentId),e.hasOwnProperty("directParentId")&&(this.directParentId=e.directParentId),e.hasOwnProperty("mentions")&&(this.mentions=e.mentions),e.hasOwnProperty("sub_items")&&e.sub_items&&this.setReplies(e.sub_items),e.hasOwnProperty("subanswers")&&e.subanswers&&this.setReplies(e.subanswers),this.isReply||this._setRelatedItems(e),this.setActions()}get showMoreCount(){const e=this.totalCountReplies-this.replies.filter(e=>e.hidden).length-this.visibleReplies;return this.SHOW_MORE_STEP<e?this.SHOW_MORE_STEP:e}setActions(){this.actions=[];const e=k.moreActions,t={value:"goto_single_question_page",label:e.goToSinglePage,color:"primary"},i={[m.b.COMMENT]:{value:"edit_comment",label:e.edit,color:"primary"},[m.b.QUESTION]:{value:"edit_question",label:e.edit,color:"primary"},answer:{value:"edit_answer",label:e.edit,color:"primary"}},s={[m.b.COMMENT]:{value:"delete_comment",label:e.delete,color:"error"},[m.b.QUESTION]:{value:"delete_question",label:e.delete,color:"error"},answer:{value:"delete_answer",label:e.delete,color:"error"}},n=this.isReply?"answer":this.type;this.type!==m.b.QUESTION||this.isMine||this.isReply||this.actions.push(this.isFollowing?{value:"unfollow_question",label:e.unfollowMessage,color:"primary"}:{value:"follow_question",label:e.followMessage,color:"primary"}),this.type===m.b.QUESTION&&!this.isReply&&this.showGoToSingePageOption&&this.actions.push(t),!this.isMine&&r.c.getInstance().isCurrentUserA(r.c.LEVEL_SUPERADMIN)&&this.actions.push(s[n]),this.isMine&&(this.actions.push(i[n]),this.actions.push(s[n]))}setReplies(e,{page:t,has_more_data:i,total_count:s}={}){var n,a,o;for(const r of e)this.replies.push(new B(Object.assign(Object.assign({},r),{isReply:!0,showBestAnswerBtn:this.isMine&&this.type===m.b.QUESTION&&!this.parentID,showReplyOption:this.showReplyOption&&!this.isReply&&this.type===m.b.QUESTION,parentId:this.id,directParentId:this.parentID})));this.replies=this.replies.filter((e,t,i)=>i.findIndex(t=>t.id===e.id)===t),this.hasMoreData=null!==(n=i)&&void 0!==n?n:this.hasMoreData,this.totalCountReplies=null!==(a=s)&&void 0!==a?a:this.replies.length,this.repliesPage=null!==(o=t)&&void 0!==o?o:this.repliesPage}setNewReply(e){this.replies.unshift(new B(Object.assign(Object.assign({},e),{isReply:!0,showReplyOption:this.showReplyOption&&!this.isReply&&this.type===m.b.QUESTION,parentId:this.id,directParentId:this.parentID}))),this.totalCountReplies++,this.hasMoreData&&this.replies.pop()}_setRequiredFields(e){var t,i,s,n,a,o;(null==e?void 0:e.id)&&(this.id=e.id),(null==e?void 0:e.type)&&(this.type=e.type),(null==e?void 0:e.title)&&(this.content=e.title),(null==e?void 0:e.owner)&&this._setOwnerAndOwnership(e.owner),e.hasOwnProperty("showBestAnswerBtn")&&(this.showBestAnswerBtn=e.showBestAnswerBtn&&!this.isMine),(null==e?void 0:e.created_at)&&this._setCreatedAt(e.created_at),(null==e?void 0:e.showReplyOption)&&(this.showReplyOption=!0),this._setVotes(e),(null==e?void 0:e.metadata)&&e.metadata&&((null===(t=e.metadata)||void 0===t?void 0:t.total_items)&&(this.hasReplies=!0),(null===(i=e.metadata)||void 0===i?void 0:i.can_reply)&&(this.showReplyOption=e.metadata.can_reply),(null===(s=e.metadata)||void 0===s?void 0:s.have_best)&&(null===(n=e.metadata)||void 0===n?void 0:n.best_answer_id)&&(this.bestAnswerId=e.metadata.best_answer_id),(null===(a=e.metadata)||void 0===a?void 0:a.created_at)&&this._setCreatedAt(e.metadata.created_at),(null===(o=e.metadata)||void 0===o?void 0:o.is_follow)&&(this.isFollowing=e.metadata.is_follow))}_setOwnerAndOwnership(e){if((null==e?void 0:e.uuid)&&(this.owner.uuid=e.uuid),(null==e?void 0:e.short_name)&&(this.owner.shortName=e.short_name),null==e?void 0:e.full_name){const t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.full_name);this.owner.fullName=t?e.full_name.split("@").shift():e.full_name,this.owner.shortName=t?"":this.owner.shortName}(null==e?void 0:e.is_expert)&&(this.owner.isExpert=e.is_expert),(null==e?void 0:e.avatar)&&(this.owner.avatar=e.avatar),(null==e?void 0:e.id)&&(this.isMine=e.id===r.c.getInstance().id)}_setCreatedAt(e){this._createdAt=new q.a(e);const t=r.c.getInstance().timezone,i=Object(z.m)(r.c.getInstance().datetime_format,"short","short");this.createdAt=(new V.a).transform(this._createdAt,t,i)}_setVotes(e){const t=e.rating;t&&t.hasOwnProperty("likes")&&t.likes&&(this.upVotes=t.likes),t&&t.hasOwnProperty("dislikes")&&t.dislikes&&(this.downVotes=t.dislikes),e.hasOwnProperty("voted")&&"object"==typeof e.voted&&(this.votedModel={created:e.voted.created,type:e.voted.type}),e.hasOwnProperty("voted")&&"object"!=typeof e.voted&&(this.alreadyVoted=e.voted),this.isBestAnswer=Boolean(null==e?void 0:e.is_best)}_setRelatedItems(e){var t,i;if(!(null==e?void 0:e.related))return;const s=Number((null==e?void 0:e.related.channel_id)?null==e?void 0:e.related.channel_id:null==e?void 0:e.related.id);let n;switch(e.metadata.related_kind){case m.a.CHANNEL:n=`/learn/dashboard/channel/${s}`;break;case m.a.ASSET:n=`/share/asset/view/${s}`;break;default:n=e.related.url}this.relatedItem={id:s,title:null!==(t=e.related.name)&&void 0!==t?t:e.related.title,path:n,kind:null===(i=null==e?void 0:e.metadata)||void 0===i?void 0:i.related_kind}}}class G extends U.a{mapItemFromDto(e){return new B(e)}mapItemFromArrayDto(e){var t;return null!==(t=null==e?void 0:e.map(e=>this.mapItemFromDto(e)))&&void 0!==t?t:[]}mapItemToDto(e){return{}}mapSearchRequestToDto(e){var t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({page:(null!==(t=null==e?void 0:e.page)&&void 0!==t?t:0)+1,page_size:e.pageSize,sort_dir:e.sortDir,sort_attr:e.sortAttr},!r.c.getInstance().dcsMention&&{ignore_mentions:!0}),!!(null==e?void 0:e.type_question)&&{type_question:e.type_question}),!!(null==e?void 0:e.with_voted)&&{with_voted:e.with_voted}),!!(null==e?void 0:e.asset_id)&&{asset_id:e.asset_id}),!!(null==e?void 0:e.course_id)&&{course_id:e.course_id}),!!(null==e?void 0:e.search)&&{search_text:e.search}),!!(null==e?void 0:e.channel_id)&&{channel_id:e.channel_id}),!!(null==e?void 0:e.cohort_groups)&&Array.isArray(null==e?void 0:e.cohort_groups)&&{cohort_groups:e.cohort_groups.map(e=>Number(e))}),!!(null==e?void 0:e.cohort_groups)&&!Array.isArray(null==e?void 0:e.cohort_groups)&&{cohort_groups:e.cohort_groups.split(",").map(e=>Number(e))}),!!(null==e?void 0:e.show)&&{show:e.show}),!!(null==e?void 0:e.type)&&{type:e.type})}}var H=i("9jGm"),$=i("XNiG"),Y=i("EY2u"),W=i("LRne"),Q=i("Kj3r"),K=i("1G5W"),J=i("zp1y"),X=i("JIr8"),Z=i("5+tZ"),ee=i("bOdf");let te=(()=>{class e{FEATURE_SELECTOR(){return Object(D.n)(this.featureSelector,e=>e[this.sliceName])}items(){return Object(D.n)(this.FEATURE_SELECTOR(),e=>e.items)}pagination(){return Object(D.n)(this.FEATURE_SELECTOR(),e=>e.pagination)}sorting(){return Object(D.n)(this.FEATURE_SELECTOR(),e=>e.sorting)}loading(){return Object(D.n)(this.FEATURE_SELECTOR(),e=>e.loading)}filters(){return Object(D.n)(this.FEATURE_SELECTOR(),e=>e.filters)}noContent(){return Object(D.n)(this.FEATURE_SELECTOR(),e=>{var t,i;return!(null===(t=Object.keys(e.filters))||void 0===t?void 0:t.length)&&!(null===(i=e.items)||void 0===i?void 0:i.length)&&!e.loading})}noResults(){return Object(D.n)(this.FEATURE_SELECTOR(),e=>{var t,i;return!!(null===(t=Object.keys(e.filters))||void 0===t?void 0:t.length)&&!(null===(i=e.items)||void 0===i?void 0:i.length)&&!e.loading})}hasMoreData(){return Object(D.n)(this.FEATURE_SELECTOR(),e=>e.hasMoreData)}channelFilters(){return Object(D.n)(this.FEATURE_SELECTOR(),e=>e.filterOptions.channels)}cohortFilters(){return Object(D.n)(this.FEATURE_SELECTOR(),e=>e.filterOptions.cohorts)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.ac({token:e,factory:e.\u0275fac}),e})(),ie=(()=>{class e{constructor(e,t,i,s,n,a,r){this._actions$=e,this._store=t,this._backendService=i,this._docLayoutService=s,this._qnaService=n,this._qnaActions=a,this._qnaSelectors=r,this._randomID=Object(o.n)(12),this.ngDestroy=new $.a,this._qnaMapper=new G,this._returnErrorHandler=()=>(this._docLayoutService.toast.showToast({type:"error",message:p.a.t("standard","Internal Server Error")}),Y.a)}ngrxOnIdentifyEffects(){return this._randomID}initializeEffects(){this.search=Object(H.g)(()=>this._actions$.pipe(Object(H.h)(this._qnaActions.search),Object(Q.a)(500),Object(K.a)(this.ngDestroy),Object(J.a)(...this._getSelectorsObservable()),Object(f.a)(([e,...t])=>{const i=this._getSelectorValues(t),s=this.searchBuildRequest(i),n=this._qnaMapper.mapSearchRequestToDto(s);return this._qnaService.questionsList(n,null==e?void 0:e.questionId).pipe(Object(f.a)(e=>{var t,s;return!(null===(s=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.items)||void 0===s?void 0:s.length)&&i.pagination.pageIndex>0?Object(W.a)(this._qnaActions.updatePagination({pagination:Object.assign(Object.assign({},i.pagination),{pageIndex:i.pagination.pageIndex-1})})):Object(W.a)(this._qnaActions.searchSuccess({response:e}))}),Object(X.a)(()=>Object(W.a)(this._qnaActions.searchFailed())))}))),this.afterDeleteSuccess=Object(H.g)(()=>this._actions$.pipe(Object(H.h)(this._qnaActions.afterDeleteQuestion),Object(Q.a)(500),Object(K.a)(this.ngDestroy),Object(J.a)(...this._getSelectorsObservable()),Object(f.a)(([e,...t])=>{const i=this._getSelectorValues(t),s=this.searchBuildRequest(i),n=this._qnaMapper.mapSearchRequestToDto(s);return this._qnaService.questionsList(n).pipe(Object(f.a)(e=>{var t,s;return!(null===(s=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.items)||void 0===s?void 0:s.length)&&i.pagination.pageIndex>0?Object(W.a)(this._qnaActions.updatePagination({pagination:Object.assign(Object.assign({},i.pagination),{pageIndex:i.pagination.pageIndex-1})})):Object(W.a)(this._qnaActions.afterDeleteQuestionSuccess({response:e}))}),Object(X.a)(()=>Object(W.a)(this._qnaActions.searchFailed())))}))),this.updateFilters=Object(H.g)(()=>this._actions$.pipe(Object(H.h)(this._qnaActions.updateFilters),Object(K.a)(this.ngDestroy),Object(f.a)(()=>Object(W.a)(this._qnaActions.search({}))))),this.updatePagination=Object(H.g)(()=>this._actions$.pipe(Object(H.h)(this._qnaActions.updatePagination),Object(K.a)(this.ngDestroy),Object(f.a)(()=>Object(W.a)(this._qnaActions.search({}))))),this.updateSorting=Object(H.g)(()=>this._actions$.pipe(Object(H.h)(this._qnaActions.updateSorting),Object(K.a)(this.ngDestroy),Object(f.a)(()=>Object(W.a)(this._qnaActions.search({}))))),this.loadChannels=Object(H.g)(()=>this._actions$.pipe(Object(H.h)(this._qnaActions.loadChannels),Object(K.a)(this.ngDestroy),Object(f.a)(()=>this._qnaService.getChannelsList({page_size:1}).pipe(Object(f.a)(e=>Object(W.a)(this._qnaActions.loadChannelsSuccess({response:e}))),Object(X.a)(()=>Object(W.a)(this._qnaActions.loadChannelsSuccess({response:[]}))))))),this.loadCohorts=Object(H.g)(()=>this._actions$.pipe(Object(H.h)(this._qnaActions.loadCohorts),Object(K.a)(this.ngDestroy),Object(f.a)(({channels:e})=>this._qnaService.getCohortList(Object.assign(Object.assign({},!!e&&{channels:e}),{page_size:1})).pipe(Object(f.a)(e=>Object(W.a)(this._qnaActions.loadCohortsSuccess({response:e}))),Object(X.a)(()=>Object(W.a)(this._qnaActions.loadCohortsSuccess({response:[]}))))))),this.getCommentReplyIds=Object(H.g)(()=>this._actions$.pipe(Object(H.h)(this._qnaActions.searchSuccess,this._qnaActions.afterDeleteQuestionSuccess),Object(J.a)(this._store.pipe(Object(D.q)(this._qnaSelectors.items()))),Object(K.a)(this.ngDestroy),Object(Z.b)(([,e])=>{const t=[];return e.filter(e=>e.hasReplies&&e.type===m.b.COMMENT&&0===e.replies.length).forEach(e=>{t.push(this._qnaActions.loadReplies({id:e.id}))}),t}))),this.requestReplies=Object(H.g)(()=>this._actions$.pipe(Object(H.h)(this._qnaActions.loadReplies),Object(K.a)(this.ngDestroy),Object(Z.b)(({id:e})=>this._qnaService.getReplies(e).pipe(Object(ee.a)(t=>Object(W.a)(this._qnaActions.loadRepliesSuccess({[e]:t}))),Object(X.a)(this._returnErrorHandler))))),this.getQuestionAnswersIds=Object(H.g)(()=>this._actions$.pipe(Object(H.h)(this._qnaActions.searchSuccess,this._qnaActions.afterDeleteQuestionSuccess),Object(K.a)(this.ngDestroy),Object(J.a)(this._store.pipe(Object(D.q)(this._qnaSelectors.items()))),Object(Z.b)(([,e])=>{const t=[];return e.filter(e=>e.hasReplies&&e.type===m.b.QUESTION&&0===e.replies.length).forEach(e=>{t.push(this._qnaActions.loadAnswers({id:e.id,page:1}))}),t}))),this.requestAnswers=Object(H.g)(()=>this._actions$.pipe(Object(H.h)(this._qnaActions.loadAnswers,this._qnaActions.afterDeleteAnswer),Object(K.a)(this.ngDestroy),Object(J.a)(this._store.pipe(Object(D.q)(this._qnaSelectors.items()))),Object(y.a)(([{id:e},t])=>{const i=t.find(t=>t.id===e);return!!i&&(!(!i.hasReplies||0!==i.replies.length)||i.hasMoreData)}),Object(Z.b)(([{id:e,page:t},i])=>this._qnaService.getAnswers(e,t).pipe(Object(ee.a)(t=>Object(W.a)(this._qnaActions.loadAnswersSuccess({[e]:t}))),Object(X.a)(this._returnErrorHandler)))))}destroy(){this.ngDestroy.next(),this.ngDestroy.complete()}searchSelectors(){return[this._qnaSelectors.pagination,this._qnaSelectors.filters,this._qnaSelectors.sorting]}_getSelectorValues(e){const t={};return e.forEach((e,i)=>{const s=this.searchSelectors()[i].name;t[s]=e}),t}searchBuildRequest(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({page:e.pagination.pageIndex,pageSize:e.pagination.pageSize,sortAttr:e.sorting.columnName,sortDir:e.sorting.dir},!!e.filters.asset_id&&{asset_id:e.filters.asset_id}),!!e.filters.course_id&&{course_id:e.filters.course_id}),!!e.filters.with_voted&&{with_voted:e.filters.with_voted}),!!e.filters.type_question&&{type_question:e.filters.type_question}),!!e.filters.search&&{search:e.filters.search}),!!e.filters.channel_id&&{channel_id:e.filters.channel_id}),!!e.filters.cohort_groups&&{cohort_groups:e.filters.cohort_groups}),!!e.filters.show&&{show:e.filters.show}),!!e.filters.type&&{type:e.filters.type}),!!e.filters.channel_id&&{channel_id:e.filters.channel_id})}_getSelectorsObservable(){return this.searchSelectors().map(e=>this._store.pipe(Object(D.q)(e.call(this._qnaSelectors))))}}return e.\u0275fac=function(t){return new(t||e)(n.oc(H.a),n.oc(D.e),n.oc(T.a),n.oc(x.a),n.oc(E.a),n.oc(O),n.oc(te))},e.\u0275prov=n.ac({token:e,factory:e.\u0275fac}),e})();var se=i("BPI6");let ne=(()=>{class e{constructor(e){this._actions=e,this.INITIAL_STATE={items:[],loading:!1,filters:{},pagination:{pageSize:20,length:0,pageIndex:0},sorting:{columnName:"id",dir:se.a.DESC},filterOptions:{cohorts:[],channels:[]},totalCount:0,hasMoreData:!1,selection:new Map,globalSelection:!1},this._qnaMapper=new G}actionStateChangers(){return[Object(D.o)(this._actions.search,this._actions.afterDeleteQuestion,e=>Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{loading:!0})})),Object(D.o)(this._actions.searchFailed,e=>Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{loading:!1})})),Object(D.o)(this._actions.updateFilters,(e,t)=>Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{filters:Object.assign({},t.filters),pagination:Object.assign(Object.assign({},e[this._sliceName].pagination),{pageIndex:0})})})),Object(D.o)(this._actions.resetFilters,e=>Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{filters:this.INITIAL_STATE.filters,filterOptions:this.INITIAL_STATE.filterOptions})})),Object(D.o)(this._actions.resetPagination,(e,t)=>Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{pagination:Object.assign(Object.assign({},this.INITIAL_STATE.pagination),!!(null==t?void 0:t.keepPageSize)&&{pageSize:e[this._sliceName].pagination.pageSize})})})),Object(D.o)(this._actions.updateSorting,(e,t)=>Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{sorting:t.sorting})})),Object(D.o)(this._actions.loadChannelsSuccess,(e,t)=>Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{filterOptions:Object.assign(Object.assign({},e[this._sliceName].filterOptions),{channels:t.response})})})),Object(D.o)(this._actions.loadCohortsSuccess,(e,t)=>Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{filterOptions:Object.assign(Object.assign({},e[this._sliceName].filterOptions),{cohorts:t.response})})})),Object(D.o)(this._actions.updatePagination,(e,t)=>{const i=t.pagination;return e[this._sliceName].pagination.pageSize!==i.pageSize&&(i.pageIndex=0),Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{pagination:Object.assign({},t.pagination)})})}),Object(D.o)(this._actions.searchSuccess,(e,t)=>{const i=0!==e[this._sliceName].pagination.pageIndex?e[this._sliceName].items.concat(this._qnaMapper.mapItemFromArrayDto(t.response.data.items)):this._qnaMapper.mapItemFromArrayDto(t.response.data.items),s={pageIndex:t.response.data.current_page-1,length:t.response.data.total_count,pageSize:t.response.data.current_page_size};return Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),{items:i,loading:!1,pagination:s,totalCount:t.response.data.total_count,hasMoreData:t.response.data.has_more_data})})}),Object(D.o)(this._actions.loadRepliesSuccess,this._actions.loadAnswersSuccess,this._actions.afterDeleteAnswerSuccess,(e,t)=>{const i=this._setEntityReplies(Object.assign({},e[this._sliceName]),t);return Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),i)})}),Object(D.o)(this._actions.deleteQuestionSuccess,(e,t)=>{const i=this._filterOutDeletedEntities(Object.assign({},e[this._sliceName]),t);return Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),i)})}),Object(D.o)(this._actions.afterDeleteQuestionSuccess,(e,t)=>{const i=Object.assign({},e[this._sliceName]),s=i.items.concat(this._qnaMapper.mapItemFromArrayDto(t.response.data.items));return i.items=s.filter((e,t,i)=>i.findIndex(t=>t.id===e.id)===t),Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign(Object.assign({},e[this._sliceName]),i),{loading:!1})})}),Object(D.o)(this._actions.changeBestAnswer,(e,t)=>{const i=Object.assign({},e[this._sliceName]),{idQuestion:s,idAnswer:n,isBest:a}=t;return i.items=i.items.map(e=>e.id!==s?e:Object.assign(Object.assign(Object.assign({},e),e.id===s&&{bestAnswerIsLoading:!1}),{bestAnswerId:e.bestAnswerId===n?void 0:n,replies:e.replies.map(e=>Object.assign(Object.assign({},e),{isBestAnswer:e.id===n&&a}))})),Object.assign(Object.assign({},e),{[this._sliceName]:Object.assign(Object.assign({},e[this._sliceName]),i)})})]}reducerFactory(e){return this._sliceName=e,Object(D.m)({[e]:this.INITIAL_STATE},...this.actionStateChangers())}_setEntityReplies(e,t){for(const i of Object.keys(t)){if(isNaN(Number(i)))continue;const s=e.items.findIndex(e=>e.id===Number(i));-1!==s&&e.items[s].setReplies(t[i].data.items,{page:t[i].data.current_page,has_more_data:t[i].data.has_more_data,total_count:t[i].data.total_count})}return e}_filterOutDeletedEntities(e,{isAnswer:t,id:i}){let s=[...e.items];if(!t){const t=s.length;return s=s.filter(e=>e.id!==i),t!==s.length&&e.pagination.length--,Object.assign(Object.assign({},e),{items:s})}const n=e=>{var t,s;if(!e.hasOwnProperty("replies"))return e;const a=e.replies.length;return e.replies=null===(t=null==e?void 0:e.replies)||void 0===t?void 0:t.filter(e=>e.id!==i),a!==e.replies.length&&(e.totalCountReplies--,e.hasReplies=0!==e.totalCountReplies),null===(s=e.replies)||void 0===s||s.map(n),e};return s=s.map(n),Object.assign(Object.assign({},e),{items:s})}}return e.\u0275fac=function(t){return new(t||e)(n.oc(O))},e.\u0275prov=n.ac({token:e,factory:e.\u0275fac}),e})();var ae=i("Xt1e"),oe=i("itXk"),re=i("SxV6"),ce=i("/uUt");let le=(()=>{class e{constructor(e,t,i,s,n,a){this._injector=e,this._docLayoutService=t,this._store=i,this._qnaActions=s,this._qnaSelectors=n,this._actions=a,this.dictionary=k,this.refreshView$=new $.a,this.sortingOptions=[],this.blankSlates={noContent:{illustrationName:"take-a-break",title:this.dictionary.blankSlates.noContent.title,description:this.dictionary.blankSlates.noContent.description},noResults:{illustrationName:"no-result-found",title:this.dictionary.blankSlates.noResults.title,description:this.dictionary.blankSlates.noResults.description}}}init(e,t){this._ngUnsubscribe=new $.a,this.widgetSettings=t,this._subscribeToViewChanges(),this._initData()}destroy(){this._ngUnsubscribe.next(),this._ngUnsubscribe.complete(),this.refreshView$.complete(),this.channelListFilter=void 0,this.cohortListFilter=void 0,this._resetFiltersDefaults(),this._resetPagination()}onSearch(e){const t=Object.assign(Object.assign({},this._filters),{search:e});this._manageFilters(t)}onSortingChangedDataBrowser(e){this._resetPagination(!0),this.onSortingChanged({columnName:"id",dir:e})}onPageChanged(e){this._managePagination(e)}onFiltersChanged(e){var t,i;0===Object.keys(e).length&&(null===(t=this.channelListFilter)||void 0===t||t.control.reset(""),null===(i=this.cohortListFilter)||void 0===i||i.control.reset("")),this._manageFilters(e)}onFiltersChangeCustom(e,t,i){this._manageFilters(Object.assign(Object.assign({},this._filters),e));const s=()=>{var e,i;return null!==(i=null===(e=this._filters[t])||void 0===e?void 0:e.length)&&void 0!==i?i:0};i&&i.getActiveOptionsCount.toString()!==s.toString()&&(i.getActiveOptionsCount=s.bind(this))}onSortingChanged(e){this._manageSorting(e)}_subscribeToViewChanges(){this.refreshView$=new $.a,this._injector.get(H.a).pipe(Object(H.h)(this._qnaActions.loadRepliesSuccess,this._qnaActions.loadAnswersSuccess)).subscribe(()=>{this.refreshView$.next()}),this._actions.pipe(Object(H.h)(ae.b)).subscribe(()=>{this.onPageChanged({length:0,pageIndex:0,pageSize:Number(this.widgetSettings.maxDisplayable)})})}_initData(){this._beforeInitData(),Object(oe.a)([this.pagination$]).pipe(Object(re.a)(),Object(K.a)(this._ngUnsubscribe)).subscribe(([])=>{this._store.dispatch(this._qnaActions.search(Object.assign({},!!this.widgetSettings.questionId&&{questionId:this.widgetSettings.questionId})))})}_beforeInitData(){this._initSliceObservables(),this._initializeAdditionalDispatchers(),this._initializeWidgetFilters()}_initSliceObservables(){this.loading$=this._store.pipe(Object(D.q)(this._qnaSelectors.loading())),this.content$=this._store.pipe(Object(D.q)(this._qnaSelectors.items())),this.pagination$=this._store.pipe(Object(D.q)(this._qnaSelectors.pagination()),Object(b.a)(e=>this._pagination=e)),this.filters$=this._store.pipe(Object(D.q)(this._qnaSelectors.filters()),Object(b.a)(e=>this._filters=e)),this.filters$.pipe(Object(K.a)(this._ngUnsubscribe)).subscribe(),this.sorting$=this._store.pipe(Object(D.q)(this._qnaSelectors.sorting())),this.noContent$=this._store.pipe(Object(D.q)(this._qnaSelectors.noContent())),this.noResults$=this._store.pipe(Object(D.q)(this._qnaSelectors.noResults())),this.sortingValue$=this.sorting$.pipe(Object(v.a)(e=>e.dir)),this.sortingLabel$=this.sorting$.pipe(Object(v.a)(e=>{var t,i;return null!==(i=null===(t=this.sortingOptions.find(t=>t.value===e.dir))||void 0===t?void 0:t.label)&&void 0!==i?i:""})),this.hasMoreData$=this._store.pipe(Object(D.q)(this._qnaSelectors.hasMoreData())),this.channelFilters$=this._store.pipe(Object(D.q)(this._qnaSelectors.channelFilters())),this.cohortFilters$=this._store.pipe(Object(D.q)(this._qnaSelectors.cohortFilters()))}_initializeAdditionalDispatchers(){this._store.dispatch(this._qnaActions.updatePagination({pagination:{pageIndex:0,length:0,pageSize:Number(this.widgetSettings.maxDisplayable)}})),this.onSortingChanged({columnName:"id",dir:this.widgetSettings.defaultSortBy}),!this.widgetSettings.showFiltersSelector||this.widgetSettings.selectedChannels||this.widgetSettings.assetId||this.widgetSettings.courseId||this._store.dispatch(this._qnaActions.loadChannels()),this.widgetSettings.selectedChannels&&!this.widgetSettings.assetId&&(this._defaultFilters={channel_id:Number(this.widgetSettings.selectedChannels)},this._store.dispatch(this._qnaActions.updateFilters({filters:this._defaultFilters}))),this.widgetSettings.assetId&&(this._defaultFilters={asset_id:Number(this.widgetSettings.assetId),type_question:3,with_voted:!0},this._store.dispatch(this._qnaActions.updateFilters({filters:this._defaultFilters}))),this.widgetSettings.courseId&&(this._defaultFilters={course_id:Number(this.widgetSettings.courseId),with_voted:!0},this._store.dispatch(this._qnaActions.updateFilters({filters:this._defaultFilters})));const e=this._injector.get(M.g);this.widgetSettings.showFiltersSelector&&e.isOn(M.f.TOGGLE_COHORT)&&(r.c.getInstance().isCurrentUserA(r.c.LEVEL_SUPERADMIN)||r.c.getInstance().isExpert())&&this._store.dispatch(this._qnaActions.loadCohorts(this.widgetSettings.cohortChannelsVisibility))}_initializeWidgetFilters(){this._injector.get(M.h).whenReady().pipe(Object(re.a)(e=>e)).subscribe(()=>{const e=new N(this._injector);this.widgetSettings.showSortBy&&(this.sortingOptions=e.initQASortOptions),this.widgetSettings.showFiltersSelector&&!this.widgetSettings.showQuestionTypeFilter&&(this.showFilter=e.initQAShowFilter,this.typeFilter=e.initQATypeFilter),this.widgetSettings.showQuestionTypeFilter&&(this.questionTypeFilter=e.initQAQuestionTypeFilter),this.channelFilters$.pipe(Object(y.a)(e=>e.length>0),Object(ce.a)((e,t)=>JSON.stringify(e)===JSON.stringify(t)),Object(K.a)(this._ngUnsubscribe)).subscribe(e=>this._addChannelsFilters(e)),this.cohortFilters$.pipe(Object(y.a)(e=>e.length>0),Object(ce.a)((e,t)=>JSON.stringify(e)===JSON.stringify(t)),Object(K.a)(this._ngUnsubscribe)).subscribe(e=>this._addCohortFilters(e))})}_manageFilters(e){this._store.dispatch(this._qnaActions.updateFilters({filters:Object.assign(Object.assign({},this._defaultFilters),e)}))}_addChannelsFilters(e){const t=new N(this._injector);this.channelListFilter=t.asyncChannelFilters}_addCohortFilters(e){var t;const i=new N(this._injector);this.cohortListFilter=i.asyncCohortGroupsFilter({channels:null!==(t=this.widgetSettings.cohortChannelsVisibility)&&void 0!==t?t:[]})}_managePagination(e){this._store.dispatch(this._qnaActions.updatePagination({pagination:e}))}_manageSorting(e){this._store.dispatch(this._qnaActions.updateSorting({sorting:e}))}_resetFiltersDefaults(){this._store.dispatch(this._qnaActions.resetFilters())}_resetPagination(e){this._store.dispatch(this._qnaActions.resetPagination({keepPageSize:e}))}dispatchDeleteItem(e){this._store.dispatch(Object(ae.a)(e))}}return e.\u0275fac=function(t){return new(t||e)(n.oc(n.v),n.oc(x.a),n.oc(D.e),n.oc(O),n.oc(te),n.oc(H.a))},e.\u0275prov=n.ac({token:e,factory:e.\u0275fac}),e})();var de=i("k+4P"),ue=i("ofXK"),he=i("nUpK"),pe=i("u9ID"),ge=i("QjVN"),me=i("rnoZ"),be=i("LHv7");function fe(e,t){1&e&&(n.kc(0,"div",2),n.fc(1,"ui-spinner",3),n.jc()),2&e&&(n.Mb(1),n.Dc("size","md"))}function _e(e,t){if(1&e&&n.fc(0,"widget-title",11),2&e){const e=n.wc(2);n.Dc("widgetTitle",e.widgetTitle)}}const ve=function(){return[]};function ye(e,t){if(1&e&&(n.fc(0,"ui-data-browser-filter-single-selection",28),n.xc(1,"async")),2&e){const e=n.wc(4);let t=null;n.Dc("label",e.datasource.showFilter.label)("options",e.datasource.showFilter.options||n.Hc(6,ve))("key",e.datasource.showFilter.key)("value",(null==(t=n.yc(1,4,e.datasource.filters$))?null:t.show)||"")}}function we(e,t){if(1&e&&n.fc(0,"ui-data-browser-filter-multiple-selection",29),2&e){const e=n.wc(4);n.Dc("label",e.datasource.typeFilter.label)("options",e.datasource.typeFilter.options||n.Hc(3,ve))("key",null==e.datasource.typeFilter?null:e.datasource.typeFilter.key)}}function Ce(e,t){if(1&e&&n.fc(0,"ui-data-browser-filter-single-selection",30),2&e){const e=n.wc(4);n.Dc("label",e.datasource.questionTypeFilter.label)("options",e.datasource.questionTypeFilter.options)("value",e.datasource.questionTypeFilter.value)("defaultValue",e.datasource.questionTypeFilter.defaultValue)("key",e.datasource.questionTypeFilter.key)}}function Se(e,t){if(1&e){const e=n.lc();n.kc(0,"ui-data-browser-filter",31),n.xc(1,"async"),n.kc(2,"doc-data-browser-async-list",32),n.sc("filterChange",function(t){n.Vc(e);const i=n.wc(4);return i.datasource.onFiltersChangeCustom(t,i.datasource.channelListFilter.key)}),n.jc(),n.jc()}if(2&e){const e=n.wc(4);let t=null;n.Dc("value",(null==(t=n.yc(1,8,e.datasource.filters$))?null:t.channel_id)||"")("defaultValue","")("key",e.datasource.channelListFilter.key)("label",e.datasource.channelListFilter.label),n.Mb(2),n.Dc("endpoint",e.datasource.channelListFilter.endpoint)("type","single")("key",e.datasource.channelListFilter.key)("inputFormControl",e.datasource.channelListFilter.control)}}function ke(e,t){if(1&e){const e=n.lc();n.kc(0,"ui-data-browser-filter",31,33),n.xc(2,"async"),n.kc(3,"doc-data-browser-async-list",32),n.sc("filterChange",function(t){n.Vc(e);const i=n.Sc(1),s=n.wc(4);return s.datasource.onFiltersChangeCustom(t,s.datasource.cohortListFilter.key,i)}),n.jc(),n.jc()}if(2&e){const e=n.wc(4);let t=null;n.Dc("value",(null==(t=n.yc(2,8,e.datasource.filters$))?null:t.cohort_groups)||"")("defaultValue","")("key",e.datasource.cohortListFilter.key)("label",e.datasource.cohortListFilter.label),n.Mb(3),n.Dc("endpoint",e.datasource.cohortListFilter.endpoint)("type","multiple")("key",e.datasource.cohortListFilter.key)("inputFormControl",e.datasource.cohortListFilter.control)}}function Te(e,t){if(1&e){const e=n.lc();n.kc(0,"dcb-ui-data-browser-panel-filters",23),n.sc("filtersChange",function(t){return n.Vc(e),n.wc(3).datasource.onFiltersChanged(t)}),n.xc(1,"t"),n.xc(2,"t"),n.xc(3,"t"),n.xc(4,"t"),n.xc(5,"t"),n.ed(6,ye,2,7,"ui-data-browser-filter-single-selection",24),n.ed(7,we,1,4,"ui-data-browser-filter-multiple-selection",25),n.ed(8,Ce,1,5,"ui-data-browser-filter-single-selection",26),n.ed(9,Se,3,10,"ui-data-browser-filter",27),n.ed(10,ke,4,10,"ui-data-browser-filter",27),n.jc()}if(2&e){const e=n.wc(3);n.Dc("fullHeight",e.size>8)("clearFiltersLabel",n.yc(1,11,e.datasource.dictionary.uiDataBrowser.clearFiltersLabel))("closeFiltersLabel",n.yc(2,13,e.datasource.dictionary.uiDataBrowser.closeFiltersLabel))("activeFiltersCountLabelSingular","{activeFiltersCount} "+n.yc(3,15,e.datasource.dictionary.uiDataBrowser.activeFiltersCountLabelSingular))("activeFiltersCountLabelPlural","{activeFiltersCount} "+n.yc(4,17,e.datasource.dictionary.uiDataBrowser.activeFiltersCountLabelPlural))("filtersLabel",n.yc(5,19,e.datasource.dictionary.uiDataBrowser.filtersLabel)),n.Mb(6),n.Dc("ngIf",e.datasource.showFilter),n.Mb(1),n.Dc("ngIf",e.datasource.typeFilter),n.Mb(1),n.Dc("ngIf",e.datasource.questionTypeFilter),n.Mb(1),n.Dc("ngIf",e.datasource.channelListFilter),n.Mb(1),n.Dc("ngIf",e.datasource.cohortListFilter)}}function Ie(e,t){if(1&e){const e=n.lc();n.kc(0,"ui-data-browser-control-search",34),n.sc("changeSearchText",function(t){return n.Vc(e),n.wc(3).datasource.onSearch(t)})("triggerSearch",function(t){return n.Vc(e),n.wc(3).datasource.onSearch(t)}),n.xc(1,"t"),n.xc(2,"t"),n.xc(3,"t"),n.xc(4,"t"),n.jc()}if(2&e){const e=n.wc(3);n.Dc("clearInputLabel",n.yc(1,4,e.datasource.dictionary.uiDataBrowser.clearSearchFiltersLabel))("searchLabel",n.yc(2,6,e.datasource.dictionary.uiDataBrowser.search))("searchPlaceholder",n.yc(3,8,e.datasource.dictionary.uiDataBrowser.searchPlaceholder))("backLabel",n.yc(4,10,e.datasource.dictionary.uiDataBrowser.backLabel))}}function xe(e,t){1&e&&n.gc(0)}const De=function(e){return{totalCount:e}};function Oe(e,t){if(1&e&&(n.kc(0,"ui-data-browser-control"),n.kc(1,"div",35),n.ed(2,xe,1,0,"ng-container",36),n.jc(),n.jc()),2&e){const e=t.ngIf;n.wc(2);const i=n.Sc(6);n.Mb(2),n.Dc("ngTemplateOutlet",i)("ngTemplateOutletContext",n.Ic(2,De,e))}}const Ee=function(e){return{activeSortingOption:e}};function Ae(e,t){if(1&e){const e=n.lc();n.kc(0,"ui-data-browser-control-dropdown",37),n.sc("selectOption",function(t){return n.Vc(e),n.wc(3).datasource.onSortingChangedDataBrowser(t)}),n.xc(1,"async"),n.xc(2,"t"),n.xc(3,"t"),n.xc(4,"async"),n.jc()}if(2&e){const e=n.wc(3);n.Dc("defaultValue",n.yc(1,4,e.datasource.sortingValue$))("options",e.datasource.sortingOptions)("triggerText",n.yc(2,6,e.datasource.dictionary.sortBy))("ariaLabel",n.zc(3,8,"Sort by: {activeSortingOption}",n.Ic(13,Ee,n.yc(4,11,e.datasource.sortingLabel$))))}}function Pe(e,t){1&e&&n.gc(0)}function Me(e,t){if(1&e&&(n.kc(0,"div",38),n.ed(1,Pe,1,0,"ng-container",36),n.jc()),2&e){const e=t.ngIf;n.wc(2);const i=n.Sc(6);n.Mb(1),n.Dc("ngTemplateOutlet",i)("ngTemplateOutletContext",n.Ic(2,De,e))}}const Le=function(e){return[e]};function je(e,t){if(1&e&&(n.kc(0,"div",43),n.kc(1,"span",44),n.gd(2),n.xc(3,"t"),n.jc(),n.kc(4,"a",45),n.gd(5),n.jc(),n.jc()),2&e){const e=n.wc(2).$implicit,t=n.wc(4);n.Mb(2),n.id("",n.yc(3,3,t.datasource.dictionary.relatedTo)," :"),n.Mb(2),n.Dc("routerLink",n.Ic(5,Le,e.relatedItem.path)),n.Mb(1),n.hd(null==e||null==e.relatedItem?null:e.relatedItem.title)}}function Re(e,t){1&e&&n.gc(0)}const Fe=function(e,t){return{question:e,last:t}};function Ne(e,t){if(1&e&&(n.ic(0),n.ed(1,Re,1,0,"ng-container",36),n.hc()),2&e){const e=n.wc(2),t=e.$implicit,i=e.last;n.wc(3);const s=n.Sc(8);n.Mb(1),n.Dc("ngTemplateOutlet",s)("ngTemplateOutletContext",n.Jc(2,Fe,t,i))}}function Ue(e,t){1&e&&n.gc(0)}const ze=function(e,t){return{question:e,isEdit:t}};function qe(e,t){if(1&e&&(n.ic(0),n.ed(1,Ue,1,0,"ng-container",36),n.hc()),2&e){const e=n.wc(2).$implicit;n.wc(3);const t=n.Sc(10);n.Mb(1),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Jc(2,ze,e,e.showEditBox))}}function Ve(e,t){1&e&&(n.kc(0,"dcb-ui-thread-leaf"),n.kc(1,"div",46),n.fc(2,"ui-spinner",47),n.jc(),n.jc())}function Be(e,t){1&e&&n.gc(0)}function Ge(e,t){if(1&e&&(n.ic(0),n.ed(1,Be,1,0,"ng-container",36),n.hc()),2&e){const e=n.wc(3),t=e.$implicit,i=e.last;n.wc(6);const s=n.Sc(8);n.Mb(1),n.Dc("ngTemplateOutlet",s)("ngTemplateOutletContext",n.Jc(2,Fe,t,i))}}function He(e,t){1&e&&n.gc(0)}function $e(e,t){if(1&e&&(n.ic(0),n.ed(1,He,1,0,"ng-container",36),n.hc()),2&e){const e=n.wc(3).$implicit;n.wc(6);const t=n.Sc(10);n.Mb(1),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Jc(2,ze,e,e.showEditBox))}}function Ye(e,t){1&e&&n.gc(0)}function We(e,t){if(1&e&&(n.ic(0),n.ed(1,Ye,1,0,"ng-container",36),n.hc()),2&e){const e=n.wc(2),t=e.$implicit,i=e.last;n.wc(9);const s=n.Sc(8);n.Mb(1),n.Dc("ngTemplateOutlet",s)("ngTemplateOutletContext",n.Jc(2,Fe,t,i))}}function Qe(e,t){1&e&&n.gc(0)}function Ke(e,t){if(1&e&&(n.ic(0),n.ed(1,Qe,1,0,"ng-container",36),n.hc()),2&e){const e=n.wc(2).$implicit;n.wc(9);const t=n.Sc(10);n.Mb(1),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Jc(2,ze,e,e.showEditBox))}}function Je(e,t){if(1&e&&(n.ic(0),n.kc(1,"dcb-ui-thread-leaf"),n.ed(2,We,2,5,"ng-container",16),n.ed(3,Ke,2,5,"ng-container",16),n.jc(),n.hc()),2&e){const e=n.wc().$implicit;n.Mb(2),n.Dc("ngIf",!e.showEditBox),n.Mb(1),n.Dc("ngIf",e.showReplyBox||e.showEditBox)}}function Xe(e,t){if(1&e&&(n.ic(0),n.ed(1,Je,4,2,"ng-container",16),n.hc()),2&e){const e=t.$implicit,i=t.index,s=n.wc(3).$implicit;n.Mb(1),n.Dc("ngIf",!e.hidden&&s.visibleReplies>=i+1)}}const Ze=function(e){return{count:e}};function et(e,t){if(1&e){const e=n.lc();n.kc(0,"dcb-ui-thread-leaf"),n.kc(1,"ui-button-link",49),n.sc("trigger",function(){n.Vc(e);const t=n.wc(3).$implicit;return n.wc(7).showMoreReplies(t)}),n.gd(2),n.xc(3,"t"),n.jc(),n.jc()}if(2&e){const e=n.wc(3).$implicit,t=n.wc(3).$implicit,i=n.wc(4);n.Mb(2),n.id(" ",n.zc(3,1,i.datasource.dictionary.showMore[t.type],n.Ic(4,Ze,e.showMoreCount))," ")}}function tt(e,t){if(1&e&&(n.kc(0,"dcb-ui-thread-leaf"),n.kc(1,"dcb-ui-thread"),n.kc(2,"dcb-ui-thread-root"),n.ed(3,Ge,2,5,"ng-container",16),n.ed(4,$e,2,5,"ng-container",16),n.jc(),n.ed(5,Xe,2,1,"ng-container",48),n.ed(6,et,4,6,"dcb-ui-thread-leaf",16),n.jc(),n.jc()),2&e){const e=n.wc(2).$implicit,t=n.wc(7);n.Mb(3),n.Dc("ngIf",!e.showEditBox),n.Mb(1),n.Dc("ngIf",e.showReplyBox||e.showEditBox),n.Mb(1),n.Dc("ngForOf",e.replies)("ngForTrackBy",t.trackByFn),n.Mb(1),n.Dc("ngIf",e.showMoreCount>0)}}function it(e,t){1&e&&n.gc(0)}const st=function(e){return{question:e,last:!0}};function nt(e,t){if(1&e&&(n.ic(0),n.ed(1,it,1,0,"ng-container",36),n.hc()),2&e){const e=n.wc(3).$implicit;n.wc(6);const t=n.Sc(8);n.Mb(1),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Ic(2,st,e))}}function at(e,t){1&e&&n.gc(0)}function ot(e,t){if(1&e&&(n.ic(0),n.ed(1,at,1,0,"ng-container",36),n.hc()),2&e){const e=n.wc(3).$implicit;n.wc(6);const t=n.Sc(10);n.Mb(1),n.Dc("ngTemplateOutlet",t)("ngTemplateOutletContext",n.Jc(2,ze,e,e.showEditBox))}}function rt(e,t){if(1&e&&(n.kc(0,"dcb-ui-thread-leaf"),n.ed(1,nt,2,4,"ng-container",16),n.ed(2,ot,2,5,"ng-container",16),n.jc()),2&e){const e=n.wc(2).$implicit;n.Mb(1),n.Dc("ngIf",!e.showEditBox),n.Mb(1),n.Dc("ngIf",e.showReplyBox||e.showEditBox)}}function ct(e,t){if(1&e&&(n.ic(0),n.ed(1,tt,7,5,"dcb-ui-thread-leaf",16),n.ed(2,rt,3,2,"dcb-ui-thread-leaf",16),n.hc()),2&e){const e=n.wc().$implicit;n.Mb(1),n.Dc("ngIf",e.replies.length>0),n.Mb(1),n.Dc("ngIf",0===e.replies.length)}}function lt(e,t){if(1&e&&(n.ic(0),n.ed(1,ct,3,2,"ng-container",16),n.hc()),2&e){const e=t.$implicit,i=t.index,s=n.wc(3).$implicit;n.Mb(1),n.Dc("ngIf",!e.hidden&&s.visibleReplies>=i+1)}}const dt=function(e){return["/share/question/",e]};function ut(e,t){if(1&e&&(n.kc(0,"a",52),n.gd(1),n.xc(2,"t"),n.jc()),2&e){const e=n.wc(4).$implicit,t=n.wc(4);n.Dc("routerLink",n.Ic(4,dt,e.id)),n.Mb(1),n.id(" ",n.yc(2,2,t.datasource.dictionary.moreActions.goToSinglePage)," ")}}function ht(e,t){if(1&e){const e=n.lc();n.kc(0,"dcb-ui-thread-leaf"),n.kc(1,"div",50),n.kc(2,"ui-button-link",49),n.sc("trigger",function(){n.Vc(e);const t=n.wc(3).$implicit;return n.wc(4).showMoreReplies(t)}),n.gd(3),n.xc(4,"t"),n.jc(),n.ed(5,ut,3,6,"a",51),n.jc(),n.jc()}if(2&e){const e=n.wc(3).$implicit,t=n.wc(4);n.Mb(3),n.id(" ",n.zc(4,2,t.datasource.dictionary.showMore[e.type],n.Ic(5,Ze,e.showMoreCount))," "),n.Mb(2),n.Dc("ngIf",e.showGoToSingePageOption)}}function pt(e,t){if(1&e&&(n.ic(0),n.ed(1,lt,2,1,"ng-container",48),n.ed(2,ht,6,7,"dcb-ui-thread-leaf",16),n.hc()),2&e){const e=n.wc(2).$implicit,t=n.wc(4);n.Mb(1),n.Dc("ngForOf",e.replies)("ngForTrackBy",t.trackByFn),n.Mb(1),n.Dc("ngIf",e.visibleReplies<e.totalCountReplies)}}function gt(e,t){if(1&e&&(n.kc(0,"dcb-ui-thread"),n.kc(1,"dcb-ui-thread-root"),n.ed(2,je,6,7,"div",42),n.ed(3,Ne,2,5,"ng-container",16),n.ed(4,qe,2,5,"ng-container",16),n.jc(),n.ed(5,Ve,3,0,"dcb-ui-thread-leaf",16),n.ed(6,pt,3,3,"ng-container",16),n.jc()),2&e){const e=n.wc().$implicit,t=n.wc(4);n.Mb(2),n.Dc("ngIf",!t.data.settings.isInlineView&&(null==e||null==e.relatedItem?null:e.relatedItem.title)),n.Mb(1),n.Dc("ngIf",!e.showEditBox),n.Mb(1),n.Dc("ngIf",e.showReplyBox||e.showEditBox||!!t.data.settings.questionId&&t.data.settings.initWithReplyFieldOpen),n.Mb(1),n.Dc("ngIf",(null==e?null:e.hasReplies)&&0===(null==e||null==e.replies?null:e.replies.length)),n.Mb(1),n.Dc("ngIf",(null==e||null==e.replies?null:e.replies.length)>0)}}function mt(e,t){if(1&e&&(n.kc(0,"div",41),n.ed(1,gt,7,5,"dcb-ui-thread",16),n.jc()),2&e){const e=t.$implicit;n.Mb(1),n.Dc("ngIf",!e.hidden)}}const bt=function(e,t,i){return{"has-header":e,"has-content":t,"inline-view":i}};function ft(e,t){if(1&e&&(n.kc(0,"div",39),n.xc(1,"async"),n.ed(2,mt,2,1,"div",40),n.xc(3,"async"),n.jc()),2&e){const e=n.wc(3);let t=null;n.Dc("ngClass",n.Kc(7,bt,e.isHeaderVisible,null==(t=n.yc(1,3,e.datasource.content$))?null:t.length,e.data.settings.isInlineView)),n.Mb(2),n.Dc("ngForOf",n.yc(3,5,e.datasource.content$))("ngForTrackBy",e.trackByFn)}}function _t(e,t){if(1&e&&(n.fc(0,"ui-blank-slate",53),n.xc(1,"t"),n.xc(2,"t")),2&e){const e=n.wc(3);n.Dc("title",n.yc(1,3,e.datasource.blankSlates.noResults.title))("description",n.yc(2,5,e.datasource.blankSlates.noResults.description))("illustrationName",e.datasource.blankSlates.noResults.illustrationName)}}function vt(e,t){1&e&&(n.kc(0,"div",2),n.fc(1,"ui-spinner",3),n.jc()),2&e&&(n.Mb(1),n.Dc("size","md"))}function yt(e,t){if(1&e){const e=n.lc();n.kc(0,"ui-button-text",58),n.sc("trigger",function(){return n.Vc(e),n.wc(4).askTheExpert("open")}),n.xc(1,"t"),n.xc(2,"t"),n.jc()}if(2&e){const e=n.wc(4);n.Dc("label",n.yc(1,5,e.datasource.dictionary.askTheExpert))("ariaLabel",n.yc(2,7,e.datasource.dictionary.askTheExpert))("iconName","asktheexpert")("color","neutral")("iconColor","neutral")}}function wt(e,t){if(1&e){const e=n.lc();n.kc(0,"ui-button-text",59),n.sc("trigger",function(){return n.Vc(e),n.wc(4).onLoadMore()}),n.xc(1,"t"),n.xc(2,"t"),n.jc()}if(2&e){const e=n.wc(4);n.Dc("color","neutral")("iconColor","neutral")("label",n.yc(1,4,e.datasource.dictionary.loadMore))("ariaLabel",n.yc(2,6,e.datasource.dictionary.loadMore))}}function Ct(e,t){if(1&e){const e=n.lc();n.kc(0,"ui-button-text",59),n.sc("trigger",function(){return n.Vc(e),n.wc(4).widgetService.showAllQuestions()}),n.xc(1,"t"),n.xc(2,"t"),n.jc()}if(2&e){const e=n.wc(4);n.Dc("color","neutral")("iconColor","neutral")("label",n.yc(1,4,e.datasource.dictionary.viewQALabel))("ariaLabel",n.yc(2,6,e.datasource.dictionary.viewQALabel))}}function St(e,t){if(1&e&&(n.kc(0,"div",54),n.kc(1,"span",55),n.ed(2,yt,3,9,"ui-button-text",56),n.jc(),n.ed(3,wt,3,8,"ui-button-text",57),n.xc(4,"async"),n.xc(5,"async"),n.ed(6,Ct,3,8,"ui-button-text",57),n.jc()),2&e){const e=n.wc(3);n.Mb(2),n.Dc("ngIf",!!e.data.settings.selectedChannels),n.Mb(1),n.Dc("ngIf",e.data.settings.showLoadMoreLink&&!1===n.yc(4,3,e.datasource.noResults$)&&n.yc(5,5,e.datasource.hasMoreData$)),n.Mb(3),n.Dc("ngIf",e.data.settings.showViewAllLink)}}const kt=function(e){return{"panel-opened":e}};function Tt(e,t){if(1&e&&(n.kc(0,"dcb-ui-data-browser",12,13),n.ed(2,Te,11,21,"dcb-ui-data-browser-panel-filters",14),n.ed(3,Ie,5,12,"ui-data-browser-control-search",15),n.ed(4,Oe,3,4,"ui-data-browser-control",16),n.xc(5,"async"),n.ed(6,Ae,5,15,"ui-data-browser-control-dropdown",17),n.kc(7,"dcb-ui-data-browser-content",18),n.ed(8,Me,2,4,"div",19),n.xc(9,"async"),n.ed(10,ft,4,11,"div",20),n.xc(11,"async"),n.ed(12,_t,3,7,"ui-blank-slate",6),n.xc(13,"async"),n.ed(14,vt,2,1,"div",21),n.xc(15,"async"),n.ed(16,St,7,7,"div",22),n.xc(17,"async"),n.jc(),n.jc()),2&e){const e=n.Sc(1),t=n.wc(2);let i=null,s=null;n.Dc("sticky",!1)("controlsShrinkBreakpoint",t.size>=8?"sm":"md"),n.Mb(2),n.Dc("ngIf",t.data.settings.showFiltersSelector),n.Mb(1),n.Dc("ngIf",t.data.settings.showSearchBar),n.Mb(1),n.Dc("ngIf",t.isHeaderVisible&&t.size<8&&(null==(i=n.yc(5,12,t.datasource.pagination$))?null:i.length)),n.Mb(2),n.Dc("ngIf",t.data.settings.showSortBy),n.Mb(1),n.Dc("ngClass",n.Ic(24,kt,(null==e?null:e.panelsOpen)&&t.size>8)),n.Mb(1),n.Dc("ngIf",t.isHeaderVisible&&t.size>=8&&(null==(s=n.yc(9,14,t.datasource.pagination$))?null:s.length)),n.Mb(2),n.Dc("ngIf",!1===n.yc(11,16,t.datasource.noResults$)),n.Mb(2),n.Dc("ngIf",n.yc(13,18,t.datasource.noResults$)),n.Mb(2),n.Dc("ngIf",n.yc(15,20,t.datasource.loading$)),n.Mb(2),n.Dc("ngIf",t.isFooterVisible&&!1===n.yc(17,22,t.datasource.noContent$))}}function It(e,t){if(1&e&&(n.fc(0,"ui-blank-slate",53),n.xc(1,"t"),n.xc(2,"t")),2&e){const e=n.wc(2);n.Dc("title",n.yc(1,3,e.datasource.blankSlates.noContent.title))("description",n.yc(2,5,e.datasource.blankSlates.noContent.description))("illustrationName",e.datasource.blankSlates.noContent.illustrationName)}}const xt=function(e){return{itemsCount:e}};function Dt(e,t){if(1&e&&(n.ic(0),n.gd(1),n.xc(2,"t"),n.hc()),2&e){const e=n.wc().totalCount,t=n.wc(2);n.Mb(1),n.id(" ",n.zc(2,1,t.datasource.dictionary.totalElements.singular,n.Ic(4,xt,e))," ")}}function Ot(e,t){if(1&e&&(n.gd(0),n.xc(1,"t")),2&e){const e=n.wc().totalCount,t=n.wc(2);n.id(" ",n.zc(1,1,t.datasource.dictionary.totalElements.plural,n.Ic(4,xt,e))," ")}}function Et(e,t){if(1&e&&(n.kc(0,"div",60),n.ed(1,Dt,3,6,"ng-container",61),n.ed(2,Ot,2,6,"ng-template",null,62,n.fd),n.jc()),2&e){const e=t.totalCount,i=n.Sc(3);n.Mb(1),n.Dc("ngIf",1===e)("ngIfElse",i)}}function At(e,t){if(1&e&&(n.kc(0,"ui-button-dropdown-option",66),n.gd(1),n.xc(2,"t"),n.jc()),2&e){const e=t.$implicit;n.Dc("value",e.value)("color",e.color),n.Mb(1),n.id(" ",n.yc(2,3,e.label)," ")}}function Pt(e,t){if(1&e){const e=n.lc();n.kc(0,"ui-message",63),n.sc("like",function(){n.Vc(e);const i=t.question;return n.wc(2).rateEntity(i,"like")})("dislike",function(){n.Vc(e);const i=t.question;return n.wc(2).rateEntity(i,"dislike")})("reply",function(){n.Vc(e);const i=t.question;return n.wc(2).replyAction(i)})("bestReply",function(){n.Vc(e);const i=t.question;return n.wc(2).markAsBestAnswer(i)}),n.xc(1,"discoverMention"),n.xc(2,"t"),n.xc(3,"t"),n.xc(4,"t"),n.xc(5,"t"),n.kc(6,"dcb-ui-message-aside"),n.kc(7,"ui-button-dropdown",64),n.sc("selectOption",function(i){n.Vc(e);const s=t.question;return n.wc(2).questionActionHandler(i,s)}),n.ed(8,At,3,5,"ui-button-dropdown-option",65),n.jc(),n.jc(),n.jc()}if(2&e){const e=t.question,i=t.last,s=n.wc(2);n.Dc("message",n.zc(1,21,e.content,e.mentions))("title",e.owner.fullName)("titleActionText",e.isReply?n.yc(2,24,s.datasource.dictionary.replyLabel[e.type]):n.yc(3,26,s.datasource.dictionary.questionLabel[e.type]))("avatarIcon",e.owner.shortName.length?"":"user")("avatarImageUrl",e.owner.avatar)("avatarText",e.owner.shortName)("dislikeActive",2===(null==e||null==e.votedModel?null:e.votedModel.type))("likeActive",1===(null==e||null==e.votedModel?null:e.votedModel.type))("likes",e.upVotes)("dislikes",e.downVotes)("time",e.createdAt)("showBestReplyButton",e.showBestAnswerBtn||e.isBestAnswer)("bestReplyActive",e.isBestAnswer)("bestReplyLabel",n.yc(4,28,s.datasource.dictionary.bestAnswer))("showReplyButton",e.showReplyOption)("replyButtonLabel",n.yc(5,30,s.datasource.dictionary.replyButton[e.type]))("showDislikeButton",e.isReply||2===e.type)("showLikeButton",e.isReply||2===e.type),n.Mb(7),n.Dc("menuVerticalAlignment",i&&s.enableDropdownAutoPositioning?"above":"below")("selectable",!1),n.Mb(1),n.Dc("ngForOf",e.actions)}}function Mt(e,t){if(1&e&&n.fc(0,"rich-textarea",75),2&e){const e=n.wc().question,t=n.wc(2);n.Dc("inputFormControl",t.contentFormControl)("tributeCollection",(null==e.relatedItem?null:e.relatedItem.kind)===t.relatedKind.COURSE||null==t.discoverMention.config?null:t.discoverMention.config.options)}}function Lt(e,t){if(1&e&&(n.kc(0,"div",76),n.gd(1),n.xc(2,"t"),n.jc()),2&e){const e=n.wc(3);n.Mb(1),n.id(" ",n.yc(2,1,null==e.discoverMention.config?null:e.discoverMention.config.label)," ")}}function jt(e,t){if(1&e){const e=n.lc();n.kc(0,"ui-button-text",77,78),n.sc("click",function(){n.Vc(e);const t=n.Sc(1),i=n.wc().question;return n.wc(2).postNewEntityReply(i,t)}),n.xc(2,"t"),n.jc()}if(2&e){const e=n.wc(3);n.Dc("label",n.yc(2,2,e.datasource.dictionary.confirmReply))("color","accent")}}function Rt(e,t){if(1&e){const e=n.lc();n.ic(0),n.kc(1,"ui-button-text",77),n.sc("click",function(){n.Vc(e);const t=n.wc().question;return n.wc(2).cancelEdit(t)}),n.xc(2,"t"),n.jc(),n.kc(3,"ui-button-text",77,79),n.sc("click",function(){n.Vc(e);const t=n.Sc(4),i=n.wc().question;return n.wc(2).editEntity(i,t)}),n.xc(5,"t"),n.jc(),n.hc()}if(2&e){const e=n.wc(3);n.Mb(1),n.Dc("label",n.yc(2,4,e.datasource.dictionary.cancelEdit))("color","neutral"),n.Mb(2),n.Dc("label",n.yc(5,6,e.datasource.dictionary.confirmEdit))("color","accent")}}const Ft=function(e,t,i,s){return{"reply-textarea-container":e,"edit-textarea-container":t,"has-replies":i,"is-root":s}};function Nt(e,t){if(1&e&&(n.kc(0,"div",67),n.kc(1,"div",68),n.fc(2,"ui-avatar",69),n.kc(3,"span",70),n.gd(4),n.jc(),n.jc(),n.ed(5,Mt,1,2,"rich-textarea",71),n.kc(6,"div",72),n.ed(7,Lt,3,3,"div",73),n.ed(8,jt,3,4,"ui-button-text",74),n.ed(9,Rt,6,8,"ng-container",16),n.jc(),n.jc()),2&e){const e=t.question,i=t.isEdit,s=n.wc(2);n.Dc("ngClass",n.Lc(10,Ft,!i,i,e.totalCountReplies>0,!e.parentID&&!e.directParentId)),n.Mb(2),n.Dc("size","sm")("imageUrl",s.loggedUserInformation.avatarUrl)("text",s.loggedUserInformation.initials)("iconName",null!=s.loggedUserInformation&&s.loggedUserInformation.initials.length?"":"user"),n.Mb(2),n.hd(s.loggedUserInformation.userName),n.Mb(1),n.Dc("ngIf",s.discoverMention.isConfigured),n.Mb(2),n.Dc("ngIf",!(null==s.discoverMention.config||!s.discoverMention.config.options)&&(null==e.relatedItem?null:e.relatedItem.kind)!==s.relatedKind.COURSE),n.Mb(1),n.Dc("ngIf",e.showReplyBox||!!s.data.settings.questionId&&s.data.settings.initWithReplyFieldOpen),n.Mb(1),n.Dc("ngIf",e.showEditBox)}}function Ut(e,t){if(1&e){const e=n.lc();n.kc(0,"doc-ask-expert-panel",80),n.sc("closed$",function(t){return n.Vc(e),n.wc(2).askTheExpert("close",t)}),n.jc()}if(2&e){const e=n.wc(2);n.Dc("channelId",e.data.settings.selectedChannels)("isPageComponent",!1)}}function zt(e,t){if(1&e&&(n.ed(0,_e,1,1,"widget-title",4),n.ed(1,Tt,18,26,"dcb-ui-data-browser",5),n.xc(2,"async"),n.ed(3,It,3,7,"ui-blank-slate",6),n.xc(4,"async"),n.ed(5,Et,4,2,"ng-template",null,7,n.fd),n.ed(7,Pt,9,32,"ng-template",null,8,n.fd),n.ed(9,Nt,10,15,"ng-template",null,9,n.fd),n.ed(11,Ut,1,2,"doc-ask-expert-panel",10)),2&e){const e=n.wc();n.Dc("ngIf",e.widgetTitle),n.Mb(1),n.Dc("ngIf",!1===n.yc(2,4,e.datasource.noContent$)),n.Mb(2),n.Dc("ngIf",n.yc(4,6,e.datasource.noContent$)),n.Mb(8),n.Dc("ngIf",e.showAskTheExpertPanel)}}let qt=(()=>{let e=class extends u.a{constructor(e,t,i,s,o,r,c,l,d,u,h,p,g,b){super(),this.discoverMention=e,this.datasource=t,this.widgetService=i,this._scrollMonitor=s,this._element=o,this._ref=r,this._router=c,this._docLayoutService=l,this._reducerManager=d,this._effectsSources=u,this._qnaReducer=h,this._qnaSelectors=p,this._qnaEffects=g,this._qnaActions=b,this.size=12,this.enableDropdownAutoPositioning=!1,this.deletedItem=new n.q,this.noResults=!1,this.contentFormControl=new a.e,this.showAskTheExpertPanel=!1,this.relatedKind=m.a,this.ngUnsubscribe=new $.a}ngOnInit(){this.fillQuestionInfo()}fillQuestionInfo(){this._setWidgetTitle(),this._initializeSettings(),this._initializeInfiniteScroll(),this.datasource.refreshView$.subscribe(()=>{this._ref.markForCheck()}),this.datasource.noResults$.pipe(Object(K.a)(this.ngUnsubscribe)).subscribe(e=>this.noResults=e);const e=this.data.settings.selectedChannels;this.discoverMention.setConfig(Object.assign(Object.assign({},!!e&&{channel_id:e}),!!this.assetId&&{asset_id:this.assetId}))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.data.settings.isLazyLoading&&this._scrollMonitor.unregisterWidget(this._element),this._qnaEffects.destroy(),this.datasource.destroy()}ngOnChanges(e){e.data&&!e.data.isFirstChange()&&this.fillQuestionInfo()}trackByFn(e,t){return t.id}get loggedUserInformation(){return{userName:r.c.getInstance().getFullName(!0),userEmail:r.c.getInstance().email,avatarUrl:r.c.getInstance().avatar_url,initials:r.c.getInstance().user_initials}}get isFooterVisible(){return this.data.settings.showViewAllLink||!this.noResults&&this.data.settings.showLoadMoreLink||!!this.data.settings.selectedChannels}get isHeaderVisible(){const{settings:e}=this.data;return e.showFiltersSelector||e.showSearchBar||e.showSortBy}questionActionHandler(e,t){switch(e){case"goto_single_question_page":this._router.navigate(["/share/question/",t.id]);break;case"follow_question":case"unfollow_question":t.isFollowing="follow_question"===e;const i=t.isFollowing?"follow":"unFollow";t.setActions(),this.widgetService[i](t.id).subscribe();break;case"edit_comment":case"edit_answer":case"edit_question":this._hideOpenedTextAreas();let s=(new c.a).transform(t.content,t.mentions||[]);s=s.replace(new RegExp(/\\"/,"gm"),'"').replace(new RegExp(/&quot;/,"gm"),"'"),this.contentFormControl.setValue(s),t.showEditBox=!0;break;case"delete_comment":case"delete_question":case"delete_answer":this.widgetService.delete(t).then(e=>{e.subscribe(e=>{this.deletedItem.emit({id:t.id,isReply:t.isReply}),!t.isBestAnswer&&t.isReply||this.datasource.dispatchDeleteItem(e.id)})})}}rateEntity(e,t){var i;const s="like"===t?m.c.LIKE:m.c.DISLIKE;e.isMine||(null===(i=e.votedModel)||void 0===i?void 0:i.type)===s&&e.votedModel.created||this.widgetService.rate(e.id,`${e.type===m.b.QUESTION||e.isReply?"answer":"comment"}${s===m.c.LIKE?"Like":"Dislike"}`).subscribe(t=>{e.downVotes=t.dislikes,e.upVotes=t.likes,e.votedModel={type:s,created:(new Date).toISOString()},this.datasource.refreshView$.next()})}markAsBestAnswer(e){this.datasource.content$.pipe(Object(w.a)(1)).subscribe(t=>{const i=t.find(t=>t.id===e.parentID);i&&i.isMine&&this.widgetService.markAsBest(e,null==i?void 0:i.bestAnswerId).subscribe(()=>{this.datasource.refreshView$.next()})})}showMoreReplies(e){const t=e.replies.filter(e=>!e.hidden).length;e.visibleReplies>t?e.visibleReplies=t:(e.visibleReplies+=e.SHOW_MORE_STEP,e.visibleReplies>e.totalCountReplies&&(e.visibleReplies=e.totalCountReplies),this.datasource.refreshView$.next(),e.type===m.b.QUESTION&&e.hasMoreData&&this.widgetService.loadMoreAnswers({id:e.id,page:e.repliesPage+1}))}replyAction(e){let t=e.showReplyBox;this.contentFormControl.setValue(""),this._hideOpenedTextAreas(),this.data.settings.questionId&&this.data.settings.initWithReplyFieldOpen&&(t=!0,this.data.settings.initWithReplyFieldOpen=!1),e.showReplyBox=!t}postNewEntityReply(e,t){const i=this.contentFormControl.value||"";!i||i.length<=3||t.loading||(t.loading=!0,this.widgetService.reply(e,this.discoverMention.convertMessageForSaving(i)).subscribe(i=>{this.contentFormControl.setValue(""),this.data.settings.questionId&&this.data.settings.initWithReplyFieldOpen&&(this.data.settings.initWithReplyFieldOpen=!1),t.loading=!1,e.showReplyBox=!1,e.setNewReply(i),this.datasource.refreshView$.next()},e=>t.loading=!1))}cancelEdit(e){this.contentFormControl.setValue(""),e.showEditBox=!1}editEntity(e,t){const i=this.contentFormControl.value||"";!i||i.length<=3||t.loading||(t.loading=!0,this.widgetService.edit(e,this.discoverMention.convertMessageForSaving(i)).subscribe(()=>{this.contentFormControl.setValue(""),t.loading=!1,e.content=i,e.showEditBox=!1,this.datasource.refreshView$.next()},e=>t.loading=!1))}onLoadMore(){this.datasource.loading$.pipe(Object(w.a)(1),Object(y.a)(e=>!e),Object(f.a)(()=>this.datasource.hasMoreData$.pipe(Object(w.a)(1),Object(y.a)(e=>!!e))),Object(f.a)(()=>this.datasource.pagination$.pipe(Object(w.a)(1)))).subscribe(e=>{this.datasource.onPageChanged({length:e.length,pageSize:e.pageSize,pageIndex:e.pageIndex+1})})}askTheExpert(e,t){"open"!==e?(this.showAskTheExpertPanel=!1,this.datasource.onPageChanged({length:0,pageIndex:0,pageSize:Number(this.data.settings.maxDisplayable)}),void 0!==t&&t()):this.showAskTheExpertPanel=!0}_setWidgetTitle(){const e=r.c.getInstance().language,t=r.b.getInstance().default_language;this.setWidgetTitle(e,t)}_initializeSettings(){this.data.id&&""!==this.data.id||(this.data.id=Object(o.n)()),this._initializeWidgetStore(),this.data.settings.showLoadMoreLink||this.data.settings.isLazyLoading||(this.data.settings.showSortBy=!1,this.data.settings.showFiltersSelector=!1,this.data.settings.showSearchBar=!1),this.datasource.init(this.data.id,this.data.settings),this.widgetService.checkDeleteConfirmationModalSetting()}_initializeWidgetStore(){this._qnaSelectors.sliceName=`qna_widget__${this.data.id}`,this._qnaSelectors.featureSelector=Object(D.l)(this._qnaSelectors.sliceName),this._qnaActions.widgetId=this.data.id,this._qnaActions.initializeActions(),this._qnaEffects.initializeEffects(),this._reducerManager.addReducer(this._qnaSelectors.sliceName,this._qnaReducer.reducerFactory(this._qnaSelectors.sliceName)),this._effectsSources.addEffects(this._qnaEffects)}_hideOpenedTextAreas(e){const t=e=>{for(const t of e)t.showEditBox&&(t.showEditBox=!1),t.showReplyBox&&(t.showReplyBox=!1),t.replies.length&&this._hideOpenedTextAreas(t.replies)};e?t(e):this.datasource.content$.pipe(Object(w.a)(1)).subscribe(e=>{t(e)})}_initializeInfiniteScroll(){this.data.settings.isLazyLoading&&this._scrollMonitor.registerWidget(this._element).pipe(Object(y.a)(e=>!e.isPageScrollable||e.isInViewport&&e.isBottomCloseEnoughToTheViewport),Object(K.a)(this.ngUnsubscribe)).subscribe(e=>Object(s.a)(this,void 0,void 0,function*(){this.onLoadMore(),this.datasource.refreshView$.next()}))}};return e.\u0275fac=function(t){return new(t||e)(n.ec(de.a),n.ec(le),n.ec(A),n.ec(d.a),n.ec(n.o),n.ec(n.i),n.ec(I.h),n.ec(x.a),n.ec(D.b),n.ec(H.c),n.ec(ne),n.ec(te),n.ec(ie),n.ec(O))},e.\u0275cmp=n.Yb({type:e,selectors:[["doc-questions-and-answers-widget"]],inputs:{data:"data",size:"size",assetId:"assetId",enableDropdownAutoPositioning:"enableDropdownAutoPositioning"},outputs:{deletedItem:"deletedItem"},features:[n.Lb([d.a,le,A,te,ne,O,ie]),n.Jb,n.Kb],decls:4,vars:4,consts:[["class","loading-container-flex",4,"ngIf","ngIfElse"],["widgetContent",""],[1,"loading-container-flex"],[3,"size"],[3,"widgetTitle",4,"ngIf"],["class","question-and-answers-list__data-browser page-list__dcb-ui-data-browser",3,"sticky","controlsShrinkBreakpoint",4,"ngIf"],["class","page-list__blank-slate question-and-answers-list__blank-slate",3,"title","description","illustrationName",4,"ngIf"],["itemsCountTemplate",""],["messageTemplate",""],["textarea",""],[3,"channelId","isPageComponent","closed$",4,"ngIf"],[3,"widgetTitle"],[1,"question-and-answers-list__data-browser","page-list__dcb-ui-data-browser",3,"sticky","controlsShrinkBreakpoint"],["uiDataBrowserComponent",""],[3,"fullHeight","clearFiltersLabel","closeFiltersLabel","activeFiltersCountLabelSingular","activeFiltersCountLabelPlural","filtersLabel","filtersChange",4,"ngIf"],[3,"clearInputLabel","searchLabel","searchPlaceholder","backLabel","changeSearchText","triggerSearch",4,"ngIf"],[4,"ngIf"],["triggerIcon","sort-top","position","end",3,"defaultValue","options","triggerText","ariaLabel","selectOption",4,"ngIf"],[1,"page-list__dcb-ui-data-browser-content--widget",3,"ngClass"],["class","discussion-thread__thread-items-content",4,"ngIf"],["class","discussion-thread__thread-content",3,"ngClass",4,"ngIf"],["class","loading-container-flex",4,"ngIf"],["class","questions-and-answers-footer wrapper-shadow ui-background-surface",4,"ngIf"],[3,"fullHeight","clearFiltersLabel","closeFiltersLabel","activeFiltersCountLabelSingular","activeFiltersCountLabelPlural","filtersLabel","filtersChange"],[3,"label","options","key","value",4,"ngIf"],[3,"label","options","key",4,"ngIf"],[3,"label","options","value","defaultValue","key",4,"ngIf"],[3,"value","defaultValue","key","label",4,"ngIf"],[3,"label","options","key","value"],[3,"label","options","key"],[3,"label","options","value","defaultValue","key"],[3,"value","defaultValue","key","label"],[3,"endpoint","type","key","inputFormControl","filterChange"],["filterCohort",""],[3,"clearInputLabel","searchLabel","searchPlaceholder","backLabel","changeSearchText","triggerSearch"],[1,"count-all-items"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["triggerIcon","sort-top","position","end",3,"defaultValue","options","triggerText","ariaLabel","selectOption"],[1,"discussion-thread__thread-items-content"],[1,"discussion-thread__thread-content",3,"ngClass"],["class","discussion-thread__item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"discussion-thread__item"],["class","relation-info ui-typography-subtitle ui-color-typography-secondary",4,"ngIf"],[1,"relation-info","ui-typography-subtitle","ui-color-typography-secondary"],[1,"label"],[3,"routerLink"],[1,"discussion-thread__thread-loading"],["size","sm"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"trigger"],[1,"question-leaf-cta"],["class","goto-single-page ui-text-link",3,"routerLink",4,"ngIf"],[1,"goto-single-page","ui-text-link",3,"routerLink"],[1,"page-list__blank-slate","question-and-answers-list__blank-slate",3,"title","description","illustrationName"],[1,"questions-and-answers-footer","wrapper-shadow","ui-background-surface"],[1,"btn-align-beginning"],[3,"label","ariaLabel","iconName","color","iconColor","trigger",4,"ngIf"],[3,"color","iconColor","label","ariaLabel","trigger",4,"ngIf"],[3,"label","ariaLabel","iconName","color","iconColor","trigger"],[3,"color","iconColor","label","ariaLabel","trigger"],[1,"ui-typography-subtitle"],[4,"ngIf","ngIfElse"],["pluralLabel",""],[3,"message","title","titleActionText","avatarIcon","avatarImageUrl","avatarText","dislikeActive","likeActive","likes","dislikes","time","showBestReplyButton","bestReplyActive","bestReplyLabel","showReplyButton","replyButtonLabel","showDislikeButton","showLikeButton","like","dislike","reply","bestReply"],["uiSize","sm","triggerType","icon","iconName","more-horizontal","tooltipPosition","above","menuHorizontalAlignment","before",1,"ui-menu-action",3,"menuVerticalAlignment","selectable","selectOption"],["id","ui-button-menu-aria-label",3,"value","color",4,"ngFor","ngForOf"],["id","ui-button-menu-aria-label",3,"value","color"],[3,"ngClass"],[1,"logged-user-information-box","ui-display-flex"],[3,"size","imageUrl","text","iconName"],[1,"user-name-label","ui-typography-heading-5"],[3,"inputFormControl","tributeCollection",4,"ngIf"],[1,"text-area-cta-container"],["class","hint-box ui-typography-subtitle ui-color-typography-secondary",4,"ngIf"],[3,"label","color","click",4,"ngIf"],[3,"inputFormControl","tributeCollection"],[1,"hint-box","ui-typography-subtitle","ui-color-typography-secondary"],[3,"label","color","click"],["btnNewRef",""],["btnEditRef",""],[3,"channelId","isPageComponent","closed$"]],template:function(e,t){if(1&e&&(n.ed(0,fe,2,1,"div",0),n.xc(1,"async"),n.ed(2,zt,12,8,"ng-template",null,1,n.fd)),2&e){const e=n.Sc(3);n.Dc("ngIf",!!t.data.settings.questionId&&n.yc(1,2,t.datasource.loading$))("ngIfElse",e)}},directives:[ue.p,he.Be,pe.a,he.Ib,he.Jb,ue.n,he.Wb,he.Rb,he.Pb,he.Nb,ge.a,he.Mb,he.Kb,ue.u,he.Lb,ue.o,he.df,he.gf,I.k,he.ef,he.M,he.B,he.U,he.zd,he.zf,he.E,he.ye,he.H,he.o,me.a,be.a],pipes:[ue.b,S.b,c.a],styles:[".page-list-base .paginator{margin-top:auto}.page-list-base .paginator--with-massive{margin-top:inherit}.page-list-base .page-list-base__massive-actions-bar{margin-top:auto}.page-list-base .loading-container{position:fixed;top:0;left:0;z-index:10;display:flex;align-items:center;justify-content:center;width:100%;height:100vh;pointer-events:none}.page-list-base .page-list__blank-slate{margin-top:50px}.page-list__table .hyd-table .hyd-table-body{overflow-y:auto}hyd-table.page-list__table,hyd-table.page-list__table div.hyd-table,hyd-table.page-list__table div.hyd-table .hyd-table-body{flex:1 1 auto;display:flex;flex-direction:column;min-height:10px}.page-list__table .hyd-table .hyd-table-head,.page-list__table .hyd-table .hyd-table-row{flex-shrink:0}.page-list__table .skill-group-name{font-weight:600}.page-list__table .table-icon-cell{display:flex;align-items:center;justify-content:center;font-weight:600;text-decoration:none;cursor:pointer}.page-list__table .table-icon-cell.table-icon-cell--no-link{color:var(--hyd-color-typography-primary);cursor:default}.page-list__table .table-icon-cell--with-element{color:var(--ui-color-typography-accent)}.page-list__table .table-icon-cell--without-element{color:var(--ui-color-semantic-alert)}.page-list__table .table-icon-cell--all{color:var(--ui-color-typography-primary);cursor:default}.page-list__table .table-icon-cell .number{text-align:right}.router-outlet:not(.direction-rtl):not(.heracles-root) .page-list__table .table-icon-cell .number{width:50%}.router-outlet.direction-rtl:not(.heracles-root) .page-list__table .table-icon-cell .number{width:auto}.page-list__table .table-icon-cell .table-icon-cell__icon{text-align:left;vertical-align:middle}.router-outlet:not(.direction-rtl):not(.heracles-root) .page-list__table .table-icon-cell .table-icon-cell__icon{width:50%}.router-outlet.direction-rtl:not(.heracles-root) .page-list__table .table-icon-cell .table-icon-cell__icon{width:auto}.router-outlet:not(.direction-rtl):not(.heracles-root) .page-list__table .table-icon-cell .table-icon-cell__icon{padding-left:5px}.router-outlet.direction-rtl:not(.heracles-root) .page-list__table .table-icon-cell .table-icon-cell__icon{padding-right:5px}.page-list__table .table-icon-cell .table-icon-cell__icon.publish-icon:hover{cursor:pointer}.page-list__table .table-icon-cell .zmdi-check-circle,.page-list__table .table-icon-cell .zmdi-circle{line-height:38px}.page-list__table .page-list__name-cell{font-weight:600}.page-list__table .table-thumbnail-cell{display:flex;align-items:center;justify-content:center;height:100%}.page-list__table .table-avatar.table-avatar--default .ui-avatar-wrapper .ui-avatar-body{background-size:125px auto}.page-list__data-browser,.page-list__data-browser .docebo-data-browser,.page-list__data-browser .grid-content-container.mdl-grid .data-browser-content.mdl-cell,.page-list__data-browser .section-wrapper{display:flex;flex:1 1 auto;flex-direction:column;min-height:10px}.page-list__data-browser,.page-list__data-browser .docebo-data-browser,.page-list__data-browser .grid-content-container.mdl-grid,.page-list__data-browser .section-wrapper{height:100%}.page-list__data-browser{border-top:var(--hyd-size-border-xs) solid var(--hyd-color-border-neutral)}.page-list__data-browser .docebo-data-browser #sidebar-filters{width:330px;margin:0;padding:0;background-color:var(--hyd-color-layout-surface)}.page-list__data-browser .docebo-data-browser #sidebar-filters .sidebar-wrapper{border-bottom:none}.page-list__data-browser .docebo-data-browser .full-width-header-container{height:50px}.page-list__data-browser .grid-content-container.mdl-grid .data-browser-content.mdl-cell{height:100%}.page-list__data-browser .mdl-grid{margin:0}.page-list__data-browser .mdl-grid.grid-content-container{flex:1 1 auto;min-height:10px;margin:0}.page-list__data-browser .grid-content-container.mdl-grid>.mdl-cell.mdl-cell--12-col{width:100%;margin:0}.page-list__data-browser .docebo-data-browser .mdl-cell.mdl-cell--9-col{flex-grow:0;width:calc(100% - 330px);margin:0}.page-list__data-browser .docebo-data-browser .mdl-grid .mdl-cell.header-row{margin:0}.page-list__data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .data-tab{display:flex;flex-direction:column;height:100%}.page-list__data-browser .docebo-data-browser #sidebar-filters .sidebar-holder .clear-filters{margin-top:auto;border-top:1px solid var(--ui-color-badge-background-light)}.color-gm__red{color:#de352e}.color-gm__yellow{color:#f5a623}.color-gm__green{color:#64c763}.color-gm__blue{color:#0c509c}.color-gm__light-blue{color:#4861b0}.page-list__dcb-ui-data-browser,.page-list__dcb-ui-data-browser .page-list__dcb-ui-data-browser-content,.page-list__dcb-ui-data-browser .ui-data-browser-content,.page-list__dcb-ui-data-browser .ui-data-browser-wrapper{height:100%;flex:1 1 auto;display:flex;flex-direction:column;min-height:10px}.page-list-base__right-panel-body,.page-list-base__right-panel-body .doc-layout-right-panel-content.scrollable{overflow-y:visible}.question-and-answers-list__blank-slate{display:block}doc-questions-and-answers-widget,ui-message{position:relative;display:flex;flex-direction:column}doc-questions-and-answers-widget a,ui-message a{overflow-wrap:anywhere}doc-questions-and-answers-widget .page-list__dcb-ui-data-browser-content--widget.panel-opened{margin-left:var(--ui-spacing-sm)}:host-context([dir=rtl]) doc-questions-and-answers-widget .page-list__dcb-ui-data-browser-content--widget.panel-opened{margin-right:var(--ui-spacing-sm);margin-left:0}doc-questions-and-answers-widget .discussion-thread__thread-items-content{margin-top:var(--ui-spacing-sm)}doc-questions-and-answers-widget .discussion-thread__thread-content{position:relative;width:100%;box-sizing:border-box}doc-questions-and-answers-widget .discussion-thread__thread-content.has-content{background-color:var(--ui-color-layout-surface);box-shadow:var(--ui-shadow-md) var(--ui-color-layout-shadow)}doc-questions-and-answers-widget .discussion-thread__thread-content.has-header{margin-top:var(--ui-spacing-sm)}doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__item{position:relative;padding:var(--ui-spacing-md) var(--ui-spacing-md) 0}doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__item~.discussion-thread__item{border-top:var(--ui-size-border-xs) solid var(--ui-color-border-neutral)}doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__item~.discussion-thread__item:before{-webkit-clip-path:inset(0 -15px -15px -15px);clip-path:inset(0 -15px -15px -15px)}doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__item .relation-info{margin-bottom:var(--ui-spacing-sm);margin-left:calc(var(--ui-size-avatar-sm) + var(--ui-spacing-xxs));font-weight:var(--ui-typography-weight-semibold)}[dir=rtl] doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__item .relation-info{margin-right:calc(var(--ui-size-avatar-sm) + var(--ui-spacing-xxs));margin-left:unset}doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__item .relation-info a{font-weight:inherit;font-size:inherit}doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__item .relation-info .label{margin-right:var(--ui-spacing-micro)}[dir=rtl] doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__item .relation-info .label{margin-right:unset;margin-left:var(--ui-spacing-micro)}doc-questions-and-answers-widget .discussion-thread__thread-content.inline-view .discussion-thread__item:not(:first-child){padding:0 var(--ui-spacing-md)}doc-questions-and-answers-widget .discussion-thread__thread-content.inline-view .discussion-thread__item~.discussion-thread__item{border-top:unset}doc-questions-and-answers-widget .discussion-thread__thread-content rich-textarea .placehoder-loading{top:0;height:100%}doc-questions-and-answers-widget .discussion-thread__thread-content .fr-emoticon.fr-emoticon-img{font-size:inherit;height:1em;width:1em;min-height:20px;min-width:20px;display:inline-block;margin:0;vertical-align:text-bottom;line-height:1}doc-questions-and-answers-widget .discussion-thread__thread-content .logged-user-information-box{align-items:center;padding-bottom:var(--ui-spacing-xs)}doc-questions-and-answers-widget .discussion-thread__thread-content .logged-user-information-box .user-name-label{padding:0 var(--ui-spacing-xxs)}doc-questions-and-answers-widget .discussion-thread__thread-content .edit-textarea-container{position:relative;padding-bottom:var(--ui-spacing-sm)}doc-questions-and-answers-widget .discussion-thread__thread-content .edit-textarea-container:not(.is-root){margin-right:calc(var(--ui-size-icon-sm) + (var(--ui-spacing-xxs) * 3))}[dir=rtl] doc-questions-and-answers-widget .discussion-thread__thread-content .edit-textarea-container:not(.is-root){margin-right:unset;margin-left:calc(var(--ui-size-icon-sm) + (var(--ui-spacing-xxs) * 3))}doc-questions-and-answers-widget .discussion-thread__thread-content .edit-textarea-container rich-textarea{position:relative;display:block}doc-questions-and-answers-widget .discussion-thread__thread-content .edit-textarea-container.has-replies .text-area-cta-container,doc-questions-and-answers-widget .discussion-thread__thread-content .edit-textarea-container.has-replies rich-textarea{margin-left:calc(var(--ui-size-icon-sm) + (var(--ui-spacing-xxs) * 3))}[dir=rtl] doc-questions-and-answers-widget .discussion-thread__thread-content .edit-textarea-container.has-replies .text-area-cta-container,[dir=rtl] doc-questions-and-answers-widget .discussion-thread__thread-content .edit-textarea-container.has-replies rich-textarea{margin-left:unset;margin-right:calc(var(--ui-size-icon-sm) + (var(--ui-spacing-xxs) * 3))}doc-questions-and-answers-widget .discussion-thread__thread-content .reply-textarea-container{position:relative;margin-left:calc(var(--ui-size-avatar-sm) + var(--ui-spacing-xxs));padding-bottom:var(--ui-spacing-sm);margin-right:calc(var(--ui-size-icon-sm) + (var(--ui-spacing-xxs) * 3))}[dir=rtl] doc-questions-and-answers-widget .discussion-thread__thread-content .reply-textarea-container{margin-right:unset;margin-left:calc(var(--ui-size-icon-sm) + (var(--ui-spacing-xxs) * 3));margin-left:unset;margin-right:calc(var(--ui-size-avatar-sm) + var(--ui-spacing-xxs))}doc-questions-and-answers-widget .discussion-thread__thread-content .text-area-cta-container{display:flex;justify-content:flex-end;margin:var(--ui-spacing-xxs) 0}doc-questions-and-answers-widget .discussion-thread__thread-content .text-area-cta-container .hint-box{flex-grow:1}doc-questions-and-answers-widget .discussion-thread__thread-content .discussion-thread__thread-loading{display:block;padding-top:var(--ui-spacing-xxs);padding-bottom:var(--ui-spacing-md)}doc-questions-and-answers-widget .discussion-thread__thread-content dcb-ui-message-aside{display:flex;flex-direction:column;justify-content:center;padding:0 var(--ui-spacing-xxs)}doc-questions-and-answers-widget .questions-and-answers-footer{display:flex;justify-content:flex-end;margin-top:var(--ui-spacing-sm);padding:var(--ui-spacing-xxs) var(--ui-spacing-sm);box-shadow:var(--ui-shadow-md) var(--ui-color-layout-shadow)}doc-questions-and-answers-widget .questions-and-answers-footer .btn-align-beginning{flex-grow:1}doc-questions-and-answers-widget .count-all-items{margin:auto var(--hyd-spacing-sm)}doc-questions-and-answers-widget .question-leaf-cta{display:flex;align-items:baseline;flex-direction:row}doc-questions-and-answers-widget .question-leaf-cta .goto-single-page{display:inline-block;-webkit-margin-start:var(--ui-spacing-xxs);margin-inline-start:var(--ui-spacing-xxs);text-decoration:underline}doc-questions-and-answers-widget .loading-container-flex{display:flex;padding:var(--ui-spacing-md);align-content:center;justify-content:center}"],encapsulation:2,changeDetection:0}),e=Object(s.b)([Object(l.a)({name:"questionsandanswers-new",module:"shared",settings:F})],e),e})()},yKow:function(e,t,i){var s=i("e/Dd"),n=i("NPxG"),a=i("ekOh"),o=i("u/Db"),r=i("J6Nv"),c=i("49sm"),l=s.getBCHDigit(7973);function d(e,t){return o.getCharCountIndicator(e,t)+4}function u(e,t){var i=0;return e.forEach(function(e){var s=d(e.mode,t);i+=s+e.getBitsLength()}),i}t.from=function(e,t){return r.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,i){if(!r.isValid(e))throw new Error("Invalid QR Code version");void 0===i&&(i=o.BYTE);var a=8*(s.getSymbolTotalCodewords(e)-n.getTotalCodewordsCount(e,t));if(i===o.MIXED)return a;var c=a-d(i,e);switch(i){case o.NUMERIC:return Math.floor(c/10*3);case o.ALPHANUMERIC:return Math.floor(c/11*2);case o.KANJI:return Math.floor(c/13);case o.BYTE:default:return Math.floor(c/8)}},t.getBestVersionForData=function(e,i){var s,n=a.from(i,a.M);if(c(e)){if(e.length>1)return function(e,i){for(var s=1;s<=40;s++)if(u(e,s)<=t.getCapacity(s,i,o.MIXED))return s}(e,n);if(0===e.length)return 1;s=e[0]}else s=e;return function(e,i,s){for(var n=1;n<=40;n++)if(i<=t.getCapacity(n,s,e))return n}(s.mode,s.getLength(),n)},t.getEncodedBits=function(e){if(!r.isValid(e)||e<7)throw new Error("Invalid QR Code version");for(var t=e<<12;s.getBCHDigit(t)-l>=0;)t^=7973<<s.getBCHDigit(t)-l;return e<<12|t}},yoPb:function(e,t,i){"use strict";i.d(t,"a",function(){return h});var s=i("ofXK"),n=i("tfGn"),a=i("S2Qf"),o=i("y0sE"),r=i("lWmL"),c=i("nUpK"),l=i("fXoL"),d=i("l7P3"),u=i("AurG");let h=(()=>{class e{constructor(e,t,i){this.store=e,this.widgetRenderActions=t,this.toggle=i,this.toggle.isOn(a.f.TOGGLE_COACH_PHASE_1)&&this.store.dispatch(this.widgetRenderActions.registerSingleWidget(o.a,"shared"))}}return e.\u0275fac=function(t){return new(t||e)(l.oc(d.e),l.oc(u.a),l.oc(a.g))},e.\u0275mod=l.cc({type:e}),e.\u0275inj=l.bc({providers:[r.a],imports:[[s.c,c.Tb,c.C,c.Ce,n.a,c.Ad,c.F,c.r,c.V,c.ff,c.N,c.ze,c.Kc,c.uc,c.wc,c.vc,c.Hc,c.Ic]]}),e})()},zanj:function(e,t,i){"use strict";i.d(t,"a",function(){return Se});var s=i("ofXK"),n=i("tfGn"),a=i("tk/3"),o=i("fXoL"),r=i("3Pt+"),c=i("wI8q"),l=i("S2Qf"),d=i("GIHc"),u=i("NJk+"),h=i("PsRC"),p=i("TrxT"),g=i("UxkS"),m=i("8EDT"),b=i("Gnzr"),f=i("lJxs"),_=i("IzEk"),v=i("pLZG"),y=i("/uUt"),w=i("Kj3r"),C=i("1G5W"),S=i("/76g"),k=i("Z0T5"),T=i("D/g0"),I=i("+sIT"),x=i("nUpK"),D=i("gvJE");const O=["fileInput"],E=function(){return{category:"app7020"}};function A(e,t){1&e&&(o.fc(0,"ui-notification-inline",8),o.xc(1,"t")),2&e&&o.Dc("title",o.zc(1,1,"The Thumbnail is required for this operation. Please correct this issue!",o.Hc(4,E)))}function P(e,t){1&e&&(o.kc(0,"ui-carousel-item"),o.kc(1,"div",9),o.kc(2,"div",10),o.fc(3,"ui-spinner",11),o.jc(),o.jc(),o.jc()),2&e&&(o.Mb(3),o.Dc("size","sm")("color","neutral"))}function M(e,t){if(1&e){const e=o.lc();o.kc(0,"ui-carousel-item"),o.kc(1,"ui-image-selector",13),o.sc("selectionChange",function(i){o.Vc(e);const s=t.$implicit;return o.wc(2).selectThumbnail(i,s.url)}),o.jc(),o.jc()}if(2&e){const e=t.$implicit,i=t.index,s=o.wc(2);o.Mb(1),o.Dc("size","sm")("selectable",!(1===s.thumbnailService.suggestedImages.length&&s.getsDefaultPlaceholderOnUpload))("src",e.url)("selected",s.isSelectedImage(i))}}function L(e,t){if(1&e&&(o.ic(0),o.ed(1,M,2,4,"ui-carousel-item",12),o.hc()),2&e){const e=o.wc();o.Mb(1),o.Dc("ngForOf",e.thumbnailService.suggestedImages)("ngForTrackBy",e.trackBy)}}function j(e,t){if(1&e){const e=o.lc();o.kc(0,"ui-carousel-item"),o.kc(1,"ui-image-selector",13),o.sc("selectionChange",function(t){o.Vc(e);const i=o.wc();return i.selectThumbnail(t,i.defaultPlaceholderImage.url)}),o.jc(),o.jc()}if(2&e){const e=o.wc();o.Mb(1),o.Dc("size","sm")("selectable",e.thumbnailService.suggestedImages.length>0)("src",e.defaultPlaceholderImage.url)("selected",e.isSelectedImage(e.thumbnailService.suggestedImages.length+1))}}let R=(()=>{class e extends p.a{constructor(e,t,i,s,n,o){super(),this.thumbnailService=e,this.changeRef=t,this.imageCropper=i,this.uploadService=s,this.docLayoutService=n,this.toggle=o,this.thumbnailFormControl=new r.e(""),this.dictionary=new h.a,this.isLoadingImage=!1,this.buttonUploadParams={label:this.dictionary.uploadImageLabel,style:b.a.BUTTON},this.uploadCroppedThumbnail=(e,t)=>{t.subscribe(t=>{const i=t=>{this.isLoadingImage=!1,this.changeRef.markForCheck();let i=this.uploadService.stripQuerystring(t);i.startsWith("http:")||i.startsWith("https:")||(i=i.indexOf("//")>-1?`${window.location.protocol}${i}`:`${window.location.protocol}//${i}`),this.thumbnailFormControl.setValue(i),this.addImageToSuggested(i),e.closeDialog()},s=e=>{const t={name:e.filename_hashed,type:this.uploadService.getFileExtension(e.filename_hashed)};this.uploadService.getSignedUrl(t,"assets","app7020/original",!0,"read").pipe(Object(f.a)(e=>e.data),Object(_.a)(1)).subscribe(e=>i(e.url))},n=(e,t)=>{this.uploadService.uploadToS3(e,t.url).pipe(Object(v.a)(e=>e.type===a.e.Response),Object(_.a)(1)).subscribe(()=>s(t))};(e=>{this.uploadService.getSignedUrl(e,"assets","app7020/original",!1).pipe(Object(f.a)(e=>e.data),Object(_.a)(1)).subscribe(n.bind(this,e))})(t)}),e.getCroppedThumbnail(g.c.FILE),e.isCropperReady=!1}}get getsDefaultPlaceholderOnUpload(){return[c.b.IMAGE,c.b.VIDEO].indexOf(this.contentType)>-1}get defaultPlaceholderImage(){return{url:c.e.assetDefaultImage(this.contentType),name:" "}}ngOnInit(){this.setDefaultAssetImage(),this.thumbnailFormControl.valueChanges.pipe(Object(y.a)(),Object(w.a)(500),Object(C.a)(this.ngUnsubscribe)).subscribe(()=>{this.setDefaultAssetImage()})}setDefaultAssetImage(){this.thumbnailFormControl.value.length&&this.addImageToSuggested(this.thumbnailFormControl.value)}cropUploadedThumbnail(e){if(!e)return;const t=this.dictionary.cropper;this.imageCropper.configureImageEditor({title:t.title,subtitle:t.subtitle,aspectRatio:m.a.RECTANGULAR,minDimensions:{height:u.a.THUMBNAIL_DATA.height,width:u.a.THUMBNAIL_DATA.width},image:{url:e.public_url,name:e.new_filename},actions:[{label:t.cancel,type:g.a.CANCEL,handler:e=>{this.isLoadingImage=!1,this.changeRef.detectChanges(),e.closeDialog()}},{label:t.confirm,type:g.a.CONFIRM,handler:this.uploadCroppedThumbnail}]}),this.imageCropper.openImageEditor()}thumbnailUploadInitialized(){this.isLoadingImage=!0}selectThumbnail(e,t){e&&this.thumbnailFormControl.setValue(t)}isSelectedImage(e){return this.thumbnailService.suggestedImages[e]?this.thumbnailService.suggestedImages[e].url===this.thumbnailFormControl.value:this.defaultPlaceholderImage.url===this.thumbnailFormControl.value}trackBy(e,t){return t.url}uploadNewThumbnail(e){if(!e.target.files[0])return;if(!this.isFileValid(e.target.files[0]))return void this.docLayoutService.toast.showToast({message:S.a.t("standard","Invalid file extension, allowed: {allow}",{allow:this.thumbnailService.uploadOptions.allowedExtensions.join(", ")}),type:"error"});if(this.thumbnailUploadInitialized(),this.toggle.isOn(l.f.TOGGLE_UPLOAD_WITH_POSTOBJECT_V4))return void this.thumbnailService.uploadNewImageForThumbnailCrop(e.target.files[0]).then(e=>{this.isLoadingImage=!1,this.changeRef.markForCheck(),this.thumbnailFormControl.setValue(e),this.addImageToSuggested(e)}).catch(()=>{this.isLoadingImage=!1,this.changeRef.markForCheck()});const t=e=>{this.uploadService.getSignedUrl(e,this.thumbnailService.uploadOptions.collection,this.thumbnailService.uploadOptions.subfolder,!0,"read").pipe(Object(f.a)(e=>e.data),Object(_.a)(1)).subscribe(t=>{const i=this.uploadService.stripQuerystring(t.url);this.fileInput.value="",this.cropUploadedThumbnail({new_filename:e.name,public_url:i})})},i=(e,i)=>{this.uploadService.uploadToS3(e,i.url).pipe(Object(v.a)(e=>e.type===a.e.Response),Object(_.a)(1)).subscribe(s=>t(Object.assign(Object.assign({},e),{name:i.filename_hashed})))};(e=>{this.uploadService.getSignedUrl(e,this.thumbnailService.uploadOptions.collection,this.thumbnailService.uploadOptions.subfolder,!1).pipe(Object(f.a)(e=>e.data),Object(_.a)(1)).subscribe(i.bind(this,e))})(e.target.files[0])}addImageToSuggested(e){e!==this.defaultPlaceholderImage.url&&(this.thumbnailService.suggestedImages.map(e=>e.url).indexOf(e)>-1||(this.thumbnailService.suggestedImages.unshift({url:e,name:" "}),this.changeRef.detectChanges()))}isFileValid(e){const t=this.uploadService.getFileExtension(e.name);return-1!==this.thumbnailService.uploadOptions.allowedExtensions.indexOf(t)}}return e.\u0275fac=function(t){return new(t||e)(o.ec(k.a),o.ec(o.i),o.ec(T.a),o.ec(d.a),o.ec(I.a),o.ec(l.g))},e.\u0275cmp=o.Yb({type:e,selectors:[["her-asset-thumbnail"]],viewQuery:function(e,t){if(1&e&&o.nd(O,1,o.o),2&e){let e;o.Rc(e=o.tc())&&(t.fileInput=e.first)}},inputs:{thumbnailFormControl:"thumbnailFormControl",contentType:"contentType"},features:[o.Lb([d.a]),o.Jb],decls:15,vars:17,consts:[[3,"title",4,"ngIf"],[3,"showSeeAllLink","title"],[4,"ngIf"],[1,"thumbnail-selection"],[1,"description","hyd-typography-subtitle","hyd-color-typography-secondary"],[1,"image-upload-btn",3,"ariaLabel","label","trigger"],["aria-hidden","true","type","file","name","profile_pic","accept",".jpg, .jpeg, .png, .ico, .gif",2,"display","none",3,"change"],["fileInput",""],[3,"title"],[1,"image-wrapper","hyd-background-backdrop"],[1,"spinner-wrapper"],[3,"size","color"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"size","selectable","src","selected","selectionChange"]],template:function(e,t){if(1&e){const e=o.lc();o.ed(0,A,2,5,"ui-notification-inline",0),o.kc(1,"ui-carousel",1),o.xc(2,"t"),o.ed(3,P,4,2,"ui-carousel-item",2),o.ed(4,L,2,2,"ng-container",2),o.ed(5,j,2,4,"ui-carousel-item",2),o.jc(),o.kc(6,"div",3),o.kc(7,"div",4),o.gd(8),o.xc(9,"t"),o.jc(),o.kc(10,"ui-button-raised-primary",5),o.sc("trigger",function(){return o.Vc(e),o.Sc(14).click()}),o.xc(11,"t"),o.xc(12,"t"),o.jc(),o.kc(13,"input",6,7),o.sc("change",function(e){return t.uploadNewThumbnail(e)}),o.jc(),o.jc()}2&e&&(o.Dc("ngIf",t.thumbnailFormControl.touched&&!t.thumbnailFormControl.valid),o.Mb(1),o.Dc("showSeeAllLink",!1)("title",o.yc(2,9,t.dictionary.sectionTitle)),o.Mb(2),o.Dc("ngIf",t.isLoadingImage),o.Mb(1),o.Dc("ngIf",t.thumbnailService.suggestedImages.length),o.Mb(1),o.Dc("ngIf",!t.getsDefaultPlaceholderOnUpload||t.getsDefaultPlaceholderOnUpload&&!t.thumbnailService.suggestedImages.length),o.Mb(3),o.id(" ",o.yc(9,11,t.dictionary.description)," "),o.Mb(2),o.Dc("ariaLabel",o.yc(11,13,t.buttonUploadParams.label))("label",o.yc(12,15,t.buttonUploadParams.label)))},directives:[s.p,x.pb,x.S,x.Jd,x.qb,x.Be,s.o,x.rc],pipes:[D.b],styles:[".color-gm__red[_ngcontent-%COMP%]{color:#de352e}.color-gm__yellow[_ngcontent-%COMP%]{color:#f5a623}.color-gm__green[_ngcontent-%COMP%]{color:#64c763}.color-gm__blue[_ngcontent-%COMP%]{color:#0c509c}.color-gm__light-blue[_ngcontent-%COMP%]{color:#4861b0}[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   ui-notification-inline[_ngcontent-%COMP%]{margin-bottom:var(--hyd-spacing-sm)}[_nghost-%COMP%]  .docebo-button.button-rectangular{margin:0}[_nghost-%COMP%]  image-preview .details-bar{padding:0}[_nghost-%COMP%]  image-preview .image-selection{transform:scale(.6)}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{font-weight:var(--hyd-typography-weight-semibold);margin-bottom:var(--hyd-spacing-md)}[_nghost-%COMP%]   .thumbnail-selection[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .image-upload-btn[_ngcontent-%COMP%]{margin-top:var(--hyd-spacing-xxs)}[_nghost-%COMP%]   .image-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:var(--hyd-size-contentimage-sm);padding-bottom:50%;flex-shrink:0}[_nghost-%COMP%]   .spinner-wrapper[_ngcontent-%COMP%]{position:absolute;z-index:1;width:100%;height:100%;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   ui-carousel-item[_ngcontent-%COMP%]:not(:last-of-type){margin-right:var(--hyd-spacing-sm)}[dir=rtl]   [_nghost-%COMP%]   ui-carousel-item[_ngcontent-%COMP%]:not(:last-of-type){margin-left:var(--hyd-spacing-sm)}"]}),e})();var F=i("Mc4G"),N=i("0m2H"),U=i("rL2y"),z=i("6fYS"),q=i("9jGm"),V=i("lfsz"),B=i("a4yA"),G=i("LRne"),H=i("riY5"),$=i("ScO8"),Y=i("9j9i"),W=i("m06o"),Q=i("Jc1x"),K=i("rnoZ"),J=i("076Y"),X=i("6CNT"),Z=i("5EG7");const ee=["assetSkills"];function te(e,t){if(1&e&&(o.ic(0),o.kc(1,"div",0),o.kc(2,"div",1),o.gd(3),o.xc(4,"t"),o.kc(5,"div",5),o.gd(6),o.xc(7,"t"),o.jc(),o.jc(),o.fc(8,"app7020-asset-tags",6),o.jc(),o.hc()),2&e){const e=o.wc();o.Mb(3),o.id(" ",o.yc(4,4,e.dictionary.tagsTitle)," "),o.Mb(3),o.id(" ",o.yc(7,6,e.dictionary.tagsSubtitle)," "),o.Mb(2),o.Dc("inputFormControl",e.formControl(e.formKeys.TAGS))("preselected",e.preselectedTags)}}function ie(e,t){1&e&&(o.kc(0,"div",11),o.fc(1,"ui-spinner",12),o.jc()),2&e&&(o.Mb(1),o.Dc("size","lg"))}function se(e,t){if(1&e){const e=o.lc();o.kc(0,"skill-chip",15),o.sc("selected",function(t){return o.Vc(e),o.wc(3).skillsShareService.onSkillChipSelected(t)}),o.jc()}2&e&&o.Dc("skill",t.$implicit)}function ne(e,t){if(1&e&&(o.ic(0),o.kc(1,"div",13),o.ed(2,se,1,1,"skill-chip",14),o.jc(),o.hc()),2&e){const e=o.wc(2);o.Mb(2),o.Dc("ngForOf",e.skillsSuggestion)}}function ae(e,t){if(1&e){const e=o.lc();o.ic(0),o.kc(1,"div",7),o.kc(2,"div",1),o.gd(3),o.xc(4,"t"),o.kc(5,"div",5),o.gd(6),o.xc(7,"t"),o.jc(),o.jc(),o.ed(8,ie,2,1,"div",8),o.ed(9,ne,3,1,"ng-container",4),o.kc(10,"app7020-asset-skills",9,10),o.sc("itemSelected",function(t){return o.Vc(e),o.wc().onSkillItemSelected(t)})("itemDeselected",function(t){return o.Vc(e),o.wc().onSkillItemDeselected(t)})("selectedItemsChanged",function(t){return o.Vc(e),o.wc().skillSelectedItemsChanged.emit(t)}),o.jc(),o.jc(),o.hc()}if(2&e){const e=o.wc();o.Mb(3),o.id(" ",o.yc(4,7,e.dictionary.skillsTitle)," "),o.Mb(3),o.id(" ",o.yc(7,9,e.dictionary.skillsSubtitle)," "),o.Mb(2),o.Dc("ngIf",e.skillsSuggestionLoading),o.Mb(1),o.Dc("ngIf",e.skillsSuggestion&&!e.skillsSuggestionLoading),o.Mb(1),o.Dc("inputFormControl",e.skillsFormControl)("preselected",e.skillsPreselection)("mappedToId",!0)}}let oe=(()=>{class e extends p.a{constructor(e,t,i,s){super(),this.skillsShareService=e,this.skillsUserService=t,this.skillsService=i,this.cdr=s,this.formGroup=new r.h({}),this.skillsPreselection=[],this.skillSelectedItemsChanged=new o.q,this.skillSuggestionsPredictionId=new o.q,this.formKeys=u.b,this.preselectedTags=[],this.dictionary={title:S.a.t("app7020","Title"),description:S.a.t("app7020","Description"),fileDescPlaceholder:S.a.t("standard","Type text here..."),detailsTitle:S.a.t("app7020","Details"),tagsTitle:S.a.t("app7020","Tags"),tagsSubtitle:S.a.t("app7020","Assign different tags to improve content search"),skillsTitle:S.a.t("standard","Skills"),skillsSubtitle:S.a.t("app7020","Assign skills to this asset to improve content search")},this.skillsSuggestionLoading=!1,this.skillsSuggestion=null,this._setSkillSectionVisibility()}get skillsFormControl(){var e;return null!==(e=this.formGroup.get(u.b.SKILLS))&&void 0!==e?e:new r.e([])}ngOnInit(){const e=this.formGroup.getRawValue();e.hasOwnProperty(u.b.TAGS)&&(this.preselectedTags=e[u.b.TAGS].map(e=>({id:e,name:e}))),this.skillsShareService.skillsShareActive&&(this.addSkillSuggestionSelectedListener(),this.loadSkillsSuggestion()),this.skillsShareService.skillSuggestionsPredictionId$.pipe(Object(v.a)(e=>Boolean(e))).subscribe(e=>this.skillSuggestionsPredictionId.emit(e)),this._skillSuggestionListeners()}get descriptionPreset(){return B.c.BASE}formControl(e){return this.formGroup.get(e)}get canSeeTags(){const e=V.c.getInstance();return e.isCurrentUserA(V.c.LEVEL_SUPERADMIN)||e.isExpert()}onFocusOut(){this.skillsShareService.skillsShareActive&&this.loadSkillsSuggestion()}addSkillSuggestionSelectedListener(){this.skillsShareService.skillSuggestionSelected$.pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(e=>this.onSkillSuggestionSelected(e))}onSkillItemSelected(e){this.skillsShareService.updateSkillChip(e,!0)}onSkillItemDeselected(e){this.skillsShareService.updateSkillChip(e,!1)}onSkillSuggestionSelected(e){this.assetSkills.toggleElement({id:e.code,name:e.name})}loadSkillsSuggestion(){var e,t;const i=this.formGroup.getRawValue(),s=null==i?void 0:i[u.b.TITLE],n=null!==(t=(new DOMParser).parseFromString(null!==(e=null==i?void 0:i[u.b.DESCRIPTION])&&void 0!==e?e:"","text/html").body.textContent)&&void 0!==t?t:"";(null==s?void 0:s.length)&&(null==n?void 0:n.length)&&this.skillsShareService.loadSuggestions(s,n,H.a.ASSET,this.skillsPreselection.map(e=>e.id))}_setSkillSectionVisibility(){const e=this.skillsService.isCustomSkillOn()?this.skillsUserService.userCanAssignSkills():Object(G.a)(!0);this.showSkillsSection$=e.pipe(Object(f.a)(e=>this.skillsShareService.skillsShareActive&&e))}_skillSuggestionListeners(){this.skillsShareService.skillsSuggestionLoading$.pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{this.skillsSuggestionLoading=e,this.cdr.detectChanges()}),this.skillsShareService.skillsSuggestion$.pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{this.skillsSuggestion=e,this.cdr.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(o.ec($.a),o.ec(Y.a),o.ec(W.a),o.ec(o.i))},e.\u0275cmp=o.Yb({type:e,selectors:[["her-asset-details"]],viewQuery:function(e,t){if(1&e&&o.nd(ee,1),2&e){let e;o.Rc(e=o.tc())&&(t.assetSkills=e.first)}},inputs:{formGroup:"formGroup",skillsPreselection:"skillsPreselection"},outputs:{skillSelectedItemsChanged:"skillSelectedItemsChanged",skillSuggestionsPredictionId:"skillSuggestionsPredictionId"},features:[o.Jb],decls:10,vars:19,consts:[[1,"section-box"],[1,"section-title"],[3,"floating_label","id","inputFormControl","label","focusout"],[3,"charCounterMax","charCounter","inputFormControl","label","placeholderText","preset","focusout"],[4,"ngIf"],[1,"section-subtitle","hyd-color-typography-secondary","hyd-typography-subtitle"],[3,"inputFormControl","preselected"],["id","newAssetSkills",1,"section-box"],["class","skill-suggestion-spinner",4,"ngIf"],[3,"inputFormControl","preselected","mappedToId","itemSelected","itemDeselected","selectedItemsChanged"],["assetSkills",""],[1,"skill-suggestion-spinner"],[3,"size"],[1,"skill-suggestions"],[3,"skill","selected",4,"ngFor","ngForOf"],[3,"skill","selected"]],template:function(e,t){1&e&&(o.kc(0,"div",0),o.kc(1,"div",1),o.gd(2),o.xc(3,"t"),o.jc(),o.kc(4,"textfield",2),o.sc("focusout",function(){return t.onFocusOut()}),o.jc(),o.kc(5,"rich-textarea",3),o.sc("focusout",function(){return t.onFocusOut()}),o.xc(6,"t"),o.jc(),o.jc(),o.ed(7,te,9,8,"ng-container",4),o.ed(8,ae,12,11,"ng-container",4),o.xc(9,"async")),2&e&&(o.Mb(2),o.hd(o.yc(3,13,t.dictionary.detailsTitle)),o.Mb(2),o.Dc("floating_label",!0)("id","informal-file-share-title")("inputFormControl",t.formControl(t.formKeys.TITLE))("label",t.dictionary.title),o.Mb(1),o.Dc("charCounterMax",6e3)("charCounter",!0)("inputFormControl",t.formControl(t.formKeys.DESCRIPTION))("label",t.dictionary.description)("placeholderText",o.yc(6,15,t.dictionary.fileDescPlaceholder))("preset",t.descriptionPreset),o.Mb(2),o.Dc("ngIf",t.canSeeTags),o.Mb(1),o.Dc("ngIf",o.yc(9,17,t.showSkillsSection$)))},directives:[Q.a,K.a,s.p,J.a,X.a,x.Be,s.o,Z.a],pipes:[D.b,s.b],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{font-weight:var(--hyd-typography-weight-semibold);margin-bottom:12px}[_nghost-%COMP%]   rich-textarea[_ngcontent-%COMP%]:not(:last-child){display:block;margin-bottom:var(--hyd-spacing-lg)}.skill-suggestions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.skill-suggestion-spinner[_ngcontent-%COMP%]{text-align:center;margin:15px auto 30px}"]}),e})();var re=i("wsCI"),ce=i("KBLj"),le=i("/hE/");let de=(()=>{class e{constructor(){this.showNextButton=new o.q,this.optionsLabels=(new ce.a).shareWith,this.shareToPeople=c.e.settings.share_to_people!==c.d.CANT_SHARE}changeRadio(e){this.showNextButton.emit("channel_or_people_share"===e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Yb({type:e,selectors:[["her-asset-share-with"]],inputs:{shareFormControl:"shareFormControl"},outputs:{showNextButton:"showNextButton"},decls:8,vars:19,consts:[[1,"section-title"],[3,"boxed","inputFormControl","label","subtitle","value","OnChange"]],template:function(e,t){1&e&&(o.kc(0,"div",0),o.gd(1),o.xc(2,"t"),o.jc(),o.kc(3,"radio",1),o.sc("OnChange",function(e){return t.changeRadio(e)}),o.xc(4,"t"),o.xc(5,"t"),o.jc(),o.kc(6,"radio",1),o.sc("OnChange",function(e){return t.changeRadio(e)}),o.xc(7,"t"),o.jc()),2&e&&(o.Mb(1),o.id("",o.yc(2,11,t.optionsLabels.sectionTitle),":"),o.Mb(2),o.Dc("boxed",!0)("inputFormControl",t.shareFormControl)("label",o.yc(4,13,t.shareToPeople?t.optionsLabels.channelsAndPeople.label:t.optionsLabels.channelsOnly.label))("subtitle",o.yc(5,15,t.shareToPeople?t.optionsLabels.channelsAndPeople.description:t.optionsLabels.channelsOnly.description))("value","channel_or_people_share"),o.Mb(3),o.Dc("boxed",!0)("inputFormControl",t.shareFormControl)("label",t.optionsLabels.onlyMe.label)("subtitle",o.yc(7,17,t.optionsLabels.onlyMe.description))("value","private"))},directives:[le.a],pipes:[D.b],styles:["her-asset-share-with{display:block}her-asset-share-with radio{display:inline-block}her-asset-share-with radio~radio{margin-top:16px}her-asset-share-with .section-title{font-weight:var(--hyd-typography-weight-semibold);margin-bottom:26px}"],encapsulation:2}),e})();var ue=i("irRc"),he=i("aT17"),pe=i("8lUq"),ge=i("QCRO"),me=i("Bl8x"),be=i("Akjt"),fe=i("fN+k"),_e=i("8Ff5"),ve=i("kZHE"),ye=i("wOr6"),we=i("fnIB");const Ce=[N.a];let Se=(()=>{class e{constructor(){}static forChildren(){return{ngModule:e}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.cc({type:e}),e.\u0275inj=o.bc({providers:[...Ce],imports:[[s.c,n.a,q.e.forFeature([...F.a]),x.Cd,z.c,U.a]]}),e})();o.Zc(pe.a,[be.a,fe.a,_e.a,s.u,ve.a,ye.a,s.p,re.a,Q.a,x.Be,x.B,R,oe,r.p,r.i,de],[D.b]),o.Zc(ue.a,[be.a,fe.a,_e.a,s.u,ve.a,ye.a,s.p,re.a,s.n,we.a,x.lc,R,oe,r.p,r.i,de],[D.b]),o.Zc(he.a,[be.a,fe.a,_e.a,s.u,ve.a,ye.a,s.p,re.a,Q.a,R,oe,r.p,r.i,de],[D.b]),o.Zc(ge.a,[be.a,fe.a,_e.a,s.u,ve.a,ye.a,s.p,re.a,we.a,R,oe,r.p,r.i,de],[D.b]),o.Zc(me.a,[be.a,fe.a,_e.a,s.u],[D.b])},zbwl:function(e,t,i){"use strict";i.d(t,"a",function(){return o}),i.d(t,"b",function(){return r}),i.d(t,"c",function(){return c});var s=i("/76g"),n=i("LvDl"),a=i.n(n);function o(){return e=>{const t=e.value;return a.a.isUndefined(t)||a.a.isEmpty(t)||a.a.isNull(t)?null:a.a.isNaN(Number(t))?{integerPositiveWithZeroValidator:s.a.t("standard","Insert a number value")}:Math.floor(Number(t))!==Number(t)?{integerPositiveWithZeroValidator:s.a.t("standard","Enter a value without decimal")}:Number(t)<0?{integerPositiveWithZeroValidator:s.a.t("standard","Enter a value greater than 0")}:null}}function r(){return e=>{const t=e.value;return a.a.isNaN(Number(t))?{markAttendanceHoursValidator:s.a.t("standard","Insert a number value")}:Math.floor(Number(t))!==Number(t)?{markAttendanceHoursValidator:s.a.t("standard","Enter a value without decimal")}:Number(t)>23||Number(t)<0?{markAttendanceHoursValidator:s.a.t("standard","Enter a value between 0 and 23")}:null}}function c(){return e=>{const t=e.value;return a.a.isNaN(Number(t))?{markAttendanceMinutesValidator:s.a.t("standard","Insert a number value")}:Math.floor(Number(t))!==Number(t)?{markAttendanceMinutesValidator:s.a.t("standard","Enter a value without decimal")}:Number(t)>59||Number(t)<0?{markAttendanceMinutesValidator:s.a.t("standard","Enter a value between 0 and 59")}:null}}}}]);